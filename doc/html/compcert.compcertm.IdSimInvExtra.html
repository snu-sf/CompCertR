
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module IdSimInvExtra</title>
<meta name="description" content="Documentation of Coq module IdSimInvExtra" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module IdSimInvExtra</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.Sem.html">Sem</a></span> <span class="id"><a href="compcert.compcertm.SimProg.html">SimProg</a></span> <span class="id"><a href="compcert.compcertm.Skeleton.html">Skeleton</a></span> <span class="id"><a href="compcert.compcertm.Mod.html">Mod</a></span> <span class="id"><a href="compcert.compcertm.ModSem.html">ModSem</a></span> <span class="id"><a href="compcert.compcertm.SimMod.html">SimMod</a></span> <span class="id"><a href="compcert.compcertm.SimModSem.html">SimModSem</a></span> <span class="id"><a href="compcert.compcertm.SimSymb.html">SimSymb</a></span> <span class="id"><a href="compcert.compcertm.SimMemLift.html">SimMemLift</a></span> <span class="id"><a href="compcert.compcertm.Sound.html">Sound</a></span> <span class="id"><a href="compcert.compcertm.SimSymb.html">SimSymb</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.demo.SimMemInjInv.html">SimMemInjInv</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.compcertm.SoundTop.html">SoundTop</a></span> <span class="id"><a href="compcert.compcertm.SimSymbId.html">SimSymbId</a></span> <span class="id"><a href="compcert.compcertm.SimSymbDropInv.html">SimSymbDropInv</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html">CoqlibC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.ValuesC.html">ValuesC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.MapsC.html">MapsC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.AxiomsC.html">AxiomsC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.Ord.html">Ord</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.MemoryC.html">MemoryC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.SmallstepC.html">SmallstepC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Events.html">Events</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.Preservation.html">Preservation</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.IdSimExtra.html">IdSimExtra</a></span>.<br/>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="id">Arguments</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="INJINVDROP">INJINVDROP</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="id">Existing</span> <span class="kwd">Instance</span> <span class="id">SimSymbDropInv.SimMemInvTop</span>.<br/>
<span class="kwd">Local</span> <span class="id">Existing</span> <span class="kwd">Instance</span> <span class="id">SimSymbDropInv.SimSymbDropInv</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SimSymbDropInv_match_globals">SimSymbDropInv_match_globals</a></span> <span class="id">F</span> `{<span class="id"><a href="compcert.compcertm.ASTC.html#HasExternal">HasExternal</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#F">F</a></span>} <span class="id">V</span> <span class="id">sm0</span> <span class="id">sk_src</span> <span class="id">sk_tgt</span> <span class="id">skenv_src</span> <span class="id">skenv_tgt</span> (<span class="id">p</span>: <span class="id"><a href="compcert.common.AST.html#program">AST.program</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#V">V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMSKE</span>: <span class="id"><a href="compcert.compcertm.SimSymbDropInv.html#sim_skenv">SimSymbDropInv.sim_skenv</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.compcertm.SimSymbDropInv.html#mk">SimSymbDropInv.mk</a></span> <span class="id">bot1</span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sk_src">sk_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sk_tgt">sk_tgt</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_src">skenv_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_tgt">skenv_tgt</a></span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.IdSimExtra.html#meminj_match_globals">meminj_match_globals</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_src">skenv_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#p">p</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_tgt">skenv_tgt</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#p">p</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6784')">Proof.</div>
<div class="proofscript" id="proof6784">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">SIMSKE</span>. <span class="id">econs</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="kwd">in</span> *. <span class="id">exists</span> <span class="id">d_src</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#Genv_map_defs_def">Genv_map_defs_def</a></span> <span class="kwd">in</span> <span class="id">FINDSRC</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_bind">o_bind</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_bind2">o_bind2</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_join">o_join</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_map">o_map</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#curry2">curry2</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="kwd">in</span> <span class="id">MAP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des_ifs_safe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">Genv.invert_find_symbol</a></span> <span class="kwd">in</span> <span class="id">Heq0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SIMDEF</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">FIND</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#Genv_map_defs_def_inv">Genv_map_defs_def_inv</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">DEFTGT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_bind">o_bind</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_bind2">o_bind2</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_join">o_join</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_map">o_map</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#curry2">curry2</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_invert_symbol">Genv.find_invert_symbol</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">Heq1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">SIMSYMB1</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#Genv_map_defs_symb">Genv_map_defs_symb</a></span> <span class="kwd">in</span> <span class="id">FINDSRC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SIMSYMB2</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">FINDSRC</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SimSymbDropInv_find_None">SimSymbDropInv_find_None</a></span> <span class="id">F</span> `{<span class="id"><a href="compcert.compcertm.ASTC.html#HasExternal">HasExternal</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#F">F</a></span>} <span class="id">V</span> (<span class="id">p</span>: <span class="id"><a href="compcert.common.AST.html#program">AST.program</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#V">V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">sk_src</span> <span class="id">sk_tgt</span> <span class="id">skenv_src</span> <span class="id">skenv_tgt</span> <span class="id">fptr_src</span> <span class="id">fptr_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINDSRC</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_src">skenv_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#p">p</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fptr_src">fptr_src</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMSKE</span>: <span class="id"><a href="compcert.compcertm.SimSymbDropInv.html#sim_skenv">SimSymbDropInv.sim_skenv</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.compcertm.SimSymbDropInv.html#mk">SimSymbDropInv.mk</a></span> <span class="id">bot1</span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sk_src">sk_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sk_tgt">sk_tgt</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_src">skenv_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_tgt">skenv_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FPTR</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>)) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fptr_src">fptr_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fptr_tgt">fptr_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FPTRDEF</span>: <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fptr_src">fptr_src</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_tgt">skenv_tgt</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#p">p</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fptr_tgt">fptr_tgt</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6785')">Proof.</div>
<div class="proofscript" id="proof6785">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs_safe</span>. <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#Genv_map_defs_def">Genv_map_defs_def</a></span> <span class="kwd">in</span> <span class="id">Heq</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_bind">o_bind</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_bind2">o_bind2</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_join">o_join</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_map">o_map</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#curry2">curry2</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="kwd">in</span> <span class="id">MAP</span>.<br/>
&nbsp;&nbsp;<span class="id">des_ifs_safe</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">Genv.invert_find_symbol</a></span> <span class="kwd">in</span> <span class="id">Heq0</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">SIMSKE</span>. <span class="id">ss</span>. <span class="id">inv</span> <span class="id">FPTR</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SIMDEFINV</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">FIND</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Integers.Ptrofs.add_zero</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#Genv_map_defs_def_inv">Genv_map_defs_def_inv</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">DEFSRC</span>.<br/>
&nbsp;&nbsp;<span class="id">i</span>. <span class="id">revert</span> <span class="id">FINDSRC</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_bind">o_bind</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_bind2">o_bind2</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_join">o_join</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_map">o_map</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#curry2">curry2</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_invert_symbol">Genv.find_invert_symbol</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">Heq1</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id">SIMSYMB3</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">blk_src</span> = <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id">DISJ</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clarify</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#INJINVDROP">INJINVDROP</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="INJINVID">INJINVID</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="INJINVID.P">P</a></span>: <span class="id"><a href="compcert.demo.SimMemInjInv.html#memblk_invariant">SimMemInjInv.memblk_invariant</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SimSymbIdInv_match_globals">SimSymbIdInv_match_globals</a></span> <span class="id">F</span> `{<span class="id"><a href="compcert.compcertm.ASTC.html#HasExternal">HasExternal</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#F">F</a></span>} <span class="id">V</span> <span class="id">sm0</span> <span class="id">sk_src</span> <span class="id">sk_tgt</span> <span class="id">skenv_src</span> <span class="id">skenv_tgt</span> (<span class="id">p</span>: <span class="id"><a href="compcert.common.AST.html#program">AST.program</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#V">V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMSKE</span>: <span class="id"><a href="compcert.compcertm.SimMemInjInvC.html#sim_skenv_inj">SimMemInjInvC.sim_skenv_inj</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.compcertm.SimMemInjInvC.html#mk">SimMemInjInvC.mk</a></span> <span class="id">bot1</span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sk_src">sk_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sk_tgt">sk_tgt</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_src">skenv_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_tgt">skenv_tgt</a></span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.IdSimExtra.html#meminj_match_globals">meminj_match_globals</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_src">skenv_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#p">p</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_tgt">skenv_tgt</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#p">p</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6786')">Proof.</div>
<div class="proofscript" id="proof6786">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">SIMSKE</span>. <span class="id">inv</span> <span class="id">INJECT</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">IMAGE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span> <span class="kwd">in</span> <span class="id">FINDSRC</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">i</span>. <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">exploit</span> <span class="id">INVCOMPAT</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">DOMAIN</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span> <span class="kwd">in</span> <span class="id">FINDSRC</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="SimSymbIdInv_find_None">SimSymbIdInv_find_None</a></span> <span class="id">F</span> `{<span class="id"><a href="compcert.compcertm.ASTC.html#HasExternal">HasExternal</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#F">F</a></span>} <span class="id">V</span> (<span class="id">p</span>: <span class="id"><a href="compcert.common.AST.html#program">AST.program</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#V">V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">sk_src</span> <span class="id">sk_tgt</span> <span class="id">skenv_src</span> <span class="id">skenv_tgt</span> <span class="id">fptr_src</span> <span class="id">fptr_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINDSRC</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_src">skenv_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#p">p</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fptr_src">fptr_src</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMSKE</span>: <span class="id"><a href="compcert.compcertm.SimMemInjInvC.html#sim_skenv_inj">SimMemInjInvC.sim_skenv_inj</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.compcertm.SimMemInjInvC.html#mk">SimMemInjInvC.mk</a></span> <span class="id">bot1</span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sk_src">sk_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sk_tgt">sk_tgt</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_src">skenv_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_tgt">skenv_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FPTR</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>)) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fptr_src">fptr_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fptr_tgt">fptr_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FPTRDEF</span>: <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fptr_src">fptr_src</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_tgt">skenv_tgt</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#p">p</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fptr_tgt">fptr_tgt</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6787')">Proof.</div>
<div class="proofscript" id="proof6787">
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="id">skenv_tgt</span> <span class="id">p</span>) <span class="id">fptr_tgt</span>) <span class="id">eqn</span>:<span class="id">FIND</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">SIMSKE</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">inv</span> <span class="id">INJECT</span>. <span class="id">inv</span> <span class="id">FPTR</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id">IMAGE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs_safe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span> <span class="kwd">in</span> <span class="id">Heq</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">i</span>. <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Integers.Ptrofs.add_zero</a></span> <span class="kwd">in</span> <span class="id">FIND</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;- <span class="id">clarify</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#INJINVID">INJINVID</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.IdSimAsmExtra.html">IdSimAsmExtra</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.mktac.html">mktac</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="UNFREEPARALLEL">UNFREEPARALLEL</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="UNFREEPARALLEL.P_tgt">P_tgt</a></span> : <span class="id"><a href="compcert.demo.SimMemInjInv.html#memblk_invariant">SimMemInjInv.memblk_invariant</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Instance</span> <span class="id"><a name="SimMemInvP">SimMemInvP</a></span> : <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.class">SimMem.class</a></span> := <span class="id"><a href="compcert.compcertm.SimMemInjInvC.html#SimMemInjInv">SimMemInjInvC.SimMemInjInv</a></span> <span class="id"><a href="compcert.demo.SimMemInjInv.html#top_inv">SimMemInjInv.top_inv</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#UNFREEPARALLEL.P_tgt">P_tgt</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_unfree_parallel">Mem_unfree_parallel</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sm0</span> <span class="id">sm_arg</span> <span class="id">sm_ret</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.t">SimMem.t</a></span>) <span class="id">blk_src</span> <span class="id">ofs_src</span> <span class="id">ofs_tgt</span> <span class="id">sz</span> <span class="id">blk_tgt</span> <span class="id">delta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m_src1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DELTA</span>: <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>).(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#blk_src">blk_src</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#blk_tgt">blk_tgt</a></span>, <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#delta">delta</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VAL</span>: <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ofs_tgt">ofs_tgt</a></span> = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ofs_src">ofs_src</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#delta">delta</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MLE0</span>: <span class="id">SimMemInjInv.le</span>' <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm_arg">sm_arg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FREESRC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">SimMem.src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#blk_src">blk_src</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ofs_src">ofs_src</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ofs_src">ofs_src</a></span> + <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sz">sz</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">SimMem.src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm_arg">sm_arg</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FREETGT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">SimMem.tgt</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#blk_tgt">blk_tgt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ofs_tgt">ofs_tgt</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ofs_tgt">ofs_tgt</a></span> + <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sz">sz</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">SimMem.tgt</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm_arg">sm_arg</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF0</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF1</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm_arg">sm_arg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF2</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm_ret">sm_ret</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MLE1</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.le">SimMem.le</a></span> (<span class="id"><a href="compcert.compcertm.SimMemLift.html#SimMemLift.lift">SimMemLift.lift</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm_arg">sm_arg</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm_ret">sm_ret</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNFREESRC</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">SimMem.src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm_ret">sm_ret</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#blk_src">blk_src</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ofs_src">ofs_src</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ofs_src">ofs_src</a></span> + <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sz">sz</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#m_src1">m_src1</a></span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">sm1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">MSRC</span>: <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">SimMem.src</a></span>) = <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#m_src1">m_src1</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MINJ</span>: <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>).(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) = <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm_ret">sm_ret</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>).(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>)&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">FREETGT</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">SimMem.tgt</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm_ret">sm_ret</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#blk_tgt">blk_tgt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ofs_tgt">ofs_tgt</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ofs_tgt">ofs_tgt</a></span> + <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sz">sz</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">SimMem.tgt</a></span>)&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MWF</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm1">sm1</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MLE</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.le">SimMem.le</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm1">sm1</a></span>&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6788')">Proof.</div>
<div class="proofscript" id="proof6788">
&nbsp;&nbsp;<span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">sm0</span> <span class="kwd">as</span> [<span class="id">sm0</span> <span class="id">mem_inv_src0</span> <span class="id">mem_inv_tgt0</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">sm_arg</span> <span class="kwd">as</span> [<span class="id">sm_arg</span> <span class="id">mem_inv_src_arg</span> <span class="id">mem_inv_tgt_arg</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">sm_ret</span> <span class="kwd">as</span> [<span class="id">sm_ret</span> <span class="id">mem_inv_src_ret</span> <span class="id">mem_inv_tgt_ret</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">MWF0</span> <span class="kwd">as</span> [<span class="id">MWF0</span> <span class="id">_</span> <span class="id">SATTGT0</span> <span class="id">INVRANGESRC0</span> <span class="id">INVRANGETGT0</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">MWF1</span> <span class="kwd">as</span> [<span class="id">MWF1</span> <span class="id">_</span> <span class="id">SATTGT1</span> <span class="id">INVRANGESRC1</span> <span class="id">INVRANGETGT1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">MWF2</span> <span class="kwd">as</span> [<span class="id">MWF2</span> <span class="id">_</span> <span class="id">SATTGT2</span> <span class="id">INVRANGESRC2</span> <span class="id">INVRANGETGT2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">MLE0</span> <span class="kwd">as</span> [<span class="id">MLE0</span> <span class="id">MINVEQSRC0</span> <span class="id">MINVEQTGT0</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">MLE1</span> <span class="kwd">as</span> [<span class="id">MLE1</span> <span class="id">MINVEQSRC1</span> <span class="id">MINVEQTGT1</span>].<br/>
&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">DELTA0</span>: <span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm_ret</span> <span class="id">blk_src</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">blk_tgt</span>, <span class="id">delta</span>)).<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MLE0</span>. <span class="id">inv</span> <span class="id">MLE1</span>. <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id">INCR0</span>. <span class="tactic">eapply</span> <span class="id">INCR</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">cinv</span> <span class="id">MWF0</span>. <span class="id">cinv</span> <span class="id">MWF2</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.IdSimAsmExtra.html#Mem_unfree_parallel_inject">Mem_unfree_parallel_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="id">cinv</span> <span class="id">PUBLIC</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_align">Mem.mi_align</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">exploit</span> <span class="id">PERM</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="id">instantiate</span> (1:=<span class="id">p</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">MLE1</span>. <span class="tactic">eapply</span> <span class="id">MAXSRC</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">DELTA</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="id">inv</span> <span class="id">MWF0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">MLE1</span>. <span class="id">ss</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">MAXSRC</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">DELTA</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">MAXSRC</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">DELTA</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="id">inv</span> <span class="id">MLE1</span>. <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id">MAXTGT</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_free_noperm">Mem_free_noperm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">DELTA</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">des</span>. <span class="id">eexists</span> (<span class="id"><a href="compcert.demo.SimMemInjInv.html#mk">SimMemInjInv.mk</a></span> (<span class="id"><a href="compcert.compcertm.SimMemInjC.html#update">SimMemInjC.update</a></span> <span class="id">sm0</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="id">mem_inv_src_ret</span> <span class="id">mem_inv_tgt_ret</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MLE0</span>. <span class="id">inv</span> <span class="id">MLE1</span>. <span class="id">inv</span> <span class="id">MWF1</span>. <span class="id">inv</span> <span class="id">MWF2</span>. <span class="id">esplits</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; [<span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>|..].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>. <span class="tactic">rewrite</span> <span class="id">SRCPARENTEQ</span>. <span class="tactic">eapply</span> <span class="id">SRCEXT1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#src_private">SimMemInj.src_private</a></span>, <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">SimMemInj.valid_blocks</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="id">ii</span>; <span class="id">des</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#loc_unmapped_frozen">SimMemInj.loc_unmapped_frozen</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_valid_block_unfree">Mem_valid_block_unfree</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">UNFREESRC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_unchanged_on">Mem.valid_block_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>, <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">SimMemInj.valid_blocks</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="id">ii</span>; <span class="id">des</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">r</span>. <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">blk_src</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">subst</span>. <span class="id">clarify</span>. <span class="tactic">eapply</span> <span class="id">TGTEXT</span> <span class="kwd">in</span> <span class="id">PR</span>. <span class="id">des</span>. <span class="id">r</span> <span class="kwd">in</span> <span class="id">PR</span>. <span class="tactic">eapply</span> <span class="id">PR</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.IdSimAsmExtra.html#Mem_unfree_perm_restore">Mem_unfree_perm_restore</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">UNFREESRC</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">MAXSRC0</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">PUBLIC</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">TGTPARENTEQ</span> <span class="kwd">in</span> <span class="id">PR</span>. <span class="tactic">eapply</span> <span class="id">TGTEXT1</span> <span class="kwd">in</span> <span class="id">PR</span>. <span class="id">des</span>. <span class="id">r</span> <span class="kwd">in</span> <span class="id">PR</span>. <span class="tactic">eapply</span> <span class="id">PR</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_preserves_tgt">SimMemInj.frozen_preserves_tgt</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">MAXSRC0</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">PUBLIC1</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_preserves_tgt">SimMemInj.frozen_preserves_tgt</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H0</span> <span class="id">UNFREESRC</span> <span class="id">n</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">TGTPARENTEQ</span> <span class="kwd">in</span> <span class="id">PR</span>. <span class="tactic">eapply</span> <span class="id">TGTEXT1</span> <span class="kwd">in</span> <span class="id">PR</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_valid_block_unfree">Mem_valid_block_unfree</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">UNFREE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_unchanged_on">Mem.valid_block_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span> <span class="kwd">in</span> <span class="id">SRCUNCHANGED0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span> <span class="kwd">in</span> <span class="id">SRCUNCHANGED</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etrans</span>; <span class="tactic">eauto</span>. <span class="id">etrans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_nextblock_unfree">Mem_nextblock_unfree</a></span> <span class="kwd">in</span> <span class="id">UNFREESRC</span>. <span class="tactic">rewrite</span> <span class="id">UNFREESRC</span>. <span class="id">refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span> <span class="kwd">in</span> <span class="id">TGTUNCHANGED0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span> <span class="kwd">in</span> <span class="id">TGTUNCHANGED</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etrans</span>; <span class="tactic">eauto</span>. <span class="id">etrans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_nextblock_unfree">Mem_nextblock_unfree</a></span> <span class="kwd">in</span> <span class="id">UNFREE</span>. <span class="tactic">rewrite</span> <span class="id">UNFREE</span>. <span class="id">refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.SimMemInjInv.html#private_unchanged_on_invariant">SimMemInjInv.private_unchanged_on_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">INVRANGETGT2</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_unchanged_on">Mem_unfree_unchanged_on</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">INVRANGETGT0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="id">clarify</span>. <span class="tactic">eapply</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:=<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs_src</span> + <span class="id">delta</span>). <span class="tactic">clear</span> - <span class="id">a</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">INVRANGESRC0</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">exploit</span> <span class="id">INVRANGESRC2</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">INVRANGETGT0</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="id">r</span>. <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">blk_src</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">subst</span>. <span class="id">clarify</span>. <span class="id">r</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.IdSimAsmExtra.html#Mem_unfree_perm_restore">Mem_unfree_perm_restore</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">UNFREESRC</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">MAXSRC0</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">PUBLIC</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id">INVRANGETGT1</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">r</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">eapply</span> <span class="id">H4</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_preserves_tgt">SimMemInj.frozen_preserves_tgt</a></span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">MAXSRC0</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">PUBLIC1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_preserves_tgt">SimMemInj.frozen_preserves_tgt</a></span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H0</span> <span class="id">UNFREESRC</span> <span class="id">n</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">FROZENHI</span>: <span class="id"><a href="compcert.common.SimMemInj.html#frozen">SimMemInj.frozen</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm0</span>) (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm_ret</span>) (<span class="id"><a href="compcert.common.SimMemInj.html#src_parent_nb">SimMemInj.src_parent_nb</a></span> <span class="id">sm0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">SimMemInj.tgt_parent_nb</a></span> <span class="id">sm0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ + <span class="id">econs</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm_arg</span> <span class="id">b_src</span>) <span class="id">eqn</span>: <span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">p</span>. <span class="id">erewrite</span> <span class="id">INCR0</span> <span class="kwd">in</span> <span class="id">NEW0</span>; <span class="id">et</span>. <span class="id">clarify</span>. <span class="tactic">eapply</span> <span class="id">FROZEN</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#inject_separated_frozen">SimMemInj.inject_separated_frozen</a></span> <span class="kwd">in</span> <span class="id">FROZEN0</span>. <span class="id">exploit</span> <span class="id">FROZEN0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">SRCPARENTEQNB</span>, <span class="id">TGTPARENTEQNB</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">clear</span> - <span class="id">H</span> <span class="id">H0</span> <span class="id">SRCLE1</span> <span class="id">TGTLE1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id">sm_arg</span>)) <span class="id">b_src</span>) <span class="tactic">by</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm_arg</span>)) <span class="id">b_tgt</span>) <span class="tactic">by</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le_trans">Pos.le_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>. <span class="id">etrans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">SRCPARENTEQ</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">ii</span>. <span class="tactic">split</span>; <span class="id">et</span>. <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">INVRANGESRC0</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_unchanged_on">Mem_unfree_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ss</span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">SRCEXT</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span>, <span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">clarify</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>. <span class="id">etrans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">TGTPARENTEQ</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">ii</span>. <span class="tactic">split</span>; <span class="id">et</span>. <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">INVRANGETGT0</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_unchanged_on">Mem_unfree_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">TGTEXT</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">Mem.address_inject</a></span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">PUBLIC</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_shortened">SimMemInj.frozen_shortened</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.IdSimAsmExtra.html#Mem_unfree_perm_restore">Mem_unfree_perm_restore</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">UNFREESRC</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">MAXSRC0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.IdSimAsmExtra.html#Mem_unfree_perm_restore">Mem_unfree_perm_restore</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">UNFREE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">MAXTGT0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">Unshelve</span>. <span class="tactic">apply</span> 0.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#UNFREEPARALLEL">UNFREEPARALLEL</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.AsmC.html">AsmC</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_states">match_states</a></span> <span class="id">P0</span> <span class="id">P1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">skenv_link_tgt</span>: <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.t">SkEnv.t</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ge_src</span> <span class="id">ge_tgt</span>: <span class="id"><a href="compcert.x86.Asm.html#genv">genv</a></span>)<br/>
&nbsp;&nbsp;: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>-&gt; <span class="id"><a href="compcert.compcertm.AsmC.html#state">AsmC.state</a></span> -&gt; <span class="id"><a href="compcert.compcertm.AsmC.html#state">AsmC.state</a></span> -&gt; <span class="id">SimMemInjInv.t</span>' -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="match_states_intro">match_states_intro</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j</span> <span class="id">init_rs_src</span> <span class="id">init_rs_tgt</span> <span class="id">rs_src</span> <span class="id">rs_tgt</span> <span class="id">m_src</span> <span class="id">m_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sm0</span> : <span class="id">SimMemInjInv.t</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGREE</span>: <span class="id"><a href="compcert.compcertm.AsmStepInj.html#agree">AsmStepInj.agree</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#rs_src">rs_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#rs_tgt">rs_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AGREEINIT</span>: <span class="id"><a href="compcert.compcertm.AsmStepInj.html#agree">AsmStepInj.agree</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#init_rs_src">init_rs_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#init_rs_tgt">init_rs_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCOMPATSRC</span>: <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#m_src">m_src</a></span> = <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>).(<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCOMPATTGT</span>: <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#m_tgt">m_tgt</a></span> = <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>).(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCOMPATINJ</span>: <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#j">j</a></span> = <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>).(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: @<span class="id">SimMemInjInv.wf</span>' <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#P0">P0</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#P1">P1</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FINDF</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ge_src">ge_src</a></span> (<span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#init_rs_src">init_rs_src</a></span> <span class="id"><a href="compcert.x86.Asm.html#PC">PC</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fd">fd</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">WFINITRS</span>: <span class="id"><a href="compcert.compcertm.IdSimAsmExtra.html#wf_init_rss">wf_init_rss</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fd">fd</a></span>.(<span class="id"><a href="compcert.x86.Asm.html#fn_sig">fn_sig</a></span>) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#init_rs_src">init_rs_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#init_rs_tgt">init_rs_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RAWF</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_link_tgt">skenv_link_tgt</a></span> (<span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#init_rs_tgt">init_rs_tgt</a></span> <span class="id"><a href="compcert.x86.Asm.html#RA">RA</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RSPDELTA</span>: <span class="kwd">forall</span> (<span class="id">SIG</span>: <span class="id"><a href="compcert.common.AST.html#sig_cstyle">sig_cstyle</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#fd">fd</a></span>.(<span class="id"><a href="compcert.x86.Asm.html#fn_sig">fn_sig</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">blk_src</span> <span class="id">ofs</span> (<span class="id">RSPSRC</span>: <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#init_rs_src">init_rs_src</a></span> <span class="id"><a href="compcert.x86.Asm.html#RSP">RSP</a></span> = <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#blk_src">blk_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ofs">ofs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">blk_tgt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#blk_src">blk_src</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#blk_tgt">blk_tgt</a></span>, 0)))<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#match_states">match_states</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#P0">P0</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#P1">P1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#skenv_link_tgt">skenv_link_tgt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ge_src">ge_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#ge_tgt">ge_tgt</a></span> 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.AsmC.html#mkstate">AsmC.mkstate</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#init_rs_src">init_rs_src</a></span> (<span class="id"><a href="compcert.x86.Asm.html#State">Asm.State</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#rs_src">rs_src</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#m_src">m_src</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.AsmC.html#mkstate">AsmC.mkstate</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#init_rs_tgt">init_rs_tgt</a></span> (<span class="id"><a href="compcert.x86.Asm.html#State">Asm.State</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#rs_tgt">rs_tgt</a></span> <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#m_tgt">m_tgt</a></span>)) <span class="id"><a href="compcert.compcertm.IdSimInvExtra.html#sm0">sm0</a></span><br/>
.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
