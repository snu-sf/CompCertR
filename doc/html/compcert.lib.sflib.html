
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module sflib</title>
<meta name="description" content="Documentation of Coq module sflib" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module sflib</h1>
<div class="coq">
<br/>
<div class="doc">This file collects a number of basic lemmas and tactics for better
    proof automation, structuring large proofs, or rewriting.  Most of 
    the rewriting support is ported from ssreflect. </div>
<br/>
<div class="doc">Symbols starting with <span class="bracket"><span class="id">sflib__</span></span> are internal. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html">Bool</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html">List</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Arith.html">Arith</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith.html">ZArith</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span> <span class="kwd">Program</span>.<br/>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="id">Arguments</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#not">not</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#iff">iff</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#id">id</a></span>.<br/>
<br/>
<span class="kwd">Export</span> <span class="id">ListNotations</span>.<br/>
<br/>
<br/>
<span class="kwd">Notation</span> "<span class="id">f</span> &lt;*&gt; <span class="id">g</span>" := (<span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Basics.html#compose">compose</a></span> <span class="id">f</span> <span class="id">g</span>) (<span class="tactic">at</span> <span class="id">level</span> 49, <span class="id">left</span> <span class="id">associativity</span>).<br/>
<br/>
<h1> Coersion of <span class="bracket"><span class="id">bool</span></span> into <span class="bracket"><span class="kwd">Prop</span></span> </h1>
<br/>
<div class="doc">Coersion of bools into Prop </div>
<span class="kwd">Coercion</span> <span class="id">is_true</span> (<span class="id">b</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) : <span class="kwd">Prop</span> := <span class="id"><a href="compcert.lib.sflib.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<br/>
<div class="doc">Hints for auto </div>
<span class="kwd">Lemma</span> <span class="id"><a name="sflib__true_is_true">sflib__true_is_true</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1190')">Proof.</div>
<div class="proofscript" id="proof1190">
 <span class="tactic">reflexivity</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sflib__not_false_is_true">sflib__not_false_is_true</a></span> : ~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1191')">Proof.</div>
<div class="proofscript" id="proof1191">
 <span class="tactic">discriminate</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sflib__negb_rewrite">sflib__negb_rewrite</a></span>: <span class="kwd">forall</span> {<span class="id">b</span>}, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="compcert.lib.sflib.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1192')">Proof.</div>
<div class="proofscript" id="proof1192">
 <span class="tactic">intros</span> []; (<span class="tactic">reflexivity</span> || <span class="tactic">discriminate</span>). Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sflib__andb_split">sflib__andb_split</a></span>: <span class="kwd">forall</span> {<span class="id">b1</span> <span class="id">b2</span>}, <span class="id"><a href="compcert.lib.sflib.html#b1">b1</a></span> &amp;&amp; <span class="id"><a href="compcert.lib.sflib.html#b2">b2</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#b1">b1</a></span> /\ <span class="id"><a href="compcert.lib.sflib.html#b2">b2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1193')">Proof.</div>
<div class="proofscript" id="proof1193">
 <span class="tactic">intros</span> [] []; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">sflib__true_is_true</span> <span class="id">sflib__not_false_is_true</span>.<br/>
<br/>
<h1> Basic automation tactics </h1>
<br/>
<div class="doc">Set up for basic simplification </div>
<br/>
<span class="id">Create</span> <span class="id">HintDb</span> <span class="id">sflib</span> <span class="id">discriminated</span>. <br/>
<br/>
<div class="doc">Adaptation of the ss-reflect "<span class="bracket"><span class="id">done</span></span>" tactic. </div>
<br/>
<span class="kwd">Ltac</span> <span class="id">sflib__basic_done</span> := <br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="tactic">trivial</span> <span class="kwd">with</span> <span class="id">sflib</span> | <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_equal">sym_equal</a></span>; <span class="tactic">trivial</span> | <span class="tactic">discriminate</span> | <span class="id">contradiction</span>].<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">done</span> := <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#not">not</a></span> <span class="kwd">in</span> *; <span class="tactic">trivial</span> <span class="kwd">with</span> <span class="id">sflib</span>; <span class="id">hnf</span>; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="tactic">try</span> <span class="id">sflib__basic_done</span>; <span class="tactic">split</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">sflib__basic_done</span>; <span class="tactic">split</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">sflib__basic_done</span>; <span class="tactic">split</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">sflib__basic_done</span>; <span class="tactic">split</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">sflib__basic_done</span>; <span class="tactic">split</span>; <span class="id">sflib__basic_done</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span> : <span class="id">_</span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> |- <span class="id">_</span> =&gt; <span class="id">solve</span> [<span class="tactic">case</span> <span class="id">H</span>; <span class="tactic">trivial</span>] <span class="kwd">end</span>].<br/>
<br/>
<div class="doc">A variant of the ssr "done" tactic that performs "eassumption". </div>
<br/>
<span class="kwd">Ltac</span> <span class="id">edone</span> := <span class="tactic">try</span> <span class="id">eassumption</span>; <span class="tactic">trivial</span>; <span class="id">hnf</span>; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="id">solve</span> [<span class="tactic">try</span> <span class="id">eassumption</span>; <span class="tactic">try</span> <span class="id">sflib__basic_done</span>; <span class="tactic">split</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">eassumption</span>; <span class="tactic">try</span> <span class="id">sflib__basic_done</span>; <span class="tactic">split</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">eassumption</span>; <span class="tactic">try</span> <span class="id">sflib__basic_done</span>; <span class="tactic">split</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">eassumption</span>; <span class="tactic">try</span> <span class="id">sflib__basic_done</span>; <span class="tactic">split</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">eassumption</span>; <span class="tactic">try</span> <span class="id">sflib__basic_done</span>; <span class="tactic">split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">eassumption</span>; <span class="id">sflib__basic_done</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <span class="id">H</span> : ~ <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">solve</span> [<span class="tactic">case</span> <span class="id">H</span>; <span class="tactic">trivial</span>] <span class="kwd">end</span>].<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="tactic">by</span>"  <span class="id">tactic</span>(<span class="id">tac</span>) := (<span class="id">tac</span>; <span class="id">done</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">eby</span>" <span class="id">tactic</span>(<span class="id">tac</span>) := (<span class="id">tac</span>; <span class="id">edone</span>).<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">sflib__complaining_inj</span> <span class="id">f</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> | [|- ?<span class="id">P</span> ] =&gt; <span class="tactic">set</span> (<span class="id">X</span> := <span class="id">P</span>) <span class="kwd">end</span>);<br/>
&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;(<span class="id">lazymatch</span> <span class="id">goal</span> <span class="kwd">with</span> | [ |- <span class="id">f</span> <span class="id">_</span> = <span class="id">f</span> <span class="id">_</span> -&gt; <span class="id">_</span>] =&gt; <span class="tactic">fail</span> | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span>);<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">intros</span>;<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">X</span>;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">subst</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">sflib__clarify1</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">subst</span>;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span>: <span class="id"><a href="compcert.lib.sflib.html#is_true">is_true</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#andb">andb</a></span> <span class="id">_</span> <span class="id">_</span>) |- <span class="id">_</span>] =&gt; <span class="tactic">case</span> (<span class="id"><a href="compcert.lib.sflib.html#sflib__andb_split">sflib__andb_split</a></span> <span class="id">H</span>); <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">intros</span> ? <span class="id">H</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span>: <span class="id"><a href="compcert.lib.sflib.html#is_true">is_true</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> ?<span class="id">x</span>) |- <span class="id">_</span>] =&gt; <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.lib.sflib.html#sflib__negb_rewrite">sflib__negb_rewrite</a></span> <span class="id">H</span>) <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;| [<span class="id">H</span>: <span class="id"><a href="compcert.lib.sflib.html#is_true">is_true</a></span> ?<span class="id">x</span>        |- <span class="id">_</span>] =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>         |- <span class="id">_</span>] =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>        |- <span class="id">_</span>] =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> *<br/>
&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">f</span> <span class="id">_</span>             = ?<span class="id">f</span> <span class="id">_</span>             |- <span class="id">_</span>] =&gt; <span class="id">sflib__complaining_inj</span> <span class="id">f</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">f</span> <span class="id">_</span> <span class="id">_</span>           = ?<span class="id">f</span> <span class="id">_</span> <span class="id">_</span>           |- <span class="id">_</span>] =&gt; <span class="id">sflib__complaining_inj</span> <span class="id">f</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">f</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>         = ?<span class="id">f</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>         |- <span class="id">_</span>] =&gt; <span class="id">sflib__complaining_inj</span> <span class="id">f</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">f</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>       = ?<span class="id">f</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>       |- <span class="id">_</span>] =&gt; <span class="id">sflib__complaining_inj</span> <span class="id">f</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">f</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>     = ?<span class="id">f</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>     |- <span class="id">_</span>] =&gt; <span class="id">sflib__complaining_inj</span> <span class="id">f</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">f</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>   = ?<span class="id">f</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>   |- <span class="id">_</span>] =&gt; <span class="id">sflib__complaining_inj</span> <span class="id">f</span> <span class="id">H</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">f</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> = ?<span class="id">f</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span>] =&gt; <span class="id">sflib__complaining_inj</span> <span class="id">f</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>; <span class="tactic">try</span> <span class="id">done</span>.<br/>
<br/>
<div class="doc">Perform injections &amp; discriminations on all hypotheses </div>
<br/>
<span class="kwd">Ltac</span> <span class="id">clarify</span> :=<br/>
&nbsp;&nbsp;<span class="id">sflib__clarify1</span>;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H1</span>: ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span>, <span class="id">H2</span>: ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>   |- <span class="id">_</span> =&gt; <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">sflib__clarify1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H1</span>: ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span>, <span class="id">H2</span>: ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">sflib__clarify1</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Kill simple goals that require up to two econstructor calls. </div>
<br/>
<span class="kwd">Ltac</span> <span class="id">inv</span> <span class="id">H</span> := <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">hinv</span> <span class="id">x</span> := <span class="tactic">move</span> <span class="id">x</span> <span class="tactic">at</span> <span class="id">bottom</span>; <span class="tactic">inversion</span> <span class="id">x</span>; <span class="id">clarify</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">hinv</span>" <span class="id">ident</span>(<span class="id">a</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">hinv</span> <span class="id">a</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">hinv</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">hinv</span> <span class="id">a</span>; <span class="id">hinv</span> <span class="id">b</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">hinv</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">hinv</span> <span class="id">a</span>; <span class="id">hinv</span> <span class="id">b</span> <span class="id">c</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">hinv</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) := <br/>
&nbsp;&nbsp;(<span class="id">hinv</span> <span class="id">a</span> <span class="id">b</span>; <span class="id">hinv</span> <span class="id">c</span> <span class="id">d</span>).<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">hinvc</span> <span class="id">x</span> := <span class="id">hinv</span> <span class="id">x</span>; <span class="tactic">clear</span> <span class="id">x</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">hinvc</span>" <span class="id">ident</span>(<span class="id">a</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">hinvc</span> <span class="id">a</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">hinvc</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">hinvc</span> <span class="id">a</span>; <span class="id">hinvc</span> <span class="id">b</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">hinvc</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">hinvc</span> <span class="id">a</span>; <span class="id">hinvc</span> <span class="id">b</span> <span class="id">c</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">hinvc</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) := <br/>
&nbsp;&nbsp;(<span class="id">hinvc</span> <span class="id">a</span> <span class="id">b</span>; <span class="id">hinvc</span> <span class="id">c</span> <span class="id">d</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">hinvc</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) := <br/>
&nbsp;&nbsp;(<span class="id">hinvc</span> <span class="id">a</span> <span class="id">b</span> <span class="id">c</span>; <span class="id">hinvc</span> <span class="id">d</span> <span class="id">e</span>).<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">simpls</span>  := <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">done</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">ins</span> := <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">done</span>; <span class="tactic">intros</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">case_eq</span>" <span class="id">constr</span>(<span class="id">x</span>) := <span class="id">case_eq</span> (<span class="id">x</span>).<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">case_eq</span>" <span class="id">constr</span>(<span class="id">x</span>) "<span class="kwd">as</span>" <span class="id">simple_intropattern</span>(<span class="id">H</span>) :=<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span> <span class="kwd">as</span> [] <span class="id">eqn</span>: <span class="id">H</span>; <span class="tactic">try</span> <span class="id">done</span>.<br/>
<br/>
<br/>
<h1> Basic simplication tactics </h1>
<br/>
<span class="kwd">Ltac</span> <span class="id">sflib__clarsimp1</span> :=<br/>
&nbsp;&nbsp;<span class="id">clarify</span>; (<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">sflib</span> <span class="kwd">in</span> * ); <span class="tactic">try</span> <span class="id">done</span>;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span>: <span class="id"><a href="compcert.lib.sflib.html#is_true">is_true</a></span> ?<span class="id">x</span> |- <span class="id">_</span>] =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> *; <span class="id">sflib__clarsimp1</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> |- <span class="id">_</span>] =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> *; <span class="id">sflib__clarsimp1</span><br/>
&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> |- <span class="id">_</span>] =&gt; <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> *; <span class="id">sflib__clarsimp1</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">clarify</span>; <span class="tactic">auto</span> 1 <span class="kwd">with</span> <span class="id">sflib</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">clarsimp</span> := <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">sflib__clarsimp1</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">autos</span>   := <span class="id">clarsimp</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">sflib</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span>  <span class="id"><a name="NW">NW</a></span> <span class="id">A</span> (<span class="id">P</span>: () -&gt; <span class="id"><a href="compcert.lib.sflib.html#A">A</a></span>) : <span class="id"><a href="compcert.lib.sflib.html#A">A</a></span> := <span class="id"><a href="compcert.lib.sflib.html#P">P</a></span> ().<br/>
<br/>
<span class="kwd">Notation</span> "&lt;&lt; <span class="id">x</span> : <span class="id">t</span> &gt;&gt;" := (<span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; (<span class="id">t</span>))) (<span class="tactic">at</span> <span class="id">level</span> 80, <span class="id">x</span> <span class="id">ident</span>, <span class="id">no</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Notation</span> "&lt;&lt; <span class="id">t</span> &gt;&gt;" := (<span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id">t</span>)) (<span class="tactic">at</span> <span class="id">level</span> 79, <span class="id">no</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Notation</span> "&lt;&lt; <span class="id">t</span> &gt;&gt;" := (<span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">_</span> =&gt; (<span class="id">t</span>):<span class="kwd">Prop</span>)) (<span class="tactic">at</span> <span class="id">level</span> 79, <span class="id">no</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">unnw</span> := <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="kwd">in</span> *.<br/>
<span class="kwd">Ltac</span> <span class="id">rednw</span> := <span class="tactic">red</span>; <span class="id">unnw</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">get_concl</span> := <span class="id">lazymatch</span> <span class="id">goal</span> <span class="kwd">with</span> [ |- ?<span class="id">G</span> ] =&gt; <span class="id">G</span> <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">des1</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : <span class="id">exists</span> <span class="id">x</span>, <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">y</span> =&gt; <span class="id">_</span>) |- <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="tactic">fresh</span> <span class="id">x</span> <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">y</span>' := <span class="tactic">fresh</span> <span class="id">y</span> <span class="kwd">in</span> <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">x</span>' <span class="id">y</span>']; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : <span class="id">exists</span> <span class="id">x</span>, ?<span class="id">p</span> |- <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="tactic">fresh</span> <span class="id">x</span> <span class="kwd">in</span> <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">x</span>' <span class="id">H</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : ?<span class="id">p</span> /\ ?<span class="id">q</span> |- <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="kwd">match</span> <span class="id">p</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">_</span>) =&gt; <span class="tactic">fresh</span> <span class="id">z</span> | <span class="id">_</span> =&gt; <span class="id">H</span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">y</span>' := <span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">_</span>) =&gt; <span class="tactic">fresh</span> <span class="id">z</span> | <span class="id">_</span> =&gt; <span class="tactic">fresh</span> <span class="id">H</span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">x</span>' <span class="id">y</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">p</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> =&gt; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">x</span>' | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> =&gt; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>' | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : ?<span class="id">p</span> &lt;-&gt; ?<span class="id">q</span> |- <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="kwd">match</span> <span class="id">p</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">_</span>) =&gt; <span class="tactic">fresh</span> <span class="id">z</span> | <span class="id">_</span> =&gt; <span class="id">H</span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">y</span>' := <span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">_</span>) =&gt; <span class="tactic">fresh</span> <span class="id">z</span> | <span class="id">_</span> =&gt; <span class="tactic">fresh</span> <span class="id">H</span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">x</span>' <span class="id">y</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">p</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> =&gt; <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="tactic">at</span> 1 <span class="kwd">in</span> <span class="id">x</span>'; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>' | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> =&gt; <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="tactic">at</span> 1 <span class="kwd">in</span> <span class="id">y</span>'; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">x</span>' | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : ?<span class="id">p</span> \/ ?<span class="id">q</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="kwd">match</span> <span class="id">p</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">_</span>) =&gt; <span class="tactic">fresh</span> <span class="id">z</span> | <span class="id">_</span> =&gt; <span class="id">H</span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">y</span>' := <span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">_</span>) =&gt; <span class="tactic">fresh</span> <span class="id">z</span> | <span class="id">_</span> =&gt; <span class="id">H</span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">x</span>' | <span class="id">y</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="kwd">match</span> <span class="id">p</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> =&gt; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">x</span>' | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> =&gt; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>' | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span>]<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">des</span> := <span class="tactic">repeat</span> <span class="id">des1</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">desc</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : <span class="id">exists</span> <span class="id">x</span>, <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">y</span> =&gt; <span class="id">_</span>) |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="tactic">fresh</span> <span class="id">x</span> <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">y</span>' := <span class="tactic">fresh</span> <span class="id">y</span> <span class="kwd">in</span> <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">x</span>' <span class="id">y</span>']; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : <span class="id">exists</span> <span class="id">x</span>, ?<span class="id">p</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="tactic">fresh</span> <span class="id">x</span> <span class="kwd">in</span> <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">x</span>' <span class="id">H</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : ?<span class="id">p</span> /\ ?<span class="id">q</span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="kwd">match</span> <span class="id">p</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">_</span>) =&gt; <span class="tactic">fresh</span> <span class="id">z</span> | <span class="id">_</span> =&gt; <span class="id">H</span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">y</span>' := <span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">_</span>) =&gt; <span class="tactic">fresh</span> <span class="id">z</span> | <span class="id">_</span> =&gt; <span class="tactic">fresh</span> <span class="id">H</span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">x</span>' <span class="id">y</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">p</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> =&gt; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">x</span>' | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> =&gt; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>' | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : <span class="id"><a href="compcert.lib.sflib.html#is_true">is_true</a></span> (<span class="id">_</span> &amp;&amp; <span class="id">_</span>) |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">H</span>' := <span class="tactic">fresh</span> <span class="id">H</span> <span class="kwd">in</span> <span class="tactic">case</span> (<span class="id"><a href="compcert.lib.sflib.html#sflib__andb_split">sflib__andb_split</a></span> <span class="id">H</span>); <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">intros</span> <span class="id">H</span> <span class="id">H</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : ?<span class="id">x</span> = ?<span class="id">x</span>   |- <span class="id">_</span> =&gt; <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">nbdes1</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : <span class="id">exists</span> <span class="id">x</span>, <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">y</span> =&gt; <span class="id">_</span>) |- <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="tactic">fresh</span> <span class="id">x</span> <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">y</span>' := <span class="tactic">fresh</span> <span class="id">y</span> <span class="kwd">in</span> <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">x</span>' <span class="id">y</span>']; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : <span class="id">exists</span> <span class="id">x</span>, ?<span class="id">p</span> |- <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="tactic">fresh</span> <span class="id">x</span> <span class="kwd">in</span> <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">x</span>' <span class="id">H</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : ?<span class="id">p</span> /\ ?<span class="id">q</span> |- <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="kwd">match</span> <span class="id">p</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">_</span>) =&gt; <span class="tactic">fresh</span> <span class="id">z</span> | <span class="id">_</span> =&gt; <span class="id">H</span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">y</span>' := <span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">_</span>) =&gt; <span class="tactic">fresh</span> <span class="id">z</span> | <span class="id">_</span> =&gt; <span class="tactic">fresh</span> <span class="id">H</span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">x</span>' <span class="id">y</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">p</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> =&gt; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">x</span>' | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> =&gt; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>' | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span> : ?<span class="id">p</span> &lt;-&gt; ?<span class="id">q</span> |- <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="kwd">match</span> <span class="id">p</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">_</span>) =&gt; <span class="tactic">fresh</span> <span class="id">z</span> | <span class="id">_</span> =&gt; <span class="id">H</span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">y</span>' := <span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id">_</span>) =&gt; <span class="tactic">fresh</span> <span class="id">z</span> | <span class="id">_</span> =&gt; <span class="tactic">fresh</span> <span class="id">H</span> <span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">x</span>' <span class="id">y</span>'];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">p</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> =&gt; <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="tactic">at</span> 1 <span class="kwd">in</span> <span class="id">x</span>'; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>' | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">q</span> <span class="kwd">with</span> | <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="id">_</span> =&gt; <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="tactic">at</span> 1 <span class="kwd">in</span> <span class="id">y</span>'; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">x</span>' | <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">nbdes</span> := <span class="tactic">repeat</span> <span class="id">nbdes1</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">rrnbdes</span> <span class="id">H</span> := <span class="tactic">move</span> <span class="id">H</span> <span class="tactic">at</span> <span class="id">bottom</span>; <span class="tactic">repeat</span> <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">nbdes</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">forall_split</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">H</span> := <span class="tactic">fresh</span> "<span class="id">__forall_split__</span>" <span class="kwd">in</span> <span class="id">first</span> [<span class="tactic">intro</span>; <span class="id">forall_split</span>; <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [<span class="id">H</span>:<span class="id">_</span>|-<span class="id">_</span>] =&gt; <span class="id">revert</span> <span class="id">H</span> <span class="kwd">end</span> | <span class="tactic">split</span>].<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="_HID_">_HID_</a></span> (<span class="id">A</span> : <span class="kwd">Type</span>) (<span class="id">a</span> : <span class="id"><a href="compcert.lib.sflib.html#A">A</a></span>) := <span class="id"><a href="compcert.lib.sflib.html#a">a</a></span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">hdesHi</span> <span class="id">H</span> <span class="id">P</span> <span class="id">x</span> <span class="id">y</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">FF</span> := <span class="tactic">fresh</span> "<span class="id">__hdesfalse__</span>" <span class="kwd">in</span> <br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">TMP</span> := <span class="tactic">fresh</span> "<span class="id">__hdesHi__</span>" <span class="kwd">in</span> <br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">P1</span> := <span class="tactic">fresh</span> "<span class="id">__hdesHi__</span>" <span class="kwd">in</span> <br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">P2</span> := <span class="tactic">fresh</span> "<span class="id">__hdesHi__</span>" <span class="kwd">in</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">evar</span> (<span class="id">P1</span> : <span class="kwd">Prop</span>); <span class="id">evar</span> (<span class="id">P2</span> : <span class="kwd">Prop</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">TMP</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> -&gt; <span class="id">P</span>) <span class="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">intro</span> <span class="id">FF</span>; <span class="id">forall_split</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="kwd">let</span> <span class="id">G</span> := <span class="id">get_concl</span> <span class="kwd">in</span> <span class="tactic">set</span> (<span class="id">TMP</span> := <span class="id">G</span>); <span class="id">revert</span> <span class="id">P1</span>; <span class="id">instantiate</span> (1:=<span class="id">G</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">let</span> <span class="id">G</span> := <span class="id">get_concl</span> <span class="kwd">in</span> <span class="tactic">set</span> (<span class="id">TMP</span> := <span class="id">G</span>); <span class="id">revert</span> <span class="id">P2</span>; <span class="id">instantiate</span> (1:=<span class="id">G</span>) ];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">FF</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">clear</span> <span class="id">TMP</span>; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">try</span> (<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [<span class="id">Def</span> := ?<span class="id">G</span> : <span class="id">_</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">Def</span> <span class="kwd">with</span> <span class="id">P1</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [<span class="id">_</span> : <span class="id">G</span> |- <span class="id">_</span>] =&gt; <span class="tactic">fail</span> 4 <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">x</span>: <span class="id">P1</span>) <span class="tactic">by</span> (<span class="tactic">unfold</span> <span class="id">P1</span>; <span class="tactic">repeat</span> (<span class="kwd">let</span> <span class="id">x</span> := <span class="tactic">fresh</span> "<span class="id">__xhj__</span>" <span class="kwd">in</span> <span class="tactic">intro</span> <span class="id">x</span>; <span class="id">specialize</span> (<span class="id">H</span> <span class="id">x</span>)); <span class="tactic">apply</span> <span class="id">H</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id">P1</span> <span class="kwd">in</span> <span class="id">x</span>; <span class="tactic">try</span> <span class="tactic">clear</span> <span class="id">P1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">try</span> (<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [<span class="id">Def</span> := ?<span class="id">G</span> : <span class="id">_</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">Def</span> <span class="kwd">with</span> <span class="id">P2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [<span class="id">_</span> : <span class="id">G</span> |- <span class="id">_</span>] =&gt; <span class="tactic">fail</span> 4 <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">y</span>: <span class="id">P2</span>) <span class="tactic">by</span> (<span class="tactic">unfold</span> <span class="id">P2</span>; <span class="tactic">repeat</span> (<span class="kwd">let</span> <span class="id">x</span> := <span class="tactic">fresh</span> "<span class="id">__xhj__</span>" <span class="kwd">in</span> <span class="tactic">intro</span> <span class="id">x</span>; <span class="id">specialize</span> (<span class="id">H</span> <span class="id">x</span>)); <span class="tactic">apply</span> <span class="id">H</span>)); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">unfold</span> <span class="id">P2</span> <span class="kwd">in</span> <span class="id">y</span>; <span class="tactic">try</span> <span class="tactic">clear</span> <span class="id">P2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="compcert.lib.sflib.html#_HID_">_HID_</a></span> <span class="id">P</span>) <span class="kwd">in</span> <span class="id">H</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">clear</span> <span class="id">H</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">hdesHP</span> <span class="id">H</span> <span class="id">P</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">H</span>' := <span class="tactic">fresh</span> <span class="id">H</span> <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">H</span>'' := <span class="tactic">fresh</span> <span class="id">H</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> <br/>
&nbsp;&nbsp;| <span class="id">context</span>[ <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">_</span>) /\ <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">y</span> =&gt; <span class="id">_</span>) ] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="tactic">fresh</span> <span class="id">x</span> <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">y</span>' := <span class="tactic">fresh</span> <span class="id">y</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hdesHi</span> <span class="id">H</span> <span class="id">P</span> <span class="id">x</span>' <span class="id">y</span>'; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">x</span>'; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>'<br/>
&nbsp;&nbsp;| <span class="id">context</span>[ <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">_</span>) /\ <span class="id">_</span> ] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="tactic">fresh</span> <span class="id">x</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hdesHi</span> <span class="id">H</span> <span class="id">P</span> <span class="id">x</span>' <span class="id">H</span>'; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">x</span>'<br/>
&nbsp;&nbsp;| <span class="id">context</span>[ <span class="id">_</span> /\ <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">y</span> =&gt; <span class="id">_</span>) ] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">y</span>' := <span class="tactic">fresh</span> <span class="id">y</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hdesHi</span> <span class="id">H</span> <span class="id">P</span> <span class="id">H</span>' <span class="id">y</span>'; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>'<br/>
&nbsp;&nbsp;| <span class="id">context</span>[ <span class="id">_</span> /\ <span class="id">_</span> ] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hdesHi</span> <span class="id">H</span> <span class="id">P</span> <span class="id">H</span>' <span class="id">H</span>''<br/>
&nbsp;&nbsp;| <span class="id">context</span>[ <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">_</span>) &lt;-&gt; <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">y</span> =&gt; <span class="id">_</span>) ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="tactic">fresh</span> <span class="id">x</span> <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">y</span>' := <span class="tactic">fresh</span> <span class="id">y</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hdesHi</span> <span class="id">H</span> <span class="id">P</span> <span class="id">x</span>' <span class="id">y</span>'; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">x</span>'; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>'<br/>
&nbsp;&nbsp;| <span class="id">context</span>[ <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id">_</span>) &lt;-&gt; <span class="id">_</span> ] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">x</span>' := <span class="tactic">fresh</span> <span class="id">x</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hdesHi</span> <span class="id">H</span> <span class="id">P</span> <span class="id">x</span>' <span class="id">H</span>'; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">x</span>'<br/>
&nbsp;&nbsp;| <span class="id">context</span>[ <span class="id">_</span> &lt;-&gt; <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> (<span class="kwd">fun</span> <span class="id">y</span> =&gt; <span class="id">_</span>) ] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">y</span>' := <span class="tactic">fresh</span> <span class="id">y</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hdesHi</span> <span class="id">H</span> <span class="id">P</span> <span class="id">H</span>' <span class="id">y</span>'; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">y</span>'<br/>
&nbsp;&nbsp;| <span class="id">context</span>[ <span class="id">_</span> &lt;-&gt; <span class="id">_</span> ] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hdesHi</span> <span class="id">H</span> <span class="id">P</span> <span class="id">H</span>' <span class="id">H</span>''<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">hdesH</span> <span class="id">H</span> := <span class="kwd">let</span> <span class="id">P</span> := <span class="id">type</span> <span class="id">of</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">hdesHP</span> <span class="id">H</span> <span class="id">P</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#_HID_">_HID_</a></span> <span class="kwd">in</span> *.<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">hdesF</span> <span class="id">P</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="id">idtac</span> | <span class="kwd">forall</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>, <span class="id">_</span> &lt;-&gt; <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span> <span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Fail if hypothesis <span class="bracket"><span class="id">H</span></span> doesn't exist. </div>
<span class="kwd">Ltac</span> <span class="id">check_hyp</span> <span class="id">H</span> := <span class="kwd">match</span> <span class="id">H</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Fail if hypothesis <span class="bracket"><span class="id">H1</span></span> is not <span class="bracket"><span class="id">H2</span></span>. </div>
<span class="kwd">Ltac</span> <span class="id">check_equal</span> <span class="id">H1</span> <span class="id">H2</span> := <span class="kwd">match</span> <span class="id">H1</span> <span class="kwd">with</span> <span class="id">H2</span> =&gt; <span class="id">idtac</span> <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">hdes</span> := <br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> | <span class="id">H</span> : ?<span class="id">P</span> |- <span class="id">_</span> =&gt; <span class="id">hdesF</span> <span class="id">P</span>; <span class="id">hdesHP</span> <span class="id">H</span> <span class="id">P</span> <span class="kwd">end</span>; <br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#_HID_">_HID_</a></span> <span class="kwd">in</span> *.<br/>
<span class="kwd">Ltac</span> <span class="id">rdes</span> <span class="id">H</span> := <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">des</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">rrdes</span> <span class="id">H</span> := <span class="tactic">move</span> <span class="id">H</span> <span class="tactic">at</span> <span class="id">bottom</span>; <span class="tactic">repeat</span> <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">des</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">rhdes</span> <span class="id">H</span> := <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">hdes</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">rrhdes</span> <span class="id">H</span> := <span class="id">check_hyp</span> <span class="id">H</span>; <span class="tactic">repeat</span> <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">hdes</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">rrdes</span>" <span class="id">ident</span>(<span class="id">a</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">rrdes</span> <span class="id">a</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">rrdes</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">rrdes</span> <span class="id">a</span>; <span class="id">rrdes</span> <span class="id">b</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">rrdes</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">rrdes</span> <span class="id">a</span>; <span class="id">rrdes</span> <span class="id">b</span> <span class="id">c</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">rrdes</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) := <br/>
&nbsp;&nbsp;(<span class="id">rrdes</span> <span class="id">a</span> <span class="id">b</span>; <span class="id">rrdes</span> <span class="id">c</span> <span class="id">d</span>).<br/>
<br/>
<div class="doc">Destruct the condition of an <span class="bracket"><span class="kwd">if</span></span> expression occuring in the goal. </div>
<span class="kwd">Ltac</span> <span class="id">des_if</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id">context</span>[<span class="kwd">if</span> ?<span class="id">X</span> <span class="kwd">then</span> <span class="id">_</span> <span class="kwd">else</span> <span class="id">_</span>] ] =&gt; <span class="tactic">destruct</span> <span class="id">X</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Destruct the condition of an <span class="bracket"><span class="kwd">if</span></span> expression occuring in the given hypothesis. </div>
<span class="kwd">Ltac</span> <span class="id">des_ifH</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id">H</span>' : <span class="id">context</span>[<span class="kwd">if</span> ?<span class="id">X</span> <span class="kwd">then</span> <span class="id">_</span> <span class="kwd">else</span> <span class="id">_</span>] |- <span class="id">_</span> ] =&gt; <span class="id">check_equal</span> <span class="id">H</span>' <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">X</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">des_ifs</span> :=<br/>
&nbsp;<span class="id">clarify</span>;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> (<span class="id">type</span> <span class="id">of</span> <span class="id">x</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| { <span class="id">_</span> } + { <span class="id">_</span> } =&gt; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="id">clarify</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="kwd">let</span> <span class="id">Heq</span> := <span class="tactic">fresh</span> "<span class="id">Heq</span>" <span class="kwd">in</span> <span class="tactic">destruct</span> <span class="id">x</span> <span class="kwd">as</span> [] <span class="id">eqn</span>: <span class="id">Heq</span>; <span class="id">clarify</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">context</span>[ <span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> ] |- <span class="id">_</span> =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> (<span class="id">type</span> <span class="id">of</span> <span class="id">x</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| { <span class="id">_</span> } + { <span class="id">_</span> } =&gt; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="id">clarify</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="kwd">let</span> <span class="id">Heq</span> := <span class="tactic">fresh</span> "<span class="id">Heq</span>" <span class="kwd">in</span> <span class="tactic">destruct</span> <span class="id">x</span> <span class="kwd">as</span> [] <span class="id">eqn</span>: <span class="id">Heq</span>; <span class="id">clarify</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">desf</span> := <span class="id">clarify</span>; <span class="id">des</span>; <span class="id">des_ifs</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">isd</span> := <span class="id">ins</span>; <span class="id">desf</span>.<br/>
<br/>
<div class="doc">Create a copy of hypothesis <span class="bracket"><span class="id">H</span></span>. </div>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">dup</span>" <span class="id">hyp</span>(<span class="id">H</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">H</span>' := <span class="tactic">fresh</span> <span class="id">H</span> <span class="kwd">in</span> <span class="tactic">assert</span> (<span class="id">H</span>' := <span class="id">H</span>).<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">clarassoc</span> := <span class="id">clarsimp</span>; <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">sflib</span> <span class="id">sflibA</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="id">done</span>. <br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">sflib__hacksimp1</span> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id">clarsimp</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">solve</span> [<span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">clarsimp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">clarsimp</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">solve</span> [<span class="tactic">f_equal</span>; <span class="id">clarsimp</span>]<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">hacksimp</span> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id">clarsimp</span>;<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">solve</span> [<span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">clarsimp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">clarsimp</span>]<br/>
&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="kwd">if</span> ?<span class="id">p</span> <span class="kwd">then</span> <span class="id">_</span> <span class="kwd">else</span> <span class="id">_</span>] =&gt; <span class="id">solve</span> [<span class="tactic">destruct</span> <span class="id">p</span>; <span class="id">sflib__hacksimp1</span>]<br/>
&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">solve</span> [<span class="tactic">f_equal</span>; <span class="id">clarsimp</span>]<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<h1> Delineating cases in proofs </h1>
<br/>
<div class="doc">Named case tactics (taken from Libtactics) </div>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">assert_eq</span>" <span class="id">ident</span>(<span class="id">x</span>) <span class="id">constr</span>(<span class="id">v</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">H</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">x</span> = <span class="id">v</span>) <span class="kwd">as</span> <span class="id">H</span> <span class="tactic">by</span> <span class="tactic">reflexivity</span>;<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">Case_aux</span>" <span class="id">ident</span>(<span class="id">x</span>) <span class="id">constr</span>(<span class="id">name</span>) :=<br/>
&nbsp;&nbsp;<span class="id">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">x</span> := <span class="id">name</span>); <span class="tactic">move</span> <span class="id">x</span> <span class="tactic">at</span> <span class="id">top</span><br/>
&nbsp;&nbsp;| <span class="id">assert_eq</span> <span class="id">x</span> <span class="id">name</span><br/>
&nbsp;&nbsp;| <span class="tactic">fail</span> 1 "<span class="id">because</span> <span class="id">we</span> <span class="id">are</span> <span class="id">working</span> <span class="id">on</span> <span class="id">a</span> <span class="id">different</span> <span class="tactic">case</span>." ].<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">Case</span> <span class="id">name</span> := <span class="id">Case_aux</span> <span class="tactic">case</span> <span class="id">name</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">SCase</span> <span class="id">name</span> := <span class="id">Case_aux</span> <span class="id">subcase</span> <span class="id">name</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">SSCase</span> <span class="id">name</span> := <span class="id">Case_aux</span> <span class="id">subsubcase</span> <span class="id">name</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">SSSCase</span> <span class="id">name</span> := <span class="id">Case_aux</span> <span class="id">subsubsubcase</span> <span class="id">name</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">SSSSCase</span> <span class="id">name</span> := <span class="id">Case_aux</span> <span class="id">subsubsubsubcase</span> <span class="id">name</span>.<br/>
<br/>
<div class="doc">Lightweight case tactics (without names) </div>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "-" <span class="id">tactic</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;<span class="id">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">WithinCaseM</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>); <span class="tactic">move</span> <span class="id">WithinCaseM</span> <span class="tactic">at</span> <span class="id">top</span><br/>
&nbsp;&nbsp;| <span class="tactic">fail</span> 1 "<span class="id">because</span> <span class="id">we</span> <span class="id">are</span> <span class="id">working</span> <span class="id">on</span> <span class="id">a</span> <span class="id">different</span> <span class="tactic">case</span>." ]; <span class="id">c</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "+" <span class="id">tactic</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;<span class="id">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">WithinCaseP</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>); <span class="tactic">move</span> <span class="id">WithinCaseP</span> <span class="tactic">at</span> <span class="id">top</span><br/>
&nbsp;&nbsp;| <span class="tactic">fail</span> 1 "<span class="id">because</span> <span class="id">we</span> <span class="id">are</span> <span class="id">working</span> <span class="id">on</span> <span class="id">a</span> <span class="id">different</span> <span class="tactic">case</span>." ]; <span class="id">c</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "*" <span class="id">tactic</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;<span class="id">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">WithinCaseS</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>); <span class="tactic">move</span> <span class="id">WithinCaseS</span> <span class="tactic">at</span> <span class="id">top</span><br/>
&nbsp;&nbsp;| <span class="tactic">fail</span> 1 "<span class="id">because</span> <span class="id">we</span> <span class="id">are</span> <span class="id">working</span> <span class="id">on</span> <span class="id">a</span> <span class="id">different</span> <span class="tactic">case</span>." ]; <span class="id">c</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> ":" <span class="id">tactic</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;<span class="id">first</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">WithinCaseC</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>); <span class="tactic">move</span> <span class="id">WithinCaseC</span> <span class="tactic">at</span> <span class="id">top</span><br/>
&nbsp;&nbsp;| <span class="tactic">fail</span> 1 "<span class="id">because</span> <span class="id">we</span> <span class="id">are</span> <span class="id">working</span> <span class="id">on</span> <span class="id">a</span> <span class="id">different</span> <span class="tactic">case</span>." ]; <span class="id">c</span>.<br/>
<br/>
<h1> Exploiting a hypothesis </h1>
<br/>
<div class="doc">Exploit an assumption (adapted from CompCert). </div>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mp">mp</a></span>: <span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span>: <span class="kwd">Type</span>, <span class="id"><a href="compcert.lib.sflib.html#P">P</a></span> -&gt; (<span class="id"><a href="compcert.lib.sflib.html#P">P</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#Q">Q</a></span>) -&gt; <span class="id"><a href="compcert.lib.sflib.html#Q">Q</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1194')">Proof.</div>
<div class="proofscript" id="proof1194">
 <span class="tactic">intuition</span>. Defined.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">mp</span>': <span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> : <span class="kwd">Type</span>, (<span class="id"><a href="compcert.lib.sflib.html#P">P</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#Q">Q</a></span>) -&gt; <span class="id"><a href="compcert.lib.sflib.html#P">P</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#Q">Q</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1195')">Proof.</div>
<div class="proofscript" id="proof1195">
 <span class="tactic">intuition</span>. Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">hexploit</span> <span class="id">x</span> := <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.sflib.html#mp">mp</a></span>; [<span class="tactic">eapply</span> <span class="id">x</span>|].<br/>
<span class="kwd">Ltac</span> <span class="id">hexploit</span>' <span class="id">x</span> := <span class="kwd">let</span> <span class="id">H</span> := <span class="tactic">fresh</span> <span class="kwd">in</span> <span class="tactic">set</span> (<span class="id">H</span> := <span class="id">x</span>); <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.sflib.html#mp">mp</a></span>; [<span class="tactic">eapply</span> <span class="id">x</span>|].<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">set_prop</span> <span class="id">N</span> <span class="id">T</span> <span class="id">A</span> := <br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">b</span> := <span class="tactic">fresh</span> <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">ty</span> := <span class="id">type</span> <span class="id">of</span> <span class="id">T</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">ty</span> <span class="kwd">with</span> (<span class="kwd">forall</span> (<span class="id">_</span>:?<span class="id">P</span>), <span class="id">_</span>) =&gt; <span class="tactic">assert</span> (<span class="id">A</span>: <span class="id">P</span>); [|<span class="tactic">set</span> (<span class="id">N</span> := <span class="id">T</span> <span class="id">A</span>)] <span class="kwd">end</span>.<br/>
<br/>
<h1> Induction tactics </h1>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="tactic">induction</span>" "[" <span class="id">ident_list</span>(<span class="id">y</span>) "]" <span class="id">ident</span>(<span class="id">x</span>)  :=<br/>
&nbsp;&nbsp;<span class="id">first</span> [ <span class="tactic">try</span> (<span class="tactic">intros</span> <span class="id">until</span> <span class="id">x</span>); <span class="id">revert</span> <span class="id">y</span>; <span class="tactic">induction</span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="tactic">red</span>; <span class="tactic">try</span> (<span class="tactic">intros</span> <span class="id">until</span> <span class="id">x</span>); <span class="id">revert</span> <span class="id">y</span>; <span class="tactic">induction</span> <span class="id">x</span> ].<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="tactic">induction</span>" "[" <span class="id">ident_list</span>(<span class="id">y</span>) "]" <span class="id">ident</span>(<span class="id">x</span>) "[" <span class="id">ident</span>(<span class="id">z</span>) "]"  :=<br/>
&nbsp;&nbsp;<span class="id">first</span> [ <span class="tactic">try</span> (<span class="tactic">intros</span> <span class="id">until</span> <span class="id">x</span>); <span class="id">revert</span> <span class="id">y</span>; <span class="tactic">induction</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">z</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="tactic">red</span>; <span class="tactic">try</span> (<span class="tactic">intros</span> <span class="id">until</span> <span class="id">x</span>); <span class="id">revert</span> <span class="id">y</span>; <span class="tactic">induction</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">z</span> ].<br/>
<br/>
<div class="doc">Versions with hacksimp </div>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">induct</span>" <span class="id">ident</span>(<span class="id">x</span>) := <span class="tactic">induction</span> <span class="id">x</span>; <span class="id">hacksimp</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">induct</span>" <span class="id">ident</span>(<span class="id">x</span>) "[" <span class="id">ident</span>(<span class="id">z</span>) "]" := <br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">z</span>; <span class="id">hacksimp</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">induct</span>" "[" <span class="id">ident_list</span>(<span class="id">y</span>) "]" <span class="id">ident</span>(<span class="id">x</span>)  :=<br/>
&nbsp;&nbsp;<span class="id">first</span> [ <span class="tactic">try</span> (<span class="tactic">intros</span> <span class="id">until</span> <span class="id">x</span>); <span class="id">revert</span> <span class="id">y</span>; <span class="tactic">induction</span> <span class="id">x</span>; <span class="id">hacksimp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="tactic">red</span>; <span class="tactic">try</span> (<span class="tactic">intros</span> <span class="id">until</span> <span class="id">x</span>); <span class="id">revert</span> <span class="id">y</span>; <span class="tactic">induction</span> <span class="id">x</span>; <span class="id">hacksimp</span> ].<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">induct</span>" "[" <span class="id">ident_list</span>(<span class="id">y</span>) "]" <span class="id">ident</span>(<span class="id">x</span>) "[" <span class="id">ident</span>(<span class="id">z</span>) "]"  :=<br/>
&nbsp;&nbsp;<span class="id">first</span> [ <span class="tactic">try</span> (<span class="tactic">intros</span> <span class="id">until</span> <span class="id">x</span>); <span class="id">revert</span> <span class="id">y</span>; <span class="tactic">induction</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">z</span>; <span class="id">hacksimp</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="tactic">red</span>; <span class="tactic">try</span> (<span class="tactic">intros</span> <span class="id">until</span> <span class="id">x</span>); <span class="id">revert</span> <span class="id">y</span>; <span class="tactic">induction</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">z</span>; <span class="id">hacksimp</span> ].<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">edestructs</span>" <span class="id">ident</span>(<span class="id">a</span>) := <br/>
&nbsp;&nbsp;(<span class="id">edestruct</span> <span class="id">a</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">edestructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) := <br/>
&nbsp;&nbsp;(<span class="id">edestruct</span> <span class="id">a</span>; <span class="id">edestruct</span> <span class="id">b</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">edestructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) := <br/>
&nbsp;&nbsp;(<span class="id">edestruct</span> <span class="id">a</span>; <span class="id">edestructs</span> <span class="id">b</span> <span class="id">c</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">edestructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) := <br/>
&nbsp;&nbsp;(<span class="id">edestruct</span> <span class="id">a</span>; <span class="id">edestructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">edestructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) := <br/>
&nbsp;&nbsp;(<span class="id">edestruct</span> <span class="id">a</span>; <span class="id">edestructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">edestructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">edestruct</span> <span class="id">a</span>; <span class="id">edestructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">edestructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) <span class="id">ident</span>(<span class="id">g</span>) := <br/>
&nbsp;&nbsp;(<span class="id">edestruct</span> <span class="id">a</span>; <span class="id">edestructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span> <span class="id">g</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">edestructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) <span class="id">ident</span>(<span class="id">g</span>) <span class="id">ident</span>(<span class="id">h</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">edestruct</span> <span class="id">a</span>; <span class="id">edestructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">edestructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) <span class="id">ident</span>(<span class="id">g</span>) <span class="id">ident</span>(<span class="id">h</span>) <span class="id">ident</span>(<span class="id">i</span>) := <br/>
&nbsp;&nbsp;(<span class="id">edestruct</span> <span class="id">a</span>; <span class="id">edestructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span> <span class="id">i</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">edestructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) <span class="id">ident</span>(<span class="id">g</span>) <span class="id">ident</span>(<span class="id">h</span>) <span class="id">ident</span>(<span class="id">i</span>) <span class="id">ident</span>(<span class="id">j</span>) := <br/>
&nbsp;&nbsp;(<span class="id">edestruct</span> <span class="id">a</span>; <span class="id">edestructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span> <span class="id">i</span> <span class="id">j</span>).<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">destructs</span>" <span class="id">ident</span>(<span class="id">a</span>) :=<br/>
&nbsp;&nbsp;(<span class="tactic">destruct</span> <span class="id">a</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">destructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) := <br/>
&nbsp;&nbsp;(<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">destruct</span> <span class="id">b</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">destructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) := <br/>
&nbsp;&nbsp;(<span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">destructs</span> <span class="id">b</span> <span class="id">c</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">destructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) :=<br/>
&nbsp;&nbsp;(<span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">destructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">destructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) :=<br/>
&nbsp;&nbsp;(<span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">destructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">destructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) :=<br/>
&nbsp;&nbsp;(<span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">destructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">destructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) <span class="id">ident</span>(<span class="id">g</span>) :=<br/>
&nbsp;&nbsp;(<span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">destructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span> <span class="id">g</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">destructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) <span class="id">ident</span>(<span class="id">g</span>) <span class="id">ident</span>(<span class="id">h</span>) := <br/>
&nbsp;&nbsp;(<span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">destructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">destructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) <span class="id">ident</span>(<span class="id">g</span>) <span class="id">ident</span>(<span class="id">h</span>) <span class="id">ident</span>(<span class="id">i</span>) := <br/>
&nbsp;&nbsp;(<span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">destructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span> <span class="id">i</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">destructs</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) <span class="id">ident</span>(<span class="id">g</span>) <span class="id">ident</span>(<span class="id">h</span>) <span class="id">ident</span>(<span class="id">i</span>) <span class="id">ident</span>(<span class="id">j</span>) := <br/>
&nbsp;&nbsp;(<span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">destructs</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span> <span class="id">i</span> <span class="id">j</span>).<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">depdes</span>" <span class="id">ident</span>(<span class="id">_something_which_shold_not_occur_in_the_goal_</span>) :=<br/>
&nbsp;&nbsp;(<span class="kwd">let</span> <span class="id">_x_</span> := <span class="id">type</span> <span class="id">of</span> <span class="id">_something_which_shold_not_occur_in_the_goal_</span> <br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">in</span> <span class="tactic">dependent</span> <span class="tactic">destruction</span> <span class="id">_something_which_shold_not_occur_in_the_goal_</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">depdes</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) := <br/>
&nbsp;&nbsp;(<span class="id">depdes</span> <span class="id">a</span>; <span class="id">depdes</span> <span class="id">b</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">depdes</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) := <br/>
&nbsp;&nbsp;(<span class="id">depdes</span> <span class="id">a</span>; <span class="id">depdes</span> <span class="id">b</span> <span class="id">c</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">depdes</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">depdes</span> <span class="id">a</span>; <span class="id">depdes</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">depdes</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">depdes</span> <span class="id">a</span>; <span class="id">depdes</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">depdes</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">depdes</span> <span class="id">a</span>; <span class="id">depdes</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">depdes</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) <span class="id">ident</span>(<span class="id">g</span>) :=<br/>
&nbsp;&nbsp;(<span class="id">depdes</span> <span class="id">a</span>; <span class="id">depdes</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span> <span class="id">g</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">depdes</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) <span class="id">ident</span>(<span class="id">g</span>) <span class="id">ident</span>(<span class="id">h</span>) := <br/>
&nbsp;&nbsp;(<span class="id">depdes</span> <span class="id">a</span>; <span class="id">depdes</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">depdes</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) <span class="id">ident</span>(<span class="id">g</span>) <span class="id">ident</span>(<span class="id">h</span>) <span class="id">ident</span>(<span class="id">i</span>) := <br/>
&nbsp;&nbsp;(<span class="id">depdes</span> <span class="id">a</span>; <span class="id">depdes</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span> <span class="id">i</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">depdes</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) <span class="id">ident</span>(<span class="id">g</span>) <span class="id">ident</span>(<span class="id">h</span>) <span class="id">ident</span>(<span class="id">i</span>) <span class="id">ident</span>(<span class="id">j</span>) := <br/>
&nbsp;&nbsp;(<span class="id">depdes</span> <span class="id">a</span>; <span class="id">depdes</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span> <span class="id">g</span> <span class="id">h</span> <span class="id">i</span> <span class="id">j</span>).<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">depgen</span>" <span class="id">ident</span>(<span class="id">x</span>) := <span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">x</span>.<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">eappleft</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> "<span class="id">__lem__</span>" <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">X1</span> := <span class="tactic">fresh</span> "<span class="id">__lem__</span>" <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">X2</span> := <span class="tactic">fresh</span> "<span class="id">__lem__</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">X</span>:= <span class="id">H</span>); <span class="kwd">let</span> <span class="id">P</span> := <span class="id">type</span> <span class="id">of</span> <span class="id">X</span> <span class="kwd">in</span> <span class="id">hdesHi</span> <span class="id">X</span> <span class="id">P</span> <span class="id">X1</span> <span class="id">X2</span>;<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">X1</span>; <span class="tactic">clear</span> <span class="id">X1</span> <span class="id">X2</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">eappright</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> "<span class="id">__lem__</span>" <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">X1</span> := <span class="tactic">fresh</span> "<span class="id">__lem__</span>" <span class="kwd">in</span> <span class="kwd">let</span> <span class="id">X2</span> := <span class="tactic">fresh</span> "<span class="id">__lem__</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">X</span>:= <span class="id">H</span>); <span class="kwd">let</span> <span class="id">P</span> := <span class="id">type</span> <span class="id">of</span> <span class="id">X</span> <span class="kwd">in</span> <span class="id">hdesHi</span> <span class="id">X</span> <span class="id">P</span> <span class="id">X1</span> <span class="id">X2</span>;<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">X2</span>; <span class="tactic">clear</span> <span class="id">X1</span> <span class="id">X2</span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="__guard__">__guard__</a></span> <span class="id">A</span> (<span class="id">a</span> : <span class="id"><a href="compcert.lib.sflib.html#A">A</a></span>) : <span class="id"><a href="compcert.lib.sflib.html#A">A</a></span> := <span class="id"><a href="compcert.lib.sflib.html#a">a</a></span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="__GUARD__">__GUARD__</a></span> <span class="id">A</span> (<span class="id">a</span> : <span class="id"><a href="compcert.lib.sflib.html#A">A</a></span>) : <span class="id"><a href="compcert.lib.sflib.html#A">A</a></span> := <span class="id"><a href="compcert.lib.sflib.html#a">a</a></span>.<br/>
<span class="id">Arguments</span> <span class="id"><a href="compcert.lib.sflib.html#__guard__">__guard__</a></span> <span class="id">A</span> <span class="id">a</span> : <span class="tactic">simpl</span> <span class="id">never</span>.<br/>
<span class="id">Arguments</span> <span class="id"><a href="compcert.lib.sflib.html#__GUARD__">__GUARD__</a></span> <span class="id">A</span> <span class="id">a</span> : <span class="tactic">simpl</span> <span class="id">never</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">guard</span>" <span class="id">constr</span>(<span class="id">t</span>) "<span class="kwd">in</span>" <span class="id">hyp</span>(<span class="id">H</span>) := <span class="id">fold</span> (<span class="id"><a href="compcert.lib.sflib.html#__guard__">__guard__</a></span> <span class="id">t</span>) <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">guardH</span>" <span class="id">hyp</span>(<span class="id">H</span>) := <span class="kwd">let</span> <span class="id">t</span> := <span class="id">type</span> <span class="id">of</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">guard</span> <span class="id">t</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">guard</span>" :=  <br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [<span class="id">H</span>: ?<span class="id">P</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="kwd">match</span> <span class="id">P</span> <span class="kwd">with</span> <span class="id"><a href="compcert.lib.sflib.html#__guard__">__guard__</a></span> <span class="id">_</span> =&gt; <span class="tactic">fail</span> 2 <span class="kwd">end</span>); <span class="id">guardH</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">sguard</span>" <span class="id">constr</span>(<span class="id">t</span>) "<span class="kwd">in</span>" <span class="id">hyp</span>(<span class="id">H</span>) := <span class="id">fold</span> (<span class="id"><a href="compcert.lib.sflib.html#__GUARD__">__GUARD__</a></span> <span class="id">t</span>) <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">sguard</span>" "<span class="kwd">in</span>" <span class="id">hyp</span>(<span class="id">H</span>) := <span class="kwd">let</span> <span class="id">t</span> := <span class="id">type</span> <span class="id">of</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">sguard</span> <span class="id">t</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">unguard</span> := <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#__guard__">__guard__</a></span> <span class="kwd">in</span> *.<br/>
<span class="kwd">Ltac</span> <span class="id">unguardH</span> <span class="id">H</span> := <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#__guard__">__guard__</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">unsguard</span> <span class="id">H</span> := <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#__GUARD__">__GUARD__</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">desH</span> <span class="id">H</span> := <span class="id">guard</span>; <span class="id">unguardH</span> <span class="id">H</span>; <span class="id">des</span>; <span class="id">unguard</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">splits</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span>;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <br/>
&nbsp;&nbsp;| [ |- <span class="id">_</span> /\ <span class="id">_</span> ] =&gt; <span class="tactic">split</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">esplits</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span>;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> <br/>
&nbsp;&nbsp;| [ |- @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#ex">ex</a></span> <span class="id">_</span> <span class="id">_</span> ] =&gt; <span class="id">eexists</span><br/>
&nbsp;&nbsp;| [ |- <span class="id">_</span> /\ <span class="id">_</span> ] =&gt; <span class="tactic">split</span><br/>
&nbsp;&nbsp;| [ |- @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#sig">sig</a></span> <span class="id">_</span> <span class="id">_</span> ] =&gt; <span class="id">eexists</span><br/>
&nbsp;&nbsp;| [ |- @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#sigT">sigT</a></span> <span class="id">_</span> <span class="id">_</span> ] =&gt; <span class="id">eexists</span><br/>
&nbsp;&nbsp;| [ |- @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#prod">prod</a></span> <span class="id">_</span>  <span class="id">_</span> ] =&gt; <span class="tactic">split</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">replace_all</span>" <span class="id">constr</span>(<span class="id">e</span>) := <span class="tactic">repeat</span> (<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="kwd">in</span> <span class="tactic">assert</span> (<span class="id">X</span>: <span class="id">e</span>) <span class="tactic">by</span> (<span class="id">clarify</span>; <span class="tactic">eauto</span>; <span class="id">done</span>); <br/>
&nbsp;&nbsp;<span class="id">first</span> [<span class="tactic">rewrite</span> !<span class="id">X</span> | <span class="tactic">setoid_rewrite</span> <span class="id">X</span>]; <span class="tactic">clear</span> <span class="id">X</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="all_conj_dist">all_conj_dist</a></span>: <span class="kwd">forall</span> <span class="id">A</span> (<span class="id">P</span> <span class="id">Q</span>: <span class="id"><a href="compcert.lib.sflib.html#A">A</a></span> -&gt; <span class="kwd">Prop</span>), <br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">a</span>, <span class="id"><a href="compcert.lib.sflib.html#P">P</a></span> <span class="id"><a href="compcert.lib.sflib.html#a">a</a></span> /\ <span class="id"><a href="compcert.lib.sflib.html#Q">Q</a></span> <span class="id"><a href="compcert.lib.sflib.html#a">a</a></span>) -&gt; (<span class="kwd">forall</span> <span class="id">a</span>, <span class="id"><a href="compcert.lib.sflib.html#P">P</a></span> <span class="id"><a href="compcert.lib.sflib.html#a">a</a></span>) /\ (<span class="kwd">forall</span> <span class="id">a</span>, <span class="id"><a href="compcert.lib.sflib.html#Q">Q</a></span> <span class="id"><a href="compcert.lib.sflib.html#a">a</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1196')">Proof.</div>
<div class="proofscript" id="proof1196">
 <span class="tactic">intros</span>; <span class="id">hdes</span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">extensionalities</span>" :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">let</span> <span class="id">x</span> := <span class="tactic">fresh</span> <span class="kwd">in</span> <span class="tactic">extensionality</span> <span class="id">x</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">extensionalities</span>" <span class="id">ident</span>(<span class="id">a</span>) :=<br/>
&nbsp;&nbsp;(<span class="tactic">extensionality</span> <span class="id">a</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">extensionalities</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) :=<br/>
&nbsp;&nbsp;(<span class="tactic">extensionality</span> <span class="id">a</span>; <span class="tactic">extensionality</span> <span class="id">b</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">extensionalities</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) :=<br/>
&nbsp;&nbsp;(<span class="tactic">extensionality</span> <span class="id">a</span>; <span class="id">extensionalities</span> <span class="id">b</span> <span class="id">c</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">extensionalities</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) :=<br/>
&nbsp;&nbsp;(<span class="tactic">extensionality</span> <span class="id">a</span>; <span class="id">extensionalities</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">extensionalities</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) :=<br/>
&nbsp;&nbsp;(<span class="tactic">extensionality</span> <span class="id">a</span>; <span class="id">extensionalities</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span>).<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">extensionalities</span>" <span class="id">ident</span>(<span class="id">a</span>) <span class="id">ident</span>(<span class="id">b</span>) <span class="id">ident</span>(<span class="id">c</span>) <span class="id">ident</span>(<span class="id">d</span>) <span class="id">ident</span>(<span class="id">e</span>) <span class="id">ident</span>(<span class="id">f</span>) :=<br/>
&nbsp;&nbsp;(<span class="tactic">extensionality</span> <span class="id">a</span>; <span class="id">extensionalities</span> <span class="id">b</span> <span class="id">c</span> <span class="id">d</span> <span class="id">e</span> <span class="id">f</span>).<br/>
<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">inst</span>" := <span class="id">instantiate</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">econs</span>" := <span class="id">econstructor</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">econs</span>" <span class="id">int_or_var</span>(<span class="id">x</span>) := <span class="id">econstructor</span> <span class="id">x</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">i</span>" := <span class="tactic">intros</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">ii</span>" := <span class="tactic">repeat</span> <span class="tactic">intro</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">s</span>" := <span class="tactic">simpl</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">s</span>" <span class="id">ident</span>(<span class="id">a</span>) := <span class="tactic">simpl</span> <span class="id">a</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">s</span>" <span class="id">constr</span>(<span class="id">t</span>) := <span class="tactic">simpl</span> <span class="id">t</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">s</span>" "<span class="kwd">in</span>" <span class="id">hyp</span>(<span class="id">H</span>) := <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">ss</span>" := <span class="id">simpls</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">r</span>" := <span class="tactic">red</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">r</span>" "<span class="kwd">in</span>" <span class="id">hyp</span>(<span class="id">H</span>) := <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">rr</span>" := <span class="tactic">repeat</span> <span class="tactic">red</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">rr</span>" "<span class="kwd">in</span>" <span class="id">hyp</span>(<span class="id">H</span>) := <span class="tactic">repeat</span> <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="__mark__">__mark__</a></span> <span class="id">A</span> (<span class="id">a</span> : <span class="id"><a href="compcert.lib.sflib.html#A">A</a></span>) : <span class="id"><a href="compcert.lib.sflib.html#A">A</a></span> := <span class="id"><a href="compcert.lib.sflib.html#a">a</a></span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">M</span>" := <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [|-?<span class="id">G</span>] =&gt; <span class="id">fold</span> (<span class="id"><a href="compcert.lib.sflib.html#__mark__">__mark__</a></span> <span class="id">G</span>) <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">Mdo</span>" <span class="id">tactic</span>(<span class="id">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="id">first</span> [ <span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [|- <span class="id"><a href="compcert.lib.sflib.html#__mark__">__mark__</a></span> <span class="id">_</span> ] =&gt; <span class="tactic">fail</span> 2 <span class="kwd">end</span> | <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#__mark__">__mark__</a></span>; <span class="id">tac</span> ].<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">Mskip</span>" <span class="id">tactic</span>(<span class="id">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="id">first</span> [ <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [|- <span class="id"><a href="compcert.lib.sflib.html#__mark__">__mark__</a></span> <span class="id">_</span> ] =&gt; <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#__mark__">__mark__</a></span> <span class="kwd">end</span> | <span class="id">tac</span> ].<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">Mfirst</span>" <span class="id">tactic</span>(<span class="id">main</span>) ";;" <span class="id">tactic</span>(<span class="id">post</span>) := <br/>
&nbsp;&nbsp;&nbsp;<span class="id">main</span>; (<span class="id">Mdo</span> (<span class="id">post</span>; <span class="id">M</span>)); (<span class="id">Mskip</span> <span class="id">post</span>).<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">on_last_hyp</span> <span class="id">tac</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [ <span class="id">H</span> : <span class="id">_</span> |- <span class="id">_</span> ] =&gt; <span class="id">first</span> [ <span class="id">tac</span> <span class="id">H</span> | <span class="tactic">fail</span> 1 ] <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">revert_until</span> <span class="id">id</span> :=<br/>
&nbsp;&nbsp;<span class="id">on_last_hyp</span> <span class="id">ltac</span>:(<span class="kwd">fun</span> <span class="id">id</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">id</span>' <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">id</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">revert</span> <span class="id">id</span>' ; <span class="id">revert_until</span> <span class="id">id</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">string_scope</span>.<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">list_scope</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="beq_str">beq_str</a></span> (<span class="id">s1</span> <span class="id">s2</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> := <br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.lib.sflib.html#s1">s1</a></span>, <span class="id"><a href="compcert.lib.sflib.html#s2">s2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| "", "" =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#String">String</a></span> <span class="id">a</span> <span class="id">s1</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#String">String</a></span> <span class="id">b</span> <span class="id">s2</span>' =&gt; <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.Ascii.html#ascii_dec">Ascii.ascii_dec</a></span> <span class="id">a</span> <span class="id">b</span> <span class="kwd">then</span> <span class="id"><a href="compcert.lib.sflib.html#beq_str">beq_str</a></span> <span class="id">s1</span>' <span class="id">s2</span>' <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">uf</span> := (<span class="id">autounfold</span> <span class="kwd">with</span> * <span class="kwd">in</span> *).<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">patout</span>" <span class="id">constr</span>(<span class="id">z</span>) "<span class="kwd">in</span>" <span class="id">hyp</span>(<span class="id">a</span>) :=<br/>
&nbsp;&nbsp;<span class="tactic">pattern</span> <span class="id">z</span> <span class="kwd">in</span> <span class="id">a</span>; <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [<span class="id">a</span>:=?<span class="id">f</span> <span class="id">z</span>|-<span class="id">_</span>] =&gt; <span class="tactic">unfold</span> <span class="id">a</span>; <span class="tactic">clear</span> <span class="id">a</span>; <span class="tactic">set</span> (<span class="id">a</span>:=<span class="id">f</span>) <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">clear_upto</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [<span class="id">Hcrr</span> : <span class="id">_</span> |- <span class="id">_</span> ] =&gt; <span class="id">first</span> [ <span class="id">check_equal</span> <span class="id">Hcrr</span> <span class="id">H</span>; <span class="tactic">fail</span> 2<br/>
&nbsp;| <span class="tactic">clear</span> <span class="id">Hcrr</span> ] <span class="kwd">end</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="_Evar_sflib_">_Evar_sflib_</a></span> (<span class="id">A</span>:<span class="kwd">Type</span>) (<span class="id">x</span>:<span class="id"><a href="compcert.lib.sflib.html#A">A</a></span>) := <span class="id"><a href="compcert.lib.sflib.html#x">x</a></span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">hide_evar</span>" <span class="id">int_or_var</span>(<span class="id">n</span>) := <span class="kwd">let</span> <span class="id">QQ</span> := <span class="tactic">fresh</span> "<span class="id">QQ</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">hget_evar</span> <span class="id">n</span>; <span class="tactic">intro</span>;<br/>
&nbsp;&nbsp;<span class="id">lazymatch</span> <span class="id">goal</span> <span class="kwd">with</span> [ <span class="id">H</span> := ?<span class="id">X</span> |- <span class="id">_</span>] =&gt; <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">QQ</span> := <span class="id">X</span>) <span class="kwd">in</span> *; <span class="id">fold</span> (<span class="id"><a href="compcert.lib.sflib.html#_Evar_sflib_">_Evar_sflib_</a></span> <span class="id">X</span>) <span class="kwd">in</span> <span class="id">QQ</span>; <span class="tactic">clear</span> <span class="id">H</span> <br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">hide_evars</span> := <span class="tactic">repeat</span> (<span class="id">hide_evar</span> 1).<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">show_evars</span> := <span class="tactic">repeat</span> (<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [ <span class="id">H</span> := @<span class="id"><a href="compcert.lib.sflib.html#_Evar_sflib_">_Evar_sflib_</a></span> <span class="id">_</span> <span class="id">_</span> |- <span class="id">_</span> ] =&gt; <span class="tactic">unfold</span><br/>
&nbsp;<span class="id"><a href="compcert.lib.sflib.html#_Evar_sflib_">_Evar_sflib_</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">unfold</span> <span class="id">H</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">H</span> <span class="kwd">end</span>).<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">revert1</span> := <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> [<span class="id">H</span>: <span class="id">_</span>|-<span class="id">_</span>] =&gt; <span class="id">revert</span> <span class="id">H</span> <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eqimpl">eqimpl</a></span>: <span class="kwd">forall</span> <span class="id">P</span> <span class="id">Q</span> : <span class="kwd">Prop</span>, <span class="id"><a href="compcert.lib.sflib.html#P">P</a></span> = <span class="id"><a href="compcert.lib.sflib.html#Q">Q</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#P">P</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#Q">Q</a></span>. <br/>
<div class="toggleproof" onclick="toggleDisplay('proof1197')">Proof.</div>
<div class="proofscript" id="proof1197">
 <span class="tactic">by</span> <span class="id">i</span>; <span class="tactic">subst</span>; <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">ginduction</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">move</span> <span class="id">H</span> <span class="tactic">at</span> <span class="id">top</span>; <span class="id">revert_until</span> <span class="id">H</span>; <span class="tactic">induction</span> <span class="id">H</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">greflgen</span>" <span class="id">constr</span>(<span class="id">t</span>) "<span class="kwd">as</span>" <span class="id">ident</span>(<span class="id">g</span>)  := <br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">EQ</span> := <span class="tactic">fresh</span> "<span class="id">XEQ</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id">t</span>); <span class="tactic">generalize</span> <span class="id">t</span> <span class="tactic">at</span> -2 <span class="kwd">as</span> <span class="id">g</span><br/>
&nbsp;&nbsp;; <span class="tactic">intros</span> ? <span class="id">EQ</span> ?; <span class="id">revert</span> <span class="id">EQ</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">eadmit</span> :=<br/>
&nbsp;&nbsp;<span class="id">exfalso</span>; <span class="tactic">clear</span>; <span class="id">admit</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">special</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">type</span> <span class="id">of</span> <span class="id">H</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| ?<span class="id">A</span> -&gt; ?<span class="id">B</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">a</span> := <span class="tactic">fresh</span> <span class="kwd">in</span> <span class="tactic">assert</span> (<span class="id">a</span>: <span class="id">A</span>); [|<span class="id">specialize</span> (<span class="id">H</span> <span class="id">a</span>)]<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Useful for e.g. <span class="bracket"><span class="id">ex</span> @<span class="id">nil</span></span>. </div>
<span class="kwd">Ltac</span> <span class="id">ex</span> <span class="id">x</span> := <span class="tactic">eapply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#ex_intro">ex_intro</a></span> <span class="id">_</span> (<span class="id">x</span> <span class="id">_</span>)).<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">inst_pairs</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">first</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">instantiate</span> (9 := (<span class="id">_</span>, <span class="id">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">instantiate</span> (8 := (<span class="id">_</span>, <span class="id">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">instantiate</span> (7 := (<span class="id">_</span>, <span class="id">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">instantiate</span> (6 := (<span class="id">_</span>, <span class="id">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">instantiate</span> (5 := (<span class="id">_</span>, <span class="id">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">instantiate</span> (4 := (<span class="id">_</span>, <span class="id">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">instantiate</span> (3 := (<span class="id">_</span>, <span class="id">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">instantiate</span> (2 := (<span class="id">_</span>, <span class="id">_</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">instantiate</span> (1 := (<span class="id">_</span>, <span class="id">_</span>))].<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">simpl_proj</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 5 (<span class="tactic">simpl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">_</span>, <span class="id">_</span>)) <span class="kwd">in</span> *; <span class="tactic">simpl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id">_</span>, <span class="id">_</span>)) <span class="kwd">in</span> *).<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">clean</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> |- <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: ?<span class="id">x</span> = ?<span class="id">y</span> |- <span class="id">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&gt; <span class="tactic">try</span> (<span class="id">has_evar</span> <span class="id">x</span>; <span class="tactic">fail</span> 2); <span class="tactic">try</span> (<span class="id">has_evar</span> <span class="id">y</span>; <span class="tactic">fail</span> 2);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id">y</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;; <span class="id">simpl_proj</span>.<br/>
<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">lhs</span>" <span class="id">tactic</span>(<span class="id">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> |- ?<span class="id">op</span> ?<span class="id">lhs</span> ?<span class="id">rhs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">tmp</span> := <span class="tactic">fresh</span> <span class="kwd">in</span> <span class="tactic">set</span> (<span class="id">tmp</span> := <span class="id">rhs</span>); <span class="id">tac</span>; <span class="tactic">unfold</span> <span class="id">tmp</span>; <span class="tactic">clear</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">lhs3</span>" <span class="id">tactic3</span>(<span class="id">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> |- ?<span class="id">op</span> ?<span class="id">lhs</span> ?<span class="id">rhs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">tmp</span> := <span class="tactic">fresh</span> <span class="kwd">in</span> <span class="tactic">set</span> (<span class="id">tmp</span> := <span class="id">rhs</span>); <span class="id">tac</span>; <span class="tactic">unfold</span> <span class="id">tmp</span>; <span class="tactic">clear</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">rhs</span>" <span class="id">tactic</span>(<span class="id">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> |- ?<span class="id">op</span> ?<span class="id">lhs</span> ?<span class="id">rhs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">tmp</span> := <span class="tactic">fresh</span> <span class="kwd">in</span> <span class="tactic">set</span> (<span class="id">tmp</span> := <span class="id">lhs</span>); <span class="id">tac</span>; <span class="tactic">unfold</span> <span class="id">tmp</span>; <span class="tactic">clear</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">rhs3</span>" <span class="id">tactic3</span>(<span class="id">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> |- ?<span class="id">op</span> ?<span class="id">lhs</span> ?<span class="id">rhs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">tmp</span> := <span class="tactic">fresh</span> <span class="kwd">in</span> <span class="tactic">set</span> (<span class="id">tmp</span> := <span class="id">lhs</span>); <span class="id">tac</span>; <span class="tactic">unfold</span> <span class="id">tmp</span>; <span class="tactic">clear</span> <span class="id">tmp</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<br/>
<br/>
<div class="doc">Execute a tactic only if the goal contains no evars. </div>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">safe</span>" <span class="id">tactic</span>(<span class="id">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> |- ?<span class="id">G</span> =&gt; <span class="tactic">try</span> (<span class="id">has_evar</span> <span class="id">G</span>; <span class="tactic">fail</span> 2); <span class="id">tac</span> <span class="kwd">end</span>.<br/>
<br/>
<br/>
<div class="doc">Rename a hypothesis to a fresh name. </div>
<span class="kwd">Ltac</span> <span class="id">ren</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">X</span> := <span class="tactic">fresh</span> <span class="id">H</span> <span class="kwd">in</span> <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">X</span>.<br/>
<br/>
<br/>
<br/>
<br/>
<div class="doc">Automation using econstructor.
    What it does is clear from the definition below. </div>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">econsby</span>" <span class="id">tactic</span>(<span class="id">tac</span>) :=<br/>
&nbsp;&nbsp;<span class="id">first</span> [<span class="id">econstructor</span>  1; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span>  2; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span>  3; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span>  4; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span>  5; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span>  6; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span>  7; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span>  8; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span>  9; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span> 10; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span> 11; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span> 12; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span> 13; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span> 14; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span> 15; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span> 16; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span> 17; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span> 18; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span> 19; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|<span class="id">econstructor</span> 20; (<span class="tactic">by</span> <span class="id">tac</span>)<br/>
&nbsp;&nbsp;].<br/>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="f_equal6">f_equal6</a></span> (<span class="id">A1</span> <span class="id">A2</span> <span class="id">A3</span> <span class="id">A4</span> <span class="id">A5</span> <span class="id">A6</span> <span class="id">B</span>: <span class="kwd">Type</span>) (<span class="id">f</span>: <span class="id"><a href="compcert.lib.sflib.html#A1">A1</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A2">A2</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A3">A3</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A4">A4</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A5">A5</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A6">A6</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#B">B</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x1</span> <span class="id">y1</span>: <span class="id"><a href="compcert.lib.sflib.html#A1">A1</a></span>) (<span class="id">EQ1</span>: <span class="id"><a href="compcert.lib.sflib.html#x1">x1</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y1">y1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x2</span> <span class="id">y2</span>: <span class="id"><a href="compcert.lib.sflib.html#A2">A2</a></span>) (<span class="id">EQ2</span>: <span class="id"><a href="compcert.lib.sflib.html#x2">x2</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y2">y2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x3</span> <span class="id">y3</span>: <span class="id"><a href="compcert.lib.sflib.html#A3">A3</a></span>) (<span class="id">EQ3</span>: <span class="id"><a href="compcert.lib.sflib.html#x3">x3</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y3">y3</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x4</span> <span class="id">y4</span>: <span class="id"><a href="compcert.lib.sflib.html#A4">A4</a></span>) (<span class="id">EQ4</span>: <span class="id"><a href="compcert.lib.sflib.html#x4">x4</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y4">y4</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x5</span> <span class="id">y5</span>: <span class="id"><a href="compcert.lib.sflib.html#A5">A5</a></span>) (<span class="id">EQ5</span>: <span class="id"><a href="compcert.lib.sflib.html#x5">x5</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y5">y5</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x6</span> <span class="id">y6</span>: <span class="id"><a href="compcert.lib.sflib.html#A6">A6</a></span>) (<span class="id">EQ6</span>: <span class="id"><a href="compcert.lib.sflib.html#x6">x6</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y6">y6</a></span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">EQ</span>: <span class="id"><a href="compcert.lib.sflib.html#f">f</a></span> <span class="id"><a href="compcert.lib.sflib.html#x1">x1</a></span> <span class="id"><a href="compcert.lib.sflib.html#x2">x2</a></span> <span class="id"><a href="compcert.lib.sflib.html#x3">x3</a></span> <span class="id"><a href="compcert.lib.sflib.html#x4">x4</a></span> <span class="id"><a href="compcert.lib.sflib.html#x5">x5</a></span> <span class="id"><a href="compcert.lib.sflib.html#x6">x6</a></span> = <span class="id"><a href="compcert.lib.sflib.html#f">f</a></span> <span class="id"><a href="compcert.lib.sflib.html#y1">y1</a></span> <span class="id"><a href="compcert.lib.sflib.html#y2">y2</a></span> <span class="id"><a href="compcert.lib.sflib.html#y3">y3</a></span> <span class="id"><a href="compcert.lib.sflib.html#y4">y4</a></span> <span class="id"><a href="compcert.lib.sflib.html#y5">y5</a></span> <span class="id"><a href="compcert.lib.sflib.html#y6">y6</a></span>&gt;&gt;<br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1198')">Proof.</div>
<div class="proofscript" id="proof1198">
 <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="f_equal7">f_equal7</a></span> (<span class="id">A1</span> <span class="id">A2</span> <span class="id">A3</span> <span class="id">A4</span> <span class="id">A5</span> <span class="id">A6</span> <span class="id">A7</span> <span class="id">B</span>: <span class="kwd">Type</span>) (<span class="id">f</span>: <span class="id"><a href="compcert.lib.sflib.html#A1">A1</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A2">A2</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A3">A3</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A4">A4</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A5">A5</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A6">A6</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A7">A7</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#B">B</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x1</span> <span class="id">y1</span>: <span class="id"><a href="compcert.lib.sflib.html#A1">A1</a></span>) (<span class="id">EQ1</span>: <span class="id"><a href="compcert.lib.sflib.html#x1">x1</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y1">y1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x2</span> <span class="id">y2</span>: <span class="id"><a href="compcert.lib.sflib.html#A2">A2</a></span>) (<span class="id">EQ2</span>: <span class="id"><a href="compcert.lib.sflib.html#x2">x2</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y2">y2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x3</span> <span class="id">y3</span>: <span class="id"><a href="compcert.lib.sflib.html#A3">A3</a></span>) (<span class="id">EQ3</span>: <span class="id"><a href="compcert.lib.sflib.html#x3">x3</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y3">y3</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x4</span> <span class="id">y4</span>: <span class="id"><a href="compcert.lib.sflib.html#A4">A4</a></span>) (<span class="id">EQ4</span>: <span class="id"><a href="compcert.lib.sflib.html#x4">x4</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y4">y4</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x5</span> <span class="id">y5</span>: <span class="id"><a href="compcert.lib.sflib.html#A5">A5</a></span>) (<span class="id">EQ5</span>: <span class="id"><a href="compcert.lib.sflib.html#x5">x5</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y5">y5</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x6</span> <span class="id">y6</span>: <span class="id"><a href="compcert.lib.sflib.html#A6">A6</a></span>) (<span class="id">EQ6</span>: <span class="id"><a href="compcert.lib.sflib.html#x6">x6</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y6">y6</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x7</span> <span class="id">y7</span>: <span class="id"><a href="compcert.lib.sflib.html#A7">A7</a></span>) (<span class="id">EQ7</span>: <span class="id"><a href="compcert.lib.sflib.html#x7">x7</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y7">y7</a></span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">EQ</span>: <span class="id"><a href="compcert.lib.sflib.html#f">f</a></span> <span class="id"><a href="compcert.lib.sflib.html#x1">x1</a></span> <span class="id"><a href="compcert.lib.sflib.html#x2">x2</a></span> <span class="id"><a href="compcert.lib.sflib.html#x3">x3</a></span> <span class="id"><a href="compcert.lib.sflib.html#x4">x4</a></span> <span class="id"><a href="compcert.lib.sflib.html#x5">x5</a></span> <span class="id"><a href="compcert.lib.sflib.html#x6">x6</a></span> <span class="id"><a href="compcert.lib.sflib.html#x7">x7</a></span> = <span class="id"><a href="compcert.lib.sflib.html#f">f</a></span> <span class="id"><a href="compcert.lib.sflib.html#y1">y1</a></span> <span class="id"><a href="compcert.lib.sflib.html#y2">y2</a></span> <span class="id"><a href="compcert.lib.sflib.html#y3">y3</a></span> <span class="id"><a href="compcert.lib.sflib.html#y4">y4</a></span> <span class="id"><a href="compcert.lib.sflib.html#y5">y5</a></span> <span class="id"><a href="compcert.lib.sflib.html#y6">y6</a></span> <span class="id"><a href="compcert.lib.sflib.html#y7">y7</a></span>&gt;&gt;<br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1199')">Proof.</div>
<div class="proofscript" id="proof1199">
 <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="f_equal8">f_equal8</a></span> (<span class="id">A1</span> <span class="id">A2</span> <span class="id">A3</span> <span class="id">A4</span> <span class="id">A5</span> <span class="id">A6</span> <span class="id">A7</span> <span class="id">A8</span> <span class="id">B</span>: <span class="kwd">Type</span>) (<span class="id">f</span>: <span class="id"><a href="compcert.lib.sflib.html#A1">A1</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A2">A2</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A3">A3</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A4">A4</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A5">A5</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A6">A6</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A7">A7</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#A8">A8</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#B">B</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x1</span> <span class="id">y1</span>: <span class="id"><a href="compcert.lib.sflib.html#A1">A1</a></span>) (<span class="id">EQ1</span>: <span class="id"><a href="compcert.lib.sflib.html#x1">x1</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y1">y1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x2</span> <span class="id">y2</span>: <span class="id"><a href="compcert.lib.sflib.html#A2">A2</a></span>) (<span class="id">EQ2</span>: <span class="id"><a href="compcert.lib.sflib.html#x2">x2</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y2">y2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x3</span> <span class="id">y3</span>: <span class="id"><a href="compcert.lib.sflib.html#A3">A3</a></span>) (<span class="id">EQ3</span>: <span class="id"><a href="compcert.lib.sflib.html#x3">x3</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y3">y3</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x4</span> <span class="id">y4</span>: <span class="id"><a href="compcert.lib.sflib.html#A4">A4</a></span>) (<span class="id">EQ4</span>: <span class="id"><a href="compcert.lib.sflib.html#x4">x4</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y4">y4</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x5</span> <span class="id">y5</span>: <span class="id"><a href="compcert.lib.sflib.html#A5">A5</a></span>) (<span class="id">EQ5</span>: <span class="id"><a href="compcert.lib.sflib.html#x5">x5</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y5">y5</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x6</span> <span class="id">y6</span>: <span class="id"><a href="compcert.lib.sflib.html#A6">A6</a></span>) (<span class="id">EQ6</span>: <span class="id"><a href="compcert.lib.sflib.html#x6">x6</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y6">y6</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x7</span> <span class="id">y7</span>: <span class="id"><a href="compcert.lib.sflib.html#A7">A7</a></span>) (<span class="id">EQ7</span>: <span class="id"><a href="compcert.lib.sflib.html#x7">x7</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y7">y7</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">x8</span> <span class="id">y8</span>: <span class="id"><a href="compcert.lib.sflib.html#A8">A8</a></span>) (<span class="id">EQ8</span>: <span class="id"><a href="compcert.lib.sflib.html#x8">x8</a></span> = <span class="id"><a href="compcert.lib.sflib.html#y8">y8</a></span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">EQ</span>: <span class="id"><a href="compcert.lib.sflib.html#f">f</a></span> <span class="id"><a href="compcert.lib.sflib.html#x1">x1</a></span> <span class="id"><a href="compcert.lib.sflib.html#x2">x2</a></span> <span class="id"><a href="compcert.lib.sflib.html#x3">x3</a></span> <span class="id"><a href="compcert.lib.sflib.html#x4">x4</a></span> <span class="id"><a href="compcert.lib.sflib.html#x5">x5</a></span> <span class="id"><a href="compcert.lib.sflib.html#x6">x6</a></span> <span class="id"><a href="compcert.lib.sflib.html#x7">x7</a></span> <span class="id"><a href="compcert.lib.sflib.html#x8">x8</a></span> = <span class="id"><a href="compcert.lib.sflib.html#f">f</a></span> <span class="id"><a href="compcert.lib.sflib.html#y1">y1</a></span> <span class="id"><a href="compcert.lib.sflib.html#y2">y2</a></span> <span class="id"><a href="compcert.lib.sflib.html#y3">y3</a></span> <span class="id"><a href="compcert.lib.sflib.html#y4">y4</a></span> <span class="id"><a href="compcert.lib.sflib.html#y5">y5</a></span> <span class="id"><a href="compcert.lib.sflib.html#y6">y6</a></span> <span class="id"><a href="compcert.lib.sflib.html#y7">y7</a></span> <span class="id"><a href="compcert.lib.sflib.html#y8">y8</a></span>&gt;&gt;<br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1200')">Proof.</div>
<div class="proofscript" id="proof1200">
 <span class="tactic">subst</span>. <span class="tactic">reflexivity</span>. Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">rpapply_raw</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="id">first</span>[<span class="id">erewrite</span> <span class="id"><a href="compcert.lib.sflib.html#f_equal8">f_equal8</a></span> | <span class="id">erewrite</span> <span class="id"><a href="compcert.lib.sflib.html#f_equal7">f_equal7</a></span> | <span class="id">erewrite</span> <span class="id"><a href="compcert.lib.sflib.html#f_equal6">f_equal6</a></span> | <span class="id">erewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal5">f_equal5</a></span> |<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal4">f_equal4</a></span> | <span class="id">erewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal3">f_equal3</a></span> | <span class="id">erewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal2">f_equal2</a></span> | <span class="id">erewrite</span> <span class="tactic">f_equal</span>];<br/>
&nbsp;&nbsp;[<span class="tactic">eapply</span> <span class="id">H</span>|..]; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">is_applied_function</span> <span class="id">TARGET</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">TARGET</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| ?<span class="id">f</span> ?<span class="id">x</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">idtac</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="tactic">fail</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">has_inside_strict</span> <span class="id">A</span> <span class="id">B</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">A</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">context</span>[<span class="id">B</span>] =&gt; <span class="id">tryif</span> (<span class="id">check_equal</span> <span class="id">A</span> <span class="id">B</span>) <span class="kwd">then</span> <span class="tactic">fail</span> <span class="kwd">else</span> <span class="id">idtac</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="tactic">fail</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">is_inside_others_body</span> <span class="id">TARGET</span> :=<br/>
&nbsp;&nbsp;<span class="id">tryif</span> (<span class="tactic">repeat</span> <span class="id">multimatch</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id">context</span>[?<span class="id">f</span> ?<span class="id">x</span>] ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tryif</span> (<span class="id">has_inside_strict</span> <span class="id">x</span> <span class="id">TARGET</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="tactic">fail</span> 2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;<span class="kwd">then</span> <span class="tactic">fail</span><br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">idtac</span><br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">on_leftest_function</span> <span class="id">TAC</span> :=<br/>
&nbsp;&nbsp;<span class="id">multimatch</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [ |- <span class="id">context</span>[?<span class="id">f</span> ?<span class="id">x</span>] ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tryif</span> (<span class="id">is_applied_function</span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tryif</span> (<span class="id">is_inside_others_body</span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">TAC</span> <span class="id">f</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">leftest_rpapply</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="id">on_leftest_function</span> <span class="id">ltac</span>:(<span class="kwd">fun</span> <span class="id">f</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">idtac</span> <span class="id">f</span>; <span class="id">first</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id">erewrite</span> (<span class="id"><a href="compcert.lib.sflib.html#f_equal8">f_equal8</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="id"><a href="compcert.lib.sflib.html#f_equal7">f_equal7</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="id"><a href="compcert.lib.sflib.html#f_equal6">f_equal6</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal5">f_equal5</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal4">f_equal4</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal3">f_equal3</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal2">f_equal2</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="tactic">f_equal</span>  <span class="id">f</span>) | <span class="tactic">fail</span>]); [ <span class="tactic">eapply</span> <span class="id">H</span> | .. ]; <span class="tactic">try</span> <span class="tactic">reflexivity</span>)<br/>
.<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">is_type</span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">type</span> <span class="id">of</span> <span class="id">x</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">Type</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">Set</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">Prop</span> =&gt; <span class="id">idtac</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">is_term_applied_function</span> <span class="id">TARGET</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">TARGET</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| ?<span class="id">f</span> ?<span class="id">x</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tryif</span> (<span class="id">is_type</span> <span class="id">x</span>) <span class="kwd">then</span> <span class="tactic">fail</span> <span class="kwd">else</span> <span class="id">idtac</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="tactic">fail</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">on_leftest_function_with_type</span> <span class="id">TAC</span> :=<br/>
&nbsp;&nbsp;<span class="id">multimatch</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [ |- <span class="id">context</span>[?<span class="id">f</span> ?<span class="id">x</span>] ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tryif</span> (<span class="id">is_term_applied_function</span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tryif</span> (<span class="id">is_inside_others_body</span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">TAC</span> <span class="id">f</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">rpapply</span> <span class="id">H</span> :=<br/>
&nbsp;&nbsp;<span class="id">on_leftest_function_with_type</span> <span class="id">ltac</span>:(<span class="kwd">fun</span> <span class="id">f</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">idtac</span> <span class="id">f</span>; <span class="id">first</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="id">erewrite</span> (<span class="id"><a href="compcert.lib.sflib.html#f_equal8">f_equal8</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="id"><a href="compcert.lib.sflib.html#f_equal7">f_equal7</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="id"><a href="compcert.lib.sflib.html#f_equal6">f_equal6</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal5">f_equal5</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal4">f_equal4</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal3">f_equal3</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal2">f_equal2</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">erewrite</span> (<span class="tactic">f_equal</span>  <span class="id">f</span>) | <span class="tactic">fail</span>]); [ <span class="tactic">eapply</span> <span class="id">H</span> | .. ]; <span class="tactic">try</span> <span class="tactic">reflexivity</span>)<br/>
.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">all</span> <span class="id">TAC</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">multimatch</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">TAC</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">TAC</span><br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">fold_in</span> <span class="id">x</span> <span class="id">H</span> := <span class="id">fold</span> <span class="id">x</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">fold</span> <span class="id">x</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">fold_all</span> <span class="id">x</span> := <span class="id">all</span> <span class="id">ltac</span>:(<span class="id">fold_in</span> <span class="id">x</span>).<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">clears</span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">context</span>[<span class="id">x</span>] |- <span class="id">_</span> =&gt; <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="id">x</span>] =&gt; <span class="tactic">fail</span> 2 "<span class="id">It</span> <span class="id">appears</span> <span class="kwd">in</span> <span class="id">the</span> <span class="id">goal</span>!"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">hide_goal</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [ |- ?<span class="id">G</span> ] =&gt; <span class="kwd">let</span> <span class="id">name</span> := <span class="tactic">fresh</span> "<span class="id">HIDDEN_GOAL</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">name</span> := <span class="id">G</span>); <span class="tactic">replace</span> <span class="id">G</span> <span class="kwd">with</span> <span class="id">name</span> <span class="tactic">by</span> <span class="tactic">reflexivity</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">unhide_goal</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [ |- ?<span class="id">G</span> ] =&gt; <span class="tactic">subst</span> <span class="id">G</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">is_local_definition</span> <span class="id">X</span> :=<br/>
&nbsp;&nbsp;<span class="id">hide_goal</span>;<br/>
&nbsp;&nbsp;<span class="id">tryif</span> (<span class="tactic">unfold</span> <span class="id">X</span>)<br/>
&nbsp;&nbsp;<span class="kwd">then</span> (<span class="id">unhide_goal</span>)<br/>
&nbsp;&nbsp;<span class="kwd">else</span> (<span class="id">unhide_goal</span>; <span class="tactic">fail</span>)<br/>
.<br/>
<span class="kwd">Ltac</span> <span class="id">negate</span> <span class="id">TAC</span> := <span class="id">tryif</span> <span class="id">TAC</span> <span class="kwd">then</span> <span class="tactic">fail</span> <span class="kwd">else</span> <span class="id">idtac</span>.<br/>
<span class="kwd">Ltac</span> <span class="id">clear_unused</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">multimatch</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">T</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">negate</span> <span class="id">ltac</span>:(<span class="id">is_local_definition</span> <span class="id">H</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> (<span class="id">type</span> <span class="id">of</span> <span class="id">T</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">Prop</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="tactic">try</span> <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
.<br/>
<span class="kwd">Goal</span> <span class="kwd">let</span> <span class="id">x</span> := 0 <span class="kwd">in</span> <span class="kwd">forall</span> <span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1201')">Proof.</div>
<div class="proofscript" id="proof1201">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">clear_unused</span>.<br/>
Abort.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">clear_tautology</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">multimatch</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">A</span> = ?<span class="id">B</span>, <span class="id">H2</span>: ?<span class="id">B</span> = ?<span class="id">A</span> |- <span class="id">_</span>] =&gt; <span class="tactic">clear</span> <span class="id">H2</span><br/>
 <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">X</span>, <span class="id">H2</span>: ?<span class="id">X</span> |- <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">negate</span> <span class="id">ltac</span>:(<span class="id">is_local_definition</span> <span class="id">H2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H2</span><br/>
 <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">clear_reducible_truth</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">smart_tac</span> := <span class="id">ss</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">multimatch</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">P</span> |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> (<span class="id">type</span> <span class="id">of</span> <span class="id">P</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">Prop</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">temp</span> := <span class="tactic">fresh</span> "<span class="id">temp</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tryif</span> <span class="tactic">assert</span>(<span class="id">temp</span>: <span class="id">P</span>) <span class="tactic">by</span> (<span class="tactic">clear</span> <span class="id">H</span>; <span class="id">smart_tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="tactic">clear</span> <span class="id">temp</span>; <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">clear_universal_truth</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">smart_tac</span> := <span class="id">ss</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">multimatch</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span>: ?<span class="id">P</span> |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> (<span class="id">type</span> <span class="id">of</span> <span class="id">P</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="kwd">Prop</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">temp</span> := <span class="tactic">fresh</span> "<span class="id">temp</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tryif</span> <span class="tactic">assert</span>(<span class="id">temp</span>: <span class="id">P</span>) <span class="tactic">by</span> (<span class="id">all</span> <span class="tactic">clear</span>; <span class="id">smart_tac</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="tactic">clear</span> <span class="id">temp</span>; <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">clear_tac</span> := <span class="tactic">repeat</span> (<span class="id">clear_unused</span>; <span class="id">clear_tautology</span>; <span class="id">clear_universal_truth</span>).<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">des_ifs_safe_aux</span> <span class="id">TAC</span> :=<br/>
&nbsp;&nbsp;<span class="id">TAC</span>;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">multimatch</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span>[<span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> (<span class="id">type</span> <span class="id">of</span> <span class="id">x</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| { <span class="id">_</span> } + { <span class="id">_</span> } =&gt; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="id">TAC</span>; []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="kwd">let</span> <span class="id">Heq</span> := <span class="tactic">fresh</span> "<span class="id">Heq</span>" <span class="kwd">in</span> <span class="tactic">destruct</span> <span class="id">x</span> <span class="kwd">as</span> [] <span class="id">eqn</span>: <span class="id">Heq</span>; <span class="id">TAC</span>; []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">context</span>[ <span class="kwd">match</span> ?<span class="id">x</span> <span class="kwd">with</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> ] |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> (<span class="id">type</span> <span class="id">of</span> <span class="id">x</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| { <span class="id">_</span> } + { <span class="id">_</span> } =&gt; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="id">TAC</span>; []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="kwd">let</span> <span class="id">Heq</span> := <span class="tactic">fresh</span> "<span class="id">Heq</span>" <span class="kwd">in</span> <span class="tactic">destruct</span> <span class="id">x</span> <span class="kwd">as</span> [] <span class="id">eqn</span>: <span class="id">Heq</span>; <span class="id">TAC</span>; []<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">des_ifs_safe</span>" := <span class="id">des_ifs_safe_aux</span> <span class="id">clarify</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">des_ifs_safe</span>" <span class="id">tactic</span>(<span class="id">TAC</span>) := <span class="id">des_ifs_safe_aux</span> <span class="id">TAC</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">abstr_aux</span> <span class="id">x</span> <span class="id">var_name</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">hyp_name</span> := <span class="tactic">fresh</span> "<span class="id">abstr_hyp_name</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">remember</span> <span class="id">x</span> <span class="kwd">as</span> <span class="id">var_name</span> <span class="id">eqn</span>:<span class="id">hyp_name</span>; <span class="tactic">clear</span> <span class="id">hyp_name</span><br/>
.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">abstr</span>" <span class="id">constr</span>(<span class="id">H</span>) := <span class="kwd">let</span> <span class="id">var_name</span> := <span class="tactic">fresh</span> "<span class="id">abstr_var_name</span>" <span class="kwd">in</span> <span class="id">abstr_aux</span> <span class="id">H</span> <span class="id">var_name</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">abstr</span>" <span class="id">constr</span>(<span class="id">H</span>) <span class="id">ident</span>(<span class="id">var_name</span>) := <span class="id">abstr_aux</span> <span class="id">H</span> <span class="id">var_name</span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Rewrite</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_iff">andb_true_iff</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_false_iff">orb_false_iff</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#negb_true_iff">negb_true_iff</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#negb_false_iff">negb_false_iff</a></span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_r">andb_true_r</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_l">andb_true_l</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_r">andb_false_r</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_l">andb_false_l</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_r">orb_true_r</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_l">orb_true_l</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_false_r">orb_false_r</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_false_l">orb_false_l</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#negb_andb">negb_andb</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#negb_orb">negb_orb</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#negb_involutive">negb_involutive</a></span><br/>
&nbsp;&nbsp;: <span class="id">simpl_bool</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">simpl_bool</span> := <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#is_true">Datatypes.is_true</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#is_true">is_true</a></span>;  <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">simpl_bool</span> <span class="kwd">in</span> *.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">des_safe_aux</span> <span class="id">TAC</span> :=<br/>
&nbsp;&nbsp;<span class="id">TAC</span>;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">des1</span>; <span class="id">TAC</span>; [])<br/>
.<br/>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">des_safe</span>" := <span class="id">des_safe_aux</span> <span class="id">clarify</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">des_safe</span>" <span class="id">tactic</span>(<span class="id">TAC</span>) := <span class="id">des_safe_aux</span> <span class="id">TAC</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="admit">admit</a></span> (<span class="id">excuse</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">String.string</a></span>) {<span class="id">T</span>: <span class="kwd">Type</span>} : <span class="id"><a href="compcert.lib.sflib.html#T">T</a></span>.  Admitted.</div>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">admit</span>" <span class="id">constr</span>(<span class="id">excuse</span>) := <span class="id">idtac</span> <span class="id">excuse</span>; <span class="tactic">exact</span> (<span class="id"><a href="compcert.lib.sflib.html#admit">admit</a></span> <span class="id">excuse</span>).<br/>
<br/>
<h2> Generalization </h2>
<br/>
<div class="doc"><span class="bracket"><span class="id">gen</span> <span class="id">X1</span> .. <span class="id">XN</span></span> is a shorthand for calling <span class="bracket"><span class="tactic">generalize</span> <span class="tactic">dependent</span></span>
    successively on variables <span class="bracket"><span class="id">XN</span></span>...<span class="bracket"><span class="id">X1</span></span>. Note that the variables
    are generalized in reverse order, following the convention of
    the <span class="bracket"><span class="tactic">generalize</span></span> tactic: it means that <span class="bracket"><span class="id">X1</span></span> will be the first
    quantified variable in the resulting goal. </div>
<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">gen</span>" <span class="id">ident</span>(<span class="id">X1</span>) :=<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="tactic">dependent</span> <span class="id">X1</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">gen</span>" <span class="id">ident</span>(<span class="id">X1</span>) <span class="id">ident</span>(<span class="id">X2</span>) :=<br/>
&nbsp;&nbsp;<span class="id">gen</span> <span class="id">X2</span>; <span class="id">gen</span> <span class="id">X1</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">gen</span>" <span class="id">ident</span>(<span class="id">X1</span>) <span class="id">ident</span>(<span class="id">X2</span>) <span class="id">ident</span>(<span class="id">X3</span>) :=<br/>
&nbsp;&nbsp;<span class="id">gen</span> <span class="id">X3</span>; <span class="id">gen</span> <span class="id">X2</span>; <span class="id">gen</span> <span class="id">X1</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">gen</span>" <span class="id">ident</span>(<span class="id">X1</span>) <span class="id">ident</span>(<span class="id">X2</span>) <span class="id">ident</span>(<span class="id">X3</span>) <span class="id">ident</span>(<span class="id">X4</span>)  :=<br/>
&nbsp;&nbsp;<span class="id">gen</span> <span class="id">X4</span>; <span class="id">gen</span> <span class="id">X3</span>; <span class="id">gen</span> <span class="id">X2</span>; <span class="id">gen</span> <span class="id">X1</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">gen</span>" <span class="id">ident</span>(<span class="id">X1</span>) <span class="id">ident</span>(<span class="id">X2</span>) <span class="id">ident</span>(<span class="id">X3</span>) <span class="id">ident</span>(<span class="id">X4</span>) <span class="id">ident</span>(<span class="id">X5</span>) :=<br/>
&nbsp;&nbsp;<span class="id">gen</span> <span class="id">X5</span>; <span class="id">gen</span> <span class="id">X4</span>; <span class="id">gen</span> <span class="id">X3</span>; <span class="id">gen</span> <span class="id">X2</span>; <span class="id">gen</span> <span class="id">X1</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">gen</span>" <span class="id">ident</span>(<span class="id">X1</span>) <span class="id">ident</span>(<span class="id">X2</span>) <span class="id">ident</span>(<span class="id">X3</span>) <span class="id">ident</span>(<span class="id">X4</span>) <span class="id">ident</span>(<span class="id">X5</span>)<br/>
&nbsp;<span class="id">ident</span>(<span class="id">X6</span>) :=<br/>
&nbsp;&nbsp;<span class="id">gen</span> <span class="id">X6</span>; <span class="id">gen</span> <span class="id">X5</span>; <span class="id">gen</span> <span class="id">X4</span>; <span class="id">gen</span> <span class="id">X3</span>; <span class="id">gen</span> <span class="id">X2</span>; <span class="id">gen</span> <span class="id">X1</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">gen</span>" <span class="id">ident</span>(<span class="id">X1</span>) <span class="id">ident</span>(<span class="id">X2</span>) <span class="id">ident</span>(<span class="id">X3</span>) <span class="id">ident</span>(<span class="id">X4</span>) <span class="id">ident</span>(<span class="id">X5</span>)<br/>
&nbsp;<span class="id">ident</span>(<span class="id">X6</span>) <span class="id">ident</span>(<span class="id">X7</span>) :=<br/>
&nbsp;&nbsp;<span class="id">gen</span> <span class="id">X7</span>; <span class="id">gen</span> <span class="id">X6</span>; <span class="id">gen</span> <span class="id">X5</span>; <span class="id">gen</span> <span class="id">X4</span>; <span class="id">gen</span> <span class="id">X3</span>; <span class="id">gen</span> <span class="id">X2</span>; <span class="id">gen</span> <span class="id">X1</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">gen</span>" <span class="id">ident</span>(<span class="id">X1</span>) <span class="id">ident</span>(<span class="id">X2</span>) <span class="id">ident</span>(<span class="id">X3</span>) <span class="id">ident</span>(<span class="id">X4</span>) <span class="id">ident</span>(<span class="id">X5</span>)<br/>
&nbsp;<span class="id">ident</span>(<span class="id">X6</span>) <span class="id">ident</span>(<span class="id">X7</span>) <span class="id">ident</span>(<span class="id">X8</span>) :=<br/>
&nbsp;&nbsp;<span class="id">gen</span> <span class="id">X8</span>; <span class="id">gen</span> <span class="id">X7</span>; <span class="id">gen</span> <span class="id">X6</span>; <span class="id">gen</span> <span class="id">X5</span>; <span class="id">gen</span> <span class="id">X4</span>; <span class="id">gen</span> <span class="id">X3</span>; <span class="id">gen</span> <span class="id">X2</span>; <span class="id">gen</span> <span class="id">X1</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">gen</span>" <span class="id">ident</span>(<span class="id">X1</span>) <span class="id">ident</span>(<span class="id">X2</span>) <span class="id">ident</span>(<span class="id">X3</span>) <span class="id">ident</span>(<span class="id">X4</span>) <span class="id">ident</span>(<span class="id">X5</span>)<br/>
&nbsp;<span class="id">ident</span>(<span class="id">X6</span>) <span class="id">ident</span>(<span class="id">X7</span>) <span class="id">ident</span>(<span class="id">X8</span>) <span class="id">ident</span>(<span class="id">X9</span>) :=<br/>
&nbsp;&nbsp;<span class="id">gen</span> <span class="id">X9</span>; <span class="id">gen</span> <span class="id">X8</span>; <span class="id">gen</span> <span class="id">X7</span>; <span class="id">gen</span> <span class="id">X6</span>; <span class="id">gen</span> <span class="id">X5</span>; <span class="id">gen</span> <span class="id">X4</span>; <span class="id">gen</span> <span class="id">X3</span>; <span class="id">gen</span> <span class="id">X2</span>; <span class="id">gen</span> <span class="id">X1</span>.<br/>
<span class="kwd">Tactic</span> <span class="kwd">Notation</span> "<span class="id">gen</span>" <span class="id">ident</span>(<span class="id">X1</span>) <span class="id">ident</span>(<span class="id">X2</span>) <span class="id">ident</span>(<span class="id">X3</span>) <span class="id">ident</span>(<span class="id">X4</span>) <span class="id">ident</span>(<span class="id">X5</span>)<br/>
&nbsp;<span class="id">ident</span>(<span class="id">X6</span>) <span class="id">ident</span>(<span class="id">X7</span>) <span class="id">ident</span>(<span class="id">X8</span>) <span class="id">ident</span>(<span class="id">X9</span>) <span class="id">ident</span>(<span class="id">X10</span>) :=<br/>
&nbsp;&nbsp;<span class="id">gen</span> <span class="id">X10</span>; <span class="id">gen</span> <span class="id">X9</span>; <span class="id">gen</span> <span class="id">X8</span>; <span class="id">gen</span> <span class="id">X7</span>; <span class="id">gen</span> <span class="id">X6</span>; <span class="id">gen</span> <span class="id">X5</span>; <span class="id">gen</span> <span class="id">X4</span>; <span class="id">gen</span> <span class="id">X3</span>; <span class="id">gen</span> <span class="id">X2</span>; <span class="id">gen</span> <span class="id">X1</span>.<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">exists_prop</span> <span class="id">PROP</span> :=<br/>
&nbsp;&nbsp;<span class="id">tryif</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">repeat</span> <span class="id">multimatch</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span>: <span class="id">PROP</span> |- <span class="id">_</span> ] =&gt;  <span class="tactic">fail</span> 2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;<span class="kwd">then</span> <span class="tactic">fail</span><br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id">idtac</span><br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">propagate_eq</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">multimatch</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H1</span>: ?<span class="id">A</span> = ?<span class="id">B</span>, <span class="id">H2</span>: ?<span class="id">B</span> = ?<span class="id">C</span> |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tryif</span> (<span class="id">check_equal</span> <span class="id">A</span> <span class="id">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tryif</span> (<span class="id">exists_prop</span> (<span class="id">A</span> = <span class="id">C</span>) + <span class="id">exists_prop</span> (<span class="id">C</span> = <span class="id">A</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">name</span> := <span class="tactic">fresh</span> "<span class="id">EQ_CLOSURE_TAC</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id">eq_trans</span>; [<span class="tactic">exact</span> <span class="id">H1</span>|<span class="tactic">exact</span> <span class="id">H2</span>|]; <span class="tactic">intro</span> <span class="id">name</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H1</span>: ?<span class="id">B</span> = ?<span class="id">A</span>, <span class="id">H2</span>: ?<span class="id">B</span> = ?<span class="id">C</span> |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tryif</span> (<span class="id">check_equal</span> <span class="id">A</span> <span class="id">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tryif</span> (<span class="id">exists_prop</span> (<span class="id">A</span> = <span class="id">C</span>) + <span class="id">exists_prop</span> (<span class="id">C</span> = <span class="id">A</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">name</span> := <span class="tactic">fresh</span> "<span class="id">EQ_CLOSURE_TAC</span>" <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id">eq_trans</span>; [<span class="tactic">exact</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span> <span class="id">H1</span>)|<span class="tactic">exact</span> <span class="id">H2</span>|]; <span class="tactic">intro</span> <span class="id">name</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">eq_closure_tac</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">propagate_eq</span>; <span class="id">clarify</span>); <span class="id">clear_tac</span><br/>
.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">rev_all</span> <span class="id">TAC</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">multimatch</span> <span class="id">reverse</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">H</span>: <span class="id">_</span> |- <span class="id">_</span> =&gt; <span class="id">TAC</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="id">TAC</span><br/>
.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="proj_sumbool_false">proj_sumbool_false</a></span>: <span class="kwd">forall</span> (<span class="id">P</span> <span class="id">Q</span> : <span class="kwd">Prop</span>) (<span class="id">a</span> : {<span class="id"><a href="compcert.lib.sflib.html#P">P</a></span>} + {<span class="id"><a href="compcert.lib.sflib.html#Q">Q</a></span>}),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> <span class="id"><a href="compcert.lib.sflib.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt; <span class="id"><a href="compcert.lib.sflib.html#Q">Q</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1202')">Proof.</div>
<div class="proofscript" id="proof1202">
 <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="proj_sumbool_is_false">proj_sumbool_is_false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">a</span>: {<span class="id"><a href="compcert.lib.sflib.html#P">P</a></span>} + {~ <span class="id"><a href="compcert.lib.sflib.html#P">P</a></span>})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FALSE</span>: ~ <span class="id"><a href="compcert.lib.sflib.html#P">P</a></span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> <span class="id"><a href="compcert.lib.sflib.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1203')">Proof.</div>
<div class="proofscript" id="proof1203">
 <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="tactic">case</span> <span class="id">a</span>; <span class="tactic">tauto</span>. Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">des_sumbool</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#is_true">Datatypes.is_true</a></span>, <span class="id"><a href="compcert.lib.sflib.html#is_true">is_true</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> |- <span class="id">_</span> ] =&gt; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool_true">proj_sumbool_true</a></span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> |- <span class="id">_</span> ] =&gt; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.sflib.html#proj_sumbool_false">proj_sumbool_false</a></span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> = <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> ?<span class="id">x</span> |- <span class="id">_</span> ] =&gt; <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool_true">proj_sumbool_true</a></span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> = <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> ?<span class="id">x</span> |- <span class="id">_</span> ] =&gt; <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.sflib.html#proj_sumbool_false">proj_sumbool_false</a></span> <span class="kwd">in</span> <span class="id">H</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> ] =&gt; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool_is_true">proj_sumbool_is_true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> ] =&gt; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.sflib.html#proj_sumbool_is_false">proj_sumbool_is_false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> = <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> ?<span class="id">x</span> ] =&gt; <span class="tactic">symmetry</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool_is_true">proj_sumbool_is_true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> = <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> ?<span class="id">x</span> ] =&gt; <span class="tactic">symmetry</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.sflib.html#proj_sumbool_is_false">proj_sumbool_is_false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
