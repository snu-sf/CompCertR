
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module SimMemInjC</title>
<meta name="description" content="Documentation of Coq module SimMemInjC" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module SimMemInjC</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html">CoqlibC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.MemoryC.html">MemoryC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Events.html">Events</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.IntegersC.html">IntegersC</a></span> <span class="id"><a href="compcert.compcertm.LinkingC.html">LinkingC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.SimSymb.html">SimSymb</a></span> <span class="id"><a href="compcert.compcertm.Skeleton.html">Skeleton</a></span> <span class="id"><a href="compcert.compcertm.Mod.html">Mod</a></span> <span class="id"><a href="compcert.compcertm.ModSem.html">ModSem</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.SimMemLift.html">SimMemLift</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.compcertm.SimSymbId.html">SimSymbId</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.x86.Conventions1.html">Conventions1</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="compcert.common.SimMemInj.html">SimMemInj</a></span>.<br/>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="id">Arguments</span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="MEMINJ">MEMINJ</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="update">update</a></span> (<span class="id">sm0</span>: <span class="id">t</span>') (<span class="id">src</span> <span class="id">tgt</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">inj</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>): <span class="id">t</span>' :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.SimMemInj.html#mk">mk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#src">src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#tgt">tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#inj">inj</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_external">src_external</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">tgt_external</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_parent_nb">src_parent_nb</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">tgt_parent_nb</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_ge_nb">src_ge_nb</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_ge_nb">tgt_ge_nb</a></span>).<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#update">update</a></span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#src_private">src_private</a></span> <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">tgt_private</a></span> <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">valid_blocks</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="update_src_private">update_src_private</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">sm1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJ</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SRC</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>).(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>).(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_private">src_private</a></span>) = (<span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>).(<span class="id"><a href="compcert.common.SimMemInj.html#src_private">src_private</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6467')">Proof.</div>
<div class="proofscript" id="proof6467">
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#functional_extensionality">Axioms.functional_extensionality</a></span>; <span class="id">i</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#prop_ext1">prop_ext1</a></span>.<br/>
&nbsp;&nbsp;<span class="id">u</span>. <span class="tactic">split</span>; <span class="id">ii</span>; <span class="id">des</span>; <span class="id">esplits</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="update_tgt_private">update_tgt_private</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">sm1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SRC</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TGT</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>).(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>).(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJ</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">tgt_private</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">tgt_private</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6468')">Proof.</div>
<div class="proofscript" id="proof6468">
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#functional_extensionality">Axioms.functional_extensionality</a></span>; <span class="id">i</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#prop_ext1">prop_ext1</a></span>.<br/>
&nbsp;&nbsp;<span class="id">u</span>. <span class="tactic">split</span>; <span class="id">ii</span>; <span class="id">des</span>; <span class="id">esplits</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id">INJ</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">SRC</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">INJ</span>. <span class="tactic">rewrite</span> <span class="id">SRC</span>. <span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="lepriv">lepriv</a></span> (<span class="id">sm0</span> <span class="id">sm1</span>: <span class="id">SimMemInj.t</span>'): <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="lepriv_intro">lepriv_intro</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INCR</span>: <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>))<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SRCGENB</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_ge_nb">src_ge_nb</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_ge_nb">src_ge_nb</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TGTGENB</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_ge_nb">tgt_ge_nb</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_ge_nb">tgt_ge_nb</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FROZEN</span>: <span class="id"><a href="compcert.common.SimMemInj.html#frozen">frozen</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) (<span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_ge_nb">src_ge_nb</a></span>)) (<span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_ge_nb">tgt_ge_nb</a></span>))).<br/>
<br/>
<span class="kwd">Global</span> <span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id"><a name="SimMemInj">SimMemInj</a></span> : <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.class">SimMem.class</a></span> :=<br/>
{ <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.t">t</a></span> := <span class="id">t</span>';<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">src</a></span> := <span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">tgt</a></span> := <span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>;<br/>
&nbsp;&nbsp;<span class="kwd">wf</span> := <span class="kwd">wf</span>';<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.le">le</a></span> := <span class="id">le</span>';<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.lepriv">lepriv</a></span> := <span class="id"><a href="compcert.compcertm.SimMemInjC.html#lepriv">lepriv</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.sim_val">sim_val</a></span> := <span class="kwd">fun</span> (<span class="id">mrel</span>: <span class="id">t</span>') =&gt; <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel">mrel</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.sim_val_list">sim_val_list</a></span> := <span class="kwd">fun</span> (<span class="id">mrel</span>: <span class="id">t</span>') =&gt; <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel">mrel</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>);<br/>
}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6469')">Next Obligation.</div>
<div class="proofscript" id="proof6469">
 <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">LE</span>. <span class="id">inv</span> <span class="id">LE</span>. <span class="id">econs</span>; <span class="id">et</span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6470')">Next Obligation.</div>
<div class="proofscript" id="proof6470">
 <span class="id">ii</span>. <span class="id">inv</span> <span class="id">MLE</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_incr">val_inject_incr</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6471')">Next Obligation.</div>
<div class="proofscript" id="proof6471">
&nbsp;&nbsp;<span class="tactic">do</span> 2 (<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#functional_extensionality">Axioms.functional_extensionality</a></span>; <span class="id">i</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#prop_ext1">prop_ext1</a></span>. <span class="tactic">split</span>; <span class="id">i</span>; <span class="id">ss</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;- <span class="id">ginduction</span> <span class="id">x</span>; <span class="id">ii</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">ss</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ginduction</span> <span class="id">x1</span>; <span class="id">ii</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">ss</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6472')">Next Obligation.</div>
<div class="proofscript" id="proof6472">
 <span class="id">inv</span> <span class="id">H</span>. <span class="id">ss</span>. Qed.</div>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Global</span> <span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id"><a name="lepriv_Transitive">lepriv_Transitive</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.RelationClasses.html#Transitive">RelationClasses.Transitive</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#lepriv">lepriv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6473')">Next Obligation.</div>
<div class="proofscript" id="proof6473">
&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="id">des</span>; <span class="id">clarify</span>. <span class="id">econs</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_trans">inject_incr_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">ii</span>; <span class="id">des</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span> <span class="id">y</span> <span class="id">b_src</span>) <span class="id">eqn</span>:<span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">p</span>. <span class="id">exploit</span> <span class="id">INCR0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">clarify</span>. <span class="id">inv</span> <span class="id">FROZEN</span>. <span class="id">hexploit</span> <span class="id">NEW_IMPLIES_OUTSIDE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">inv</span> <span class="id">FROZEN0</span>. <span class="id">hexploit</span> <span class="id">NEW_IMPLIES_OUTSIDE</span>; <span class="tactic">eauto</span>; []; <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Global</span> <span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id"><a name="SimMemInjLift">SimMemInjLift</a></span> : <span class="id"><a href="compcert.compcertm.SimMemLift.html#SimMemLift.class">SimMemLift.class</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#SimMemInj">SimMemInj</a></span> :=<br/>
{ <span class="id"><a href="compcert.compcertm.SimMemLift.html#SimMemLift.lift">lift</a></span> := <span class="id">lift</span>';<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMemLift.html#SimMemLift.unlift">unlift</a></span> := <span class="id">unlift</span>';<br/>
}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6474')">Next Obligation.</div>
<div class="proofscript" id="proof6474">
&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">VALID</span>. <span class="id">inv</span> <span class="id">VALID</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; <span class="id">ii</span>; <span class="id">des</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.compare_gt_iff">Pos.compare_gt_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">xomega</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6475')">Next Obligation.</div>
<div class="proofscript" id="proof6475">
 <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#unlift_spec">unlift_spec</a></span>; <span class="id">et</span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6476')">Next Obligation.</div>
<div class="proofscript" id="proof6476">
 <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#unlift_wf">unlift_wf</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6477')">Next Obligation.</div>
<div class="proofscript" id="proof6477">
 <span class="id">inv</span> <span class="id">MWF</span>. <span class="tactic">destruct</span> <span class="id">sm0</span>; <span class="id">ss</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_refl">frozen_refl</a></span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6478')">Next Obligation.</div>
<div class="proofscript" id="proof6478">
 <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">inv</span> <span class="id">MLE</span>. <span class="id">inv</span> <span class="id">MLIFT</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="id">et</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_refl">frozen_refl</a></span>. Qed.</div>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="MEMINJ.ORIGINALS">ORIGINALS</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="le_excl">le_excl</a></span> (<span class="id">excl_src</span> <span class="id">excl_tgt</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">mrel0</span> <span class="id">mrel1</span>: <span class="id">t</span>'): <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="le_excl_intro">le_excl_intro</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INCR</span>: <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel1">mrel1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SRCUNCHANGED</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_external">src_external</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel1">mrel1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TGTUNCHANGED</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">tgt_external</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel1">mrel1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SRCPARENTEQ</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_external">src_external</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel1">mrel1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_external">src_external</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SRCPARENTEQNB</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_parent_nb">src_parent_nb</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel1">mrel1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_parent_nb">src_parent_nb</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SRCGENB</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_ge_nb">src_ge_nb</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel1">mrel1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_ge_nb">src_ge_nb</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TGTPARENTEQ</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">tgt_external</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel1">mrel1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">tgt_external</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TGTPARENTEQNB</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">tgt_parent_nb</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel1">mrel1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">tgt_parent_nb</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TGTGENB</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_ge_nb">tgt_ge_nb</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel1">mrel1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_ge_nb">tgt_ge_nb</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FROZEN</span>: <span class="id"><a href="compcert.common.SimMemInj.html#frozen">frozen</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel1">mrel1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) (<span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_parent_nb">src_parent_nb</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">tgt_parent_nb</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MAXSRC</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">EXCL</span>: ~ <span class="id"><a href="compcert.compcertm.SimMemInjC.html#excl_src">excl_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">MAX</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel1">mrel1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> &lt;1= <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MAXTGT</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">EXCL</span>: ~ <span class="id"><a href="compcert.compcertm.SimMemInjC.html#excl_tgt">excl_tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">MAX</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel1">mrel1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> &lt;1= <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#mrel0">mrel0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span>&gt;&gt;).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="has_footprint">has_footprint</a></span> (<span class="id">excl_src</span> <span class="id">excl_tgt</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">sm0</span>: <span class="id">t</span>'): <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="has_footprint_intro">has_footprint_intro</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FOOTSRC</span>: <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">EXCL</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#excl_src">excl_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">PERM</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FOOTTGT</span>: <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">EXCL</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#excl_tgt">excl_tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">PERM</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>&gt;&gt;).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unfree_right">unfree_right</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">blk</span> <span class="id">m_tgt0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="kwd">wf</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NOPERM</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_range_noperm">Mem_range_noperm</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#hi">hi</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNFR</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt0">m_tgt0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RANGE</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#hi">hi</a></span> &lt;2= ~2 <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">tgt_external</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">sm1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">MSRC</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>)&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MTGT</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt0">m_tgt0</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MINJ</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>)&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MWF</span>: <span class="kwd">wf</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MLE</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#le_excl">le_excl</a></span> <span class="id">bot2</span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#hi">hi</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6479')">Proof.</div>
<div class="proofscript" id="proof6479">
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">sm0</span>.(<span class="id"><a href="compcert.compcertm.SimMemInjC.html#update">update</a></span>) <span class="id">sm0</span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) <span class="id">m_tgt0</span> <span class="id">sm0</span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_unchanged_on">Mem_unfree_unchanged_on</a></span>; <span class="id">et</span>. <span class="tactic">intro</span> <span class="id">UNCH</span>. <span class="id">esplits</span>; <span class="id">u</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">inv</span> <span class="id">MWF</span>; <span class="id">ss</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">MWF</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_right_inject">Mem_unfree_right_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MWF</span>; <span class="tactic">eauto</span>. <span class="id">u</span>. <span class="id">ii</span>; <span class="id">des</span>; <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_valid_block_unfree">Mem_valid_block_unfree</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MWF</span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_nextblock_unfree">Mem_nextblock_unfree</a></span>; <span class="tactic">eauto</span>. <span class="id">refl</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="id">refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>. { <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_unchanged_on">Mem_unfree_unchanged_on</a></span>; <span class="tactic">eauto</span>. } <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">RANGE</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_refl">frozen_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on_2">Mem.perm_unchanged_on_2</a></span>; <span class="id">et</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="foot_excl">foot_excl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">sm1</span> <span class="id">sm2</span> <span class="id">excl_src</span> <span class="id">excl_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FOOT</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#has_footprint">has_footprint</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#excl_src">excl_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#excl_tgt">excl_tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MLE</span>: <span class="id">le</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MLEEXCL</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#le_excl">le_excl</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#excl_src">excl_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#excl_tgt">excl_tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm2">sm2</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">MLE</span>: <span class="id">le</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm2">sm2</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6480')">Proof.</div>
<div class="proofscript" id="proof6480">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MLE</span>. <span class="id">inv</span> <span class="id">MLEEXCL</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">FROZENHI</span>: <span class="id"><a href="compcert.common.SimMemInj.html#frozen">frozen</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span> <span class="id">sm0</span>) (<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span> <span class="id">sm2</span>) (<span class="id"><a href="compcert.common.SimMemInj.html#src_parent_nb">src_parent_nb</a></span> <span class="id">sm0</span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">tgt_parent_nb</a></span> <span class="id">sm0</span>)).<br/>
&nbsp;&nbsp;{ - <span class="tactic">clear</span> - <span class="id">FROZEN</span> <span class="id">FROZEN0</span> <span class="id">INCR0</span> <span class="id">SRCPARENTEQNB</span> <span class="id">TGTPARENTEQNB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">FROZEN</span>. <span class="id">inv</span> <span class="id">FROZEN0</span>. <span class="id">econs</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span> <span class="id">sm1</span> <span class="id">b_src</span>) <span class="id">eqn</span>:<span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">p</span>; <span class="id">ss</span>. <span class="id">exploit</span> <span class="id">INCR0</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">clarify</span>. <span class="id">exploit</span> <span class="id">NEW_IMPLIES_OUTSIDE</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">NEW_IMPLIES_OUTSIDE0</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span> <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">et</span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">etrans</span>; <span class="id">et</span>).<br/>
&nbsp;&nbsp;- <span class="id">etrans</span>; <span class="id">et</span>. <span class="tactic">rewrite</span> <span class="id">SRCPARENTEQ</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="id">etrans</span>; <span class="id">et</span>. <span class="tactic">rewrite</span> <span class="id">TGTPARENTEQ</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_shortened">frozen_shortened</a></span>; <span class="id">et</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MWF</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">excl_src</span> <span class="id">b</span> <span class="id">ofs</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">FOOT</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> (<span class="id">p1</span> := <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); [|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>]. <span class="tactic">eapply</span> <span class="id">FOOTSRC</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">MAXSRC</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id">MAXSRC0</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_unchanged_on">Mem.valid_block_unchanged_on</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">excl_tgt</span> <span class="id">b</span> <span class="id">ofs</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">FOOT</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> (<span class="id">p1</span> := <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); [|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>]. <span class="tactic">eapply</span> <span class="id">FOOTTGT</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">MAXTGT</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id">MAXTGT0</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_unchanged_on">Mem.valid_block_unchanged_on</a></span>; <span class="id">et</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#MEMINJ.ORIGINALS">ORIGINALS</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="parallel_gen">parallel_gen</a></span> <span class="id">sm0</span> <span class="id">m_src1</span> <span class="id">m_tgt1</span> <span class="id">j1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">WF</span>: <span class="kwd">wf</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJECT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#j1">j1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src1">m_src1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt1">m_tgt1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INCR</span>: <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#j1">j1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SEP</span>: <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#j1">j1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNCHSRC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src1">m_src1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNCHTGT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt1">m_tgt1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MAXSRC</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">MAX</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src1">m_src1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> &lt;1= <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MAXTGT</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">MAX</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt1">m_tgt1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> &lt;1= <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span>&gt;&gt;):<br/>
&nbsp;&nbsp;(&lt;&lt;<span class="id">MLE</span>: <span class="id">le</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#mk">mk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src1">m_src1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt1">m_tgt1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#j1">j1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#src_external">src_external</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">tgt_external</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#src_parent_nb">src_parent_nb</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">tgt_parent_nb</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#src_ge_nb">src_ge_nb</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_ge_nb">tgt_ge_nb</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>))&gt;&gt;) /\<br/>
&nbsp;&nbsp;(&lt;&lt;<span class="id">MWF</span>: <span class="kwd">wf</span>' (<span class="id"><a href="compcert.common.SimMemInj.html#mk">mk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src1">m_src1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt1">m_tgt1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#j1">j1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#src_external">src_external</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">tgt_external</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#src_parent_nb">src_parent_nb</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">tgt_parent_nb</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#src_ge_nb">src_ge_nb</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_ge_nb">tgt_ge_nb</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>))&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6481')">Proof.</div>
<div class="proofscript" id="proof6481">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WF</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assert</span>(<span class="id">FROZEN</span>: <span class="id"><a href="compcert.common.SimMemInj.html#frozen">frozen</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span> <span class="id">sm0</span>) <span class="id">j1</span> (<span class="id"><a href="compcert.common.SimMemInj.html#src_parent_nb">src_parent_nb</a></span> <span class="id">sm0</span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">tgt_parent_nb</a></span> <span class="id">sm0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">econs</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">exploit</span> <span class="id">SEP</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="tactic">split</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *; <span class="tactic">red</span>; <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">SRCEXT</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">TGTEXT</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_shortened">frozen_shortened</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">destruct</span> <span class="id">PR</span>. <span class="tactic">split</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span>. <span class="tactic">destruct</span> (<span class="id">j1</span> <span class="id">x0</span>) <span class="id">eqn</span>:<span class="id">BLK</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">p</span>. <span class="id">exploit</span> <span class="id">SEP</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">destruct</span> <span class="id">PR</span>. <span class="tactic">split</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span> <span class="id">sm0</span> <span class="id">b0</span>) <span class="id">eqn</span>:<span class="id">BLK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">p</span>. <span class="id">dup</span> <span class="id">BLK</span>. <span class="tactic">eapply</span> <span class="id">INCR</span> <span class="kwd">in</span> <span class="id">BLK</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">MAXSRC</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id">SEP</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">clarify</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">Mem.unchanged_on_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="alloc_left_zero_simmem">alloc_left_zero_simmem</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">blk_src</span> <span class="id">sz</span> <span class="id">m_src1</span> <span class="id">blk_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ALLOC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">SimMem.src</a></span>) 0 <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sz">sz</a></span> = (<span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src1">m_src1</a></span>, <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk_src">blk_src</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TGTPRIV</span>: (<span class="id"><a href="compcert.compcertm.CoqlibC.html#range">range</a></span> 0 <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sz">sz</a></span>) &lt;1= <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">tgt_private</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk_tgt">blk_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TGTNOTEXT</span>: ((<span class="id"><a href="compcert.compcertm.CoqlibC.html#range">range</a></span> 0 <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sz">sz</a></span>) /1\ <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">tgt_external</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk_tgt">blk_tgt</a></span>) &lt;1= <span class="id">bot1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TGTPERM</span>: <span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span> (<span class="id">BOUND</span>: 0 &lt;= <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sz">sz</a></span>), <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">SimMem.tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk_tgt">blk_tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#k">k</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#p">p</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk_tgt">blk_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PARENT</span>: (<span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">tgt_parent_nb</a></span>) &lt;= <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk_tgt">blk_tgt</a></span>)%<span class="id">positive</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">sm1</span> := (<span class="id"><a href="compcert.common.SimMemInj.html#mk">mk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src1">m_src1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">blk</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk_src">blk_src</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk_tgt">blk_tgt</a></span>, 0) <span class="kwd">else</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_external">src_external</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">tgt_external</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_parent_nb">src_parent_nb</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">tgt_parent_nb</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_ge_nb">src_ge_nb</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_ge_nb">tgt_ge_nb</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">MWF</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">MLE</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.le">SimMem.le</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6482')">Proof.</div>
<div class="proofscript" id="proof6482">
&nbsp;&nbsp;<span class="id">i</span>. <span class="id">subst_locals</span>. <span class="id">inv</span> <span class="id">MWF</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">clarify</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_alloc_left_inject">Mem_alloc_left_inject</a></span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">TGTPRIV</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="id">u</span>. <span class="id">ii</span>; <span class="id">ss</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">hnf</span>. <span class="id">des_ifs</span>. <span class="id">exfalso</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">u</span>. <span class="id">ii</span>; <span class="id">ss</span>. <span class="id">dup</span> <span class="id">PR</span>. <span class="tactic">eapply</span> <span class="id">TGTEXT</span> <span class="kwd">in</span> <span class="id">PR0</span>. <span class="id">u</span> <span class="kwd">in</span> <span class="id">PR0</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">hnf</span>. <span class="id">hnf</span> <span class="kwd">in</span> <span class="id">PR0</span>. <span class="id">ii</span>. <span class="id">des_ifs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">TGTNOTEXT</span>; <span class="tactic">eauto</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">u</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub_0_r">Z.sub_0_r</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_alloc_fresh_perm">Mem_alloc_fresh_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">PR0</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">assert</span>(<span class="id">FROZEN</span>: <span class="id"><a href="compcert.common.SimMemInj.html#frozen">frozen</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span> <span class="id">sm0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">blk</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span> <span class="id">sm0</span>)) <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">blk_tgt</span>, 0) <span class="kwd">else</span> <span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span> <span class="id">sm0</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#src_parent_nb">src_parent_nb</a></span> <span class="id">sm0</span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">tgt_parent_nb</a></span> <span class="id">sm0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">ii</span>; <span class="id">ss</span>. <span class="id">des</span>; <span class="id">ss</span>. <span class="id">des_ifs</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">cbn</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ii</span>; <span class="id">ss</span>. <span class="id">des_ifs</span>; <span class="id">ss</span>. <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_freeblocks">Mem.mi_freeblocks</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MWF</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unchanged_on_trans_strong">Mem_unchanged_on_trans_strong</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_shortened">frozen_shortened</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul">Z.mul</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.compcertm.StoreArguments.html">StoreArguments</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#MEMINJ">MEMINJ</a></span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">valid_blocks</a></span> <span class="id"><a href="compcert.common.SimMemInj.html#src_private">src_private</a></span> <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">tgt_private</a></span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#range">range</a></span>.<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SIMSYMB">SIMSYMB</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="skenv_inject_meminj_preserves_globals">skenv_inject_meminj_preserves_globals</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">F</span> <span class="id">V</span> (<span class="id">skenv</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#V">V</a></span>) <span class="id">j</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJECT</span>: <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#skenv_inject">skenv_inject</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv">skenv</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#j">j</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">INJECT</span>: <span class="id"><a href="compcert.common.Events.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv">skenv</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#j">j</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6483')">Proof.</div>
<div class="proofscript" id="proof6483">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">INJECT</span>. <span class="id">rr</span>. <span class="id">esplits</span>; <span class="id">ii</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">DOMAIN</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">DOMAIN</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id">IMAGE</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="sim_skenv_inj">sim_skenv_inj</a></span> (<span class="id">sm</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.t">SimMem.t</a></span>) (<span class="id">__noname__</span>: <span class="id">SimSymbId.t</span>') (<span class="id">skenv_src</span> <span class="id">skenv_tgt</span>: <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.t">SkEnv.t</a></span>): <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="sim_skenv_inj_intro">sim_skenv_inj_intro</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJECT</span>: <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#skenv_inject">skenv_inject</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_src">skenv_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm">sm</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMSKENV</span>: <span class="id"><a href="compcert.compcertm.SimSymbId.html#sim_skenv">SimSymbId.sim_skenv</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_src">skenv_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_tgt">skenv_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NBSRC</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_src">skenv_src</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm">sm</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_ge_nb">src_ge_nb</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NBTGT</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_tgt">skenv_tgt</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm">sm</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_ge_nb">tgt_ge_nb</a></span>)).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SIMSYMB.REVIVE">REVIVE</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> {<span class="id">F1</span> <span class="id">V1</span>: <span class="kwd">Type</span>} {<span class="id">LF</span>: <span class="id"><a href="compcert.common.Linking.html#Linker">Linker</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#F1">F1</a></span>} {<span class="id">LV</span>: <span class="id"><a href="compcert.common.Linking.html#Linker">Linker</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#V1">V1</a></span>}.<br/>
&nbsp;&nbsp;<span class="kwd">Context</span> `{<span class="id"><a href="compcert.compcertm.ASTC.html#HasExternal">HasExternal</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#SIMSYMB.REVIVE.F1">F1</a></span>}.<br/>
&nbsp;&nbsp;<span class="kwd">Variables</span> (<span class="id"><a name="SIMSYMB.REVIVE.p_src">p_src</a></span>: <span class="id"><a href="compcert.common.AST.html#program">AST.program</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#SIMSYMB.REVIVE.F1">F1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#SIMSYMB.REVIVE.V1">V1</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="skenv_inject_revive">skenv_inject_revive</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">skenv_proj_src</span> <span class="id">ge_src</span> <span class="id">j</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">REVIVESRC</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ge_src">ge_src</a></span> = <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_proj_src">skenv_proj_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#SIMSYMB.REVIVE.p_src">p_src</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMSKENV</span>: <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#skenv_inject">skenv_inject</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_proj_src">skenv_proj_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#j">j</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">SIMSKENV</span>: <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#skenv_inject">skenv_inject</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ge_src">ge_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#j">j</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6484')">Proof.</div>
<div class="proofscript" id="proof6484">
 <span class="id">clarify</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#SIMSYMB.REVIVE">REVIVE</a></span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Global</span> <span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id"><a name="SimSymbId">SimSymbId</a></span>: <span class="id"><a href="compcert.compcertm.SimSymb.html#SimSymb.class">SimSymb.class</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#SimMemInj">SimMemInj</a></span> := {<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimSymb.html#SimSymb.t">t</a></span> := <span class="id">SimSymbId.t</span>';<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimSymb.html#SimSymb.src">src</a></span> := <span class="id"><a href="compcert.compcertm.SimSymbId.html#src">SimSymbId.src</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimSymb.html#SimSymb.tgt">tgt</a></span> := <span class="id"><a href="compcert.compcertm.SimSymbId.html#tgt">SimSymbId.tgt</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimSymb.html#SimSymb.le">le</a></span> := <span class="id"><a href="compcert.compcertm.SimSymbId.html#le">SimSymbId.le</a></span>;<br/>
&nbsp;&nbsp;<span class="kwd">wf</span> := <span class="id"><a href="compcert.compcertm.SimSymbId.html#wf">SimSymbId.wf</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimSymb.html#SimSymb.sim_skenv">sim_skenv</a></span> := <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sim_skenv_inj">sim_skenv_inj</a></span>;<br/>
}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6485')">Next Obligation.</div>
<div class="proofscript" id="proof6485">
 <span class="id">rr</span> <span class="kwd">in</span> <span class="id">SIMSK</span>. <span class="id">r</span>. <span class="tactic">congruence</span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6486')">Next Obligation.</div>
<div class="proofscript" id="proof6486">
 <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimSymbId.html#wf_link">SimSymbId.wf_link</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6487')">Next Obligation.</div>
<div class="proofscript" id="proof6487">
 <span class="id">inv</span> <span class="id">SIMSKE</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">ss</span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6488')">Next Obligation.</div>
<div class="proofscript" id="proof6488">
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.SimSymbId.html#wf_load_sim_skenv">SimSymbId.wf_load_sim_skenv</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span>. <span class="id">eexists</span> (<span class="id"><a href="compcert.common.SimMemInj.html#mk">mk</a></span> <span class="id">m_src</span> <span class="id">m_src</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> <span class="id">m_src</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bot2</span> <span class="id">bot2</span> <span class="id">m_src</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>) <span class="id">m_src</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>) <span class="id">m_src</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>) <span class="id">m_src</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>)). <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="id">esplits</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="tactic">eauto</span>; <span class="id">ii</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> <span class="kwd">in</span> *. <span class="id">erewrite</span> ! <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> <span class="kwd">in</span> *. <span class="id">erewrite</span> ! <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ss</span>. <span class="id">erewrite</span> ! <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ss</span>. <span class="id">erewrite</span> ! <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="id">xomega</span>; <span class="id">ii</span>; <span class="id">des</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.initmem_inject">Genv.initmem_inject</a></span>; <span class="tactic">eauto</span>; (<span class="id">u</span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">MAINSIM</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span>. <span class="id">des_ifs</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">des_ifs</span>. <span class="id">exfalso</span>. <span class="tactic">apply</span> <span class="id">n</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span>; <span class="tactic">eauto</span>. <span class="id">refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">psimpl</span>. <span class="id">ss</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6489')">Next Obligation.</div>
<div class="proofscript" id="proof6489">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">inv</span> <span class="id">INJECT</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">DOMAIN</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="tactic">eapply</span> <span class="id">MLE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">inv</span> <span class="id">MLE</span>. <span class="tactic">eapply</span> <span class="id">IMAGE</span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_preserves_tgt">frozen_preserves_tgt</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">NBTGT</span>. <span class="id">rr</span> <span class="kwd">in</span> <span class="id">SIMSKENV0</span>. <span class="id">clarify</span>. <span class="id">refl</span>.<br/>
&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">MLE</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">MLE</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6490')">Next Obligation.</div>
<div class="proofscript" id="proof6490">
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.project">SkEnv.project</a></span> <span class="id">skenv_link_src</span> <span class="id">ss</span>.(<span class="id"><a href="compcert.compcertm.SimSymbId.html#src">SimSymbId.src</a></span>)) <span class="kwd">as</span> <span class="id">skenv_proj_src</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.project_impl_spec">SkEnv.project_impl_spec</a></span> <span class="id">INCLSRC</span>); <span class="tactic">intro</span> <span class="id">LESRC</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.project">SkEnv.project</a></span> <span class="id">skenv_link_tgt</span> <span class="id">ss</span>.(<span class="id"><a href="compcert.compcertm.SimSymbId.html#tgt">SimSymbId.tgt</a></span>)) <span class="kwd">as</span> <span class="id">skenv_proj_tgt</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.project_impl_spec">SkEnv.project_impl_spec</a></span> <span class="id">INCLTGT</span>); <span class="tactic">intro</span> <span class="id">LETGT</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.SimSymbId.html#sim_skenv_monotone">SimSymbId.sim_skenv_monotone</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">SIMSKENV</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">inv</span> <span class="id">LESRC</span>. <span class="id">inv</span> <span class="id">LETGT</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">INJECT</span>. <span class="id">econs</span>; <span class="id">ii</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6491')">Next Obligation.</div>
<div class="proofscript" id="proof6491">
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.SimSymbId.html#sim_skenv_func_bisim">SimSymbId.sim_skenv_func_bisim</a></span>; <span class="tactic">eauto</span>. { <span class="tactic">eapply</span> <span class="id">SIMSKENV</span>. } <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">inv</span> <span class="id">INJECT</span>. <span class="id">inv</span> <span class="id">SIMSKENV0</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">ii</span>; <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id">FUNCFSIM</span>; <span class="tactic">eauto</span>. <span class="id">rpapply</span> <span class="id">FUNCSRC</span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">SIMFPTR</span>; <span class="id">ss</span>. <span class="id">des_ifs</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs_safe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">DOMAIN</span>; <span class="tactic">eauto</span>. { <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>; <span class="tactic">eauto</span>. } <span class="id">i</span>; <span class="id">clarify</span>. }<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6492')">Next Obligation.</div>
<div class="proofscript" id="proof6492">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">INJECT</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimSymbId.html#system_sim_skenv">SimSymbId.system_sim_skenv</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof6493')">Next Obligation.</div>
<div class="proofscript" id="proof6493">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">sm0</span>, <span class="id">args_src</span>, <span class="id">args_tgt</span>; <span class="id">ss</span>; <span class="id">inv</span> <span class="id">ARGS</span>; <span class="id">ss</span>. <span class="id">inv</span> <span class="id">MWF</span>; <span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Note:&nbsp;It&nbsp;may&nbsp;be&nbsp;easier&nbsp;&amp;&amp;&nbsp;more&nbsp;natural&nbsp;to&nbsp;use<br/>
"external_call_mem_inject"&nbsp;with&nbsp;"external_call_symbols_preserved",&nbsp;instead&nbsp;of&nbsp;"external_call_mem_inject_gen"&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;exploit&nbsp;external_call_mem_inject_gen;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_inject">external_call_mem_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_inject_meminj_preserves_globals">skenv_inject_meminj_preserves_globals</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="tactic">do</span> 2 <span class="id">eexists</span>. <span class="id">dsplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">instantiate</span> (1:= <span class="id"><a href="compcert.compcertm.ModSem.html#Retv.mk">Retv.mk</a></span> <span class="id">_</span> <span class="id">_</span>); <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_symbols_preserved">external_call_symbols_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimSymbId.html#sim_skenv_equiv">SimSymbId.sim_skenv_equiv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">SIMSKENV</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">retv_src</span>; <span class="id">ss</span>. <span class="id">instantiate</span> (1:= <span class="id"><a href="compcert.common.SimMemInj.html#mk">mk</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>). <span class="id">econs</span> 1; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:= <span class="id">retv_src</span>.(<span class="id"><a href="compcert.compcertm.ModSem.html#Retv.m">Retv.m</a></span>)). <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">assert</span>(<span class="id">FROZEN</span>: <span class="id"><a href="compcert.common.SimMemInj.html#frozen">frozen</a></span> <span class="id">inj</span> <span class="id">f</span>' <span class="id">src_parent_nb</span> <span class="id">tgt_parent_nb</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#inject_separated_frozen">inject_separated_frozen</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">NEW_IMPLIES_OUTSIDE</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>. <span class="id">u</span>. <span class="id">i</span>; <span class="id">des</span>; <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id">SRCEXT</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#src_private">src_private</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="id">des</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>. <span class="id">u</span>. <span class="id">i</span>; <span class="id">des</span>; <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id">TGTEXT</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">tgt_private</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="id">des</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_shortened">frozen_shortened</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_max_perm">external_call_max_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_max_perm">external_call_max_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.SimMemInj.html#inject_separated_frozen">inject_separated_frozen</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">econs</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;+&nbsp;eapply&nbsp;after_private_src;&nbsp;ss;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;+&nbsp;eapply&nbsp;after_private_tgt;&nbsp;ss;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#src_private">src_private</a></span>. <span class="id">ss</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rr</span>. <span class="id">rr</span> <span class="kwd">in</span> <span class="id">PR</span>. <span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">x0</span>) <span class="id">eqn</span>:<span class="id">T</span>; <span class="id">ss</span>. <span class="tactic">destruct</span> <span class="id">p</span>; <span class="id">ss</span>. <span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">NEW_IMPLIES_OUTSIDE</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">valid_blocks</a></span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">r</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_unchanged_on">Mem.valid_block_unchanged_on</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">tgt_private</a></span>. <span class="id">ss</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rr</span>. <span class="id">rr</span> <span class="kwd">in</span> <span class="id">PR</span>. <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id">inj</span> <span class="id">b0</span>) <span class="id">eqn</span>:<span class="id">T</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="tactic">destruct</span> <span class="id">p</span>; <span class="id">ss</span>. <span class="id">exploit</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">PR</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_max_perm">external_call_max_perm</a></span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">T</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id">inv</span> <span class="id">H5</span>. <span class="id">exploit</span> <span class="id">NEW_IMPLIES_OUTSIDE</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">valid_blocks</a></span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">r</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_unchanged_on">Mem.valid_block_unchanged_on</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H2</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H3</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="id">Existing</span> <span class="kwd">Instance</span> <span class="id">SimMemInj</span>.<br/>
<span class="kwd">Local</span> <span class="id">Existing</span> <span class="kwd">Instance</span> <span class="id">SimSymbId</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sim_skenv_symbols_inject">sim_skenv_symbols_inject</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">ss0</span> <span class="id">skenv_src</span> <span class="id">skenv_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMSKE</span>: <span class="id"><a href="compcert.compcertm.SimSymb.html#SimSymb.sim_skenv">SimSymb.sim_skenv</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ss0">ss0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_src">skenv_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_tgt">skenv_tgt</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_src">skenv_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_tgt">skenv_tgt</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6494')">Proof.</div>
<div class="proofscript" id="proof6494">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">SIMSKE</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">inv</span> <span class="id">INJECT</span>. <span class="id">rr</span>. <span class="id">esplits</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;+ <span class="id">i</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">NB</span>. <span class="id">exploit</span> <span class="id">DOMAIN</span>; <span class="tactic">eauto</span>. <span class="id">i</span> ;<span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;+ <span class="id">i</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="id">i</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.block_is_volatile">Genv.block_is_volatile</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id">skenv_tgt</span> <span class="id">b1</span>) <span class="id">eqn</span>:<span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">NB</span>. <span class="id">exploit</span> <span class="id">DOMAIN</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">des_ifs</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">NB</span>. <span class="id">exploit</span> <span class="id">DOMAIN</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">IMAGE</span> <span class="id">b1</span> <span class="id">b2</span>); <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">clarify</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#SIMSYMB">SIMSYMB</a></span>.<br/>
<br/>
<span class="id">Arguments</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_inject_revive">skenv_inject_revive</a></span> [<span class="id">_</span> <span class="id">_</span> <span class="id">_</span>].<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html">JunkBlock</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="JUNK">JUNK</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inject_junk_blocks_tgt">inject_junk_blocks_tgt</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">n</span> <span class="id">m_tgt0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">JUNKTGT</span>: <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks">assign_junk_blocks</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">SimMem.tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#n">n</a></span> = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt0">m_tgt0</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">sm1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">DEF</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span> = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#update">update</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">SimMem.src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt0">m_tgt0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>)&gt;&gt;) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">MWF</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>&gt;&gt;) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">MLE</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.le">SimMem.le</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>&gt;&gt;) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">PRIVSRC</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_private">SimMemInj.src_private</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_private">SimMemInj.src_private</a></span>)&gt;&gt;) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">PRIVTGT</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>) &lt;2= <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>)&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6495')">Proof.</div>
<div class="proofscript" id="proof6495">
&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ss</span>. <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">clear</span> - <span class="id">PUBLIC</span>. <span class="tactic">destruct</span> <span class="id">sm0</span>; <span class="id">ss</span>. <span class="id">clear_tac</span>. <span class="id">ginduction</span> <span class="id">n</span>; <span class="id">ii</span>; <span class="id">ss</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHn</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_right_inject">Mem.alloc_right_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>. <span class="tactic">clear</span> - <span class="id">n</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">tgt_private</a></span>. <span class="id">ss</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">valid_blocks</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span>. <span class="id">des_ifs</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span>. <span class="id">des_ifs</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="id">clarify</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_unchanged_on">assign_junk_blocks_unchanged_on</a></span>; <span class="id">et</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_perm">assign_junk_blocks_perm</a></span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="id">clarify</span>. <span class="tactic">clear</span> - <span class="id">n</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">tgt_private</a></span>. <span class="id">ss</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">valid_blocks</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span>. <span class="id">des_ifs</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="inject_junk_blocks">inject_junk_blocks</a></span> (<span class="id">m_src0</span> <span class="id">m_tgt0</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">j</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>): <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Zerob.html#zerob">Zerob.zerob</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#n">n</a></span>) <span class="kwd">then</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#j">j</a></span> <span class="kwd">else</span><br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">blk</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src0">m_src0</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>)) &amp;&amp; (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src0">m_src0</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#n">n</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ((<span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span> + <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt0">m_tgt0</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>) - <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src0">m_src0</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>))%<span class="id">positive</span> , 0%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk">blk</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="inject_junk_blocks_parallel">inject_junk_blocks_parallel</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">n</span> <span class="id">m_tgt0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">JUNKTGT</span>: <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks">assign_junk_blocks</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">SimMem.tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#n">n</a></span> = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt0">m_tgt0</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">sm1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">DEF</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span> = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#update">update</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks">assign_junk_blocks</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">SimMem.src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#n">n</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt0">m_tgt0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.SimMemInjC.html#inject_junk_blocks">inject_junk_blocks</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">SimMem.src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">SimMem.tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#n">n</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>))&gt;&gt;) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">MWF</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>&gt;&gt;) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">MLE</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.le">SimMem.le</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>&gt;&gt;) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">PRIVSRC</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_private">SimMemInj.src_private</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_private">SimMemInj.src_private</a></span>)&gt;&gt;) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">PRIVTGT</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>) &lt;2= <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>)&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6496')">Proof.</div>
<div class="proofscript" id="proof6496">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#inject_junk_blocks">inject_junk_blocks</a></span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ss</span>. <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">clear</span> - <span class="id">PUBLIC</span>. <span class="tactic">destruct</span> <span class="id">sm0</span>; <span class="id">ss</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ginduction</span> <span class="id">n</span>; <span class="id">ii</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">des_ifs_safe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_parallel_inject">Mem.alloc_parallel_inject</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Heq</span>; <span class="tactic">try</span> <span class="id">refl</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">Q</span>; <span class="id">des</span>. <span class="tactic">rewrite</span> <span class="id">Q</span> <span class="kwd">in</span> *. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHn</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Q0</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">P</span>. <span class="tactic">clear</span> <span class="id">IHn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rpapply</span> <span class="id">P</span>. <span class="tactic">clear</span> <span class="id">P</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#func_ext1">func_ext1</a></span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Heq</span>; <span class="tactic">intro</span> <span class="id">X</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Heq</span>; <span class="tactic">intro</span> <span class="id">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Q</span>; <span class="tactic">intro</span> <span class="id">Y</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Q</span>; <span class="tactic">intro</span> <span class="id">Y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id">X</span>. <span class="tactic">rewrite</span> ! <span class="id">Y</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id">n</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">bsimpl</span>. <span class="id">des</span>. <span class="id">des_sumbool</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt_succ_inv">Plt_succ_inv</a></span> <span class="id">x0</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">src</span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span> <span class="kwd">in</span> *. <span class="id">xomega</span>. <span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>. <span class="id">des</span>; <span class="id">clarify</span>; <span class="tactic">try</span> <span class="id">xomega</span>. <span class="tactic">rewrite</span> <span class="id">Q2</span>. <span class="tactic">repeat</span> <span class="tactic">f_equal</span>; <span class="id">ss</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id">Q3</span>; <span class="id">ss</span>. <span class="id">ii</span>; <span class="id">clarify</span>. <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">x0</span> = (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">src</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">clarify</span>. <span class="id">des_ifs</span>; <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Q2</span>. <span class="tactic">repeat</span> <span class="tactic">f_equal</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">x0</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.succ">Pos.succ</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">src</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">clarify</span>. <span class="id">des_ifs</span>; <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">do</span> 2 <span class="tactic">f_equal</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exfalso</span>. <span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span>. <span class="id">ss</span>. <span class="id">des_ifs</span>; <span class="tactic">try</span> <span class="id">xomega</span>. <span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des_ifs</span>; <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">do</span> 2 <span class="tactic">f_equal</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exfalso</span>. <span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span>. <span class="id">ss</span>. <span class="id">des_ifs</span>; <span class="tactic">try</span> <span class="id">xomega</span>. <span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exfalso</span>. <span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span>. <span class="id">ss</span>. <span class="id">des_ifs</span>; <span class="tactic">try</span> <span class="id">xomega</span>. <span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">Q3</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">Q3</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">n</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#src_private">src_private</a></span>. <span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">valid_blocks</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">des_ifs</span>. <span class="id">rr</span>. <span class="id">rr</span> <span class="kwd">in</span> <span class="id">PR</span>. <span class="id">des_ifs</span>. <span class="tactic">destruct</span> <span class="id">n</span>; <span class="id">ss</span>. <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span>. <span class="id">des_ifs</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">n</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">tgt_private</a></span>. <span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">valid_blocks</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">ii</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_perm">assign_junk_blocks_perm</a></span> <span class="kwd">in</span> *. <span class="id">rr</span> <span class="kwd">in</span> <span class="id">PR</span>. <span class="id">des_ifs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">n</span>; <span class="id">ss</span>. <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="id">clarify</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span>. <span class="id">des_ifs</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span>. <span class="id">des_ifs</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span>. <span class="id">des_ifs</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="id">des_ifs</span>. <span class="id">bsimpl</span>. <span class="id">des</span>. <span class="id">des_sumbool</span>. <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">inv</span> <span class="id">PUBLIC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_freeblocks</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_unchanged_on">assign_junk_blocks_unchanged_on</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">clarify</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_unchanged_on">assign_junk_blocks_unchanged_on</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">des_ifs</span>. <span class="id">bsimpl</span>. <span class="id">des</span>. <span class="id">des_sumbool</span>. <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">des_ifs</span>. <span class="id">bsimpl</span>. <span class="id">des</span>. <span class="id">des_sumbool</span>. <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_perm">assign_junk_blocks_perm</a></span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">i</span>. <span class="id">clarify</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_perm">assign_junk_blocks_perm</a></span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="id">ss</span>. <span class="tactic">repeat</span> (<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#func_ext1">func_ext1</a></span>; <span class="id">i</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.AxiomsC.html#prop_ext">AxiomsC.prop_ext</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#src_private">src_private</a></span>, <span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span>, <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">valid_blocks</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="id">inv</span> <span class="id">MWF</span>. <span class="tactic">split</span>; <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id">n</span>; <span class="id">ss</span>. <span class="id">des_ifs</span>; <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">n</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">n</span>; <span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>; <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="tactic">try</span> <span class="id">xomega</span>; <span class="tactic">split</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span> <span class="kwd">in</span> *; <span class="id">ss</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="id">des_ifs</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Heq0</span>. <span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span>. <span class="id">ss</span>. <span class="id">des_ifs</span>; <span class="tactic">try</span> <span class="id">xomega</span>. <span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">tgt_private</a></span>, <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span>, <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">valid_blocks</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="id">inv</span> <span class="id">MWF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">split</span>; <span class="id">ss</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span> <span class="kwd">in</span> *; <span class="id">ss</span>. <span class="id">des_ifs</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_perm">assign_junk_blocks_perm</a></span>. <span class="comment">(*&nbsp;TODO:&nbsp;change&nbsp;lemma&nbsp;into&nbsp;symmetric&nbsp;version&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des_ifs</span>; <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="id">et</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#JUNK">JUNK</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">Mem_free_parallel</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">blk_src</span> <span class="id">blk_tgt</span> <span class="id">ofs_src</span> <span class="id">ofs_tgt</span> <span class="id">sz</span> <span class="id">m_src0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="kwd">wf</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VAL</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk_src">blk_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs_src">ofs_src</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk_tgt">blk_tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs_tgt">ofs_tgt</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FREESRC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk_src">blk_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs_src">ofs_src</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) (<span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs_src">ofs_src</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) + <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sz">sz</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src0">m_src0</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">sm1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">MSRC</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">src</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src0">m_src0</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MINJ</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">inj</a></span>)&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">FREETGT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#blk_tgt">blk_tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs_tgt">ofs_tgt</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) (<span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs_tgt">ofs_tgt</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) + <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sz">sz</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">tgt</a></span>)&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MWF</span>: <span class="kwd">wf</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MLE</span>: <span class="id">le</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6497')">Proof.</div>
<div class="proofscript" id="proof6497">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">VAL</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> 0 <span class="id">sz</span>).<br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#free_parallel">SimMemInj.free_parallel</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">Mem.address_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">replace</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs_src</span> + <span class="id">delta</span> + <span class="id">sz</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs_src</span> + <span class="id">sz</span> + <span class="id">delta</span>); [<span class="tactic">eauto</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#free_parallel">SimMemInj.free_parallel</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_free_zero_same">Mem_free_zero_same</a></span>; <span class="tactic">eauto</span>; <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="storebytes_mapped">storebytes_mapped</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">b</span> <span class="id">tb</span> <span class="id">ofs</span> <span class="id">bytes1</span> <span class="id">bytes2</span> <span class="id">m_src</span> <span class="id">delta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span> : <span class="id">SimMemInj.wf</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STRSRC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#bytes1">bytes1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src">m_src</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMBLK</span>: (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.compcertm.SimMemInjC.html#tb">tb</a></span>, <span class="id"><a href="compcert.compcertm.SimMemInjC.html#delta">delta</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BYTESINJ</span>: <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#bytes1">bytes1</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#bytes2">bytes2</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">sm1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">MSRC</span>: (<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_src">m_src</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MINJ</span>: (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>) = (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">STRTGT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#tb">tb</a></span> (<span class="id"><a href="compcert.compcertm.SimMemInjC.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.compcertm.SimMemInjC.html#delta">delta</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#bytes2">bytes2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>)&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MWF</span>: <span class="id">SimMemInj.wf</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MLE</span>: <span class="id">SimMemInj.le</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm1">sm1</a></span>&gt;&gt;)<br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6498')">Proof.</div>
<div class="proofscript" id="proof6498">
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mapped_inject">Mem.storebytes_mapped_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MWF</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">i</span>. <span class="id">des</span>. <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">eexists</span> (<span class="id"><a href="compcert.common.SimMemInj.html#mk">SimMemInj.mk</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>). <span class="id">esplits</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_refl">SimMemInj.frozen_refl</a></span>); <span class="tactic">try</span> (<span class="id">ii</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">Mem.perm_storebytes_2</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unchanged_on">Mem.storebytes_unchanged_on</a></span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">apply</span> <span class="id">SRCEXT</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">des</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unchanged_on">Mem.storebytes_unchanged_on</a></span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">apply</span> <span class="id">TGTEXT</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">des</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">clear</span> - <span class="id">BYTESINJ</span> <span class="id">STRSRC</span> <span class="id">H1</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">Mem.storebytes_range_perm</a></span> <span class="kwd">in</span> <span class="id">STRSRC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">bytes2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">bytes1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_length">list_forall2_length</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ofs</span> &lt;= <span class="id">i</span> - <span class="id">delta</span>) <span class="tactic">by</span> <span class="id">nia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">i</span> - <span class="id">delta</span> &lt; <span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#length">Datatypes.length</a></span> <span class="id">bytes1</span>)) <span class="tactic">by</span> <span class="id">nia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="kwd">in</span> <span class="id">STRSRC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">STRSRC</span> (<span class="id">i</span> - <span class="id">delta</span>)). <span class="id">exploit</span> <span class="id">STRSRC</span>. <span class="id">nia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memtype.html#perm_any_N">perm_any_N</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">etransitivity</span>; <span class="tactic">eauto</span>; <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">Mem.nextblock_storebytes</a></span>; <span class="tactic">eauto</span>; <span class="id">refl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#src_private">SimMemInj.src_private</a></span>. <span class="id">ss</span>. <span class="id">ii</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">SimMemInj.valid_blocks</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">Mem.nextblock_storebytes</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>. <span class="id">ss</span>. <span class="id">ii</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">PR</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">Mem.perm_storebytes_2</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">SimMemInj.valid_blocks</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">Mem.nextblock_storebytes</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.SeparationC.html">SeparationC</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SEP">SEP</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">sep_scope</span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="minjection_disjoint_footprint_private">minjection_disjoint_footprint_private</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">P</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SEP</span>: (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>) |= <span class="id"><a href="compcert.compcertm.SimMemInjC.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DISJ</span>: <span class="id"><a href="compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span> (<span class="id"><a href="compcert.common.Separation.html#minjection">minjection</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#P">P</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMemInjC.html#P">P</a></span>.(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>) &lt;2= <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6499')">Proof.</div>
<div class="proofscript" id="proof6499">
&nbsp;&nbsp;<span class="id">u</span>. <span class="id">ii</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">DISJ</span>; <span class="tactic">eauto</span>. <span class="id">ss</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">P</span>; <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id">m_valid</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="minjection_private_disjoint_footprint">minjection_private_disjoint_footprint</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">P</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PRIV</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#P">P</a></span>.(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>) &lt;2= <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">DISJ</span>: <span class="id"><a href="compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span> (<span class="id"><a href="compcert.common.Separation.html#minjection">minjection</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm0">sm0</a></span>)) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#P">P</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6500')">Proof.</div>
<div class="proofscript" id="proof6500">
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">ss</span>. <span class="id">des</span>. <span class="tactic">eapply</span> <span class="id">PRIV</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="external_call_parallel_rule_simmem">external_call_parallel_rule_simmem</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>) (<span class="id">ge0</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#V">V</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm_at</span> <span class="id">sm_after</span> <span class="id">P</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SEP</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_at">sm_at</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">SimMem.tgt</a></span>) |= (<span class="id"><a href="compcert.common.Separation.html#minjection">minjection</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_at">sm_at</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_at">sm_at</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">SimMem.src</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="compcert.common.Separation.html#globalenv_inject">globalenv_inject</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ge0">ge0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_at">sm_at</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) ** <span class="id"><a href="compcert.compcertm.SimMemInjC.html#P">P</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm_arg</span> <span class="id">sm_ret</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_at">sm_at</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF0</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_arg">sm_arg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF1</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_ret">sm_ret</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF2</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_after">sm_after</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWFAFTR</span> : <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> (<span class="id">SimMemInj.unlift</span>' <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_arg">sm_arg</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_ret">sm_ret</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MLE</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.le">SimMem.le</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_at">sm_at</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_arg">sm_arg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MLE0</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.le">SimMem.le</a></span> (<span class="id"><a href="compcert.compcertm.SimMemLift.html#SimMemLift.lift">SimMemLift.lift</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_arg">sm_arg</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_ret">sm_ret</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MLE1</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.le">SimMem.le</a></span> (<span class="id"><a href="compcert.compcertm.SimMemLift.html#SimMemLift.unlift">SimMemLift.unlift</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_at">sm_at</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_ret">sm_ret</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_after">sm_after</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MLEAFTR</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.le">SimMem.le</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_arg">sm_arg</a></span> (<span class="id"><a href="compcert.compcertm.SimMemLift.html#SimMemLift.unlift">SimMemLift.unlift</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_arg">sm_arg</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_ret">sm_ret</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PRIV0</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_at">sm_at</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PRIV1</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_ret">sm_ret</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>) = <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_after">sm_after</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNCH0</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_arg">sm_arg</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_at">sm_at</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_arg">sm_arg</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNCH1</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_arg">sm_arg</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_ret">sm_ret</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_after">sm_after</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">SEP</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_after">sm_after</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">SimMem.tgt</a></span>) |= (<span class="id"><a href="compcert.common.Separation.html#minjection">minjection</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_after">sm_after</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_after">sm_after</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">SimMem.src</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="compcert.common.Separation.html#globalenv_inject">globalenv_inject</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ge0">ge0</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_at">sm_at</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) ** <span class="id"><a href="compcert.compcertm.SimMemInjC.html#P">P</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6501')">Proof.</div>
<div class="proofscript" id="proof6501">
&nbsp;&nbsp;<span class="comment">(*&nbsp;See&nbsp;external_call_parallel_rule&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">SEP</span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#disjoint_footprint_sepconj">disjoint_footprint_sepconj</a></span> <span class="kwd">in</span> <span class="id">C</span>. <span class="id">des</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#minjection_disjoint_footprint_private">minjection_disjoint_footprint_private</a></span> <span class="kwd">in</span> <span class="id">DISJ1</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;{ <span class="id">des</span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="id">sep_split</span>.<br/>
&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id">MWF2</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#disjoint_footprint_sepconj">disjoint_footprint_sepconj</a></span>. <span class="id">ss</span>. <span class="tactic">split</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#minjection_private_disjoint_footprint">minjection_private_disjoint_footprint</a></span>. <span class="id">etrans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">PRIV0</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">PRIV1</span>. <span class="id">inv</span> <span class="id">MLEAFTR</span>. <span class="id">inv</span> <span class="id">MLE0</span>. <span class="id">inv</span> <span class="id">MWF0</span>. <span class="id">inv</span> <span class="id">MWF1</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etrans</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">TGTEXT0</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">TGTPARENTEQ0</span>. <span class="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id">sep_split</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Separation.html#globalenv_inject_incr">globalenv_inject_incr</a></span> <span class="kwd">in</span> <span class="id">B</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick1">sep_pick1</a></span> <span class="kwd">in</span> <span class="id">B</span>. <span class="id">ss</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etrans</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">MLE</span>. <span class="id">inv</span> <span class="id">MLE0</span>. <span class="id">inv</span> <span class="id">MLE1</span>. <span class="id">inv</span> <span class="id">MLEAFTR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">etrans</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="id">etrans</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.SimMemInj.html#inject_separated_frozen">SimMemInj.inject_separated_frozen</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_refl">SimMemInj.frozen_refl</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">B</span> <span class="kwd">as</span> (<span class="id">X</span> &amp; <span class="id">Y</span> &amp; <span class="id">Z</span>); <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Separation.html#m_invar">m_invar</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">DISJ1</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">PRIV0</span>. <span class="id">etrans</span>.<br/>
&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:= (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm_arg</span>)). <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">etrans</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:= (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm_ret</span>)). <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">clears</span> <span class="id">sm_after</span>. <span class="tactic">clear</span> <span class="id">sm_after</span>. <span class="id">clears</span> <span class="id">sm_at</span>. <span class="tactic">clear</span> <span class="id">sm_at</span>. <span class="id">inv</span> <span class="id">MLE0</span>. <span class="id">ss</span>.<br/>
<span class="id">Unshelve</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">Mem.empty</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sim_skenv_inj_globalenv_inject">sim_skenv_inj_globalenv_inject</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">F</span> `{<span class="id"><a href="compcert.compcertm.ASTC.html#HasExternal">HasExternal</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#F">F</a></span>} <span class="id">V</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span> <span class="id">skenv_proj_src</span> <span class="id">skenv_proj_tgt</span> <span class="id">sm_arg</span> (<span class="id">prog</span>: <span class="id"><a href="compcert.common.AST.html#program">AST.program</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#V">V</a></span>) <span class="id">m_tgt0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMSKE</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sim_skenv_inj">sim_skenv_inj</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_arg">sm_arg</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#ss">ss</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_proj_src">skenv_proj_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_proj_tgt">skenv_proj_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NB</span>: <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_proj_src">skenv_proj_src</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt0">m_tgt0</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimMemInjC.html#m_tgt0">m_tgt0</a></span> |= <span class="id"><a href="compcert.common.Separation.html#globalenv_inject">globalenv_inject</a></span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_proj_src">skenv_proj_src</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#prog">prog</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sm_arg">sm_arg</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof6502')">Proof.</div>
<div class="proofscript" id="proof6502">
&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">inv</span> <span class="id">SIMSKE</span>. <span class="id">inv</span> <span class="id">INJECT</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="id">uge0</span>. <span class="id">des_ifs</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="id">uge0</span>. <span class="id">des_ifs</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#SEP">SEP</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
