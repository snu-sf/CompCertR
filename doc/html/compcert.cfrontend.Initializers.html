
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Initializers</title>
<meta name="description" content="Documentation of Coq module Initializers" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Initializers</h1>
<div class="coq">
<br/>
<div class="doc">Compile-time evaluation of initializers for global C variables. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span> <span class="id"><a href="compcert.common.Values.html">Values</a></span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html">Ctypes</a></span> <span class="id"><a href="compcert.cfrontend.Cop.html">Cop</a></span> <span class="id"><a href="compcert.cfrontend.Csyntax.html">Csyntax</a></span>.<br/>
<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<br/>
<h1> Evaluation of compile-time constant expressions </h1>
<br/>
<div class="doc">To evaluate constant expressions at compile-time, we use the same <span class="bracket"><span class="id">value</span></span>
  type and the same <span class="bracket"><span class="id">sem_</span>*</span> functions that are used in CompCert C's semantics
  (module <span class="bracket"><span class="id">Csem</span></span>).  However, we interpret pointer values symbolically:
  <span class="bracket"><span class="id">Vptr</span> <span class="id">id</span> <span class="id">ofs</span></span> represents the address of global variable <span class="bracket"><span class="id">id</span></span>
  plus byte offset <span class="bracket"><span class="id">ofs</span></span>. </div>
<br/>
<div class="doc"><span class="bracket"><span class="id">constval</span> <span class="id">a</span></span> evaluates the constant expression <span class="bracket"><span class="id">a</span></span>.
If <span class="bracket"><span class="id">a</span></span> is a r-value, the returned value denotes:
<ul>
<li>
 <span class="bracket"><span class="id">Vint</span> <span class="id">n</span></span>, <span class="bracket"><span class="id">Vlong</span> <span class="id">n</span></span>, <span class="bracket"><span class="id">Vfloat</span> <span class="id">f</span></span>, <span class="bracket"><span class="id">Vsingle</span> <span class="id">f</span></span>: the corresponding number
</li>
<li>
 <span class="bracket"><span class="id">Vptr</span> <span class="id">id</span> <span class="id">ofs</span></span>: address of global variable <span class="bracket"><span class="id">id</span></span> plus byte offset <span class="bracket"><span class="id">ofs</span></span>
</li>
<li>
 <span class="bracket"><span class="id">Vundef</span></span>: erroneous expression
</li>
</ul>
If <span class="bracket"><span class="id">a</span></span> is a l-value, the returned value denotes:
<ul>
<li>
 <span class="bracket"><span class="id">Vptr</span> <span class="id">id</span> <span class="id">ofs</span></span>: global variable <span class="bracket"><span class="id">id</span></span> plus byte offset <span class="bracket"><span class="id">ofs</span></span>
</li>
</ul>
</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="do_cast">do_cast</a></span> (<span class="id">v</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span class="id">t1</span> <span class="id">t2</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#type">type</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_cast">sem_cast</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#t1">t1</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">Mem.empty</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>' =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">v</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">undefined</span> <span class="id">cast</span>")<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="lookup_composite">lookup_composite</a></span> (<span class="id">ce</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#composite_env">composite_env</a></span>) (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#composite">composite</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span>!<span class="id"><a href="compcert.cfrontend.Initializers.html#id">id</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">co</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">co</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="compcert.common.Errors.html#MSG">MSG</a></span> "<span class="id">Undefined</span> <span class="kwd">struct</span> <span class="id">or</span> <span class="id">union</span> " :: <span class="id"><a href="compcert.common.Errors.html#CTX">CTX</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#id">id</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="constval">constval</a></span> (<span class="id">ce</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#composite_env">composite_env</a></span>) (<span class="id">a</span>: <span class="id"><a href="compcert.cfrontend.Csyntax.html#expr">expr</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Initializers.html#a">a</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="kwd">Eval</span> <span class="id">v</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">v</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">_</span> | <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">_</span> | <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">_</span> | <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">_</span> <span class="id">_</span> | <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">illegal</span> <span class="id">constant</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Evalof">Evalof</a></span> <span class="id">l</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#access_mode">access_mode</a></span> <span class="id">ty</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Ctypes.html#By_reference">By_reference</a></span> | <span class="id"><a href="compcert.cfrontend.Ctypes.html#By_copy">By_copy</a></span> =&gt; <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">dereferencing</span> <span class="id">of</span> <span class="id">an</span> <span class="id">l</span>-<span class="id">value</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Eaddrof">Eaddrof</a></span> <span class="id">l</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">l</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Eunop">Eunop</a></span> <span class="id">op</span> <span class="id">r1</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v1</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_unary_operation">sem_unary_operation</a></span> <span class="id">op</span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v1">v1</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">r1</span>) <span class="id"><a href="compcert.common.Memory.html#Mem.empty">Mem.empty</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">undefined</span> <span class="id">unary</span> <span class="id">operation</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Ebinop">Ebinop</a></span> <span class="id">op</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v1</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v2</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Cop.html#sem_binary_operation">sem_binary_operation</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">op</span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v1">v1</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">r1</span>) <span class="id"><a href="compcert.cfrontend.Initializers.html#v2">v2</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">r2</span>) <span class="id"><a href="compcert.common.Memory.html#Mem.empty">Mem.empty</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">v</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">undefined</span> <span class="id">binary</span> <span class="id">operation</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Ecast">Ecast</a></span> <span class="id">r</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v1</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r</span>; <span class="id"><a href="compcert.cfrontend.Initializers.html#do_cast">do_cast</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v1">v1</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">r</span>) <span class="id">ty</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Esizeof">Esizeof</a></span> <span class="id">ty1</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">ty1</span>)))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Ealignof">Ealignof</a></span> <span class="id">ty1</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#alignof">alignof</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">ty1</span>)))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Eseqand">Eseqand</a></span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v1</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v2</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Cop.html#bool_val">bool_val</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v1">v1</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">r1</span>) <span class="id"><a href="compcert.common.Memory.html#Mem.empty">Mem.empty</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> =&gt; <span class="id"><a href="compcert.cfrontend.Initializers.html#do_cast">do_cast</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v2">v2</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">r2</span>) <span class="id"><a href="compcert.cfrontend.Ctypes.html#type_bool">type_bool</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">undefined</span> &amp;&amp; <span class="id">operation</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Eseqor">Eseqor</a></span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v1</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v2</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Cop.html#bool_val">bool_val</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v1">v1</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">r1</span>) <span class="id"><a href="compcert.common.Memory.html#Mem.empty">Mem.empty</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> =&gt; <span class="id"><a href="compcert.cfrontend.Initializers.html#do_cast">do_cast</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v2">v2</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">r2</span>) <span class="id"><a href="compcert.cfrontend.Ctypes.html#type_bool">type_bool</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">undefined</span> || <span class="id">operation</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Econdition">Econdition</a></span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">r3</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v1</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v2</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v3</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Cop.html#bool_val">bool_val</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v1">v1</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">r1</span>) <span class="id"><a href="compcert.common.Memory.html#Mem.empty">Mem.empty</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> =&gt; <span class="id"><a href="compcert.cfrontend.Initializers.html#do_cast">do_cast</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v2">v2</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">r2</span>) <span class="id">ty</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> =&gt; <span class="id"><a href="compcert.cfrontend.Initializers.html#do_cast">do_cast</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v3">v3</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">r3</span>) <span class="id">ty</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">condition</span> <span class="id">is</span> <span class="id">undefined</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Ecomma">Ecomma</a></span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v1</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r1</span>; <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Evar">Evar</a></span> <span class="id">x</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span>(<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">x</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Ederef">Ederef</a></span> <span class="id">r</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Efield">Efield</a></span> <span class="id">l</span> <span class="id">f</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">l</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tstruct">Tstruct</a></span> <span class="id">id</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">co</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#lookup_composite">lookup_composite</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">id</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">delta</span> &lt;- <span class="id"><a href="compcert.cfrontend.Ctypes.html#field_offset">field_offset</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">f</span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#co">co</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">l</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#delta">delta</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#delta">delta</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tunion">Tunion</a></span> <span class="id">id</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">l</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">ill</span>-<span class="id">typed</span> <span class="id">field</span> <span class="id">access</span>")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csyntax.html#Eparen">Eparen</a></span> <span class="id">r</span> <span class="id">tycast</span> <span class="id">ty</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">r</span>; <span class="id"><a href="compcert.cfrontend.Initializers.html#do_cast">do_cast</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v">v</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id">r</span>) <span class="id">tycast</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">not</span> <span class="id">a</span> <span class="id">compile</span>-<span class="id">time</span> <span class="id">constant</span>")<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">constval_cast</span> <span class="id">ce</span> <span class="id">a</span> <span class="id">ty</span></span> evaluates <span class="bracket"><span class="id">a</span></span> then converts its value to type <span class="bracket"><span class="id">ty</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="constval_cast">constval_cast</a></span> (<span class="id">ce</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#composite_env">composite_env</a></span>) (<span class="id">a</span>: <span class="id"><a href="compcert.cfrontend.Csyntax.html#expr">expr</a></span>) (<span class="id">ty</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#type">type</a></span>): <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> :=<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval">constval</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#a">a</a></span>; <span class="id"><a href="compcert.cfrontend.Initializers.html#do_cast">do_cast</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v">v</a></span> (<span class="id"><a href="compcert.cfrontend.Csyntax.html#typeof">typeof</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#a">a</a></span>) <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span>.<br/>
<br/>
<h1> Translation of initializers </h1>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="initializer">initializer</a></span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="Init_single">Init_single</a></span> (<span class="id">a</span>: <span class="id"><a href="compcert.cfrontend.Csyntax.html#expr">expr</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="Init_array">Init_array</a></span> (<span class="id">il</span>: <span class="id"><a href="compcert.cfrontend.Initializers.html#initializer_list">initializer_list</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="Init_struct">Init_struct</a></span> (<span class="id">il</span>: <span class="id"><a href="compcert.cfrontend.Initializers.html#initializer_list">initializer_list</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="Init_union">Init_union</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) (<span class="id">i</span>: <span class="id"><a href="compcert.cfrontend.Initializers.html#initializer">initializer</a></span>)<br/>
<span class="kwd">with</span> <span class="id"><a name="initializer_list">initializer_list</a></span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="Init_nil">Init_nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="Init_cons">Init_cons</a></span> (<span class="id">i</span>: <span class="id"><a href="compcert.cfrontend.Initializers.html#initializer">initializer</a></span>) (<span class="id">il</span>: <span class="id"><a href="compcert.cfrontend.Initializers.html#initializer_list">initializer_list</a></span>).<br/>
<br/>
<div class="doc">Translate an initializing expression <span class="bracket"><span class="id">a</span></span> for a scalar variable
  of type <span class="bracket"><span class="id">ty</span></span>.  Return the corresponding initialization datum. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transl_init_single">transl_init_single</a></span> (<span class="id">ce</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#composite_env">composite_env</a></span>) (<span class="id">ty</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#type">type</a></span>) (<span class="id">a</span>: <span class="id"><a href="compcert.cfrontend.Csyntax.html#expr">expr</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span> :=<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">v</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#constval_cast">constval_cast</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#a">a</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span>;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Initializers.html#v">v</a></span>, <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tint">Tint</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#I8">I8</a></span>|<span class="id"><a href="compcert.cfrontend.Ctypes.html#IBool">IBool</a></span>) <span class="id">sg</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span>(<span class="id"><a href="compcert.common.AST.html#Init_int8">Init_int8</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tint">Tint</a></span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#I16">I16</a></span> <span class="id">sg</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span>(<span class="id"><a href="compcert.common.AST.html#Init_int16">Init_int16</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tint">Tint</a></span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#I32">I32</a></span> <span class="id">sg</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span>(<span class="id"><a href="compcert.common.AST.html#Init_int32">Init_int32</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tpointer">Tpointer</a></span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">assertion</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>); <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span>(<span class="id"><a href="compcert.common.AST.html#Init_int32">Init_int32</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tlong">Tlong</a></span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span>(<span class="id"><a href="compcert.common.AST.html#Init_int64">Init_int64</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tpointer">Tpointer</a></span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">assertion</span> (<span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>); <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span>(<span class="id"><a href="compcert.common.AST.html#Init_int64">Init_int64</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tfloat">Tfloat</a></span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#F32">F32</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span>(<span class="id"><a href="compcert.common.AST.html#Init_float32">Init_float32</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tfloat">Tfloat</a></span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#F64">F64</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span>(<span class="id"><a href="compcert.common.AST.html#Init_float64">Init_float64</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tint">Tint</a></span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#I32">I32</a></span> <span class="id">sg</span> <span class="id">_</span> =&gt; <span class="id">assertion</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>); <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span>(<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id">id</span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tlong">Tlong</a></span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">assertion</span> (<span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>); <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span>(<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id">id</span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tpointer">Tpointer</a></span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span>(<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id">id</span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>, <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">undefined</span> <span class="id">operation</span> <span class="kwd">in</span> <span class="id">initializer</span>")<br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">type</span> <span class="id">mismatch</span> <span class="kwd">in</span> <span class="id">initializer</span>")<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Translate an initializer <span class="bracket"><span class="id">i</span></span> for a variable of type <span class="bracket"><span class="id">ty</span></span>.
  <span class="bracket"><span class="id">transl_init</span> <span class="id">ce</span> <span class="id">ty</span> <span class="id">i</span></span> returns the appropriate list of initialization data.
  The intermediate functions <span class="bracket"><span class="id">transl_init_rec</span></span>, <span class="bracket"><span class="id">transl_init_array</span></span>
  and <span class="bracket"><span class="id">transl_init_struct</span></span> append initialization data to the given
  list <span class="bracket"><span class="id">k</span></span>, and build the list of initialization data in reverse order,
  so as to remain tail-recursive. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="padding">padding</a></span> (<span class="id">frm</span> <span class="id">to</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">k</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#frm">frm</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#to">to</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.AST.html#Init_space">Init_space</a></span> (<span class="id"><a href="compcert.cfrontend.Initializers.html#to">to</a></span> - <span class="id"><a href="compcert.cfrontend.Initializers.html#frm">frm</a></span>) :: <span class="id"><a href="compcert.cfrontend.Initializers.html#k">k</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.cfrontend.Initializers.html#k">k</a></span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="transl_init_rec">transl_init_rec</a></span> (<span class="id">ce</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#composite_env">composite_env</a></span>) (<span class="id">ty</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#type">type</a></span>) (<span class="id">i</span>: <span class="id"><a href="compcert.cfrontend.Initializers.html#initializer">initializer</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">k</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) {<span class="kwd">struct</span> <span class="id">i</span>} : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Initializers.html#i">i</a></span>, <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Initializers.html#Init_single">Init_single</a></span> <span class="id">a</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">d</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#transl_init_single">transl_init_single</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span> <span class="id">a</span>; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.cfrontend.Initializers.html#d">d</a></span> :: <span class="id"><a href="compcert.cfrontend.Initializers.html#k">k</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Initializers.html#Init_array">Init_array</a></span> <span class="id">il</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tarray">Tarray</a></span> <span class="id">tyelt</span> <span class="id">nelt</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Initializers.html#transl_init_array">transl_init_array</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">tyelt</span> <span class="id">il</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> 0 <span class="id">nelt</span>) <span class="id"><a href="compcert.cfrontend.Initializers.html#k">k</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Initializers.html#Init_struct">Init_struct</a></span> <span class="id">il</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tstruct">Tstruct</a></span> <span class="id">id</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">co</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#lookup_composite">lookup_composite</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">id</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#co_su">co_su</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#co">co</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Ctypes.html#Struct">Struct</a></span> =&gt; <span class="id"><a href="compcert.cfrontend.Initializers.html#transl_init_struct">transl_init_struct</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#co">co</a></span>) <span class="id">il</span> 0 <span class="id"><a href="compcert.cfrontend.Initializers.html#k">k</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Ctypes.html#Union">Union</a></span>  =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="compcert.common.Errors.html#MSG">MSG</a></span> "<span class="kwd">struct</span>/<span class="id">union</span> <span class="id">mismatch</span> <span class="id">on</span> " :: <span class="id"><a href="compcert.common.Errors.html#CTX">CTX</a></span> <span class="id">id</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Initializers.html#Init_union">Init_union</a></span> <span class="id">f</span> <span class="id">i1</span>, <span class="id"><a href="compcert.cfrontend.Ctypes.html#Tunion">Tunion</a></span> <span class="id">id</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">co</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#lookup_composite">lookup_composite</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">id</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Ctypes.html#co_su">co_su</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#co">co</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Ctypes.html#Struct">Struct</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="compcert.common.Errors.html#MSG">MSG</a></span> "<span class="id">union</span>/<span class="kwd">struct</span> <span class="id">mismatch</span> <span class="id">on</span> " :: <span class="id"><a href="compcert.common.Errors.html#CTX">CTX</a></span> <span class="id">id</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Ctypes.html#Union">Union</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">ty1</span> &lt;- <span class="id"><a href="compcert.cfrontend.Ctypes.html#field_type">field_type</a></span> <span class="id">f</span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#co_members">co_members</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#co">co</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">k1</span>  &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#transl_init_rec">transl_init_rec</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ty1">ty1</a></span> <span class="id">i1</span> <span class="id"><a href="compcert.cfrontend.Initializers.html#k">k</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.cfrontend.Initializers.html#padding">padding</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ty1">ty1</a></span>) (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span>) <span class="id"><a href="compcert.cfrontend.Initializers.html#k1">k1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">wrong</span> <span class="id">type</span> <span class="kwd">for</span> <span class="id">compound</span> <span class="id">initializer</span>")<br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
<br/>
<span class="kwd">with</span> <span class="id"><a name="transl_init_array">transl_init_array</a></span> (<span class="id">ce</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#composite_env">composite_env</a></span>) (<span class="id">ty</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#type">type</a></span>) (<span class="id">il</span>: <span class="id"><a href="compcert.cfrontend.Initializers.html#initializer_list">initializer_list</a></span>) (<span class="id">sz</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">k</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) {<span class="kwd">struct</span> <span class="id">il</span>} : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Initializers.html#il">il</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Initializers.html#Init_nil">Init_nil</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#sz">sz</a></span> 0 <span class="kwd">then</span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#k">k</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> 0 <span class="id"><a href="compcert.cfrontend.Initializers.html#sz">sz</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.common.AST.html#Init_space">Init_space</a></span> (<span class="id"><a href="compcert.cfrontend.Initializers.html#sz">sz</a></span> * <span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span>) :: <span class="id"><a href="compcert.cfrontend.Initializers.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">wrong</span> <span class="id">number</span> <span class="id">of</span> <span class="id">elements</span> <span class="kwd">in</span> <span class="id">array</span> <span class="id">initializer</span>")<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Initializers.html#Init_cons">Init_cons</a></span> <span class="id">i1</span> <span class="id">il</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">k1</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#transl_init_rec">transl_init_rec</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span> <span class="id">i1</span> <span class="id"><a href="compcert.cfrontend.Initializers.html#k">k</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Initializers.html#transl_init_array">transl_init_array</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span> <span class="id">il</span>' (<span class="id"><a href="compcert.cfrontend.Initializers.html#sz">sz</a></span> - 1) <span class="id"><a href="compcert.cfrontend.Initializers.html#k1">k1</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
<br/>
<span class="kwd">with</span> <span class="id"><a name="transl_init_struct">transl_init_struct</a></span> (<span class="id">ce</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#composite_env">composite_env</a></span>) (<span class="id">ty</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#type">type</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fl</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#members">members</a></span>) (<span class="id">il</span>: <span class="id"><a href="compcert.cfrontend.Initializers.html#initializer_list">initializer_list</a></span>) (<span class="id">pos</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">k</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="kwd">struct</span> <span class="id">il</span>} : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Initializers.html#il">il</a></span>, <span class="id"><a href="compcert.cfrontend.Initializers.html#fl">fl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Initializers.html#Init_nil">Init_nil</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.cfrontend.Initializers.html#padding">padding</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#pos">pos</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span>) <span class="id"><a href="compcert.cfrontend.Initializers.html#k">k</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Initializers.html#Init_cons">Init_cons</a></span> <span class="id">i1</span> <span class="id">il</span>', (<span class="id">_</span>, <span class="id">ty1</span>) :: <span class="id">fl</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">pos1</span> := <span class="id"><a href="compcert.lib.Coqlib.html#align">align</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#pos">pos</a></span> (<span class="id"><a href="compcert.cfrontend.Ctypes.html#alignof">alignof</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">ty1</span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">k1</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#transl_init_rec">transl_init_rec</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">ty1</span> <span class="id">i1</span> (<span class="id"><a href="compcert.cfrontend.Initializers.html#padding">padding</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#pos">pos</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#pos1">pos1</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#k">k</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Initializers.html#transl_init_struct">transl_init_struct</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span> <span class="id">fl</span>' <span class="id">il</span>' (<span class="id"><a href="compcert.cfrontend.Initializers.html#pos1">pos1</a></span> + <span class="id"><a href="compcert.cfrontend.Ctypes.html#sizeof">sizeof</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id">ty1</span>) <span class="id"><a href="compcert.cfrontend.Initializers.html#k1">k1</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">wrong</span> <span class="id">number</span> <span class="id">of</span> <span class="id">elements</span> <span class="kwd">in</span> <span class="kwd">struct</span> <span class="id">initializer</span>")<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transl_init">transl_init</a></span> (<span class="id">ce</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#composite_env">composite_env</a></span>) (<span class="id">ty</span>: <span class="id"><a href="compcert.cfrontend.Ctypes.html#type">type</a></span>) (<span class="id">i</span>: <span class="id"><a href="compcert.cfrontend.Initializers.html#initializer">initializer</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) :=<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">k</span> &lt;- <span class="id"><a href="compcert.cfrontend.Initializers.html#transl_init_rec">transl_init_rec</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ce">ce</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#ty">ty</a></span> <span class="id"><a href="compcert.cfrontend.Initializers.html#i">i</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id">List.rev</span>' <span class="id"><a href="compcert.cfrontend.Initializers.html#k">k</a></span>).<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
