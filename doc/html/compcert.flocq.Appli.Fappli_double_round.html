
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Fappli_double_round</title>
<meta name="description" content="Documentation of Coq module Fappli_double_round" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Fappli_double_round</h1>
<div class="coq">
<h1> Conditions for innocuous double rounding. </h1>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html">Fcore_Raux</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html">Fcore_defs</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html">Fcore_generic_fmt</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html">Fcalc_ops</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html">Fcore_ulp</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html">Fcore_FLX</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html">Fcore_FLT</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html">Fcore_FTZ</a></span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.micromega.Psatz.html">Psatz</a></span>.<br/>
<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">R_scope</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round">Double_round</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.beta">beta</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix">radix</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="bpow">bpow</a></span> <span class="id">e</span> := (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">e</span>).<br/>
<span class="kwd">Notation</span> <span class="id"><a name="ln_beta">ln_beta</a></span> <span class="id">x</span> := (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">x</span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="double_round_eq">double_round_eq</a></span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)<br/>
&nbsp;&nbsp;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<br/>
<div class="doc">A little tactic to simplify terms of the form <span class="bracket"><span class="id">bpow</span> <span class="id">a</span> * <span class="id">bpow</span> <span class="id">b</span></span>. </div>
<span class="kwd">Ltac</span> <span class="id">bpow_simplify</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [(<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id">_</span> <span class="id">_</span> * <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id">_</span> <span class="id">_</span>)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [(?<span class="id">X1</span> * <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id">_</span> <span class="id">_</span> * <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id">_</span> <span class="id">_</span>)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> <span class="id">X1</span>); <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [(?<span class="id">X1</span> * (?<span class="id">X2</span> * <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id">_</span> <span class="id">_</span>) * <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id">_</span> <span class="id">_</span>)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> <span class="id">X1</span> <span class="id">X2</span>); <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> (<span class="id">X1</span> * <span class="id">X2</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [(<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id">_</span> ?<span class="id">X</span>)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">progress</span> <span class="id">ring_simplify</span> <span class="id">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id">_</span> 0) <span class="kwd">with</span> 1;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id">context</span> [(<span class="id">_</span> * 1)] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="midp">midp</a></span> (<span class="id">fexp</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">midp</span>' (<span class="id">fexp</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">double_round_lt_mid_further_place</span>' :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5776')">Proof.</div>
<div class="proofscript" id="proof5776">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2f1</span> <span class="id">Hx1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">set</span> (<span class="id">x</span>' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">intro</span> <span class="id">Hx2</span>'.<br/>
<span class="tactic">assert</span> (<span class="id">Hx2</span> : <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; / 2 * (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>)).<br/>
{ <span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)); <span class="id">ring_simplify</span>. }<br/>
<span class="tactic">set</span> (<span class="id">x</span>'' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice2</span>) <span class="id">x</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Hr1</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">x</span>'' - <span class="id">x</span>) &lt;= / 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (/ 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">x</span>''; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_le_half_ulp">error_le_half_ulp</a></span>...<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">now</span> <span class="id">right</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
<span class="tactic">assert</span> (<span class="id">Pxx</span>' : 0 &lt;= <span class="id">x</span> - <span class="id">x</span>').<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Vfexp1</span>. }<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="kwd">in</span> <span class="id">Hx2</span>; <span class="tactic">try</span> (<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>; <span class="tactic">assumption</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Hr2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">x</span>'' - <span class="id">x</span>') &lt; / 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
{ <span class="tactic">replace</span> (<span class="id">x</span>'' - <span class="id">x</span>') <span class="kwd">with</span> (<span class="id">x</span>'' - <span class="id">x</span> + (<span class="id">x</span> - <span class="id">x</span>')) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_triang">Rabs_triang</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (/ 2 * <span class="id">_</span>) <span class="kwd">with</span> (/ 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ (/ 2 * (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))))) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_lt_compat">Rplus_le_lt_compat</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">Hr1</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>]; <span class="tactic">apply</span> <span class="id">Hx2</span>. }<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span>'' 0) <span class="kwd">as</span> [<span class="id">Zx</span>''|<span class="id">Nzx</span>''].<br/>
- <span class="comment">(*&nbsp;x''&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zx</span>'' <span class="kwd">in</span> <span class="id">Hr1</span> |- *.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span> <span class="id">_</span> <span class="id">_</span> 0); [<span class="id">now</span> <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> <span class="id">_</span>))) <span class="tactic">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hr1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="comment">(*&nbsp;x''&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Lx</span>'' : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>'' = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_antisym">Zle_antisym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le_bpow">ln_beta_le_bpow</a></span>; [<span class="tactic">exact</span> <span class="id">Nzx</span>''|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">x</span>'' <span class="kwd">with</span> (<span class="id">x</span>'' - <span class="id">x</span> + <span class="id">x</span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_triang">Rabs_triang</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>) <span class="kwd">with</span> (/ 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- / 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_lt_compat">Rplus_le_lt_compat</a></span>; [<span class="tactic">exact</span> <span class="id">Hr1</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>;[<span class="id">idtac</span>| <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id">x</span>'' <span class="kwd">in</span> <span class="id">Nzx</span>'' |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_round_ge">ln_beta_round_ge</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>|]. }<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Lx</span>''.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> <span class="id">_</span>))) <span class="tactic">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> <span class="id">x</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> <span class="id">_</span>))) <span class="tactic">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> <span class="id">x</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">bpow_simplify</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_lt_mid_further_place">double_round_lt_mid_further_place</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5777')">Proof.</div>
<div class="proofscript" id="proof5777">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2f1</span> <span class="id">Hf1</span>.<br/>
<span class="tactic">intro</span> <span class="id">Hx2</span>'.<br/>
<span class="tactic">assert</span> (<span class="id">Hx2</span> : <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; / 2 * (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>)).<br/>
{ <span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)); <span class="id">ring_simplify</span>. }<br/>
<span class="id">revert</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">set</span> (<span class="id">x</span>' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">intro</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Pxx</span>' : 0 &lt;= <span class="id">x</span> - <span class="id">x</span>').<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Vfexp1</span>. }<br/>
<span class="tactic">assert</span> (<span class="id">x</span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - / 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)));<br/>
&nbsp;&nbsp;[|<span class="tactic">apply</span> <span class="id">double_round_lt_mid_further_place</span>'; <span class="tactic">try</span> <span class="tactic">assumption</span>]...<br/>
2: <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="tactic">assumption</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span>' 0) <span class="kwd">as</span> [<span class="id">Zx</span>'|<span class="id">Nzx</span>'].<br/>
- <span class="comment">(*&nbsp;x'&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zx</span>' <span class="kwd">in</span> <span class="id">Hx2</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_0_r">Rminus_0_r</a></span> <span class="kwd">in</span> <span class="id">Hx2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_minus_distr_l">Rmult_minus_distr_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_r">Rplus_le_compat_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_l">Rmult_le_reg_l</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.setoid_ring.RealField.html#Rlt_0_2">Rlt_0_2</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (2 * (/ 2 * <span class="id">_</span>)) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)) <span class="tactic">by</span> <span class="id">field</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> 1; [|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;<span class="id">change</span> 1 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> 0); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="comment">(*&nbsp;x'&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Px</span>' : 0 &lt; <span class="id">x</span>').<br/>
&nbsp;&nbsp;{ <span class="tactic">assert</span> (0 &lt;= <span class="id">x</span>'); [|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">x</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 0 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lub">Zfloor_lub</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="id">x</span>); [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_abs">scaled_mantissa_abs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hx</span>' : <span class="id">x</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_DN">ulp_DN</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>) <span class="kwd">with</span> <span class="id">x</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#id_p_ulp_le_bpow">id_p_ulp_le_bpow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exact</span> <span class="id">Px</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">change</span> <span class="id">x</span>' <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_DN">valid_rnd_DN</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="id">x</span>) <span class="tactic">at</span> 1; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">Px</span>'. }<br/>
&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>); <span class="id">fold</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (/ 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)) <span class="tactic">at</span> 2.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>; [|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="kwd">in</span> <span class="id">Hx2</span>;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="kwd">in</span> <span class="id">Hx</span>';[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="kwd">in</span> <span class="id">H</span>;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
&nbsp;&nbsp;<span class="id">lra</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_lt_mid_same_place">double_round_lt_mid_same_place</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5778')">Proof.</div>
<div class="proofscript" id="proof5778">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2f1</span>.<br/>
<span class="tactic">intro</span> <span class="id">Hx</span>'.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span> : <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span> &lt; / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>).<br/>
{ <span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)); <span class="id">ring_simplify</span>. }<br/>
<span class="id">revert</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">set</span> (<span class="id">x</span>' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">intro</span> <span class="id">Hx</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Pxx</span>' : 0 &lt;= <span class="id">x</span> - <span class="id">x</span>').<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Vfexp1</span>. }<br/>
<span class="tactic">assert</span> (<span class="id">H</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)) -<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))))) &lt; / 2).<br/>
{ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> <span class="id">_</span>))) <span class="tactic">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt">Rabs_lt</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">_</span> * <span class="id">_</span>) <span class="kwd">with</span> <span class="id">x</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> 0; [|<span class="tactic">exact</span> <span class="id">Pxx</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span> (/ 2)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="kwd">in</span> <span class="id">Hx</span>;<span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>; <span class="tactic">assumption</span>. }<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="tactic">at</span> 2.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hf2f1</span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>))).<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))))).<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;+ <span class="id">fold</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">_</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_DN">valid_rnd_DN</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_lt_mid">double_round_lt_mid</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5779')">Proof.</div>
<div class="proofscript" id="proof5779">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2f1</span> <span class="id">Hf1</span> <span class="id">Hx</span> <span class="id">Hx</span>'.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)) (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))) <span class="kwd">as</span> [<span class="id">Hf2</span>'|<span class="id">Hf2</span>'].<br/>
- <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;&lt;=&nbsp;fexp2&nbsp;(ln_beta&nbsp;x)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hf2</span>'' : (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) = <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_lt_mid_same_place">double_round_lt_mid_same_place</a></span>.<br/>
- <span class="comment">(*&nbsp;fexp2&nbsp;(ln_beta&nbsp;x)&nbsp;&lt;&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hf2</span>'' : (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 1)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">Hx</span>' <span class="id">Hf2</span>''); <span class="tactic">intro</span> <span class="id">Hx</span>''.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_lt_mid_further_place">double_round_lt_mid_further_place</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">double_round_gt_mid_further_place</span>' :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">midp</span>' <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5780')">Proof.</div>
<div class="proofscript" id="proof5780">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2f1</span>.<br/>
<span class="tactic">intros</span> <span class="id">Hx1</span> <span class="id">Hx2</span>'.<br/>
<span class="tactic">assert</span> (<span class="id">Hx2</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> - <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; / 2 * (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>)).<br/>
{ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span> + <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">midp</span>' <span class="kwd">in</span> <span class="id">Hx2</span>'. }<br/>
<span class="id">revert</span> <span class="id">Hx1</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">set</span> (<span class="id">x</span>' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>).<br/>
<span class="tactic">set</span> (<span class="id">x</span>'' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice2</span>) <span class="id">x</span>).<br/>
<span class="tactic">intros</span> <span class="id">Hx1</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hr1</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">x</span>'' - <span class="id">x</span>) &lt;= / 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (/2* <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">x</span>''; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_le_half_ulp">error_le_half_ulp</a></span>...<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">now</span> <span class="id">right</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
<span class="tactic">assert</span> (<span class="id">Px</span>'<span class="id">x</span> : 0 &lt;= <span class="id">x</span>' - <span class="id">x</span>).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Vfexp1</span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Hr2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">x</span>'' - <span class="id">x</span>') &lt; / 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
{ <span class="tactic">replace</span> (<span class="id">x</span>'' - <span class="id">x</span>') <span class="kwd">with</span> (<span class="id">x</span>'' - <span class="id">x</span> + (<span class="id">x</span> - <span class="id">x</span>')) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_triang">Rabs_triang</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (/ 2 * <span class="id">_</span>) <span class="kwd">with</span> (/ 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ (/ 2 * (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))))) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_lt_compat">Rplus_le_lt_compat</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">Hr1</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="kwd">in</span> <span class="id">Hx2</span>; <span class="tactic">try</span> (<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>; <span class="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>]; <span class="tactic">apply</span> <span class="id">Hx2</span>. }<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span>'' 0) <span class="kwd">as</span> [<span class="id">Zx</span>''|<span class="id">Nzx</span>''].<br/>
- <span class="comment">(*&nbsp;x''&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zx</span>'' <span class="kwd">in</span> <span class="id">Hr1</span> |- *.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span> <span class="id">_</span> <span class="id">_</span> 0); [<span class="id">now</span> <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> <span class="id">_</span>))) <span class="tactic">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hr1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="comment">(*&nbsp;x''&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Lx</span>'' : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>'' = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_antisym">Zle_antisym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le_bpow">ln_beta_le_bpow</a></span>; [<span class="tactic">exact</span> <span class="id">Nzx</span>''|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>; [<span class="tactic">exact</span> <span class="id">Hx1</span>|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ge_generic">round_ge_generic</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exact</span> <span class="id">Vfexp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id">x</span>'' <span class="kwd">in</span> <span class="id">Nzx</span>'' |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_round_ge">ln_beta_round_ge</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>|]. }<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Lx</span>''.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">reflexivity</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> <span class="id">_</span>))) <span class="tactic">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> <span class="id">x</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">try</span> (<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>; <span class="tactic">assumption</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> <span class="id">_</span>))) <span class="tactic">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> <span class="id">x</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">bpow_simplify</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_gt_mid_further_place">double_round_gt_mid_further_place</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">midp</span>' <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5781')">Proof.</div>
<div class="proofscript" id="proof5781">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2f1</span> <span class="id">Hf1</span> <span class="id">Hx2</span>'.<br/>
<span class="tactic">assert</span> (<span class="id">Hx2</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> - <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; / 2 * (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>)).<br/>
{ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span> + <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">midp</span>' <span class="kwd">in</span> <span class="id">Hx2</span>'. }<br/>
<span class="id">revert</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">set</span> (<span class="id">x</span>' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">intro</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">set</span> (<span class="id">x</span>'' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice2</span>) <span class="id">x</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">x</span>'' (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))) <span class="kwd">as</span> [<span class="id">Hx</span>''|<span class="id">Hx</span>''];<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id">double_round_gt_mid_further_place</span>'|].<br/>
<span class="comment">(*&nbsp;bpow&nbsp;(ln_beta&nbsp;x)&nbsp;&lt;=&nbsp;x''&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">Hx</span>''<span class="id">pow</span> : <span class="id">x</span>'' = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)).<br/>
{ <span class="tactic">assert</span> (<span class="id">H</span>'<span class="id">x</span>'' : <span class="id">x</span>'' &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) + / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id">x</span> + / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> (- <span class="id">x</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_le_inv">Rabs_le_inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_le_half_ulp">error_le_half_ulp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Vfexp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_compat_r">Rplus_lt_compat_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="tactic">at</span> 1; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>; [|<span class="tactic">exact</span> <span class="id">Hx</span>''].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">x</span>'', <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span> <span class="id">_</span> (<span class="id">_</span> - <span class="id">_</span>)); [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_succ_le">Zlt_succ_le</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>'<span class="id">x</span>'').<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="id">lra</span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Hr</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">x</span> - <span class="id">x</span>'') &lt; / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (/ 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_le_half_ulp">error_le_half_ulp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Vfexp2</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">try</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>. }<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hf</span> : (0 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>''))%<span class="id">Z</span>).<br/>
{ <span class="tactic">rewrite</span> <span class="id">Hx</span>''<span class="id">pow</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_bpow">ln_beta_bpow</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> + 1) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))) <span class="kwd">as</span> [<span class="id">Hle</span>|<span class="id">Hlt</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Vfexp1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H</span> : (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> = <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_antisym">Zle_antisym</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Vfexp1</span>. }<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> ^ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>'')))%<span class="id">Z</span>).<br/>
- <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> ^ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">exact</span> <span class="id">Hf</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> <span class="id">_</span>))) <span class="tactic">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="kwd">in</span> <span class="id">Hr</span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>''<span class="id">pow</span>; <span class="tactic">exact</span> <span class="id">Hr</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">exact</span> <span class="id">Hf</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>'')))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> <span class="id">_</span>))) <span class="tactic">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_diag_eq">Rminus_diag_eq</a></span>; [|<span class="tactic">exact</span> <span class="id">Hx</span>''<span class="id">pow</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span> (/ 2)).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">lra</span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_gt_mid_same_place">double_round_gt_mid_same_place</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">midp</span>' <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5782')">Proof.</div>
<div class="proofscript" id="proof5782">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2f1</span> <span class="id">Hx</span>'.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> - <span class="id">x</span> &lt; / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>).<br/>
{ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span> + <span class="id">x</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">midp</span>' <span class="kwd">in</span> <span class="id">Hx</span>'. }<br/>
<span class="tactic">assert</span> (<span class="id">H</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))) &lt; / 2).<br/>
{ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> <span class="id">_</span>))) <span class="tactic">at</span> 1;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt">Rabs_lt</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span> (/ 2)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;-  <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="kwd">in</span> <span class="id">Hx</span>;[<span class="tactic">exact</span> <span class="id">Hx</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>]. }<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="tactic">at</span> 2.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hf2f1</span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>))).<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>].<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;+ <span class="id">fold</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">_</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_UP">valid_rnd_UP</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_gt_mid">double_round_gt_mid</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">midp</span>' <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id">midp</span>' <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5783')">Proof.</div>
<div class="proofscript" id="proof5783">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2f1</span> <span class="id">Hf1</span> <span class="id">Hx</span> <span class="id">Hx</span>'.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)) (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))) <span class="kwd">as</span> [<span class="id">Hf2</span>'|<span class="id">Hf2</span>'].<br/>
- <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;&lt;=&nbsp;fexp2&nbsp;(ln_beta&nbsp;x)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hf2</span>'' : (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) = <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_gt_mid_same_place">double_round_gt_mid_same_place</a></span>.<br/>
- <span class="comment">(*&nbsp;fexp2&nbsp;(ln_beta&nbsp;x)&nbsp;&lt;&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hf2</span>'' : (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 1)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">Hx</span>' <span class="id">Hf2</span>''); <span class="tactic">intro</span> <span class="id">Hx</span>''.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_gt_mid_further_place">double_round_gt_mid_further_place</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_mult">Double_round_mult</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ln_beta_mult_disj">ln_beta_mult_disj</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt;&gt; 0 -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;&gt; 0 -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) = (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> - 1)%<span class="id">Z</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<br/>
&nbsp;&nbsp;&nbsp;\/ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) = (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)%<span class="id">Z</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5784')">Proof.</div>
<div class="proofscript" id="proof5784">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zx</span> <span class="id">Zy</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_mult">ln_beta_mult</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zx</span> <span class="id">Zy</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="double_round_mult_hyp">double_round_mult_hyp</a></span> <span class="id">fexp1</span> <span class="id">fexp2</span> :=<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_mult_aux">double_round_mult_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_mult_hyp">double_round_mult_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5785')">Proof.</div>
<div class="proofscript" id="proof5785">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Hfexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Zx</span>].<br/>
- <span class="comment">(*&nbsp;x&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Zy</span>|<span class="id">Zy</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">mx</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">my</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">fxy</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id">mx</span> * <span class="id">my</span>) (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) + <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hxy</span> : <span class="id">x</span> * <span class="id">y</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fxy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id">fxy</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Fx</span>, <span class="id">Fy</span> <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">ring</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">generic_format_F2R</span>' <span class="kwd">with</span> (<span class="id">f</span> := <span class="id">fxy</span>); [<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hxy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>, <span class="id">fxy</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hfexp</span> <span class="kwd">as</span> (<span class="id">Hfexp1</span>, <span class="id">Hfexp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_mult_disj">ln_beta_mult_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zx</span> <span class="id">Zy</span>) <span class="kwd">as</span> [<span class="id">Lxy</span>|<span class="id">Lxy</span>]; <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_mult.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_mult">double_round_mult</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_mult_hyp">double_round_mult_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))<br/>
&nbsp;&nbsp;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5786')">Proof.</div>
<div class="proofscript" id="proof5786">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Hfexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hxy</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span> (<span class="id">x</span> * <span class="id">y</span>) = <span class="id">x</span> * <span class="id">y</span>).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>; [<span class="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_mult_aux">double_round_mult_aux</a></span> <span class="id">fexp1</span> <span class="id">fexp2</span>). }<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hxy</span> <span class="tactic">at</span> 1.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_mult.Double_round_mult_FLX">Double_round_mult_FLX</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_mult.Double_round_mult_FLX.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLX.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_mult_FLX">double_round_mult_FLX</a></span> :<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLX.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLX.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>') <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))<br/>
&nbsp;&nbsp;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLX.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5787')">Proof.</div>
<div class="proofscript" id="proof5787">
<span class="tactic">intros</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_mult">double_round_mult</a></span>;<br/>
&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_mult_hyp">double_round_mult_hyp</a></span>; <span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">ey</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span>;<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLX">Double_round_mult_FLX</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_mult.Double_round_mult_FLT">Double_round_mult_FLT</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLT</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_mult.Double_round_mult_FLT.emin">emin</a></span> <span class="id"><a name="Double_round.Double_round_mult.Double_round_mult_FLT.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">emin</span>' <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_mult_FLT">double_round_mult_FLT</a></span> :<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' &lt;= 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.emin">emin</a></span>)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>') <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))<br/>
&nbsp;&nbsp;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5788')">Proof.</div>
<div class="proofscript" id="proof5788">
<span class="tactic">intros</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_mult">double_round_mult</a></span>;<br/>
&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_mult_hyp">double_round_mult_hyp</a></span>; <span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">ey</span>;<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span>;<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> + <span class="id">ey</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> + <span class="id">ey</span> - 1 - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.emin">emin</a></span>);<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT.emin">emin</a></span>);<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FLT">Double_round_mult_FLT</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_mult.Double_round_mult_FTZ">Double_round_mult_FTZ</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FTZ</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_mult.Double_round_mult_FTZ.emin">emin</a></span> <span class="id"><a name="Double_round.Double_round_mult.Double_round_mult_FTZ.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">emin</span>' <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_mult_FTZ">double_round_mult_FTZ</a></span> :<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' + <span class="id">prec</span>' &lt;= 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.prec">prec</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>') <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))<br/>
&nbsp;&nbsp;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5789')">Proof.</div>
<div class="proofscript" id="proof5789">
<span class="tactic">intros</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_mult">double_round_mult</a></span>;<br/>
&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_mult_hyp">double_round_mult_hyp</a></span>; <span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">ey</span>;<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span>;<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> *;<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> + <span class="id">ey</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.emin">emin</a></span>);<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ.emin">emin</a></span>);<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> + <span class="id">ey</span> - 1 - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult.Double_round_mult_FTZ">Double_round_mult_FTZ</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_mult">Double_round_mult</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_plus">Double_round_plus</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ln_beta_plus_disj">ln_beta_plus_disj</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<br/>
&nbsp;&nbsp;&nbsp;\/ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) = (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + 1)%<span class="id">Z</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5790')">Proof.</div>
<div class="proofscript" id="proof5790">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_plus">ln_beta_plus</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hxy</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ln_beta_plus_separated">ln_beta_plus_separated</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5791')">Proof.</div>
<div class="proofscript" id="proof5791">
<span class="tactic">intros</span> <span class="id">fexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Nny</span> <span class="id">Fx</span> <span class="id">Hsep</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Zy</span>|<span class="id">Nzy</span>].<br/>
- <span class="comment">(*&nbsp;y&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Zy</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
- <span class="comment">(*&nbsp;y&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ln_beta_plus_eps">ln_beta_plus_eps</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp</span>); [<span class="tactic">assumption</span>|<span class="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="tactic">assumption</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) <span class="kwd">as</span> (<span class="id">ey</span>, <span class="id">Hey</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">ey</span>).<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="id">y</span>); [<span class="tactic">apply</span> <span class="id">Hey</span>|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>].<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ln_beta_minus_disj">ln_beta_minus_disj</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - 2)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<br/>
&nbsp;&nbsp;&nbsp;\/ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) = (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - 1)%<span class="id">Z</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5792')">Proof.</div>
<div class="proofscript" id="proof5792">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Hln</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hxy</span> : <span class="id">y</span> &lt; <span class="id">x</span>); [<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_lt_pos">ln_beta_lt_pos</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>); [ |<span class="tactic">omega</span>]|].<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus">ln_beta_minus</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hxy</span>); <span class="tactic">intro</span> <span class="id">Hln2</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus_lb">ln_beta_minus_lb</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Hln</span>); <span class="tactic">intro</span> <span class="id">Hln3</span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ln_beta_minus_separated">ln_beta_minus_separated</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - 1) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5793')">Proof.</div>
<div class="proofscript" id="proof5793">
<span class="tactic">intros</span> <span class="id">fexp</span> <span class="id">Vfexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Yltx</span> <span class="id">Xgtpow</span> <span class="id">Fx</span> <span class="id">Ly</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span>.<br/>
<span class="tactic">split</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_ge">Rabs_ge</a></span>; <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hy</span> : <span class="id">y</span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1))).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_bpow">ulp_bpow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="id">y</span>); [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> <span class="id">y</span>); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1))).<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_eq_pos">succ_eq_pos</a></span>;[<span class="id">idtac</span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_le_lt">succ_le_lt</a></span>; [<span class="tactic">apply</span> <span class="id">Vfexp</span>|<span class="id">idtac</span>|<span class="tactic">exact</span> <span class="id">Fx</span>|<span class="tactic">assumption</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|].<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span> <span class="id">x</span>) <span class="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>.<br/>
&nbsp;&nbsp;+ <span class="id">lra</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="double_round_plus_hyp">double_round_plus_hyp</a></span> <span class="id">fexp1</span> <span class="id">fexp2</span> :=<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> + 1) - 1 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - 1) + 1 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - 1 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - 1 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus_aux0_aux_aux">double_round_plus_aux0_aux_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))%<span class="id">Z</span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))%<span class="id">Z</span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5794')">Proof.</div>
<div class="proofscript" id="proof5794">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Oxy</span> <span class="id">Hlnx</span> <span class="id">Hlny</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Nzx</span>].<br/>
- <span class="comment">(*&nbsp;x&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span> <span class="kwd">in</span> <span class="id">Hlny</span> |- *.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span>).<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Zy</span>|<span class="id">Nzy</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zy</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span> <span class="kwd">in</span> <span class="id">Hlnx</span> |- *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span>).<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="tactic">at</span> -3, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">mx</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">my</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">fxy</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id">mx</span> + <span class="id">my</span> * (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> ^ (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hxy</span> : <span class="id">x</span> + <span class="id">y</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fxy</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id">fxy</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fy</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">generic_format_F2R</span>' <span class="kwd">with</span> (<span class="id">f</span> := <span class="id">fxy</span>); [<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hxy</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>, <span class="id">fxy</span>; <span class="tactic">simpl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus_aux0_aux">double_round_plus_aux0_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))%<span class="id">Z</span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))%<span class="id">Z</span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5795')">Proof.</div>
<div class="proofscript" id="proof5795">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hlnx</span> <span class="id">Hlny</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_gt_cases">Z.le_gt_cases</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)) (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))) <span class="kwd">as</span> [<span class="id">Hle</span>|<span class="id">Hgt</span>].<br/>
- <span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux0_aux_aux">double_round_plus_aux0_aux_aux</a></span> <span class="id">fexp1</span>).<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span> <span class="kwd">in</span> <span class="id">Hlnx</span>, <span class="id">Hlny</span> |- *.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux0_aux_aux">double_round_plus_aux0_aux_aux</a></span> <span class="id">fexp1</span>); [<span class="tactic">omega</span>| | | |].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus_aux0">double_round_plus_aux0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>), <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)%<span class="id">R</span> -&gt; (0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5796')">Proof.</div>
<div class="proofscript" id="proof5796">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Hyx</span> <span class="id">Hln</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Nny</span> : (0 &lt;= <span class="id">y</span>)%<span class="id">R</span>); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>|].<br/>
<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">Hexp2</span>,(<span class="id">Hexp3</span>,<span class="id">Hexp4</span>))).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_gt_cases">Z.le_gt_cases</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))) <span class="kwd">as</span> [<span class="id">Hle</span>|<span class="id">Hgt</span>].<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;&lt;=&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Lxy</span> : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> + <span class="id">y</span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_plus_separated">ln_beta_plus_separated</a></span> <span class="id">fexp1</span>)|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux0_aux">double_round_plus_aux0_aux</a></span> <span class="id">fexp1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[| |<span class="tactic">assumption</span>|<span class="tactic">assumption</span>]; <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp3</span>; <span class="tactic">omega</span>.<br/>
- <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;&lt;&nbsp;ln_beta&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux0_aux">double_round_plus_aux0_aux</a></span> <span class="id">fexp1</span>); [| |<span class="tactic">assumption</span>|<span class="tactic">assumption</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_plus_disj">ln_beta_plus_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hyx</span>) <span class="kwd">as</span> [<span class="id">Lxy</span>|<span class="id">Lxy</span>]; <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">Hexp2</span>; <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le">ln_beta_le</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span>) <span class="kwd">in</span> <span class="id">Hyx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_plus_disj">ln_beta_plus_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hyx</span>) <span class="kwd">as</span> [<span class="id">Lxy</span>|<span class="id">Lxy</span>]; <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp3</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hexp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus_aux1_aux">double_round_plus_aux1_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;0 &lt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#k">k</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5797')">Proof.</div>
<div class="proofscript" id="proof5797">
<span class="tactic">assert</span> (<span class="id">Hbeta</span> : (2 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span>).<br/>
{ <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="kwd">as</span> (<span class="id">beta_val</span>,<span class="id">beta_prop</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>. }<br/>
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">Hk</span> <span class="id">fexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Hln</span> <span class="id">Hlxy</span> <span class="id">Fx</span>.<br/>
<span class="id">revert</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hlxy</span>.<br/>
<span class="tactic">set</span> (<span class="id">mx</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))).<br/>
<span class="tactic">intros</span> <span class="id">Fx</span>.<br/>
<span class="tactic">assert</span> (<span class="id">R</span> : (<span class="id">x</span> + <span class="id">y</span>) * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">mx</span> + <span class="id">y</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
{ <span class="tactic">rewrite</span> <span class="id">Fx</span> <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">bpow_simplify</span>. }<br/>
<span class="tactic">rewrite</span> <span class="id">R</span>.<br/>
<span class="tactic">assert</span> (<span class="id">LB</span> : 0 &lt; <span class="id">y</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
{ <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span> <span class="id">y</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>]. }<br/>
<span class="tactic">assert</span> (<span class="id">UB</span> : <span class="id">y</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)) &lt; / <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> ^ <span class="id">k</span>)).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="id">y</span>) <span class="tactic">at</span> 1; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - <span class="id">k</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))%<span class="id">R</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_opp">bpow_opp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">casetype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>; <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_irrefl">Zlt_irrefl</a></span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_trans">Zlt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hk</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_neg_0">Zlt_neg_0</a></span>. }<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_imp">Zfloor_imp</a></span> <span class="id">mx</span>).<br/>
{ <span class="tactic">split</span>; <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">R</span>; <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>].<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">R</span>; <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">UB</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_opp">bpow_opp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [<span class="id">right</span>|<span class="tactic">omega</span>]. }<br/>
<span class="tactic">split</span>.<br/>
- <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span> <span class="tactic">at</span> 1; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="tactic">at</span> 1; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus_aux1">double_round_plus_aux1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 2)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5798')">Proof.</div>
<div class="proofscript" id="proof5798">
<span class="tactic">assert</span> (<span class="id">Hbeta</span> : (2 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span>).<br/>
{ <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="kwd">as</span> (<span class="id">beta_val</span>,<span class="id">beta_prop</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>. }<br/>
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Hly</span> <span class="id">Fx</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Lxy</span> : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> + <span class="id">y</span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_plus_separated">ln_beta_plus_separated</a></span> <span class="id">fexp1</span>); [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>| |<span class="tactic">omega</span>]|].<br/>
<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">_</span>,(<span class="id">_</span>,<span class="id">Hexp4</span>))).<br/>
<span class="tactic">assert</span> (<span class="id">Hf2</span> : (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>|].<br/>
<span class="tactic">assert</span> (<span class="id">Bpow2</span> : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 2) &lt;= / 2 * / 2).<br/>
{ <span class="tactic">replace</span> (/2 * /2) <span class="kwd">with</span> (/4) <span class="tactic">by</span> <span class="id">field</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_opp">bpow_opp</a></span> <span class="id">_</span> 2).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span> (2 * 2) (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> * (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> * 1))).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat">Zmult_le_compat</a></span>; <span class="tactic">omega</span>. }<br/>
<span class="tactic">assert</span> (<span class="id">P2</span> : (0 &lt; 2)%<span class="id">Z</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_lt_mid">double_round_lt_mid</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
- <span class="tactic">exact</span> <span class="id">Vfexp2</span>.<br/>
- <span class="id">lra</span>.<br/>
- <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|].<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> + <span class="id">y</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux1_aux">double_round_plus_aux1_aux</a></span> 2 <span class="id">P2</span> <span class="id">fexp1</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Py</span> <span class="id">Hly</span> <span class="id">Lxy</span> <span class="id">Fx</span>))).<br/>
&nbsp;&nbsp;<span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_0_compat">Rplus_lt_0_compat</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Bpow2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span> (/ 2)) <span class="tactic">at</span> 3.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>; <span class="id">lra</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_0_compat">Rplus_lt_0_compat</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hf2</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> + <span class="id">y</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span>; <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux1_aux">double_round_plus_aux1_aux</a></span> 2 <span class="id">P2</span> <span class="id">fexp1</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Py</span> <span class="id">Hly</span> <span class="id">Lxy</span> <span class="id">Fx</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_0_compat">Rplus_lt_0_compat</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">rewrite</span> <span class="id">Lxy</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Bpow2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span> (/ 2)) <span class="tactic">at</span> 3; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_minus_distr_l">Rmult_minus_distr_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> (- 1)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>) <span class="kwd">with</span> (- (/ 2)) <span class="tactic">by</span> <span class="id">lra</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 2 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>; <span class="tactic">omega</span>. }<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus_aux2">double_round_plus_aux2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5799')">Proof.</div>
<div class="proofscript" id="proof5799">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Hyx</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 2)) <span class="kwd">as</span> [<span class="id">Hly</span>|<span class="id">Hly</span>].<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;&lt;=&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;-&nbsp;2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux1">double_round_plus_aux1</a></span>.<br/>
- <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;-&nbsp;2&nbsp;&lt;&nbsp;ln_beta&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;+ <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">Hf1</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 1 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux0">double_round_plus_aux0</a></span> <span class="id">fexp1</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus_aux">double_round_plus_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5800')">Proof.</div>
<div class="proofscript" id="proof5800">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Nnx</span> <span class="id">Nny</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Nzx</span>].<br/>
- <span class="comment">(*&nbsp;x&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">_</span>,(<span class="id">_</span>,<span class="id">Hexp4</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zx</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;+ <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">intros</span> <span class="id">_</span>; <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Fy</span>.<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Zy</span>|<span class="id">Nzy</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">_</span>,(<span class="id">_</span>,<span class="id">Hexp4</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zy</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">intros</span> <span class="id">_</span>; <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Px</span> : 0 &lt; <span class="id">x</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Py</span> : 0 &lt; <span class="id">y</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">x</span> <span class="id">y</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux2">double_round_plus_aux2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux2">double_round_plus_aux2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_aux0_aux">double_round_minus_aux0_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))%<span class="id">Z</span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))%<span class="id">Z</span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5801')">Proof.</div>
<div class="proofscript" id="proof5801">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">x</span> <span class="id">y</span>.<br/>
<span class="tactic">replace</span> (<span class="id">x</span> - <span class="id">y</span>)%<span class="id">R</span> <span class="kwd">with</span> (<span class="id">x</span> + (- <span class="id">y</span>))%<span class="id">R</span>; [|<span class="tactic">ring</span>].<br/>
<span class="tactic">intros</span> <span class="id">Hlnx</span> <span class="id">Hlny</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_opp">ln_beta_opp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">y</span>) <span class="kwd">in</span> <span class="id">Hlny</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fy</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux0_aux">double_round_plus_aux0_aux</a></span> <span class="id">fexp1</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_aux0">double_round_minus_aux0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5802')">Proof.</div>
<div class="proofscript" id="proof5802">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hyx</span> <span class="id">Hln</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Px</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> 0 <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span> <span class="id">Hyx</span>).<br/>
<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">Hexp1</span>,(<span class="id">_</span>,(<span class="id">Hexp3</span>,<span class="id">Hexp4</span>))).<br/>
<span class="tactic">assert</span> (<span class="id">Lyx</span> : (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le">ln_beta_le</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>]|].<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_ge_cases">Z.lt_ge_cases</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 2) (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)) <span class="kwd">as</span> [<span class="id">Hlt</span>|<span class="id">Hge</span>].<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;x&nbsp;-&nbsp;2&nbsp;&lt;&nbsp;ln_beta&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hor</span> : (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span> = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span> = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1 :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hor</span> <span class="kwd">as</span> [<span class="id">Heq</span>|<span class="id">Heqm1</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;=&nbsp;ln_beta&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux0_aux">double_round_minus_aux0_aux</a></span> <span class="id">fexp1</span>); [| |<span class="tactic">exact</span> <span class="id">Fx</span>|<span class="tactic">exact</span> <span class="id">Fy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hexp4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus">ln_beta_minus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hexp4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus">ln_beta_minus</a></span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;=&nbsp;ln_beta&nbsp;x&nbsp;-&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux0_aux">double_round_minus_aux0_aux</a></span> <span class="id">fexp1</span>); [| |<span class="tactic">exact</span> <span class="id">Fx</span>|<span class="tactic">exact</span> <span class="id">Fy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hexp4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus">ln_beta_minus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">Heqm1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hexp4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_compat_r">Zplus_le_compat_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus">ln_beta_minus</a></span>.<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;&lt;=&nbsp;ln_beta&nbsp;x&nbsp;-&nbsp;2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_minus_disj">ln_beta_minus_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Hge</span>) <span class="kwd">as</span> [<span class="id">Lxmy</span>|<span class="id">Lxmy</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ln_beta&nbsp;(x&nbsp;-&nbsp;y)&nbsp;=&nbsp;ln_beta&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux0_aux">double_round_minus_aux0_aux</a></span> <span class="id">fexp1</span>); [| |<span class="tactic">exact</span> <span class="id">Fx</span>|<span class="tactic">exact</span> <span class="id">Fy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hexp4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Lxmy</span>; <span class="tactic">apply</span> <span class="id">Hexp3</span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ln_beta&nbsp;(x&nbsp;-&nbsp;y)&nbsp;=&nbsp;ln_beta&nbsp;x&nbsp;-&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux0_aux">double_round_minus_aux0_aux</a></span> <span class="id">fexp1</span>); [| |<span class="tactic">exact</span> <span class="id">Fx</span>|<span class="tactic">exact</span> <span class="id">Fy</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Lxmy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hexp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>); [|<span class="tactic">ring</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hexp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>); [|<span class="tactic">ring</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_aux1">double_round_minus_aux1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 2)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)) - 1 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5803')">Proof.</div>
<div class="proofscript" id="proof5803">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span>  <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hyx</span> <span class="id">Hln</span> <span class="id">Hln</span>' <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Px</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> 0 <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span> <span class="id">Hyx</span>).<br/>
<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">Hexp1</span>,(<span class="id">Hexp2</span>,(<span class="id">Hexp3</span>,<span class="id">Hexp4</span>))).<br/>
<span class="tactic">assert</span> (<span class="id">Lyx</span> : (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le">ln_beta_le</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>]|].<br/>
<span class="tactic">assert</span> (<span class="id">Hfx</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">assert</span> (<span class="id">Hfy</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux0_aux">double_round_minus_aux0_aux</a></span> <span class="id">fexp1</span>); [| |<span class="tactic">exact</span> <span class="id">Fx</span>|<span class="tactic">exact</span> <span class="id">Fy</span>].<br/>
- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>))).<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">omega</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp3</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_aux2_aux">double_round_minus_aux2_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) - (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5804')">Proof.</div>
<div class="proofscript" id="proof5804">
<span class="tactic">intros</span> <span class="id">fexp</span> <span class="id">Vfexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hxy</span> <span class="id">Hly</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Px</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> 0 <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span> <span class="id">Hxy</span>).<br/>
<span class="id">revert</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">set</span> (<span class="id">mx</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))).<br/>
<span class="tactic">intro</span> <span class="id">Fx</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hfx</span> : (<span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">assert</span> (<span class="id">Hfy</span> : (<span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1)) <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
- <span class="comment">(*&nbsp;bpow&nbsp;(ln_beta&nbsp;x&nbsp;-&nbsp;1)&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Lxy</span> : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_minus_separated">ln_beta_minus_separated</a></span> <span class="id">fexp</span>); [| | | | | |<span class="tactic">omega</span>]|].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Rxy</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id">x</span> - <span class="id">y</span>) = <span class="id">x</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="tactic">rewrite</span> <span class="id">Fx</span> <span class="tactic">at</span> 1; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_eq_compat_r">Rmult_eq_compat_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Fx</span> <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_imp">Zceil_imp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="tactic">at</span> 1; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">_</span>)) <span class="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span> <span class="id">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Rxy</span>; <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;=&nbsp;bpow&nbsp;(ln_beta&nbsp;x&nbsp;-&nbsp;1)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Xpow</span> : <span class="id">x</span> = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1)).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>; [<span class="tactic">exact</span> <span class="id">Hx</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">Hex</span>); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="id">x</span>); [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Lxy</span> : (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1 :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_antisym">Zle_antisym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le_bpow">ln_beta_le_bpow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_eq_contra">Rminus_eq_contra</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">intro</span> <span class="id">Hx</span>'; <span class="tactic">rewrite</span> <span class="id">Hx</span>' <span class="kwd">in</span> <span class="id">Hxy</span>; <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> <span class="id">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>; <span class="id">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus_lb">ln_beta_minus_lb</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hfx1</span> : (<span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)); [|<span class="tactic">omega</span>]|].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Rxy</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id">x</span> - <span class="id">y</span>) &lt;= <span class="id">x</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">Xpow</span> <span class="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1)%<span class="id">Z</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id">_</span> - <span class="id">_</span> - <span class="id">_</span>)); [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_glb">Zceil_glb</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Xpow</span> <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>)) <span class="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span> <span class="id">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>. }<br/>
&nbsp;&nbsp;<span class="id">lra</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_aux2">double_round_minus_aux2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 2)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)) - 2)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5805')">Proof.</div>
<div class="proofscript" id="proof5805">
<span class="tactic">assert</span> (<span class="id">Hbeta</span> : (2 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span>).<br/>
{ <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="kwd">as</span> (<span class="id">beta_val</span>,<span class="id">beta_prop</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>. }<br/>
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hxy</span> <span class="id">Hly</span> <span class="id">Hly</span>' <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Px</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> 0 <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span> <span class="id">Hxy</span>).<br/>
<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">_</span>,(<span class="id">_</span>,<span class="id">Hexp4</span>))).<br/>
<span class="tactic">assert</span> (<span class="id">Hf2</span> : (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>|].<br/>
<span class="tactic">assert</span> (<span class="id">Hfx</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">assert</span> (<span class="id">Bpow2</span> : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 2) &lt;= / 2 * / 2).<br/>
{ <span class="tactic">replace</span> (/2 * /2) <span class="kwd">with</span> (/4) <span class="tactic">by</span> <span class="id">field</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_opp">bpow_opp</a></span> <span class="id">_</span> 2).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span> (2 * 2) (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> * (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> * 1))).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat">Zmult_le_compat</a></span>; <span class="tactic">omega</span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Ly</span> : <span class="id">y</span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>. }<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_gt_mid">double_round_gt_mid</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
- <span class="tactic">exact</span> <span class="id">Vfexp2</span>.<br/>
- <span class="id">lra</span>.<br/>
- <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
- <span class="tactic">assert</span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>))%<span class="id">Z</span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1)).<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)); [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|].<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus_lb">ln_beta_minus_lb</a></span>; [| |<span class="tactic">omega</span>].<br/>
- <span class="tactic">unfold</span> <span class="id">midp</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (/ 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> (<span class="id">x</span> - <span class="id">y</span>) - (<span class="id">x</span> - <span class="id">y</span>))).<br/>
&nbsp;&nbsp;<span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id">x</span> - <span class="id">y</span>) - (<span class="id">x</span> - <span class="id">y</span>)) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 2)).<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> <span class="id">y</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux2_aux">double_round_minus_aux2_aux</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>; <span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Ly</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_not_eq">sym_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_minus">Rgt_minus</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - 2)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 1 - 1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat">Rmult_le_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">change</span> 2 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>; <span class="tactic">omega</span>.<br/>
- <span class="tactic">intro</span> <span class="id">Hf2</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">midp</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (/ 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> (<span class="id">x</span> - <span class="id">y</span>) - (<span class="id">x</span> - <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> (<span class="id">x</span> - <span class="id">y</span>))).<br/>
&nbsp;&nbsp;<span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id">x</span> - <span class="id">y</span>) - (<span class="id">x</span> - <span class="id">y</span>)) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> <span class="id">y</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux2_aux">double_round_minus_aux2_aux</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>; <span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Ly</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 2));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - 2)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 1 - 1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_minus_distr_l">Rmult_minus_distr_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat">Rmult_le_compat</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">change</span> 2 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">try</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_minus">Rgt_minus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>))))); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">replace</span> (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 1)) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 1) + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 1)) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span> <span class="kwd">in</span> <span class="id">Hbeta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hbeta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.setoid_ring.RealField.html#Rlt_0_2">Rlt_0_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_aux3">double_round_minus_aux3</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5806')">Proof.</div>
<div class="proofscript" id="proof5806">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hyx</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Px</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> 0 <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span> <span class="id">Hyx</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">y</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hy</span>|<span class="id">Hy</span>].<br/>
- <span class="comment">(*&nbsp;y&nbsp;=&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hy</span>; <span class="tactic">replace</span> (<span class="id">x</span> - <span class="id">x</span>) <span class="kwd">with</span> 0 <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
- <span class="comment">(*&nbsp;y&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hyx</span>' : <span class="id">y</span> &lt; <span class="id">x</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 2)) <span class="kwd">as</span> [<span class="id">Hly</span>|<span class="id">Hly</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;&lt;=&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;-&nbsp;2&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 2))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">Hly</span>'|<span class="id">Hly</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;&lt;=&nbsp;fexp1&nbsp;(ln_beta&nbsp;(x&nbsp;-&nbsp;y))&nbsp;-&nbsp;2&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux2">double_round_minus_aux2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;(x&nbsp;-&nbsp;y))&nbsp;-&nbsp;2&nbsp;&lt;&nbsp;ln_beta&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id">Hf1</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 1 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux1">double_round_minus_aux1</a></span> <span class="id">fexp1</span>). }<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">assert</span> (<span class="id">Hf1</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 1 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux0">double_round_minus_aux0</a></span> <span class="id">fexp1</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_aux">double_round_minus_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5807')">Proof.</div>
<div class="proofscript" id="proof5807">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Nnx</span> <span class="id">Nny</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Nzx</span>].<br/>
- <span class="comment">(*&nbsp;x&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zx</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;* <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;* <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">_</span>,(<span class="id">_</span>,<span class="id">Hexp4</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">intros</span> <span class="id">_</span>; <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Fy</span>.<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Zy</span>|<span class="id">Nzy</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zy</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">_</span>,(<span class="id">_</span>,<span class="id">Hexp4</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">intros</span> <span class="id">_</span>; <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Px</span> : 0 &lt; <span class="id">x</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Py</span> : 0 &lt; <span class="id">y</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">x</span> <span class="id">y</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">x</span> - <span class="id">y</span>) <span class="kwd">with</span> (- (<span class="id">y</span> - <span class="id">x</span>)) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_eq_compat">Ropp_eq_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux3">double_round_minus_aux3</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;y&nbsp;&lt;=&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux3">double_round_minus_aux3</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus">double_round_plus</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5808')">Proof.</div>
<div class="proofscript" id="proof5808">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Sx</span>|<span class="id">Sx</span>]; <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Sy</span>|<span class="id">Sy</span>].<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;0,&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">x</span> + <span class="id">y</span>) <span class="kwd">with</span> (- (- <span class="id">x</span> - <span class="id">y</span>)); [|<span class="tactic">ring</span>].<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_eq_compat">Ropp_eq_compat</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Px</span> : 0 &lt;= - <span class="id">x</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Py</span> : 0 &lt;= - <span class="id">y</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux">double_round_plus_aux</a></span>.<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;0,&nbsp;0&nbsp;&lt;=&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">x</span> + <span class="id">y</span>) <span class="kwd">with</span> (<span class="id">y</span> - (- <span class="id">x</span>)); [|<span class="tactic">ring</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Px</span> : 0 &lt;= - <span class="id">x</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux">double_round_minus_aux</a></span>.<br/>
- <span class="comment">(*&nbsp;0&nbsp;&lt;=&nbsp;x,&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">x</span> + <span class="id">y</span>) <span class="kwd">with</span> (<span class="id">x</span> - (- <span class="id">y</span>)); [|<span class="tactic">ring</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Py</span> : 0 &lt;= - <span class="id">y</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux">double_round_minus_aux</a></span>.<br/>
- <span class="comment">(*&nbsp;0&nbsp;&lt;=&nbsp;x,&nbsp;0&nbsp;&lt;=&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux">double_round_plus_aux</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus">double_round_minus</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5809')">Proof.</div>
<div class="proofscript" id="proof5809">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fy</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus">double_round_plus</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_FLX">Double_round_plus_FLX</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_FLX.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLX.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FLX_double_round_plus_hyp">FLX_double_round_plus_hyp</a></span> :<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLX.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5810')">Proof.</div>
<div class="proofscript" id="proof5810">
<span class="tactic">intros</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>; [|<span class="tactic">split</span>]];<br/>
<span class="tactic">intros</span> <span class="id">ex</span> <span class="id">ey</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_plus_FLX">double_round_plus_FLX</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLX.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>') <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5811')">Proof.</div>
<div class="proofscript" id="proof5811">
<span class="tactic">intros</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus">double_round_plus</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLX_double_round_plus_hyp">FLX_double_round_plus_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_minus_FLX">double_round_minus_FLX</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLX.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>') <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5812')">Proof.</div>
<div class="proofscript" id="proof5812">
<span class="tactic">intros</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus">double_round_minus</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLX_double_round_plus_hyp">FLX_double_round_plus_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLX">Double_round_plus_FLX</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_FLT">Double_round_plus_FLT</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLT</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">emin</span>' <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FLT_double_round_plus_hyp">FLT_double_round_plus_hyp</a></span> :<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span>)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5813')">Proof.</div>
<div class="proofscript" id="proof5813">
<span class="tactic">intros</span> <span class="id">Hemin</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>; [|<span class="tactic">split</span>]]; <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">ey</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> + 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_plus_FLT">double_round_plus_FLT</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span>)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5814')">Proof.</div>
<div class="proofscript" id="proof5814">
<span class="tactic">intros</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus">double_round_plus</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLT_double_round_plus_hyp">FLT_double_round_plus_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_minus_FLT">double_round_minus_FLT</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span>)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5815')">Proof.</div>
<div class="proofscript" id="proof5815">
<span class="tactic">intros</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus">double_round_minus</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLT_double_round_plus_hyp">FLT_double_round_plus_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FLT">Double_round_plus_FLT</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_FTZ">Double_round_plus_FTZ</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FTZ</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">emin</span>' <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FTZ_double_round_plus_hyp">FTZ_double_round_plus_hyp</a></span> :<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' + <span class="id">prec</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span> + 1)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5816')">Proof.</div>
<div class="proofscript" id="proof5816">
<span class="tactic">intros</span> <span class="id">Hemin</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> *.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_hyp">double_round_plus_hyp</a></span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>; [|<span class="tactic">split</span>]]; <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">ey</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> + 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_plus_FTZ">double_round_plus_FTZ</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' + <span class="id">prec</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span> + 1)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5817')">Proof.</div>
<div class="proofscript" id="proof5817">
<span class="tactic">intros</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus">double_round_plus</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FTZ_double_round_plus_hyp">FTZ_double_round_plus_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_minus_FTZ">double_round_minus_FTZ</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' + <span class="id">prec</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span> + 1)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5818')">Proof.</div>
<div class="proofscript" id="proof5818">
<span class="tactic">intros</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus">double_round_minus</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FTZ_double_round_plus_hyp">FTZ_double_round_plus_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_FTZ">Double_round_plus_FTZ</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_beta_ge_3">Double_round_plus_beta_ge_3</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> <span class="id">fexp1</span> <span class="id">fexp2</span> :=<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> + 1) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - 1) + 1 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - 1 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus_beta_ge_3_aux0">double_round_plus_beta_ge_3_aux0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>), <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5819')">Proof.</div>
<div class="proofscript" id="proof5819">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hyx</span> <span class="id">Hln</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Px</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> 0 <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span> <span class="id">Hyx</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Nny</span> : (0 &lt;= <span class="id">y</span>)%<span class="id">R</span>); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>|].<br/>
<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">Hexp2</span>,(<span class="id">Hexp3</span>,<span class="id">Hexp4</span>))).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_gt_cases">Z.le_gt_cases</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))) <span class="kwd">as</span> [<span class="id">Hle</span>|<span class="id">Hgt</span>].<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;&lt;=&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Lxy</span> : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> + <span class="id">y</span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_plus_separated">ln_beta_plus_separated</a></span> <span class="id">fexp1</span>)|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux0_aux">double_round_plus_aux0_aux</a></span> <span class="id">fexp1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[| |<span class="tactic">assumption</span>|<span class="tactic">assumption</span>]; <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp3</span>; <span class="tactic">omega</span>.<br/>
- <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;&lt;&nbsp;ln_beta&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux0_aux">double_round_plus_aux0_aux</a></span> <span class="id">fexp1</span>); [| |<span class="tactic">assumption</span>|<span class="tactic">assumption</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_plus_disj">ln_beta_plus_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hyx</span>) <span class="kwd">as</span> [<span class="id">Lxy</span>|<span class="id">Lxy</span>]; <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">Hexp2</span>; <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le">ln_beta_le</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span>) <span class="kwd">in</span> <span class="id">Hyx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_plus_disj">ln_beta_plus_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hyx</span>) <span class="kwd">as</span> [<span class="id">Lxy</span>|<span class="id">Lxy</span>]; <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp3</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hexp2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus_beta_ge_3_aux1">double_round_plus_beta_ge_3_aux1</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5820')">Proof.</div>
<div class="proofscript" id="proof5820">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Hly</span> <span class="id">Fx</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Lxy</span> : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> + <span class="id">y</span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_plus_separated">ln_beta_plus_separated</a></span> <span class="id">fexp1</span>); [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>| |<span class="tactic">omega</span>]|].<br/>
<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">_</span>,(<span class="id">_</span>,<span class="id">Hexp4</span>))).<br/>
<span class="tactic">assert</span> (<span class="id">Hf2</span> : (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>|].<br/>
<span class="tactic">assert</span> (<span class="id">Bpow3</span> : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 1) &lt;= / 3).<br/>
{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">change</span> 3 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 3); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>. }<br/>
<span class="tactic">assert</span> (<span class="id">P1</span> : (0 &lt; 1)%<span class="id">Z</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_lt_mid">double_round_lt_mid</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
- <span class="tactic">exact</span> <span class="id">Vfexp2</span>.<br/>
- <span class="id">lra</span>.<br/>
- <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|].<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> + <span class="id">y</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux1_aux">double_round_plus_aux1_aux</a></span> 1 <span class="id">P1</span> <span class="id">fexp1</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Py</span> <span class="id">Hly</span> <span class="id">Lxy</span> <span class="id">Fx</span>))).<br/>
&nbsp;&nbsp;<span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_0_compat">Rplus_lt_0_compat</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Bpow3</span>); <span class="id">lra</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_0_compat">Rplus_lt_0_compat</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hf2</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> + <span class="id">y</span>))); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_minus_distr_l">Rmult_minus_distr_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_aux1_aux">double_round_plus_aux1_aux</a></span> 1 <span class="id">P1</span> <span class="id">fexp1</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Py</span> <span class="id">Hly</span> <span class="id">Lxy</span> <span class="id">Fx</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_0_compat">Rplus_lt_0_compat</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">rewrite</span> <span class="id">Lxy</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> (/ 2)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Bpow3</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (/ 2 * (2 / 3)); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> (- 1)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>) <span class="kwd">with</span> (- (/ 3)) <span class="tactic">by</span> <span class="id">lra</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 1)); [<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>; <span class="tactic">omega</span>|].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus_beta_ge_3_aux2">double_round_plus_beta_ge_3_aux2</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5821')">Proof.</div>
<div class="proofscript" id="proof5821">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hyx</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Px</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> 0 <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span> <span class="id">Hyx</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 1)) <span class="kwd">as</span> [<span class="id">Hly</span>|<span class="id">Hly</span>].<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;&lt;=&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;-&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_aux1">double_round_plus_beta_ge_3_aux1</a></span>.<br/>
- <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;-&nbsp;1&nbsp;&lt;&nbsp;ln_beta&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;+ <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">Hf1</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_aux0">double_round_plus_beta_ge_3_aux0</a></span> <span class="id">fexp1</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus_beta_ge_3_aux">double_round_plus_beta_ge_3_aux</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5822')">Proof.</div>
<div class="proofscript" id="proof5822">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Nnx</span> <span class="id">Nny</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Nzx</span>].<br/>
- <span class="comment">(*&nbsp;x&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">_</span>,(<span class="id">_</span>,<span class="id">Hexp4</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zx</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;+ <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">intros</span> <span class="id">_</span>; <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Fy</span>.<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Zy</span>|<span class="id">Nzy</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">_</span>,(<span class="id">_</span>,<span class="id">Hexp4</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zy</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">intros</span> <span class="id">_</span>; <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Px</span> : 0 &lt; <span class="id">x</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Py</span> : 0 &lt; <span class="id">y</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">x</span> <span class="id">y</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_aux2">double_round_plus_beta_ge_3_aux2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_aux2">double_round_plus_beta_ge_3_aux2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_beta_ge_3_aux0">double_round_minus_beta_ge_3_aux0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5823')">Proof.</div>
<div class="proofscript" id="proof5823">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hyx</span> <span class="id">Hln</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Px</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> 0 <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span> <span class="id">Hyx</span>).<br/>
<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">Hexp1</span>,(<span class="id">_</span>,(<span class="id">Hexp3</span>,<span class="id">Hexp4</span>))).<br/>
<span class="tactic">assert</span> (<span class="id">Lyx</span> : (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le">ln_beta_le</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>]|].<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_ge_cases">Z.lt_ge_cases</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 2) (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)) <span class="kwd">as</span> [<span class="id">Hlt</span>|<span class="id">Hge</span>].<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;x&nbsp;-&nbsp;2&nbsp;&lt;&nbsp;ln_beta&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hor</span> : (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span> = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span> = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1 :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hor</span> <span class="kwd">as</span> [<span class="id">Heq</span>|<span class="id">Heqm1</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;=&nbsp;ln_beta&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux0_aux">double_round_minus_aux0_aux</a></span> <span class="id">fexp1</span>); [| |<span class="tactic">exact</span> <span class="id">Fx</span>|<span class="tactic">exact</span> <span class="id">Fy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hexp4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus">ln_beta_minus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hexp4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus">ln_beta_minus</a></span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;=&nbsp;ln_beta&nbsp;x&nbsp;-&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux0_aux">double_round_minus_aux0_aux</a></span> <span class="id">fexp1</span>); [| |<span class="tactic">exact</span> <span class="id">Fx</span>|<span class="tactic">exact</span> <span class="id">Fy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hexp4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus">ln_beta_minus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">Heqm1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hexp4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_compat_r">Zplus_le_compat_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus">ln_beta_minus</a></span>.<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;&lt;=&nbsp;ln_beta&nbsp;x&nbsp;-&nbsp;2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_minus_disj">ln_beta_minus_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Hge</span>) <span class="kwd">as</span> [<span class="id">Lxmy</span>|<span class="id">Lxmy</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ln_beta&nbsp;(x&nbsp;-&nbsp;y)&nbsp;=&nbsp;ln_beta&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux0_aux">double_round_minus_aux0_aux</a></span> <span class="id">fexp1</span>); [| |<span class="tactic">exact</span> <span class="id">Fx</span>|<span class="tactic">exact</span> <span class="id">Fy</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hexp4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Lxmy</span>; <span class="tactic">apply</span> <span class="id">Hexp3</span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ln_beta&nbsp;(x&nbsp;-&nbsp;y)&nbsp;=&nbsp;ln_beta&nbsp;x&nbsp;-&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux0_aux">double_round_minus_aux0_aux</a></span> <span class="id">fexp1</span>); [| |<span class="tactic">exact</span> <span class="id">Fx</span>|<span class="tactic">exact</span> <span class="id">Fy</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Lxmy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hexp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>); [|<span class="tactic">ring</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Hexp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>); [|<span class="tactic">ring</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_beta_ge_3_aux1">double_round_minus_beta_ge_3_aux1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5824')">Proof.</div>
<div class="proofscript" id="proof5824">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span>  <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hyx</span> <span class="id">Hln</span> <span class="id">Hln</span>' <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Px</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> 0 <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span> <span class="id">Hyx</span>).<br/>
<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">Hexp1</span>,(<span class="id">Hexp2</span>,(<span class="id">Hexp3</span>,<span class="id">Hexp4</span>))).<br/>
<span class="tactic">assert</span> (<span class="id">Lyx</span> : (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le">ln_beta_le</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>]|].<br/>
<span class="tactic">assert</span> (<span class="id">Hfx</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">assert</span> (<span class="id">Hfy</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux0_aux">double_round_minus_aux0_aux</a></span> <span class="id">fexp1</span>); [| |<span class="tactic">exact</span> <span class="id">Fx</span>|<span class="tactic">exact</span> <span class="id">Fy</span>].<br/>
- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>))).<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">omega</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp3</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_beta_ge_3_aux2">double_round_minus_beta_ge_3_aux2</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5825')">Proof.</div>
<div class="proofscript" id="proof5825">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hxy</span> <span class="id">Hly</span> <span class="id">Hly</span>' <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Px</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> 0 <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span> <span class="id">Hxy</span>).<br/>
<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">_</span>,(<span class="id">_</span>,<span class="id">Hexp4</span>))).<br/>
<span class="tactic">assert</span> (<span class="id">Hf2</span> : (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>|].<br/>
<span class="tactic">assert</span> (<span class="id">Hfx</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">assert</span> (<span class="id">Bpow3</span> : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 1) &lt;= / 3).<br/>
{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="id">change</span> 3 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 3); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Ly</span> : <span class="id">y</span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>. }<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_gt_mid">double_round_gt_mid</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
- <span class="tactic">exact</span> <span class="id">Vfexp2</span>.<br/>
- <span class="id">lra</span>.<br/>
- <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
- <span class="tactic">assert</span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>))%<span class="id">Z</span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1)).<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)); [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|].<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_minus_lb">ln_beta_minus_lb</a></span>; [| |<span class="tactic">omega</span>].<br/>
- <span class="tactic">unfold</span> <span class="id">midp</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (/ 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> (<span class="id">x</span> - <span class="id">y</span>) - (<span class="id">x</span> - <span class="id">y</span>))).<br/>
&nbsp;&nbsp;<span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id">x</span> - <span class="id">y</span>) - (<span class="id">x</span> - <span class="id">y</span>)) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 1)).<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> <span class="id">y</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux2_aux">double_round_minus_aux2_aux</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Ly</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_minus">Rgt_minus</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">change</span> 2 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>; <span class="tactic">omega</span>.<br/>
- <span class="tactic">intro</span> <span class="id">Hf2</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">midp</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (/ 2 * (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> (<span class="id">x</span> - <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> (<span class="id">x</span> - <span class="id">y</span>)) - (<span class="id">x</span> - <span class="id">y</span>))).<br/>
&nbsp;&nbsp;<span class="id">ring_simplify</span>; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_minus_distr_l">Rmult_minus_distr_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id">x</span> - <span class="id">y</span>) - (<span class="id">x</span> - <span class="id">y</span>)) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> <span class="id">y</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_aux2_aux">double_round_minus_aux2_aux</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Ly</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 1));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">try</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_minus">Rgt_minus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (/ 3).<br/>
&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">change</span> 3 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 3); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">replace</span> (/ 3) <span class="kwd">with</span> (/ 2 * (2 / 3)) <span class="tactic">by</span> <span class="id">field</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> (- 1)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>) <span class="kwd">with</span> (- / 3) <span class="tactic">by</span> <span class="id">field</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 1)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">change</span> 3 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 3); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_beta_ge_3_aux3">double_round_minus_beta_ge_3_aux3</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5826')">Proof.</div>
<div class="proofscript" id="proof5826">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Py</span> <span class="id">Hyx</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Px</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> 0 <span class="id">y</span> <span class="id">x</span> <span class="id">Py</span> <span class="id">Hyx</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">y</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hy</span>|<span class="id">Hy</span>].<br/>
- <span class="comment">(*&nbsp;y&nbsp;=&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hy</span>; <span class="tactic">replace</span> (<span class="id">x</span> - <span class="id">x</span>) <span class="kwd">with</span> 0 <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
- <span class="comment">(*&nbsp;y&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hyx</span>' : <span class="id">y</span> &lt; <span class="id">x</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 1)) <span class="kwd">as</span> [<span class="id">Hly</span>|<span class="id">Hly</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;&lt;=&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;-&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) - 1))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">Hly</span>'|<span class="id">Hly</span>'].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;ln_beta&nbsp;y&nbsp;&lt;=&nbsp;fexp1&nbsp;(ln_beta&nbsp;(x&nbsp;-&nbsp;y))&nbsp;-&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_beta_ge_3_aux2">double_round_minus_beta_ge_3_aux2</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;(x&nbsp;-&nbsp;y))&nbsp;-&nbsp;1&nbsp;&lt;&nbsp;ln_beta&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">assert</span> (<span class="id">Hf1</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> - <span class="id">y</span>)) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_beta_ge_3_aux1">double_round_minus_beta_ge_3_aux1</a></span> <span class="id">fexp1</span>). }<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">assert</span> (<span class="id">Hf1</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_beta_ge_3_aux0">double_round_minus_beta_ge_3_aux0</a></span> <span class="id">fexp1</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_beta_ge_3_aux">double_round_minus_beta_ge_3_aux</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5827')">Proof.</div>
<div class="proofscript" id="proof5827">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Nnx</span> <span class="id">Nny</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Nzx</span>].<br/>
- <span class="comment">(*&nbsp;x&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zx</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;* <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;* <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">_</span>,(<span class="id">_</span>,<span class="id">Hexp4</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">intros</span> <span class="id">_</span>; <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Fy</span>.<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Zy</span>|<span class="id">Nzy</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zy</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hexp</span> <span class="kwd">as</span> (<span class="id">_</span>,(<span class="id">_</span>,(<span class="id">_</span>,<span class="id">Hexp4</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">intros</span> <span class="id">_</span>; <span class="tactic">apply</span> <span class="id">Hexp4</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Px</span> : 0 &lt; <span class="id">x</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Py</span> : 0 &lt; <span class="id">y</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">x</span> <span class="id">y</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">x</span> - <span class="id">y</span>) <span class="kwd">with</span> (- (<span class="id">y</span> - <span class="id">x</span>)) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_eq_compat">Ropp_eq_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_beta_ge_3_aux3">double_round_minus_beta_ge_3_aux3</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;y&nbsp;&lt;=&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_beta_ge_3_aux3">double_round_minus_beta_ge_3_aux3</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_plus_beta_ge_3">double_round_plus_beta_ge_3</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5828')">Proof.</div>
<div class="proofscript" id="proof5828">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Sx</span>|<span class="id">Sx</span>]; <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Sy</span>|<span class="id">Sy</span>].<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;0,&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">x</span> + <span class="id">y</span>) <span class="kwd">with</span> (- (- <span class="id">x</span> - <span class="id">y</span>)); [|<span class="tactic">ring</span>].<br/>
&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_eq_compat">Ropp_eq_compat</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Px</span> : 0 &lt;= - <span class="id">x</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Py</span> : 0 &lt;= - <span class="id">y</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_aux">double_round_plus_beta_ge_3_aux</a></span>.<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;0,&nbsp;0&nbsp;&lt;=&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">x</span> + <span class="id">y</span>) <span class="kwd">with</span> (<span class="id">y</span> - (- <span class="id">x</span>)); [|<span class="tactic">ring</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Px</span> : 0 &lt;= - <span class="id">x</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_beta_ge_3_aux">double_round_minus_beta_ge_3_aux</a></span>.<br/>
- <span class="comment">(*&nbsp;0&nbsp;&lt;=&nbsp;x,&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">x</span> + <span class="id">y</span>) <span class="kwd">with</span> (<span class="id">x</span> - (- <span class="id">y</span>)); [|<span class="tactic">ring</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Py</span> : 0 &lt;= - <span class="id">y</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_beta_ge_3_aux">double_round_minus_beta_ge_3_aux</a></span>.<br/>
- <span class="comment">(*&nbsp;0&nbsp;&lt;=&nbsp;x,&nbsp;0&nbsp;&lt;=&nbsp;y&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_aux">double_round_plus_beta_ge_3_aux</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_minus_beta_ge_3">double_round_minus_beta_ge_3</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5829')">Proof.</div>
<div class="proofscript" id="proof5829">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fy</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3">double_round_plus_beta_ge_3</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX">Double_round_plus_beta_ge_3_FLX</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FLX_double_round_plus_beta_ge_3_hyp">FLX_double_round_plus_beta_ge_3_hyp</a></span> :<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5830')">Proof.</div>
<div class="proofscript" id="proof5830">
<span class="tactic">intros</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>; [|<span class="tactic">split</span>]];<br/>
<span class="tactic">intros</span> <span class="id">ex</span> <span class="id">ey</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_plus_beta_ge_3_FLX">double_round_plus_beta_ge_3_FLX</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>') <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5831')">Proof.</div>
<div class="proofscript" id="proof5831">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3">double_round_plus_beta_ge_3</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Hbeta</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLX_double_round_plus_beta_ge_3_hyp">FLX_double_round_plus_beta_ge_3_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_minus_beta_ge_3_FLX">double_round_minus_beta_ge_3_FLX</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>') <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5832')">Proof.</div>
<div class="proofscript" id="proof5832">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_beta_ge_3">double_round_minus_beta_ge_3</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Hbeta</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLX_double_round_plus_beta_ge_3_hyp">FLX_double_round_plus_beta_ge_3_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLX">Double_round_plus_beta_ge_3_FLX</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT">Double_round_plus_beta_ge_3_FLT</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLT</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">emin</span>' <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FLT_double_round_plus_beta_ge_3_hyp">FLT_double_round_plus_beta_ge_3_hyp</a></span> :<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span>)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5833')">Proof.</div>
<div class="proofscript" id="proof5833">
<span class="tactic">intros</span> <span class="id">Hemin</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>; [|<span class="tactic">split</span>]]; <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">ey</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> + 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_plus_beta_ge_3_FLT">double_round_plus_beta_ge_3_FLT</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span>)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5834')">Proof.</div>
<div class="proofscript" id="proof5834">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3">double_round_plus_beta_ge_3</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Hbeta</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLT_double_round_plus_beta_ge_3_hyp">FLT_double_round_plus_beta_ge_3_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_minus_beta_ge_3_FLT">double_round_minus_beta_ge_3_FLT</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span>)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5835')">Proof.</div>
<div class="proofscript" id="proof5835">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_beta_ge_3">double_round_minus_beta_ge_3</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Hbeta</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLT_double_round_plus_beta_ge_3_hyp">FLT_double_round_plus_beta_ge_3_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FLT">Double_round_plus_beta_ge_3_FLT</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ">Double_round_plus_beta_ge_3_FTZ</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FTZ</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span> <span class="id"><a name="Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">emin</span>' <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FTZ_double_round_plus_beta_ge_3_hyp">FTZ_double_round_plus_beta_ge_3_hyp</a></span> :<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' + <span class="id">prec</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span> + 1)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5836')">Proof.</div>
<div class="proofscript" id="proof5836">
<span class="tactic">intros</span> <span class="id">Hemin</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> *.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3_hyp">double_round_plus_beta_ge_3_hyp</a></span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>; [|<span class="tactic">split</span>]]; <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">ey</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> + 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_plus_beta_ge_3_FTZ">double_round_plus_beta_ge_3_FTZ</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' + <span class="id">prec</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span> + 1)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5837')">Proof.</div>
<div class="proofscript" id="proof5837">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_plus_beta_ge_3">double_round_plus_beta_ge_3</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Hbeta</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FTZ_double_round_plus_beta_ge_3_hyp">FTZ_double_round_plus_beta_ge_3_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_minus_beta_ge_3_FTZ">double_round_minus_beta_ge_3_FTZ</a></span> :<br/>
&nbsp;&nbsp;(3 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' + <span class="id">prec</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span> + 1)%<span class="id">Z</span> -&gt; (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5838')">Proof.</div>
<div class="proofscript" id="proof5838">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_minus_beta_ge_3">double_round_minus_beta_ge_3</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Hbeta</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FTZ_double_round_plus_beta_ge_3_hyp">FTZ_double_round_plus_beta_ge_3_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3.Double_round_plus_beta_ge_3_FTZ">Double_round_plus_beta_ge_3_FTZ</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus.Double_round_plus_beta_ge_3">Double_round_plus_beta_ge_3</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_plus">Double_round_plus</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_mid_cases">double_round_mid_cases</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= / 2 * (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5839')">Proof.</div>
<div class="proofscript" id="proof5839">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2f1</span> <span class="id">Hf1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>, <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span>.<br/>
<span class="tactic">set</span> (<span class="id">rd</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">set</span> (<span class="id">u1</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>).<br/>
<span class="tactic">set</span> (<span class="id">u2</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>).<br/>
<span class="tactic">intros</span> <span class="id">Cmid</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Fx</span>|<span class="id">Nfx</span>].<br/>
- <span class="comment">(*&nbsp;generic_format&nbsp;beta&nbsp;fexp1&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>); [<span class="tactic">reflexivity</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span>); [<span class="tactic">omega</span>|].<br/>
- <span class="comment">(*&nbsp;~&nbsp;generic_format&nbsp;beta&nbsp;fexp1&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hceil</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> = <span class="id">rd</span> + <span class="id">u1</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_DN_ulp">round_UP_DN_ulp</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hf2</span>' : (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 1)%<span class="id">Z</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> (<span class="id">x</span> - <span class="id">rd</span>) (/ 2 * (<span class="id">u1</span> - <span class="id">u2</span>))).<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x&nbsp;-&nbsp;rd&nbsp;&lt;&nbsp;/&nbsp;2&nbsp;*&nbsp;(u1&nbsp;-&nbsp;u2)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_lt_mid_further_place">double_round_lt_mid_further_place</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span>. <span class="id">fold</span> <span class="id">rd</span>; <span class="id">fold</span> <span class="id">u1</span>; <span class="id">fold</span> <span class="id">u2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- <span class="id">rd</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_minus_distr_l">Rmult_minus_distr_l</a></span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;/&nbsp;2&nbsp;*&nbsp;(u1&nbsp;-&nbsp;u2)&nbsp;&lt;=&nbsp;x&nbsp;-&nbsp;rd&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> (/ 2 * (<span class="id">u1</span> + <span class="id">u2</span>)) (<span class="id">x</span> - <span class="id">rd</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;/&nbsp;2&nbsp;*&nbsp;(u1&nbsp;+&nbsp;u2)&nbsp;&lt;&nbsp;x&nbsp;-&nbsp;rd&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> - <span class="id">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; / 2 * (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">Hceil</span>; <span class="id">fold</span> <span class="id">u1</span>; <span class="id">fold</span> <span class="id">u2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lra</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_gt_mid_further_place">double_round_gt_mid_further_place</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">midp</span>'; <span class="id">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;x&nbsp;-&nbsp;rd&nbsp;&lt;=&nbsp;/&nbsp;2&nbsp;*&nbsp;(u1&nbsp;+&nbsp;u2)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Cmid</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_le">Rabs_le</a></span>; <span class="tactic">split</span>; <span class="id">lra</span>. }<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_sqrt">Double_round_sqrt</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="double_round_sqrt_hyp">double_round_sqrt_hyp</a></span> <span class="id">fexp1</span> <span class="id">fexp2</span> :=<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ex</span>, (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span>))%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span>, (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - 1))%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span>) &lt; 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - 2)%<span class="id">Z</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ln_beta_sqrt_disj">ln_beta_sqrt_disj</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> = 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1 :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span><br/>
&nbsp;&nbsp;\/ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> = 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5840')">Proof.</div>
<div class="proofscript" id="proof5840">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Px</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_sqrt">ln_beta_sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">x</span> <span class="id">Px</span>).<br/>
<span class="tactic">intro</span> <span class="id">H</span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_sqrt_aux">double_round_sqrt_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_hyp">double_round_sqrt_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;/ 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5841')">Proof.</div>
<div class="proofscript" id="proof5841">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2</span> <span class="id">Fx</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hbeta</span> : (2 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span>).<br/>
{ <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="kwd">as</span> (<span class="id">beta_val</span>,<span class="id">beta_prop</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>. }<br/>
<span class="tactic">set</span> (<span class="id">a</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">set</span> (<span class="id">u1</span> := <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">u2</span> := <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">b</span> := / 2 * (<span class="id">u1</span> - <span class="id">u2</span>)).<br/>
<span class="tactic">set</span> (<span class="id">b</span>' := / 2 * (<span class="id">u1</span> + <span class="id">u2</span>)).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span>; <span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">try</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_lt_R0">sqrt_lt_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_ge_lt">Rnot_ge_lt</a></span>; <span class="tactic">intro</span> <span class="id">H</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rge_le">Rge_le</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Fa</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">a</span>).<br/>
{ <span class="tactic">unfold</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_DN">valid_rnd_DN</a></span>. }<br/>
<span class="id">revert</span> <span class="id">Fa</span>; <span class="id">revert</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">set</span> (<span class="id">mx</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">ma</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">a</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">a</span>)))).<br/>
<span class="tactic">intros</span> <span class="id">Fx</span> <span class="id">Fa</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Nna</span> : 0 &lt;= <span class="id">a</span>).<br/>
{ <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">a</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_DN">valid_rnd_DN</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_pos">sqrt_pos</a></span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Phu1</span> : 0 &lt; / 2 * <span class="id">u1</span>).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>; [<span class="id">lra</span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>]. }<br/>
<span class="tactic">assert</span> (<span class="id">Phu2</span> : 0 &lt; / 2 * <span class="id">u2</span>).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>; [<span class="id">lra</span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>]. }<br/>
<span class="tactic">assert</span> (<span class="id">Pb</span> : 0 &lt; <span class="id">b</span>).<br/>
{ <span class="tactic">unfold</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span> (/ 2)).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_Rminus">Rlt_Rminus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id">u1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Pb</span>' : 0 &lt; <span class="id">b</span>').<br/>
{ <span class="id">now</span> <span class="tactic">unfold</span> <span class="id">b</span>'; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_plus_distr_l">Rmult_plus_distr_l</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_0_compat">Rplus_lt_0_compat</a></span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Hr</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span> &lt;= <span class="id">a</span> + <span class="id">b</span>').<br/>
{ <span class="tactic">unfold</span> <span class="id">b</span>'; <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> (- / 2 * <span class="id">u1</span> - <span class="id">a</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span> - (<span class="id">a</span> + / 2 * <span class="id">u1</span>)) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_le_inv">Rabs_le_inv</a></span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Hl</span> : <span class="id">a</span> + <span class="id">b</span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>).<br/>
{ <span class="tactic">unfold</span> <span class="id">b</span>; <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> (- / 2 * <span class="id">u1</span> - <span class="id">a</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">_</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span> - (<span class="id">a</span> + / 2 * <span class="id">u1</span>)) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse">Ropp_mult_distr_l_reverse</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_le_inv">Rabs_le_inv</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">H</span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Hf1</span> : (2 * <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span>)))%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_sqrt_disj">ln_beta_sqrt_disj</a></span> <span class="id">x</span> <span class="id">Px</span>) <span class="kwd">as</span> [<span class="id">H</span>'|<span class="id">H</span>']; <span class="tactic">rewrite</span> <span class="id">H</span>'; <span class="tactic">apply</span> <span class="id">Hexp</span>|].<br/>
<span class="tactic">assert</span> (<span class="id">Hlx</span> : (<span class="id">fexp1</span> (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) &lt; 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))%<span class="id">Z</span>).<br/>
{ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_sqrt_disj">ln_beta_sqrt_disj</a></span> <span class="id">x</span> <span class="id">Px</span>) <span class="kwd">as</span> [<span class="id">Hlx</span>|<span class="id">Hlx</span>].<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)); [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|].<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id">Hlx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]. }<br/>
<span class="tactic">assert</span> (<span class="id">Hsl</span> : <span class="id">a</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">a</span> - <span class="id">u2</span> * <span class="id">a</span> + <span class="id">b</span> * <span class="id">b</span> &lt;= <span class="id">x</span>).<br/>
{ <span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>) <span class="kwd">with</span> ((<span class="id">a</span> + <span class="id">b</span>) * (<span class="id">a</span> + <span class="id">b</span>)); [|<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">b</span>; <span class="id">field</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_def">sqrt_def</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H</span>' : 0 &lt;= <span class="id">a</span> + <span class="id">b</span>); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_lt_0_compat">Rplus_le_lt_0_compat</a></span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat">Rmult_le_compat</a></span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Hsr</span> : <span class="id">x</span> &lt;= <span class="id">a</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">a</span> + <span class="id">u2</span> * <span class="id">a</span> + <span class="id">b</span>' * <span class="id">b</span>').<br/>
{ <span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>) <span class="kwd">with</span> ((<span class="id">a</span> + <span class="id">b</span>') * (<span class="id">a</span> + <span class="id">b</span>')); [|<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">b</span>'; <span class="id">field</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_def">sqrt_def</a></span> <span class="id">x</span>); [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H</span>' : 0 &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_pos">sqrt_pos</a></span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat">Rmult_le_compat</a></span>. }<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">a</span> 0) <span class="kwd">as</span> [<span class="id">Za</span>|<span class="id">Nza</span>].<br/>
- <span class="comment">(*&nbsp;a&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> 0).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">b</span> * <span class="id">b</span>); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;+ <span class="id">revert</span> <span class="id">Hsl</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id">Za</span>; <span class="tactic">do</span> 3 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">do</span> 3 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">mx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_floor">Ztrunc_floor</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_le">Req_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 0 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0); <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_imp">Zfloor_imp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>]|<span class="tactic">simpl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (2 * <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 2%<span class="id">Z</span> <span class="kwd">with</span> (1 + 1)%<span class="id">Z</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_plus_distr_l">Zmult_plus_distr_l</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_l">Zmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_def">sqrt_def</a></span> <span class="id">x</span>) <span class="tactic">at</span> 1; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_compat">Rmult_lt_compat</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_pos">sqrt_pos</a></span>|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_pos">sqrt_pos</a></span>| |]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hr</span>); <span class="tactic">rewrite</span> <span class="id">Za</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">b</span>'; <span class="id">change</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>) <span class="kwd">with</span> <span class="id">u1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (/ 2 * (<span class="id">u1</span> + <span class="id">u1</span>)); [|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">lra</span>|]; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span>; <span class="tactic">omega</span>.<br/>
- <span class="comment">(*&nbsp;a&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Pa</span> : 0 &lt; <span class="id">a</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hla</span> : (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">a</span> = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>) :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id">a</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_DN">ln_beta_DN</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="id">fold</span> <span class="id">a</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hl</span>' : 0 &lt; - (<span class="id">u2</span> * <span class="id">a</span>) + <span class="id">b</span> * <span class="id">b</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (<span class="id">u2</span> * <span class="id">a</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">b</span>; <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (/ 2 * <span class="id">u2</span> * <span class="id">u1</span>)); <span class="id">field_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> / 2) <span class="kwd">with</span> (<span class="id">u2</span> * (<span class="id">a</span> + / 2 * <span class="id">u1</span>)) <span class="tactic">by</span> <span class="id">field</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> / 8) <span class="kwd">with</span> (/ 4 * (<span class="id">u2</span> ^ 2 + <span class="id">u1</span> ^ 2)) <span class="tactic">by</span> <span class="id">field</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">u2</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u1</span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Hla</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">a</span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">a</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>)) <span class="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id">a</span>+ <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>; <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#id_p_ulp_le_bpow">id_p_ulp_le_bpow</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Pa</span> <span class="id">Fa</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 2) * <span class="id">u1</span> ^ 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rpow_def.html#pow">pow</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u1</span>, <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">bpow_simplify</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat">Rmult_le_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pow2_ge_0">pow2_ge_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 4 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (2 * 2)%<span class="id">Z</span>); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat">Zmult_le_compat</a></span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span> (<span class="id">u1</span> ^ 2)) <span class="tactic">at</span> 1; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_r">Rplus_le_compat_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pow2_ge_0">pow2_ge_0</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hr</span>' : <span class="id">x</span> &lt;= <span class="id">a</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">a</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">Hla</span> <span class="kwd">in</span> <span class="id">Fa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>)); <span class="tactic">rewrite</span> <span class="id">Fa</span>; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>; <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">ma</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">ma</span>)); <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 2 * <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|<span class="id">bpow_simplify</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Fx</span> <span class="tactic">at</span> 1; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 1 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1); <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_succ_le">Zlt_succ_le</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (2 * <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|<span class="id">bpow_simplify</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 2%<span class="id">Z</span> <span class="kwd">with</span> (1 + 1)%<span class="id">Z</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_plus_distr_l">Zmult_plus_distr_l</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_l">Zmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> * <span class="id">_</span>) <span class="kwd">with</span> (<span class="id">a</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">u1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="tactic">unfold</span> <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">rewrite</span> <span class="id">Fa</span>; <span class="tactic">ring</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hsr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_assoc">Rplus_assoc</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- <span class="id">b</span>' * <span class="id">b</span>' + / 2 * <span class="id">u1</span> * <span class="id">u2</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>) <span class="kwd">with</span> ((<span class="id">a</span> + / 2 * <span class="id">u1</span>) * <span class="id">u2</span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) * <span class="id">u2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span>; [<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">a</span> + <span class="id">u1</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u1</span>; <span class="id">fold</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_DN">canonic_exp_DN</a></span>; [|<span class="tactic">exact</span> <span class="id">Vfexp1</span>|<span class="tactic">exact</span> <span class="id">Pa</span>]; <span class="id">fold</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#id_p_ulp_le_bpow">id_p_ulp_le_bpow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exact</span> <span class="id">Pa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (/ 2 * <span class="id">u1</span> ^ 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 2) * <span class="id">u1</span> ^ 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rpow_def.html#pow">pow</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pow2_ge_0">pow2_ge_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>; <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 2 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_l">Zmult_1_l</a></span> 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat">Zmult_le_compat</a></span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">u2</span> ^ 2 &lt; <span class="id">u1</span> ^ 2); [|<span class="tactic">unfold</span> <span class="id">b</span>'; <span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rpow_def.html#pow">pow</a></span>; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H</span>' : 0 &lt;= <span class="id">u2</span>); [<span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">u2</span> &lt; <span class="id">u1</span>); [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_compat">Rmult_lt_compat</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u1</span>, <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span>; <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> (<span class="id">a</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">a</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">a</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">a</span> - <span class="id">u2</span> * <span class="id">a</span> + <span class="id">b</span> * <span class="id">b</span>).<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span> (<span class="id">a</span> * <span class="id">a</span> + <span class="id">_</span>)) <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_assoc">Rplus_assoc</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">b</span> * <span class="id">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_sqrt">double_round_sqrt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_hyp">double_round_sqrt_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5842')">Proof.</div>
<div class="proofscript" id="proof5842">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Npx</span>|<span class="id">Px</span>].<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#sqrt_neg">sqrt_neg</a></span> <span class="id">_</span> <span class="id">Npx</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>].<br/>
- <span class="comment">(*&nbsp;0&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hfx</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>; <span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hfsx</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> <span class="id">x</span> 1) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;x&nbsp;&lt;=&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)); [<span class="tactic">exact</span> <span class="id">Hfx</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le">ln_beta_le</a></span>; [<span class="tactic">exact</span> <span class="id">Px</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_def">sqrt_def</a></span> <span class="id">x</span>) <span class="tactic">at</span> 1; [|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_pos">sqrt_pos</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_1">sqrt_1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_le_1_alt">sqrt_le_1_alt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;1&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> ((<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hexp</span>)) 1%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - 1)%<span class="id">Z</span> <span class="kwd">with</span> 1%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hexp10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hf0</span> : (<span class="id">fexp1</span> 1 &lt; 1)%<span class="id">Z</span>); [<span class="tactic">omega</span>|<span class="tactic">clear</span> <span class="id">Hexp10</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp1</span> 1); [<span class="tactic">exact</span> <span class="id">Hf0</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_ge_bpow">ln_beta_ge_bpow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zeq_minus">Zeq_minus</a></span>; [|<span class="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_ge">Rabs_ge</a></span>; <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_1">sqrt_1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_le_1_alt">sqrt_le_1_alt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hf2</span> : (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) - 1)%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">assert</span> (<span class="id">H</span> : (<span class="id">fexp1</span> (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) &lt; 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_sqrt_disj">ln_beta_sqrt_disj</a></span> <span class="id">x</span> <span class="id">Px</span>) <span class="kwd">as</span> [<span class="id">Hlx</span>|<span class="id">Hlx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)); [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id">Hlx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> ((<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hexp</span>)) (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_mid_cases">double_round_mid_cases</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">exact</span> <span class="id">Vfexp2</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_lt_R0">sqrt_lt_R0</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">Hmid</span>; <span class="id">casetype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>; <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">Rle_not_lt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hmid</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_aux">double_round_sqrt_aux</a></span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2</span> <span class="id">Fx</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_FLX">Double_round_sqrt_FLX</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_FLX.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLX.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FLX_double_round_sqrt_hyp">FLX_double_round_sqrt_hyp</a></span> :<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLX.prec">prec</a></span> + 2 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_hyp">double_round_sqrt_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5843')">Proof.</div>
<div class="proofscript" id="proof5843">
<span class="tactic">intros</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_hyp">double_round_sqrt_hyp</a></span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">intro</span> <span class="id">ex</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_sqrt_FLX">double_round_sqrt_FLX</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLX.prec">prec</a></span> + 2 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>') <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5844')">Proof.</div>
<div class="proofscript" id="proof5844">
<span class="tactic">intros</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt">double_round_sqrt</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLX_double_round_sqrt_hyp">FLX_double_round_sqrt_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLX">Double_round_sqrt_FLX</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_FLT">Double_round_sqrt_FLT</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLT</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">emin</span>' <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FLT_double_round_sqrt_hyp">FLT_double_round_sqrt_hyp</a></span> :<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span> &lt;= 0)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span> - 2)%<span class="id">Z</span><br/>
&nbsp;&nbsp;&nbsp;\/ (2 * <span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span> - 4 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span> - 2)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span> + 2 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_hyp">double_round_sqrt_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5845')">Proof.</div>
<div class="proofscript" id="proof5845">
<span class="tactic">intros</span> <span class="id">Hemin</span> <span class="id">Heminprec</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_hyp">double_round_sqrt_hyp</a></span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">intros</span> <span class="id">ex</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (2 * <span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (2 * <span class="id">ex</span> - 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (2 * <span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_sqrt_FLT">double_round_sqrt_FLT</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span> &lt;= 0)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span> - 2)%<span class="id">Z</span><br/>
&nbsp;&nbsp;&nbsp;\/ (2 * <span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span> - 4 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span> - 2)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span> + 2 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5846')">Proof.</div>
<div class="proofscript" id="proof5846">
<span class="tactic">intros</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hemin</span> <span class="id">Heminprec</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt">double_round_sqrt</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLT_double_round_sqrt_hyp">FLT_double_round_sqrt_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FLT">Double_round_sqrt_FLT</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_FTZ">Double_round_sqrt_FTZ</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FTZ</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.emin">emin</a></span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">emin</span>' <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FTZ_double_round_sqrt_hyp">FTZ_double_round_sqrt_hyp</a></span> :<br/>
&nbsp;&nbsp;(2 * (<span class="id">emin</span>' + <span class="id">prec</span>') &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span> &lt;= 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span> + 2 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_hyp">double_round_sqrt_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5847')">Proof.</div>
<div class="proofscript" id="proof5847">
<span class="tactic">intros</span> <span class="id">Hemin</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> *.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_hyp">double_round_sqrt_hyp</a></span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">intros</span> <span class="id">ex</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (2 * <span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (2 * <span class="id">ex</span> - 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">intro</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.emin">emin</a></span> (2 * <span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span>)) <span class="kwd">as</span> [<span class="id">H</span>'|<span class="id">H</span>'].<br/>
&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="id">casetype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zlt_bool_true">Zlt_bool_true</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>') <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_sqrt_FTZ">double_round_sqrt_FTZ</a></span> :<br/>
&nbsp;&nbsp;(4 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(2 * (<span class="id">emin</span>' + <span class="id">prec</span>') &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span> &lt;= 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span> + 2 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5848')">Proof.</div>
<div class="proofscript" id="proof5848">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt">double_round_sqrt</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FTZ_double_round_sqrt_hyp">FTZ_double_round_sqrt_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_FTZ">Double_round_sqrt_FTZ</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4">Double_round_sqrt_beta_ge_4</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="double_round_sqrt_beta_ge_4_hyp">double_round_sqrt_beta_ge_4_hyp</a></span> <span class="id">fexp1</span> <span class="id">fexp2</span> :=<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ex</span>, (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span>))%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span>, (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - 1))%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span>) &lt; 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - 1)%<span class="id">Z</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_sqrt_beta_ge_4_aux">double_round_sqrt_beta_ge_4_aux</a></span> :<br/>
&nbsp;&nbsp;(4 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_beta_ge_4_hyp">double_round_sqrt_beta_ge_4_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;/ 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5849')">Proof.</div>
<div class="proofscript" id="proof5849">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2</span> <span class="id">Fx</span>.<br/>
<span class="tactic">set</span> (<span class="id">a</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">set</span> (<span class="id">u1</span> := <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">u2</span> := <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">b</span> := / 2 * (<span class="id">u1</span> - <span class="id">u2</span>)).<br/>
<span class="tactic">set</span> (<span class="id">b</span>' := / 2 * (<span class="id">u1</span> + <span class="id">u2</span>)).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span>; <span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">try</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_lt_R0">sqrt_lt_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_ge_lt">Rnot_ge_lt</a></span>; <span class="tactic">intro</span> <span class="id">H</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rge_le">Rge_le</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Fa</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">a</span>).<br/>
{ <span class="tactic">unfold</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_DN">valid_rnd_DN</a></span>. }<br/>
<span class="id">revert</span> <span class="id">Fa</span>; <span class="id">revert</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">set</span> (<span class="id">mx</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">ma</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">a</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">a</span>)))).<br/>
<span class="tactic">intros</span> <span class="id">Fx</span> <span class="id">Fa</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Nna</span> : 0 &lt;= <span class="id">a</span>).<br/>
{ <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">a</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_DN">valid_rnd_DN</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_pos">sqrt_pos</a></span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Phu1</span> : 0 &lt; / 2 * <span class="id">u1</span>).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>; [<span class="id">lra</span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>]. }<br/>
<span class="tactic">assert</span> (<span class="id">Phu2</span> : 0 &lt; / 2 * <span class="id">u2</span>).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>; [<span class="id">lra</span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>]. }<br/>
<span class="tactic">assert</span> (<span class="id">Pb</span> : 0 &lt; <span class="id">b</span>).<br/>
{ <span class="tactic">unfold</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span> (/ 2)).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_Rminus">Rlt_Rminus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Pb</span>' : 0 &lt; <span class="id">b</span>').<br/>
{ <span class="id">now</span> <span class="tactic">unfold</span> <span class="id">b</span>'; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_plus_distr_l">Rmult_plus_distr_l</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_0_compat">Rplus_lt_0_compat</a></span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Hr</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span> &lt;= <span class="id">a</span> + <span class="id">b</span>').<br/>
{ <span class="tactic">unfold</span> <span class="id">b</span>'; <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> (- / 2 * <span class="id">u1</span> - <span class="id">a</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span> - (<span class="id">a</span> + / 2 * <span class="id">u1</span>)) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_le_inv">Rabs_le_inv</a></span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Hl</span> : <span class="id">a</span> + <span class="id">b</span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>).<br/>
{ <span class="tactic">unfold</span> <span class="id">b</span>; <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> (- / 2 * <span class="id">u1</span> - <span class="id">a</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">_</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span> - (<span class="id">a</span> + / 2 * <span class="id">u1</span>)) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse">Ropp_mult_distr_l_reverse</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_le_inv">Rabs_le_inv</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">H</span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Hf1</span> : (2 * <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span>)))%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_sqrt_disj">ln_beta_sqrt_disj</a></span> <span class="id">x</span> <span class="id">Px</span>) <span class="kwd">as</span> [<span class="id">H</span>'|<span class="id">H</span>']; <span class="tactic">rewrite</span> <span class="id">H</span>'; <span class="tactic">apply</span> <span class="id">Hexp</span>|].<br/>
<span class="tactic">assert</span> (<span class="id">Hlx</span> : (<span class="id">fexp1</span> (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) &lt; 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))%<span class="id">Z</span>).<br/>
{ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_sqrt_disj">ln_beta_sqrt_disj</a></span> <span class="id">x</span> <span class="id">Px</span>) <span class="kwd">as</span> [<span class="id">Hlx</span>|<span class="id">Hlx</span>].<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)); [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|].<br/>
&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id">Hlx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]. }<br/>
<span class="tactic">assert</span> (<span class="id">Hsl</span> : <span class="id">a</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">a</span> - <span class="id">u2</span> * <span class="id">a</span> + <span class="id">b</span> * <span class="id">b</span> &lt;= <span class="id">x</span>).<br/>
{ <span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>) <span class="kwd">with</span> ((<span class="id">a</span> + <span class="id">b</span>) * (<span class="id">a</span> + <span class="id">b</span>)); [|<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">b</span>; <span class="id">field</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_def">sqrt_def</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H</span>' : 0 &lt;= <span class="id">a</span> + <span class="id">b</span>); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_lt_0_compat">Rplus_le_lt_0_compat</a></span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat">Rmult_le_compat</a></span>. }<br/>
<span class="tactic">assert</span> (<span class="id">Hsr</span> : <span class="id">x</span> &lt;= <span class="id">a</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">a</span> + <span class="id">u2</span> * <span class="id">a</span> + <span class="id">b</span>' * <span class="id">b</span>').<br/>
{ <span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>) <span class="kwd">with</span> ((<span class="id">a</span> + <span class="id">b</span>') * (<span class="id">a</span> + <span class="id">b</span>')); [|<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">b</span>'; <span class="id">field</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_def">sqrt_def</a></span> <span class="id">x</span>); [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H</span>' : 0 &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_pos">sqrt_pos</a></span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat">Rmult_le_compat</a></span>. }<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">a</span> 0) <span class="kwd">as</span> [<span class="id">Za</span>|<span class="id">Nza</span>].<br/>
- <span class="comment">(*&nbsp;a&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> 0).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">b</span> * <span class="id">b</span>); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;+ <span class="id">revert</span> <span class="id">Hsl</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id">Za</span>; <span class="tactic">do</span> 3 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">do</span> 3 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">mx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_floor">Ztrunc_floor</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_le">Req_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 0 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0); <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_imp">Zfloor_imp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>]|<span class="tactic">simpl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (2 * <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 2%<span class="id">Z</span> <span class="kwd">with</span> (1 + 1)%<span class="id">Z</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_plus_distr_l">Zmult_plus_distr_l</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_l">Zmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_def">sqrt_def</a></span> <span class="id">x</span>) <span class="tactic">at</span> 1; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_compat">Rmult_lt_compat</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_pos">sqrt_pos</a></span>|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_pos">sqrt_pos</a></span>| |]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hr</span>); <span class="tactic">rewrite</span> <span class="id">Za</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">b</span>'; <span class="id">change</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>) <span class="kwd">with</span> <span class="id">u1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (/ 2 * (<span class="id">u1</span> + <span class="id">u1</span>)); [|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">lra</span>|]; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span>; <span class="tactic">omega</span>.<br/>
- <span class="comment">(*&nbsp;a&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Pa</span> : 0 &lt; <span class="id">a</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hla</span> : (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">a</span> = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>) :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id">a</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_DN">ln_beta_DN</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="id">fold</span> <span class="id">a</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hl</span>' : 0 &lt; - (<span class="id">u2</span> * <span class="id">a</span>) + <span class="id">b</span> * <span class="id">b</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (<span class="id">u2</span> * <span class="id">a</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">b</span>; <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (/ 2 * <span class="id">u2</span> * <span class="id">u1</span>)); <span class="id">field_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> / 2) <span class="kwd">with</span> (<span class="id">u2</span> * (<span class="id">a</span> + / 2 * <span class="id">u1</span>)) <span class="tactic">by</span> <span class="id">field</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> / 8) <span class="kwd">with</span> (/ 4 * (<span class="id">u2</span> ^ 2 + <span class="id">u1</span> ^ 2)) <span class="tactic">by</span> <span class="id">field</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">u2</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u1</span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Hla</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">a</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#id_p_ulp_le_bpow">id_p_ulp_le_bpow</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Pa</span> <span class="id">Fa</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 1) * <span class="id">u1</span> ^ 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rpow_def.html#pow">pow</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u1</span>, <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">bpow_simplify</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat">Rmult_le_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pow2_ge_0">pow2_ge_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">change</span> 4 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 4); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span> (<span class="id">u1</span> ^ 2)) <span class="tactic">at</span> 1; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_r">Rplus_le_compat_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pow2_ge_0">pow2_ge_0</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hr</span>' : <span class="id">x</span> &lt;= <span class="id">a</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">a</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">Hla</span> <span class="kwd">in</span> <span class="id">Fa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>)); <span class="tactic">rewrite</span> <span class="id">Fa</span>; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>; <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">ma</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">ma</span>)); <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 2 * <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|<span class="id">bpow_simplify</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Fx</span> <span class="tactic">at</span> 1; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 1 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1); <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_succ_le">Zlt_succ_le</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (2 * <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|<span class="id">bpow_simplify</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 2%<span class="id">Z</span> <span class="kwd">with</span> (1 + 1)%<span class="id">Z</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_plus_distr_l">Zmult_plus_distr_l</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_l">Zmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> * <span class="id">_</span>) <span class="kwd">with</span> (<span class="id">a</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">u1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="tactic">unfold</span> <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">rewrite</span> <span class="id">Fa</span>; <span class="tactic">ring</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hsr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_assoc">Rplus_assoc</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- <span class="id">b</span>' * <span class="id">b</span>' + / 2 * <span class="id">u1</span> * <span class="id">u2</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + <span class="id">_</span>) <span class="kwd">with</span> ((<span class="id">a</span> + / 2 * <span class="id">u1</span>) * <span class="id">u2</span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) * <span class="id">u2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span>; [<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">a</span> + <span class="id">u1</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u1</span>; <span class="id">fold</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_DN">canonic_exp_DN</a></span>; [|<span class="tactic">exact</span> <span class="id">Vfexp1</span>|<span class="tactic">exact</span> <span class="id">Pa</span>]; <span class="id">fold</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#id_p_ulp_le_bpow">id_p_ulp_le_bpow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exact</span> <span class="id">Pa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (/ 2 * <span class="id">u1</span> ^ 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 1) * <span class="id">u1</span> ^ 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rpow_def.html#pow">pow</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pow2_ge_0">pow2_ge_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>; <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 2 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span> (<span class="id">u2</span> ^ 2 &lt; <span class="id">u1</span> ^ 2); [|<span class="tactic">unfold</span> <span class="id">b</span>'; <span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rpow_def.html#pow">pow</a></span>; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H</span>' : 0 &lt;= <span class="id">u2</span>); [<span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">u2</span> &lt; <span class="id">u1</span>); [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_compat">Rmult_lt_compat</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u1</span>, <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span>; <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> (<span class="id">a</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">a</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">a</span> * <span class="id">a</span> + <span class="id">u1</span> * <span class="id">a</span> - <span class="id">u2</span> * <span class="id">a</span> + <span class="id">b</span> * <span class="id">b</span>).<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span> (<span class="id">a</span> * <span class="id">a</span> + <span class="id">_</span>)) <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_assoc">Rplus_assoc</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id">b</span> * <span class="id">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_sqrt_beta_ge_4">double_round_sqrt_beta_ge_4</a></span> :<br/>
&nbsp;&nbsp;(4 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_beta_ge_4_hyp">double_round_sqrt_beta_ge_4_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5850')">Proof.</div>
<div class="proofscript" id="proof5850">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Npx</span>|<span class="id">Px</span>].<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span> = 0).<br/>
&nbsp;&nbsp;{ <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Nzx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;x&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_0">sqrt_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rcase_abs">Rcase_abs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">casetype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>; <span class="id">lra</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
- <span class="comment">(*&nbsp;0&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hfx</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>; <span class="id">lra</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hfsx</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> <span class="id">x</span> 1) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;x&nbsp;&lt;=&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)); [<span class="tactic">exact</span> <span class="id">Hfx</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le">ln_beta_le</a></span>; [<span class="tactic">exact</span> <span class="id">Px</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_def">sqrt_def</a></span> <span class="id">x</span>) <span class="tactic">at</span> 1; [|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_pos">sqrt_pos</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_1">sqrt_1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_le_1_alt">sqrt_le_1_alt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;1&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> ((<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hexp</span>)) 1%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - 1)%<span class="id">Z</span> <span class="kwd">with</span> 1%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">Hexp10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hf0</span> : (<span class="id">fexp1</span> 1 &lt; 1)%<span class="id">Z</span>); [<span class="tactic">omega</span>|<span class="tactic">clear</span> <span class="id">Hexp10</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp1</span> 1); [<span class="tactic">exact</span> <span class="id">Hf0</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_ge_bpow">ln_beta_ge_bpow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zeq_minus">Zeq_minus</a></span>; [|<span class="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_ge">Rabs_ge</a></span>; <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_1">sqrt_1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_le_1_alt">sqrt_le_1_alt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hf2</span> : (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) - 1)%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">assert</span> (<span class="id">H</span> : (<span class="id">fexp1</span> (2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) &lt; 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_sqrt_disj">ln_beta_sqrt_disj</a></span> <span class="id">x</span> <span class="id">Px</span>) <span class="kwd">as</span> [<span class="id">Hlx</span>|<span class="id">Hlx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)); [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id">Hlx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> ((<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hexp</span>)) (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) <span class="id">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_mid_cases">double_round_mid_cases</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">exact</span> <span class="id">Vfexp2</span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_lt_R0">sqrt_lt_R0</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">intros</span> <span class="id">Hmid</span>; <span class="id">casetype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>; <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">Rle_not_lt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hmid</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_beta_ge_4_aux">double_round_sqrt_beta_ge_4_aux</a></span> <span class="id">Hbeta</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Hexp</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2</span> <span class="id">Fx</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLX">Double_round_sqrt_beta_ge_4_FLX</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLX.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLX.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FLX_double_round_sqrt_beta_ge_4_hyp">FLX_double_round_sqrt_beta_ge_4_hyp</a></span> :<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLX.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_beta_ge_4_hyp">double_round_sqrt_beta_ge_4_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5851')">Proof.</div>
<div class="proofscript" id="proof5851">
<span class="tactic">intros</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_beta_ge_4_hyp">double_round_sqrt_beta_ge_4_hyp</a></span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">intro</span> <span class="id">ex</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_sqrt_beta_ge_4_FLX">double_round_sqrt_beta_ge_4_FLX</a></span> :<br/>
&nbsp;&nbsp;(4 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLX.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>') <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5852')">Proof.</div>
<div class="proofscript" id="proof5852">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_beta_ge_4">double_round_sqrt_beta_ge_4</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Hbeta</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLX_double_round_sqrt_beta_ge_4_hyp">FLX_double_round_sqrt_beta_ge_4_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLX">Double_round_sqrt_beta_ge_4_FLX</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT">Double_round_sqrt_beta_ge_4_FLT</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLT</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">emin</span>' <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FLT_double_round_sqrt_beta_ge_4_hyp">FLT_double_round_sqrt_beta_ge_4_hyp</a></span> :<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span> &lt;= 0)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span> - 1)%<span class="id">Z</span><br/>
&nbsp;&nbsp;&nbsp;\/ (2 * <span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span> - 4 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span>)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_beta_ge_4_hyp">double_round_sqrt_beta_ge_4_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5853')">Proof.</div>
<div class="proofscript" id="proof5853">
<span class="tactic">intros</span> <span class="id">Hemin</span> <span class="id">Heminprec</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_beta_ge_4_hyp">double_round_sqrt_beta_ge_4_hyp</a></span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">intros</span> <span class="id">ex</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (2 * <span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (2 * <span class="id">ex</span> - 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (2 * <span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_sqrt_beta_ge_4_FLT">double_round_sqrt_beta_ge_4_FLT</a></span> :<br/>
&nbsp;&nbsp;(4 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span> &lt;= 0)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span> - 1)%<span class="id">Z</span><br/>
&nbsp;&nbsp;&nbsp;\/ (2 * <span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span> - 4 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span>)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5854')">Proof.</div>
<div class="proofscript" id="proof5854">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hemin</span> <span class="id">Heminprec</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_beta_ge_4">double_round_sqrt_beta_ge_4</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Hbeta</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLT_double_round_sqrt_beta_ge_4_hyp">FLT_double_round_sqrt_beta_ge_4_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FLT">Double_round_sqrt_beta_ge_4_FLT</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ">Double_round_sqrt_beta_ge_4_FTZ</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FTZ</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.emin">emin</a></span> <span class="id"><a name="Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">emin</span>' <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FTZ_double_round_sqrt_beta_ge_4_hyp">FTZ_double_round_sqrt_beta_ge_4_hyp</a></span> :<br/>
&nbsp;&nbsp;(2 * (<span class="id">emin</span>' + <span class="id">prec</span>') &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span> &lt;= 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_beta_ge_4_hyp">double_round_sqrt_beta_ge_4_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5855')">Proof.</div>
<div class="proofscript" id="proof5855">
<span class="tactic">intros</span> <span class="id">Hemin</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> *.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_beta_ge_4_hyp">double_round_sqrt_beta_ge_4_hyp</a></span>; <span class="tactic">split</span>; [|<span class="tactic">split</span>]; <span class="tactic">intros</span> <span class="id">ex</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (2 * <span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (2 * <span class="id">ex</span> - 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">intro</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.emin">emin</a></span> (2 * <span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span>)) <span class="kwd">as</span> [<span class="id">H</span>'|<span class="id">H</span>'].<br/>
&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="id">casetype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zlt_bool_true">Zlt_bool_true</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>') <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_sqrt_beta_ge_4_FTZ">double_round_sqrt_beta_ge_4_FTZ</a></span> :<br/>
&nbsp;&nbsp;(4 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(2 * (<span class="id">emin</span>' + <span class="id">prec</span>') &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.emin">emin</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span> &lt;= 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span> + 1 &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5856')">Proof.</div>
<div class="proofscript" id="proof5856">
<span class="tactic">intros</span> <span class="id">Hbeta</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_sqrt_beta_ge_4">double_round_sqrt_beta_ge_4</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Hbeta</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FTZ_double_round_sqrt_beta_ge_4_hyp">FTZ_double_round_sqrt_beta_ge_4_hyp</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4.Double_round_sqrt_beta_ge_4_FTZ">Double_round_sqrt_beta_ge_4_FTZ</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt.Double_round_sqrt_beta_ge_4">Double_round_sqrt_beta_ge_4</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_sqrt">Double_round_sqrt</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_div">Double_round_div</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_eq_mid_beta_even">double_round_eq_mid_beta_even</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> = 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#n">n</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5857')">Proof.</div>
<div class="proofscript" id="proof5857">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Ebeta</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2</span> <span class="id">Hf1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span>.<br/>
<span class="tactic">set</span> (<span class="id">rd</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">set</span> (<span class="id">u</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>).<br/>
<span class="tactic">intro</span> <span class="id">H</span>; <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_eq_compat_l">Rplus_eq_compat_l</a></span> (- <span class="id">rd</span>)) <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="id">ring_simplify</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">revert</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span>; <span class="id">fold</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span> <span class="id">x</span> <span class="id">rd</span>).<br/>
<span class="tactic">intro</span> <span class="id">Xmid</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Ebeta</span> <span class="kwd">as</span> (<span class="id">n</span>,<span class="id">Ebeta</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Hbeta</span> : (2 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span>).<br/>
{ <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="kwd">as</span> (<span class="id">beta_val</span>,<span class="id">beta_prop</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>. }<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_eq_compat_l">Rplus_eq_compat_l</a></span> <span class="id">rd</span>) <span class="kwd">in</span> <span class="id">Xmid</span>; <span class="id">ring_simplify</span> <span class="kwd">in</span> <span class="id">Xmid</span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>); [<span class="tactic">reflexivity</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>|].<br/>
<span class="tactic">set</span> (<span class="id">f</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">rd</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">n</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> ^ (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>)).<br/>
<span class="tactic">assert</span> (<span class="id">Hf</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">f</span> = <span class="id">x</span>).<br/>
{ <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="tactic">at</span> 2; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 1))).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 1)) <span class="kwd">with</span> (/ <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> * 1)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Ebeta</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span> 2).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_mult_distr">Rinv_mult_distr</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="tactic">simpl</span>; <span class="id">lra</span>|<span class="id">change</span> 0 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_neq">Z2R_neq</a></span>; <span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>; <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">n</span>));<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_r">Rinv_r</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>|<span class="id">change</span> 0 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_neq">Z2R_neq</a></span>; <span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">fold</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">try</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id">u</span>; <span class="tactic">rewrite</span> <span class="id">Xmid</span> <span class="tactic">at</span> 2.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal2">f_equal2</a></span>; [|<span class="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">try</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">rd</span> 0) <span class="kwd">as</span> [<span class="id">Zrd</span>|<span class="id">Nzrd</span>].<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;rd&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zrd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_0">scaled_mantissa_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 0 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0) <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_Z2R">Zfloor_Z2R</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;rd&nbsp;&lt;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Nnrd</span> : 0 &lt;= <span class="id">rd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Prd</span> : 0 &lt; <span class="id">rd</span>); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Lrd</span> : (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">rd</span> = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_antisym">Zle_antisym</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le">ln_beta_le</a></span>; [<span class="tactic">exact</span> <span class="id">Prd</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_round_ge">ln_beta_round_ge</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_DN">valid_rnd_DN</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">exact</span> <span class="id">Nzrd</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">rd</span> <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Lrd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span> <span class="id">_</span> (<span class="id">_</span> - <span class="id">_</span>)); [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_imp">Zfloor_imp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))) *<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> ^ (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - <span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">unfold</span> <span class="id">rd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">split</span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="id">lra</span>. }<br/>
<span class="tactic">apply</span> (<span class="id">generic_format_F2R</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">x</span> <span class="id">f</span> <span class="id">Hf</span>).<br/>
<span class="tactic">intros</span> <span class="id">_</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_really_zero">double_round_really_zero</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 2)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5858')">Proof.</div>
<div class="proofscript" id="proof5858">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf1</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hlx</span> : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1) &lt;= <span class="id">x</span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)).<br/>
{ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>,<span class="id">Hex</span>); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="id">x</span>); [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hex</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>. }<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_really_small_pos">round_N_really_small_pos</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">_</span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)); [|<span class="tactic">exact</span> <span class="id">Hlx</span>|<span class="tactic">omega</span>].<br/>
<span class="tactic">set</span> (<span class="id">x</span>'' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice2</span>) <span class="id">x</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span>'' 0) <span class="kwd">as</span> [<span class="id">Zx</span>''|<span class="id">Nzx</span>''];<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Zx</span>''; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>]|].<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)) (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)).<br/>
- <span class="comment">(*&nbsp;fexp2&nbsp;(ln_beta&nbsp;x)&nbsp;&lt;=&nbsp;ln_beta&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">x</span>'' (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x''&nbsp;&lt;&nbsp;bpow&nbsp;(ln_beta&nbsp;x)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_really_small_pos">round_N_really_small_pos</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">reflexivity</span>|<span class="tactic">split</span>; [|<span class="tactic">exact</span> <span class="id">H0</span>]|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_large_pos_ge_pow">round_large_pos_ge_pow</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>| |<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hlx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> <span class="id">x</span>''; <span class="tactic">assert</span> (0 &lt;= <span class="id">x</span>''); [|<span class="id">lra</span>]; <span class="tactic">unfold</span> <span class="id">x</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;bpow&nbsp;(ln_beta&nbsp;x)&nbsp;&lt;=&nbsp;x''&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hx</span>'' : <span class="id">x</span>'' = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>; [|<span class="tactic">exact</span> <span class="id">H0</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice2</span>) (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id">generic_format_bpow</span>'. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hx</span>''.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_bpow">ln_beta_bpow</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hf11</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> + 1) = <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">apply</span> <span class="id">Vfexp1</span>; <span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hf11</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_eq_reg_r">Rmult_eq_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 0 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0); <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- 2)); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>; <span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hbeta</span> : (2 &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>)%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="kwd">as</span> (<span class="id">beta_val</span>,<span class="id">beta_prop</span>); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_lt_contravar">Rinv_lt_contravar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>; [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>; <span class="id">change</span> 0 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">change</span> 2 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_trans">Zle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hbeta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span>) <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_lt_compat_l">Zmult_lt_compat_l</a></span>; <span class="tactic">omega</span>.<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;x&nbsp;&lt;&nbsp;fexp2&nbsp;(ln_beta&nbsp;x)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">casetype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>; <span class="tactic">apply</span> <span class="id">Nzx</span>''.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_really_small_pos">round_N_really_small_pos</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_zero">double_round_zero</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + 1 :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5859')">Proof.</div>
<div class="proofscript" id="proof5859">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">set</span> (<span class="id">x</span>'' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice2</span>) <span class="id">x</span>).<br/>
<span class="tactic">set</span> (<span class="id">u1</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>).<br/>
<span class="tactic">set</span> (<span class="id">u2</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>).<br/>
<span class="tactic">intro</span> <span class="id">Hx</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hlx</span> : <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - 1) &lt;= <span class="id">x</span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)).<br/>
{ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>,<span class="id">Hex</span>); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="id">x</span>); [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hex</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>. }<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_really_small_pos">round_N_really_small_pos</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">choice1</span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>));<br/>
&nbsp;&nbsp;[|<span class="tactic">exact</span> <span class="id">Hlx</span>|<span class="tactic">omega</span>].<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span>'' 0) <span class="kwd">as</span> [<span class="id">Zx</span>''|<span class="id">Nzx</span>''];<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Zx</span>''; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>; [<span class="tactic">reflexivity</span>|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>]|].<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_really_small_pos">round_N_really_small_pos</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">x</span>'' (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>));<br/>
&nbsp;&nbsp;[<span class="tactic">reflexivity</span>| |<span class="tactic">omega</span>].<br/>
<span class="tactic">split</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_large_pos_ge_pow">round_large_pos_ge_pow</a></span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">assert</span> (0 &lt;= <span class="id">x</span>''); [|<span class="id">now</span> <span class="id">fold</span> <span class="id">x</span>''; <span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">x</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>,<span class="id">Hex</span>); <span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id">Hex</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
- <span class="tactic">replace</span> <span class="id">x</span>'' <span class="kwd">with</span> (<span class="id">x</span> + (<span class="id">x</span>'' - <span class="id">x</span>)) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - / 2 * <span class="id">u2</span> + / 2 * <span class="id">u2</span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_le_compat">Rplus_lt_le_compat</a></span>; [<span class="tactic">exact</span> <span class="id">Hx</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_le_inv">Rabs_le_inv</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_le_half_ulp">error_le_half_ulp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_all_mid_cases">double_round_all_mid_cases</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + 1 :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) - / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> + / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5860')">Proof.</div>
<div class="proofscript" id="proof5860">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">x</span> <span class="id">Px</span> <span class="id">Hf2</span>.<br/>
<span class="tactic">set</span> (<span class="id">x</span>' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">set</span> (<span class="id">u1</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>).<br/>
<span class="tactic">set</span> (<span class="id">u2</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span>).<br/>
<span class="tactic">intros</span> <span class="id">Cz</span> <span class="id">Clt</span> <span class="id">Ceq</span> <span class="id">Cgt</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Ztrichotomy">Ztrichotomy</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 1)) <span class="kwd">as</span> [<span class="id">Hlt</span>|[<span class="id">Heq</span>|<span class="id">Hgt</span>]].<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;x&nbsp;&lt;&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;-&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H</span> : (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 2)%<span class="id">Z</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_really_zero">double_round_really_zero</a></span>.<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;x&nbsp;=&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;-&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) = (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> + 1))%<span class="id">Z</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - / 2 * <span class="id">u2</span>)) <span class="kwd">as</span> [<span class="id">Hlt</span>'|<span class="id">Hge</span>'].<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_zero">double_round_zero</a></span>.<br/>
&nbsp;&nbsp;+ <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Cz</span>.<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;x&nbsp;&gt;&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;-&nbsp;1&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">H</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rtotal_order">Rtotal_order</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id">fexp1</span> <span class="id">x</span>)) <span class="kwd">as</span> [<span class="id">Hlt</span>'|[<span class="id">Heq</span>'|<span class="id">Hgt</span>']].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;midp&nbsp;fexp1&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id">fexp1</span> <span class="id">x</span> - / 2 * <span class="id">u2</span>)) <span class="kwd">as</span> [<span class="id">Hlt</span>''|<span class="id">Hle</span>''].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_lt_mid_further_place">double_round_lt_mid_further_place</a></span>; [| | |<span class="tactic">omega</span>| |].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Clt</span>; [|<span class="tactic">split</span>].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x&nbsp;=&nbsp;midp&nbsp;fexp1&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Ceq</span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;x&nbsp;&gt;&nbsp;midp&nbsp;fexp1&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id">fexp1</span> <span class="id">x</span> + / 2 * <span class="id">u2</span>)) <span class="kwd">as</span> [<span class="id">Hlt</span>''|<span class="id">Hle</span>''].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Cgt</span>; [|<span class="tactic">split</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* { <span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Fx</span>|<span class="id">Nfx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;generic_format&nbsp;beta&nbsp;fexp1&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>; <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">reflexivity</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="comment">(*&nbsp;~&nbsp;generic_format&nbsp;beta&nbsp;fexp1&nbsp;x&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hceil</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> = <span class="id">x</span>' + <span class="id">u1</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_DN_ulp">round_UP_DN_ulp</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Hf2</span>' : (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt;= <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - 1)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">midp</span>' <span class="id">fexp1</span> <span class="id">x</span> + / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> <span class="id">x</span> &lt; <span class="id">x</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_gt_mid_further_place">double_round_gt_mid_further_place</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">revert</span> <span class="id">Hle</span>''; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span>, <span class="id">midp</span>'; <span class="id">fold</span> <span class="id">x</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Hceil</span>; <span class="id">fold</span> <span class="id">u1</span>; <span class="id">fold</span> <span class="id">u2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">lra</span>. }<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ln_beta_div_disj">ln_beta_div_disj</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span><br/>
&nbsp;&nbsp;&nbsp;\/ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> + 1 :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5861')">Proof.</div>
<div class="proofscript" id="proof5861">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_div">ln_beta_div</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="double_round_div_hyp">double_round_div_hyp</a></span> <span class="id">fexp1</span> <span class="id">fexp2</span> :=<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ex</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - 1)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> + 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> + 1) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> + 1 + 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> + 1) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>) = <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> + 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ex">ex</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ey">ey</a></span>)%<span class="id">Z</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_div_aux0">double_round_div_aux0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_hyp">double_round_div_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)) = (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) + 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;~ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)) - / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5862')">Proof.</div>
<div class="proofscript" id="proof5862">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hf1</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hfx</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">assert</span> (<span class="id">Hfy</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">set</span> (<span class="id">p</span> := <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>))).<br/>
<span class="tactic">set</span> (<span class="id">u2</span> := <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>)))).<br/>
<span class="id">revert</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">set</span> (<span class="id">mx</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">my</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">y</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)))).<br/>
<span class="tactic">intros</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_integral_contrapositive_currified">Rmult_integral_contrapositive_currified</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|<span class="id">idtac</span>].<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_neq_0_compat">Rinv_neq_0_compat</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">intro</span> <span class="id">Hl</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hr</span> : <span class="id">x</span> / <span class="id">y</span> &lt; <span class="id">p</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>|].<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> (<span class="id">p</span> - / 2 * <span class="id">u2</span>)).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hl</span>).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="id">y</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Py</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>]; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))%<span class="id">Z</span>) <span class="kwd">as</span> [<span class="id">He</span>|<span class="id">He</span>].<br/>
- <span class="comment">(*&nbsp;ln_beta&nbsp;(x&nbsp;/&nbsp;y)&nbsp;+&nbsp;fexp1&nbsp;(ln_beta&nbsp;y)&nbsp;&lt;=&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id">p</span> * <span class="id">y</span> - <span class="id">p</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))).<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">Fx</span>; <span class="tactic">rewrite</span> <span class="id">Fy</span> <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">p</span>; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>) - <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">exact</span> <span class="id">He</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 1 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1); <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_minus">Z2R_minus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_reg_r">Zplus_le_reg_r</a></span> <span class="id">_</span> <span class="id">_</span> 1); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">exact</span> <span class="id">He</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (/ <span class="id">y</span>)); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">field_simplify</span>; <span class="id">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">u2</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> (<span class="id">u2</span> * <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_compat">Rmult_lt_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id">p</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">bpow_simplify</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_reg_r">Zplus_le_reg_r</a></span> <span class="id">_</span> <span class="id">_</span> (- <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span> (- <span class="id">_</span>)); <span class="id">fold</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zminus">Zminus</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>)) (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_div_disj">ln_beta_div_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span>) <span class="kwd">as</span> [<span class="id">Hxy</span>|<span class="id">Hxy</span>]; <span class="tactic">rewrite</span> <span class="id">Hxy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp</span>; [| |<span class="tactic">rewrite</span> &lt;- <span class="id">Hxy</span>]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span> + 1)%<span class="id">Z</span> <span class="kwd">with</span> ((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> + 1) - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">assert</span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> + 1) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span>|<span class="tactic">omega</span>]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + 1 - <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span> + 1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Hxy</span>.<br/>
- <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;&lt;&nbsp;ln_beta&nbsp;(x&nbsp;/&nbsp;y)&nbsp;+&nbsp;fexp1&nbsp;(ln_beta&nbsp;y)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id">p</span> * <span class="id">y</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">Fx</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id">Fy</span> <span class="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">p</span>; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 1 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1); <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_minus">Z2R_minus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_reg_r">Zplus_le_reg_r</a></span> <span class="id">_</span> <span class="id">_</span> 1); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|<span class="id">bpow_simplify</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (/ <span class="id">y</span>)); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">field_simplify</span>; <span class="id">lra</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">u2</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> (<span class="id">u2</span> * <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_compat">Rmult_lt_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>; [<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">lra</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id">p</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">bpow_simplify</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_reg_r">Zplus_le_reg_r</a></span> <span class="id">_</span> <span class="id">_</span> (- <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span> (- <span class="id">_</span>)); <span class="id">fold</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zminus">Zminus</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>)) (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_div_disj">ln_beta_div_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span>) <span class="kwd">as</span> [<span class="id">Hxy</span>|<span class="id">Hxy</span>]; <span class="tactic">rewrite</span> <span class="id">Hxy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hexp</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Hxy</span>; <span class="tactic">rewrite</span> <span class="id">Hf1</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_div_aux1">double_round_div_aux1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_hyp">double_round_div_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;~ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) - / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5863')">Proof.</div>
<div class="proofscript" id="proof5863">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hf1</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hfx</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">assert</span> (<span class="id">Hfy</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">assert</span> (<span class="id">S</span> : (<span class="id">x</span> / <span class="id">y</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_integral_contrapositive_currified">Rmult_integral_contrapositive_currified</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|<span class="id">idtac</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_neq_0_compat">Rinv_neq_0_compat</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">cut</span> (~ (/ 2 * (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> (<span class="id">x</span> / <span class="id">y</span>) - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> (<span class="id">x</span> / <span class="id">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= <span class="id">x</span> / <span class="id">y</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> / <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> (<span class="id">x</span> / <span class="id">y</span>))).<br/>
{ <span class="tactic">intro</span> <span class="id">H</span>; <span class="tactic">intro</span> <span class="id">H</span>'; <span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_l">Rplus_le_reg_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> / <span class="id">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> / <span class="id">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>'. }<br/>
<span class="tactic">set</span> (<span class="id">u1</span> := <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">u2</span> := <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">x</span>' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> / <span class="id">y</span>)).<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">revert</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">set</span> (<span class="id">mx</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">my</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">y</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)))).<br/>
<span class="tactic">intros</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">intro</span> <span class="id">Hlr</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> (/ 2 * (<span class="id">u1</span> - <span class="id">u2</span>))).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hlr</span>)).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> <span class="id">x</span>'); <span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="id">y</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Py</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>]; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_l">Rmult_lt_reg_l</a></span> 2); [<span class="id">lra</span>|].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_minus_distr_l">Rmult_minus_distr_l</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_plus_distr_l">Rmult_plus_distr_l</a></span>.<br/>
<span class="tactic">do</span> 5 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_r">Rinv_r</a></span>; [|<span class="id">lra</span>]; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))%<span class="id">Z</span>) <span class="kwd">as</span> [<span class="id">He</span>|<span class="id">He</span>].<br/>
- <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;(x&nbsp;/&nbsp;y))&nbsp;+&nbsp;fexp1&nbsp;(ln_beta&nbsp;y))&nbsp;&lt;=&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 * <span class="id">x</span>' * <span class="id">y</span> + <span class="id">u1</span> * <span class="id">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))).<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">Fx</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id">Fy</span> <span class="tactic">at</span> 1 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>; <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span> (<span class="id">_</span> * <span class="id">_</span> * <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (2 * <span class="id">x</span>' * <span class="id">_</span> * <span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (2 * <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">my</span> * <span class="id">x</span>' * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>)))) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">u1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">x</span>', <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">exact</span> <span class="id">He</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 2 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 1 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1); <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_minus">Z2R_minus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_reg_r">Zplus_le_reg_r</a></span> <span class="id">_</span> <span class="id">_</span> 1); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">exact</span> <span class="id">He</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|<span class="id">bpow_simplify</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">_</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">_</span>) * <span class="id">_</span>) <span class="kwd">with</span> <span class="id">x</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">my</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>) <span class="kwd">with</span> <span class="id">u1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_l">Rmult_lt_reg_l</a></span> (/ 2)); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_plus_distr_l">Rmult_plus_distr_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">lra</span>]; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- <span class="id">y</span> * <span class="id">x</span>')); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_l">Rmult_lt_reg_l</a></span> (/ <span class="id">y</span>)); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_minus_distr_l">Rmult_minus_distr_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>]; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">u2</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* { <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">bpow_simplify</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_reg_r">Zplus_le_reg_r</a></span> <span class="id">_</span> <span class="id">_</span> (- <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_assoc">Zplus_assoc</a></span>; <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span> (- <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_div_disj">ln_beta_div_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span>) <span class="kwd">as</span> [<span class="id">Hxy</span>|<span class="id">Hxy</span>]; <span class="tactic">rewrite</span> <span class="id">Hxy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp</span>; [| |<span class="tactic">rewrite</span> &lt;- <span class="id">Hxy</span>]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span> + 1)%<span class="id">Z</span> <span class="kwd">with</span> ((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> + 1) - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">assert</span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> + 1) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span>|<span class="tactic">omega</span>]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + 1 - <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span> + 1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Hxy</span>.<br/>
- <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;&lt;&nbsp;fexp1&nbsp;(ln_beta&nbsp;(x&nbsp;/&nbsp;y))&nbsp;+&nbsp;fexp1&nbsp;(ln_beta&nbsp;y)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 * <span class="id">x</span>' * <span class="id">y</span> + <span class="id">u1</span> * <span class="id">y</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">Fx</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id">Fy</span> <span class="tactic">at</span> 1 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>; <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span> (<span class="id">_</span> * <span class="id">_</span> * <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (2 * <span class="id">x</span>' * <span class="id">_</span> * <span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (2 * <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">my</span> * <span class="id">x</span>' * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) - <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">u1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">x</span>', <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span> <span class="id">_</span> (<span class="id">_</span> - <span class="id">_</span>)%<span class="id">Z</span>); [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 2 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 5 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 1 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1); <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_minus">Z2R_minus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_reg_r">Zplus_le_reg_r</a></span> <span class="id">_</span> <span class="id">_</span> 1); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 5 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">_</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">_</span>) * <span class="id">_</span>) <span class="kwd">with</span> <span class="id">x</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">my</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>) <span class="kwd">with</span> <span class="id">u1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_l">Rmult_lt_reg_l</a></span> (/ 2)); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_plus_distr_l">Rmult_plus_distr_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">lra</span>]; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- <span class="id">y</span> * <span class="id">x</span>')); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_l">Rmult_lt_reg_l</a></span> (/ <span class="id">y</span>)); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_minus_distr_l">Rmult_minus_distr_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>]; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">u2</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* { <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">bpow_simplify</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_reg_r">Zplus_le_reg_r</a></span> <span class="id">_</span> <span class="id">_</span> (- <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span> (- <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_div_disj">ln_beta_div_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span>) <span class="kwd">as</span> [<span class="id">Hxy</span>|<span class="id">Hxy</span>]; <span class="tactic">rewrite</span> <span class="id">Hxy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hexp</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Hxy</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_div_aux2">double_round_div_aux2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_hyp">double_round_div_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;~ (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#midp">midp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>) + / 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5864')">Proof.</div>
<div class="proofscript" id="proof5864">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hf1</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hfx</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">assert</span> (<span class="id">Hfy</span> : (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|]|].<br/>
<span class="tactic">cut</span> (~ (/ 2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> (<span class="id">x</span> / <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt; <span class="id">x</span> / <span class="id">y</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> / <span class="id">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;= / 2 * (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> (<span class="id">x</span> / <span class="id">y</span>) + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp2</span> (<span class="id">x</span> / <span class="id">y</span>)))).<br/>
{ <span class="tactic">intro</span> <span class="id">H</span>; <span class="tactic">intro</span> <span class="id">H</span>'; <span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> / <span class="id">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>'.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_l">Rplus_le_reg_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> / <span class="id">y</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>'. }<br/>
<span class="tactic">set</span> (<span class="id">u1</span> := <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">u2</span> := <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp2</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">x</span>' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id">fexp1</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">x</span> / <span class="id">y</span>)).<br/>
<span class="tactic">assert</span> (<span class="id">S</span> : (<span class="id">x</span> / <span class="id">y</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_integral_contrapositive_currified">Rmult_integral_contrapositive_currified</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>|<span class="id">idtac</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_neq_0_compat">Rinv_neq_0_compat</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">revert</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">set</span> (<span class="id">mx</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)))).<br/>
<span class="tactic">set</span> (<span class="id">my</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">y</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)))).<br/>
<span class="tactic">intros</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">intro</span> <span class="id">Hlr</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> (/ 2 * (<span class="id">u1</span> + <span class="id">u2</span>))).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">x</span> / <span class="id">y</span> - <span class="id">x</span>'); [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hlr</span>].<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> <span class="id">x</span>'); <span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="id">y</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Py</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>]; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_l">Rmult_lt_reg_l</a></span> 2); [<span class="id">lra</span>|].<br/>
<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_plus_distr_l">Rmult_plus_distr_l</a></span>.<br/>
<span class="tactic">do</span> 5 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_r">Rinv_r</a></span>; [|<span class="id">lra</span>]; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>) - <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))%<span class="id">Z</span>) <span class="kwd">as</span> [<span class="id">He</span>|<span class="id">He</span>].<br/>
- <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;(x&nbsp;/&nbsp;y))&nbsp;+&nbsp;fexp1&nbsp;(ln_beta&nbsp;y)&nbsp;&lt;=&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">u1</span> * <span class="id">y</span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ 2 * <span class="id">x</span>' * <span class="id">y</span>).<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_compat_r">Rplus_lt_compat_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">u2</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* { <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">bpow_simplify</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_reg_r">Zplus_le_reg_r</a></span> <span class="id">_</span> <span class="id">_</span> (- <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_assoc">Zplus_assoc</a></span>; <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span> (- <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_div_disj">ln_beta_div_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span>) <span class="kwd">as</span> [<span class="id">Hxy</span>|<span class="id">Hxy</span>]; <span class="tactic">rewrite</span> <span class="id">Hxy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hexp</span>; [| |<span class="tactic">rewrite</span> &lt;- <span class="id">Hxy</span>]|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> - <span class="id">_</span> + 1)%<span class="id">Z</span> <span class="kwd">with</span> ((<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> + 1) - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hexp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">now</span> <span class="tactic">assert</span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> + 1) &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>)%<span class="id">Z</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span>|<span class="tactic">omega</span>]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">_</span> + 1 - <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span> + 1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Hxy</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rge_le">Rge_le</a></span>; <span class="tactic">rewrite</span> <span class="id">Fx</span> <span class="tactic">at</span> 1; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">u1</span> * <span class="id">y</span>) <span class="kwd">with</span> (<span class="id">u1</span> * (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">my</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="tactic">rewrite</span> <span class="id">Fy</span> <span class="tactic">at</span> 1].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (2 * <span class="id">x</span>' * <span class="id">y</span>) <span class="kwd">with</span> (2 * <span class="id">x</span>' * (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">my</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>; <span class="tactic">rewrite</span> <span class="id">Fy</span> <span class="tactic">at</span> 1].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">u1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">x</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">x</span>', <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span> <span class="id">_</span> (<span class="id">_</span> - <span class="id">_</span>)%<span class="id">Z</span>); [|<span class="tactic">exact</span> <span class="id">He</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 2 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 1 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1); <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_assoc">Zplus_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">exact</span> <span class="id">He</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">mx</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">mx</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> (<span class="id">x</span> / <span class="id">y</span>)))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">_</span> <span class="id">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">_</span>) * <span class="id">_</span>) <span class="kwd">with</span> <span class="id">x</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>) <span class="kwd">with</span> <span class="id">u1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_l">Rmult_lt_reg_l</a></span> (/ 2)); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_plus_distr_l">Rmult_plus_distr_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">lra</span>]; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- <span class="id">y</span> * <span class="id">x</span>')); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_l">Rmult_lt_reg_l</a></span> (/ <span class="id">y</span>)); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_plus_distr_l">Rmult_plus_distr_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_r_reverse">Ropp_mult_distr_r_reverse</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse">Ropp_mult_distr_l_reverse</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>]; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> (/ <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span> (- <span class="id">x</span>')).<br/>
- <span class="comment">(*&nbsp;fexp1&nbsp;(ln_beta&nbsp;x)&nbsp;&lt;&nbsp;fexp1&nbsp;(ln_beta&nbsp;(x&nbsp;/&nbsp;y))&nbsp;+&nbsp;fexp1&nbsp;(ln_beta&nbsp;y)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (2 * <span class="id">x</span>' * <span class="id">y</span> + <span class="id">u1</span> * <span class="id">y</span> + <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))).<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_assoc">Rplus_assoc</a></span>; <span class="tactic">do</span> 2 <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">u2</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_lt_inv">Rabs_lt_inv</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">unfold</span> <span class="id">u2</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">bpow_simplify</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_reg_r">Zplus_le_reg_r</a></span> <span class="id">_</span> <span class="id">_</span> (- <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span> (- <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta_div_disj">ln_beta_div_disj</a></span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span>) <span class="kwd">as</span> [<span class="id">Hxy</span>|<span class="id">Hxy</span>]; <span class="tactic">rewrite</span> <span class="id">Hxy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hexp</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Hxy</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rge_le">Rge_le</a></span>; <span class="tactic">rewrite</span> <span class="id">Fx</span> <span class="tactic">at</span> 1; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Fy</span> <span class="tactic">at</span> 1 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (- <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (2 * <span class="id">x</span>' * <span class="id">_</span> * <span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (2 * <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">my</span> * <span class="id">x</span>' * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>) - <span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">u1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">x</span>', <span class="id">u1</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span> <span class="id">_</span> (<span class="id">_</span> - <span class="id">_</span>)%<span class="id">Z</span>); [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 2 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 5 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> 1 <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1); <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 5 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>; [|<span class="tactic">omega</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">mx</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bpow_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">_</span> * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>) <span class="kwd">with</span> <span class="id">x</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> (<span class="id">fexp1</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#ln_beta">ln_beta</a></span> <span class="id">y</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 2 <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">my</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#bpow">bpow</a></span> <span class="id">_</span>) <span class="kwd">with</span> <span class="id">u1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_l">Rmult_lt_reg_l</a></span> (/ 2)); [<span class="id">lra</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_plus_distr_l">Rmult_plus_distr_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 4 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">lra</span>]; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> (- <span class="id">y</span> * <span class="id">x</span>')); <span class="id">ring_simplify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_l">Rmult_lt_reg_l</a></span> (/ <span class="id">y</span>)); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_plus_distr_l">Rmult_plus_distr_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_r_reverse">Ropp_mult_distr_r_reverse</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse">Ropp_mult_distr_l_reverse</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>; [|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>]; <span class="tactic">do</span> 2 <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span> (/ <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span> (- <span class="id">x</span>')).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_div_aux">double_round_div_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> = 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#n">n</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_hyp">double_round_div_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; 0 &lt; <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5865')">Proof.</div>
<div class="proofscript" id="proof5865">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Ebeta</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Px</span> <span class="id">Py</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Pxy</span> : 0 &lt; <span class="id">x</span> / <span class="id">y</span>).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>; [<span class="tactic">exact</span> <span class="id">Px</span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>. }<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_all_mid_cases">double_round_all_mid_cases</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Vfexp1</span>.<br/>
- <span class="tactic">exact</span> <span class="id">Vfexp2</span>.<br/>
- <span class="tactic">exact</span> <span class="id">Pxy</span>.<br/>
- <span class="tactic">apply</span> <span class="id">Hexp</span>.<br/>
- <span class="tactic">intros</span> <span class="id">Hf1</span> <span class="id">Hlxy</span>.<br/>
&nbsp;&nbsp;<span class="id">casetype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_aux0">double_round_div_aux0</a></span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span>).<br/>
- <span class="tactic">intros</span> <span class="id">Hf1</span> <span class="id">Hlxy</span>.<br/>
&nbsp;&nbsp;<span class="id">casetype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_aux1">double_round_div_aux1</a></span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span>).<br/>
- <span class="tactic">intro</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq_mid_beta_even">double_round_eq_mid_beta_even</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Hexp</span>.<br/>
- <span class="tactic">intros</span> <span class="id">Hf1</span> <span class="id">Hlxy</span>.<br/>
&nbsp;&nbsp;<span class="id">casetype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_aux2">double_round_div_aux2</a></span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">_</span> <span class="id">_</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="double_round_div">double_round_div</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp1</span> <span class="id">fexp2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">choice1</span> <span class="id">choice2</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>),<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> = 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#n">n</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_hyp">double_round_div_hyp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;&gt; 0 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5866')">Proof.</div>
<div class="proofscript" id="proof5866">
<span class="tactic">intros</span> <span class="id">fexp1</span> <span class="id">fexp2</span> <span class="id">Vfexp1</span> <span class="id">Vfexp2</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Ebeta</span> <span class="id">Hexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Nzy</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rtotal_order">Rtotal_order</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Nx</span>|[<span class="id">Zx</span>|<span class="id">Px</span>]].<br/>
- <span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rtotal_order">Rtotal_order</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Ny</span>|[<span class="id">Zy</span>|<span class="id">Py</span>]].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#Ropp_div">Ropp_div</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_inv_permute">Ropp_inv_permute</a></span>; [|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_r_reverse">Ropp_mult_distr_r_reverse</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">fold</span> ((- <span class="id">x</span>) / (- <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span> <span class="kwd">in</span> <span class="id">Nx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span> <span class="kwd">in</span> <span class="id">Ny</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span> <span class="kwd">in</span> <span class="id">Nx</span>, <span class="id">Ny</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_aux">double_round_div_aux</a></span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">casetype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>; <span class="tactic">apply</span> <span class="id">Nzy</span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#Ropp_div">Ropp_div</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_eq_compat">Ropp_eq_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span> <span class="kwd">in</span> <span class="id">Nx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span> <span class="kwd">in</span> <span class="id">Nx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_aux">double_round_div_aux</a></span>.<br/>
- <span class="comment">(*&nbsp;x&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Zx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>; [|<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span>].<br/>
- <span class="comment">(*&nbsp;x&nbsp;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rtotal_order">Rtotal_order</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Ny</span>|[<span class="id">Zy</span>|<span class="id">Py</span>]].<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_inv_permute">Ropp_inv_permute</a></span>; [|<span class="id">lra</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_r_reverse">Ropp_mult_distr_r_reverse</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> 3 <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_eq_compat">Ropp_eq_compat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span> <span class="kwd">in</span> <span class="id">Ny</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span> <span class="kwd">in</span> <span class="id">Ny</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span> <span class="kwd">in</span> <span class="id">Fy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_aux">double_round_div_aux</a></span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="id">casetype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>; <span class="tactic">apply</span> <span class="id">Nzy</span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;y&nbsp;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_aux">double_round_div_aux</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_div.Double_round_div_FLX">Double_round_div_FLX</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_div.Double_round_div_FLX.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLX.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FLX_double_round_div_hyp">FLX_double_round_div_hyp</a></span> :<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLX.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_hyp">double_round_div_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5867')">Proof.</div>
<div class="proofscript" id="proof5867">
<span class="tactic">intros</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_hyp">double_round_div_hyp</a></span>.<br/>
<span class="tactic">split</span>; [<span class="id">now</span> <span class="tactic">intro</span> <span class="id">ex</span>; <span class="tactic">omega</span>|].<br/>
<span class="tactic">split</span>; [|<span class="tactic">split</span>; [|<span class="tactic">split</span>]]; <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">ey</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_div_FLX">double_round_div_FLX</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> = 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#n">n</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLX.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;&gt; 0 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_format">FLX_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLX.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLX.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id">prec</span>') <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5868')">Proof.</div>
<div class="proofscript" id="proof5868">
<span class="tactic">intros</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Ebeta</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Nzy</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div">double_round_div</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp_valid">FLX_exp_valid</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Ebeta</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLX_double_round_div_hyp">FLX_double_round_div_hyp</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Nzy</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#generic_format_FLX">generic_format_FLX</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLX">Double_round_div_FLX</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_div.Double_round_div_FLT">Double_round_div_FLT</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLT</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span> <span class="id"><a name="Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">emin</span>' <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FLT_double_round_div_hyp">FLT_double_round_div_hyp</a></span> :<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span> - 2)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_hyp">double_round_div_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5869')">Proof.</div>
<div class="proofscript" id="proof5869">
<span class="tactic">intros</span> <span class="id">Hemin</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_hyp">double_round_div_hyp</a></span>.<br/>
<span class="tactic">split</span>; [<span class="tactic">intro</span> <span class="id">ex</span>|<span class="tactic">split</span>; [|<span class="tactic">split</span>; [|<span class="tactic">split</span>]]; <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">ey</span>].<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> + 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> + 1 - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zmax_spec">Zmax_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> - <span class="id">prec</span>') <span class="id">emin</span>').<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_div_FLT">double_round_div_FLT</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> = 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#n">n</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span> - 2)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;&gt; 0 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_format">FLT_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp">FLT_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5870')">Proof.</div>
<div class="proofscript" id="proof5870">
<span class="tactic">intros</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Ebeta</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Nzy</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div">double_round_div</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#FLT_exp_valid">FLT_exp_valid</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Ebeta</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FLT_double_round_div_hyp">FLT_double_round_div_hyp</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Nzy</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLT.html#generic_format_FLT">generic_format_FLT</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FLT">Double_round_div_FLT</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Double_round.Double_round_div.Double_round_div_FTZ">Double_round_div_FTZ</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FLX</span>.<br/>
<span class="kwd">Import</span> <span class="id">Fcore_FTZ</span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span> <span class="id"><a name="Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">emin</span>' <span class="id">prec</span>' : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span>' : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id">prec</span>' }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="FTZ_double_round_div_hyp">FTZ_double_round_div_hyp</a></span> :<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' + <span class="id">prec</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span> - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_hyp">double_round_div_hyp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5871')">Proof.</div>
<div class="proofscript" id="proof5871">
<span class="tactic">intros</span> <span class="id">Hemin</span> <span class="id">Hprec</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="kwd">in</span> <span class="id">prec_gt_0_</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div_hyp">double_round_div_hyp</a></span>.<br/>
<span class="tactic">split</span>; [<span class="tactic">intro</span> <span class="id">ex</span>|<span class="tactic">split</span>; [|<span class="tactic">split</span>; [|<span class="tactic">split</span>]]; <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">ey</span>].<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> + 1 - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> + 1 - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> - <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ltb_spec">Z.ltb_spec</a></span> (<span class="id">ex</span> - <span class="id">ey</span> - <span class="id">prec</span>') <span class="id">emin</span>');<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="double_round_div_FTZ">double_round_div_FTZ</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice1</span> <span class="id">choice2</span>,<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> = 2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#n">n</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id">emin</span>' + <span class="id">prec</span>' &lt;= <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span> - 1)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(2 * <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span> &lt;= <span class="id">prec</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> &lt;&gt; 0 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_format">FTZ_format</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_eq">double_round_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.emin">emin</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp">FTZ_exp</a></span> <span class="id">emin</span>' <span class="id">prec</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice1">choice1</a></span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#choice2">choice2</a></span> (<span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#x">x</a></span> / <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5872')">Proof.</div>
<div class="proofscript" id="proof5872">
<span class="tactic">intros</span> <span class="id">choice1</span> <span class="id">choice2</span> <span class="id">Ebeta</span> <span class="id">Hemin</span> <span class="id">Hprec</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Nzy</span> <span class="id">Fx</span> <span class="id">Fy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#double_round_div">double_round_div</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#FTZ_exp_valid">FTZ_exp_valid</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Ebeta</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#FTZ_double_round_div_hyp">FTZ_double_round_div_hyp</a></span>.<br/>
- <span class="tactic">exact</span> <span class="id">Nzy</span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>.<br/>
- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FTZ.html#generic_format_FTZ">generic_format_FTZ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div.Double_round_div_FTZ">Double_round_div_FTZ</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round.Double_round_div">Double_round_div</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Appli.Fappli_double_round.html#Double_round">Double_round</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
