
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module CSEproof</title>
<meta name="description" content="Documentation of Coq module CSEproof" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module CSEproof</h1>
<div class="coq">
<br/>
<div class="doc">Correctness proof for common subexpression elimination. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span> <span class="id"><a href="compcert.lib.Lattice.html">Lattice</a></span> <span class="id"><a href="compcert.backend.Kildall.html">Kildall</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.common.Linking.html">Linking</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span> <span class="id"><a href="compcert.common.Events.html">Events</a></span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="compcert.common.Smallstep.html">Smallstep</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span> <span class="id"><a href="compcert.backend.Registers.html">Registers</a></span> <span class="id"><a href="compcert.backend.RTL.html">RTL</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.backend.ValueDomain.html">ValueDomain</a></span> <span class="id"><a href="compcert.x86.ValueAOp.html">ValueAOp</a></span> <span class="id"><a href="compcert.backend.ValueAnalysis.html">ValueAnalysis</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.backend.CSEdomain.html">CSEdomain</a></span> <span class="id"><a href="compcert.x86.CombineOp.html">CombineOp</a></span> <span class="id"><a href="compcert.x86.CombineOpproof.html">CombineOpproof</a></span> <span class="id"><a href="compcert.backend.CSE.html">CSE</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.sflib.html">sflib</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_prog">match_prog</a></span> (<span class="id">prog</span> <span class="id">tprog</span>: <span class="id"><a href="compcert.backend.RTL.html#program">RTL.program</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#match_program">match_program</a></span> (<span class="kwd">fun</span> <span class="id">cu</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu">cu</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#prog">prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tprog">tprog</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_program_match">transf_program_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prog</span> <span class="id">tprog</span>, <span class="id"><a href="compcert.backend.CSE.html#transf_program">transf_program</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#prog">prog</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tprog">tprog</a></span> -&gt; <span class="id"><a href="compcert.backend.CSEproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#prog">prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tprog">tprog</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3292')">Proof.</div>
<div class="proofscript" id="proof3292">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Linking.html#match_transform_partial_program_contextual">match_transform_partial_program_contextual</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Soundness of operations over value numberings </h1>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="wf_equation_incr">wf_equation_incr</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">next1</span> <span class="id">next2</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_equation">wf_equation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#next1">next1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e">e</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#next1">next1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#next2">next2</a></span> -&gt; <span class="id"><a href="compcert.backend.CSEdomain.html#wf_equation">wf_equation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#next2">next2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e">e</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3293')">Proof.</div>
<div class="proofscript" id="proof3293">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_equation">wf_equation</a></span>; <span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">e</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span> <span class="kwd">with</span> <span class="id">next1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span> <span class="kwd">with</span> <span class="id">next1</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Extensionality with respect to valuations. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="valu_agree">valu_agree</a></span> (<span class="id">valu1</span> <span class="id">valu2</span>: <span class="id"><a href="compcert.backend.CSEdomain.html#valuation">valuation</a></span>) (<span class="id">upto</span>: <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#upto">upto</a></span> -&gt; <span class="id"><a href="compcert.backend.CSEproof.html#valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> = <span class="id"><a href="compcert.backend.CSEproof.html#valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="EXTEN">EXTEN</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EXTEN.valu1">valu1</a></span>: <span class="id"><a href="compcert.backend.CSEdomain.html#valuation">valuation</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EXTEN.upto">upto</a></span>: <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EXTEN.valu2">valu2</a></span>: <span class="id"><a href="compcert.backend.CSEdomain.html#valuation">valuation</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="EXTEN.AGREE">AGREE</a></span>: <span class="id"><a href="compcert.backend.CSEproof.html#valu_agree">valu_agree</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.upto">upto</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EXTEN.ge">ge</a></span>: <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EXTEN.sp">sp</a></span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EXTEN.rs">rs</a></span>: <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EXTEN.m">m</a></span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="valnums_val_exten">valnums_val_exten</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.upto">upto</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3294')">Proof.</div>
<div class="proofscript" id="proof3294">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_map_exten">list_map_exten</a></span>. <span class="tactic">intros</span>. <span class="tactic">symmetry</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="rhs_eval_to_exten">rhs_eval_to_exten</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#valnums_rhs">valnums_rhs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.upto">upto</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3295')">Proof.</div>
<div class="proofscript" id="proof3295">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="id">constructor</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnums_val_exten">valnums_val_exten</a></span> <span class="tactic">by</span> <span class="tactic">assumption</span>. <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnums_val_exten">valnums_val_exten</a></span> <span class="tactic">by</span> <span class="tactic">assumption</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="equation_holds_exten">equation_holds_exten</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#equation_holds">equation_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_equation">wf_equation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.upto">upto</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#equation_holds">equation_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e">e</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3296')">Proof.</div>
<div class="proofscript" id="proof3296">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">e</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
- <span class="id">constructor</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.AGREE">AGREE</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs_eval_to_exten">rhs_eval_to_exten</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs_eval_to_exten">rhs_eval_to_exten</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.AGREE">AGREE</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="numbering_holds_exten">numbering_holds_exten</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.upto">upto</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3297')">Proof.</div>
<div class="proofscript" id="proof3297">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#equation_holds_exten">equation_holds_exten</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#wf_equation_incr">wf_equation_incr</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN.AGREE">AGREE</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_reg">wf_num_reg</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.CSEproof.html#EXTEN">EXTEN</a></span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">splitall</span> := <span class="tactic">repeat</span> (<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span> |- <span class="id">_</span> /\ <span class="id">_</span> =&gt; <span class="tactic">split</span> <span class="kwd">end</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="valnum_reg_holds">valnum_reg_holds</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">valu1</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">n</span> <span class="id">r</span> <span class="id">n</span>' <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#valnum_reg">valnum_reg</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> = (<span class="id">n</span>', <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id">n</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> = <span class="id"><a href="compcert.backend.CSEproof.html#valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.backend.CSEproof.html#valu_agree">valu_agree</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id">n</span>'.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>) <span class="id">n</span>'.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3298')">Proof.</div>
<div class="proofscript" id="proof3298">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#valnum_reg">valnum_reg</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_reg">num_reg</a></span> <span class="id">n</span>)!<span class="id">r</span> <span class="kwd">as</span> [<span class="id">v</span>'|] <span class="id">eqn</span>:<span class="id">NR</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="id">exists</span> <span class="id">valu1</span>; <span class="id">splitall</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">valu2</span> := <span class="kwd">fun</span> <span class="id">vn</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vn">vn</a></span> <span class="id">n</span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>) <span class="kwd">then</span> <span class="id">rs</span>#<span class="id">r</span> <span class="kwd">else</span> <span class="id">valu1</span> <span class="id"><a href="compcert.backend.CSEproof.html#vn">vn</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">AG</span>: <span class="id"><a href="compcert.backend.CSEproof.html#valu_agree">valu_agree</a></span> <span class="id">valu1</span> <span class="id">valu2</span> <span class="id">n</span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id">valu2</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_false">peq_false</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu2</span>; <span class="id">splitall</span>.<br/>
+ <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
* <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#wf_equation_incr">wf_equation_incr</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span> <span class="id">n</span>). <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">v</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">r0</span> <span class="kwd">with</span> <span class="id">r</span> <span class="tactic">by</span> (<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">intuition</span>). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>. <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_val">wf_num_val</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">auto</span>.<br/>
* <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#equation_holds_exten">equation_holds_exten</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
* <span class="tactic">unfold</span> <span class="id">valu2</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_false">peq_false</a></span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
+ <span class="tactic">unfold</span> <span class="id">valu2</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true</a></span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">auto</span>.<br/>
+ <span class="id">xomega</span>.<br/>
+ <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="valnum_regs_holds">valnum_regs_holds</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rl</span> <span class="id">valu1</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">n</span> <span class="id">n</span>' <span class="id">vl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl">rl</a></span> = (<span class="id">n</span>', <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id">n</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>##<span class="id"><a href="compcert.backend.CSEproof.html#rl">rl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.backend.CSEproof.html#valu_agree">valu_agree</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">v</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id">n</span>'.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>))<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>) <span class="id">n</span>'.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3299')">Proof.</div>
<div class="proofscript" id="proof3299">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">rl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="id">exists</span> <span class="id">valu1</span>; <span class="id">splitall</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>; <span class="tactic">tauto</span>. <span class="id">xomega</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_reg">valnum_reg</a></span> <span class="id">n</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">n1</span> <span class="id">v1</span>] <span class="id">eqn</span>:<span class="id">V1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">n1</span> <span class="id">rl</span>) <span class="kwd">as</span> [<span class="id">n2</span> <span class="id">vs</span>] <span class="id">eqn</span>:<span class="id">V2</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_reg_holds">valnum_reg_holds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">valu2</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">IHrl</span> <span class="id">valu2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">valu3</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span> &amp; <span class="id">S</span> &amp; <span class="id">T</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu3</span>; <span class="id">splitall</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">simpl</span>; <span class="tactic">f_equal</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">R</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id">valu2</span> <span class="id">v</span>); <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">R</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">v1</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;+ <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_valnum_rhs_charact">find_valnum_rhs_charact</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rh</span> <span class="id">v</span> <span class="id">eqs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#find_valnum_rhs">find_valnum_rhs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh">rh</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs">eqs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh">rh</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#eqs">eqs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3300')">Proof.</div>
<div class="proofscript" id="proof3300">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">eqs</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">a</span>. <span class="tactic">destruct</span> (<span class="id">strict</span> &amp;&amp; <span class="id"><a href="compcert.backend.CSEdomain.html#eq_rhs">eq_rhs</a></span> <span class="id">rh</span> <span class="id">r</span>) <span class="id">eqn</span>:<span class="id">T</span>.<br/>
&nbsp;&nbsp;+ <span class="id">InvBooleans</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id">right</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">find_valnum_rhs</span>'<span class="id">_charact</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rh</span> <span class="id">v</span> <span class="id">eqs</span>,<br/>
&nbsp;&nbsp;<span class="id">find_valnum_rhs</span>' <span class="id"><a href="compcert.backend.CSEproof.html#rh">rh</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs">eqs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> -&gt; <span class="id">exists</span> <span class="id">strict</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#strict">strict</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh">rh</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#eqs">eqs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3301')">Proof.</div>
<div class="proofscript" id="proof3301">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">eqs</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">a</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#eq_rhs">eq_rhs</a></span> <span class="id">rh</span> <span class="id">r</span>) <span class="id">eqn</span>:<span class="id">T</span>.<br/>
&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H</span>. <span class="id">exists</span> <span class="id">strict</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">IHeqs</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s</span> <span class="id">IN</span>]. <span class="id">exists</span> <span class="id">s</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_valnum_num_charact">find_valnum_num_charact</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">r</span> <span class="id">eqs</span>, <span class="id"><a href="compcert.backend.CSE.html#find_valnum_num">find_valnum_num</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs">eqs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#eqs">eqs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3302')">Proof.</div>
<div class="proofscript" id="proof3302">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">eqs</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">a</span>. <span class="tactic">destruct</span> (<span class="id">strict</span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">v</span> <span class="id">v0</span>) <span class="id">eqn</span>:<span class="id">T</span>.<br/>
&nbsp;&nbsp;+ <span class="id">InvBooleans</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reg_valnum_sound">reg_valnum_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">v</span> <span class="id">r</span> <span class="id">valu</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#reg_valnum">reg_valnum</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> = <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3303')">Proof.</div>
<div class="proofscript" id="proof3303">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#reg_valnum">reg_valnum</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_val">num_val</a></span> <span class="id">n</span>)#<span class="id">v</span> <span class="kwd">as</span> [ | <span class="id">r1</span> <span class="id">rl</span>] <span class="id">eqn</span>:<span class="id">E</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#num_holds_reg">num_holds_reg</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_val">wf_num_val</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="regs_valnums_sound">regs_valnums_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">valu</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">rl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#regs_valnums">regs_valnums</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl">rl</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>##<span class="id"><a href="compcert.backend.CSEproof.html#rl">rl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3304')">Proof.</div>
<div class="proofscript" id="proof3304">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reg_valnum">reg_valnum</a></span> <span class="id">n</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">r1</span>|] <span class="id">eqn</span>:<span class="id">RV1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#regs_valnums">regs_valnums</a></span> <span class="id">n</span> <span class="id">vl</span>) <span class="kwd">as</span> [<span class="id">rl1</span>|] <span class="id">eqn</span>:<span class="id">RVL</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">f_equal</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#reg_valnum_sound">reg_valnum_sound</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_rhs_sound">find_rhs_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">rh</span> <span class="id">r</span> <span class="id">valu</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#find_rhs">find_rhs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh">rh</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh">rh</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3305')">Proof.</div>
<div class="proofscript" id="proof3305">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#find_rhs">find_rhs</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">find_valnum_rhs</span>' <span class="id">rh</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_eqs">num_eqs</a></span> <span class="id">n</span>)) <span class="kwd">as</span> [<span class="id">vres</span>|] <span class="id">eqn</span>:<span class="id">E</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">find_valnum_rhs</span>'<span class="id">_charact</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">strict</span> <span class="id">IN</span>].<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#reg_valnum_sound">reg_valnum_sound</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#num_holds_eq">num_holds_eq</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EH</span>. <span class="id">inv</span> <span class="id">EH</span>.<br/>
- <span class="id">exists</span> (<span class="id">valu</span> <span class="id">vres</span>); <span class="tactic">auto</span>.<br/>
- <span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="in_remove">in_remove</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) (<span class="id">eq</span>: <span class="kwd">forall</span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.CSEproof.html#A">A</a></span>), {<span class="id"><a href="compcert.backend.CSEproof.html#x">x</a></span>=<span class="id"><a href="compcert.backend.CSEproof.html#y">y</a></span>}+{<span class="id"><a href="compcert.backend.CSEproof.html#x">x</a></span>&lt;&gt;<span class="id"><a href="compcert.backend.CSEproof.html#y">y</a></span>}) <span class="id">x</span> <span class="id">y</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#y">y</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#remove">List.remove</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eq">eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#x">x</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#l">l</a></span>) &lt;-&gt; <span class="id"><a href="compcert.backend.CSEproof.html#x">x</a></span> &lt;&gt; <span class="id"><a href="compcert.backend.CSEproof.html#y">y</a></span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#y">y</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3306')">Proof.</div>
<div class="proofscript" id="proof3306">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">eq</span> <span class="id">x</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">rewrite</span> <span class="id">IHl</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">IHl</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forget_reg_charact">forget_reg_charact</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">rd</span> <span class="id">r</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_numbering">wf_numbering</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> (<span class="id"><a href="compcert.backend.CSE.html#forget_reg">forget_reg</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rd">rd</a></span>)) -&gt; <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> &lt;&gt; <span class="id"><a href="compcert.backend.CSEproof.html#rd">rd</a></span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_val">num_val</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3307')">Proof.</div>
<div class="proofscript" id="proof3307">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#forget_reg">forget_reg</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id">rd</span> <span class="id">n</span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_reg">num_reg</a></span>)) <span class="kwd">as</span> [<span class="id">vd</span>|] <span class="id">eqn</span>:<span class="id">GET</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">v</span> <span class="id">vd</span>).<br/>
&nbsp;&nbsp;+ <span class="tactic">subst</span> <span class="id">v</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#in_remove">in_remove</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_val">wf_num_val</a></span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
- <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_val">wf_num_val</a></span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="update_reg_charact">update_reg_charact</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">rd</span> <span class="id">vd</span> <span class="id">r</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_numbering">wf_numbering</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> (<span class="id"><a href="compcert.backend.CSE.html#update_reg">update_reg</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rd">rd</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vd">vd</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rd">rd</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vd">vd</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_reg">num_reg</a></span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3308')">Proof.</div>
<div class="proofscript" id="proof3308">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#update_reg">update_reg</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">v</span> <span class="id">vd</span>).<br/>
- <span class="tactic">subst</span> <span class="id">v</span>. <span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
+ <span class="tactic">subst</span> <span class="id">r</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
+ <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#forget_reg_charact">forget_reg_charact</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_val">wf_num_val</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#forget_reg_charact">forget_reg_charact</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_val">wf_num_val</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="rhs_eval_to_inj">rhs_eval_to_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">valu</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">m</span> <span class="id">rh</span> <span class="id">v1</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh">rh</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v1">v1</a></span> -&gt; <span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh">rh</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v2">v2</a></span> -&gt; <span class="id"><a href="compcert.backend.CSEproof.html#v1">v1</a></span> = <span class="id"><a href="compcert.backend.CSEproof.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3309')">Proof.</div>
<div class="proofscript" id="proof3309">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_rhs_holds">add_rhs_holds</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">valu1</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">n</span> <span class="id">rd</span> <span class="id">rh</span> <span class="id">rs</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh">rh</a></span> (<span class="id">rs</span>'#<span class="id"><a href="compcert.backend.CSEproof.html#rd">rd</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_rhs">wf_rhs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rh">rh</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> &lt;&gt; <span class="id"><a href="compcert.backend.CSEproof.html#rd">rd</a></span> -&gt; <span class="id">rs</span>'#<span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> = <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu2</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id">rs</span>' <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> (<span class="id"><a href="compcert.backend.CSE.html#add_rhs">add_rhs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rd">rd</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rh">rh</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3310')">Proof.</div>
<div class="proofscript" id="proof3310">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#add_rhs">add_rhs</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#find_valnum_rhs">find_valnum_rhs</a></span> <span class="id">rh</span> <span class="id">n</span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_eqs">num_eqs</a></span>)) <span class="kwd">as</span> [<span class="id">vres</span>|] <span class="id">eqn</span>:<span class="id">FIND</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;A&nbsp;value&nbsp;number&nbsp;exists&nbsp;already&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_valnum_rhs_charact">find_valnum_rhs_charact</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">IN</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#wf_num_eqs">wf_num_eqs</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#num_holds_eq">num_holds_eq</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EH</span>. <span class="id">inv</span> <span class="id">EH</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">rs</span>'#<span class="id">rd</span> = <span class="id">valu1</span> <span class="id">vres</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs_eval_to_inj">rhs_eval_to_inj</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu1</span>; <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
+ <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r</span> <span class="id">rd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#update_reg_charact">update_reg_charact</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
+ <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r</span> <span class="id">rd</span>).<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;Assigning&nbsp;a&nbsp;new&nbsp;value&nbsp;number&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">valu2</span> := <span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id">n</span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>) <span class="kwd">then</span> <span class="id">rs</span>'#<span class="id">rd</span> <span class="kwd">else</span> <span class="id">valu1</span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">AG</span>: <span class="id"><a href="compcert.backend.CSEproof.html#valu_agree">valu_agree</a></span> <span class="id">valu1</span> <span class="id">valu2</span> <span class="id">n</span>.(<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id">valu2</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_false">peq_false</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu2</span>; <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
+ <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">destruct</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">simpl</span>; <span class="tactic">split</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#wf_equation_incr">wf_equation_incr</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span> <span class="id">n</span>). <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r</span> <span class="id">rd</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#update_reg_charact">update_reg_charact</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
+ <span class="tactic">destruct</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">unfold</span> <span class="id">valu2</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs_eval_to_exten">rhs_eval_to_exten</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#equation_holds_exten">equation_holds_exten</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">unfold</span> <span class="id">valu2</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r</span> <span class="id">rd</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_false">peq_false</a></span>. <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_ne">Plt_ne</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_op_holds">add_op_holds</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">valu1</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">n</span> <span class="id">op</span> (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">v</span> <span class="id">dst</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>##<span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu2</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#dst">dst</a></span> &lt;- <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> (<span class="id"><a href="compcert.backend.CSE.html#add_op">add_op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#dst">dst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3311')">Proof.</div>
<div class="proofscript" id="proof3311">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#add_op">add_op</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.Op.html#is_move_operation">is_move_operation</a></span> <span class="id">op</span> <span class="id">args</span>) <span class="kwd">as</span> [<span class="id">src</span>|] <span class="id">eqn</span>:<span class="id">ISMOVE</span>.<br/>
- <span class="comment">(*&nbsp;special&nbsp;case&nbsp;for&nbsp;moves&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#is_move_operation_correct">is_move_operation_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]; <span class="tactic">subst</span> <span class="id">op</span> <span class="id">args</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_reg">valnum_reg</a></span> <span class="id">n</span> <span class="id">src</span>) <span class="kwd">as</span> [<span class="id">n1</span> <span class="id">vsrc</span>] <span class="id">eqn</span>:<span class="id">VN</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_reg_holds">valnum_reg_holds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">valu2</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu2</span>; <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
+ <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r</span> <span class="id">dst</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#update_reg_charact">update_reg_charact</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
+ <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r</span> <span class="id">dst</span>). <span class="tactic">congruence</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;general&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">n</span> <span class="id">args</span>) <span class="kwd">as</span> [<span class="id">n1</span> <span class="id">vl</span>] <span class="id">eqn</span>:<span class="id">VN</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">valu2</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_rhs_holds">add_rhs_holds</a></span>; <span class="tactic">eauto</span>.<br/>
+ <span class="id">constructor</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gss">Regmap.gss</a></span>. <span class="tactic">congruence</span>.<br/>
+ <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gso">Regmap.gso</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_load_holds">add_load_holds</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">valu1</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">n</span> <span class="id">addr</span> (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) <span class="id">a</span> <span class="id">chunk</span> <span class="id">v</span> <span class="id">dst</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#addr">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>##<span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#a">a</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu2</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#dst">dst</a></span> &lt;- <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> (<span class="id"><a href="compcert.backend.CSE.html#add_load">add_load</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#dst">dst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#addr">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3312')">Proof.</div>
<div class="proofscript" id="proof3312">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#add_load">add_load</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">n</span> <span class="id">args</span>) <span class="kwd">as</span> [<span class="id">n1</span> <span class="id">vl</span>] <span class="id">eqn</span>:<span class="id">VN</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">valu2</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_rhs_holds">add_rhs_holds</a></span>; <span class="tactic">eauto</span>.<br/>
+ <span class="id">econstructor</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">B</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gss">Regmap.gss</a></span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gso">Regmap.gso</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_unknown_holds">set_unknown_holds</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">valu</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">n</span> <span class="id">r</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> &lt;- <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> (<span class="id"><a href="compcert.backend.CSE.html#set_unknown">set_unknown</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3313')">Proof.</div>
<div class="proofscript" id="proof3313">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grspec">PTree.grspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">r0</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#forget_reg_charact">forget_reg_charact</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gro">PTree.gro</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
- <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grspec">PTree.grspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">r0</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gso">Regmap.gso</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_res_unknown_holds">set_res_unknown_holds</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">valu</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">n</span> <span class="id">r</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> (<span class="id"><a href="compcert.backend.CSE.html#set_res_unknown">set_res_unknown</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3314')">Proof.</div>
<div class="proofscript" id="proof3314">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">r</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_unknown_holds">set_unknown_holds</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="kill_eqs_charact">kill_eqs_charact</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pred</span> <span class="id">l</span> <span class="id">strict</span> <span class="id">r</span> <span class="id">eqs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#l">l</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#strict">strict</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>) (<span class="id"><a href="compcert.backend.CSE.html#kill_eqs">kill_eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pred">pred</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs">eqs</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#pred">pred</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#l">l</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#strict">strict</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#eqs">eqs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3315')">Proof.</div>
<div class="proofscript" id="proof3315">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">eqs</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">tauto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">a</span>. <span class="tactic">destruct</span> (<span class="id">pred</span> <span class="id">r0</span>) <span class="id">eqn</span>:<span class="id">PRED</span>.<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="kill_equations_hold">kill_equations_hold</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">valu</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">n</span> <span class="id">pred</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">r</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#pred">pred</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id">m</span>' (<span class="id"><a href="compcert.backend.CSE.html#kill_equations">kill_equations</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pred">pred</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3316')">Proof.</div>
<div class="proofscript" id="proof3316">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_eqs_charact">kill_eqs_charact</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">eq</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_eqs_charact">kill_eqs_charact</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#num_holds_eq">num_holds_eq</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">EH</span>; <span class="id">inv</span> <span class="id">EH</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="kill_all_loads_hold">kill_all_loads_hold</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">valu</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">n</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id">m</span>' (<span class="id"><a href="compcert.backend.CSE.html#kill_all_loads">kill_all_loads</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3317')">Proof.</div>
<div class="proofscript" id="proof3317">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_equations_hold">kill_equations_hold</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#filter_loads">filter_loads</a></span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.Op.html#op_depends_on_memory_correct">op_depends_on_memory_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="kill_loads_after_store_holds">kill_loads_after_store_holds</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">valu</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">n</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">a</span> <span class="id">chunk</span> <span class="id">v</span> <span class="id">m</span>' <span class="id">bc</span> <span class="id">approx</span> <span class="id">ae</span> <span class="id">am</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#addr">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>##<span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#a">a</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#a">a</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> = <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ae">ae</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span> = <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ae">ae</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#am">am</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id">m</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.CSE.html#kill_loads_after_store">kill_loads_after_store</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#addr">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3318')">Proof.</div>
<div class="proofscript" id="proof3318">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_equations_hold">kill_equations_hold</a></span> <span class="kwd">with</span> <span class="id">m</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#filter_after_store">filter_after_store</a></span> <span class="kwd">in</span> <span class="id">H6</span>; <span class="id">inv</span> <span class="id">H7</span>.<br/>
- <span class="id">constructor</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H8</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.Op.html#op_depends_on_memory_correct">op_depends_on_memory_correct</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#regs_valnums">regs_valnums</a></span> <span class="id">n</span> <span class="id">vl</span>) <span class="kwd">as</span> [<span class="id">rl</span>|] <span class="id">eqn</span>:<span class="id">RV</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H9</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H9</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#negb_false_iff">negb_false_iff</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddressing">aaddressing</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_other">Mem.load_store_other</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pdisjoint_sound">pdisjoint_sound</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#match_aptr_of_aval">match_aptr_of_aval</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_addressing_sound">eval_static_addressing_sound</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.backend.CSEproof.html#regs_valnums_sound">regs_valnums_sound</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#match_aptr_of_aval">match_aptr_of_aval</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_addressing_sound">eval_static_addressing_sound</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">va</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_normalized_range_sound">store_normalized_range_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bc</span> <span class="id">chunk</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> (<span class="id"><a href="compcert.backend.CSE.html#store_normalized_range">store_normalized_range</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk">chunk</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3319')">Proof.</div>
<div class="proofscript" id="proof3319">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span>; <span class="id">remember</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="kwd">as</span> <span class="id">ptr64</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">chunk</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#is_sgn_sign_ext">is_sgn_sign_ext</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#is_uns_zero_ext">is_uns_zero_ext</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#is_sgn_sign_ext">is_sgn_sign_ext</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#is_uns_zero_ext">is_uns_zero_ext</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">ptr64</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">ptr64</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">ptr64</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_store_result_hold">add_store_result_hold</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">valu1</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span>' <span class="id">n</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">a</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">src</span> <span class="id">bc</span> <span class="id">ae</span> <span class="id">approx</span> <span class="id">am</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu1">valu1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#addr">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>##<span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#a">a</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#a">a</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#src">src</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ae">ae</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span> = <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ae">ae</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#am">am</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu2</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu2">valu2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id">m</span>' (<span class="id"><a href="compcert.backend.CSE.html#add_store_result">add_store_result</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#addr">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src">src</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3320')">Proof.</div>
<div class="proofscript" id="proof3320">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#add_store_result">add_store_result</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#avalue">avalue</a></span>; <span class="tactic">rewrite</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id">src</span> <span class="id">ae</span>) (<span class="id"><a href="compcert.backend.CSE.html#store_normalized_range">store_normalized_range</a></span> <span class="id">chunk</span>)) <span class="id">eqn</span>:<span class="id">INCL</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_reg">valnum_reg</a></span> <span class="id">n</span> <span class="id">src</span>) <span class="kwd">as</span> [<span class="id">n1</span> <span class="id">vsrc</span>] <span class="id">eqn</span>:<span class="id">VR1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">n1</span> <span class="id">args</span>) <span class="kwd">as</span> [<span class="id">n2</span> <span class="id">vargs</span>] <span class="id">eqn</span>:<span class="id">VR2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_reg_holds">valnum_reg_holds</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">valu2</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">valu3</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span> &amp; <span class="id">S</span> &amp; <span class="id">T</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu3</span>. <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
+ <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>. <span class="tactic">subst</span> <span class="id">e</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.lt_le_trans">Pos.lt_le_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">auto</span>.<br/>
+ <span class="tactic">destruct</span> <span class="id">H4</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>. <span class="tactic">subst</span> <span class="id">eq</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#eq_holds_lessdef">eq_holds_lessdef</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id">chunk</span> <span class="id">rs</span>#<span class="id">src</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#load_eval_to">load_eval_to</a></span> <span class="kwd">with</span> <span class="id">a</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">Q</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_same">Mem.load_store_same</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">rewrite</span> <span class="id">R</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#store_normalized_range_sound">store_normalized_range_sound</a></span> <span class="kwd">with</span> <span class="id">bc</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">B</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ge">vmatch_ge</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vincl_ge">vincl_ge</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">H2</span>.<br/>
+ <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
<br/>
- <span class="id">exists</span> <span class="id">valu1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="kill_loads_after_storebytes_holds">kill_loads_after_storebytes_holds</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">valu</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">n</span> <span class="id">dst</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes</span> <span class="id">m</span>' <span class="id">bc</span> <span class="id">approx</span> <span class="id">ae</span> <span class="id">am</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b">b</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#dst">dst</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ofs">ofs</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#bytes">bytes</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> = <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ae">ae</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span> = <span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ae">ae</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#am">am</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bytes">bytes</a></span> = <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z">nat_of_Z</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz">sz</a></span> -&gt; <span class="id"><a href="compcert.backend.CSEproof.html#sz">sz</a></span> &gt;= 0 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id">m</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.CSE.html#kill_loads_after_storebytes">kill_loads_after_storebytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#dst">dst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz">sz</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3321')">Proof.</div>
<div class="proofscript" id="proof3321">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_equations_hold">kill_equations_hold</a></span> <span class="kwd">with</span> <span class="id">m</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#filter_after_store">filter_after_store</a></span> <span class="kwd">in</span> <span class="id">H8</span>; <span class="id">inv</span> <span class="id">H9</span>.<br/>
- <span class="id">constructor</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H10</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.Op.html#op_depends_on_memory_correct">op_depends_on_memory_correct</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#regs_valnums">regs_valnums</a></span> <span class="id">n</span> <span class="id">vl</span>) <span class="kwd">as</span> [<span class="id">rl</span>|] <span class="id">eqn</span>:<span class="id">RV</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H11</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H10</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#negb_false_iff">negb_false_iff</a></span> <span class="kwd">in</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_storebytes_other">Mem.load_storebytes_other</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H6</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#pdisjoint_sound">pdisjoint_sound</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddressing">aaddressing</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#match_aptr_of_aval">match_aptr_of_aval</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.ValueAOp.html#eval_static_addressing_sound">eval_static_addressing_sound</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.backend.CSEproof.html#regs_valnums_sound">regs_valnums_sound</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">va</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="load_memcpy">load_memcpy</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b1</span> <span class="id">ofs1</span> <span class="id">sz</span> <span class="id">bytes</span> <span class="id">b2</span> <span class="id">ofs2</span> <span class="id">m</span>' <span class="id">chunk</span> <span class="id">i</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b1">b1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ofs1">ofs1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz">sz</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bytes">bytes</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b2">b2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ofs2">ofs2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bytes">bytes</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b1">b1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#ofs1">ofs1</a></span> &lt;= <span class="id"><a href="compcert.backend.CSEproof.html#i">i</a></span> -&gt; <span class="id"><a href="compcert.backend.CSEproof.html#i">i</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.backend.CSEproof.html#ofs1">ofs1</a></span> + <span class="id"><a href="compcert.backend.CSEproof.html#sz">sz</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk">chunk</a></span> | <span class="id"><a href="compcert.backend.CSEproof.html#ofs2">ofs2</a></span> - <span class="id"><a href="compcert.backend.CSEproof.html#ofs1">ofs1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.backend.CSEproof.html#b2">b2</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#i">i</a></span> + (<span class="id"><a href="compcert.backend.CSEproof.html#ofs2">ofs2</a></span> - <span class="id"><a href="compcert.backend.CSEproof.html#ofs1">ofs1</a></span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3322')">Proof.</div>
<div class="proofscript" id="proof3322">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>); <span class="tactic">intros</span> <span class="id">SPOS</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">n1</span> := <span class="id">i</span> - <span class="id">ofs1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">n2</span> := <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>).<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">n3</span> := <span class="id">sz</span> - (<span class="id">n1</span> + <span class="id">n2</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">sz</span> <span class="kwd">with</span> (<span class="id">n1</span> + (<span class="id">n2</span> + <span class="id">n3</span>)) <span class="kwd">in</span> <span class="id">H</span> <span class="tactic">by</span> (<span class="tactic">unfold</span> <span class="id">n3</span>, <span class="id">n2</span>, <span class="id">n1</span>; <span class="tactic">omega</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_split">Mem.loadbytes_split</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">n1</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">n3</span>, <span class="id">n2</span>, <span class="id">n1</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">bytes1</span> &amp; <span class="id">bytes23</span> &amp; <span class="id">LB1</span> &amp; <span class="id">LB23</span> &amp; <span class="id">EQ</span>).<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_split">Mem.loadbytes_split</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">n2</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">n3</span>, <span class="id">n2</span>, <span class="id">n1</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">bytes2</span> &amp; <span class="id">bytes3</span> &amp; <span class="id">LB2</span> &amp; <span class="id">LB3</span> &amp; <span class="id">EQ</span>').<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">bytes23</span>; <span class="tactic">subst</span> <span class="id">bytes</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_loadbytes">Mem.load_loadbytes</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">bytes2</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">bytes2</span>' = <span class="id">bytes2</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">replace</span> (<span class="id">ofs1</span> + <span class="id">n1</span>) <span class="kwd">with</span> <span class="id">i</span> <span class="kwd">in</span> <span class="id">LB2</span> <span class="tactic">by</span> (<span class="tactic">unfold</span> <span class="id">n1</span>; <span class="tactic">omega</span>). <span class="tactic">unfold</span> <span class="id">n2</span> <span class="kwd">in</span> <span class="id">LB2</span>. <span class="tactic">congruence</span>.  }<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">bytes2</span>'.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_split">Mem.storebytes_split</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">m1</span> &amp; <span class="id">SB1</span> &amp; <span class="id">SB23</span>).<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_split">Mem.storebytes_split</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">m2</span> &amp; <span class="id">SB2</span> &amp; <span class="id">SB3</span>).<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">SB23</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">L1</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>) = <span class="id">n1</span>).<br/>
&nbsp;&nbsp;{ <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">Mem.loadbytes_length</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span>. <span class="tactic">unfold</span> <span class="id">n1</span>; <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">L2</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes2</span>) = <span class="id">n2</span>).<br/>
&nbsp;&nbsp;{ <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">Mem.loadbytes_length</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span>. <span class="tactic">unfold</span> <span class="id">n2</span>; <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">L1</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">L2</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">LB</span>': <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id">m2</span> <span class="id">b2</span> (<span class="id">ofs2</span> + <span class="id">n1</span>) <span class="id">n2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">bytes2</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id">L2</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_storebytes_same">Mem.loadbytes_storebytes_same</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">LB</span>'': <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id">m</span>' <span class="id">b2</span> (<span class="id">ofs2</span> + <span class="id">n1</span>) <span class="id">n2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">bytes2</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id">LB</span>'. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_storebytes_other">Mem.loadbytes_storebytes_other</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">n2</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>; <span class="id">left</span>; <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_valid_access">Mem.load_valid_access</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_load">Mem.loadbytes_load</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">i</span> + (<span class="id">ofs2</span> - <span class="id">ofs1</span>)) <span class="kwd">with</span> (<span class="id">ofs2</span> + <span class="id">n1</span>) <span class="tactic">by</span> (<span class="tactic">unfold</span> <span class="id">n1</span>; <span class="tactic">omega</span>).<br/>
&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">LB</span>''.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="shift_memcpy_eq_wf">shift_memcpy_eq_wf</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">src</span> <span class="id">sz</span> <span class="id">delta</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">next</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#shift_memcpy_eq">shift_memcpy_eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src">src</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz">sz</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#delta">delta</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_equation">wf_equation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#next">next</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#wf_equation">wf_equation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#next">next</a></span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3323')">Proof with</div>
<div class="proofscript" id="proof3323">
 (<span class="tactic">try</span> <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#shift_memcpy_eq">shift_memcpy_eq</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e</span>. <span class="tactic">destruct</span> <span class="id">r</span>... <span class="tactic">destruct</span> <span class="id">a</span>...<br/>
&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rename</span> <span class="id">i</span> <span class="id">into</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">src</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) &amp;&amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">m</span>) (<span class="id">src</span> + <span class="id">sz</span>) &amp;&amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> (<span class="id">delta</span> <span class="id">mod</span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id">m</span>) 0 &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> 0 (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">delta</span>) &amp;&amp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">delta</span>) <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>)...<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">simpl</span>; <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="shift_memcpy_eq_holds">shift_memcpy_eq_holds</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">src</span> <span class="id">dst</span> <span class="id">sz</span> <span class="id">e</span> <span class="id">e</span>' <span class="id">m</span> <span class="id">sp</span> <span class="id">bytes</span> <span class="id">m</span>' <span class="id">valu</span> <span class="id">ge</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#shift_memcpy_eq">shift_memcpy_eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src">src</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz">sz</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#dst">dst</a></span> - <span class="id"><a href="compcert.backend.CSEproof.html#src">src</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src">src</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz">sz</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bytes">bytes</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#dst">dst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bytes">bytes</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#equation_holds">equation_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e">e</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#equation_holds">equation_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">m</span>' <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3324')">Proof with</div>
<div class="proofscript" id="proof3324">
 (<span class="tactic">try</span> <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">set</span> (<span class="id">delta</span> := <span class="id">dst</span> - <span class="id">src</span>) <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#shift_memcpy_eq">shift_memcpy_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">e</span> <span class="kwd">as</span> [<span class="id">l</span> <span class="id">strict</span> <span class="id">rhs</span>] <span class="id">eqn</span>:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">rhs</span> <span class="kwd">as</span> [<span class="id">op</span> <span class="id">vl</span> | <span class="id">chunk</span> <span class="id">addr</span> <span class="id">vl</span>]...<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">addr</span>...<br/>
&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rename</span> <span class="id">i</span> <span class="id">into</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">i1</span> := <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) <span class="kwd">in</span> *. <span class="tactic">set</span> (<span class="id">j</span> := <span class="id">i1</span> + <span class="id">delta</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">src</span> <span class="id">i1</span>)...<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">i1</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) (<span class="id">src</span> + <span class="id">sz</span>))...<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> (<span class="id">delta</span> <span class="id">mod</span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id">chunk</span>) 0)...<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> 0 <span class="id">j</span>)...<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">j</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>)...<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">LD</span>: <span class="kwd">forall</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id">chunk</span> <span class="id">m</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp</span> <span class="id">ofs</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id">chunk</span> <span class="id">m</span>' (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">j</span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">j</span>, <span class="id">delta</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#load_memcpy">load_memcpy</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znumtheory.html#Zmod_divide">Zmod_divide</a></span>; <span class="tactic">auto</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#align_chunk_pos">align_chunk_pos</a></span> <span class="id">chunk</span>); <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>.<br/>
+ <span class="id">inv</span> <span class="id">H3</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_Ainstack_inv">eval_addressing_Ainstack_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">E1</span> <span class="id">E2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">E2</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span> <span class="kwd">in</span> <span class="id">E2</span>. <span class="tactic">subst</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#eq_holds_strict">eq_holds_strict</a></span>. <span class="id">econstructor</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_Ainstack">eval_addressing_Ainstack</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">LD</span>; <span class="tactic">auto</span>.<br/>
+ <span class="id">inv</span> <span class="id">H4</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_Ainstack_inv">eval_addressing_Ainstack_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">E1</span> <span class="id">E2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">E2</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span> <span class="kwd">in</span> <span class="id">E2</span>. <span class="tactic">subst</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#eq_holds_lessdef">eq_holds_lessdef</a></span> <span class="kwd">with</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_Ainstack">eval_addressing_Ainstack</a></span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">LD</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_memcpy_eqs_charact">add_memcpy_eqs_charact</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>' <span class="id">src</span> <span class="id">sz</span> <span class="id">delta</span> <span class="id">eqs2</span> <span class="id">eqs1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">e</span>' (<span class="id"><a href="compcert.backend.CSE.html#add_memcpy_eqs">add_memcpy_eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src">src</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz">sz</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#delta">delta</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs1">eqs1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs2">eqs2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">e</span>' <span class="id"><a href="compcert.backend.CSEproof.html#eqs2">eqs2</a></span> \/ <span class="id">exists</span> <span class="id">e</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e">e</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs1">eqs1</a></span> /\ <span class="id"><a href="compcert.backend.CSE.html#shift_memcpy_eq">shift_memcpy_eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#src">src</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz">sz</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#delta">delta</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3325')">Proof.</div>
<div class="proofscript" id="proof3325">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">eqs1</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#shift_memcpy_eq">shift_memcpy_eq</a></span> <span class="id">src</span> <span class="id">sz</span> <span class="id">delta</span> <span class="id">a</span>) <span class="kwd">as</span> [<span class="id">e</span>''|] <span class="id">eqn</span>:<span class="id">SHIFT</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">subst</span> <span class="id">e</span>''. <span class="id">right</span>; <span class="id">exists</span> <span class="id">a</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHeqs1</span> <span class="kwd">as</span> [<span class="id">A</span> | [<span class="id">e</span> [<span class="id">A</span> <span class="id">B</span>]]]; <span class="tactic">auto</span>. <span class="id">right</span>; <span class="id">exists</span> <span class="id">e</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">IHeqs1</span> <span class="kwd">as</span> [<span class="id">A</span> | [<span class="id">e</span> [<span class="id">A</span> <span class="id">B</span>]]]; <span class="tactic">auto</span>. <span class="id">right</span>; <span class="id">exists</span> <span class="id">e</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_memcpy_holds">add_memcpy_holds</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">bsrc</span> <span class="id">osrc</span> <span class="id">sz</span> <span class="id">bytes</span> <span class="id">bdst</span> <span class="id">odst</span> <span class="id">m</span>' <span class="id">valu</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">bc</span> <span class="id">asrc</span> <span class="id">adst</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bsrc">bsrc</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#osrc">osrc</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#sz">sz</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bytes">bytes</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bdst">bdst</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#odst">odst</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#bytes">bytes</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n1">n1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.backend.CSEproof.html#n2">n2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bsrc">bsrc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#osrc">osrc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#asrc">asrc</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#bdst">bdst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#odst">odst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#adst">adst</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> = <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n1">n1</a></span>) (<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n2">n2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id">m</span>' (<span class="id"><a href="compcert.backend.CSE.html#add_memcpy">add_memcpy</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n1">n1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#n2">n2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#asrc">asrc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#adst">adst</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sz">sz</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3326')">Proof.</div>
<div class="proofscript" id="proof3326">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#add_memcpy">add_memcpy</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">asrc</span>; <span class="tactic">auto</span>; <span class="tactic">destruct</span> <span class="id">adst</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">o</span> <span class="id">i</span>, <span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id"><a href="compcert.backend.CSEproof.html#b">b</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#o">o</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#i">i</a></span>) -&gt; <span class="id"><a href="compcert.backend.CSEproof.html#b">b</a></span> = <span class="id">sp</span> /\ <span class="id"><a href="compcert.backend.CSEproof.html#i">i</a></span> = <span class="id"><a href="compcert.backend.CSEproof.html#o">o</a></span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H7</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">A</span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">destruct</span> <span class="id">H3</span>. <span class="tactic">subst</span> <span class="id">bsrc</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">A</span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">destruct</span> <span class="id">H4</span>. <span class="tactic">subst</span> <span class="id">bdst</span> <span class="id">ofs0</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
- <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_memcpy_eqs_charact">add_memcpy_eqs_charact</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">X</span> | (<span class="id">e0</span> &amp; <span class="id">X</span> &amp; <span class="id">Y</span>)].<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#wf_equation_incr">wf_equation_incr</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_next">num_next</a></span> <span class="id">n1</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#shift_memcpy_eq_wf">shift_memcpy_eq_wf</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_memcpy_eqs_charact">add_memcpy_eqs_charact</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">X</span> | (<span class="id">e0</span> &amp; <span class="id">X</span> &amp; <span class="id">Y</span>)].<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#shift_memcpy_eq_holds">shift_memcpy_eq_holds</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Correctness of operator reduction </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="REDUCE">REDUCE</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="REDUCE.A">A</a></span>: <span class="kwd">Type</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="REDUCE.f">f</a></span>: (<span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#rhs">rhs</a></span>) -&gt; <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="REDUCE.V">V</a></span>: <span class="kwd">Type</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="REDUCE.ge">ge</a></span>: <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="REDUCE.sp">sp</a></span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="REDUCE.rs">rs</a></span>: <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="REDUCE.m">m</a></span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="REDUCE.sem">sem</a></span>: <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.V">V</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="REDUCE.f_sound">f_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eqs</span> <span class="id">valu</span> <span class="id">op</span> <span class="id">args</span> <span class="id">op</span>' <span class="id">args</span>',<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">v</span> <span class="id">rhs</span>, <span class="id"><a href="compcert.backend.CSEproof.html#eqs">eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs">rhs</a></span> -&gt; <span class="id"><a href="compcert.backend.CSEdomain.html#rhs_eval_to">rhs_eval_to</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rhs">rhs</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#eqs">eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">op</span>', <span class="id">args</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id">op</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id">args</span>') = <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op">op</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="REDUCE.n">n</a></span>: <span class="id"><a href="compcert.backend.CSEdomain.html#numbering">numbering</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="REDUCE.valu">valu</a></span>: <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="REDUCE.n_holds">n_holds</a></span>: <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reduce_rec_sound">reduce_rec_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">niter</span> <span class="id">op</span> <span class="id">args</span> <span class="id">op</span>' <span class="id">rl</span>' <span class="id">res</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#reduce_rec">reduce_rec</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#niter">niter</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">op</span>', <span class="id">rl</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op">op</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#res">res</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id">op</span>' (<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.rs">rs</a></span>##<span class="id">rl</span>') = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#res">res</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3327')">Proof.</div>
<div class="proofscript" id="proof3327">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">niter</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f">f</a></span> (<span class="kwd">fun</span> <span class="id">v</span> : <span class="id"><a href="compcert.x86.CombineOp.html#valnum">valnum</a></span> =&gt; <span class="id"><a href="compcert.backend.CSE.html#find_valnum_num">find_valnum_num</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> (<span class="id"><a href="compcert.backend.CSEdomain.html#num_eqs">num_eqs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span>)) <span class="id">op</span> <span class="id">args</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">as</span> [[<span class="id">op1</span> <span class="id">args1</span>] | ] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id">op1</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.valu">valu</a></span> <span class="id">args1</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">res</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f_sound">f_sound</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEdomain.html#num_holds_eq">num_holds_eq</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_valnum_num_charact">find_valnum_num_charact</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">cse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">EH</span>; <span class="id">inv</span> <span class="id">EH</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce_rec">reduce_rec</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span> <span class="id">niter</span> <span class="id">op1</span> <span class="id">args1</span>) <span class="kwd">as</span> [[<span class="id">op2</span> <span class="id">rl2</span>] | ] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">IHniter</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#regs_valnums">regs_valnums</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span> <span class="id">args1</span>) <span class="kwd">as</span> [<span class="id">rl</span>|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_valnums_sound">regs_valnums_sound</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="reduce_sound">reduce_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">op</span> <span class="id">rl</span> <span class="id">vl</span> <span class="id">op</span>' <span class="id">rl</span>' <span class="id">res</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#reduce">reduce</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl">rl</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span> = (<span class="id">op</span>', <span class="id">rl</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span> = <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.rs">rs</a></span>##<span class="id"><a href="compcert.backend.CSEproof.html#rl">rl</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#op">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.rs">rs</a></span>##<span class="id"><a href="compcert.backend.CSEproof.html#rl">rl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#res">res</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.sem">sem</a></span> <span class="id">op</span>' <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.rs">rs</a></span>##<span class="id">rl</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#res">res</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3328')">Proof.</div>
<div class="proofscript" id="proof3328">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#reduce">reduce</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce_rec">reduce_rec</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.A">A</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE.n">n</a></span> 4%<span class="id">nat</span> <span class="id">op</span> <span class="id">vl</span>) <span class="kwd">as</span> [[<span class="id">op1</span> <span class="id">rl1</span>] | ] <span class="id">eqn</span>:?; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#reduce_rec_sound">reduce_rec_sound</a></span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.CSEproof.html#REDUCE">REDUCE</a></span>.<br/>
<br/>
<div class="doc">The numberings associated to each instruction by the static analysis
  are inductively satisfiable, in the following sense: the numbering
  at the function entry point is satisfiable, and for any RTL execution
  from <span class="bracket"><span class="id">pc</span></span> to <span class="bracket"><span class="id">pc</span>'</span>, satisfiability at <span class="bracket"><span class="id">pc</span></span> implies
  satisfiability at <span class="bracket"><span class="id">pc</span>'</span>. </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="analysis_correct_1">analysis_correct_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">f</span> <span class="id">vapprox</span> <span class="id">approx</span> <span class="id">pc</span> <span class="id">pc</span>' <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vapprox">vapprox</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)!<span class="id"><a href="compcert.backend.CSEproof.html#pc">pc</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#i">i</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">pc</span>' (<span class="id"><a href="compcert.backend.RTL.html#successors_instr">successors_instr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">valu</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> (<span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vapprox">vapprox</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pc">pc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span>!!<span class="id"><a href="compcert.backend.CSEproof.html#pc">pc</a></span>)) -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">valu</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span>!!<span class="id">pc</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3329')">Proof.</div>
<div class="proofscript" id="proof3329">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.backend.CSE.html#Numbering.ge">Numbering.ge</a></span> <span class="id">approx</span>!!<span class="id">pc</span>' (<span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span> <span class="id">f</span> <span class="id">vapprox</span> <span class="id">pc</span> <span class="id">approx</span>!!<span class="id">pc</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSE.html#Solver.fixpoint_solution">Solver.fixpoint_solution</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">valu</span> <span class="id">NH</span>]. <span class="id">exists</span> <span class="id">valu</span>; <span class="tactic">apply</span> <span class="id">H3</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="analysis_correct_entry">analysis_correct_entry</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">f</span> <span class="id">vapprox</span> <span class="id">approx</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vapprox">vapprox</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span>!!(<span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3330')">Proof.</div>
<div class="proofscript" id="proof3330">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">approx</span>!!(<span class="id">f</span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span>))) <span class="kwd">with</span> <span class="id"><a href="compcert.backend.CSE.html#Solver.L.top">Solver.L.top</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="kwd">fun</span> <span class="id">v</span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#empty_numbering_holds">empty_numbering_holds</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSE.html#Solver.fixpoint_entry">Solver.fixpoint_entry</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Semantic preservation </h1>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION">PRESERVATION</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.prog">prog</a></span>: <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.tprog">tprog</a></span> : <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="PRESERVATION.TRANSF">TRANSF</a></span>: <span class="id"><a href="compcert.backend.CSEproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tprog">tprog</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">transf_function</span>' (<span class="id">f</span>: <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span>) (<span class="id">approxs</span>: <span class="id"><a href="compcert.lib.Maps.html#PMap.t">PMap.t</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering">numbering</a></span>) : <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.RTL.html#mkfunction">mkfunction</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_sig">fn_sig</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_params">fn_params</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">fn_stacksize</a></span>) (<span class="id"><a href="compcert.backend.CSE.html#transf_code">transf_code</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approxs">approxs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)) <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">fn_entrypoint</a></span>).<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">TransfInstr</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">H1</span>: (<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> ?<span class="id">pc</span> ?<span class="id">c</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">instr</span>), <span class="id">f</span>: <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span>, <span class="id">approx</span>: <span class="id"><a href="compcert.lib.Maps.html#PMap.t">PMap.t</a></span> <span class="id"><a href="compcert.backend.CSEdomain.html#numbering">numbering</a></span> |- <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">cut</span> ((<span class="id">transf_function</span>' <span class="id">f</span> <span class="id">approx</span>).(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)!<span class="id">pc</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.CSE.html#transf_instr">transf_instr</a></span> <span class="id">approx</span>!!<span class="id">pc</span> <span class="id">instr</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ <span class="tactic">simpl</span> <span class="id">transf_instr</span> | <span class="tactic">unfold</span> <span class="id">transf_function</span>', <span class="id"><a href="compcert.backend.CSE.html#transf_code">transf_code</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gmap">PTree.gmap</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span>; <span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">reflexivity</span> ]<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.CORELEMMA">CORELEMMA</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.CORELEMMA.se">se</a></span> <span class="id"><a name="PRESERVATION.CORELEMMA.tse">tse</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>.<br/>
<span class="kwd">Hypothesis</span> (<span class="id"><a name="PRESERVATION.CORELEMMA.MATCH_SENV">MATCH_SENV</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.tse">tse</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id"><a name="PRESERVATION.CORELEMMA.tge">tge</a></span>: <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> (<span class="id"><a name="PRESERVATION.CORELEMMA.MATCH_GENV">MATCH_GENV</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="compcert.common.Linking.html#match_globdef">match_globdef</a></span> (<span class="kwd">fun</span> <span class="id">cu</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu">cu</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.tge">tge</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="symbols_preserved">symbols_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>), <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s">s</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s">s</a></span>.<br/>
<span class="kwd">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_match_genv">Genv.find_symbol_match_genv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.MATCH_GENV">MATCH_GENV</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="senv_preserved">senv_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.tge">tge</a></span>.<br/>
<span class="kwd">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.senv_match_genv">Genv.senv_match_genv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.MATCH_GENV">MATCH_GENV</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="functions_translated">functions_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">v</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span class="id">f</span>: <span class="id"><a href="compcert.backend.RTL.html#fundef">RTL.fundef</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cu</span> <span class="id">tf</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf">tf</a></span> /\ <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu">cu</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf">tf</a></span> /\ <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>.<br/>
<span class="kwd">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_match_genv">Genv.find_funct_match_genv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.MATCH_GENV">MATCH_GENV</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="funct_ptr_translated">funct_ptr_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">f</span>: <span class="id"><a href="compcert.backend.RTL.html#fundef">RTL.fundef</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">cu</span> <span class="id">tf</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf">tf</a></span> /\ <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu">cu</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf">tf</a></span> /\ <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>.<br/>
<span class="kwd">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_match_genv">Genv.find_funct_ptr_match_genv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.MATCH_GENV">MATCH_GENV</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sig_preserved">sig_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rm</span> <span class="id">f</span> <span class="id">tf</span>, <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rm">rm</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf">tf</a></span> -&gt; <span class="id"><a href="compcert.backend.RTL.html#funsig">funsig</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf">tf</a></span> = <span class="id"><a href="compcert.backend.RTL.html#funsig">funsig</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3331')">Proof.</div>
<div class="proofscript" id="proof3331">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">f</span>; <span class="id">monadInv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transf_function">transf_function</a></span> <span class="kwd">in</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#analyze">analyze</a></span> <span class="id">f</span> (<span class="id"><a href="compcert.backend.CSE.html#vanalyze">vanalyze</a></span> <span class="id">rm</span> <span class="id">f</span>)); <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">EQ</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="regs_lessdef">regs_lessdef</a></span> (<span class="id">rs1</span> <span class="id">rs2</span>: <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs1">rs1</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>) (<span class="id"><a href="compcert.backend.CSEproof.html#rs2">rs2</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="regs_lessdef_regs">regs_lessdef_regs</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rs1</span> <span class="id">rs2</span>, <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs1">rs1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs2">rs2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rl</span>, <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs1">rs1</a></span>##<span class="id"><a href="compcert.backend.CSEproof.html#rl">rl</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs2">rs2</a></span>##<span class="id"><a href="compcert.backend.CSEproof.html#rl">rl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3332')">Proof.</div>
<div class="proofscript" id="proof3332">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">rl</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_reg_lessdef">set_reg_lessdef</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">rs1</span> <span class="id">rs2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v2">v2</a></span> -&gt; <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs1">rs1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs2">rs2</a></span> -&gt; <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs1">rs1</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> &lt;- <span class="id"><a href="compcert.backend.CSEproof.html#v1">v1</a></span>) (<span class="id"><a href="compcert.backend.CSEproof.html#rs2">rs2</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> &lt;- <span class="id"><a href="compcert.backend.CSEproof.html#v2">v2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3333')">Proof.</div>
<div class="proofscript" id="proof3333">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="init_regs_lessdef">init_regs_lessdef</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rl</span> <span class="id">vl1</span> <span class="id">vl2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl1">vl1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl2">vl2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> (<span class="id"><a href="compcert.backend.RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl1">vl1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl">rl</a></span>) (<span class="id"><a href="compcert.backend.RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl2">vl2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rl">rl</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3334')">Proof.</div>
<div class="proofscript" id="proof3334">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">rl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gi">Regmap.gi</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gi">Regmap.gi</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_function_translated">find_function_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ros</span> <span class="id">rs</span> <span class="id">fptr</span> <span class="id">rs</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.RTL.html#find_function_ptr">find_function_ptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ros">ros</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> = <span class="id"><a href="compcert.backend.CSEproof.html#fptr">fptr</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id">rs</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tfptr</span>, <span class="id"><a href="compcert.backend.RTL.html#find_function_ptr">find_function_ptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#ros">ros</a></span> <span class="id">rs</span>' = <span class="id"><a href="compcert.backend.CSEproof.html#tfptr">tfptr</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#fptr">fptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tfptr">tfptr</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3335')">Proof.</div>
<div class="proofscript" id="proof3335">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#find_function_ptr">find_function_ptr</a></span>; <span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">ros</span>.<br/>
- <span class="id">specialize</span> (<span class="id">H0</span> <span class="id">r</span>). <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eauto</span>. } { <span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>. <span class="tactic">eauto</span>. }<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">eauto</span>. } { <span class="tactic">eauto</span>. }<br/>
Qed.</div>
<br/>
<div class="doc">The proof of semantic preservation is a simulation argument using
  diagrams of the following form:
<pre>
           st1 --------------- st2
            |                   |
           t|                   |t
            |                   |
            v                   v
           st1'--------------- st2'</pre>
  Left: RTL execution in the original program.  Right: RTL execution in
  the optimized program.  Precondition (top) and postcondition (bottom):
  agreement between the states, including the fact that
  the numbering at <span class="bracket"><span class="id">pc</span></span> (returned by the static analysis) is satisfiable.
</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="analyze">analyze</a></span> (<span class="id">cu</span>: <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) (<span class="id">f</span>: <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSE.html#analyze">CSE.analyze</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> (<span class="id"><a href="compcert.backend.CSE.html#vanalyze">vanalyze</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu">cu</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span>).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_stackframes">match_stackframes</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_stackframes_nil">match_stackframes_nil</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_stackframes_cons">match_stackframes_cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">res</span> <span class="id">sp</span> <span class="id">pc</span> <span class="id">rs</span> <span class="id">f</span> <span class="id">s</span> <span class="id">rs</span>' <span class="id">s</span>' <span class="id">cu</span> <span class="id">approx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LINK</span>: <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ANALYZE</span>: <span class="id"><a href="compcert.backend.CSEproof.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAT</span>: <span class="kwd">forall</span> <span class="id">v</span> <span class="id">m</span>, <span class="id">exists</span> <span class="id">valu</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> (<span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.backend.CSEproof.html#res">res</a></span> &lt;- <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span>!!<span class="id"><a href="compcert.backend.CSEproof.html#pc">pc</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RLD</span>: <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id">rs</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACKS</span>: <span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s">s</a></span> <span class="id">s</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes">match_stackframes</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#res">res</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pc">pc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> :: <span class="id"><a href="compcert.backend.CSEproof.html#s">s</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#res">res</a></span> (<span class="id">transf_function</span>' <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pc">pc</a></span> <span class="id">rs</span>' :: <span class="id">s</span>').<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_states">match_states</a></span>: <span class="id"><a href="compcert.backend.RTL.html#state">state</a></span> -&gt; <span class="id"><a href="compcert.backend.RTL.html#state">state</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_states_intro">match_states_intro</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">sp</span> <span class="id">pc</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">s</span>' <span class="id">rs</span>' <span class="id">m</span>' <span class="id">f</span> <span class="id">cu</span> <span class="id">approx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LINK</span>: <span class="id"><a href="compcert.common.Linking.html#linkorder">linkorder</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ANALYZE</span>: <span class="id"><a href="compcert.backend.CSEproof.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu">cu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAT</span>: <span class="id">exists</span> <span class="id">valu</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span>!!<span class="id"><a href="compcert.backend.CSEproof.html#pc">pc</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RLD</span>: <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef">regs_lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id">rs</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MEXT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id">m</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACKS</span>: <span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s">s</a></span> <span class="id">s</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s">s</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pc">pc</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#rs">rs</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id">s</span>' (<span class="id">transf_function</span>' <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#approx">approx</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#sp">sp</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#pc">pc</a></span> <span class="id">rs</span>' <span class="id">m</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_states_call">match_states_call</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">fptr</span> <span class="id">sg</span> <span class="id">args</span> <span class="id">m</span> <span class="id">s</span>' <span class="id">tfptr</span> <span class="id">args</span>' <span class="id">m</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACKS</span>: <span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s">s</a></span> <span class="id">s</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FPTR</span>: <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#fptr">fptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tfptr">tfptr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ARGS</span>: <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span> <span class="id">args</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MEXT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id">m</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s">s</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#fptr">fptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sg">sg</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#args">args</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id">s</span>' <span class="id"><a href="compcert.backend.CSEproof.html#tfptr">tfptr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#sg">sg</a></span> <span class="id">args</span>' <span class="id">m</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_states_return">match_states_return</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">s</span>' <span class="id">v</span> <span class="id">v</span>' <span class="id">m</span> <span class="id">m</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACK</span>: <span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes">match_stackframes</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s">s</a></span> <span class="id">s</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RES</span>: <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id">v</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MEXT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span> <span class="id">m</span>'),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s">s</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#v">v</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id">s</span>' <span class="id">v</span>' <span class="id">m</span>').<br/>
<br/>
<div class="doc">The proof of simulation is a case analysis over the transition
  in the source code. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_step_correct">transf_step_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>, <span class="id"><a href="compcert.backend.RTL.html#step">step</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s1">s1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#t">t</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span>' (<span class="id">MS</span>: <span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s1">s1</a></span> <span class="id">s1</span>') (<span class="id">SOUND</span>: <span class="id">exists</span> <span class="id">su0</span>, <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#su0">su0</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s1">s1</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>', <span class="id"><a href="compcert.backend.RTL.html#step">step</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.tse">tse</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.tge">tge</a></span> <span class="id">s1</span>' <span class="id"><a href="compcert.backend.CSEproof.html#t">t</a></span> <span class="id">s2</span>' /\ <span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s2">s2</a></span> <span class="id">s2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3336')">Proof.</div>
<div class="proofscript" id="proof3336">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">MS</span>; <span class="tactic">destruct</span> <span class="id">SOUND</span> <span class="kwd">as</span> [<span class="id">su0</span> <span class="id">SOUND</span>]; <span class="tactic">try</span> (<span class="id">TransfInstr</span>; <span class="tactic">intro</span> <span class="id">C</span>).<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Inop&nbsp;*)</span><br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Inop">exec_Inop</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Iop&nbsp;*)</span><br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.Op.html#is_trivial_op">is_trivial_op</a></span> <span class="id">op</span>) <span class="id">eqn</span>:<span class="id">TRIV</span>.<br/>
+ <span class="comment">(*&nbsp;unchanged&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_operation_lessdef">eval_operation_lessdef</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop</a></span> <span class="kwd">with</span> (<span class="id">v</span> := <span class="id">v</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">A</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_operation_preserved">eval_operation_preserved</a></span>. <span class="tactic">exact</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">SAT</span> <span class="kwd">as</span> [<span class="id">valu</span> <span class="id">NH</span>]. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_op_holds">add_op_holds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
+ <span class="comment">(*&nbsp;possibly&nbsp;optimized&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">approx</span>!!<span class="id">pc</span> <span class="id">args</span>) <span class="kwd">as</span> [<span class="id">n1</span> <span class="id">vl</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">SAT</span> <span class="kwd">as</span> [<span class="id">valu1</span> <span class="id">NH1</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">valu2</span> &amp; <span class="id">NH2</span> &amp; <span class="id">EQ</span> &amp; <span class="id">AG</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#find_rhs">find_rhs</a></span> <span class="id">n1</span> (<span class="id"><a href="compcert.backend.CSEdomain.html#Op">Op</a></span> <span class="id">op</span> <span class="id">vl</span>)) <span class="kwd">as</span> [<span class="id">r</span>|] <span class="id">eqn</span>:?.<br/>
* <span class="comment">(*&nbsp;replaced&nbsp;by&nbsp;move&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_rhs_sound">find_rhs_sound</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">v</span>' &amp; <span class="id">EV</span> &amp; <span class="id">LD</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">v</span>' = <span class="id">v</span>) <span class="tactic">by</span> (<span class="id">inv</span> <span class="id">EV</span>; <span class="tactic">congruence</span>). <span class="tactic">subst</span> <span class="id">v</span>'.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_op_holds">add_op_holds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_trans">Val.lessdef_trans</a></span>; <span class="tactic">eauto</span>.<br/>
* <span class="comment">(*&nbsp;possibly&nbsp;simplified&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce">reduce</a></span> <span class="id"><a href="compcert.x86.Op.html#operation">operation</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#combine_op">combine_op</a></span> <span class="id">n1</span> <span class="id">op</span> <span class="id">args</span> <span class="id">vl</span>) <span class="kwd">as</span> [<span class="id">op</span>' <span class="id">args</span>'] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">RES</span>: <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id">sp</span> <span class="id">op</span>' <span class="id">rs</span>##<span class="id">args</span>' <span class="id">m</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#reduce_sound">reduce_sound</a></span> <span class="kwd">with</span> (<span class="id">sem</span> := <span class="kwd">fun</span> <span class="id">op</span> <span class="id">vl</span> =&gt; <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id">sp</span> <span class="id"><a href="compcert.backend.CSEproof.html#op">op</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span> <span class="id">m</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.CombineOpproof.html#combine_op_sound">combine_op_sound</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_operation_lessdef">eval_operation_lessdef</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop</a></span> <span class="kwd">with</span> (<span class="id">v</span> := <span class="id">v</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">A</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_operation_preserved">eval_operation_preserved</a></span>. <span class="tactic">exact</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_op_holds">add_op_holds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;Iload&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">approx</span>!!<span class="id">pc</span> <span class="id">args</span>) <span class="kwd">as</span> [<span class="id">n1</span> <span class="id">vl</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">SAT</span> <span class="kwd">as</span> [<span class="id">valu1</span> <span class="id">NH1</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">valu2</span> &amp; <span class="id">NH2</span> &amp; <span class="id">EQ</span> &amp; <span class="id">AG</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#find_rhs">find_rhs</a></span> <span class="id">n1</span> (<span class="kwd">Load</span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">vl</span>)) <span class="kwd">as</span> [<span class="id">r</span>|] <span class="id">eqn</span>:?.<br/>
+ <span class="comment">(*&nbsp;replaced&nbsp;by&nbsp;move&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_rhs_sound">find_rhs_sound</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">v</span>' &amp; <span class="id">EV</span> &amp; <span class="id">LD</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">v</span>' = <span class="id">v</span>) <span class="tactic">by</span> (<span class="id">inv</span> <span class="id">EV</span>; <span class="tactic">congruence</span>). <span class="tactic">subst</span> <span class="id">v</span>'.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_load_holds">add_load_holds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef</a></span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_trans">Val.lessdef_trans</a></span>; <span class="tactic">eauto</span>.<br/>
+ <span class="comment">(*&nbsp;load&nbsp;is&nbsp;preserved,&nbsp;but&nbsp;addressing&nbsp;is&nbsp;possibly&nbsp;simplified&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce">reduce</a></span> <span class="id"><a href="compcert.x86.Op.html#addressing">addressing</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#combine_addr">combine_addr</a></span> <span class="id">n1</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span>) <span class="kwd">as</span> [<span class="id">addr</span>' <span class="id">args</span>'] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ADDR</span>: <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id">sp</span> <span class="id">addr</span>' <span class="id">rs</span>##<span class="id">args</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#reduce_sound">reduce_sound</a></span> <span class="kwd">with</span> (<span class="id">sem</span> := <span class="kwd">fun</span> <span class="id">addr</span> <span class="id">vl</span> =&gt; <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id">sp</span> <span class="id"><a href="compcert.backend.CSEproof.html#addr">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.CombineOpproof.html#combine_addr_sound">combine_addr_sound</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_lessdef">eval_addressing_lessdef</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs</a></span>; <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">ADDR</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">a</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ADDR</span>': <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.tge">tge</a></span> <span class="id">sp</span> <span class="id">addr</span>' <span class="id">rs</span>'##<span class="id">args</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a</span>').<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id">A</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_preserved">eval_addressing_preserved</a></span>. <span class="tactic">exact</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_extends">Mem.loadv_extends</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">X</span> <span class="id">Y</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iload">exec_Iload</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_load_holds">add_load_holds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;Istore&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">approx</span>!!<span class="id">pc</span> <span class="id">args</span>) <span class="kwd">as</span> [<span class="id">n1</span> <span class="id">vl</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">SAT</span> <span class="kwd">as</span> [<span class="id">valu1</span> <span class="id">NH1</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">valu2</span> &amp; <span class="id">NH2</span> &amp; <span class="id">EQ</span> &amp; <span class="id">AG</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce">reduce</a></span> <span class="id"><a href="compcert.x86.Op.html#addressing">addressing</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#combine_addr">combine_addr</a></span> <span class="id">n1</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span>) <span class="kwd">as</span> [<span class="id">addr</span>' <span class="id">args</span>'] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ADDR</span>: <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id">sp</span> <span class="id">addr</span>' <span class="id">rs</span>##<span class="id">args</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#reduce_sound">reduce_sound</a></span> <span class="kwd">with</span> (<span class="id">sem</span> := <span class="kwd">fun</span> <span class="id">addr</span> <span class="id">vl</span> =&gt; <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id">sp</span> <span class="id"><a href="compcert.backend.CSEproof.html#addr">addr</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.CombineOpproof.html#combine_addr_sound">combine_addr_sound</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_lessdef">eval_addressing_lessdef</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs</a></span>; <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">ADDR</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">a</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ADDR</span>': <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.tge">tge</a></span> <span class="id">sp</span> <span class="id">addr</span>' <span class="id">rs</span>'##<span class="id">args</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a</span>').<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id">A</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_preserved">eval_addressing_preserved</a></span>. <span class="tactic">exact</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev_extends">Mem.storev_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">m</span>'' [<span class="id">X</span> <span class="id">Y</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Istore">exec_Istore</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">InvSoundState</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_store_result_hold">add_store_result_hold</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_loads_after_store_holds">kill_loads_after_store_holds</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;Icall&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_function_translated">find_function_translated</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">tfptr</span> &amp; <span class="id">FIND</span>' &amp; <span class="id">TRANSL</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Icall">exec_Icall</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#match_stackframes_cons">match_stackframes_cons</a></span> <span class="kwd">with</span> (<span class="id">cu</span> := <span class="id">cu</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>); <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#empty_numbering_holds">empty_numbering_holds</a></span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">FPTR</span>. <span class="tactic">rewrite</span> <span class="id">FIND</span>'. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;Itailcall&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#find_function_translated">find_function_translated</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">tfptr</span> &amp; <span class="id">FIND</span>' &amp; <span class="id">TRANSL</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_extends">Mem.free_parallel_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">m</span>'' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Itailcall">exec_Itailcall</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">econstructor</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">inversion</span> <span class="id">FPTR</span>. <span class="tactic">rewrite</span> <span class="id">FIND</span>'. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;Ibuiltin&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (@<span class="id"><a href="compcert.common.Events.html#eval_builtin_args_lessdef">eval_builtin_args_lessdef</a></span> <span class="id">_</span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id">rs</span>#<span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>) (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id">rs</span>'#<span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">vargs</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_extends">external_call_mem_extends</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">v</span>' &amp; <span class="id">m1</span>' &amp; <span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span> &amp; <span class="id">S</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ibuiltin">exec_Ibuiltin</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eval_builtin_args_preserved">eval_builtin_args_preserved</a></span> <span class="kwd">with</span> (<span class="id">ge1</span> := <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span>); <span class="tactic">eauto</span>. <span class="tactic">exact</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_symbols_preserved">external_call_symbols_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
* <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">SAT</span> <span class="kwd">as</span> [<span class="id">valu</span> <span class="id">NH</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">CASE1</span>: <span class="id">exists</span> <span class="id">valu</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id">sp</span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id">res</span> <span class="id">vres</span> <span class="id">rs</span>) <span class="id">m</span>' <span class="id"><a href="compcert.backend.CSEdomain.html#empty_numbering">empty_numbering</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">exists</span> <span class="id">valu</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEdomain.html#empty_numbering_holds">empty_numbering_holds</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">CASE2</span>: <span class="id">m</span>' = <span class="id">m</span> -&gt; <span class="id">exists</span> <span class="id">valu</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id">sp</span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id">res</span> <span class="id">vres</span> <span class="id">rs</span>) <span class="id">m</span>' (<span class="id"><a href="compcert.backend.CSE.html#set_res_unknown">set_res_unknown</a></span> <span class="id">approx</span>#<span class="id">pc</span> <span class="id">res</span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">subst</span> <span class="id">m</span>'. <span class="id">exists</span> <span class="id">valu</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_res_unknown_holds">set_res_unknown_holds</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">CASE3</span>: <span class="id">exists</span> <span class="id">valu</span>, <span class="id"><a href="compcert.backend.CSEdomain.html#numbering_holds">numbering_holds</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#valu">valu</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA.ge">ge</a></span> <span class="id">sp</span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id">res</span> <span class="id">vres</span> <span class="id">rs</span>) <span class="id">m</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.CSE.html#set_res_unknown">set_res_unknown</a></span> (<span class="id"><a href="compcert.backend.CSE.html#kill_all_loads">kill_all_loads</a></span> <span class="id">approx</span>#<span class="id">pc</span>) <span class="id">res</span>)).<br/>
&nbsp;&nbsp;{ <span class="id">exists</span> <span class="id">valu</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_res_unknown_holds">set_res_unknown_holds</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_all_loads_hold">kill_all_loads_hold</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ef</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">CASE1</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">CASE3</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">CASE1</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">CASE2</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">CASE3</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">CASE1</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">CASE1</span>.<br/>
&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H3</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H4</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">valu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_res_unknown_holds">set_res_unknown_holds</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">InvSoundState</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#vanalyze">vanalyze</a></span>; <span class="tactic">rewrite</span> <span class="id">AN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id">bsrc</span> <span class="id">osrc</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr_arg">aaddr_arg</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id">ae</span> <span class="id">am</span>) <span class="id">a0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr_arg_sound_1">aaddr_arg_sound_1</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id">bc</span> <span class="id">bdst</span> <span class="id">odst</span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr_arg">aaddr_arg</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#VA.State">VA.State</a></span> <span class="id">ae</span> <span class="id">am</span>) <span class="id">a1</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#aaddr_arg_sound_1">aaddr_arg_sound_1</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#add_memcpy_holds">add_memcpy_holds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#kill_loads_after_storebytes_holds">kill_loads_after_storebytes_holds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">Mem.loadbytes_length</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">CASE2</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">CASE2</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">CASE1</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">CASE2</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
* <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Registers.html#set_res_lessdef">set_res_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;Icond&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#valnum_regs">valnum_regs</a></span> <span class="id">approx</span>!!<span class="id">pc</span> <span class="id">args</span>) <span class="kwd">as</span> [<span class="id">n1</span> <span class="id">vl</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> <span class="id">SAT</span>; <span class="tactic">intros</span> <span class="id">valu1</span> <span class="id">NH1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#valnum_regs_holds">valnum_regs_holds</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">valu2</span> &amp; <span class="id">NH2</span> &amp; <span class="id">EQ</span> &amp; <span class="id">AG</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSE.html#reduce">reduce</a></span> <span class="id"><a href="compcert.x86.Op.html#condition">condition</a></span> <span class="id"><a href="compcert.x86.CombineOp.html#combine_cond">combine_cond</a></span> <span class="id">n1</span> <span class="id">cond</span> <span class="id">args</span> <span class="id">vl</span>) <span class="kwd">as</span> [<span class="id">cond</span>' <span class="id">args</span>'] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">RES</span>: <span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id">cond</span>' <span class="id">rs</span>##<span class="id">args</span>' <span class="id">m</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#reduce_sound">reduce_sound</a></span> <span class="kwd">with</span> (<span class="id">sem</span> := <span class="kwd">fun</span> <span class="id">cond</span> <span class="id">vl</span> =&gt; <span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cond">cond</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#vl">vl</a></span> <span class="id">m</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.CombineOpproof.html#combine_cond_sound">combine_cond_sound</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Icond">exec_Icond</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.Op.html#eval_condition_lessdef">eval_condition_lessdef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#regs_lessdef_regs">regs_lessdef_regs</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1</a></span>; <span class="tactic">eauto</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;Ijumptable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">RLD</span> <span class="id">arg</span>); <span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">intro</span> <span class="id">LD</span>; <span class="id">inv</span> <span class="id">LD</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ijumptable">exec_Ijumptable</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_1">analysis_correct_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_nth_z_in">list_nth_z_in</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transfer">transfer</a></span>; <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;Ireturn&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_extends">Mem.free_parallel_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">m</span>'' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ireturn">exec_Ireturn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">or</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;internal&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#functions_translated">functions_translated</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">cu</span> [<span class="id">tf</span> [<span class="id">FPTR</span>' [<span class="id">TFD</span> <span class="id">LINK</span>]]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">fptr</span> = <span class="id">tfptr</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#find_funct_lessdef">find_funct_lessdef</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TFD</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.CSE.html#transf_function">transf_function</a></span> <span class="kwd">in</span> <span class="id">EQ</span>. <span class="id">fold</span> (<span class="id"><a href="compcert.backend.CSEproof.html#analyze">analyze</a></span> <span class="id">cu</span> <span class="id">f</span>) <span class="kwd">in</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.CSEproof.html#analyze">analyze</a></span> <span class="id">cu</span> <span class="id">f</span>) <span class="kwd">as</span> [<span class="id">approx</span>|] <span class="id">eqn</span>:?; <span class="id">inv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_extends">Mem.alloc_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">m</span>'' &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_function_internal">exec_function_internal</a></span>; <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id">FPTR</span>'. <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#analysis_correct_entry">analysis_correct_entry</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#init_regs_lessdef">init_regs_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;external&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#functions_translated">functions_translated</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">cu</span> [<span class="id">tf</span> [<span class="id">FPTR</span>' [<span class="id">TFD</span> <span class="id">LINK</span>]]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">fptr</span> = <span class="id">tfptr</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#find_funct_lessdef">find_funct_lessdef</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TFD</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_extends">external_call_mem_extends</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">v</span>' &amp; <span class="id">m1</span>' &amp; <span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span> &amp; <span class="id">S</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_function_external">exec_function_external</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_symbols_preserved">external_call_symbols_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STACK</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_return">exec_return</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#set_reg_lessdef">set_reg_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.CORELEMMA">CORELEMMA</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="PRESERVATION.WHOLE">WHOLE</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.WHOLE.ge">ge</a></span> := <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>.<br/>
<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.WHOLE.tge">tge</a></span> := <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tprog">tprog</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="PRESERVATION.WHOLE.MATCH_GENV">MATCH_GENV</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="compcert.common.Linking.html#match_globdef">match_globdef</a></span> (<span class="kwd">fun</span> <span class="id">cu</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="compcert.backend.CSE.html#transf_fundef">transf_fundef</a></span> (<span class="id"><a href="compcert.backend.ValueAnalysis.html#romem_for">romem_for</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#cu">cu</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>) <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.WHOLE.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3337')">Proof.</div>
<div class="proofscript" id="proof3337">
 <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenvs_match">Genv.globalenvs_match</a></span>; <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_initial_states">transf_initial_states</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">st1</span>, <span class="id"><a href="compcert.backend.RTL.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st1">st1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">st2</span>, <span class="id"><a href="compcert.backend.RTL.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tprog">tprog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st2">st2</a></span> /\ <span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st1">st1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st2">st2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3338')">Proof.</div>
<div class="proofscript" id="proof3338">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.common.AST.html#signature_main">signature_main</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">m0</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_match">Genv.init_mem_match</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.TRANSF">TRANSF</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tprog">tprog</a></span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>).<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.backend.CSEproof.html#symbols_preserved">symbols_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Linking.html#match_program_main">match_program_main</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.extends_refl">Mem.extends_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_final_states">transf_final_states</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">st1</span> <span class="id">st2</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st1">st1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st2">st2</a></span> -&gt; <span class="id"><a href="compcert.backend.RTL.html#final_state">final_state</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st1">st1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span> -&gt; <span class="id"><a href="compcert.backend.RTL.html#final_state">final_state</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#st2">st2</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#r">r</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3339')">Proof.</div>
<div class="proofscript" id="proof3339">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">RES</span>. <span class="id">inv</span> <span class="id">STACK</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="transf_program_correct">transf_program_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> (<span class="id"><a href="compcert.backend.RTL.html#semantics">RTL.semantics</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span>) (<span class="id"><a href="compcert.backend.RTL.html#semantics">RTL.semantics</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.tprog">tprog</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3340')">Proof.</div>
<div class="proofscript" id="proof3340">
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation_step">forward_simulation_step</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">match_states</span> := <span class="kwd">fun</span> <span class="id">s1</span> <span class="id">s2</span> =&gt; (<span class="id">exists</span> <span class="id">su0</span>, <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_state">sound_state</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.prog">prog</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#su0">su0</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s1">s1</a></span>) /\ <span class="id"><a href="compcert.backend.CSEproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s1">s1</a></span> <span class="id"><a href="compcert.backend.CSEproof.html#s2">s2</a></span>).<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#senv_preserved">senv_preserved</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#transf_initial_states">transf_initial_states</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_initial">sound_initial</a></span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.CSEproof.html#transf_final_states">transf_final_states</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.CSEproof.html#transf_step_correct">transf_step_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.CSEproof.html#senv_preserved">senv_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="id">des</span>. <span class="id">eexists</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueAnalysis.html#sound_step">sound_step</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION.WHOLE">WHOLE</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.CSEproof.html#PRESERVATION">PRESERVATION</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
