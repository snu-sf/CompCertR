
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Fcore_generic_fmt</title>
<meta name="description" content="Documentation of Coq module Fcore_generic_fmt" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Fcore_generic_fmt</h1>
<div class="coq">
<br/>
<h1> What is a real number belonging to a format, and many properties. </h1>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html">Fcore_Raux</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html">Fcore_defs</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html">Fcore_rnd</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html">Fcore_float_prop</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Generic">Generic</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Generic.beta">beta</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix">radix</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="bpow">bpow</a></span> <span class="id">e</span> := (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">e</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Generic.Format">Format</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Generic.Format.fexp">fexp</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<div class="doc">To be a good fexp </div>
<br/>
<span class="kwd">Class</span> <span class="id"><a name="Valid_exp">Valid_exp</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="valid_exp">valid_exp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>,<br/>
&nbsp;&nbsp;( (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span> + 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span>)%<span class="id">Z</span> ) /\<br/>
&nbsp;&nbsp;( (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span> + 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span>)%<span class="id">Z</span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#l">l</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#l">l</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span> ).<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">valid_exp_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="valid_exp_large">valid_exp_large</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#l">l</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#l">l</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#l">l</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5340')">Proof.</div>
<div class="proofscript" id="proof5340">
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hk</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Znot_ge_lt">Znot_ge_lt</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Hl</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zge_le">Zge_le</a></span> <span class="kwd">in</span> <span class="id">Hl</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span>' := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span> <span class="id">l</span>) <span class="id">Hl</span>) <span class="id">k</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id">valid_exp_large</span>' :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">l</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#l">l</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#l">l</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#k">k</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5341')">Proof.</div>
<div class="proofscript" id="proof5341">
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hk</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Znot_ge_lt">Znot_ge_lt</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>'.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zge_le">Zge_le</a></span> <span class="kwd">in</span> <span class="id">H</span>'.<br/>
<span class="tactic">assert</span> (<span class="id">Hl</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H</span>').<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span> <span class="kwd">in</span> <span class="id">Hl</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H1</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hl</span> <span class="id">k</span> <span class="id">H</span>').<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="canonic_exp">canonic_exp</a></span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="canonic">canonic</a></span> (<span class="id">f</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#float">float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f">f</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f">f</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="generic_format">generic_format</a></span> (<span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)).<br/>
<br/>
<div class="doc">Basic facts </div>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_0">generic_format_0</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> 0.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5342')">Proof.</div>
<div class="proofscript" id="proof5342">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> 0) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0)).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_Z2R">Ztrunc_Z2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_0">F2R_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="canonic_exp_opp">canonic_exp_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5343')">Proof.</div>
<div class="proofscript" id="proof5343">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_opp">ln_beta_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="canonic_exp_abs">canonic_exp_abs</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5344')">Proof.</div>
<div class="proofscript" id="proof5344">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_abs">ln_beta_abs</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_bpow">generic_format_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> + 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5345')">Proof.</div>
<div class="proofscript" id="proof5345">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">H</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_bpow">ln_beta_bpow</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id">e</span> + - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id">e</span> + 1))).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_Z2R">Ztrunc_Z2R</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_bpow">F2R_bpow</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_change_exp">F2R_change_exp</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_l">Zmult_1_l</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_minus_le_0">Zle_minus_le_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id">generic_format_bpow</span>' :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5346')">Proof.</div>
<div class="proofscript" id="proof5346">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">He</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.valid_exp_">valid_exp_</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_F2R">generic_format_F2R</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;( <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#m">m</a></span> &lt;&gt; 0 -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> )%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5347')">Proof.</div>
<div class="proofscript" id="proof5347">
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">e</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_eq_dec">Z_eq_dec</a></span> <span class="id">m</span> 0) <span class="kwd">as</span> [<span class="id">Zm</span>|<span class="id">Zm</span>].<br/>
<span class="tactic">intros</span> <span class="id">_</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Zm</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_0">F2R_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">set</span> (<span class="id">e</span>' := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">m</span> <span class="id">e</span>))).<br/>
<span class="tactic">intros</span> <span class="id">He</span>.<br/>
<span class="id">specialize</span> (<span class="id">He</span> <span class="id">Zm</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="tactic">at</span> 3. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span>  <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_change_exp">F2R_change_exp</a></span> <span class="kwd">with</span> (1 := <span class="id">He</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_eq_compat">F2R_eq_compat</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_Z2R">Ztrunc_Z2R</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.auxiliary.html#Zle_left">Zle_left</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">generic_format_F2R</span>': <span class="kwd">forall</span> (<span class="id">x</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>) (<span class="id">f</span>:<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#float">float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f">f</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt; ((<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f">f</a></span>)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5348')">Proof.</div>
<div class="proofscript" id="proof5348">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">f</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>; <span class="tactic">destruct</span> <span class="id">f</span> <span class="kwd">as</span> (<span class="id">m</span>,<span class="id">e</span>).<br/>
<span class="tactic">apply</span>  <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">intros</span> <span class="id">H3</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">apply</span> <span class="id">H2</span>.<br/>
<span class="tactic">intros</span> <span class="id">Y</span>; <span class="tactic">apply</span> <span class="id">H3</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_eq_0_reg">F2R_eq_0_reg</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">e</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="canonic_opp">canonic_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#m">m</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5349')">Proof.</div>
<div class="proofscript" id="proof5349">
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">e</span> <span class="id">H</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_Zopp">F2R_Zopp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="canonic_abs">canonic_abs</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#m">m</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5350')">Proof.</div>
<div class="proofscript" id="proof5350">
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">e</span> <span class="id">H</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_Zabs">F2R_Zabs</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_abs">canonic_exp_abs</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="canonic_0">canonic_0</a></span>: <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> 0 (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> 0%<span class="id">R</span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5351')">Proof.</div>
<div class="proofscript" id="proof5351">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span>; <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> {| <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Fnum</a></span> := 0; <span class="id">Fexp</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> 0) |}) <span class="kwd">with</span> 0%<span class="id">R</span>.<br/>
<span class="tactic">reflexivity</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>; <span class="tactic">ring</span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="canonic_unicity">canonic_unicity</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">f2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f1">f1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f1">f1</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f1">f1</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f2">f2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5352')">Proof.</div>
<div class="proofscript" id="proof5352">
<span class="tactic">intros</span> (<span class="id">m1</span>, <span class="id">e1</span>) (<span class="id">m2</span>, <span class="id">e2</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">intros</span> <span class="id">H1</span> <span class="id">H2</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">clear</span> <span class="id">H2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H</span> |- *.<br/>
<span class="tactic">apply</span> (<span class="tactic">f_equal</span> (<span class="kwd">fun</span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#m">m</a></span> <span class="id">e2</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_eq_reg">F2R_eq_reg</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="scaled_mantissa_generic">scaled_mantissa_generic</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5353')">Proof.</div>
<div class="proofscript" id="proof5353">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 3 ; <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_Z2R">Ztrunc_Z2R</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="scaled_mantissa_mult_bpow">scaled_mantissa_mult_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>))%<span class="id">R</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5354')">Proof.</div>
<div class="proofscript" id="proof5354">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_l">Zplus_opp_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="scaled_mantissa_0">scaled_mantissa_0</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> 0 = 0%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5355')">Proof.</div>
<div class="proofscript" id="proof5355">
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="scaled_mantissa_opp">scaled_mantissa_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = (-<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5356')">Proof.</div>
<div class="proofscript" id="proof5356">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse">Ropp_mult_distr_l_reverse</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="scaled_mantissa_abs">scaled_mantissa_abs</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5357')">Proof.</div>
<div class="proofscript" id="proof5357">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_abs">canonic_exp_abs</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_opp">generic_format_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5358')">Proof.</div>
<div class="proofscript" id="proof5358">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_opp">Ztrunc_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_abs">generic_format_abs</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5359')">Proof.</div>
<div class="proofscript" id="proof5359">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_abs">scaled_mantissa_abs</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_abs">canonic_exp_abs</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_abs">Ztrunc_abs</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_Zabs">F2R_Zabs</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_abs_inv">generic_format_abs_inv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5360')">Proof.</div>
<div class="proofscript" id="proof5360">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rcase_abs">Rcase_abs</a></span> ; <span class="tactic">intros</span> <span class="id">_</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_opp">Ztrunc_opp</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>) <span class="tactic">at</span> 1.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="id">easy</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="canonic_exp_fexp">canonic_exp_fexp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5361')">Proof.</div>
<div class="proofscript" id="proof5361">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="canonic_exp_fexp_pos">canonic_exp_fexp_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5362')">Proof.</div>
<div class="proofscript" id="proof5362">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_fexp">canonic_exp_fexp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Properties when the real number is "small" (kind of subnormal) </div>
<span class="kwd">Theorem</span> <span class="id"><a name="mantissa_small_pos">mantissa_small_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>) &lt; 1)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5363')">Proof.</div>
<div class="proofscript" id="proof5363">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_l">Zplus_opp_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="scaled_mantissa_small">scaled_mantissa_small</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) &lt; 1)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5364')">Proof.</div>
<div class="proofscript" id="proof5364">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Ex</span> <span class="id">He</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Zx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_0">scaled_mantissa_0</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 1).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_abs">scaled_mantissa_abs</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_abs">canonic_exp_abs</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>', <span class="id">Ex</span>').<br/>
<span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span>' <span class="id">Zx</span>).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#mantissa_small_pos">mantissa_small_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Ex</span>').<br/>
<span class="tactic">assert</span> (<span class="id">ex</span>' &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">He</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt_bpow">bpow_lt_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">Ex</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span> <span class="id">_</span>) <span class="id">He</span>)).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="abs_scaled_mantissa_lt_bpow">abs_scaled_mantissa_lt_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5365')">Proof.</div>
<div class="proofscript" id="proof5365">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Zx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_0">scaled_mantissa_0</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ln_beta_gt">bpow_ln_beta_gt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">_</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_mult_bpow">ln_beta_mult_bpow</a></span> <span class="kwd">with</span> (1 := <span class="id">Zx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ln_beta_generic_gt">ln_beta_generic_gt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5366')">Proof.</div>
<div class="proofscript" id="proof5366">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Gx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Znot_ge_lt">Znot_ge_lt</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>,<span class="id">Ex</span>) ; <span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> <span class="id">Zx</span>).<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zge_le">Zge_le</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_small">scaled_mantissa_small</a></span> <span class="id">x</span> <span class="id">ex</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Ex</span>) <span class="id">H</span>).<br/>
<span class="id">contradict</span> <span class="id">Zx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Gx</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>)) <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_0">F2R_0</a></span>.<br/>
<span class="tactic">cut</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>)) &lt; 1)%<span class="id">Z</span>.<br/>
<span class="tactic">clear</span> ; <span class="id">zify</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_abs">Z2R_abs</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_generic">scaled_mantissa_generic</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="mantissa_DN_small_pos">mantissa_DN_small_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5367')">Proof.</div>
<div class="proofscript" id="proof5367">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_imp">Zfloor_imp</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#mantissa_small_pos">mantissa_small_pos</a></span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>).<br/>
<span class="tactic">split</span> ; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> ; <span class="tactic">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="mantissa_UP_small_pos">mantissa_UP_small_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)) = 1%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5368')">Proof.</div>
<div class="proofscript" id="proof5368">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_imp">Zceil_imp</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#mantissa_small_pos">mantissa_small_pos</a></span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>).<br/>
<span class="tactic">split</span> ; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> ; <span class="tactic">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Generic facts about any format </div>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_discrete">generic_format_discrete</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#m">m</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>) &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#m">m</a></span> + 1) <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;~ <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5369')">Proof.</div>
<div class="proofscript" id="proof5369">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">m</span> <span class="id">e</span> (<span class="id">Hx</span>,<span class="id">Hx2</span>) <span class="id">Hf</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx2</span>). <span class="tactic">clear</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hf</span>.<br/>
<span class="id">fold</span> <span class="id">e</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_le_compat">F2R_le_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_generic">scaled_mantissa_generic</a></span> <span class="kwd">with</span> (1 := <span class="id">Hf</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id">e</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_mult_bpow">scaled_mantissa_mult_bpow</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_canonic">generic_format_canonic</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5370')">Proof.</div>
<div class="proofscript" id="proof5370">
<span class="tactic">intros</span> (<span class="id">m</span>, <span class="id">e</span>) <span class="id">Hf</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic">canonic</a></span> <span class="kwd">in</span> <span class="id">Hf</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hf</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hf</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_eq_compat">F2R_eq_compat</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_Z2R">Ztrunc_Z2R</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_ge_bpow">generic_format_ge_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">emin</span>,<br/>
&nbsp;&nbsp;( <span class="kwd">forall</span> <span class="id">e</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#emin">emin</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span> ) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#emin">emin</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5371')">Proof.</div>
<div class="proofscript" id="proof5371">
<span class="tactic">intros</span> <span class="id">emin</span> <span class="id">Emin</span> <span class="id">x</span> <span class="id">Hx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>))).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#bpow_le_F2R">bpow_le_F2R</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_gt_0_reg">F2R_gt_0_reg</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="abs_lt_bpow_prec">abs_lt_bpow_prec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">prec</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">e</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#prec">prec</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#prec">prec</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<span class="tactic">intros</span> <span class="id">prec</span> <span class="id">Hp</span> <span class="id">x</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">Hxz</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hxz</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>,<span class="id">Ex</span>) ; <span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> <span class="id">Hxz</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Ex</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="id">specialize</span> (<span class="id">Hp</span> <span class="id">ex</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id">generic_format_bpow_inv</span>' :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> + 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5372')">Proof.</div>
<div class="proofscript" id="proof5372">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">He</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Znot_gt_le">Znot_gt_le</a></span>.<br/>
<span class="id">contradict</span> <span class="id">He</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_bpow">ln_beta_bpow</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_floor">Ztrunc_floor</a></span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_imp">Zfloor_imp</a></span> <span class="kwd">with</span> (<span class="id">n</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span> <span class="id">_</span> <span class="id">_</span> 0).<br/>
<span class="tactic">clear</span> -<span class="id">He</span> ; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_bpow_inv">generic_format_bpow_inv</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5373')">Proof.</div>
<div class="proofscript" id="proof5373">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">He</span>.<br/>
<span class="tactic">apply</span> <span class="id">generic_format_bpow_inv</span>' <span class="kwd">in</span> <span class="id">He</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span> := <span class="id">valid_exp_large</span>' (<span class="id">e</span> + 1) <span class="id">e</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Generic.Format.Fcore_generic_round_pos">Fcore_generic_round_pos</a></span>.<br/>
<br/>
<div class="doc">Rounding functions: R -&gt; Z </div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Class</span> <span class="id"><a name="Valid_rnd">Valid_rnd</a></span> := {<br/>
&nbsp;&nbsp;<span class="id"><a name="Zrnd_le">Zrnd_le</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">Z</span> ;<br/>
&nbsp;&nbsp;<span class="id"><a name="Zrnd_Z2R">Zrnd_Z2R</a></span> : <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#n">n</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#n">n</a></span><br/>
}.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zrnd_DN_or_UP">Zrnd_DN_or_UP</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5374')">Proof.</div>
<div class="proofscript" id="proof5374">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="id">left</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_antisym">Zle_antisym</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_Z2R">Zrnd_Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_le">Zrnd_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="id">right</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_antisym">Zle_antisym</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_Z2R">Zrnd_Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_le">Zrnd_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H</span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_Z2R">Zfloor_Z2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_Z2R">Zrnd_Z2R</a></span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_irrefl">Zlt_irrefl</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zrnd_ZR_or_AW">Zrnd_ZR_or_AW</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5375')">Proof.</div>
<div class="proofscript" id="proof5375">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_DN_or_UP">Zrnd_DN_or_UP</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>] ;<br/>
&nbsp;&nbsp;<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rlt_bool">Rlt_bool</a></span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
Qed.</div>
<br/>
<div class="doc">the most useful one: R -&gt; F </div>
<span class="kwd">Definition</span> <span class="id"><a name="round">round</a></span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Fcore_generic_round_pos.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_bounded_large_pos">round_bounded_large_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5376')">Proof.</div>
<div class="proofscript" id="proof5376">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">He</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_fexp_pos">canonic_exp_fexp_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_DN_or_UP">Zrnd_DN_or_UP</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>))) <span class="kwd">as</span> [<span class="id">Hr</span>|<span class="id">Hr</span>] ; <span class="tactic">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="comment">(*&nbsp;DN&nbsp;*)</span><br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">replace</span> (<span class="id">ex</span> - 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">ex</span> - 1 + - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hf</span>: <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id">ex</span> - 1 - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)) = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id">ex</span> - 1 + - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hf</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lub">Zfloor_lub</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hf</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hx</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="comment">(*&nbsp;UP&nbsp;*)</span><br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">ex</span> <span class="tactic">at</span> 3 ; <span class="tactic">replace</span> <span class="id">ex</span> <span class="kwd">with</span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hf</span>: <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)) = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id">ex</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hf</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_glb">Zceil_glb</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hf</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_bounded_small_pos">round_bounded_small_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = 0%<span class="id">R</span> \/ <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5377')">Proof.</div>
<div class="proofscript" id="proof5377">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">He</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_fexp_pos">canonic_exp_fexp_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_DN_or_UP">Zrnd_DN_or_UP</a></span> (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>))) <span class="kwd">as</span> [<span class="id">Hr</span>|<span class="id">Hr</span>] ; <span class="tactic">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="comment">(*&nbsp;DN&nbsp;*)</span><br/>
<span class="id">left</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_eq_0_compat_r">Rmult_eq_0_compat_r</a></span>.<br/>
<span class="tactic">apply</span> (@<span class="tactic">f_equal</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">_</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_imp">Zfloor_imp</a></span>.<br/>
<span class="tactic">refine</span> (<span class="kwd">let</span> <span class="id">H</span> := <span class="id">_</span> <span class="kwd">in</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#H">H</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#H">H</a></span>)).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#mantissa_small_pos">mantissa_small_pos</a></span>.<br/>
<span class="comment">(*&nbsp;UP&nbsp;*)</span><br/>
<span class="id">right</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)) <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">apply</span> (<span class="tactic">f_equal</span> (<span class="kwd">fun</span> <span class="id">m</span> =&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#m">m</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>))%<span class="id">R</span>)).<br/>
<span class="tactic">apply</span> (@<span class="tactic">f_equal</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">_</span> 1%<span class="id">Z</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_imp">Zceil_imp</a></span>.<br/>
<span class="tactic">refine</span> (<span class="kwd">let</span> <span class="id">H</span> := <span class="id">_</span> <span class="kwd">in</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#H">H</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#H">H</a></span>))).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#mantissa_small_pos">mantissa_small_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_le_pos">round_le_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5378')">Proof.</div>
<div class="proofscript" id="proof5378">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">ex</span> <span class="id">Hex</span>].<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">y</span>) <span class="kwd">as</span> [<span class="id">ey</span> <span class="id">Hey</span>].<br/>
<span class="id">specialize</span> (<span class="id">Hex</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>)).<br/>
<span class="id">specialize</span> (<span class="id">Hey</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span> <span class="id">Hxy</span>))).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">Hex</span>.<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">Hey</span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">Hxy</span>); <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">He</span>: (<span class="id">ex</span> &lt;= <span class="id">ey</span>)%<span class="id">Z</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt_bpow">bpow_lt_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hex</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> <span class="id">y</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Heq</span>: <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ey</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id">x</span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id">y</span>)%<span class="id">R</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique_pos">ln_beta_unique_pos</a></span> <span class="kwd">with</span> (1 := <span class="id">Hex</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique_pos">ln_beta_unique_pos</a></span> <span class="kwd">with</span> (1 := <span class="id">Hey</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_le_compat">F2R_le_compat</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_le">Zrnd_le</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span> <span class="kwd">with</span> (2 := <span class="id">Hxy</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ey</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ey</span>)) <span class="kwd">as</span> [<span class="id">Hy1</span>|<span class="id">Hy1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span> <span class="kwd">with</span> (1 := <span class="id">Hy1</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> <span class="id">ey</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span>) <span class="kwd">as</span> [<span class="id">He</span>'|<span class="id">He</span>'].<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id">Heq</span>, <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id">ey</span> - 1)).<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)) <span class="kwd">as</span> [<span class="id">Hx1</span>|<span class="id">Hx1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_bounded_small_pos">round_bounded_small_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx1</span> <span class="id">Hex</span>) <span class="kwd">as</span> [-&gt; | -&gt;].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="kwd">in</span> <span class="id">Hx1</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">Hx1</span> <span class="id">ey</span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id">ex</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_le_pred">Z.lt_le_pred</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_generic">round_generic</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5379')">Proof.</div>
<div class="proofscript" id="proof5379">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_generic">scaled_mantissa_generic</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_Z2R">Zrnd_Z2R</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_0">round_0</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> 0 = 0%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5380')">Proof.</div>
<div class="proofscript" id="proof5380">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>.<br/>
<span class="id">change</span> 0%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_Z2R">Zrnd_Z2R</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_0">F2R_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="exp_small_round_0_pos">exp_small_round_0_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = 0%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span> .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5381')">Proof.</div>
<div class="proofscript" id="proof5381">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">H</span> <span class="id">H1</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)); <span class="tactic">trivial</span>; <span class="tactic">intros</span> <span class="id">V</span>.<br/>
<span class="id">contradict</span> <span class="id">H1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id">ex</span>-1)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span>); <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_round_pos">generic_format_round_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5382')">Proof.</div>
<div class="proofscript" id="proof5382">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx0</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">Hex</span>).<br/>
<span class="id">specialize</span> (<span class="id">Hex</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx0</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">Hex</span>. 2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)) <span class="kwd">as</span> [<span class="id">He</span>|<span class="id">He</span>].<br/>
<span class="comment">(*&nbsp;small&nbsp;*)</span><br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_bounded_small_pos">round_bounded_small_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span> <span class="id">Hex</span>) <span class="kwd">as</span> [<span class="id">Hr</span>|<span class="id">Hr</span>] ; <span class="tactic">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span>.<br/>
<span class="comment">(*&nbsp;large&nbsp;*)</span><br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span> <span class="id">Hex</span>).<br/>
<span class="tactic">intros</span> (<span class="id">Hr1</span>, <span class="id">Hr2</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id">ex</span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id">x</span>)) <span class="kwd">as</span> [<span class="id">Hr</span>|<span class="id">Hr</span>].<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hr</span> <span class="id">Hr2</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">_</span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_fexp_pos">canonic_exp_fexp_pos</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">_</span>) <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Hr1</span> <span class="id">Hr</span>)).<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_fexp_pos">canonic_exp_fexp_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hex</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zeq_le">Zeq_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Fcore_generic_round_pos">Fcore_generic_round_pos</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_ext">round_ext</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd1</span> <span class="id">rnd2</span>,<br/>
&nbsp;&nbsp;( <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd1">rnd1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd2">rnd2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> ) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd1">rnd1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd2">rnd2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5383')">Proof.</div>
<div class="proofscript" id="proof5383">
<span class="tactic">intros</span> <span class="id">rnd1</span> <span class="id">rnd2</span> <span class="id">Hext</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hext</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Generic.Format.Zround_opp">Zround_opp</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Generic.Format.Zround_opp.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Zround_opp.rnd">rnd</a></span> }.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Zrnd_opp">Zrnd_opp</a></span> <span class="id">x</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp">Zopp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Zround_opp.rnd">rnd</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)).<br/>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="valid_rnd_opp">valid_rnd_opp</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5384')">Proof with</div>
<div class="proofscript" id="proof5384">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zopp_le_cancel">Zopp_le_cancel</a></span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_involutive">Zopp_involutive</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_le">Zrnd_le</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">n</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_opp">Z2R_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_Z2R">Zrnd_Z2R</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_involutive">Zopp_involutive</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_opp">round_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Zround_opp.rnd">rnd</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Ropp">Ropp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5385')">Proof.</div>
<div class="proofscript" id="proof5385">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_Zopp">F2R_Zopp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_eq_compat">F2R_eq_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">exact</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_involutive">Zopp_involutive</a></span> <span class="id">_</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Zround_opp">Zround_opp</a></span>.<br/>
<br/>
<div class="doc">IEEE-754 roundings: up, down and to zero </div>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="valid_rnd_DN">valid_rnd_DN</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5386')">Proof.</div>
<div class="proofscript" id="proof5386">
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_le">Zfloor_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_Z2R">Zfloor_Z2R</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="valid_rnd_UP">valid_rnd_UP</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5387')">Proof.</div>
<div class="proofscript" id="proof5387">
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_le">Zceil_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_Z2R">Zceil_Z2R</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="valid_rnd_ZR">valid_rnd_ZR</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5388')">Proof.</div>
<div class="proofscript" id="proof5388">
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_le">Ztrunc_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_Z2R">Ztrunc_Z2R</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="valid_rnd_AW">valid_rnd_AW</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5389')">Proof.</div>
<div class="proofscript" id="proof5389">
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway_le">Zaway_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway_Z2R">Zaway_Z2R</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Generic.Format.monotone">monotone</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Generic.Format.monotone.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_or_UP">round_DN_or_UP</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5390')">Proof.</div>
<div class="proofscript" id="proof5390">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_DN_or_UP">Zrnd_DN_or_UP</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>)) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="id">left</span>. <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">right</span>. <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_ZR_or_AW">round_ZR_or_AW</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5391')">Proof.</div>
<div class="proofscript" id="proof5391">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_ZR_or_AW">Zrnd_ZR_or_AW</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>)) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="id">left</span>. <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="id">right</span>. <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_le">round_le</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5392')">Proof with</div>
<div class="proofscript" id="proof5392">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#total_order_T">total_order_T</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [[<span class="id">Hx</span>|<span class="id">Hx</span>]|<span class="id">Hx</span>].<br/>
3: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le_pos">round_le_pos</a></span>.<br/>
<span class="comment">(*&nbsp;x&nbsp;&lt;&nbsp;0&nbsp;*)</span><br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_or_le">Rlt_or_le</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Hy</span>|<span class="id">Hy</span>].<br/>
<span class="comment">(*&nbsp;.&nbsp;y&nbsp;&lt;&nbsp;0&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>), &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">y</span>).<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span> (-<span class="id">x</span>)), (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span> (-<span class="id">y</span>)).<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span> (-<span class="id">x</span>)), (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span> (-<span class="id">y</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_cancel">Ropp_le_cancel</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- 2!<span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le_pos">round_le_pos</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span>) (-<span class="id">y</span>) (-<span class="id">x</span>)).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;0&nbsp;&lt;=&nbsp;y&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> 0%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_le_0_compat">F2R_le_0_compat</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_Z2R">Zrnd_Z2R</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> 0).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_le">Zrnd_le</a></span>...<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>)))).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_ge_0_compat">F2R_ge_0_compat</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_Z2R">Zrnd_Z2R</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> 0).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_le">Zrnd_le</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">Hy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="comment">(*&nbsp;x&nbsp;=&nbsp;0&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_ge_0_compat">F2R_ge_0_compat</a></span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_Z2R">Zrnd_Z2R</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> 0).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_le">Zrnd_le</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_ge_generic">round_ge_generic</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5393')">Proof.</div>
<div class="proofscript" id="proof5393">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id">x</span> <span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_le_generic">round_le_generic</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5394')">Proof.</div>
<div class="proofscript" id="proof5394">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone.rnd">rnd</a></span> <span class="id">y</span> <span class="id">Hy</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone">monotone</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_abs_abs">round_abs_abs</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">P</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="kwd">Prop</span>,<br/>
&nbsp;&nbsp;( <span class="kwd">forall</span> <span class="id">rnd</span> (<span class="id">Hr</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span>) <span class="id">x</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#P">P</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) ) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> {<span class="id">Hr</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span>} <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#P">P</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5395')">Proof with</div>
<div class="proofscript" id="proof5395">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">P</span> <span class="id">HP</span> <span class="id">rnd</span> <span class="id">Hr</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">HP</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span> <span class="id">rnd</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">Hx</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left">Rabs_left</a></span> <span class="id">_</span> <span class="id">Hx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_opp">round_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">HP</span>...<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span> <span class="id">rnd</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_bounded_large">round_bounded_large</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> {<span class="id">Hr</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span>} <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5396')">Proof with</div>
<div class="proofscript" id="proof5396">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">Hr</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">He</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_abs_abs">round_abs_abs</a></span>...<br/>
<span class="tactic">clear</span> <span class="id">rnd</span> <span class="id">Hr</span> <span class="id">x</span>.<br/>
<span class="tactic">intros</span> <span class="id">rnd</span>' <span class="id">Hr</span> <span class="id">x</span> <span class="id">_</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="exp_small_round_0">exp_small_round_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> {<span class="id">Hr</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span>} <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = 0%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span> .<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5397')">Proof.</div>
<div class="proofscript" id="proof5397">
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">Hr</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="tactic">generalize</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span> <span class="tactic">at</span> 1.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_abs_abs">round_abs_abs</a></span> (<span class="kwd">fun</span> <span class="id">t</span> <span class="id">rt</span> =&gt; <span class="kwd">forall</span> (<span class="id">ex</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#t">t</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rt">rt</a></span> = 0%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span>)); <span class="tactic">trivial</span>.<br/>
<span class="tactic">clear</span>; <span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">Hr</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#exp_small_round_0_pos">exp_small_round_0_pos</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Generic.Format.monotone_abs">monotone_abs</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Generic.Format.monotone_abs.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone_abs.rnd">rnd</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="abs_round_ge_generic">abs_round_ge_generic</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone_abs.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5398')">Proof with</div>
<div class="proofscript" id="proof5398">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_abs_abs">round_abs_abs</a></span>...<br/>
<span class="tactic">clear</span> <span class="id">rnd</span> <span class="id">valid_rnd</span> <span class="id">y</span>.<br/>
<span class="tactic">intros</span> <span class="id">rnd</span>' <span class="id">Hrnd</span> <span class="id">y</span> <span class="id">Hy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ge_generic">round_ge_generic</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="abs_round_le_generic">abs_round_le_generic</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span> -&gt; (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone_abs.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5399')">Proof with</div>
<div class="proofscript" id="proof5399">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_abs_abs">round_abs_abs</a></span>...<br/>
<span class="tactic">clear</span> <span class="id">rnd</span> <span class="id">valid_rnd</span> <span class="id">x</span>.<br/>
<span class="tactic">intros</span> <span class="id">rnd</span>' <span class="id">Hrnd</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le_generic">round_le_generic</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone_abs">monotone_abs</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_opp">round_DN_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5400')">Proof.</div>
<div class="proofscript" id="proof5400">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_involutive">Zopp_involutive</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_opp">round_UP_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5401')">Proof.</div>
<div class="proofscript" id="proof5401">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_ZR_opp">round_ZR_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Ropp">Ropp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5402')">Proof.</div>
<div class="proofscript" id="proof5402">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_opp">Ztrunc_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_ZR_abs">round_ZR_abs</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5403')">Proof with</div>
<div class="proofscript" id="proof5403">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="tactic">at</span> 2.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rcase_abs">Rcase_abs</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ZR_opp">round_ZR_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rge_le">Rge_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_AW_opp">round_AW_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Ropp">Ropp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5404')">Proof.</div>
<div class="proofscript" id="proof5404">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway_opp">Zaway_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_Zopp">F2R_Zopp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_AW_abs">round_AW_abs</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5405')">Proof with</div>
<div class="proofscript" id="proof5405">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="tactic">at</span> 2.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rcase_abs">Rcase_abs</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_AW_opp">round_AW_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le">round_le</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rge_le">Rge_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_ZR_pos">round_ZR_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5406')">Proof.</div>
<div class="proofscript" id="proof5406">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rlt_bool_spec">Rlt_bool_spec</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">elim</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id">x</span>))).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span> <span class="kwd">with</span> (2 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">easy</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_ZR_neg">round_ZR_neg</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5407')">Proof.</div>
<div class="proofscript" id="proof5407">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rlt_bool_spec">Rlt_bool_spec</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">intros</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="tactic">elim</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id">x</span>))).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span> <span class="kwd">with</span> (2 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>.<br/>
<span class="id">change</span> 0%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_Z2R">Zfloor_Z2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_Z2R">Zceil_Z2R</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_AW_pos">round_AW_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5408')">Proof.</div>
<div class="proofscript" id="proof5408">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rlt_bool_spec">Rlt_bool_spec</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">elim</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id">x</span>))).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span> <span class="kwd">with</span> (2 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="id">easy</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_AW_neg">round_AW_neg</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5409')">Proof.</div>
<div class="proofscript" id="proof5409">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rlt_bool_spec">Rlt_bool_spec</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">intros</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="tactic">elim</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id">x</span>))).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span> <span class="kwd">with</span> (2 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>.<br/>
<span class="id">change</span> 0%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_Z2R">Zfloor_Z2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_Z2R">Zceil_Z2R</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_round">generic_format_round</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> { <span class="id">Hr</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5410')">Proof with</div>
<div class="proofscript" id="proof5410">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">Zrnd</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#total_order_T">total_order_T</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [[<span class="id">Hx</span>|<span class="id">Hx</span>]|<span class="id">Hx</span>].<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_or_UP">round_DN_or_UP</a></span> <span class="id">rnd</span> (- - <span class="id">x</span>)) <span class="kwd">as</span> [<span class="id">Hr</span>|<span class="id">Hr</span>] ; <span class="tactic">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_opp">round_DN_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round_pos">generic_format_round_pos</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_opp">round_UP_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round_pos">generic_format_round_pos</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round_pos">generic_format_round_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_pt">round_DN_pt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Rnd_DN_pt">Rnd_DN_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5411')">Proof with</div>
<div class="proofscript" id="proof5411">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_mult_bpow">scaled_mantissa_mult_bpow</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">g</span> <span class="id">Hg</span> <span class="id">Hgx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ge_generic">round_ge_generic</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_satisfies_any">generic_format_satisfies_any</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#satisfies_any">satisfies_any</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5412')">Proof.</div>
<div class="proofscript" id="proof5412">
<span class="tactic">split</span>.<br/>
<span class="comment">(*&nbsp;symmetric&nbsp;set&nbsp;*)</span><br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="comment">(*&nbsp;round&nbsp;down&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="id">eexists</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_pt">round_UP_pt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Rnd_UP_pt">Rnd_UP_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5413')">Proof.</div>
<div class="proofscript" id="proof5413">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_opp">round_UP_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_DN_UP_pt_sym">Rnd_DN_UP_pt_sym</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_ZR_pt">round_ZR_pt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Rnd_ZR_pt">Rnd_ZR_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5414')">Proof.</div>
<div class="proofscript" id="proof5414">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">split</span> ; <span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ZR_pos">round_ZR_pos</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ZR_neg">round_ZR_neg</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_small_pos">round_DN_small_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = 0%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5415')">Proof.</div>
<div class="proofscript" id="proof5415">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_0">F2R_0</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#mantissa_DN_small_pos">mantissa_DN_small_pos</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>) (2 := <span class="id">He</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_fexp_pos">canonic_exp_fexp_pos</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_UP_lt">round_DN_UP_lt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, ~ <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5416')">Proof with</div>
<div class="proofscript" id="proof5416">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span>:(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>  <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span> &lt;= <span class="id">x</span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Hx</span> <span class="kwd">as</span> [<span class="id">Hx</span> <span class="id">_</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_le_lt">Rnot_le_lt</a></span>; <span class="tactic">intro</span> <span class="id">Hle</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">x</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">Fx</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="tactic">destruct</span> <span class="id">Hx</span> <span class="kwd">as</span> [<span class="id">_</span> <span class="id">Hx</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_le_lt">Rnot_le_lt</a></span>; <span class="tactic">intro</span> <span class="id">Hle</span>.<br/>
<span class="tactic">assert</span> (<span class="id">x</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>) <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">Fx</span>.<br/>
<span class="id">contradict</span> <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_small_pos">round_UP_small_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5417')">Proof.</div>
<div class="proofscript" id="proof5417">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hx</span> <span class="id">He</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_bpow">F2R_bpow</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#mantissa_UP_small_pos">mantissa_UP_small_pos</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>) (2 := <span class="id">He</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_fexp_pos">canonic_exp_fexp_pos</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_EM">generic_format_EM</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> \/ ~<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5418')">Proof with</div>
<div class="proofscript" id="proof5418">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="id">left</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="id">right</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Generic.Format.round_large">round_large</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Generic.Format.round_large.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.round_large.rnd">rnd</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_large_pos_ge_pow">round_large_pos_ge_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.round_large.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.round_large.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5419')">Proof.</div>
<div class="proofscript" id="proof5419">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">Hd</span> <span class="id">Hex</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">He</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span>: (0 &lt; <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">Hex</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">specialize</span> (<span class="id">He</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">He</span>. 2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id">ex</span> - 1)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">cut</span> (<span class="id">e</span> &lt; <span class="id">ex</span>)%<span class="id">Z</span>. <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">He</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_bounded_small_pos">round_bounded_small_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.round_large.rnd">rnd</a></span> <span class="id">x</span> <span class="id">ex</span> <span class="id">H</span> <span class="id">He</span>) <span class="kwd">as</span> [<span class="id">Hr</span>|<span class="id">Hr</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">Hr</span> <span class="kwd">in</span> <span class="id">Hd</span>.<br/>
<span class="tactic">elim</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> <span class="kwd">with</span> (1 := <span class="id">Hd</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.round_large.rnd">rnd</a></span> <span class="id">x</span> <span class="id">ex</span> <span class="id">H</span> <span class="id">He</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.round_large">round_large</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ln_beta_round_ZR">ln_beta_round_ZR</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5420')">Proof with</div>
<div class="proofscript" id="proof5420">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zr</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Zx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">Ex</span>) ; <span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> <span class="id">Zx</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ZR_abs">round_ZR_abs</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_large_pos_ge_pow">round_large_pos_ge_pow</a></span>...<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ZR_abs">round_ZR_abs</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Ex</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Ex</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ZR_pos">round_ZR_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ln_beta_round">ln_beta_round</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> {<span class="id">Hrnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span>} <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) \/<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmax">Zmax</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5421')">Proof with</div>
<div class="proofscript" id="proof5421">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">Hrnd</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ZR_or_AW">round_ZR_or_AW</a></span> <span class="id">rnd</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hr</span>|<span class="id">Hr</span>] ; <span class="tactic">rewrite</span> <span class="id">Hr</span> ; <span class="tactic">clear</span> <span class="id">Hr</span> <span class="id">rnd</span> <span class="id">Hrnd</span>.<br/>
<span class="id">left</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_round_ZR">ln_beta_round_ZR</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Zr</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Zx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">Ex</span>) ; <span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> <span class="id">Zx</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_abs">ln_beta_abs</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_AW_abs">round_AW_abs</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span>)) <span class="kwd">as</span> [<span class="id">He</span>|<span class="id">He</span>].<br/>
<span class="id">right</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zcompare.html#Zmax_r">Zmax_r</a></span> <span class="kwd">with</span> (1 := <span class="id">He</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_AW_pos">round_AW_pos</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span> <span class="id">_</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_small_pos">round_UP_small_pos</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zaway">Zaway</a></span> <span class="id">_</span> <span class="id">ex</span> <span class="id">He</span> <span class="id">Ex</span>) <span class="kwd">as</span> (<span class="id">H1</span>,[<span class="id">H2</span>|<span class="id">H2</span>]).<br/>
<span class="id">left</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_AW_abs">round_AW_abs</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Rabsolu">Rabs_Rabsolu</a></span>.<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="id">right</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zcompare.html#Zmax_l">Zmax_l</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ln_beta_DN">ln_beta_DN</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5422')">Proof.</div>
<div class="proofscript" id="proof5422">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hd</span>.<br/>
<span class="tactic">assert</span> (0 &lt; <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">Hd</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="id">revert</span> <span class="id">Hd</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ZR_pos">round_ZR_pos</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Hd</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_round_ZR">ln_beta_round_ZR</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="canonic_exp_DN">canonic_exp_DN</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5423')">Proof.</div>
<div class="proofscript" id="proof5423">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hd</span>.<br/>
<span class="tactic">apply</span> (<span class="tactic">f_equal</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_DN">ln_beta_DN</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="scaled_mantissa_DN">scaled_mantissa_DN</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5424')">Proof.</div>
<div class="proofscript" id="proof5424">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hd</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_DN">canonic_exp_DN</a></span> <span class="kwd">with</span> (1 := <span class="id">Hd</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_N_pt_DN_or_UP">generic_N_pt_DN_or_UP</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Rnd_N_pt">Rnd_N_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f">f</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#f">f</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5425')">Proof.</div>
<div class="proofscript" id="proof5425">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">f</span> <span class="id">Hxf</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_N_pt_DN_or_UP">Rnd_N_pt_DN_or_UP</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hxf</span>).<br/>
<span class="id">left</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_DN_pt_unicity">Rnd_DN_pt_unicity</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="id">right</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_UP_pt_unicity">Rnd_UP_pt_unicity</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Generic.Format.not_FTZ">not_FTZ</a></span>.<br/>
<br/>
<span class="kwd">Class</span> <span class="id"><a name="Exp_not_FTZ">Exp_not_FTZ</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="exp_not_FTZ">exp_not_FTZ</a></span> : <span class="kwd">forall</span> <span class="id">e</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> + 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">exp_not_FTZ_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="subnormal_exponent">subnormal_exponent</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>))) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5426')">Proof.</div>
<div class="proofscript" id="proof5426">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">x</span> <span class="id">He</span> <span class="id">Hx</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="tactic">at</span> 2. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span>: <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id">x</span> + - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">e</span>)) = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id">x</span> + - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">e</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">set</span> (<span class="id">ex</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>).<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#exp_not_FTZ">exp_not_FTZ</a></span> <span class="id">ex</span>).<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span> <span class="id">_</span>) <span class="id">He</span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">ex</span> + 1)%<span class="id">Z</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_Z2R">Ztrunc_Z2R</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_mult">Z2R_mult</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">now</span> <span class="id">ring_simplify</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id">x</span> + - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">e</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">e</span>)%<span class="id">Z</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.not_FTZ">not_FTZ</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Generic.Format.monotone_exp">monotone_exp</a></span>.<br/>
<br/>
<span class="kwd">Class</span> <span class="id"><a name="Monotone_exp">Monotone_exp</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="monotone_exp">monotone_exp</a></span> : <span class="kwd">forall</span> <span class="id">ex</span> <span class="id">ey</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ey">ey</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ey">ey</a></span>)%<span class="id">Z</span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">monotone_exp_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Monotone_exp">Monotone_exp</a></span> }.<br/>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="monotone_exp_not_FTZ">monotone_exp_not_FTZ</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5427')">Proof.</div>
<div class="proofscript" id="proof5427">
<span class="tactic">intros</span> <span class="id">e</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_lt_le_dec">Z_lt_le_dec</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id">e</span>) <span class="id">e</span>) <span class="kwd">as</span> [<span class="id">He</span>|<span class="id">He</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#monotone_exp">monotone_exp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp">valid_exp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="canonic_exp_le_bpow">canonic_exp_le_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>) (<span class="id">e</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;&gt; 0%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5428')">Proof.</div>
<div class="proofscript" id="proof5428">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">Zx</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#monotone_exp">monotone_exp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le_bpow">ln_beta_le_bpow</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="canonic_exp_ge_bpow">canonic_exp_ge_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>) (<span class="id">e</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5429')">Proof.</div>
<div class="proofscript" id="proof5429">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#monotone_exp">monotone_exp</a></span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zsucc_pred">Zsucc_pred</a></span> <span class="id">e</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_gt_bpow">ln_beta_gt_bpow</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Generic.Format.monotone_exp.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone_exp.rnd">rnd</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ln_beta_round_ge">ln_beta_round_ge</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone_exp.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;&gt; 0%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone_exp.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>))%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5430')">Proof with</div>
<div class="proofscript" id="proof5430">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ZR_or_AW">round_ZR_or_AW</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone_exp.rnd">rnd</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>] ; <span class="tactic">rewrite</span> <span class="id">H</span> ; <span class="tactic">clear</span> <span class="id">H</span> ; <span class="tactic">intros</span> <span class="id">Zr</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_round_ZR">ln_beta_round_ZR</a></span> <span class="kwd">with</span> (1 := <span class="id">Zr</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le_abs">ln_beta_le_abs</a></span>.<br/>
<span class="id">contradict</span> <span class="id">Zr</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Zr</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_AW_abs">round_AW_abs</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_AW_pos">round_AW_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="canonic_exp_round_ge">canonic_exp_round_ge</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone_exp.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;&gt; 0%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone_exp.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>))%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5431')">Proof with</div>
<div class="proofscript" id="proof5431">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zr</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#monotone_exp">monotone_exp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_round_ge">ln_beta_round_ge</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.monotone_exp">monotone_exp</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Generic.Format.Znearest">Znearest</a></span>.<br/>
<br/>
<div class="doc">Roundings to nearest: when in the middle, use the choice function </div>
<span class="kwd">Variable</span> <span class="id"><a name="Generic.Format.Znearest.choice">choice</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Znearest">Znearest</a></span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare">Rcompare</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)) (/2) <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> =&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Eq">Eq</a></span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) <span class="kwd">then</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Gt">Gt</a></span> =&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Znearest_DN_or_UP">Znearest_DN_or_UP</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5432')">Proof.</div>
<div class="proofscript" id="proof5432">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_spec">Rcompare_spec</a></span> ; <span class="tactic">intros</span> <span class="id">_</span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Znearest_ge_floor">Znearest_ge_floor</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5433')">Proof.</div>
<div class="proofscript" id="proof5433">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_DN_or_UP">Znearest_DN_or_UP</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>] ; <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#le_Z2R">le_Z2R</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Znearest_le_ceil">Znearest_le_ceil</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5434')">Proof.</div>
<div class="proofscript" id="proof5434">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_DN_or_UP">Znearest_DN_or_UP</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>] ; <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#le_Z2R">le_Z2R</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="valid_rnd_N">valid_rnd_N</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5435')">Proof.</div>
<div class="proofscript" id="proof5435">
<span class="tactic">split</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)) <span class="id">y</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_le_ceil">Znearest_le_ceil</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_ge_floor">Znearest_ge_floor</a></span> <span class="id">y</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lub">Zfloor_lub</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">Hf</span>: <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">y</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_imp">Zfloor_imp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lb">Zfloor_lb</a></span> <span class="id">y</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_le">Zfloor_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_glb">Zceil_glb</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_ub">Zfloor_ub</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="tactic">at</span> 1.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_spec">Rcompare_spec</a></span> ; <span class="tactic">intro</span> <span class="id">Hx</span>.<br/>
<span class="comment">(*&nbsp;..&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hf</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_ge_floor">Znearest_ge_floor</a></span>.<br/>
<span class="comment">(*&nbsp;..&nbsp;*)</span><br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hf</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_spec">Rcompare_spec</a></span> ; <span class="tactic">intro</span> <span class="id">Hy</span>.<br/>
<span class="tactic">elim</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">Hy</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_r">Rplus_le_compat_r</a></span>.<br/>
<span class="tactic">replace</span> <span class="id">y</span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_eq_reg_l">Rplus_eq_reg_l</a></span> <span class="kwd">with</span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> 2!(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span> (- (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)))).<br/>
<span class="id">change</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) = <span class="id">y</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>).<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#le_Z2R">le_Z2R</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_le">Zceil_le</a></span>.<br/>
<span class="comment">(*&nbsp;..&nbsp;*)</span><br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hf</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_Gt">Rcompare_Gt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_le">Zceil_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_r">Rplus_le_compat_r</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">n</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_Z2R">Zfloor_Z2R</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_Lt">Rcompare_Lt</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Rcompare_floor_ceil_mid">Rcompare_floor_ceil_mid</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) &lt;&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare">Rcompare</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)) (/ 2) = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare">Rcompare</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)) (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5436')">Proof.</div>
<div class="proofscript" id="proof5436">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_spec">Rcompare_spec</a></span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)) (/ 2)) <span class="kwd">as</span> [<span class="id">H1</span>|<span class="id">H1</span>|<span class="id">H1</span>] ; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_Lt">Rcompare_Lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">replace</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)))%<span class="id">R</span> <span class="kwd">with</span> ((<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)) * 2)%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">replace</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span>))%<span class="id">R</span> <span class="kwd">with</span> (/2 * 2)%<span class="id">R</span> <span class="tactic">by</span> <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span> <span class="kwd">with</span> (2 := <span class="id">H1</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_Eq">Rcompare_Eq</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span>)%<span class="id">R</span> <span class="kwd">with</span> (1 - (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="id">field</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_Gt">Rcompare_Gt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">replace</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)))%<span class="id">R</span> <span class="kwd">with</span> ((<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)) * 2)%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">replace</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span>))%<span class="id">R</span> <span class="kwd">with</span> (/2 * 2)%<span class="id">R</span> <span class="tactic">by</span> <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span> <span class="kwd">with</span> (2 := <span class="id">H1</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Rcompare_ceil_floor_mid">Rcompare_ceil_floor_mid</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) &lt;&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare">Rcompare</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) (/ 2) = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare">Rcompare</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5437')">Proof.</div>
<div class="proofscript" id="proof5437">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_spec">Rcompare_spec</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span>) (/ 2)) <span class="kwd">as</span> [<span class="id">H1</span>|<span class="id">H1</span>|<span class="id">H1</span>] ; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_Lt">Rcompare_Lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span> + (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span>))%<span class="id">R</span> <span class="kwd">with</span> ((<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span>) * 2)%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span> + (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)))%<span class="id">R</span> <span class="kwd">with</span> (/2 * 2)%<span class="id">R</span> <span class="tactic">by</span> <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span> <span class="kwd">with</span> (2 := <span class="id">H1</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_Eq">Rcompare_Eq</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span> <span class="kwd">with</span> (1 - (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="id">field</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_Gt">Rcompare_Gt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span> + (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span>))%<span class="id">R</span> <span class="kwd">with</span> ((<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span>) * 2)%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span> + (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)))%<span class="id">R</span> <span class="kwd">with</span> (/2 * 2)%<span class="id">R</span> <span class="tactic">by</span> <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span> <span class="kwd">with</span> (2 := <span class="id">H1</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Znearest_N_strict">Znearest_N_strict</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) &lt;&gt; /2)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)) &lt; /2)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5438')">Proof.</div>
<div class="proofscript" id="proof5438">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_spec">Rcompare_spec</a></span> ; <span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="id">now</span> <span class="tactic">elim</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_minus_distr">Ropp_minus_distr</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_cancel">Ropp_lt_cancel</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> 1%<span class="id">R</span>.<br/>
<span class="tactic">replace</span> (1 + -/2)%<span class="id">R</span> <span class="kwd">with</span> (/2)%<span class="id">R</span> <span class="tactic">by</span> <span class="id">field</span>.<br/>
<span class="id">now</span> <span class="tactic">replace</span> (1 + - (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1 - <span class="id">x</span>))%<span class="id">R</span> <span class="kwd">with</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> (/2)%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_opp_l">Rplus_opp_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_minus">Rle_minus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Znearest_N">Znearest_N</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)) &lt;= /2)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5439')">Proof.</div>
<div class="proofscript" id="proof5439">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)) (/2)) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="tactic">assert</span> (<span class="id">K</span>: (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (/2) &lt;= /2)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_le">Req_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_DN_or_UP">Znearest_DN_or_UP</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>] ; <span class="tactic">rewrite</span> <span class="id">H</span> ; <span class="tactic">clear</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">replace</span> (<span class="id">x</span> - (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) + 1))%<span class="id">R</span> <span class="kwd">with</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) - 1)%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>.<br/>
<span class="id">now</span> <span class="tactic">replace</span> (1 - /2)%<span class="id">R</span> <span class="kwd">with</span> (/2)%<span class="id">R</span> <span class="tactic">by</span> <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_opp_l">Rplus_opp_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span>.<br/>
<span class="id">fold</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_N_strict">Znearest_N_strict</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Znearest_imp">Znearest_imp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#n">n</a></span>) &lt; /2)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5440')">Proof.</div>
<div class="proofscript" id="proof5440">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">n</span> <span class="id">Hd</span>.<br/>
<span class="tactic">cut</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">x</span> - <span class="id">n</span>) &lt; 1)%<span class="id">Z</span>.<br/>
<span class="tactic">clear</span> ; <span class="id">zify</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_abs">Z2R_abs</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_minus">Z2R_minus</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">x</span>) - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">n</span>)%<span class="id">R</span> <span class="kwd">with</span> (- (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">x</span>)) + (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">n</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_triang">Rabs_triang</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">replace</span> 1%<span class="id">R</span> <span class="kwd">with</span> (/2 + /2)%<span class="id">R</span> <span class="tactic">by</span> <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_lt_compat">Rplus_le_lt_compat</a></span> <span class="kwd">with</span> (2 := <span class="id">Hd</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_N">Znearest_N</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_N_pt">round_N_pt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Rnd_N_pt">Rnd_N_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5441')">Proof.</div>
<div class="proofscript" id="proof5441">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">set</span> (<span class="id">d</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">set</span> (<span class="id">u</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>).<br/>
<span class="tactic">set</span> (<span class="id">mx</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>).<br/>
<span class="tactic">set</span> (<span class="id">bx</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id">x</span>)).<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">H</span>: (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">x</span> - <span class="id">x</span>) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rmin">Rmin</a></span> (<span class="id">x</span> - <span class="id">d</span>) (<span class="id">u</span> - <span class="id">x</span>))%<span class="id">R</span>).<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> -1 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_mult_bpow">scaled_mantissa_mult_bpow</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id">d</span>, <span class="id">u</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="id">fold</span> <span class="id">mx</span> <span class="id">bx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- 3!<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="id">bx</span>). 2: <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_min_distr_r">Rmult_min_distr_r</a></span>. 2: <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">mx</span>)) <span class="id">mx</span>) <span class="kwd">as</span> [<span class="id">Hm</span>|<span class="id">Hm</span>].<br/>
<span class="comment">(*&nbsp;..&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id">Hm</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span> <span class="tactic">at</span> 2.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_Lt">Rcompare_Lt</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hm</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span> <span class="tactic">at</span> -3.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rmin">Rmin</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_dec">Rle_dec</a></span> 0 (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">mx</span>) - <span class="id">mx</span>)) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
<span class="comment">(*&nbsp;..&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Rcompare_floor_ceil_mid">Rcompare_floor_ceil_mid</a></span> <span class="kwd">with</span> (1 := <span class="id">Hm</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmin_compare">Rmin_compare</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span>: (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">mx</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">mx</span>)) &lt;= <span class="id">mx</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">mx</span>))%<span class="id">R</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_spec">Rcompare_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hm</span>'.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hm</span>'.<br/>
<span class="tactic">exact</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_minus_sym">Rabs_minus_sym</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_ub">Zceil_ub</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_DN_UP_pt_N">Rnd_DN_UP_pt_N</a></span> <span class="kwd">with</span> <span class="id">d</span> <span class="id">u</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>.<br/>
<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rmin_l">Rmin_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rmin_r">Rmin_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_N_middle">round_N_middle</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = <span class="kwd">if</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)) <span class="kwd">then</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5442')">Proof.</div>
<div class="proofscript" id="proof5442">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 4 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_mult_bpow">scaled_mantissa_mult_bpow</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>))) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>)) <span class="kwd">as</span> [<span class="id">Fx</span>|<span class="id">Fx</span>].<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">_</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_Z2R">Zceil_Z2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_Z2R">Zfloor_Z2R</a></span>.<br/>
<span class="tactic">set</span> (<span class="id">m</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>)).<br/>
<span class="id">now</span> <span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare">Rcompare</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">m</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id">m</span>) (/ 2)) ; <span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span> <span class="id">m</span>).<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Rcompare_floor_ceil_mid">Rcompare_floor_ceil_mid</a></span> <span class="kwd">with</span> (1 := <span class="id">Fx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_Eq">Rcompare_Eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Znearest.choice">choice</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_eq_reg_r">Rmult_eq_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id">x</span>)).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="round_N_really_small_pos">round_N_really_small_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ex</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> - 1) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ex">ex</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> = 0)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5443')">Proof.</div>
<div class="proofscript" id="proof5443">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">ex</span> <span class="id">Hex</span> <span class="id">Hf</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_eq_reg_r">Rmult_eq_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>))));<br/>
&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id">_</span> + - <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> 0%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">change</span> 0%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 0); <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_imp">Znearest_imp</a></span>.<br/>
<span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span> : (<span class="id">x</span> &gt;= 0)%<span class="id">R</span>).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id">ex</span> - 1)); [|<span class="tactic">exact</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hex</span>)].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>. }<br/>
<span class="tactic">assert</span> (<span class="id">H</span>' : (<span class="id">x</span> * <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>)) &gt;= 0)%<span class="id">R</span>).<br/>
{ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rge_le">Rge_le</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>. }<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>; [|<span class="tactic">exact</span> <span class="id">H</span>'].<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>)))); [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>|].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">replace</span> (- <span class="id">_</span> + <span class="id">_</span>)%<span class="id">Z</span> <span class="kwd">with</span> 0%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hex</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) - 1)).<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span> <span class="id">ex</span>); [<span class="tactic">omega</span>|].<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>; [<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>|].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">Fcore_Raux.bpow</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Z.pow_pos</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>; [<span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.setoid_ring.RealField.html#Rlt_0_2">Rlt_0_2</a></span>|].<br/>
&nbsp;&nbsp;<span class="id">change</span> 2%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2); <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="kwd">as</span> (<span class="id">beta_val</span>,<span class="id">beta_prop</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.Znearest">Znearest</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Generic.Format.rndNA">rndNA</a></span>.<br/>
<br/>
<span class="kwd">Global</span> <span class="kwd">Instance</span> <span class="id"><a name="valid_rnd_NA">valid_rnd_NA</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> 0)) := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_N">valid_rnd_N</a></span> <span class="id">_</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_NA_pt">round_NA_pt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Rnd_NA_pt">Rnd_NA_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> 0)) <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5444')">Proof.</div>
<div class="proofscript" id="proof5444">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_pt">round_N_pt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> 0) <span class="id">x</span>).<br/>
<span class="tactic">set</span> (<span class="id">f</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> 0)) <span class="id">x</span>).<br/>
<span class="tactic">intros</span> <span class="id">Rxf</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> - <span class="id">x</span>)) <span class="kwd">as</span> [<span class="id">Hm</span>|<span class="id">Hm</span>].<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_NA_N_pt">Rnd_NA_N_pt</a></span>.<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">Rxf</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_middle">round_N_middle</a></span> <span class="kwd">with</span> (1 := <span class="id">Hm</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_true">Zle_bool_true</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lub">Zfloor_lub</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_N_pt_pos">Rnd_N_pt_pos</a></span> <span class="kwd">with</span> (2 := <span class="id">Hx</span>) (3 := <span class="id">Rxf</span>).<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left">Rabs_left</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_middle">round_N_middle</a></span> <span class="kwd">with</span> (1 := <span class="id">Hm</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_false">Zle_bool_false</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lb">Zfloor_lb</a></span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id">x</span>))).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span> <span class="kwd">with</span> (2 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_N_pt_neg">Rnd_N_pt_neg</a></span> <span class="kwd">with</span> (3 := <span class="id">Rxf</span>).<br/>
<span class="tactic">exact</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id">Rxf</span>.<br/>
<span class="tactic">intros</span> <span class="id">g</span> <span class="id">Rxg</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_N_pt_unicity">Rnd_N_pt_unicity</a></span> <span class="kwd">with</span> (3 := <span class="id">Hm</span>) (4 := <span class="id">Rxf</span>) (5 := <span class="id">Rxg</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.rndNA">rndNA</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Generic.Format.rndN_opp">rndN_opp</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Znearest_opp">Znearest_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#choice">choice</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> (<span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#choice">choice</a></span> (- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#t">t</a></span> + 1))%<span class="id">Z</span>)) <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5445')">Proof with</div>
<div class="proofscript" id="proof5445">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)) <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_opp">Z2R_opp</a></span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_Z2R">Zrnd_Z2R</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="tactic">replace</span> (- <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (-<span class="id">x</span>)))%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>) - <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Rcompare_ceil_floor_mid">Rcompare_ceil_floor_mid</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Rcompare_floor_ceil_mid">Rcompare_floor_ceil_mid</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_sym">Rcompare_sym</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare">Rcompare</a></span> ; <span class="tactic">simpl</span> ; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_involutive">Zopp_involutive</a></span>.<br/>
<span class="tactic">case</span> (<span class="id">choice</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (- <span class="id">x</span>))) ; <span class="tactic">simpl</span> ; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_involutive">Zopp_involutive</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_involutive">Zopp_involutive</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_opp">Z2R_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_N_opp">round_N_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice</span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#choice">choice</a></span>) (-<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> (<span class="kwd">fun</span> <span class="id">t</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#choice">choice</a></span> (- (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#t">t</a></span> + 1))%<span class="id">Z</span>))) <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5446')">Proof.</div>
<div class="proofscript" id="proof5446">
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_opp">scaled_mantissa_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest_opp">Znearest_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_opp">Z2R_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_mult_distr_l_reverse">Ropp_mult_distr_l_reverse</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format.rndN_opp">rndN_opp</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Format">Format</a></span>.<br/>
<br/>
<div class="doc">Inclusion of a format into an extended format </div>
<span class="kwd">Section</span> <span class="id"><a name="Generic.Inclusion">Inclusion</a></span>.<br/>
<br/>
<span class="kwd">Variables</span> <span class="id"><a name="Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a name="Generic.Inclusion.fexp2">fexp2</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">valid_exp1</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> }.<br/>
<span class="kwd">Context</span> { <span class="id">valid_exp2</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;( <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R0">R0</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>))%<span class="id">Z</span> ) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5447')">Proof.</div>
<div class="proofscript" id="proof5447">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">He</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
<span class="id">contradict</span> <span class="id">Zx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_0">scaled_mantissa_0</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_Z2R">Ztrunc_Z2R</a></span> 0).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_inclusion_lt_ge">generic_inclusion_lt_ge</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span>,<br/>
&nbsp;&nbsp;( <span class="kwd">forall</span> <span class="id">e</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e1">e1</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e2">e2</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span> ) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e1">e1</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e2">e2</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5448')">Proof.</div>
<div class="proofscript" id="proof5448">
<span class="tactic">intros</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">He</span> <span class="id">x</span> (<span class="id">Hx1</span>,<span class="id">Hx2</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_gt_bpow">ln_beta_gt_bpow</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le_bpow">ln_beta_le_bpow</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_inclusion">generic_inclusion</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5449')">Proof with</div>
<div class="proofscript" id="proof5449">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">He</span> <span class="id">x</span> (<span class="id">Hx1</span>,[<span class="id">Hx2</span>|<span class="id">Hx2</span>]).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Hx1</span> <span class="id">Hx2</span>).<br/>
<span class="tactic">intros</span> <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_abs_inv">generic_format_abs_inv</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">apply</span> <span class="id">generic_format_bpow</span>'...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">He</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow_inv">generic_format_bpow_inv</a></span>...<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hx2</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_abs">generic_format_abs</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_inclusion_le_ge">generic_inclusion_le_ge</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e1">e1</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e2">e2</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;( <span class="kwd">forall</span> <span class="id">e</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e1">e1</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e2">e2</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span> ) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e1">e1</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e2">e2</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5450')">Proof.</div>
<div class="proofscript" id="proof5450">
<span class="tactic">intros</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">He</span>' <span class="id">He</span> <span class="id">x</span> (<span class="id">Hx1</span>,[<span class="id">Hx2</span>|<span class="id">Hx2</span>]).<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_gt_bpow">ln_beta_gt_bpow</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le_bpow">ln_beta_le_bpow</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion">generic_inclusion</a></span> <span class="kwd">with</span> (<span class="id">e</span> := <span class="id">e2</span>).<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id">He</span>'.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_pred">Zle_pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_inclusion_le">generic_inclusion_le</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e2</span>,<br/>
&nbsp;&nbsp;( <span class="kwd">forall</span> <span class="id">e</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e2">e2</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span> ) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e2">e2</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5451')">Proof.</div>
<div class="proofscript" id="proof5451">
<span class="tactic">intros</span> <span class="id">e2</span> <span class="id">He</span> <span class="id">x</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le_bpow">ln_beta_le_bpow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion">generic_inclusion</a></span> <span class="kwd">with</span> (<span class="id">e</span> := <span class="id">e2</span>).<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_pred">Zle_pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_inclusion_ge">generic_inclusion_ge</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e1</span>,<br/>
&nbsp;&nbsp;( <span class="kwd">forall</span> <span class="id">e</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e1">e1</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e">e</a></span>)%<span class="id">Z</span> ) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#e1">e1</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5452')">Proof.</div>
<div class="proofscript" id="proof5452">
<span class="tactic">intros</span> <span class="id">e1</span> <span class="id">He</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_inclusion_ln_beta">generic_inclusion_ln_beta</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">apply</span> <span class="id">He</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_gt_bpow">ln_beta_gt_bpow</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Generic.Inclusion.rnd">rnd</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Context</span> { <span class="id">valid_rnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.rnd">rnd</a></span> }.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_round_generic">generic_round_generic</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5453')">Proof with</div>
<div class="proofscript" id="proof5453">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Gx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_abs_inv">generic_format_abs_inv</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_abs">generic_format_abs</a></span> <span class="kwd">in</span> <span class="id">Gx</span>.<br/>
<span class="id">revert</span> <span class="id">rnd</span> <span class="id">valid_rnd</span> <span class="id">x</span> <span class="id">Gx</span>.<br/>
<span class="tactic">refine</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_abs_abs">round_abs_abs</a></span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">x</span> <span class="id">y</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#y">y</a></span>) <span class="id">_</span>).<br/>
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">valid_rnd</span> <span class="id">x</span> [<span class="id">Hx</span>|<span class="id">Hx</span>] <span class="id">Gx</span>.<br/>
<span class="comment">(*&nbsp;x&nbsp;&gt;&nbsp;0&nbsp;*)</span><br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_generic_gt">ln_beta_generic_gt</a></span> <span class="id">_</span> <span class="id">x</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>) <span class="id">Gx</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>,<span class="id">Ex</span>) ; <span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Hx</span>)).<br/>
<span class="tactic">intros</span> <span class="id">He</span>'.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">Ex</span> <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id">ex</span>)) <span class="kwd">as</span> [<span class="id">He</span>|<span class="id">He</span>].<br/>
<span class="comment">(*&nbsp;-&nbsp;x&nbsp;near&nbsp;0&nbsp;for&nbsp;fexp2&nbsp;*)</span><br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_bounded_small_pos">round_bounded_small_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.rnd">rnd</a></span> <span class="id">x</span> <span class="id">ex</span> <span class="id">He</span> <span class="id">Ex</span>) <span class="kwd">as</span> [<span class="id">Hr</span>|<span class="id">Hr</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="tactic">apply</span> <span class="id">generic_format_bpow</span>'...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_exp_large">valid_exp_large</a></span> <span class="kwd">with</span> <span class="id">ex</span>...<br/>
<span class="comment">(*&nbsp;-&nbsp;x&nbsp;large&nbsp;for&nbsp;fexp2&nbsp;*)</span><br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id">x</span>)) <span class="kwd">as</span> [<span class="id">He</span>''|<span class="id">He</span>''].<br/>
<span class="comment">(*&nbsp;-&nbsp;-&nbsp;round&nbsp;fexp2&nbsp;x&nbsp;is&nbsp;representable&nbsp;for&nbsp;fexp1&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">rewrite</span> <span class="id">Gx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="id">fold</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp1">fexp1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> <span class="id">x</span>).<br/>
<span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="tactic">at</span> 1.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ln_beta_round_ZR">ln_beta_round_ZR</a></span>...<br/>
<span class="id">contradict</span> <span class="id">Zx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_eq_0_reg">F2R_eq_0_reg</a></span> <span class="kwd">with</span> (1 := <span class="id">Zx</span>).<br/>
<span class="comment">(*&nbsp;-&nbsp;-&nbsp;round&nbsp;fexp2&nbsp;x&nbsp;has&nbsp;too&nbsp;many&nbsp;digits&nbsp;for&nbsp;fexp1&nbsp;*)</span><br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_bounded_large_pos">round_bounded_large_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.rnd">rnd</a></span> <span class="id">x</span> <span class="id">ex</span> <span class="id">He</span> <span class="id">Ex</span>) <span class="kwd">as</span> (<span class="id">Hr1</span>,[<span class="id">Hr2</span>|<span class="id">Hr2</span>]).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="id">fold</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.fexp2">fexp2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion.rnd">rnd</a></span> <span class="id">x</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="tactic">at</span> 1.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique_pos">ln_beta_unique_pos</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Hr1</span> <span class="id">Hr2</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique_pos">ln_beta_unique_pos</a></span> <span class="kwd">with</span> (1 := <span class="id">Ex</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hr2</span>.<br/>
<span class="tactic">apply</span> <span class="id">generic_format_bpow</span>'...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="comment">(*&nbsp;x&nbsp;=&nbsp;0&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic.Inclusion">Inclusion</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Generic">Generic</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="ZnearestA">ZnearestA</a></span> := (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> 0)).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="rndNA_opp">rndNA_opp</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="round_NA_opp">round_NA_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">beta</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix">radix</a></span>,<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">fexp</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ZnearestA">ZnearestA</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>) = - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ZnearestA">ZnearestA</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5454')">Proof.</div>
<div class="proofscript" id="proof5454">
<span class="tactic">intros</span> <span class="id">beta</span> <span class="id">fexp</span> <span class="id">x</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_eq_compat">Ropp_eq_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ext">round_ext</a></span>.<br/>
<span class="tactic">clear</span> <span class="id">x</span>; <span class="tactic">intro</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span>.<br/>
<span class="id">case_eq</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare">Rcompare</a></span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)) (/ 2)); <span class="tactic">intro</span> <span class="id">C</span>;<br/>
[|<span class="tactic">reflexivity</span>|<span class="tactic">reflexivity</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rcompare_Eq_inv">Rcompare_Eq_inv</a></span> <span class="kwd">in</span> <span class="id">C</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (0 &lt;=? - (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span> + 1))%<span class="id">Z</span> = (0 &lt;=? <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)%<span class="id">Z</span>);<br/>
&nbsp;&nbsp;[|<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">H</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#negb_Zle_bool">negb_Zle_bool</a></span>.<br/>
<span class="id">case_eq</span> (0 &lt;=? <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)%<span class="id">Z</span>; <span class="tactic">intro</span> <span class="id">C</span>'.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span> <span class="kwd">in</span> <span class="id">C</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zlt_bool_true">Zlt_bool_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.leb_gt">Z.leb_gt</a></span> <span class="kwd">in</span> <span class="id">C</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zlt_bool_false">Zlt_bool_false</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#rndNA_opp">rndNA_opp</a></span>.<br/>
<br/>
<div class="doc">Notations for backward-compatibility with Flocq 1.4. </div>
<span class="kwd">Notation</span> <span class="id"><a name="rndDN">rndDN</a></span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<span class="kwd">Notation</span> <span class="id"><a name="rndUP">rndUP</a></span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<span class="kwd">Notation</span> <span class="id"><a name="rndZR">rndZR</a></span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<span class="kwd">Notation</span> <span class="id"><a name="rndNA">rndNA</a></span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#ZnearestA">ZnearestA</a></span> (<span class="id">only</span> <span class="id">parsing</span>).<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
