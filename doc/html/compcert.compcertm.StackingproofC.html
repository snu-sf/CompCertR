
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module StackingproofC</title>
<meta name="description" content="Documentation of Coq module StackingproofC" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module StackingproofC</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html">CoqlibC</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.IntegersC.html">IntegersC</a></span> <span class="id"><a href="compcert.compcertm.ASTC.html">ASTC</a></span> <span class="id"><a href="compcert.common.Linking.html">Linking</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.ValuesC.html">ValuesC</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html">MemoryC</a></span> <span class="id"><a href="compcert.compcertm.SeparationC.html">SeparationC</a></span> <span class="id"><a href="compcert.common.Events.html">Events</a></span> <span class="id"><a href="compcert.compcertm.GlobalenvsC.html">GlobalenvsC</a></span> <span class="id"><a href="compcert.common.Smallstep.html">Smallstep</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.backend.LTL.html">LTL</a></span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span> <span class="id"><a href="compcert.compcertm.LocationsC.html">LocationsC</a></span> <span class="id"><a href="compcert.compcertm.LinearC.html">LinearC</a></span> <span class="id"><a href="compcert.compcertm.MachC.html">MachC</a></span> <span class="id"><a href="compcert.compcertm.MachExtra.html">MachExtra</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.backend.Bounds.html">Bounds</a></span> <span class="id"><a href="compcert.compcertm.ConventionsC.html">ConventionsC</a></span> <span class="id"><a href="compcert.compcertm.StacklayoutC.html">StacklayoutC</a></span> <span class="id"><a href="compcert.compcertm.LineartypingC.html">LineartypingC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.backend.Stacking.html">Stacking</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">string_scope</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">sep_scope</span>.<br/>
<br/>
<span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="compcert.backend.Stackingproof.html">Stackingproof</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.Simulation.html">Simulation</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.Skeleton.html">Skeleton</a></span> <span class="id"><a href="compcert.compcertm.Mod.html">Mod</a></span> <span class="id"><a href="compcert.compcertm.ModSem.html">ModSem</a></span> <span class="id"><a href="compcert.compcertm.SimMod.html">SimMod</a></span> <span class="id"><a href="compcert.compcertm.SimModSem.html">SimModSem</a></span> <span class="id"><a href="compcert.compcertm.SimSymb.html">SimSymb</a></span> <span class="id"><a href="compcert.compcertm.SimMemLift.html">SimMemLift</a></span> <span class="id"><a href="compcert.compcertm.AsmregsC.html">AsmregsC</a></span> <span class="id"><a href="compcert.compcertm.MatchSimModSemExcl.html">MatchSimModSemExcl</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.Conventions1C.html">Conventions1C</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html">SimMemInjC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.AxiomsC.html">AxiomsC</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.compcertm.SoundTop.html">SoundTop</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.StoreArguments.html">StoreArguments</a></span> <span class="id"><a href="compcert.compcertm.StoreArgumentsProps.html">StoreArgumentsProps</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.ModSemProps.html">ModSemProps</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.LiftDummy.html">LiftDummy</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html">JunkBlock</a></span>.<br/>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="id">Arguments</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">Z.add</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul">Z.mul</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.div">Z.div</a></span>.<br/>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span>.<br/>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.x86.Stacklayout.html#make_env">make_env</a></span>.<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">sep_simpl_tac</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_assoc">sep_assoc</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_pure">sep_pure</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Stackingproof.html#stack_contents_nil_left_false">stack_contents_nil_left_false</a></span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">assumption</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Stackingproof.html#stack_contents_nil_right_false">stack_contents_nil_right_false</a></span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">assumption</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span>: <span class="id">_</span> |= <span class="id"><a href="compcert.common.Separation.html#pure">pure</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> |- <span class="id">_</span>] =&gt; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span>: <span class="id">_</span> |= <span class="id">_</span> ** <span class="id"><a href="compcert.common.Separation.html#pure">pure</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> |- <span class="id">_</span>] =&gt; <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_proj2">sep_proj2</a></span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [<span class="id">H</span>: <span class="id">_</span> |= <span class="id">_</span> ** <span class="id"><a href="compcert.common.Separation.html#pure">pure</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> ** <span class="id">_</span> |- <span class="id">_</span>] =&gt; <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick2">sep_pick2</a></span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">idtac</span>).<br/>
<br/>
<span class="kwd">Notation</span> "'<span class="id">stack_contents</span>'" := (<span class="id"><a href="compcert.backend.Stackingproof.html#stack_contents_args">stack_contents_args</a></span>) (<span class="id">only</span> <span class="id">parsing</span>).<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="STACKINGEXTRA">STACKINGEXTRA</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_stacks_sp_valid">match_stacks_sp_valid</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">se</span> <span class="id">tse</span> <span class="id">ge</span> <span class="id">j</span> <span class="id">cs</span> <span class="id">cs</span>' <span class="id">sg</span> <span class="id">sm0</span> <span class="id">sp</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STKS</span>: <span class="id"><a href="compcert.backend.Stackingproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#se">se</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#tse">tse</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ge">ge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span> <span class="id">cs</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SP</span>: <span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id">cs</span>' = <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp</span>' <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>):<br/>
&nbsp;&nbsp;&lt;&lt;<span class="id">SPVALID</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span>).(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span>) <span class="id">sp</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">SimMemInj.tgt_parent_nb</a></span>) <span class="id">sp</span>' /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span>, ~ <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">SimMemInj.tgt_external</a></span>) <span class="id">sp</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#i">i</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7410')">Proof.</div>
<div class="proofscript" id="proof7410">
 <span class="id">inv</span> <span class="id">STKS</span>; <span class="id">des_safe</span>; <span class="id">ss</span>; <span class="id">clarify</span>; <span class="id">inv</span> <span class="id">MAINARGS</span>; <span class="id">esplits</span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_stacks_sp_ofs">match_stacks_sp_ofs</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span> <span class="id">se</span> <span class="id">tse</span> <span class="id">ge</span> <span class="id">cs</span> <span class="id">cs</span>' <span class="id">sg</span> <span class="id">sm</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Stackingproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#se">se</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#tse">tse</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ge">ge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span> <span class="id">cs</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm">sm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">sp</span>, (<span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id">cs</span>') = <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7411')">Proof.</div>
<div class="proofscript" id="proof7411">
 <span class="tactic">induction</span> 1; <span class="id">ii</span>; <span class="id">ss</span>; <span class="id">esplits</span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add">Z.add</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul">Z.mul</a></span> <span class="id"><a href="compcert.x86.Stacklayout.html#make_env">make_env</a></span> <span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="arguments_private">arguments_private</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sp_tgt</span> <span class="id">spdelta</span> <span class="id">m_src</span> <span class="id">m_tgt</span> <span class="id">stk_src</span> <span class="id">stk_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">F</span> <span class="id">sg</span> <span class="id">se</span> <span class="id">tse</span> <span class="id">ge</span> <span class="id">sm</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MATCH</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_tgt">m_tgt</a></span> |= <span class="id">stack_contents</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stk_src">stk_src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stk_tgt">stk_tgt</a></span> ** <span class="id"><a href="compcert.common.Separation.html#minjection">minjection</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_src">m_src</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACKS</span>: <span class="id"><a href="compcert.backend.Stackingproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#se">se</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#tse">tse</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ge">ge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stk_src">stk_src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stk_tgt">stk_tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm">sm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SP</span>: <span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stk_tgt">stk_tgt</a></span> = <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp_tgt">sp_tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#spdelta">spdelta</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">_</span> : <span class="kwd">forall</span> <span class="id">ofs</span> (<span class="id">OFS</span>: 0 &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> &lt; 4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">PRIV</span>: <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_src">m_src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp_tgt">sp_tgt</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#spdelta">spdelta</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) + <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>)&gt;&gt;)&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7412')">Proof.</div>
<div class="proofscript" id="proof7412">
&nbsp;&nbsp;<span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#separation_private">separation_private</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">stk_tgt</span>; <span class="id">ss</span>. { <span class="id">inv</span> <span class="id">STACKS</span>. <span class="id">inv</span> <span class="id">MAINARGS</span>. } <span class="id">des_ifs</span>. <span class="tactic">destruct</span> <span class="id">stk_src</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;{ <span class="id">sep_simpl_tac</span>. <span class="id">des</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="id">des_ifs_safe</span>. <span class="id">des_ifs</span>; <span class="id">sep_simpl_tac</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#dummy_frame_contents">dummy_frame_contents</a></span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">MATCH</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STACKS</span>; <span class="id">ss</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">STK</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Conventions.html#tailcall_size">tailcall_size</a></span> <span class="kwd">in</span> <span class="id">LE</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clarify</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>. <span class="id">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="id">left</span>. <span class="id">right</span>. <span class="id">left</span>. <span class="tactic">split</span>; [<span class="id">ss</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick1">sep_pick1</a></span> <span class="kwd">in</span> <span class="id">MATCH</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents">frame_contents</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_l">Z.add_0_l</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STACKS</span>; <span class="id">ss</span>. <span class="id">des_ifs_safe</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="arguments_perm">arguments_perm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">se</span> <span class="id">tse</span> <span class="id">ge</span> <span class="id">sm</span> <span class="id">sp_tgt</span> <span class="id">spdelta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m_src</span> <span class="id">m_tgt</span> <span class="id">stk_src</span> <span class="id">stk_tgt</span> <span class="id">F</span> <span class="id">sg</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MATCH</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_tgt">m_tgt</a></span> |= <span class="id">stack_contents</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stk_src">stk_src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stk_tgt">stk_tgt</a></span> ** <span class="id"><a href="compcert.common.Separation.html#minjection">minjection</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_src">m_src</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACKS</span>: <span class="id"><a href="compcert.backend.Stackingproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#se">se</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#tse">tse</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ge">ge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stk_src">stk_src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stk_tgt">stk_tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm">sm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SP</span>: <span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stk_tgt">stk_tgt</a></span> = <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp_tgt">sp_tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#spdelta">spdelta</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">_</span> : <span class="kwd">forall</span> <span class="id">ofs</span> (<span class="id">OFS</span>: 0 &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> &lt; 4 *<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">PERM</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_tgt">m_tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp_tgt">sp_tgt</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#spdelta">spdelta</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) + <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>&gt;&gt;)&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7413')">Proof.</div>
<div class="proofscript" id="proof7413">
&nbsp;&nbsp;<span class="id">ii</span>. <span class="tactic">destruct</span> <span class="id">stk_tgt</span>; <span class="id">ss</span>. { <span class="id">inv</span> <span class="id">STACKS</span>. <span class="id">inv</span> <span class="id">MAINARGS</span>. } <span class="id">des_ifs</span>. <span class="tactic">destruct</span> <span class="id">stk_src</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;{ <span class="id">sep_simpl_tac</span>. <span class="id">des</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="id">des_ifs_safe</span>. <span class="id">des_ifs</span>; <span class="id">ss</span>; <span class="id">sep_simpl_tac</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#dummy_frame_contents">dummy_frame_contents</a></span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">MATCH</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STACKS</span>; <span class="id">ss</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">STK</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Conventions.html#tailcall_size">tailcall_size</a></span> <span class="kwd">in</span> <span class="id">LE</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clarify</span>. <span class="tactic">eapply</span> <span class="id">H4</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick1">sep_pick1</a></span> <span class="kwd">in</span> <span class="id">MATCH</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents">frame_contents</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">des_ifs</span>. <span class="id">des</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick2">sep_pick2</a></span> <span class="kwd">in</span> <span class="id">MATCH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">MATCH</span>. <span class="id">des</span>; <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STACKS</span>; <span class="id">ss</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_l">Z.add_0_l</a></span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contains_locations_range">contains_locations_range</a></span>: <span class="kwd">forall</span> <span class="id">j</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">k</span> <span class="id">rs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Separation.html#massert_imp">massert_imp</a></span> (<span class="id"><a href="compcert.backend.Stackingproof.html#contains_locations">contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#hi">hi</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#k">k</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Separation.html#range">range</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#lo">lo</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#lo">lo</a></span> + (4 * <span class="id"><a href="compcert.compcertm.StackingproofC.html#hi">hi</a></span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7414')">Proof.</div>
<div class="proofscript" id="proof7414">
&nbsp;&nbsp;<span class="id">rr</span>. <span class="id">ss</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> (<span class="id">p1</span> := <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contains_locations_range_2">contains_locations_range_2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span> <span class="id">j</span> <span class="id">sp</span> <span class="id">pos</span> <span class="id">bound</span> <span class="id">slot</span> <span class="id">ls</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SEP</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#m">m</a></span> |= <span class="id"><a href="compcert.backend.Stackingproof.html#contains_locations">contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#slot">slot</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">RANEG</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#m">m</a></span> |= <span class="id"><a href="compcert.common.Separation.html#range">range</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> + 4 * <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span>)&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7415')">Proof.</div>
<div class="proofscript" id="proof7415">
 <span class="id">ss</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="agree_callee_save_regs_undef_outgoing_slots">agree_callee_save_regs_undef_outgoing_slots</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ls0</span> <span class="id">ls1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">AG</span>: <span class="id"><a href="compcert.backend.Conventions.html#agree_callee_save_regs">agree_callee_save_regs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls0">ls0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls1">ls1</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">AG</span>: <span class="id"><a href="compcert.backend.Conventions.html#agree_callee_save_regs">agree_callee_save_regs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls0">ls0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls1">ls1</a></span>.(<span class="id"><a href="compcert.compcertm.LinearC.html#undef_outgoing_slots">undef_outgoing_slots</a></span>)&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7416')">Proof.</div>
<div class="proofscript" id="proof7416">
 <span class="id">ii</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.LinearC.html#undef_outgoing_slots">undef_outgoing_slots</a></span>. <span class="tactic">apply</span> <span class="id">AG</span>; <span class="id">ss</span>. Qed.</div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="freed_contains_locations">freed_contains_locations</a></span> (<span class="id">j</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">sp</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">pos</span> <span class="id">bound</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">sl</span>: <span class="id"><a href="compcert.backend.Locations.html#slot">slot</a></span>) (<span class="id">ls</span>: <span class="id"><a href="compcert.backend.Linear.html#locset">locset</a></span>) : <span class="id"><a href="compcert.common.Separation.html#massert">massert</a></span> := {|<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Separation.html#Build_massert">m_pred</a></span> := <span class="kwd">fun</span> <span class="id">m</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(8 | <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span>) /\ 0 &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m">m</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span>;<br/>
&nbsp;&nbsp;<span class="id">m_footprint</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> + 4 * <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span>)<br/>
|}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7417')">Next Obligation.</div>
<div class="proofscript" id="proof7417">
&nbsp;&nbsp;<span class="id">esplits</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_unchanged_on">Mem.valid_block_unchanged_on</a></span>; <span class="id">et</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof7418')">Next Obligation.</div>
<div class="proofscript" id="proof7418">
&nbsp;&nbsp;<span class="id">rr</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">des</span>. <span class="id">clarify</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="contains_locations_tl">contains_locations_tl</a></span> (<span class="id">j</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">sp</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">pos</span> <span class="id">from</span> <span class="id">bound</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">sl</span>: <span class="id"><a href="compcert.backend.Locations.html#slot">slot</a></span>) (<span class="id">ls</span>: <span class="id"><a href="compcert.backend.Linear.html#locset">locset</a></span>) : <span class="id"><a href="compcert.common.Separation.html#massert">massert</a></span> := {|<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Separation.html#Build_massert">m_pred</a></span> := <span class="kwd">fun</span> <span class="id">m</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#from">from</a></span> &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> + 4 * <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.modulus">Ptrofs.modulus</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m">m</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> + 4 * <span class="id"><a href="compcert.compcertm.StackingproofC.html#from">from</a></span>) (<span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> + 4 * <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">ty</span>, <span class="id"><a href="compcert.compcertm.StackingproofC.html#from">from</a></span> &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.backend.Locations.html#typesize">typesize</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ty">ty</a></span> &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span> -&gt; (<span class="id"><a href="compcert.backend.Locations.html#typealign">Locations.typealign</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ty">ty</a></span> | <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> (<span class="id"><a href="compcert.common.AST.html#chunk_of_type">chunk_of_type</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ty">ty</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#m">m</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> + 4 * <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#v">v</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span> (<span class="id"><a href="compcert.backend.Locations.html#S">S</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ty">ty</a></span>)) <span class="id"><a href="compcert.compcertm.StackingproofC.html#v">v</a></span>;<br/>
&nbsp;&nbsp;<span class="id">m_footprint</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> + 4 * <span class="id"><a href="compcert.compcertm.StackingproofC.html#from">from</a></span>) (<span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> + 4 * <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span>)<br/>
|}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7419')">Next Obligation.</div>
<div class="proofscript" id="proof7419">
&nbsp;&nbsp;<span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">Mem.perm_unchanged_on</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">exploit</span> <span class="id">H3</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_unchanged_on">Mem.load_unchanged_on</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>; <span class="tactic">try</span> <span class="id">xomega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.StoreArgumentsProps.html#typesize_chunk">typesize_chunk</a></span> <span class="kwd">in</span> *. <span class="id">rr</span>. <span class="id">esplits</span>; <span class="id">et</span>; <span class="id">xomega</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof7420')">Next Obligation.</div>
<div class="proofscript" id="proof7420">
&nbsp;&nbsp;<span class="id">r</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">exploit</span> <span class="id">H2</span>; <span class="id">et</span>. <span class="id">i</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_valid_block">Mem.perm_valid_block</a></span>; <span class="id">et</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contains_locations_split">contains_locations_split</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j</span> <span class="id">sp</span> <span class="id">pos</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">sl</span> <span class="id">ls</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RANGE</span>: 0 &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#hi">hi</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Separation.html#massert_imp">massert_imp</a></span> (<span class="id"><a href="compcert.backend.Stackingproof.html#contains_locations">contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#hi">hi</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Stackingproof.html#contains_locations">contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span> ** <span class="id"><a href="compcert.compcertm.StackingproofC.html#contains_locations_tl">contains_locations_tl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#hi">hi</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7421')">Proof.</div>
<div class="proofscript" id="proof7421">
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;unfold&nbsp;contains_locations.&nbsp;*)</span><br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">xomega</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">xomega</span> <span class="id">mem</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">xomega</span> <span class="id">mem</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Separation.html#disjoint_footprint">disjoint_footprint</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">rr</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="id">u</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">des</span>; <span class="id">clarify</span>; <span class="id">esplits</span>; <span class="id">et</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contains_locations_split_m_footprint">contains_locations_split_m_footprint</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j</span> <span class="id">sp</span> <span class="id">pos</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">sl</span> <span class="id">ls</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RANGE</span>: 0 &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#hi">hi</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Stackingproof.html#contains_locations">contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#hi">hi</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span>).(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= (<span class="id"><a href="compcert.backend.Stackingproof.html#contains_locations">contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span> ** <span class="id"><a href="compcert.compcertm.StackingproofC.html#contains_locations_tl">contains_locations_tl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#hi">hi</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span>).(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7422')">Proof.</div>
<div class="proofscript" id="proof7422">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#func_ext2">func_ext2</a></span>. <span class="id">i</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.AxiomsC.html#prop_ext">prop_ext</a></span>. <span class="tactic">split</span>; <span class="id">i</span>.<br/>
&nbsp;&nbsp;- <span class="id">ss</span>. <span class="id">des</span>. <span class="id">clarify</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">x1</span> &lt; <span class="id">pos</span> + 4 * <span class="id">lo</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>. <span class="id">rr</span>. <span class="tactic">split</span>; <span class="id">et</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#contains_locations_split">contains_locations_split</a></span>; <span class="id">et</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_freed_contains_locations">free_freed_contains_locations</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j</span> <span class="id">sp</span> <span class="id">pos</span> <span class="id">sz</span> <span class="id">sl</span> <span class="id">ls</span> <span class="id">m0</span> <span class="id">m1</span> <span class="id">CTX</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SEP</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#m0">m0</a></span> |= <span class="id"><a href="compcert.backend.Stackingproof.html#contains_locations">contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sz">sz</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span> ** <span class="id"><a href="compcert.compcertm.StackingproofC.html#CTX">CTX</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FREE</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> + 4 * <span class="id"><a href="compcert.compcertm.StackingproofC.html#sz">sz</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m1">m1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">SEP</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#m1">m1</a></span> |= <span class="id"><a href="compcert.compcertm.StackingproofC.html#freed_contains_locations">freed_contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sz">sz</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span> ** <span class="id"><a href="compcert.compcertm.StackingproofC.html#CTX">CTX</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7423')">Proof.</div>
<div class="proofscript" id="proof7423">
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_isolated_mutation_revisited">sepconj_isolated_mutation_revisited</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_unchanged_on">Mem.free_unchanged_on</a></span>; <span class="id">et</span>. <span class="id">s</span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;- <span class="id">ss</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="id">et</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="unfree_freed_contains_locations">unfree_freed_contains_locations</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j</span> <span class="id">sp</span> <span class="id">pos</span> <span class="id">sz</span> <span class="id">bound</span> <span class="id">ls</span> <span class="id">m0</span> <span class="id">m1</span> <span class="id">CTX</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SEP</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#m0">m0</a></span> |= <span class="id"><a href="compcert.compcertm.StackingproofC.html#freed_contains_locations">freed_contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sz">sz</a></span> <span class="id"><a href="compcert.backend.Locations.html#Outgoing">Outgoing</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="compcert.compcertm.StackingproofC.html#contains_locations_tl">contains_locations_tl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sz">sz</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span> <span class="id"><a href="compcert.backend.Locations.html#Outgoing">Outgoing</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="compcert.compcertm.StackingproofC.html#CTX">CTX</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FREE</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> + 4 * <span class="id"><a href="compcert.compcertm.StackingproofC.html#sz">sz</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m1">m1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BOUND</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#sz">sz</a></span> &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">SEP</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#m1">m1</a></span> |= <span class="id"><a href="compcert.backend.Stackingproof.html#contains_locations">contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span> <span class="id"><a href="compcert.backend.Locations.html#Outgoing">Outgoing</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span>.(<span class="id"><a href="compcert.compcertm.LinearC.html#undef_outgoing_slots">undef_outgoing_slots</a></span>) ** <span class="id"><a href="compcert.compcertm.StackingproofC.html#CTX">CTX</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7424')">Proof.</div>
<div class="proofscript" id="proof7424">
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Separation.html#sep_assoc">sep_assoc</a></span> <span class="kwd">in</span> <span class="id">SEP</span>.<br/>
&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_perm">Mem_unfree_perm</a></span>; <span class="id">et</span>. <span class="tactic">intro</span> <span class="id">PERM</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_unchanged_on">Mem_unfree_unchanged_on</a></span>; <span class="id">et</span>. <span class="tactic">intro</span> <span class="id">UNCH</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_isolated_mutation_revisited">sepconj_isolated_mutation_revisited</a></span> <span class="kwd">with</span> (<span class="id">CTX</span> := <span class="id">CTX</span>); <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">SEP</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">clear</span> <span class="id">SEP</span>. <span class="id">ss</span>. <span class="id">ii</span>. <span class="id">left</span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">ofs</span> &lt; <span class="id">pos</span> + 4 * <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">PERM</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">Mem.perm_unchanged_on</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">u</span>. <span class="id">ii</span>. <span class="id">des</span>; <span class="id">clarify</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">SEP5</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">sz</span> &lt;= <span class="id">ofs</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">SEP6</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_unchanged_on">Mem.load_unchanged_on</a></span>; <span class="id">et</span>. <span class="id">u</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">assert</span>(<span class="id">BDD</span>: <span class="id">ofs</span> &lt; <span class="id">sz</span>) <span class="tactic">by</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">LD</span>: <span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> (<span class="id"><a href="compcert.common.AST.html#chunk_of_type">chunk_of_type</a></span> <span class="id">ty</span>) <span class="id">m1</span> <span class="id">sp</span> (<span class="id">pos</span> + 4 * <span class="id">ofs</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#v">v</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_load">Mem.valid_access_load</a></span>; <span class="id">et</span>. <span class="id">rr</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_implies">Mem.range_perm_implies</a></span> <span class="kwd">with</span> (<span class="id">p1</span> := <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">ofs0</span> &lt; <span class="id">pos</span> + 4 * <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">PERM</span>; <span class="id">et</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">Mem.perm_unchanged_on</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">u</span>. <span class="id">ii</span>; <span class="id">des</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">SEP5</span>; <span class="id">et</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.StoreArgumentsProps.html#typesize_chunk">typesize_chunk</a></span> <span class="kwd">in</span> *. <span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Stackingproof.html#align_type_chunk">align_type_chunk</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.LocationsC.html#typealign_divide_8">typealign_divide_8</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_divide_mono_l">Z.mul_divide_mono_l</a></span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="id">des</span>. <span class="id">ii</span>. <span class="id">des</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">x1</span> &lt; <span class="id">pos</span> + 4 * <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">rr</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">rr</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="frame_contents_1_at_external">frame_contents_1_at_external</a></span> <span class="id">f</span> (<span class="id">j</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">sp</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ls</span> <span class="id">ls0</span>: <span class="id"><a href="compcert.backend.Linear.html#locset">locset</a></span>) (<span class="id">parent</span> <span class="id">retaddr</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) <span class="id">sg</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">b</span> := <span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">fe</span> := <span class="id"><a href="compcert.x86.Stacklayout.html#make_env">make_env</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Stackingproof.html#contains_locations">contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fe">fe</a></span>.(<span class="id"><a href="compcert.backend.Bounds.html#fe_ofs_local">fe_ofs_local</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#b">b</a></span>.(<span class="id"><a href="compcert.backend.Bounds.html#bound_local">bound_local</a></span>) <span class="kwd">Local</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span><br/>
&nbsp;** <span class="id"><a href="compcert.compcertm.StackingproofC.html#freed_contains_locations">freed_contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span> (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>) <span class="id"><a href="compcert.backend.Locations.html#Outgoing">Outgoing</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span><br/>
&nbsp;** <span class="id"><a href="compcert.compcertm.StackingproofC.html#contains_locations_tl">contains_locations_tl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span> (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>) (<span class="id"><a href="compcert.backend.Bounds.html#bound_outgoing">bound_outgoing</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#b">b</a></span>) <span class="id"><a href="compcert.backend.Locations.html#Outgoing">Outgoing</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span><br/>
&nbsp;** <span class="id"><a href="compcert.common.Separation.html#hasvalue">hasvalue</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fe">fe</a></span>.(<span class="id"><a href="compcert.backend.Bounds.html#fe_ofs_link">fe_ofs_link</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#parent">parent</a></span><br/>
&nbsp;** <span class="id"><a href="compcert.common.Separation.html#hasvalue">hasvalue</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fe">fe</a></span>.(<span class="id"><a href="compcert.backend.Bounds.html#fe_ofs_retaddr">fe_ofs_retaddr</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#retaddr">retaddr</a></span><br/>
&nbsp;** <span class="id"><a href="compcert.backend.Stackingproof.html#contains_callee_saves">contains_callee_saves</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fe">fe</a></span>.(<span class="id"><a href="compcert.backend.Bounds.html#fe_ofs_callee_save">fe_ofs_callee_save</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#b">b</a></span>.(<span class="id"><a href="compcert.backend.Bounds.html#used_callee_save">used_callee_save</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls0">ls0</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="frame_contents_at_external">frame_contents_at_external</a></span> <span class="id">f</span> (<span class="id">j</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">sp</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ls</span> <span class="id">ls0</span>: <span class="id"><a href="compcert.backend.Linear.html#locset">locset</a></span>) (<span class="id">parent</span> <span class="id">retaddr</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) <span class="id">sg</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">b</span> := <span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">fe</span> := <span class="id"><a href="compcert.x86.Stacklayout.html#make_env">make_env</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Separation.html#mconj">mconj</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_1_at_external">frame_contents_1_at_external</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls0">ls0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#parent">parent</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#retaddr">retaddr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.SeparationC.html#freed_range">freed_range</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span> (4 * (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>)) **<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Separation.html#range">range</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> (4 * (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>)) <span class="id"><a href="compcert.compcertm.StackingproofC.html#fe">fe</a></span>.(<span class="id"><a href="compcert.backend.Bounds.html#fe_stack_data">fe_stack_data</a></span>)) **<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Separation.html#range">range</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#fe">fe</a></span>.(<span class="id"><a href="compcert.backend.Bounds.html#fe_stack_data">fe_stack_data</a></span>) + <span class="id"><a href="compcert.compcertm.StackingproofC.html#b">b</a></span>.(<span class="id"><a href="compcert.backend.Bounds.html#bound_stack_data">bound_stack_data</a></span>)) <span class="id"><a href="compcert.compcertm.StackingproofC.html#fe">fe</a></span>.(<span class="id"><a href="compcert.backend.Bounds.html#fe_size">fe_size</a></span>)).<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="stack_contents_at_external">stack_contents_at_external</a></span> (<span class="id">j</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">cs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Linear.html#stackframe">Linear.stackframe</a></span>) (<span class="id">cs</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Mach.html#stackframe">Mach.stackframe</a></span>) <span class="id">sg</span> : <span class="id"><a href="compcert.common.Separation.html#massert">massert</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span>, <span class="id">cs</span>' <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [<span class="id"><a href="compcert.backend.Linear.html#Stackframe">Linear.Stackframe</a></span> <span class="id">f</span> <span class="id">_</span> <span class="id">ls</span> <span class="id">_</span>], [<span class="id"><a href="compcert.backend.Mach.html#Stackframe">Mach.Stackframe</a></span> <span class="id">fb</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp</span>' <span class="id">spofs</span>) <span class="id">ra</span> <span class="id">_</span>] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.SeparationC.html#freed_range">freed_range</a></span> <span class="id">sp</span>' <span class="id">spofs</span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) (4 * (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="compcert.common.Separation.html#range">range</a></span> <span class="id">sp</span>' (4 * (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>)) (4 * (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">f</span>.(<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span>)))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Linear.html#Stackframe">Linear.Stackframe</a></span> <span class="id">f</span> <span class="id">_</span> <span class="id">ls</span> <span class="id">c</span> :: <span class="id">cs</span>, <span class="id"><a href="compcert.backend.Mach.html#Stackframe">Mach.Stackframe</a></span> <span class="id">fb</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp</span>' <span class="id">spofs</span>) <span class="id">ra</span> <span class="id">c</span>' :: <span class="id">cs</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external">frame_contents_at_external</a></span> <span class="id">f</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id">sp</span>' <span class="id">ls</span> (<span class="id"><a href="compcert.backend.Linear.html#parent_locset">parent_locset</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span>) (<span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id">cs</span>') (<span class="id"><a href="compcert.backend.Mach.html#parent_ra">parent_ra</a></span> <span class="id">cs</span>') <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id">stack_contents</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span> <span class="id">cs</span>'<br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Separation.html#pure">pure</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="stack_contents_at_external_footprint_split">stack_contents_at_external_footprint_split</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j</span> <span class="id">cs</span> <span class="id">cs</span>' <span class="id">f</span> <span class="id">sp</span> <span class="id">ls</span> <span class="id">c</span> <span class="id">fb</span> <span class="id">sp</span>' <span class="id">spofs</span> <span class="id">ra</span> <span class="id">c</span>' <span class="id">sg</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NONNIL</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span> &lt;&gt; []):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external">stack_contents_at_external</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="compcert.backend.Linear.html#Stackframe">Linear.Stackframe</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#c">c</a></span>) :: <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="compcert.backend.Mach.html#Stackframe">Mach.Stackframe</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fb">fb</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#spofs">spofs</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#ra">ra</a></span> <span class="id">c</span>') :: <span class="id">cs</span>') <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external">frame_contents_at_external</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id">sp</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span> (<span class="id"><a href="compcert.backend.Linear.html#parent_locset">parent_locset</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span>) (<span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id">cs</span>') (<span class="id"><a href="compcert.backend.Mach.html#parent_ra">parent_ra</a></span> <span class="id">cs</span>') <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\2/ <span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span> (<span class="id">stack_contents</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span> <span class="id">cs</span>')).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7425')">Proof.</div>
<div class="proofscript" id="proof7425">
 <span class="id">ii</span>; <span class="id">ss</span>. <span class="id">des_ifs</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="stackframes_after_external_footprint">stackframes_after_external_footprint</a></span>: <span class="kwd">forall</span> <span class="id">j</span> <span class="id">cs</span> <span class="id">cs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">stack_contents</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span> <span class="id">cs</span>').(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">stack_contents</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span>.(<span class="id"><a href="compcert.compcertm.LinearC.html#stackframes_after_external">stackframes_after_external</a></span>) <span class="id">cs</span>').(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7426')">Proof.</div>
<div class="proofscript" id="proof7426">
&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#func_ext1">func_ext1</a></span>; <span class="id">i</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#func_ext1">func_ext1</a></span>; <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.AxiomsC.html#prop_ext">prop_ext</a></span>. <span class="tactic">split</span>; <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">destruct</span> <span class="id">cs</span>; <span class="id">ss</span>; <span class="id">des_ifs</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="frame_contents_1_at_external_m_footprint">frame_contents_1_at_external_m_footprint</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span> <span class="id">j</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">rs0</span> <span class="id">sp2</span> <span class="id">retaddr0</span> <span class="id">sg</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SZ</span>: 0 &lt;= <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> &lt;= <span class="id"><a href="compcert.backend.Bounds.html#bound_outgoing">bound_outgoing</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents_1">frame_contents_1</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs">rs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs0">rs0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp2">sp2</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#retaddr0">retaddr0</a></span>).(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_1_at_external">frame_contents_1_at_external</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs">rs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs0">rs0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp2">sp2</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#retaddr0">retaddr0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>).(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7427')">Proof.</div>
<div class="proofscript" id="proof7427">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#func_ext2">func_ext2</a></span>. <span class="id">i</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.AxiomsC.html#prop_ext">prop_ext</a></span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;-&nbsp;ii.&nbsp;ss.&nbsp;des.&nbsp;esplits;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents_1">frame_contents_1</a></span>, <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_1_at_external">frame_contents_1_at_external</a></span> <span class="kwd">in</span> *. <span class="tactic">split</span>; <span class="id">i</span>.<br/>
&nbsp;&nbsp;- <span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="id">swap</span> 2 3; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.SeparationC.html#sep_assoc_footprint">sep_assoc_footprint</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> := <span class="id"><a href="compcert.compcertm.StackingproofC.html#freed_contains_locations">freed_contains_locations</a></span> <span class="id">j</span> <span class="id">sp</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span> (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span>) <span class="id"><a href="compcert.backend.Locations.html#Outgoing">Outgoing</a></span> <span class="id">rs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="id">swap</span> 2 3; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#contains_locations_split_m_footprint">contains_locations_split_m_footprint</a></span>; <span class="id">et</span>. <span class="id">refl</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="id">swap</span> 2 3; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.SeparationC.html#sep_assoc_footprint">sep_assoc_footprint</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">P</span> := <span class="id"><a href="compcert.compcertm.StackingproofC.html#freed_contains_locations">freed_contains_locations</a></span> <span class="id">j</span> <span class="id">sp</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span> (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span>) <span class="id"><a href="compcert.backend.Locations.html#Outgoing">Outgoing</a></span> <span class="id">rs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="id">swap</span> 2 3; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#contains_locations_split_m_footprint">contains_locations_split_m_footprint</a></span>; <span class="id">et</span>. <span class="id">refl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="frame_contents_at_external_m_footprint">frame_contents_at_external_m_footprint</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span> <span class="id">j</span> <span class="id">sp</span> <span class="id">rs</span> <span class="id">rs0</span> <span class="id">sp2</span> <span class="id">retaddr0</span> <span class="id">sg</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SZ</span>: 0 &lt;= <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> &lt;= <span class="id"><a href="compcert.backend.Bounds.html#bound_outgoing">bound_outgoing</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BOUND</span>: 4 * <span class="id"><a href="compcert.backend.Bounds.html#bound_outgoing">bound_outgoing</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span>) &lt;= <span class="id"><a href="compcert.backend.Bounds.html#fe_stack_data">fe_stack_data</a></span> (<span class="id"><a href="compcert.x86.Stacklayout.html#make_env">make_env</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span>))):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents">frame_contents</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs">rs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs0">rs0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp2">sp2</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#retaddr0">retaddr0</a></span>).(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external">frame_contents_at_external</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs">rs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs0">rs0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp2">sp2</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#retaddr0">retaddr0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>).(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7428')">Proof.</div>
<div class="proofscript" id="proof7428">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents">frame_contents</a></span>, <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external">frame_contents_at_external</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_1_at_external_m_footprint">frame_contents_1_at_external_m_footprint</a></span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#func_ext2">func_ext2</a></span>. <span class="id">i</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.AxiomsC.html#prop_ext">prop_ext</a></span>. <span class="tactic">split</span>; <span class="id">i</span>; <span class="id">des</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H</span>; <span class="id">et</span>. <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">clarify</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span> &lt;= <span class="id">x3</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>. <span class="id">rr</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H</span>; <span class="id">et</span>. <span class="tactic">clear</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">ii</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="kwd">in</span> *. <span class="id">des</span>; <span class="id">clarify</span>; <span class="id">esplits</span>; <span class="id">et</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="stack_contents_at_external_m_footprint">stack_contents_at_external_m_footprint</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">se</span> <span class="id">tse</span> <span class="id">tge</span> <span class="id">sm0</span> <span class="id">stack</span> <span class="id">cs</span>' <span class="id">sg</span> <span class="id">j</span> <span class="id">F</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACKS</span>: <span class="id"><a href="compcert.backend.Stackingproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#se">se</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#tse">tse</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#tge">tge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span> <span class="id">cs</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">LE</span>: (<span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external">stack_contents_at_external</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span> <span class="id">cs</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>).(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">stack_contents</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span> <span class="id">cs</span>').(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>)&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7429')">Proof.</div>
<div class="proofscript" id="proof7429">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#func_ext2">func_ext2</a></span>. <span class="id">i</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.AxiomsC.html#prop_ext">prop_ext</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments_above">size_arguments_above</a></span>; <span class="tactic">intro</span> <span class="id">SZARG</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STACKS</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="id">u</span>. <span class="tactic">split</span>; <span class="id">i</span>; <span class="id">des</span>; <span class="id">clarify</span>; <span class="id">esplits</span>; <span class="id">et</span>; <span class="id">psimpl</span>; <span class="id">zsimpl</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Conventions.html#tailcall_size">tailcall_size</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">specialize</span> (<span class="id">SZARG</span> <span class="id">sg</span>). <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span> &lt;= <span class="id">x1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">right</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">left</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents">frame_contents</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external">frame_contents_at_external</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STK</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;{ <span class="id">psimpl</span>. <span class="id">zsimpl</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external_m_footprint">frame_contents_at_external_m_footprint</a></span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">xomega</span>. <span class="id">specialize</span> (<span class="id">SZARG</span> <span class="id">sg</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StacklayoutC.html#bound_outgoing_stack_data">bound_outgoing_stack_data</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external_m_footprint">frame_contents_at_external_m_footprint</a></span> ;<span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">xomega</span>. <span class="id">specialize</span> (<span class="id">SZARG</span> <span class="id">sg</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StacklayoutC.html#bound_outgoing_stack_data">bound_outgoing_stack_data</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="frame_contents_footprint_irr">frame_contents_footprint_irr</a></span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">j0</span> <span class="id">j1</span> <span class="id">spb</span> <span class="id">ls0</span> <span class="id">ls1</span> <span class="id">sp</span> <span class="id">ra</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents">frame_contents</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j0">j0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#spb">spb</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls0">ls0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls1">ls1</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ra">ra</a></span>).(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>) &lt;2=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents">frame_contents</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j1">j1</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#spb">spb</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls0">ls0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls1">ls1</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ra">ra</a></span>).(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7430')">Proof.</div>
<div class="proofscript" id="proof7430">
&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#mconj_footprint_le">mconj_footprint_le</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;<span class="id">abstr</span> (<span class="id"><a href="compcert.backend.Bounds.html#fe_ofs_callee_save">fe_ofs_callee_save</a></span> (<span class="id"><a href="compcert.x86.Stacklayout.html#make_env">make_env</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id">f</span>))) <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;<span class="id">abstr</span> (<span class="id"><a href="compcert.backend.Bounds.html#used_callee_save">used_callee_save</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id">f</span>)) <span class="id">rs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">rs</span>. <span class="id">ginduction</span> <span class="id">rs</span>; <span class="id">i</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="id">et</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="stack_contents_footprint_irr">stack_contents_footprint_irr</a></span>: <span class="kwd">forall</span> <span class="id">j0</span> <span class="id">j1</span> <span class="id">cs</span> <span class="id">cs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">stack_contents</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j0">j0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span> <span class="id">cs</span>').(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>) &lt;2=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">stack_contents</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j1">j1</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span> <span class="id">cs</span>').(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7431')">Proof.</div>
<div class="proofscript" id="proof7431">
&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">clear</span> - <span class="id">cs</span>. <span class="id">ginduction</span> <span class="id">cs</span>; <span class="id">i</span>; <span class="id">ss</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_footprint_irr">frame_contents_footprint_irr</a></span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_footprint_le">sepconj_footprint_le</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_footprint_irr">frame_contents_footprint_irr</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">IHcs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="freed_contains_locations_incr">freed_contains_locations_incr</a></span>: <span class="kwd">forall</span> <span class="id">j</span> <span class="id">j</span>' <span class="id">sp</span> <span class="id">pos</span> <span class="id">bound</span> <span class="id">sl</span> <span class="id">ls</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id">j</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Separation.html#massert_imp">massert_imp</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#freed_contains_locations">freed_contains_locations</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.StackingproofC.html#freed_contains_locations">freed_contains_locations</a></span> <span class="id">j</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7432')">Proof.</div>
<div class="proofscript" id="proof7432">
 <span class="tactic">intros</span>; <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contains_locations_tl_incr">contains_locations_tl_incr</a></span>: <span class="kwd">forall</span> <span class="id">j</span> <span class="id">j</span>' <span class="id">sp</span> <span class="id">pos</span> <span class="id">from</span> <span class="id">bound</span> <span class="id">sl</span> <span class="id">ls</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id">j</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Separation.html#massert_imp">massert_imp</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#contains_locations_tl">contains_locations_tl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#from">from</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.StackingproofC.html#contains_locations_tl">contains_locations_tl</a></span> <span class="id">j</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#pos">pos</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#from">from</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#bound">bound</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sl">sl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7433')">Proof.</div>
<div class="proofscript" id="proof7433">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">auto</span>. <span class="id">exploit</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">v</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="id">exists</span> <span class="id">v</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external">frame_contents_at_external</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="frame_contents_at_external_incr">frame_contents_at_external_incr</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">j</span> <span class="id">sp</span> <span class="id">ls</span> <span class="id">ls0</span> <span class="id">parent</span> <span class="id">retaddr</span> <span class="id">sg</span> <span class="id">m</span> <span class="id">P</span> <span class="id">j</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#m">m</a></span> |= <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external">frame_contents_at_external</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls0">ls0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#parent">parent</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#retaddr">retaddr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> ** <span class="id"><a href="compcert.compcertm.StackingproofC.html#P">P</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id">j</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#m">m</a></span> |= <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external">frame_contents_at_external</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id">j</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls0">ls0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#parent">parent</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#retaddr">retaddr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> ** <span class="id"><a href="compcert.compcertm.StackingproofC.html#P">P</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7434')">Proof.</div>
<div class="proofscript" id="proof7434">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external">frame_contents_at_external</a></span>, <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_1_at_external">frame_contents_1_at_external</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.backend.Stackingproof.html#contains_locations_incr">contains_locations_incr</a></span> <span class="id">j</span> <span class="id">j</span>') <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.backend.Stackingproof.html#contains_callee_saves_incr">contains_callee_saves_incr</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.StackingproofC.html#freed_contains_locations_incr">freed_contains_locations_incr</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.StackingproofC.html#contains_locations_tl_incr">contains_locations_tl_incr</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assumption</span>.<br/>
Qed.</div>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external">frame_contents_at_external</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="stack_contents_at_external_change_meminj">stack_contents_at_external_change_meminj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">j</span> <span class="id">j</span>', <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id">j</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cs</span> <span class="id">cs</span>' <span class="id">sg</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#m">m</a></span> |= <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external">stack_contents_at_external</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span> <span class="id">cs</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#m">m</a></span> |= <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external">stack_contents_at_external</a></span> <span class="id">j</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span> <span class="id">cs</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7435')">Proof.</div>
<div class="proofscript" id="proof7435">
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">cs</span> <span class="kwd">as</span> [ | [] <span class="id">cs</span>]; <span class="tactic">destruct</span> <span class="id">cs</span>' <span class="kwd">as</span> [ | [] <span class="id">cs</span>']; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external_incr">frame_contents_at_external_incr</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external_incr">frame_contents_at_external_incr</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_comm">sep_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Stackingproof.html#stack_contents_change_meminj">stack_contents_change_meminj</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H</span>; <span class="id">des_ifs</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_comm">sep_comm</a></span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#STACKINGEXTRA">STACKINGEXTRA</a></span>.<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="strong_wf_tgt">strong_wf_tgt</a></span> (<span class="id">st_tgt0</span>: <span class="id"><a href="compcert.backend.Mach.html#state">Mach.state</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">parent_sp</span> <span class="id">parent_ra</span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#last_option">last_option</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#st_tgt0">st_tgt0</a></span>.(<span class="id"><a href="compcert.compcertm.MachC.html#get_stack">MachC.get_stack</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Mach.html#dummy_stack">Mach.dummy_stack</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#parent_sp">parent_sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#parent_ra">parent_ra</a></span>).<br/>
<br/>
<br/>
<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.x86.Stacklayout.html#make_env">make_env</a></span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="contains_callee_saves_footprint">contains_callee_saves_footprint</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j</span> <span class="id">sp</span> <span class="id">b</span> <span class="id">rs0</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FOOT</span>: <span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Stackingproof.html#contains_callee_saves">contains_callee_saves</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#j">j</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#fe_ofs_callee_save">fe_ofs_callee_save</a></span> (<span class="id"><a href="compcert.x86.Stacklayout.html#make_env">make_env</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#b">b</a></span>)) (<span class="id"><a href="compcert.backend.Bounds.html#used_callee_save">used_callee_save</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#b">b</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs0">rs0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">BOUND</span>: <span class="id"><a href="compcert.backend.Bounds.html#fe_ofs_callee_save">fe_ofs_callee_save</a></span> (<span class="id"><a href="compcert.x86.Stacklayout.html#make_env">make_env</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#b">b</a></span>) &lt;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.backend.Bounds.html#size_callee_save_area">size_callee_save_area</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#b">b</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#fe_ofs_callee_save">fe_ofs_callee_save</a></span> (<span class="id"><a href="compcert.x86.Stacklayout.html#make_env">make_env</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#b">b</a></span>))&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7436')">Proof.</div>
<div class="proofscript" id="proof7436">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">b</span>; <span class="id">ss</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Bounds.html#size_callee_save_area">size_callee_save_area</a></span>. <span class="id">ss</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(4 | 8).<br/>
&nbsp;&nbsp;{ <span class="id">econs</span>. <span class="id">instantiate</span> (1:=2). <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(0 &lt; <span class="id"><a href="compcert.lib.Coqlib.html#align">align</a></span> (4 * <span class="id">bound_outgoing</span>) 8 + 8 /\ (4 | <span class="id"><a href="compcert.lib.Coqlib.html#align">align</a></span> (4 * <span class="id">bound_outgoing</span>) 8 + 8)).<br/>
&nbsp;&nbsp;{ <span class="id">hexploit</span> (<span class="id"><a href="compcert.lib.Coqlib.html#align_le">align_le</a></span> (4 * <span class="id">bound_outgoing</span>) 8); <span class="tactic">try</span> <span class="id">lia</span>. <span class="id">i</span>. <span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span>; <span class="tactic">try</span> <span class="id">lia</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">etrans</span>; <span class="id">cycle</span> 1. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_divides">align_divides</a></span>; <span class="tactic">try</span> <span class="id">lia</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;strengthen&nbsp;zsimpl.&nbsp;*)</span><br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">abstr</span> (<span class="id"><a href="compcert.lib.Coqlib.html#align">align</a></span> (4 * <span class="id">bound_outgoing</span>) 8 + 8) <span class="id">initofs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">bound_outgoing_pos</span> <span class="id">bound_stack_data_pos</span> <span class="id">bound_local_pos</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;<span class="id">ginduction</span> <span class="id">used_callee_save</span>; <span class="id">ii</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>((4 | (<span class="id"><a href="compcert.common.AST.html#typesize">AST.typesize</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#mreg_type">mreg_type</a></span> <span class="id">a</span>))) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="compcert.common.AST.html#typesize">AST.typesize</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#mreg_type">mreg_type</a></span> <span class="id">a</span>)) | 8) /\ 0 &lt; (<span class="id"><a href="compcert.common.AST.html#typesize">AST.typesize</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#mreg_type">mreg_type</a></span> <span class="id">a</span>))).<br/>
&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">ss</span>; <span class="id">des_ifs</span>; <span class="id">cbn</span>; <span class="id">splits</span>; <span class="tactic">try</span> <span class="id">refl</span>; <span class="tactic">try</span> <span class="id">lia</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">FOOT</span>.<br/>
&nbsp;&nbsp;- <span class="id">des</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etrans</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_le">align_le</a></span>; <span class="tactic">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_le_trans">Z.lt_le_trans</a></span>; <span class="tactic">eauto</span>. <span class="id">etrans</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Bounds.html#size_callee_save_area_rec_incr">size_callee_save_area_rec_incr</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.backend.Stackingproof.html#size_type_chunk">size_type_chunk</a></span>. <span class="id">refl</span>.<br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id">IHused_callee_save</span>; <span class="id">revgoals</span>; <span class="id">cycle</span> 1; <span class="id">swap</span> 1 3; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">des</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_pos_pos">Z.add_pos_pos</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.lt_le_trans">Z.lt_le_trans</a></span>. <span class="tactic">eapply</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_le">align_le</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">des</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_trans">Z.divide_trans</a></span>. <span class="tactic">eapply</span> <span class="id">H1</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_divides">align_divides</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">used_callee_save_norepet</span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>. <span class="tactic">assert</span>(<span class="id">initofs</span> &lt;= <span class="id"><a href="compcert.lib.Coqlib.html#align">align</a></span> <span class="id">initofs</span> (<span class="id"><a href="compcert.common.AST.html#typesize">AST.typesize</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#mreg_type">mreg_type</a></span> <span class="id">a</span>))). <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_le">align_le</a></span>; <span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
Qed.</div>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.x86.Stacklayout.html#make_env">make_env</a></span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SIMMODSEM">SIMMODSEM</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SIMMODSEM.skenv_link">skenv_link</a></span>: <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.t">SkEnv.t</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SIMMODSEM.sm_link">sm_link</a></span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.t">SimMem.t</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SIMMODSEM.prog">prog</a></span>: <span class="id"><a href="compcert.backend.Linear.html#program">Linear.program</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SIMMODSEM.tprog">tprog</a></span>: <span class="id"><a href="compcert.backend.Mach.html#program">Mach.program</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMMODSEM.TRANSF">TRANSF</a></span>: <span class="id"><a href="compcert.backend.Stackingproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.prog">prog</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tprog">tprog</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SIMMODSEM.rao">rao</a></span>: <span class="id"><a href="compcert.backend.Mach.html#function">Mach.function</a></span> -&gt; <span class="id"><a href="compcert.backend.Mach.html#code">Mach.code</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#ptrofs">ptrofs</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<span class="kwd">Let</span> <span class="id"><a name="SIMMODSEM.md_src">md_src</a></span>: <span class="id"><a href="compcert.compcertm.Mod.html#Mod.t">Mod.t</a></span> := (<span class="id"><a href="compcert.compcertm.LinearC.html#module">LinearC.module</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.prog">prog</a></span>).<br/>
<span class="kwd">Let</span> <span class="id"><a name="SIMMODSEM.md_tgt">md_tgt</a></span>: <span class="id"><a href="compcert.compcertm.Mod.html#Mod.t">Mod.t</a></span> := (<span class="id"><a href="compcert.compcertm.MachC.html#module">MachC.module</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tprog">tprog</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.rao">rao</a></span>).<br/>
<span class="kwd">Hypothesis</span> (<span class="id"><a name="SIMMODSEM.INCLSRC">INCLSRC</a></span>: <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.includes">SkEnv.includes</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.md_src">md_src</a></span>.(<span class="id"><a href="compcert.compcertm.Mod.html#Mod.sk">Mod.sk</a></span>)).<br/>
<span class="kwd">Hypothesis</span> (<span class="id"><a name="SIMMODSEM.INCLTGT">INCLTGT</a></span>: <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.includes">SkEnv.includes</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.md_tgt">md_tgt</a></span>.(<span class="id"><a href="compcert.compcertm.Mod.html#Mod.sk">Mod.sk</a></span>)).<br/>
<span class="kwd">Hypothesis</span> (<span class="id"><a name="SIMMODSEM.WF">WF</a></span>: <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.wf">SkEnv.wf</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span>).<br/>
<span class="kwd">Let</span> <span class="id"><a name="SIMMODSEM.ge">ge</a></span> := (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.project">SkEnv.project</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.md_src">md_src</a></span>.(<span class="id"><a href="compcert.compcertm.Mod.html#Mod.sk">Mod.sk</a></span>)) <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.prog">prog</a></span>).<br/>
<span class="kwd">Let</span> <span class="id"><a name="SIMMODSEM.tge">tge</a></span> := (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.project">SkEnv.project</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.md_tgt">md_tgt</a></span>.(<span class="id"><a href="compcert.compcertm.Mod.html#Mod.sk">Mod.sk</a></span>)) <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tprog">tprog</a></span>).<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMMODSEM.return_address_offset_exists">return_address_offset_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">sg</span> <span class="id">ros</span> <span class="id">c</span> <span class="id">v</span> (<span class="id">FUNCT</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tge">tge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span>)),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#is_tail">is_tail</a></span> (<span class="id"><a href="compcert.backend.Mach.html#Mcall">Mcall</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ros">ros</a></span> :: <span class="id"><a href="compcert.compcertm.StackingproofC.html#c">c</a></span>) (<span class="id"><a href="compcert.backend.Mach.html#fn_code">fn_code</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.rao">rao</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#c">c</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMMODSEM.return_address_offset_deterministic">return_address_offset_deterministic</a></span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">c</span> <span class="id">ofs</span> <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.rao">rao</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#c">c</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.rao">rao</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#c">c</a></span> <span class="id">ofs</span>' -&gt; <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> = <span class="id">ofs</span>'.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="SIMMODSEM.match_stacks">match_stacks</a></span> := <span class="id"><a href="compcert.backend.Stackingproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="msp">msp</a></span>: <span class="id"><a href="compcert.compcertm.SimModSem.html#ModSemPair.t">ModSemPair.t</a></span> := <span class="id"><a href="compcert.compcertm.SimModSem.html#ModSemPair.mk">ModSemPair.mk</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.md_src">md_src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span>) (<span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.md_tgt">md_tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span>) (<span class="id"><a href="compcert.compcertm.SimSymbId.html#mk">SimSymbId.mk</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.md_src">md_src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.md_tgt">md_tgt</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.sm_link">sm_link</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="functions_translated_inject">functions_translated_inject</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">fptr_src</span> <span class="id">fd_tgt</span> <span class="id">fptr_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMGE</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="compcert.common.Linking.html#match_globdef">match_globdef</a></span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="compcert.backend.Stacking.html#transf_fundef">transf_fundef</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.prog">prog</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.ge">ge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tge">tge</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMSKE</span>: <span class="id"><a href="compcert.compcertm.SimSymb.html#SimSymb.sim_skenv">SimSymb.sim_skenv</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.compcertm.SimModSem.html#ModSemPair.ss">ModSemPair.ss</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#msp">msp</a></span>) (<span class="id"><a href="compcert.compcertm.ModSem.html#ModSem.skenv">ModSem.skenv</a></span> (<span class="id"><a href="compcert.compcertm.SimModSem.html#ModSemPair.src">ModSemPair.src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#msp">msp</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.ModSem.html#ModSem.skenv">ModSem.skenv</a></span> (<span class="id"><a href="compcert.compcertm.SimModSem.html#ModSemPair.tgt">ModSemPair.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#msp">msp</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FUNCSRC</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tge">tge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fptr_tgt">fptr_tgt</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fd_tgt">fd_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJ</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#fptr_src">fptr_src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fptr_tgt">fptr_tgt</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">SRCUB</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#fptr_src">fptr_src</a></span> = <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>&gt;&gt; \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">fd_src</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FUNCTGT</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.ge">ge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fptr_src">fptr_src</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fd_src">fd_src</a></span>&gt;&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ &lt;&lt;<span class="id">TRANSF</span>: <span class="id"><a href="compcert.backend.Stacking.html#transf_fundef">transf_fundef</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fd_src">fd_src</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fd_tgt">fd_tgt</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7437')">Proof.</div>
<div class="proofscript" id="proof7437">
&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">inv</span> <span class="id">SIMSKE</span>.<br/>
&nbsp;&nbsp;<span class="id">hexploit</span> (<span class="id"><a href="compcert.compcertm.GlobalenvsC.html#bsim_internal_funct_inject">bsim_internal_funct_inject</a></span> <span class="id">SIMGE</span>); <span class="id">et</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_inject_revive">SimMemInjC.skenv_inject_revive</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ge">ge</a></span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMMODSEM.TRANSL">TRANSL</a></span>: <span class="id"><a href="compcert.backend.Stackingproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.prog">prog</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tprog">tprog</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_function_sig">transf_function_sig</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span> <span class="id">tf</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TRANSFF</span>: <span class="id"><a href="compcert.backend.Stacking.html#transf_function">transf_function</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#tf">tf</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span>) = <span class="id"><a href="compcert.compcertm.StackingproofC.html#tf">tf</a></span>.(<span class="id"><a href="compcert.backend.Mach.html#fn_sig">fn_sig</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7438')">Proof.</div>
<div class="proofscript" id="proof7438">
 <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stacking.html#transf_function">transf_function</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span>.<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="init_match_frame_contents">init_match_frame_contents</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm_arg</span> <span class="id">sg</span> <span class="id">m_tgt0</span> <span class="id">rs</span> <span class="id">vs_src</span> <span class="id">vs_tgt</span> <span class="id">ls</span> <span class="id">sm_init</span> <span class="id">sm_junkinj</span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMSKE</span>: <span class="id"><a href="compcert.compcertm.SimSymb.html#SimSymb.sim_skenv">SimSymb.sim_skenv</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span> (<span class="id"><a href="compcert.compcertm.SimModSem.html#ModSemPair.ss">ModSemPair.ss</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#msp">msp</a></span>) (<span class="id"><a href="compcert.compcertm.ModSem.html#ModSem.skenv">ModSem.skenv</a></span> (<span class="id"><a href="compcert.compcertm.SimModSem.html#ModSemPair.src">ModSemPair.src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#msp">msp</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.ModSem.html#ModSem.skenv">ModSem.skenv</a></span> (<span class="id"><a href="compcert.compcertm.SimModSem.html#ModSemPair.tgt">ModSemPair.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#msp">msp</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STORE</span>: <span class="id"><a href="compcert.compcertm.StoreArguments.html#store_arguments">StoreArguments.store_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs">rs</a></span> (<span class="id"><a href="compcert.compcertm.ValuesC.html#typify_list">typify_list</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#vs_tgt">vs_tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>.(<span class="id"><a href="compcert.common.AST.html#sig_args">sig_args</a></span>)) <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_tgt0">m_tgt0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SG</span>: 4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.modulus">Ptrofs.modulus</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">LS</span>: <span class="id"><a href="compcert.compcertm.LocationsC.html#fill_arguments">LocationsC.fill_arguments</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.MachC.html#locset_copy">locset_copy</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span>).(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>).(<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span>) - <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_tgt0">m_tgt0</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>).(<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span>)) <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs">rs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.ValuesC.html#typify_list">typify_list</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#vs_src">vs_src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>.(<span class="id"><a href="compcert.common.AST.html#sig_args">sig_args</a></span>)) (<span class="id"><a href="compcert.x86.Conventions1.html#loc_arguments">loc_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIMVS</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#vs_src">vs_src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#vs_tgt">vs_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SM0</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_init">sm_init</a></span> = <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.compcertm.SimMemInjC.html#update">SimMemInjC.update</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_tgt0">m_tgt0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PRIV</span>: <span class="kwd">forall</span> <span class="id">ofs</span> (<span class="id">BDD</span>: 0 &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> &lt; 4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_init">sm_init</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span>)) <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MLE0</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.le">SimMem.le</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_init">sm_init</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF0</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_init">sm_init</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SM1</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_junkinj">sm_junkinj</a></span> = <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_init">sm_init</a></span>.(<span class="id"><a href="compcert.compcertm.SimMemInjC.html#update">SimMemInjC.update</a></span>) (<span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks">assign_junk_blocks</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_init">sm_init</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#n">n</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks">assign_junk_blocks</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_tgt0">m_tgt0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#n">n</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.SimMemInjC.html#inject_junk_blocks">SimMemInjC.inject_junk_blocks</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_init">sm_init</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_tgt0">m_tgt0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#n">n</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MLE1</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.le">SimMem.le</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_init">sm_init</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_junkinj">sm_junkinj</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF1</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_junkinj">sm_junkinj</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NB</span>: <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.project">SkEnv.project</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.md_src">md_src</a></span>.(<span class="id"><a href="compcert.compcertm.Mod.html#Mod.sk">Mod.sk</a></span>))) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_tgt0">m_tgt0</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks">assign_junk_blocks</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_tgt0">m_tgt0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#n">n</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|= <span class="id"><a href="compcert.backend.Stackingproof.html#dummy_frame_contents">dummy_frame_contents</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span>)) 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="compcert.common.Separation.html#minjection">minjection</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_junkinj">sm_junkinj</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_junkinj">sm_junkinj</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="compcert.common.Separation.html#globalenv_inject">globalenv_inject</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.ge">ge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_junkinj">sm_junkinj</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7439')">Proof.</div>
<div class="proofscript" id="proof7439">
&nbsp;&nbsp;<span class="id">sep_split</span>.<br/>
&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="id">zsimpl</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">STORE</span>. <span class="id">hexpl</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span> <span class="id">NB</span>. <span class="id">clarify</span>. <span class="id">ii</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_perm">assign_junk_blocks_perm</a></span>. <span class="tactic">eapply</span> <span class="id">PERM</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">clear</span> - <span class="id">SG</span> <span class="id">SIMVS</span> <span class="id">STORE</span> <span class="id">LS</span>. <span class="id">inv</span> <span class="id">STORE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexpl</span> <span class="id"><a href="compcert.compcertm.LocationsC.html#fill_arguments_spec">LocationsC.fill_arguments_spec</a></span>. <span class="tactic">clear</span> <span class="id">LS</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexpl</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> ? ? <span class="id">OFS0</span> <span class="id">OFS1</span> <span class="id">ALIGN</span>. <span class="id">zsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.Locations.html#S">S</a></span> <span class="id"><a href="compcert.backend.Locations.html#Outgoing">Outgoing</a></span> <span class="id">ofs</span> <span class="id">ty</span>) (<span class="id"><a href="compcert.common.AST.html#regs_of_rpairs">regs_of_rpairs</a></span> (<span class="id"><a href="compcert.x86.Conventions1.html#loc_arguments">loc_arguments</a></span> <span class="id">sg</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">hnf</span> <span class="kwd">in</span> <span class="id">VALS</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.compcertm.LocationsC.html#loc_arguments_one">loc_arguments_one</a></span> <span class="id">sg</span>); <span class="tactic">intro</span> <span class="id">ONES</span>. <span class="id">abstr</span> (<span class="id"><a href="compcert.x86.Conventions1.html#loc_arguments">loc_arguments</a></span> <span class="id">sg</span>) <span class="id">locs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">OFS0</span> <span class="id">OFS1</span> <span class="id">SG</span> <span class="id">H</span> <span class="id">SIMVS</span> <span class="id">VALS</span> <span class="id">locs</span> <span class="id">ONES</span> <span class="id">FILL</span> <span class="id">ALC</span>. <span class="id">abstr</span> (<span class="id"><a href="compcert.common.AST.html#sig_args">sig_args</a></span> <span class="id">sg</span>) <span class="id">tys</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ginduction</span> <span class="id">locs</span>; <span class="id">ii</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">ONES</span>; <span class="tactic">eauto</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">ss</span>. <span class="id">des</span>; <span class="id">ss</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.ValuesC.html#typify_list">typify_list</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">VALS</span>. <span class="id">inv</span> <span class="id">SIMVS</span>; <span class="id">ss</span>; <span class="id">des_ifs</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="id">inv</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.compcertm.ValuesC.html#typify">typify</a></span> <span class="id">v</span>' <span class="id">t</span>). <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Mach.html#load_stack">load_stack</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="id">zsimpl</span>. <span class="id">psimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_load">assign_junk_blocks_load</a></span>; <span class="id">ss</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">psimpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> <span class="kwd">in</span> *. <span class="tactic">set</span> (<span class="id"><a href="compcert.backend.Locations.html#typesize_pos">typesize_pos</a></span> <span class="id">ty</span>). <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id">H6</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.ValuesC.html#inject_typify">inject_typify</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.ValuesC.html#typify_list">typify_list</a></span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">VALS</span>. <span class="id">inv</span> <span class="id">SIMVS</span>; <span class="id">ss</span>; <span class="id">des_ifs</span>. <span class="tactic">eapply</span> <span class="id">IHlocs</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">OUT</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_load">Mem.valid_access_load</a></span> <span class="id">m_tgt0</span> (<span class="id"><a href="compcert.common.AST.html#chunk_of_type">chunk_of_type</a></span> <span class="id">ty</span>)); <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_load">assign_junk_blocks_load</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">erewrite</span> <span class="id"><a href="compcert.backend.Stackingproof.html#size_type_chunk">Stackingproof.size_type_chunk</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Stackingproof.html#typesize_typesize">Stackingproof.typesize_typesize</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">PERM</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Stackingproof.html#align_type_chunk">Stackingproof.align_type_chunk</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_divide_mono_l">Z.mul_divide_mono_l</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#disjoint_footprint_sepconj">disjoint_footprint_sepconj</a></span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">bar</span>. <span class="id">ii</span>; <span class="id">ss</span>. <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">X</span>. <span class="tactic">rename</span> <span class="id">H0</span> <span class="id">into</span> <span class="id">Y</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clarify</span>. <span class="id">zsimpl</span>. <span class="id">specialize</span> (<span class="id">PRIV</span> <span class="id">ofs</span>). <span class="id">exploit</span> <span class="id">PRIV</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">TPRIV</span>. <span class="id">hnf</span> <span class="kwd">in</span> <span class="id">TPRIV</span>. <span class="id">ss</span>. <span class="id">des</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#inject_junk_blocks">SimMemInjC.inject_junk_blocks</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">TPRIV</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_perm">assign_junk_blocks_perm</a></span> <span class="kwd">in</span> *; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_perm">assign_junk_blocks_perm</a></span> <span class="kwd">in</span> *. <span class="id">zsimpl</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_valid_block">Mem.perm_valid_block</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">TPRIV</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_perm">assign_junk_blocks_perm</a></span> <span class="kwd">in</span> *; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ii</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">sep_split</span>.<br/>
&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="id">inv</span> <span class="id">MWF1</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sim_skenv_inj_globalenv_inject">SimMemInjC.sim_skenv_inj_globalenv_inject</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimSymb.html#SimSymb.mle_preserves_sim_skenv">SimSymb.mle_preserves_sim_skenv</a></span> <span class="kwd">in</span> <span class="id">SIMSKE</span>; <span class="id">et</span>. <span class="id">etrans</span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span>. <span class="id">ss</span>. <span class="id">des_ifs</span>; <span class="id">xomega</span>. }<br/>
<span class="id">Unshelve</span>. <span class="id">all</span>: <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="stack_contents_at_external_intro">stack_contents_at_external_intro</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">stack</span> <span class="id">cs</span>' <span class="id">sg</span> <span class="id">sp</span> <span class="id">sm1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACKS</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tge">tge</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span> <span class="id">cs</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RSP</span>: <span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id">cs</span>' = <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FREETGT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> 0 (4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm1">sm1</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SEP</span>: <span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span> |= <span class="id">stack_contents</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span> <span class="id">cs</span>'):<br/>
&nbsp;&nbsp;&lt;&lt;<span class="id">SEP</span>: <span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm1">sm1</a></span> |= <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external">stack_contents_at_external</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span> <span class="id">cs</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7440')">Proof.</div>
<div class="proofscript" id="proof7440">
&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">NB</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">stack</span>; <span class="id">ss</span>. <span class="tactic">destruct</span> <span class="id">cs</span>'; <span class="id">ss</span>. <span class="id">inv</span> <span class="id">STACKS</span>.<br/>
&nbsp;&nbsp;<span class="id">des_ifs_safe</span>. <span class="tactic">destruct</span> <span class="id">stack</span>.<br/>
&nbsp;&nbsp;{ <span class="id">des_ifs</span>; <span class="id">sep_simpl_tac</span>. <span class="id">psimpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#dummy_frame_contents">dummy_frame_contents</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#contains_locations_range">contains_locations_range</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="id">zsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#range_split0">range_split0</a></span> <span class="kwd">with</span> (<span class="id">mid</span> := (4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span>)) <span class="kwd">in</span> <span class="id">SEP</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments_above">size_arguments_above</a></span> <span class="id">sg</span>); <span class="id">i</span>. <span class="id">inv</span> <span class="id">STACKS</span>; <span class="id">des</span>; <span class="id">clarify</span>; <span class="id">ss</span>; <span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">erewrite</span> <span class="id"><a href="compcert.backend.Conventions.html#tailcall_size">Conventions.tailcall_size</a></span>; <span class="tactic">eauto</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments_above">size_arguments_above</a></span> <span class="id">sg_init</span>); <span class="id">i</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">STK</span>. <span class="id">inv</span> <span class="id">MAINARGS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">SEP</span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="id">sep_split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ss</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="id">lia</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>. <span class="id">hexploit</span> <span class="id">A1</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_valid_block">Mem.perm_valid_block</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Separation.html#m_invar">m_invar</a></span>; <span class="tactic">eauto</span>. <span class="id">hexpl</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_unchanged_on">Mem.free_unchanged_on</a></span> <span class="id">UNCH</span>. <span class="id">ii</span>. <span class="id">ss</span>. <span class="id">des</span>; <span class="id">clarify</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;Fix&nbsp;hexpl&nbsp;tactic&nbsp;*)</span><br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.backend.Stackingproof.html#stack_contents_args">stack_contents_args</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cs</span>'; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">STACKS</span>. <span class="id">inv</span> <span class="id">STK</span>. }<br/>
&nbsp;&nbsp;<span class="id">des_ifs_safe</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_unchanged_on">Mem.free_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:= <span class="kwd">fun</span> <span class="id">blk</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="compcert.compcertm.StackingproofC.html#blk">blk</a></span> &lt;&gt; <span class="id">sp</span> \/ ~(0 &lt;= <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> &lt; 4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span>)). <span class="id">ss</span>. <span class="id">ii</span>; <span class="id">des</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">UNCH</span>.<br/>
<br/>
&nbsp;&nbsp;{{ <span class="tactic">assert</span>(<span class="id">SZARG</span>: 0 &lt;= <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span> &lt;= <span class="id"><a href="compcert.backend.Bounds.html#bound_outgoing">bound_outgoing</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id">f</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">STACKS</span>; <span class="id">ss</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments_above">size_arguments_above</a></span> <span class="id">sg</span>). <span class="id">i</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">SZARG0</span>: 4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span> &lt;= <span class="id"><a href="compcert.backend.Bounds.html#fe_stack_data">fe_stack_data</a></span> (<span class="id"><a href="compcert.x86.Stacklayout.html#make_env">make_env</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id">f</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> (<span class="id"><a href="compcert.compcertm.StacklayoutC.html#bound_outgoing_stack_data">bound_outgoing_stack_data</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id">f</span>)); <span class="id">i</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">UNCH0</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(~2 <span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Stackingproof.html#contains_locations">contains_locations</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm0</span>) <span class="id">sp</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Bounds.html#bound_outgoing">bound_outgoing</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id">f</span>)) <span class="id"><a href="compcert.backend.Locations.html#Outgoing">Outgoing</a></span> <span class="id">rs</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm0</span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bar</span>. <span class="tactic">intros</span> ? ? <span class="id">FOOT</span> <span class="id">VALID</span>. <span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">sp</span>); <span class="id">clarify</span>; <span class="id">et</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">CONTR</span>. <span class="tactic">clear</span> - <span class="id">SZARG</span> <span class="id">CONTR</span> <span class="id">FOOT</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">apply_all_once</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span>). <span class="id">des</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">FOOT</span>; <span class="id">et</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">UNCH1</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (~2 <span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span> (<span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents">frame_contents</a></span> <span class="id">f</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sp</span> <span class="id">rs</span> <span class="id">rs0</span> <span class="id">sp2</span> <span class="id">retaddr0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm0</span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm1</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">UNCH0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">ss</span>. <span class="id">des</span>. <span class="id">clarify</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_or_and">not_or_and</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents_1">frame_contents_1</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="id">left</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_isolated_mutation_revisited">sepconj_isolated_mutation_revisited</a></span>; <span class="id">et</span>; <span class="tactic">clear</span> <span class="id">UNCH1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick1">sep_pick1</a></span> <span class="kwd">in</span> <span class="id">SEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents">frame_contents</a></span>, <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external">frame_contents_at_external</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">clear</span> <span class="id">SEP0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents_1">frame_contents_1</a></span>, <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_1_at_external">frame_contents_1_at_external</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_swap">sep_swap</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_swap23">sep_swap23</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Separation.html#sep_assoc">sep_assoc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_isolated_mutation_revisited">sepconj_isolated_mutation_revisited</a></span>; <span class="id">et</span>; <span class="id">swap</span> 2 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">u</span>. <span class="id">ii</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span> <span class="kwd">in</span> *. <span class="id">zsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>; <span class="id">clarify</span>; <span class="id">esplits</span>; <span class="id">et</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick1">sep_pick1</a></span> <span class="kwd">in</span> <span class="id">SEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#contains_locations_split">contains_locations_split</a></span> <span class="kwd">with</span> (<span class="id">lo</span> := (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span>)) <span class="kwd">in</span> <span class="id">SEP</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_isolated_mutation_revisited">sepconj_isolated_mutation_revisited</a></span>; <span class="id">et</span>; <span class="id">swap</span> 2 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick1">sep_pick1</a></span> <span class="kwd">in</span> <span class="id">SEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#free_freed_contains_locations">free_freed_contains_locations</a></span> <span class="kwd">with</span> (<span class="id">CTX</span> := <span class="id"><a href="compcert.common.Separation.html#pure">pure</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>); <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.SeparationC.html#add_pure_r_eq">add_pure_r_eq</a></span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#match_stacks_sp_valid">match_stacks_sp_valid</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">UNCH</span>; <span class="id">et</span>. <span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">des</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">clear</span> <span class="id">SEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#range_split">range_split</a></span> <span class="kwd">with</span> (<span class="id">mid</span> := (4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span>)) <span class="kwd">in</span> <span class="id">SEP0</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">esplits</span>; <span class="id">et</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sep_simpl_tac</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_isolated_mutation_revisited">sepconj_isolated_mutation_revisited</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">UNCH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">ss</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">des</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span>. <span class="id">zsimpl</span>. <span class="id">esplits</span>; <span class="id">et</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick1">sep_pick1</a></span> <span class="kwd">in</span> <span class="id">SEP0</span>. <span class="id">ss</span>. <span class="id">des</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">i</span>. <span class="id">inv</span> <span class="id">STACKS</span>. <span class="id">des</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external_m_footprint">frame_contents_at_external_m_footprint</a></span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.StacklayoutC.html#bound_outgoing_stack_data">bound_outgoing_stack_data</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;}}<br/>
&nbsp;&nbsp;<span class="id">Unshelve</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">econs</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="stack_contents_at_external_spec_elim">stack_contents_at_external_spec_elim</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm_ret</span> <span class="id">stack</span> <span class="id">cs</span>' <span class="id">sg</span> <span class="id">sp</span> <span class="id">sm_after</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACKS</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tge">tge</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_ret">sm_ret</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span>.(<span class="id"><a href="compcert.compcertm.LinearC.html#stackframes_after_external">stackframes_after_external</a></span>) <span class="id">cs</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_after">sm_after</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RSP</span>: <span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id">cs</span>' = <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNFREETGT</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_ret">sm_ret</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> 0 (4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_after">sm_after</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SEP</span>: <span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_ret">sm_ret</a></span> |= <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external">stack_contents_at_external</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_ret">sm_ret</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span> <span class="id">cs</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">SEP</span>: <span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_after">sm_after</a></span> |= <span class="id">stack_contents</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_ret">sm_ret</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span>.(<span class="id"><a href="compcert.compcertm.LinearC.html#stackframes_after_external">stackframes_after_external</a></span>) <span class="id">cs</span>'&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7441')">Proof.</div>
<div class="proofscript" id="proof7441">
&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_nextblock_unfree">Mem_nextblock_unfree</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">NB</span>.<br/>
&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_perm">Mem_unfree_perm</a></span>; <span class="id">et</span>. <span class="tactic">intro</span> <span class="id">PERM</span>.<br/>
&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_unchanged_on">Mem_unfree_unchanged_on</a></span>; <span class="id">et</span>. <span class="tactic">intro</span> <span class="id">UNCH</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">stack</span>; <span class="id">ss</span>. <span class="tactic">destruct</span> <span class="id">cs</span>'; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">STACKS</span>. <span class="id">inv</span> <span class="id">MAINARGS</span>. }<br/>
&nbsp;&nbsp;<span class="id">des_ifs_safe</span>. <span class="tactic">destruct</span> <span class="id">stack</span>.<br/>
&nbsp;&nbsp;{ <span class="id">des_ifs</span>; <span class="id">sep_simpl_tac</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STACKS</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">STK</span>. <span class="id">inv</span> <span class="id">MAINARGS</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">SZLE</span>: <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span> &lt;= <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg_init</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">des</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Conventions.html#tailcall_size">tailcall_size</a></span>; <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ge_le">Z.ge_le</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments_above">size_arguments_above</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.backend.Stackingproof.html#stack_contents_args">stack_contents_args</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Local&nbsp;Opaque&nbsp;contains_locations.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#dummy_frame_contents">dummy_frame_contents</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.backend.Stackingproof.html#stack_contents_args">stack_contents_args</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">psimpl</span>. <span class="id">zsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">clear</span> - <span class="id">SEP</span>. <span class="id">inv</span> <span class="id">SEP</span>. <span class="id">des</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">des</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">des</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Conventions.html#tailcall_size">tailcall_size</a></span>; <span class="id">et</span>. <span class="tactic">intro</span> <span class="id">ZERO</span>; <span class="id">des</span>. <span class="tactic">rewrite</span> <span class="id">ZERO</span> <span class="kwd">in</span> *. <span class="id">zsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">SEP</span> <span class="id">UNCH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_drop">sep_drop</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="id">ss</span>. <span class="id">des</span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">Mem.perm_unchanged_on</a></span>; <span class="id">et</span>. <span class="id">u</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">i</span>. <span class="id">zsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> (<span class="id"><a href="compcert.common.AST.html#chunk_of_type">chunk_of_type</a></span> <span class="id">ty</span>) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm_after</span>) <span class="id">sp</span> (4 * <span class="id">ofs</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#v">v</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_load">Mem.valid_access_load</a></span>. <span class="id">rr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Stackingproof.html#align_type_chunk">align_type_chunk</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.StoreArgumentsProps.html#typesize_chunk">typesize_chunk</a></span> <span class="kwd">in</span> *. <span class="id">ii</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">ofs0</span> &lt; (4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">PERM</span>; <span class="id">et</span>. <span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">Mem.perm_unchanged_on</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">u</span>. <span class="id">i</span>. <span class="id">des_safe</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">clear</span> - <span class="id">SEP</span> <span class="id">SZLE</span> <span class="id">H0</span> <span class="id">H2</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_drop">sep_drop</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="id">ss</span>. <span class="id">des</span>. <span class="tactic">eapply</span> <span class="id">SEP1</span>; <span class="id">et</span>. <span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.mul_divide_mono_l">Z.mul_divide_mono_l</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des_safe</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">STACKS</span>. <span class="id">ss</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.backend.Stackingproof.html#stack_contents_args">stack_contents_args</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.backend.Stackingproof.html#stack_contents_args">stack_contents_args</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_isolated_mutation_revisited">sepconj_isolated_mutation_revisited</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">generalize</span> (<span class="id"><a href="compcert.compcertm.StacklayoutC.html#bound_outgoing_stack_data">bound_outgoing_stack_data</a></span> (<span class="id"><a href="compcert.backend.Bounds.html#function_bounds">function_bounds</a></span> <span class="id">f</span>)); <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external_m_footprint">frame_contents_at_external_m_footprint</a></span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">bar</span>. <span class="id">u</span>. <span class="id">ii</span>. <span class="id">des</span>; <span class="id">clarify</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">s</span>. <span class="id">left</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">split</span>; <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ge_le">Z.ge_le</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments_above">size_arguments_above</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick1">sep_pick1</a></span> <span class="kwd">in</span> <span class="id">SEP</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents">frame_contents</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external">frame_contents_at_external</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">des</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">clear</span> <span class="id">SEP0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#frame_contents_1">frame_contents_1</a></span>, <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_1_at_external">frame_contents_1_at_external</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_swap">sep_swap</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_swap">sep_swap</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_swap23">sep_swap23</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Separation.html#sep_assoc">sep_assoc</a></span> <span class="kwd">in</span> <span class="id">SEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_isolated_mutation_revisited">sepconj_isolated_mutation_revisited</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">SEP</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">u</span>. <span class="id">ii</span>. <span class="id">des_safe</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span>. <span class="id">zsimpl</span>. <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick1">sep_pick1</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#unfree_freed_contains_locations">unfree_freed_contains_locations</a></span> <span class="kwd">with</span> (<span class="id">CTX</span> := <span class="id"><a href="compcert.common.Separation.html#pure">pure</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span>); <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.SeparationC.html#add_pure_r_eq">add_pure_r_eq</a></span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">s</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">u</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span> <span class="kwd">in</span> *. <span class="id">zsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">x1</span> &lt; 4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span>)); <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">split</span>; <span class="id">et</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sepconj_isolated_mutation_revisited">sepconj_isolated_mutation_revisited</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">SEP</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">u</span>. <span class="id">ii</span>. <span class="id">des_safe</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span>. <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick1">sep_pick1</a></span> <span class="kwd">in</span> <span class="id">SEP0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#unfree_freed_range">unfree_freed_range</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">s</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">u</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Stacklayout.html#fe_ofs_arg">fe_ofs_arg</a></span> <span class="kwd">in</span> *. <span class="id">zsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">x1</span> &lt; 4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg</span>)); <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">split</span>; <span class="id">et</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.StackingproofC.html#frame_contents_at_external_m_footprint">frame_contents_at_external_m_footprint</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">split</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.ge_le">Z.ge_le</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments_above">size_arguments_above</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StacklayoutC.html#bound_outgoing_stack_data">bound_outgoing_stack_data</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Separation.html#sepconj">sepconj</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_states">match_states</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">idx</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">st_src0</span>: <span class="id"><a href="compcert.backend.Linear.html#state">Linear.state</a></span>) (<span class="id">st_tgt0</span>: <span class="id"><a href="compcert.compcertm.MachC.html#state">MachC.state</a></span>) (<span class="id">sm0</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.t">SimMem.t</a></span>): <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="match_states_intro">match_states_intro</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MATCHST</span>: <span class="id"><a href="compcert.backend.Stackingproof.html#match_states">Stackingproof.match_states</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.ge">ge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tge">tge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#st_src0">st_src0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#st_tgt0">st_tgt0</a></span>.(<span class="id"><a href="compcert.compcertm.MachC.html#st">st</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.wf">SimMem.wf</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INITRS</span>: <span class="id">exists</span> <span class="id">dummy_stack_src</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">DUMMY</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#st_src0">st_src0</a></span>.(<span class="id"><a href="compcert.compcertm.LinearC.html#get_stack">LinearC.get_stack</a></span>).(<span class="id"><a href="compcert.compcertm.CoqlibC.html#last_option">last_option</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#dummy_stack_src">dummy_stack_src</a></span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">GOOD</span>: <span class="kwd">forall</span> <span class="id">mr</span> (<span class="id">CALLEESAVE</span>: <span class="id"><a href="compcert.x86.Conventions1.html#is_callee_save">Conventions1.is_callee_save</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#mr">mr</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">UIU</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#dummy_stack_src">dummy_stack_src</a></span>.(<span class="id"><a href="compcert.compcertm.LinearC.html#current_locset">current_locset</a></span>) (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#mr">mr</a></span>) = <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> -&gt; <span class="id"><a href="compcert.compcertm.StackingproofC.html#st_tgt0">st_tgt0</a></span>.(<span class="id"><a href="compcert.compcertm.MachC.html#init_rs">init_rs</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#mr">mr</a></span> = <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">INJ</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) (<span class="id"><a href="compcert.compcertm.StackingproofC.html#dummy_stack_src">dummy_stack_src</a></span>.(<span class="id"><a href="compcert.compcertm.LinearC.html#current_locset">current_locset</a></span>) (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#mr">mr</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.StackingproofC.html#st_tgt0">st_tgt0</a></span>.(<span class="id"><a href="compcert.compcertm.MachC.html#init_rs">init_rs</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#mr">mr</a></span>)&gt;&gt;)&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">SIG</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#dummy_stack_src">dummy_stack_src</a></span>.(<span class="id"><a href="compcert.compcertm.LinearC.html#current_function">current_function</a></span>).(<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span>) = <span class="id"><a href="compcert.compcertm.StackingproofC.html#st_tgt0">st_tgt0</a></span>.(<span class="id"><a href="compcert.compcertm.MachC.html#init_sg">init_sg</a></span>)&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">WFTGT</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#strong_wf_tgt">strong_wf_tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#st_tgt0">st_tgt0</a></span>.(<span class="id"><a href="compcert.compcertm.MachC.html#st">MachC.st</a></span>)).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_states_at">match_states_at</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">st_src0</span>: <span class="id"><a href="compcert.backend.Linear.html#state">Linear.state</a></span>) (<span class="id">st_tgt0</span>: <span class="id"><a href="compcert.compcertm.MachC.html#state">MachC.state</a></span>) (<span class="id">sm_at</span> <span class="id">sm_arg</span>: <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.t">SimMem.t</a></span>): <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="match_states_at_intro">match_states_at_intro</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJ</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_at">sm_at</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) = <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJ</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_at">sm_at</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">SimMem.src</a></span>) = <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.src">SimMem.src</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">init_rs</span> <span class="id">init_sg</span> <span class="id">cs</span>' <span class="id">tfptr</span> <span class="id">rs</span> <span class="id">sp</span> <span class="id">skd</span> <span class="id">fptr</span> <span class="id">cs</span> <span class="id">ls</span> <span class="id">sig</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIGEQ</span>: <span class="id"><a href="compcert.compcertm.Skeleton.html#Sk.get_csig">Sk.get_csig</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#skd">skd</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sig">sig</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SRCST</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#st_src0">st_src0</a></span> = <span class="id"><a href="compcert.backend.Linear.html#Callstate">Linear.Callstate</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fptr">fptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sig">sig</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls">ls</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TGTST</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#st_tgt0">st_tgt0</a></span> = <span class="id"><a href="compcert.compcertm.MachC.html#mkstate">mkstate</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#init_rs">init_rs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#init_sg">init_sg</a></span> (<span class="id"><a href="compcert.backend.Mach.html#Callstate">Callstate</a></span> <span class="id">cs</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#tfptr">tfptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs">rs</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_at">sm_at</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RSP</span>: <span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id">cs</span>' = <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PRIV</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span> 0 (4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sig">sig</a></span>) &lt;2= <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIG</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fptr">fptr</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#skd">skd</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#sp">sp</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NB</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_at">sm_at</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">SimMem.tgt</a></span>).(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>) = <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>.(<span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.tgt">SimMem.tgt</a></span>).(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SEP</span>: <span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span> |= <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external">stack_contents_at_external</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#cs">cs</a></span> <span class="id">cs</span>' <span class="id"><a href="compcert.compcertm.StackingproofC.html#sig">sig</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id"><a href="compcert.common.Separation.html#minjection">minjection</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>) (<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>) **<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Separation.html#globalenv_inject">globalenv_inject</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.ge">ge</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm_arg">sm_arg</a></span>)).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="make_match_genvs">make_match_genvs</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.SimSymbId.html#sim_skenv">SimSymbId.sim_skenv</a></span> (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.project">SkEnv.project</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.md_src">md_src</a></span>.(<span class="id"><a href="compcert.compcertm.Mod.html#Mod.sk">Mod.sk</a></span>)) (<span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.project">SkEnv.project</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.md_tgt">md_tgt</a></span>.(<span class="id"><a href="compcert.compcertm.Mod.html#Mod.sk">Mod.sk</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="compcert.common.Linking.html#match_globdef">match_globdef</a></span> (<span class="kwd">fun</span> <span class="id">cunit</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="compcert.backend.Stacking.html#transf_fundef">transf_fundef</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.prog">prog</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.ge">ge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7442')">Proof.</div>
<div class="proofscript" id="proof7442">
 <span class="id">subst_locals</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimSymbId.html#sim_skenv_revive">SimSymbId.sim_skenv_revive</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="has_footprint">has_footprint</a></span> (<span class="id">st_src0</span>: <span class="id"><a href="compcert.backend.Linear.html#state">Linear.state</a></span>): <span class="id"><a href="compcert.compcertm.MachC.html#state">MachC.state</a></span> -&gt; <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.t">SimMem.t</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="has_footprint_intro">has_footprint_intro</a></span><br/>
<div class="doc">copied from MachC *</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">stack</span> <span class="id">rs</span> <span class="id">m0</span> <span class="id">fptr</span> <span class="id">sg</span> <span class="id">blk</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIG</span>: <span class="id">exists</span> <span class="id">skd</span>, <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#fptr">fptr</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#skd">skd</a></span> /\ <span class="id"><a href="compcert.compcertm.Skeleton.html#Sk.get_csig">Sk.get_csig</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#skd">skd</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RSP</span>: (<span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span>) = <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OFSZERO</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">init_rs</span> <span class="id">init_sg</span><br/>
<div class="doc">newly added *</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FOOT</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#has_footprint">SimMemInjC.has_footprint</a></span> <span class="id">bot2</span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#blk">blk</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) + 4 * (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>))) <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>)<br/>
:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#has_footprint">has_footprint</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#st_src0">st_src0</a></span> (<span class="id"><a href="compcert.compcertm.MachC.html#mkstate">mkstate</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#init_rs">init_rs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#init_sg">init_sg</a></span> (<span class="id"><a href="compcert.backend.Mach.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fptr">fptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#rs">rs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m0">m0</a></span>)) <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="mle_excl">mle_excl</a></span> (<span class="id">st_src0</span>: <span class="id"><a href="compcert.backend.Linear.html#state">Linear.state</a></span>): <span class="id"><a href="compcert.compcertm.MachC.html#state">MachC.state</a></span> -&gt; <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.t">SimMem.t</a></span> -&gt; <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.t">SimMem.t</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="mle_excl_intro">mle_excl_intro</a></span><br/>
<div class="doc">copied from MachC *</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">init_rs</span> <span class="id">init_sg</span> <span class="id">stack</span> <span class="id">fptr</span> <span class="id">ls0</span> <span class="id">m0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sg</span> <span class="id">blk</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIG</span>: <span class="id">exists</span> <span class="id">skd</span>, <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#fptr">fptr</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#skd">skd</a></span> /\ <span class="id"><a href="compcert.compcertm.Skeleton.html#Sk.get_csig">Sk.get_csig</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#skd">skd</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RSP</span>: (<span class="id"><a href="compcert.backend.Mach.html#parent_sp">parent_sp</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span>) = <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>)<br/>
<div class="doc">newly added *</div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">sm1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MLEEXCL</span>: <span class="id"><a href="compcert.compcertm.SimMemInjC.html#le_excl">SimMemInjC.le_excl</a></span> <span class="id">bot2</span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#blk">blk</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) + 4 * (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span>))) <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm1">sm1</a></span>)<br/>
:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#mle_excl">mle_excl</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#st_src0">st_src0</a></span> (<span class="id"><a href="compcert.compcertm.MachC.html#mkstate">mkstate</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#init_rs">init_rs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#init_sg">init_sg</a></span> (<span class="id"><a href="compcert.backend.Mach.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack">stack</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#fptr">fptr</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ls0">ls0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m0">m0</a></span>)) <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm0">sm0</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sm1">sm1</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="SIMMODSEM.SEGESRC">SEGESRC</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#senv_genv_compat">senv_genv_compat</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.ge">ge</a></span>. <span class="kwd">Proof</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.senv_genv_compat">SkEnv.senv_genv_compat</a></span>; <span class="id">et</span>. Qed.</div>
<span class="kwd">Let</span> <span class="id"><a name="SIMMODSEM.SEGETGT">SEGETGT</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#senv_genv_compat">senv_genv_compat</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tge">tge</a></span>. <span class="kwd">Proof</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.senv_genv_compat">SkEnv.senv_genv_compat</a></span>; <span class="id">et</span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="sim_modsem">sim_modsem</a></span>:<span class="id"><a href="compcert.compcertm.SimModSem.html#ModSemPair.sim">ModSemPair.sim</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#msp">msp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7443')">Proof.</div>
<div class="proofscript" id="proof7443">
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MatchSimModSemExcl.html#match_states_sim">match_states_sim</a></span> <span class="kwd">with</span> (<span class="id">match_states</span> := <span class="id"><a href="compcert.compcertm.StackingproofC.html#match_states">match_states</a></span>) (<span class="id">match_states_at</span> := <span class="id"><a href="compcert.compcertm.StackingproofC.html#match_states_at">match_states_at</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sidx</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sound_states</span> := <span class="kwd">fun</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.Lineartyping.html#wt_state">wt_state</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">has_footprint</span> := <span class="id"><a href="compcert.compcertm.StackingproofC.html#has_footprint">has_footprint</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mle_excl</span> := <span class="id"><a href="compcert.compcertm.StackingproofC.html#mle_excl">mle_excl</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>; <span class="id">ii</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="id">instantiate</span> (1:= <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.PeanoNat.html#Nat.lt">Nat.lt</a></span>). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf">lt_wf</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.LineartypingC.html#wt_state_local_preservation">wt_state_local_preservation</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Stackingproof.html#wt_prog">wt_prog</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">FOOT</span>. <span class="id">inv</span> <span class="id">MLEEXCL</span>. <span class="tactic">rewrite</span> <span class="id">RSP</span> <span class="kwd">in</span> *. <span class="id">clarify</span>. <span class="id">des</span>. <span class="id">clarify</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#foot_excl">SimMemInjC.foot_excl</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;init&nbsp;bsim&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">INITTGT</span>. <span class="id">inv</span> <span class="id">STORE</span>. <span class="id">folder</span>. <span class="id">inv</span> <span class="id">SIMARGS</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#functions_translated_inject">functions_translated_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#make_match_genvs">make_match_genvs</a></span>; <span class="id">et</span>. <span class="tactic">apply</span> <span class="id">SIMSKENV</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">SIMSKENV</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">SAFESRC</span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">fd_src</span>; <span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Errors.html#bind">bind</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexpl</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#transf_function_sig">transf_function_sig</a></span> <span class="id">SG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">LEN0</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.compcertm.ValuesC.html#typify_list">typify_list</a></span> <span class="id">vs_src</span> (<span class="id"><a href="compcert.common.AST.html#sig_args">sig_args</a></span> (<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span> <span class="id">f</span>))) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.x86.Conventions1.html#loc_arguments">loc_arguments</a></span> (<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span> <span class="id">f</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">etransitivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.ValuesC.html#typify_list">typify_list</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#zip_length">zip_length</a></span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.sim_val_list_length">SimMem.sim_val_list_length</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">VALS0</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">symmetry</span>. <span class="tactic">rewrite</span> <span class="id">SG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;eapply&nbsp;extcall_arguments_imply&nbsp;in&nbsp;VALS.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.MachC.html#extcall_arguments_length">extcall_arguments_length</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>((<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">targs</span>) = (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.AST.html#sig_args">sig_args</a></span> (<span class="id"><a href="compcert.backend.Mach.html#fn_sig">fn_sig</a></span> <span class="id">fd</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.MachC.html#extcall_arguments_length">extcall_arguments_length</a></span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.Conventions1C.html#loc_arguments_length">loc_arguments_length</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">TYP</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.compcertm.LocationsC.html#fill_arguments_progress">LocationsC.fill_arguments_progress</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.MachC.html#locset_copy">locset_copy</a></span> ((<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id">sm_arg</span>).(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>).(<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span>) - <span class="id">m0</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>).(<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span>)) <span class="id">rs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.ValuesC.html#typify_list">typify_list</a></span> <span class="id">vs_src</span> (<span class="id"><a href="compcert.common.AST.html#sig_args">sig_args</a></span> (<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span> <span class="id">f</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;args_src.(Args.vs)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.x86.Conventions1.html#loc_arguments">loc_arguments</a></span> <span class="id">f</span>.(<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span>))); <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.compcertm.LocationsC.html#fill_arguments_spec">LocationsC.fill_arguments_spec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.ValuesC.html#typify_list">typify_list</a></span> <span class="id">vs_src</span> (<span class="id"><a href="compcert.common.AST.html#sig_args">sig_args</a></span> (<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span> <span class="id">f</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;args_src.(Args.vs)&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span>.(<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span>)); <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.MachExtra.html#mach_store_arguments_simmem">MachExtra.mach_store_arguments_simmem</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">econs</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (@<span class="id"><a href="compcert.compcertm.SimMemInjC.html#inject_junk_blocks_parallel">SimMemInjC.inject_junk_blocks_parallel</a></span> <span class="id">sm1</span> <span class="id">n</span>); <span class="id">et</span>. <span class="tactic">intro</span> <span class="id">SM0</span>; <span class="id">des</span>. <span class="tactic">rename</span> <span class="id">sm0</span> <span class="id">into</span> <span class="id">sm2</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplits</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;initial&nbsp;frame&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>; <span class="id">cycle</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">instantiate</span> (1:= <span class="id">n</span>). <span class="id">ii</span>. <span class="id">hexpl</span> <span class="id">OUT</span>. <span class="tactic">destruct</span> <span class="id">loc</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">hexploit</span> <span class="id">PTRFREE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id">SG</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">OUT0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">SM</span> <span class="comment">(*&nbsp;NB&nbsp;*)</span> <span class="id">H</span>. <span class="id">des_ifs</span>. <span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">abstr</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>) <span class="id">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">abstr</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id">sm_arg</span>)) <span class="id">m_src</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Ltac</span> <span class="id">Pos_compare_tac</span> := <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.compare_lt_iff">Pos.compare_lt_iff</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.compare_gt_iff">Pos.compare_gt_iff</a></span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">apply_all_once</span> <span class="id">Pos.compare_eq</span>; <span class="id">clarify</span>; <span class="tactic">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">b</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub">Z.pos_sub</a></span> <span class="id">m_src</span> <span class="id">y</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub">Z.pos_sub</a></span> <span class="id">b</span> <span class="id">y</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">m_src</span>); <span class="tactic">try</span> <span class="id">nia</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub_spec">Z.pos_sub_spec</a></span>. <span class="id">des_ifs</span>; <span class="id">Pos_compare_tac</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">ii</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z2Pos.inj_add">Z2Pos.inj_add</a></span> <span class="kwd">in</span> *; <span class="id">ss</span>; <span class="tactic">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub_spec">Z.pos_sub_spec</a></span>. <span class="id">des_ifs</span>; <span class="id">Pos_compare_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub_diag">Z.pos_sub_diag</a></span> <span class="kwd">in</span> *. <span class="id">zsimpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Pos2Z.id">Pos2Z.id</a></span> <span class="kwd">in</span> *. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> <span class="id">y</span>); <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">clarify</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub_diag">Z.pos_sub_diag</a></span>. <span class="id">zsimpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Pos2Z.id">Pos2Z.id</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>; <span class="id">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z2Pos.inj_add">Z2Pos.inj_add</a></span> <span class="kwd">in</span> *; <span class="id">ss</span>; <span class="tactic">try</span> <span class="id">lia</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub_spec">Z.pos_sub_spec</a></span>. <span class="id">des_ifs</span>; <span class="id">Pos_compare_tac</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub">Z.pos_sub</a></span> <span class="id">b</span> <span class="id">y</span>) <span class="kwd">with</span> (<span class="id">b</span>.(<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span>) - <span class="id">y</span>.(<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span>))%<span class="id">Z</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z2Pos.inj_sub">Z2Pos.inj_sub</a></span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des_ifs</span>; <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">OUT0</span> <span class="kwd">in</span> *. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">hexpl</span> <span class="id">OUT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">esplits</span>; <span class="id">ss</span>. <span class="tactic">clear</span> - <span class="id">Heq</span> <span class="id">CSTYLE0</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stacking.html#transf_function">transf_function</a></span> <span class="kwd">in</span> <span class="id">Heq</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">TYP</span>. <span class="id">econs</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.SimMem.html#SimMem.sim_val_list_length">SimMem.sim_val_list_length</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">VALS0</span>. <span class="id">ss</span>. <span class="id">etrans</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:= <span class="id">sm2</span>). <span class="id">etrans</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;match&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">INITRS</span>: <span class="id"><a href="compcert.backend.Stackingproof.html#agree_regs">agree_regs</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm2</span>) <span class="id">ls1</span> <span class="id">rs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">r</span>) (<span class="id"><a href="compcert.common.AST.html#regs_of_rpairs">regs_of_rpairs</a></span> (<span class="id"><a href="compcert.x86.Conventions1.html#loc_arguments">loc_arguments</a></span> (<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span> <span class="id">f</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">VALS</span>. <span class="id">inv</span> <span class="id">TYP</span>. <span class="id">ss</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">SG</span> <span class="kwd">in</span> *. <span class="tactic">clear</span> - <span class="id">FILL</span> <span class="id">VALS</span> <span class="id">VALS0</span> <span class="id">H</span> <span class="id">MLE0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.compcertm.LocationsC.html#loc_arguments_one">loc_arguments_one</a></span> (<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span> <span class="id">f</span>)). <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">abstr</span> (<span class="id"><a href="compcert.x86.Conventions1.html#loc_arguments">loc_arguments</a></span> (<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span> <span class="id">f</span>)) <span class="id">locs</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">abstr</span> <span class="id">vs_src</span> <span class="id">vals_src</span>. <span class="id">abstr</span> <span class="id">vs_tgt</span> <span class="id">vals_tgt</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">abstr</span> (<span class="id"><a href="compcert.common.AST.html#sig_args">sig_args</a></span> (<span class="id"><a href="compcert.backend.Linear.html#fn_sig">Linear.fn_sig</a></span> <span class="id">f</span>)) <span class="id">tys</span>. <span class="id">clear_tac</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.ValuesC.html#typify_list">typify_list</a></span> <span class="kwd">in</span> *. <span class="id">ginduction</span> <span class="id">locs</span>; <span class="id">ii</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">ss</span>. <span class="id">des</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">VALS</span>. <span class="tactic">destruct</span> <span class="id">vals_tgt</span>; <span class="id">ss</span>. <span class="id">des_ifs</span>. <span class="id">inv</span> <span class="id">VALS0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">H4</span> <span class="id">into</span> <span class="id">EARGP</span>. <span class="id">inv</span> <span class="id">EARGP</span>. <span class="tactic">rename</span> <span class="id">H2</span> <span class="id">into</span> <span class="id">EARG</span>. <span class="id">inv</span> <span class="id">EARG</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clarify</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H4</span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.ValuesC.html#inject_typify">inject_typify</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MLE0</span>. <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_incr">val_inject_incr</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">VALS</span>. <span class="tactic">destruct</span> <span class="id">vals_tgt</span>; <span class="id">ss</span>. <span class="id">des_ifs</span>. <span class="id">inv</span> <span class="id">VALS0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.ValuesC.html#typify_list">typify_list</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHlocs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;eapply&nbsp;Loc_not_in_notin_R&nbsp;in&nbsp;H;&nbsp;eauto.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id">PTRFREE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id">SG</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id">OUT</span>; <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id">DEF</span>. <span class="id">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H0</span> <span class="id">MWF0</span> <span class="id">SM</span> <span class="id">DEF</span> <span class="id">MLE0</span>. <span class="id">des_ifs</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:= 0%<span class="id">Z</span>). <span class="id">psimpl</span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#inject_junk_blocks">SimMemInjC.inject_junk_blocks</a></span>. <span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">abstr</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>) <span class="id">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">abstr</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id">sm_arg</span>)) <span class="id">m_src</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">b</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub">Z.pos_sub</a></span> <span class="id">m_src</span> <span class="id">y</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub">Z.pos_sub</a></span> <span class="id">b</span> <span class="id">y</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos">Z.pos</a></span> <span class="id">m_src</span>); <span class="tactic">try</span> <span class="id">nia</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub_spec">Z.pos_sub_spec</a></span>. <span class="id">des_ifs</span>; <span class="id">Pos_compare_tac</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> <span class="id">y</span>) <span class="id">eqn</span>: <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">clarify</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub_diag">Z.pos_sub_diag</a></span>. <span class="id">zsimpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Pos2Z.id">Pos2Z.id</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des_ifs</span>; <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="tactic">try</span> <span class="id">xomega</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">m_src</span> + <span class="id">y</span> - <span class="id">m_src</span>)%<span class="id">positive</span> <span class="kwd">with</span> <span class="id">y</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.add_comm">Pos.add_comm</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.add_sub">Pos.add_sub</a></span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z2Pos.inj_add">Z2Pos.inj_add</a></span>; <span class="id">ss</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub_spec">Z.pos_sub_spec</a></span>. <span class="id">des_ifs</span>; <span class="id">Pos_compare_tac</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.add_comm">Pos.add_comm</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.add_assoc">Pos.add_assoc</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.add_sub">Pos.add_sub</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub_spec">Z.pos_sub_spec</a></span>. <span class="id">des_ifs</span>; <span class="id">Pos_compare_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Pos2Z.id">Pos2Z.id</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.add_sub_assoc">Pos.add_sub_assoc</a></span>; <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.add_comm">Pos.add_comm</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.add_sub">Pos.add_sub</a></span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">COND0</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_pos">Z.to_pos</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub">Z.pos_sub</a></span> <span class="id">b</span> <span class="id">y</span>) + <span class="id">m_src</span>) <span class="id">m_src</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">bsimpl</span>. <span class="id">des_sumbool</span>. <span class="id">ii</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="kwd">in</span> *. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;des_ifs.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;{&nbsp;unfold&nbsp;block.&nbsp;do&nbsp;2&nbsp;f_equal.&nbsp;bsimpl;&nbsp;des;&nbsp;des_sumbool;&nbsp;try&nbsp;lia.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">COND0</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">COND1</span>: <span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_pos">Z.to_pos</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub">Z.pos_sub</a></span> <span class="id">b</span> <span class="id">y</span>) + <span class="id">m_src</span>) (<span class="id">m_src</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.of_nat">Pos.of_nat</a></span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">bsimpl</span>. <span class="id">des_sumbool</span>. <span class="id">ii</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pos_sub_spec">Z.pos_sub_spec</a></span>. <span class="id">des_ifs</span>; <span class="id">Pos_compare_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">n</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="id">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">COND1</span> <span class="kwd">in</span> *. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">targs</span> <span class="id">into</span> <span class="id">targs_tgt</span>. <span class="tactic">rename</span> <span class="id">TYP</span> <span class="id">into</span> <span class="id">TYPTGT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">DEF</span>. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id">SM</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">inversion</span> <span class="id">SIMSKENV</span>; <span class="tactic">clear</span> <span class="id">SIMSKENV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#sim_skenv_symbols_inject">SimMemInjC.sim_skenv_symbols_inject</a></span> <span class="kwd">with</span> (<span class="id">sm0</span> := <span class="id">sm2</span>); <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimSymb.html#SimSymb.mle_preserves_sim_skenv">SimSymb.mle_preserves_sim_skenv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimSymb.html#SimSymb.mle_preserves_sim_skenv">SimSymb.mle_preserves_sim_skenv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.Conventions1.html#loc_arguments_bounded">loc_arguments_bounded</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">DEF</span>. <span class="tactic">rewrite</span> <span class="id">SM</span>. <span class="id">s</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.JunkBlock.html#assign_junk_blocks_nextblock">assign_junk_blocks_nextblock</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">NB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="id">et</span>. <span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">ALC</span> <span class="id">NB</span> <span class="id">MWF</span>. <span class="id">esplits</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">des_ifs</span>; <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">etrans</span>; <span class="id">et</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="comment">(*&nbsp;TODO:&nbsp;make&nbsp;lemma&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">inv</span> <span class="id">MWF</span>; <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id">TGTEXT</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">rr</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">ss</span>. <span class="id">des</span>. <span class="id">r</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="id">et</span>. <span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id">NB</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_incr">val_inject_incr</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_incr">val_inject_incr</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">psimpl</span>. <span class="id">zsimpl</span>. <span class="tactic">rewrite</span> <span class="id">SG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (@<span class="id"><a href="compcert.compcertm.StackingproofC.html#init_match_frame_contents">init_match_frame_contents</a></span> <span class="id">sm_arg</span>); <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">SIMSKENV</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">TYPTGT</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive_incl_skenv">SkEnv.revive_incl_skenv</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.INCLTGT">INCLTGT</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">inv</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.WF">WF</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">WFPARAM</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id">SG</span>. <span class="id">ss</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">DEF</span>, <span class="id">SM</span>. <span class="id">s</span>. <span class="tactic">f_equal</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">ss</span>. <span class="id">inv</span> <span class="id">SIMSKE</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">etrans</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MWF0</span>. <span class="id">ss</span>. <span class="id">etrans</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MWF</span>. <span class="tactic">rewrite</span> <span class="id">NBTGT</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">SEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Stackingproof.html#dummy_frame_contents_incr">dummy_frame_contents_incr</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Stackingproof.html#dummy_frame_contents_incr">dummy_frame_contents_incr</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">esplits</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">i</span>. <span class="id">ss</span>. <span class="tactic">split</span>; <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id">OUT</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">des_ifs</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">hexpl</span> <span class="id"><a href="compcert.backend.Conventions.html#loc_arguments_acceptable_2">loc_arguments_acceptable_2</a></span> <span class="id">ACCP</span>. <span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">rr</span>. <span class="id">ss</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;init&nbsp;progress&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>. <span class="id">inv</span> <span class="id">SAFESRC</span>. <span class="id">folder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#make_match_genvs">make_match_genvs</a></span>; <span class="tactic">eauto</span>. { <span class="tactic">apply</span> <span class="id">SIMSKENV</span>. } <span class="tactic">intro</span> <span class="id">SIMGE</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">SIMARGS</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.compcertm.GlobalenvsC.html#fsim_internal_funct_inject">fsim_internal_funct_inject</a></span> <span class="id">SIMGE</span>); <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ge">ge</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_inject_revive">SimMemInjC.skenv_inject_revive</a></span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id">SIMSKENV</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="id">monadInv</span> <span class="id">MATCH</span>. <span class="tactic">rename</span> <span class="id">x</span> <span class="id">into</span> <span class="id">fd_tgt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">targs_tgt</span>, &lt;&lt;<span class="id">TYPTGT</span>: <span class="id"><a href="compcert.compcertm.ValuesC.html#typecheck">typecheck</a></span> <span class="id">vs_tgt</span> (<span class="id"><a href="compcert.backend.Mach.html#fn_sig">fn_sig</a></span> <span class="id">fd_tgt</span>) <span class="id"><a href="compcert.compcertm.StackingproofC.html#targs_tgt">targs_tgt</a></span>&gt;&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">TYP</span>. <span class="id">eexists</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.ValuesC.html#inject_list_length">inject_list_length</a></span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.StackingproofC.html#transf_function_sig">transf_function_sig</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.compcertm.StoreArgumentsProps.html#store_arguments_progress">store_arguments_progress</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm_arg</span>) <span class="id">targs_tgt</span> (<span class="id"><a href="compcert.backend.Mach.html#fn_sig">fn_sig</a></span> <span class="id">fd_tgt</span>)); <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">TYPTGT</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.ValuesC.html#typify_has_type_list">typify_has_type_list</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive_incl_skenv">SkEnv.revive_incl_skenv</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.INCLTGT">INCLTGT</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">inv</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.WF">WF</a></span>. <span class="tactic">eapply</span> <span class="id">WFPARAM</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="id">econs</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">esplits</span>; <span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stacking.html#transf_function">transf_function</a></span> <span class="kwd">in</span> <span class="id">EQ</span>. <span class="id">des_ifs</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:= <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>). <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;callstate&nbsp;wf&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCH</span>; <span class="id">ss</span>.<br/>
<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;call&nbsp;fsim&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#make_match_genvs">make_match_genvs</a></span>; <span class="tactic">eauto</span>. { <span class="tactic">apply</span> <span class="id">SIMSKENV</span>. } <span class="tactic">intro</span> <span class="id">SIMGE</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">CALLSRC</span>. <span class="id">inv</span> <span class="id">MATCH</span>; <span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCHST</span>; <span class="id">ss</span>. <span class="tactic">destruct</span> <span class="id">st_tgt0</span>; <span class="id">ss</span>. <span class="id">clarify</span>. <span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>. <span class="id">exploit</span> <span class="id">SOUND</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">Q</span>; <span class="id">des</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.backend.Lineartyping.html#wt_callstate_agree">wt_callstate_agree</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">AGCS</span> <span class="id">AGARGS</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">MCOMPAT0</span>: <span class="id">sm0</span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) = <span class="id">j</span>). { <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="id">ss</span>. } <span class="id">clarify</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexpl</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#match_stacks_sp_ofs">match_stacks_sp_ofs</a></span> <span class="id">RSP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#arguments_perm">arguments_perm</a></span>; <span class="tactic">eauto</span>. { <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sep_drop_tail3">sep_drop_tail3</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="tactic">eauto</span>. } <span class="id">i</span>; <span class="id">des</span>. <span class="id">psimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#arguments_private">arguments_private</a></span>; <span class="tactic">eauto</span>. { <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sep_drop_tail3">sep_drop_tail3</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="tactic">eauto</span>. } <span class="id">i</span>; <span class="id">des</span>. <span class="id">psimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_free">Mem.range_perm_free</a></span>. { <span class="id">ii</span>. <span class="id">spc</span> <span class="id">H</span>. <span class="id">zsimpl</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>. } <span class="tactic">intros</span> [<span class="id">m_tgt0</span> <span class="id">FREETGT</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.backend.Stackingproof.html#transl_external_arguments">transl_external_arguments</a></span>; <span class="tactic">eauto</span>. { <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick1">sep_pick1</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="tactic">eauto</span>. } <span class="tactic">intro</span> <span class="id">ARGS</span>; <span class="id">des</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm0</span>) <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#match_stacks_sp_valid">match_stacks_sp_valid</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="tactic">eauto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCOMPAT</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#free_right">SimMemInj.free_right</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">u</span>. <span class="id">ii</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">do</span> 2 <span class="id">spc</span> <span class="id">H0</span>. <span class="id">zsimpl</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#match_stacks_sp_valid">match_stacks_sp_valid</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexpl</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span> <span class="id">NB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">EXTTGT</span>: <span class="id">exists</span> <span class="id">skd_tgt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id">tfptr</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#skd_tgt">skd_tgt</a></span> /\ <span class="id"><a href="compcert.compcertm.Skeleton.html#Sk.get_csig">Sk.get_csig</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#skd_tgt">skd_tgt</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">sg</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">folder</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;copied&nbsp;from&nbsp;InliningproofC&nbsp;*)</span><br/>
<div class="doc">TODO: remove redundancy *</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fptr_arg</span> = <span class="id">tfptr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">FPTR</span>; <span class="id">ss</span>. <span class="id">des_ifs_safe</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span> <span class="kwd">in</span> <span class="id">SIG</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">SIMSKE</span>. <span class="id">ss</span>. <span class="id">inv</span> <span class="id">INJECT</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">DOMAIN</span> <span class="id">b1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">folder</span>. <span class="tactic">eapply</span> (<span class="id"><a href="compcert.compcertm.GlobalenvsC.html#fsim_external_funct_inject">fsim_external_funct_inject</a></span> <span class="id">SIMGE</span>); <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ge">ge</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#skenv_inject_revive">SimMemInjC.skenv_inject_revive</a></span>; <span class="id">et</span>. <span class="tactic">apply</span> <span class="id">SIMSKENV</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">psimpl</span>. <span class="id">zsimpl</span>. <span class="id">des</span>. <span class="id">inv</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.WF">WF</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="kwd">in</span> <span class="id">EXTTGT</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span> <span class="kwd">in</span> <span class="id">EXTTGT</span>. <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id">WFPARAM</span> <span class="kwd">in</span> <span class="id">EXTTGT</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.Skeleton.html#Sk.get_csig">Sk.get_csig</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">ii</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="id">ss</span>; <span class="id">et</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="id">et</span>. <span class="id">u</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">clarify</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">rp</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">u</span>. <span class="id">ii</span>. <span class="id">des</span>; <span class="id">clarify</span>. <span class="id">specialize</span> (<span class="id">H0</span> <span class="id">x1</span>). <span class="id">zsimpl</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">rp</span>; [<span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>|..]; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Separation.html#sep_assoc">sep_assoc</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_comm">sep_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Separation.html#globalenv_inject_incr">globalenv_inject_incr</a></span> <span class="kwd">with</span> (<span class="id">j</span>:= <span class="id">sm0</span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id">MINJ</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_refl">inject_incr_refl</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#inject_separated_frozen">SimMemInj.inject_separated_frozen</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id">MINJ</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_refl">SimMemInj.frozen_refl</a></span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Separation.html#sep_assoc">sep_assoc</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_comm">sep_comm</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="id">bar</span>. <span class="tactic">move</span> <span class="id">SEP</span> <span class="tactic">at</span> <span class="id">bottom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">SEP</span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="id">sep_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Separation.html#m_invar">m_invar</a></span>; <span class="tactic">eauto</span>. <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unchanged_on_bot">Mem_unchanged_on_bot</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">NB</span>. <span class="id">refl</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">B</span> <span class="kwd">as</span> (<span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>). <span class="id">sep_split</span>; <span class="id">revgoals</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id">MWF1</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">MSRC</span>. <span class="tactic">rewrite</span> <span class="id">MINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">LE</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external">stack_contents_at_external</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm0</span>) <span class="id">stack</span> <span class="id">cs</span>' <span class="id">sg</span>).(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;2=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">stack_contents</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm0</span>) <span class="id">stack</span> <span class="id">cs</span>').(<span class="id"><a href="compcert.common.Separation.html#m_footprint">m_footprint</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external_m_footprint">stack_contents_at_external_m_footprint</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span> - <span class="id">STACKS</span> <span class="id">F</span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">F</span>; <span class="id">et</span>. <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external_m_footprint">stack_contents_at_external_m_footprint</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">MINJ</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external_intro">stack_contents_at_external_intro</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;after&nbsp;fsim&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>. <span class="id">inv</span> <span class="id">AFTERSRC</span>. <span class="id">inv</span> <span class="id">MATCH</span>; <span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCHST</span>; <span class="id">ss</span>. <span class="tactic">destruct</span> <span class="id">st_tgt0</span>; <span class="id">ss</span>. <span class="id">clarify</span>. <span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">MCOMPAT0</span>: <span class="id">sm0</span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>) = <span class="id">j</span>). { <span class="id">inv</span> <span class="id">MCOMPAT</span>; <span class="id">ss</span>. } <span class="id">clarify</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexpl</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#match_stacks_sp_ofs">match_stacks_sp_ofs</a></span> <span class="id">RSP</span>. <span class="id">inv</span> <span class="id">SIMRET</span>; <span class="id">ss</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm0</span>) <span class="id">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">HISTORY</span>. <span class="id">inv</span> <span class="id">MATCHARG</span>. <span class="id">ss</span>. <span class="id">clarify</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">m_tgt0</span>, &lt;&lt;<span class="id">UNFR</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id">sm_ret</span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span>) <span class="id">sp</span> 0 (4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg_arg</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#m_tgt0">m_tgt0</a></span>&gt;&gt;).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_suceeds">Mem_unfree_suceeds</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>; <span class="tactic">eauto</span>. <span class="id">etransitivity</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">MLE</span>. <span class="tactic">eapply</span> <span class="id">MLEAFTR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id">des</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (@<span class="id"><a href="compcert.compcertm.SimMemInjC.html#unfree_right">SimMemInjC.unfree_right</a></span> (<span class="id">SimMemInj.unlift</span>' <span class="id">sm_arg</span> <span class="id">sm_ret</span>)); <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">UNFR</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">HISTORY</span>. <span class="id">inv</span> <span class="id">CALLSRC</span>. <span class="id">inv</span> <span class="id">CALLTGT</span>. <span class="tactic">rewrite</span> <span class="id">RSP</span> <span class="kwd">in</span> *. <span class="id">clarify</span>. <span class="id">psimpl</span>. <span class="id">zsimpl</span>. <span class="id">inv</span> <span class="id">SIMARGS</span>; <span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">sg</span> = <span class="id">sg_arg</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">inv</span> <span class="id">SIMSKELINK</span>. <span class="id">ss</span>. <span class="id">r</span> <span class="kwd">in</span> <span class="id">SIMSKENV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#fsim_external_inject_eq">fsim_external_inject_eq</a></span>; <span class="id">et</span>. <span class="id">i</span>. <span class="tactic">subst</span> <span class="id">tfptr</span>. <span class="id">clarify</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">CTGT</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">NP</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_range_noperm">Mem_range_noperm</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm_arg</span>) <span class="id">blk</span> 0 (4 * <span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">sg_arg</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_free_noperm">Mem_free_noperm</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unchanged_noperm">Mem_unchanged_noperm</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">NP</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE0</span>. <span class="id">ii</span>. <span class="id">ss</span>. <span class="id">u</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#arguments_private">arguments_private</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sep_drop_tail3">sep_drop_tail3</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="id">psimpl</span>. <span class="id">spc</span> <span class="id">H1</span>. <span class="id">zsimpl</span>. <span class="id">inv</span> <span class="id">MATCHARG</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">INJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">u</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">des</span>; <span class="id">clarify</span>. <span class="tactic">eapply</span> <span class="id">H1</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_free_1">Mem.valid_block_free_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="id">bar</span>. <span class="id">inv</span> <span class="id">MLE</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">TGTPARENTEQ</span>. <span class="id">clear_until_bar</span>. <span class="id">r</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#match_stacks_sp_valid">match_stacks_sp_valid</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">SPVALID</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">des_safe</span>. <span class="id">clarify</span>. <span class="tactic">eapply</span> <span class="id">SPVALID1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id">i</span>; <span class="id">des</span>. <span class="id">ss</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">EXTTGT</span>: <span class="id">exists</span> <span class="id">skd</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id">tfptr</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#skd">skd</a></span> /\ <span class="id"><a href="compcert.compcertm.Skeleton.html#Sk.get_csig">Sk.get_csig</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#skd">skd</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">sg_arg</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">HISTORY</span>. <span class="id">ss</span>. <span class="id">inv</span> <span class="id">MATCHARG</span>. <span class="id">ss</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">ss</span>. <span class="id">inv</span> <span class="id">SIMSKELINK</span>. <span class="id">rr</span> <span class="kwd">in</span> <span class="id">SIMSKENV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplits</span>; <span class="id">et</span>. <span class="id">rpapply</span> <span class="id">SIG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">f_equal</span>. <span class="id">clarify</span>. <span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#fsim_external_inject_eq">fsim_external_inject_eq</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">clarify</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">sm1</span>; <span class="id">esplits</span>; <span class="tactic">eauto</span>; [|<span class="id">i</span>; <span class="tactic">split</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">inv</span> <span class="id">MWFAFTR</span>. <span class="id">ss</span>. <span class="id">etrans</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MLE</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">TGTPARENTEQNB</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">inv</span> <span class="id">SIMSKELINK</span>. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id">NBTGT</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span> - <span class="id">MLE2</span> <span class="id">GOOD</span> <span class="id">DUMMY</span> <span class="id">STACKS</span>. <span class="tactic">destruct</span> <span class="id">stack</span>; <span class="id">ss</span>; <span class="id">des_ifs</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">esplits</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; <span class="id">ss</span>. <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">GOOD</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_incr">val_inject_incr</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE2</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">DUMMY</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="id">exploit</span> <span class="id">GOOD</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_incr">val_inject_incr</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE2</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">WTST</span>: <span class="id"><a href="compcert.backend.Lineartyping.html#wt_state">wt_state</a></span> (<span class="id"><a href="compcert.backend.Linear.html#Returnstate">Linear.Returnstate</a></span> <span class="id">stack</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Locations.html#Locmap.setpair">Locmap.setpair</a></span> (<span class="id"><a href="compcert.x86.Conventions1.html#loc_result">loc_result</a></span> <span class="id">sg_arg</span>) (<span class="id"><a href="compcert.compcertm.ValuesC.html#typify">typify</a></span> <span class="id">v_src</span> (<span class="id"><a href="compcert.common.AST.html#proj_sig_res">proj_sig_res</a></span> <span class="id">sg_arg</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.LTL.html#undef_caller_save_regs">LTL.undef_caller_save_regs</a></span> <span class="id">ls_arg</span>)) (<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id">sm_ret</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span> - <span class="id">SOUND</span>. <span class="id">exploit</span> <span class="id">SOUND</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">Q</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">Q</span>.<br/>
<br/>
<div class="doc">directly copied from LineartypingC.v *</div>
<div class="doc">TODO: provide it in metatheory *</div>
<div class="doc">I tried it (just add "(SOUND: sound_state su0 m_init st_src1)" in MatchSimModSem.v - AFTERFSIM,
          but it has some difficulty.. *</div>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> (<span class="id"><a href="compcert.x86.Conventions1.html#loc_result_caller_save">loc_result_caller_save</a></span> <span class="id">sg_arg</span>); <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">RES</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> (<span class="id"><a href="compcert.compcertm.LocationsC.html#loc_result_one">loc_result_one</a></span> <span class="id">sg_arg</span>); <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">ONE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Locations.html#Locmap.setpair">Locmap.setpair</a></span>. <span class="id">des_ifs</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Lineartyping.html#wt_setreg">wt_setreg</a></span>; <span class="id">ss</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Lineartyping.html#wt_undef_caller_save_regs">wt_undef_caller_save_regs</a></span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.LineartypingC.html#mreg_type_any">mreg_type_any</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.LineartypingC.html#has_type_any">has_type_any</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="tactic">destruct</span> <span class="id">l</span>; <span class="id">ss</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Conventions.html#locmap_get_set_loc_result">locmap_get_set_loc_result</a></span>; <span class="id">ss</span>; <span class="id">des_ifs</span>; <span class="tactic">rewrite</span> <span class="id">AGCS</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Conventions.html#locmap_get_set_loc_result">locmap_get_set_loc_result</a></span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">WTST</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">STACKS0</span>: <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tge">tge</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm_ret</span>) (<span class="id"><a href="compcert.compcertm.LinearC.html#stackframes_after_external">stackframes_after_external</a></span> <span class="id">stack</span>) <span class="id">cs</span>' <span class="id">sg_arg</span> <span class="id">sm1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Stackingproof.html#match_stacks_change_meminj">match_stacks_change_meminj</a></span> <span class="kwd">with</span> (<span class="id">j</span>:= (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_trans">inject_incr_trans</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_trans">inject_incr_trans</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE</span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id">MINJ</span>. <span class="tactic">clear</span> - <span class="id">SIMSKENV</span> <span class="id">MLE2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">ss</span>. <span class="id">inv</span> <span class="id">MLE2</span>. <span class="tactic">clear</span> <span class="id">MAXSRC</span> <span class="id">MAXTGT</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm0</span> <span class="id">b1</span>) <span class="id">eqn</span>:<span class="id">T</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">p</span>. <span class="id">exploit</span> <span class="id">INCR</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">FROZEN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">NEW_IMPLIES_OUTSIDE</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">SIMSKELINK</span>. <span class="id">inv</span> <span class="id">INJECT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">DOMAIN</span>; <span class="id">et</span>. <span class="id">i</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id">MINJ</span>. <span class="tactic">clear</span> - <span class="id">SIMSKENV</span> <span class="id">MLE2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="id">ss</span>. <span class="id">inv</span> <span class="id">MLE2</span>. <span class="tactic">clear</span> <span class="id">MAXSRC</span> <span class="id">MAXTGT</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm0</span> <span class="id">b1</span>) <span class="id">eqn</span>:<span class="id">T</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">p</span>. <span class="id">exploit</span> <span class="id">INCR</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">FROZENLO</span>. <span class="id">exploit</span> <span class="id">NEW_IMPLIES_OUTSIDE</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">SIMSKELINK</span>. <span class="id">inv</span> <span class="id">INJECT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">NBTGT</span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Stackingproof.html#match_stacks_le">match_stacks_le</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">STACKS</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span> ? ? ? <span class="id">VALID0</span> <span class="id">MAP0</span>. <span class="tactic">rewrite</span> <span class="id">MINJ</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bar</span>. <span class="id">inv</span> <span class="id">MLE0</span>. <span class="id">ss</span>. <span class="id">bar</span>. <span class="id">inv</span> <span class="id">HISTORY</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">inv</span> <span class="id">MATCHARG</span>. <span class="id">ss</span>. <span class="id">clarify</span>. <span class="tactic">rewrite</span> <span class="id">INJ</span> <span class="kwd">in</span> *. <span class="id">clear_until_bar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm_arg</span> <span class="id">b</span>) <span class="id">eqn</span>:<span class="id">MAP1</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">p</span>; <span class="id">ss</span>. <span class="tactic">apply</span> <span class="id">INCR</span> <span class="kwd">in</span> <span class="id">MAP1</span>. <span class="id">clarify</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">FROZEN</span>. <span class="id">exploit</span> <span class="id">NEW_IMPLIES_OUTSIDE</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">VALID0</span> <span class="id">OUTSIDE_TGT</span> <span class="id">MLE</span>. <span class="id">inv</span> <span class="id">MLE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">TGTUNCHANGED</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span> <span class="id">b_src</span> <span class="id">b_tgt</span> <span class="id">delta</span> <span class="id">ofs</span> <span class="id">VALID0</span> <span class="id">MAP0</span> <span class="id">PERM</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">VALID1</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id">sm0</span>) <span class="id">b_src</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="tactic">rewrite</span> <span class="id">MSRC</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">MINJ</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">HISTORY</span>. <span class="id">inv</span> <span class="id">MATCHARG</span>; <span class="id">ss</span>. <span class="id">clarify</span>. <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">INJ</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">MLE0</span> <span class="id">VALID0</span> <span class="id">MAP0</span> <span class="id">PERM</span> <span class="id">MWF0</span> <span class="id">MWF3</span> <span class="id">NB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>. <span class="tactic">intro</span> <span class="id">OUTSRC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm_arg</span> <span class="id">b_src</span>) <span class="id">eqn</span>:<span class="id">T</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">p</span>; <span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_freeblocks">Mem.mi_freeblocks</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">MWF3</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MLE0</span>. <span class="id">inv</span> <span class="id">FROZEN</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">NEW_IMPLIES_OUTSIDE</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">NB</span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MLE2</span>. <span class="tactic">eapply</span> <span class="id">MAXSRC</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">bar</span>. <span class="id">inv</span> <span class="id">STACKS</span>; <span class="id">econs</span>; <span class="id">et</span>. <span class="id">inv</span> <span class="id">AGL</span>. <span class="id">econs</span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Stackingproof.html#match_states_return">match_states_return</a></span> <span class="kwd">with</span> (<span class="id">j</span>:= <span class="id">sm_ret</span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Stackingproof.html#agree_regs_set_pair">agree_regs_set_pair</a></span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.ValuesC.html#typify">typify</a></span>. <span class="id">des_ifs</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;TODO:&nbsp;Remove&nbsp;Mach.regset_after_external&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id"><a href="compcert.backend.Mach.html#regset_after_external">regset_after_external</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.backend.Mach.html#undef_caller_save_regs">undef_caller_save_regs</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Stackingproof.html#agree_regs_undef_caller_save_regs">agree_regs_undef_caller_save_regs</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Stackingproof.html#agree_regs_inject_incr">agree_regs_inject_incr</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_trans">inject_incr_trans</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE0</span>. <span class="id">ss</span>. <span class="tactic">apply</span> <span class="id">MLE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">hexploit</span> (<span class="id"><a href="compcert.compcertm.LinearC.html#parent_locset_after_external">parent_locset_after_external</a></span> <span class="id">stack</span>); <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>; <span class="id">clarify</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">AFTER</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#agree_callee_save_regs_undef_outgoing_slots">agree_callee_save_regs_undef_outgoing_slots</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Stackingproof.html#agree_callee_save_regs_set_result">agree_callee_save_regs_set_result</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Stackingproof.html#agree_callee_save_regs_after">agree_callee_save_regs_after</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">bar</span>. <span class="tactic">move</span> <span class="id">HISTORY</span> <span class="tactic">at</span> <span class="id">bottom</span>. <span class="id">inv</span> <span class="id">HISTORY</span>. <span class="id">inv</span> <span class="id">MATCHARG</span>. <span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">sm0</span> <span class="id">into</span> <span class="id">sm_at</span>. <span class="tactic">rename</span> <span class="id">sm1</span> <span class="id">into</span> <span class="id">sm_after</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">RSP0</span> <span class="kwd">in</span> *. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexpl</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_nextblock_unfree">Mem_nextblock_unfree</a></span> <span class="id">NB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Separation.html#sep_assoc">sep_assoc</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_comm">sep_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Separation.html#sep_assoc">sep_assoc</a></span> <span class="kwd">in</span> <span class="id">SEP0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_comm">sep_comm</a></span> <span class="kwd">in</span> <span class="id">SEP0</span>. <span class="tactic">destruct</span> <span class="id">SEP0</span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sep_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#globalenv_inject_incr_strong">globalenv_inject_incr_strong</a></span> <span class="kwd">with</span> (<span class="id">j</span>:= <span class="id">sm_arg</span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>)); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">MLE0</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#inject_separated_frozen">SimMemInj.inject_separated_frozen</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MLE0</span>. <span class="id">ss</span>. <span class="id">inv</span> <span class="id">MWF2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_shortened">SimMemInj.frozen_shortened</a></span>; <span class="tactic">eauto</span>; <span class="id">refl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">rewrite</span> &lt;- <span class="id">NB0</span>. <span class="id">inv</span> <span class="id">MLE0</span>; <span class="id">ss</span>. <span class="tactic">clear</span> - <span class="id">TGTUNCHANGED</span>. <span class="id">change</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.le">Pos.le</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_comm">sep_comm</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Separation.html#sep_comm">sep_comm</a></span> <span class="kwd">in</span> <span class="id">B</span>. <span class="tactic">destruct</span> <span class="id">B</span> <span class="kwd">as</span> (<span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sep_split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="id">rp</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">MWF2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">hexploit</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#minjection_disjoint_footprint_private">SimMemInjC.minjection_disjoint_footprint_private</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">PRIV0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#minjection_private_disjoint_footprint">SimMemInjC.minjection_private_disjoint_footprint</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span> <span class="id">sm_arg</span> &lt;2= <span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">SimMemInj.tgt_external</a></span> <span class="id">sm_ret</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">clear</span> - <span class="id">MLE0</span>. <span class="id">inv</span> <span class="id">MLE0</span>. <span class="id">ss</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">TGTPARENTEQ</span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MWF</span>. <span class="tactic">do</span> 3 (<span class="id">etrans</span>; <span class="tactic">try</span> <span class="id">eassumption</span>; <span class="tactic">eauto</span>). <span class="id">etrans</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external_m_footprint">stack_contents_at_external_m_footprint</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.compcertm.StackingproofC.html#stackframes_after_external_footprint">stackframes_after_external_footprint</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_footprint_irr">stack_contents_footprint_irr</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">STEP0</span>: <span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm_ret</span> |= <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external">stack_contents_at_external</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm_arg</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cs</span> <span class="id">cs</span>'0 <span class="id">sig</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Separation.html#m_invar">m_invar</a></span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">MLE0</span>. <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.SimMemInjC.html#minjection_disjoint_footprint_private">SimMemInjC.minjection_disjoint_footprint_private</a></span>; <span class="tactic">eauto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">STEP1</span>: <span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span> <span class="id">sm_ret</span> |= <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external">stack_contents_at_external</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span> <span class="id">sm_ret</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cs</span> <span class="id">cs</span>'0 <span class="id">sig</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MLE0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external_change_meminj">stack_contents_at_external_change_meminj</a></span>; <span class="tactic">eauto</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#stack_contents_at_external_spec_elim">stack_contents_at_external_spec_elim</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;final&nbsp;fsim&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">FINALSRC</span>. <span class="id">inv</span> <span class="id">MATCH</span>. <span class="id">inv</span> <span class="id">MATCHST</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#match_stacks_sp_ofs">match_stacks_sp_ofs</a></span>; <span class="tactic">eauto</span>; <span class="tactic">intro</span> <span class="id">RSP</span>; <span class="id">des_safe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;ss;&nbsp;clarify.&nbsp;des_ifs;&nbsp;sep_simpl_tac;&nbsp;des;&nbsp;ss.&nbsp;Undo&nbsp;1.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;des_ifs;&nbsp;sep_simpl_tac;&nbsp;des_safe;&nbsp;ss.&nbsp;Undo&nbsp;1.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(***&nbsp;TODO:&nbsp;Fix&nbsp;des_safe&nbsp;with&nbsp;check_safe!!&nbsp;***)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>; <span class="id">clarify</span>. <span class="id">des</span>. <span class="id">des_ifs</span>; <span class="id">sep_simpl_tac</span>; <span class="id">des</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;unsguard&nbsp;AGLOCS.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">st_tgt0</span>; <span class="id">ss</span>. <span class="id">clarify</span>. <span class="id">ss</span>. <span class="id">clarify</span>. <span class="id">ss</span>. <span class="id">inv</span> <span class="id">STACKS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> (<span class="id"><a href="compcert.compcertm.LocationsC.html#loc_result_one">loc_result_one</a></span> <span class="id">init_sg</span>); <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des_safe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.backend.Stackingproof.html#stack_contents_args">stack_contents_args</a></span> <span class="id"><a href="compcert.backend.Stackingproof.html#dummy_frame_contents">dummy_frame_contents</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Stackingproof.html#dummy_frame_contents">dummy_frame_contents</a></span> <span class="kwd">in</span> *. <span class="id">psimpl</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_free">Mem.range_perm_free</a></span> <span class="id">sm0</span>.(<span class="id"><a href="compcert.common.SimMemInj.html#tgt">SimMemInj.tgt</a></span>) <span class="id">sp</span> 0 (4 * (<span class="id"><a href="compcert.x86.Conventions1.html#size_arguments">size_arguments</a></span> <span class="id">init_sg</span>))); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="tactic">clear</span> - <span class="id">SEP</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Separation.html#sep_pick1">sep_pick1</a></span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="id">rr</span> <span class="kwd">in</span> <span class="id">SEP</span>. <span class="id">des</span>. <span class="id">zsimpl</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">sm_tgt1</span> &amp; <span class="id">FREETGT</span>).<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">j</span> = <span class="id">sm0</span>.(<span class="id"><a href="compcert.common.SimMemInj.html#inj">SimMemInj.inj</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MCOMPAT</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clarify</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#free_right">SimMemInj.free_right</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="tactic">clear</span> - <span class="id">SEP</span> <span class="id">SPVALID</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.SeparationC.html#sep_drop_tail3">sep_drop_tail3</a></span> <span class="kwd">in</span> <span class="id">SEP</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">SEP</span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">DISJ</span>). <span class="id">ss</span>. <span class="id">des</span>. <span class="id">zsimpl</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">rr</span> <span class="kwd">in</span> <span class="id">DISJ</span>. <span class="id">rr</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">DISJ</span> <span class="id">sp</span> <span class="id">ofs</span>). <span class="id">ss</span>. <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">DISJ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des_safe</span>. <span class="tactic">rename</span> <span class="id">sm1</span> <span class="id">into</span> <span class="id">sm_ret</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> <span class="id">sm_ret</span>, (<span class="id"><a href="compcert.compcertm.ModSem.html#Retv.mk">Retv.mk</a></span> <span class="id">_</span> <span class="id">_</span>). <span class="id">esplits</span>; <span class="tactic">eauto</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">ONE</span>. <span class="id">ss</span>. <span class="id">specialize</span> (<span class="id">AGREGS</span> <span class="id">mr_res</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_incr">val_inject_incr</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">ii</span>. <span class="id">specialize</span> (<span class="id">AGCSREGS</span> <span class="id">mr</span>). <span class="id">ss</span>. <span class="id">specialize</span> (<span class="id">GOOD</span> <span class="id">mr</span> <span class="id">H</span>). <span class="id">des_safe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">AGCSREGS</span> <span class="kwd">in</span> *; <span class="id">ss</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#Val.eq">Val.eq</a></span> (<span class="id">ls0</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">mr</span>)) <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">GOOD</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">AGREGS</span> <span class="id">mr</span>). <span class="tactic">clear</span> - <span class="id">GOOD0</span> <span class="id">AGREGS</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">GOOD0</span>; <span class="id">inv</span> <span class="id">AGREGS</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;- <span class="id">H</span> <span class="kwd">in</span> *; <span class="tactic">try</span> <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span> <span class="kwd">in</span> *; <span class="id">ss</span>; <span class="id">clarify</span>.<br/>
<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;step&nbsp;lemma&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>; <span class="id">i</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.LinearC.html#modsem_receptive">LinearC.modsem_receptive</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCH</span>. <span class="id">ii</span>. <span class="id">hexploit</span> (@<span class="id"><a href="compcert.backend.Stackingproof.html#transf_step_correct">transf_step_correct</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.prog">prog</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.rao">rao</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.skenv_link">skenv_link</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.ge">ge</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.tge">tge</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#make_match_genvs">make_match_genvs</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">SIMSKENV</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">STEPSRC</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">hexploit1</span> <span class="id">SOUND</span>; <span class="id">ss</span>. <span class="id">des</span>. <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="tactic">destruct</span> <span class="id">st_tgt0</span>. <span class="id">ss</span>. <span class="id">folder</span>. <span class="id">r</span> <span class="kwd">in</span> <span class="id">STEPSRC</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.compcertm.LiftDummy.html#lift_plus">lift_plus</a></span> (<span class="id"><a href="compcert.backend.Mach.html#step">Mach.step</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM.rao">rao</a></span>) (<span class="kwd">fun</span> <span class="id">st</span> =&gt; <span class="id"><a href="compcert.compcertm.MachC.html#get_stack">get_stack</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#st">st</a></span> &lt;&gt; []) <span class="id"><a href="compcert.compcertm.StackingproofC.html#strong_wf_tgt">strong_wf_tgt</a></span>); <span class="id">ss</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intros</span> ? <span class="id">X</span> <span class="id">Y</span>. <span class="id">rr</span> <span class="kwd">in</span> <span class="id">X</span>. <span class="id">des</span>. <span class="tactic">rewrite</span> <span class="id">Y</span> <span class="kwd">in</span> *. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">folder</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#strong_wf_tgt">strong_wf_tgt</a></span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">inv</span> <span class="id">HSTEP</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">des_ifs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">des_ifs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>. <span class="id">right</span>. <span class="id">ii</span>. <span class="id">inv</span> <span class="id">HSTEP0</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#strong_wf_tgt">strong_wf_tgt</a></span> <span class="kwd">in</span> *; <span class="id">des</span>. <span class="id">inv</span> <span class="id">HSTEP</span>; <span class="tactic">try</span> <span class="id">inv</span> <span class="id">STACKS</span>; <span class="id">ss</span>; <span class="id">clarify</span>; <span class="id">et</span>; <span class="id">des_ifs</span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">intro</span> <span class="id">T</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">ss</span>; <span class="id">clarify</span>; <span class="tactic">try</span> <span class="id">inv</span> <span class="id">STACKS</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.ModSemProps.html#spread_dplus">spread_dplus</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MachC.html#modsem_determinate">modsem_determinate</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">s</span>. <span class="id">folder</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MachC.html#lift_plus">MachC.lift_plus</a></span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">econs</span>; <span class="id">ss</span>; <span class="id">et</span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">MCOMPAT</span>; <span class="id">ss</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.LinearC.html#step_preserves_last_option">LinearC.step_preserves_last_option</a></span>; <span class="id">et</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">GOOD</span>; <span class="id">et</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_incr">val_inject_incr</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MLE</span>; <span class="id">et</span>. }<br/>
<br/>
<span class="id">Unshelve</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMODSEM">SIMMODSEM</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SIMMOD">SIMMOD</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SIMMOD.prog">prog</a></span>: <span class="id"><a href="compcert.backend.Linear.html#program">Linear.program</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SIMMOD.tprog">tprog</a></span>: <span class="id"><a href="compcert.backend.Mach.html#program">Mach.program</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SIMMOD.rao">rao</a></span>: <span class="id"><a href="compcert.backend.Mach.html#function">function</a></span> -&gt; <span class="id"><a href="compcert.backend.Mach.html#code">code</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#ptrofs">ptrofs</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMMOD.return_address_offset_exists">return_address_offset_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">sg</span> <span class="id">ros</span> <span class="id">c</span> <span class="id">id</span> (<span class="id">FUNCT</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.compcertm.StackingproofC.html#id">id</a></span>, <span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span>)) (<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMOD.tprog">tprog</a></span>)),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#is_tail">is_tail</a></span> (<span class="id"><a href="compcert.backend.Mach.html#Mcall">Mcall</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sg">sg</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ros">ros</a></span> :: <span class="id"><a href="compcert.compcertm.StackingproofC.html#c">c</a></span>) (<span class="id"><a href="compcert.backend.Mach.html#fn_code">fn_code</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMOD.rao">rao</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#c">c</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMMOD.return_address_offset_deterministic">return_address_offset_deterministic</a></span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">c</span> <span class="id">ofs</span> <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMOD.rao">rao</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#c">c</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMOD.rao">rao</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#c">c</a></span> <span class="id">ofs</span>' -&gt; <span class="id"><a href="compcert.compcertm.StackingproofC.html#ofs">ofs</a></span> = <span class="id">ofs</span>'.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SIMMOD.TRANSF">TRANSF</a></span>: <span class="id"><a href="compcert.backend.Stackingproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMOD.prog">prog</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMOD.tprog">tprog</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="mp">mp</a></span>: <span class="id"><a href="compcert.compcertm.SimMod.html#ModPair.t">ModPair.t</a></span> := <span class="id"><a href="compcert.compcertm.SimSymbId.html#mk_mp">SimSymbId.mk_mp</a></span> (<span class="id"><a href="compcert.compcertm.LinearC.html#module">LinearC.module</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMOD.prog">prog</a></span>) (<span class="id"><a href="compcert.compcertm.MachC.html#module">MachC.module</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMOD.tprog">tprog</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMOD.rao">rao</a></span>).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="sim_mod">sim_mod</a></span>: <span class="id"><a href="compcert.compcertm.SimMod.html#ModPair.sim">ModPair.sim</a></span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#mp">mp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7444')">Proof.</div>
<div class="proofscript" id="proof7444">
&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="id">r</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.Skeleton.html#Sk.match_program_eq">Sk.match_program_eq</a></span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">destruct</span> <span class="id">f1</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">clarify</span>. <span class="id">right</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Errors.html#bind">bind</a></span> <span class="kwd">in</span> <span class="id">MATCH</span>. <span class="id">des_ifs</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#transf_function_sig">transf_function_sig</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">clarify</span>. <span class="id">left</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">inv</span> <span class="id">SIMSKENVLINK</span>. <span class="id">inv</span> <span class="id">SIMSKENV</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#sim_modsem">sim_modsem</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="id">ss</span>. <span class="id">uge0</span>. <span class="id">des_ifs</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.Skeleton.html#SkEnv.revive">SkEnv.revive</a></span> <span class="kwd">in</span> *. <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#Genv_map_defs_def">Genv_map_defs_def</a></span> <span class="kwd">in</span> <span class="id">Heq</span>. <span class="id">des</span>. <span class="id">ss</span>. <span class="id">gesimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.GlobalenvsC.html#Genv_map_defs_def">Genv_map_defs_def</a></span> <span class="kwd">in</span> <span class="id">FIND</span>. <span class="id">des</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_bind">o_bind</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_join">o_join</a></span>, <span class="id"><a href="compcert.compcertm.CoqlibC.html#o_map">o_map</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="id">ss</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMOD.return_address_offset_exists">return_address_offset_exists</a></span>; <span class="id">et</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap</a></span>; <span class="id">et</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.StackingproofC.html#SIMMOD">SIMMOD</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
