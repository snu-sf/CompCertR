
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Fcore_digits</title>
<meta name="description" content="Documentation of Coq module Fcore_digits" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Fcore_digits</h1>
<div class="coq">
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith.html">ZArith</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html">Zquot</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html">Fcore_Zaux</a></span>.<br/>
<br/>
<div class="doc">Number of bits (radix 2) of a positive integer.
It serves as an upper bound on the number of digits to ensure termination.
</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="digits2_Pnat">digits2_Pnat</a></span> (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="digits2_Pnat_correct">digits2_Pnat_correct</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">d</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat">Zpower_nat</a></span> 2 <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#d">d</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat">Zpower_nat</a></span> 2 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#d">d</a></span>))%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5205')">Proof.</div>
<div class="proofscript" id="proof5205">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">d</span>. <span class="tactic">unfold</span> <span class="id">d</span>. <span class="tactic">clear</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hp</span>: <span class="kwd">forall</span> <span class="id">m</span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat">Zpower_nat</a></span> 2 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span>) = 2 * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat">Zpower_nat</a></span> 2 <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span>)%<span class="id">Z</span>) <span class="tactic">by</span> <span class="id">easy</span>.<br/>
<span class="tactic">induction</span> <span class="id">n</span> ; <span class="tactic">simpl</span> <span class="id">digits2_Pnat</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zpos_xI">Zpos_xI</a></span>, 2!<span class="id">Hp</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zpos_xO">Zpos_xO</a></span> <span class="id">n</span>), 2!<span class="id">Hp</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fcore_digits">Fcore_digits</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcore_digits.beta">beta</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix">radix</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Zdigit">Zdigit</a></span> <span class="id">n</span> <span class="id">k</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_lt">Zdigit_lt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> &lt; 0)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5206')">Proof.</div>
<div class="proofscript" id="proof5206">
<span class="tactic">intros</span> <span class="id">n</span> [|<span class="id">k</span>|<span class="id">k</span>] <span class="id">Hk</span> ; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="id">now</span> <span class="tactic">case</span> <span class="id">n</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_0">Zdigit_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5207')">Proof.</div>
<div class="proofscript" id="proof5207">
<span class="tactic">intros</span> <span class="id">k</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_0_l">Zquot_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_0_l">Zrem_0_l</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_opp">Zdigit_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp">Zopp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5208')">Proof.</div>
<div class="proofscript" id="proof5208">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_opp_l">Zquot_opp_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_opp_l">Zrem_opp_l</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_ge_Zpower_pos">Zdigit_ge_Zpower_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5209')">Proof.</div>
<div class="proofscript" id="proof5209">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">n</span> <span class="id">Hn</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_small">Zquot_small</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_0_l">Zrem_0_l</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id">Hn</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_trans">Zlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hn</span>).<br/>
<span class="tactic">replace</span> <span class="id">k</span> <span class="kwd">with</span> (<span class="id">e</span> + (<span class="id">k</span> - <span class="id">e</span>))%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">e</span>)) <span class="tactic">at</span> 1.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat_l">Zmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span> 0).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_minus_le_0">Zle_minus_le_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_trans">Zle_lt_trans</a></span> <span class="kwd">with</span> <span class="id">n</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_trans">Zle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hn</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hn</span>)).<br/>
<span class="tactic">clear</span>.<br/>
<span class="id">now</span> <span class="tactic">destruct</span> <span class="id">e</span> <span class="kwd">as</span> [|<span class="id">e</span>|<span class="id">e</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_minus_le_0">Zle_minus_le_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_ge_Zpower">Zdigit_ge_Zpower</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5210')">Proof.</div>
<div class="proofscript" id="proof5210">
<span class="tactic">intros</span> <span class="id">e</span> [|<span class="id">n</span>|<span class="id">n</span>] <span class="id">Hn</span> <span class="id">k</span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_ge_Zpower_pos">Zdigit_ge_Zpower_pos</a></span>.<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">intros</span> <span class="id">He</span>.<br/>
<span class="id">change</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zneg">Zneg</a></span> <span class="id">n</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp">Zopp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">n</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_opp">Zdigit_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_ge_Zpower_pos">Zdigit_ge_Zpower_pos</a></span> <span class="kwd">with</span> (2 := <span class="id">He</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_0">Zopp_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_not_0_pos">Zdigit_not_0_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">n</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> + 1))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5211')">Proof.</div>
<div class="proofscript" id="proof5211">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">n</span> <span class="id">He</span> (<span class="id">Hn1</span>,<span class="id">Hn2</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#ZOdiv_mod_mult">ZOdiv_mod_mult</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_small">Zrem_small</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_not_lt">Zle_not_lt</a></span> <span class="kwd">with</span> (1 := <span class="id">Hn1</span>).<br/>
<span class="tactic">rewrite</span> (<span class="id">Z.quot_rem</span>' <span class="id">n</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">e</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_0_r">Zmult_0_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_0_l">Zplus_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_lt_pos_pos">Zrem_lt_pos_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">Hn1</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">Hn1</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">e</span> * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ (<span class="id">e</span> + 1))%<span class="id">Z</span>.<br/>
<span class="tactic">exact</span> <span class="id">Hn2</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>) <span class="tactic">at</span> 3.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id">e</span> 1).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_not_0">Zdigit_not_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">n</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> + 1))%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5212')">Proof.</div>
<div class="proofscript" id="proof5212">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">n</span> <span class="id">He</span> <span class="id">Hn</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">n</span>) <span class="kwd">as</span> [<span class="id">Hn</span>'|<span class="id">Hn</span>'].<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span> <span class="id">_</span> <span class="id">Hn</span>') <span class="kwd">in</span> <span class="id">Hn</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_not_0_pos">Zdigit_not_0_pos</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_non_eq">Zabs_non_eq</a></span> <span class="id">n</span>) <span class="kwd">in</span> <span class="id">Hn</span> <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_not_0_pos">Zdigit_not_0_pos</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span> <span class="id">Hn</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_opp">Zdigit_opp</a></span>, <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_mul_pow">Zdigit_mul_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (0 &lt;= <span class="id">k</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id">k</span>') <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> - <span class="id">k</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5213')">Proof.</div>
<div class="proofscript" id="proof5213">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span>'.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">k</span>' <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="id">revert</span> <span class="id">k</span> <span class="id">H</span>.<br/>
<span class="tactic">pattern</span> <span class="id">k</span>' ; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Wf_Z.html#Zlt_0_ind">Zlt_0_ind</a></span> <span class="kwd">with</span> (2 := <span class="id">Hk</span>').<br/>
<span class="tactic">clear</span> <span class="id">k</span>' <span class="id">Hk</span>'.<br/>
<span class="tactic">intros</span> <span class="id">k</span>' <span class="id">IHk</span>' <span class="id">Hk</span>' <span class="id">k</span> <span class="id">H</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">apply</span> (<span class="tactic">f_equal</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>)).<br/>
<span class="tactic">pattern</span> <span class="id">k</span> <span class="tactic">at</span> 1 ; <span class="tactic">replace</span> <span class="id">k</span> <span class="kwd">with</span> (<span class="id">k</span> - <span class="id">k</span>' + <span class="id">k</span>')%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="kwd">with</span> (2 := <span class="id">Hk</span>').<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_mult_cancel_r">Zquot_mult_cancel_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_minus_le_0">Zle_minus_le_0</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">H0</span>|<span class="id">H0</span>].<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_lt">Zdigit_lt</a></span> <span class="id">n</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">replace</span> <span class="id">k</span>' <span class="kwd">with</span> (<span class="id">k</span>' - <span class="id">k</span> + <span class="id">k</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="kwd">with</span> (2 := <span class="id">H0</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_assoc">Zmult_assoc</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Z_quot_mult">Z_quot_mult</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id">k</span>' - <span class="id">k</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">k</span>' - <span class="id">k</span> - 1 + 1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_exp">Zpower_exp</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_assoc">Zmult_assoc</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> 1) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> * 1)%<span class="id">Z</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Z_rem_mult">Z_rem_mult</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_minus_le_0">Zle_minus_le_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_lt">Zdigit_lt</a></span> <span class="kwd">with</span> (1 := <span class="id">H0</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_lt">Zdigit_lt</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_div_pow">Zdigit_div_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt; (0 &lt;= <span class="id">k</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id">k</span>')) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> + <span class="id">k</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5214')">Proof.</div>
<div class="proofscript" id="proof5214">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span> <span class="id">Hk</span>'.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_Zquot">Zquot_Zquot</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_mod_pow">Zdigit_mod_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> &lt; <span class="id">k</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id">k</span>')) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5215')">Proof.</div>
<div class="proofscript" id="proof5215">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- 2!<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#ZOdiv_mod_mult">ZOdiv_mod_mult</a></span>.<br/>
<span class="tactic">apply</span> (<span class="tactic">f_equal</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">k</span>))).<br/>
<span class="tactic">replace</span> <span class="id">k</span>' <span class="kwd">with</span> (<span class="id">k</span> + 1 + (<span class="id">k</span>' - (<span class="id">k</span> + 1)))%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_exp">Zpower_exp</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="tactic">by</span> <span class="id">easy</span>.<br/>
<span class="id">change</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> 1) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> * 1)%<span class="id">Z</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#ZOmod_mod_mult">ZOmod_mod_mult</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_lt">Zdigit_lt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_mod_pow_out">Zdigit_mod_pow_out</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (0 &lt;= <span class="id">k</span>' &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id">k</span>')) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5216')">Proof.</div>
<div class="proofscript" id="proof5216">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#ZOdiv_small_abs">ZOdiv_small_abs</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_0_l">Zrem_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_trans">Zlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id">k</span>').<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">k</span>')) <span class="tactic">at</span> 2 <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_lt">Zrem_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_le">Zpower_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Zsum_digit">Zsum_digit</a></span> <span class="id">f</span> <span class="id">k</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">k</span> =&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsum_digit">Zsum_digit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#f">f</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#f">f</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>) * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>))%<span class="id">Z</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zsum_digit_digit">Zsum_digit_digit</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsum_digit">Zsum_digit</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5217')">Proof.</div>
<div class="proofscript" id="proof5217">
<span class="tactic">intros</span> <span class="id">n</span>.<br/>
<span class="tactic">induction</span> <span class="id">k</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_1_r">Zrem_1_r</a></span>.<br/>
<span class="tactic">simpl</span> <span class="id">Zsum_digit</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">IHk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#ZOdiv_mod_mult">ZOdiv_mod_mult</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#ZOmod_mod_mult">ZOmod_mod_mult</a></span> <span class="id">n</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">k</span> * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">k</span>))).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Z.quot_rem</span>'.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#inj_S">inj_S</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>) <span class="tactic">at</span> 3.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="id">easy</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zpower_gt_id">Zpower_gt_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5218')">Proof.</div>
<div class="proofscript" id="proof5218">
<span class="tactic">intros</span> [|<span class="id">n</span>|<span class="id">n</span>] ; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_pos_nat">Zpower_pos_nat</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Zpos_eq_Z_of_nat_o_nat_of_P">Zpos_eq_Z_of_nat_o_nat_of_P</a></span>.<br/>
<span class="tactic">induction</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#nat_of_P">nat_of_P</a></span> <span class="id">n</span>).<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#inj_S">inj_S</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat">Zpower_nat</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n0</span>)) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat">Zpower_nat</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id">n0</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Zsucc</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_trans">Zlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> * (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">n0</span> + 1))%<span class="id">Z</span>.<br/>
<span class="tactic">clear</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_0_minus_lt">Zlt_0_minus_lt</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> * (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">n0</span> + 1) - (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">n0</span> + 1))%<span class="id">Z</span> <span class="kwd">with</span> ((<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> - 1) * (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">n0</span> + 1))%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_lt_0_compat">Zmult_lt_0_compat</a></span>.<br/>
<span class="tactic">cut</span> (2 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>)%<span class="id">Z</span>. <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_succ">Zle_lt_succ</a></span> 0).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat_l">Zmult_le_compat_l</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> 2%<span class="id">Z</span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_ext">Zdigit_ext</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n1</span> <span class="id">n2</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n1">n1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n2">n2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n1">n1</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n2">n2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5219')">Proof.</div>
<div class="proofscript" id="proof5219">
<span class="tactic">intros</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#ZOmod_small_abs">ZOmod_small_abs</a></span> <span class="id">n1</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmax">Zmax</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n2</span>)))).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#ZOmod_small_abs">ZOmod_small_abs</a></span> <span class="id">n2</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmax">Zmax</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n2</span>)))) <span class="tactic">at</span> 2.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmax">Zmax</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n2</span>)) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs_nat">Zabs_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmax">Zmax</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n2</span>)))).<br/>
<span class="tactic">rewrite</span> &lt;- 2!<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsum_digit_digit">Zsum_digit_digit</a></span>.<br/>
<span class="tactic">induction</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs_nat">Zabs_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmax">Zmax</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n1</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n2</span>))).<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>, <span class="id">IHn</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#inj_Zabs_nat">inj_Zabs_nat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n1</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_pos">Zabs_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zle_max_l">Zle_max_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_trans">Zlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n2</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zpower_gt_id">Zpower_gt_id</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_le">Zpower_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zle_max_r">Zle_max_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_trans">Zlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n1</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zpower_gt_id">Zpower_gt_id</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_le">Zpower_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmax.html#Zle_max_l">Zle_max_l</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ZOmod_plus_pow_digit">ZOmod_plus_pow_digit</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span> <span class="id">n</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>) = (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>) + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>))%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5220')">Proof.</div>
<div class="proofscript" id="proof5220">
<span class="tactic">intros</span> <span class="id">u</span> <span class="id">v</span> <span class="id">n</span> <span class="id">Huv</span> <span class="id">Hd</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">n</span>) <span class="kwd">as</span> [<span class="id">Hn</span>|<span class="id">Hn</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zplus_rem">Zplus_rem</a></span> <span class="kwd">with</span> (1 := <span class="id">Huv</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#ZOmod_small_abs">ZOmod_small_abs</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span> <span class="id">n</span>).<br/>
<span class="tactic">pattern</span> <span class="id">n</span> <span class="tactic">at</span> -2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span> <span class="kwd">with</span> (1 := <span class="id">Hn</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#inj_Zabs_nat">inj_Zabs_nat</a></span> <span class="id">n</span>).<br/>
<span class="tactic">induction</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs_nat">Zabs_nat</a></span> <span class="id">n</span>) <span class="kwd">as</span> [|<span class="id">p</span> <span class="id">IHp</span>].<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_1_r">Zrem_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- 2!<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsum_digit_digit">Zsum_digit_digit</a></span>.<br/>
<span class="tactic">simpl</span> <span class="id">Zsum_digit</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#inj_S">inj_S</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Hn</span>'.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsum_digit">Zsum_digit</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id">u</span>) <span class="id">p</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id">u</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>) * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span> +<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsum_digit">Zsum_digit</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id">v</span>) <span class="id">p</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id">v</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>) * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>))%<span class="id">Z</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsum_digit">Zsum_digit</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id">u</span>) <span class="id">p</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsum_digit">Zsum_digit</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id">v</span>) <span class="id">p</span> +<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id">u</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>) + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id">v</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>)) * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_trans">Zle_lt_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_triangle">Zabs_triangle</a></span> <span class="id">_</span> <span class="id">_</span>)).<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zsucc">Zsucc</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>))%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span> + (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> - 1) * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_lt_le_compat">Zplus_lt_le_compat</a></span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsum_digit_digit">Zsum_digit_digit</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">IHp</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_succ_le">Zle_succ_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_Zmult">Zabs_Zmult</a></span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>)) <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat_r">Zmult_le_compat_r</a></span>. 2: <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_succ_le">Zlt_succ_le</a></span>.<br/>
<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span>) &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zsucc">Zsucc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> -  1))%<span class="id">Z</span>.<br/>
<span class="tactic">clear</span> ; <span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span>.<br/>
<span class="tactic">assert</span> (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_trans">Zlt_le_trans</a></span> <span class="kwd">with</span> 2%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zsucc">Zsucc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> - 1)) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_lt">Zrem_lt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zsucc_pred">Zsucc_pred</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="tactic">assert</span> (0 &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span> &lt; <span class="id">n</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zgt_lt">Zgt_lt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_succ_gt">Zle_succ_gt</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id">Hd</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> <span class="id">p</span>) <span class="id">H0</span>) <span class="kwd">as</span> [<span class="id">K</span>|<span class="id">K</span>] ; <span class="tactic">rewrite</span> <span class="id">K</span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_0_r">Zplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Zsucc</a></span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> * 1)%<span class="id">Z</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">destruct</span> <span class="id">n</span> <span class="kwd">as</span> [|<span class="id">n</span>|<span class="id">n</span>] ; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 3!<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_0_r">Zrem_0_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ZOdiv_plus_pow_digit">ZOdiv_plus_pow_digit</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span> <span class="id">n</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>) = (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>) + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>))%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5221')">Proof.</div>
<div class="proofscript" id="proof5221">
<span class="tactic">intros</span> <span class="id">u</span> <span class="id">v</span> <span class="id">n</span> <span class="id">Huv</span> <span class="id">Hd</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_0_r">Zplus_0_r</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id">u</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id">n</span>) + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id">v</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id">n</span>))).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#ZOdiv_plus">ZOdiv_plus</a></span> <span class="kwd">with</span> (1 := <span class="id">Huv</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#ZOmod_plus_pow_digit">ZOmod_plus_pow_digit</a></span> <span class="tactic">by</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">n</span>) <span class="kwd">as</span> [<span class="id">Hn</span>|<span class="id">Hn</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#ZOdiv_small_abs">ZOdiv_small_abs</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_lt">Zrem_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">clear</span> -<span class="id">Hn</span>.<br/>
<span class="tactic">destruct</span> <span class="id">n</span> <span class="kwd">as</span> [|<span class="id">n</span>|<span class="id">n</span>] ; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_0_r">Zquot_0_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_plus">Zdigit_plus</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">u</span> <span class="id">v</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">k</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> \/ <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#u">u</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#v">v</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5222')">Proof.</div>
<div class="proofscript" id="proof5222">
<span class="tactic">intros</span> <span class="id">u</span> <span class="id">v</span> <span class="id">Huv</span> <span class="id">Hd</span> <span class="id">k</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">Hk</span>|<span class="id">Hk</span>].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#ZOdiv_plus_pow_digit">ZOdiv_plus_pow_digit</a></span> <span class="kwd">with</span> (1 := <span class="id">Huv</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>) <span class="tactic">at</span> 3 5 7.<br/>
<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> * 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^1)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#ZOmod_plus_pow_digit">ZOmod_plus_pow_digit</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zsame_sign_trans_weak">Zsame_sign_trans_weak</a></span> <span class="kwd">with</span> <span class="id">v</span>.<br/>
<span class="tactic">intros</span> <span class="id">Zv</span> ; <span class="tactic">rewrite</span> <span class="id">Zv</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_0_l">Zquot_0_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zsame_sign_trans_weak">Zsame_sign_trans_weak</a></span> <span class="kwd">with</span> <span class="id">u</span>.<br/>
<span class="tactic">intros</span> <span class="id">Zu</span> ; <span class="tactic">rewrite</span> <span class="id">Zu</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_0_l">Zquot_0_l</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zsame_sign_odiv">Zsame_sign_odiv</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zsame_sign_odiv">Zsame_sign_odiv</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">k</span>' (<span class="id">Hk1</span>,<span class="id">Hk2</span>).<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_div_pow">Zdigit_div_pow</a></span> <span class="tactic">by</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id">Hd</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_0_compat">Zplus_le_0_compat</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">k</span>' (<span class="id">Hk1</span>,<span class="id">Hk2</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Hd</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 3!<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_lt">Zdigit_lt</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Left and right shifts </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Zscale">Zscale</a></span> <span class="id">n</span> <span class="id">k</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> <span class="kwd">then</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_scale">Zdigit_scale</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (0 &lt;= <span class="id">k</span>')%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>) <span class="id">k</span>' = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id">k</span>' - <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5223')">Proof.</div>
<div class="proofscript" id="proof5223">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span>'.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_mul_pow">Zdigit_mul_pow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_div_pow">Zdigit_div_pow</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk</span>').<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zscale_0">Zscale_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5224')">Proof.</div>
<div class="proofscript" id="proof5224">
<span class="tactic">intros</span> <span class="id">k</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_0_l">Zmult_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_0_l">Zquot_0_l</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zsame_sign_scale">Zsame_sign_scale</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5225')">Proof.</div>
<div class="proofscript" id="proof5225">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_assoc">Zmult_assoc</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_0_compat">Zmult_le_0_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zsame_sign_imp">Zsame_sign_imp</a></span> ; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zsame_sign_odiv">Zsame_sign_odiv</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zscale_mul_pow">Zscale_mul_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>) <span class="id">k</span>' = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> + <span class="id">k</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5226')">Proof.</div>
<div class="proofscript" id="proof5226">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk</span>'.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_true">Zle_bool_true</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_assoc">Zmult_assoc</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_0_compat">Zplus_le_0_compat</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk</span>''.<br/>
<span class="tactic">pattern</span> <span class="id">k</span> <span class="tactic">at</span> 1 ; <span class="tactic">replace</span> <span class="id">k</span> <span class="kwd">with</span> (<span class="id">k</span> + <span class="id">k</span>' + -<span class="id">k</span>')%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">assert</span> (0 &lt;= -<span class="id">k</span>')%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="tactic">by</span> <span class="id">easy</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_assoc">Zmult_assoc</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Z_quot_mult">Z_quot_mult</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">replace</span> (-<span class="id">k</span>')%<span class="id">Z</span> <span class="kwd">with</span> (-(<span class="id">k</span>+<span class="id">k</span>') + <span class="id">k</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="kwd">with</span> (2 := <span class="id">Hk</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_mult_cancel_r">Zquot_mult_cancel_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zscale_scale">Zscale_scale</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>', (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>) <span class="id">k</span>' = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> + <span class="id">k</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5227')">Proof.</div>
<div class="proofscript" id="proof5227">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>' <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> <span class="tactic">at</span> 2.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_true">Zle_bool_true</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale_mul_pow">Zscale_mul_pow</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Slice of an integer </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Zslice">Zslice</a></span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span>) <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_slice">Zdigit_slice</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">k</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5228')">Proof.</div>
<div class="proofscript" id="proof5228">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_true">Zle_bool_true</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_mod_pow">Zdigit_mod_pow</a></span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">Hk</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_scale">Zdigit_scale</a></span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_involutive">Zopp_involutive</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_slice_out">Zdigit_slice_out</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">k</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5229')">Proof.</div>
<div class="proofscript" id="proof5229">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk2</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_mod_pow_out">Zdigit_mod_pow_out</a></span>.<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_0">Zdigit_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zslice_0">Zslice_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">k</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> <span class="id">k</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5230')">Proof.</div>
<div class="proofscript" id="proof5230">
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">k</span>'.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale_0">Zscale_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_0_l">Zrem_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zsame_sign_slice">Zsame_sign_slice</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>',<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> <span class="id">k</span>')%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5231')">Proof.</div>
<div class="proofscript" id="proof5231">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k</span>'.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool">Zle_bool</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zsame_sign_trans_weak">Zsame_sign_trans_weak</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> <span class="id">n</span> (-<span class="id">k</span>)).<br/>
<span class="tactic">intros</span> <span class="id">H</span> ; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_0_l">Zrem_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsame_sign_scale">Zsame_sign_scale</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_sgn2">Zrem_sgn2</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_0_r">Zmult_0_r</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zslice_slice">Zslice_slice</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">k1</span>' <span class="id">k2</span>', (0 &lt;= <span class="id">k1</span>' &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span>) <span class="id">k1</span>' <span class="id">k2</span>' = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> + <span class="id">k1</span>') (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmin">Zmin</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span> - <span class="id">k1</span>') <span class="id">k2</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5232')">Proof.</div>
<div class="proofscript" id="proof5232">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">k1</span>' <span class="id">k2</span>' <span class="id">Hk1</span>'.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 <span class="id">k2</span>') <span class="kwd">as</span> [<span class="id">Hk2</span>'|<span class="id">Hk2</span>'].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_ext">Zdigit_ext</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmin">Zmin</a></span> (<span class="id">k2</span> - <span class="id">k1</span>') <span class="id">k2</span>') <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">Hk</span>'|<span class="id">Hk</span>'].<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span> <span class="id">n</span> (<span class="id">k1</span> + <span class="id">k1</span>')) <span class="kwd">with</span> (1 := <span class="id">Hk</span>').<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">k2</span>' <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">Hk</span>''|<span class="id">Hk</span>''].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span>.<br/>
<span class="id">zify</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="tactic">by</span> (<span class="id">zify</span> ; <span class="tactic">omega</span>).<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="id">n</span> (<span class="id">k1</span> + <span class="id">k1</span>')) <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice">Zdigit_slice</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_assoc">Zplus_assoc</a></span>.<br/>
<span class="id">zify</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zcompare.html#Zmin_r">Zmin_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_false">Zle_bool_false</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zslice_mul_pow">Zslice_mul_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5233')">Proof.</div>
<div class="proofscript" id="proof5233">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">Hk</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk2</span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale_mul_pow">Zscale_mul_pow</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk</span>).<br/>
<span class="id">now</span> <span class="tactic">replace</span> (- (<span class="id">k1</span> - <span class="id">k</span>))%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">k</span> + -<span class="id">k1</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zslice_div_pow">Zslice_div_pow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt; (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5234')">Proof.</div>
<div class="proofscript" id="proof5234">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">Hk</span> <span class="id">Hk1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk2</span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span>.<br/>
<span class="tactic">apply</span> (<span class="tactic">f_equal</span> (<span class="kwd">fun</span> <span class="id">x</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">k2</span>))).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk1</span>'.<br/>
<span class="tactic">replace</span> <span class="id">k1</span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">Hk</span>'.<br/>
<span class="tactic">replace</span> <span class="id">k</span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_1_r">Zquot_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_involutive">Zopp_involutive</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_false">Zle_bool_false</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_involutive">Zopp_involutive</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="tactic">by</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zquot_Zquot">Zquot_Zquot</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zslice_scale">Zslice_scale</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5235')">Proof.</div>
<div class="proofscript" id="proof5235">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">Hk1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_spec">Zle_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">Hk</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice_mul_pow">Zslice_mul_pow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice_div_pow">Zslice_div_pow</a></span> <span class="kwd">with</span> (2 := <span class="id">Hk1</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zslice_div_pow_scale">Zslice_div_pow_scale</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.quot">Z.quot</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k2">k2</a></span>)) (-<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k1">k1</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5236')">Proof.</div>
<div class="proofscript" id="proof5236">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">k1</span> <span class="id">k2</span> <span class="id">Hk</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_ext">Zdigit_ext</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">k</span>' <span class="id">Hk</span>'.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_scale">Zdigit_scale</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk</span>').<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.sub">Zminus</a></span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span> <span class="id">k</span>'), <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zopp_involutive">Zopp_involutive</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">k2</span> <span class="id">k</span>') <span class="kwd">as</span> [<span class="id">Hk2</span>|<span class="id">Hk2</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk2</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_compat_l">Zplus_le_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="tactic">by</span> <span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> 0 (<span class="id">k1</span> + <span class="id">k</span>')) <span class="kwd">as</span> [<span class="id">Hk1</span>'|<span class="id">Hk1</span>'].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_div_pow">Zdigit_div_pow</a></span> <span class="tactic">by</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">ring</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_lt">Zdigit_lt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zplus_slice">Zplus_slice</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">l1</span> <span class="id">l2</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#l1">l1</a></span>)%<span class="id">Z</span> -&gt; (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#l2">l2</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#l1">l1</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#l1">l1</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#l2">l2</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#l1">l1</a></span>)%<span class="id">Z</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#l1">l1</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#l2">l2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5237')">Proof.</div>
<div class="proofscript" id="proof5237">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k1</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">Hl1</span> <span class="id">Hl2</span>.<br/>
<span class="tactic">clear</span> <span class="id">Hl1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_ext">Zdigit_ext</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_plus">Zdigit_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_scale">Zdigit_scale</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id">l1</span> + <span class="id">l2</span>) <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">Hk2</span>|<span class="id">Hk2</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk2</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Hk</span> <span class="id">Hk2</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">l1</span> <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">Hk1</span>|<span class="id">Hk1</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk1</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">simpl</span> ; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice">Zdigit_slice</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">Hk</span> <span class="id">Hk1</span>).<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_lt">Zdigit_lt</a></span> <span class="id">_</span> (<span class="id">k</span> - <span class="id">l1</span>)) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_0_r">Zplus_0_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zsame_sign_trans_weak">Zsame_sign_trans_weak</a></span> <span class="kwd">with</span> <span class="id">n</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span> ; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice_0">Zslice_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zsame_sign_trans_weak">Zsame_sign_trans_weak</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id">n</span> (<span class="id">k1</span> + <span class="id">l1</span>) <span class="id">l2</span>).<br/>
<span class="tactic">intros</span> <span class="id">H</span> ; <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale_0">Zscale_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsame_sign_slice">Zsame_sign_slice</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsame_sign_scale">Zsame_sign_scale</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zsame_sign_slice">Zsame_sign_slice</a></span>.<br/>
<span class="tactic">clear</span> <span class="id">k</span> <span class="id">Hk</span> ; <span class="tactic">intros</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_scale">Zdigit_scale</a></span> <span class="kwd">with</span> (1 := <span class="id">Hk</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">l1</span> <span class="id">k</span>) <span class="kwd">as</span> [<span class="id">Hk1</span>|<span class="id">Hk1</span>].<br/>
<span class="id">left</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_slice_out">Zdigit_slice_out</a></span>.<br/>
<span class="id">right</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_lt">Zdigit_lt</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fcore_digits.digits_aux">digits_aux</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcore_digits.digits_aux.p">p</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Zdigits_aux">Zdigits_aux</a></span> (<span class="id">nb</span> <span class="id">pow</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) { <span class="kwd">struct</span> <span class="id">n</span> } : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> =&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#nb">nb</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zlt_bool">Zlt_bool</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.digits_aux.p">p</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#pow">pow</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#nb">nb</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_aux">Zdigits_aux</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#nb">nb</a></span> + 1) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult">Zmult</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#pow">pow</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.digits_aux">digits_aux</a></span>.<br/>
<br/>
<div class="doc">Number of digits of an integer </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Zdigits">Zdigits</a></span> <span class="id">n</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zneg">Zneg</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_aux">Zdigits_aux</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">p</span>) 1 <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_aux">Zdigits_aux</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> 1 <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_correct">Zdigits_correct</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>))%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5238')">Proof.</div>
<div class="proofscript" id="proof5238">
<span class="tactic">cut</span> (<span class="kwd">forall</span> <span class="id">p</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#p">p</a></span>) - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#p">p</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#p">p</a></span>)))%<span class="id">Z</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span> [|<span class="id">n</span>|<span class="id">n</span>] ; <span class="tactic">try</span> <span class="tactic">exact</span> (<span class="id">H</span> <span class="id">n</span>).<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">U</span>: (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">n</span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">n</span>))))%<span class="id">Z</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_trans">Zlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat_correct">digits2_Pnat_correct</a></span> <span class="id">n</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_Zpower_nat">Zpower_Zpower_nat</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_nat_Z_of_nat">Zabs_nat_Z_of_nat</a></span>.<br/>
<span class="tactic">induction</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">n</span>)).<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">rewrite</span> 2!(<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_nat_S">Zpower_nat_S</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat">Zmult_le_compat</a></span> <span class="kwd">with</span> (2 := <span class="id">IHn0</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_nat_Z_of_nat">Zabs_nat_Z_of_nat</a></span> <span class="id">n0</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_Zpower_nat">Zpower_Zpower_nat</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Build_radix">Build_radix</a></span> 2 (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>))).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_0_nat">Zle_0_nat</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">revert</span> <span class="id">U</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#inj_S">inj_S</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Zsucc</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">n</span>).<br/>
<span class="tactic">intros</span> <span class="id">u</span> <span class="id">U</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix_val">radix_val</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>) <span class="tactic">at</span> 2 4 ; <span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix_val">radix_val</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> 1) <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">V</span>: (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (1 - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">n</span>)%<span class="id">Z</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span> 0).<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#conj">conj</a></span> <span class="id">V</span> <span class="id">U</span>).<br/>
<span class="tactic">clear</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span> 1).<br/>
<span class="tactic">generalize</span> 1%<span class="id">Z</span> <span class="tactic">at</span> 2 3 5 6 7 9 10.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">induction</span> <span class="id">u</span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#inj_S">inj_S</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Zsucc</a></span>.<br/>
<span class="tactic">simpl</span> <span class="id">Zdigits_aux</span>.<br/>
<span class="tactic">intros</span> <span class="id">v</span> <span class="id">Hv</span> <span class="id">U</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zlt_bool_spec">Zlt_bool_spec</a></span> ; <span class="tactic">intros</span> <span class="id">K</span>.<br/>
<span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix_val">radix_val</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>) <span class="tactic">at</span> 2 5 ; <span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix_val">radix_val</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> 1) <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">IHu</span>.<br/>
<span class="tactic">clear</span> -<span class="id">Hv</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="id">now</span> <span class="id">ring_simplify</span> (1 + <span class="id">v</span> - 1)%<span class="id">Z</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_assoc">Zplus_assoc</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_succ_le">Zle_succ_le</a></span> <span class="kwd">with</span> (1 := <span class="id">Hv</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_unique">Zdigits_unique</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">d</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#d">d</a></span> - 1) &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#d">d</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5239')">Proof.</div>
<div class="proofscript" id="proof5239">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">d</span> <span class="id">Hd</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hd</span>' := <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">n</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_antisym">Zle_antisym</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_lt_Zpower">Zpower_lt_Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_trans">Zle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n</span>).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_lt_Zpower">Zpower_lt_Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_trans">Zle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_abs">Zdigits_abs</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5240')">Proof.</div>
<div class="proofscript" id="proof5240">
<span class="id">now</span> <span class="tactic">intros</span> [|<span class="id">n</span>|<span class="id">n</span>].<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_gt_0">Zdigits_gt_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> -&gt; (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5241')">Proof.</div>
<div class="proofscript" id="proof5241">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">Zn</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_abs">Zdigits_abs</a></span> <span class="id">n</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Hn</span>: (0 &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n</span>)%<span class="id">Z</span>).<br/>
<span class="tactic">destruct</span> <span class="id">n</span> ; [|<span class="id">easy</span>|<span class="id">easy</span>].<br/>
<span class="id">now</span> <span class="tactic">elim</span> <span class="id">Zn</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">n</span>) <span class="kwd">as</span> [|<span class="id">p</span>|<span class="id">p</span>] ; <span class="tactic">try</span> <span class="id">easy</span> ; <span class="tactic">clear</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">generalize</span> 1%<span class="id">Z</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix_val">radix_val</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#refl_equal">refl_equal</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Lt">Lt</a></span> : (0 &lt; 1)%<span class="id">Z</span>).<br/>
<span class="tactic">induction</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">p</span>).<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">intros</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zlt_bool">Zlt_bool</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id">IHn</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_lt_succ">Zlt_lt_succ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_ge_0">Zdigits_ge_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5242')">Proof.</div>
<div class="proofscript" id="proof5242">
<span class="tactic">intros</span> <span class="id">n</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_eq_dec">Z_eq_dec</a></span> <span class="id">n</span> 0) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_gt_0">Zdigits_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_out">Zdigit_out</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5243')">Proof.</div>
<div class="proofscript" id="proof5243">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">Hk</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_ge_Zpower">Zdigit_ge_Zpower</a></span> <span class="kwd">with</span> (2 := <span class="id">Hk</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_correct">Zdigits_correct</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigit_digits">Zdigit_digits</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit">Zdigit</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> - 1) &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5244')">Proof.</div>
<div class="proofscript" id="proof5244">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">Zn</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigit_not_0">Zdigit_not_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_0_le_0_pred">Zlt_0_le_0_pred</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_gt_0">Zdigits_gt_0</a></span>.<br/>
<span class="id">ring_simplify</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id">n</span> - 1 + 1)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_correct">Zdigits_correct</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_slice">Zdigits_slice</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">k</span> <span class="id">l</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#l">l</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#k">k</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#l">l</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#l">l</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5245')">Proof.</div>
<div class="proofscript" id="proof5245">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">k</span> <span class="id">l</span> <span class="id">Hl</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zslice">Zslice</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zle_bool_true">Zle_bool_true</a></span> <span class="kwd">with</span> (1 := <span class="id">Hl</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_correct">Zdigits_correct</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.rem">Z.rem</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zscale">Zscale</a></span> <span class="id">n</span> (- <span class="id">k</span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id">l</span>))) <span class="kwd">as</span> (<span class="id">H1</span>,<span class="id">H2</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_lt_Zpower">Zpower_lt_Zpower</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_trans">Zle_lt_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">H1</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> ^ <span class="id">l</span>)) <span class="tactic">at</span> 2 <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zquot.html#Zrem_lt">Zrem_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_mult_Zpower">Zdigits_mult_Zpower</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> -&gt; (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>) = (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5246')">Proof.</div>
<div class="proofscript" id="proof5246">
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">e</span> <span class="id">Hm</span> <span class="id">He</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">m</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_unique">Zdigits_unique</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_mul">Z.abs_mul</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_pow">Z.abs_pow</a></span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>).<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix_gt_0">radix_gt_0</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span> + <span class="id">e</span> - 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span> - 1 + <span class="id">e</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="kwd">with</span> (2 := <span class="id">He</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat_r">Zmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_0_le_0_pred">Zlt_0_le_0_pred</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_gt_0">Zdigits_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="kwd">with</span> (2 := <span class="id">He</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_lt_compat_r">Zmult_lt_compat_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_weak">Zlt_le_weak</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_gt_0">Zdigits_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_Zpower">Zdigits_Zpower</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>) = (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> + 1)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5247')">Proof.</div>
<div class="proofscript" id="proof5247">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">He</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_l">Zmult_1_l</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id">e</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_mult_Zpower">Zdigits_mult_Zpower</a></span> ; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_comm">Zplus_comm</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_le">Zdigits_le</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5248')">Proof.</div>
<div class="proofscript" id="proof5248">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zx</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hx</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">x</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Hy</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">y</span>).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_lt_Zpower">Zpower_lt_Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span>).<br/>
<span class="id">zify</span> ; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="lt_Zdigits">lt_Zdigits</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5249')">Proof.</div>
<div class="proofscript" id="proof5249">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hy</span>.<br/>
<span class="tactic">cut</span> (<span class="id">y</span> &lt;= <span class="id">x</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id">y</span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id">x</span>)%<span class="id">Z</span>. <span class="tactic">omega</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_le">Zdigits_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zpower_le_Zdigits">Zpower_le_Zdigits</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5250')">Proof.</div>
<div class="proofscript" id="proof5250">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">x</span> <span class="id">Hex</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">H1</span> <span class="id">H2</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">H1</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_le">Zpower_le</a></span>.<br/>
<span class="tactic">clear</span> -<span class="id">Hex</span> ; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_le_Zpower">Zdigits_le_Zpower</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5251')">Proof.</div>
<div class="proofscript" id="proof5251">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">x</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zpower_le_Zdigits">Zpower_le_Zdigits</a></span> <span class="id">e</span> <span class="id">x</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zpower_gt_Zdigits">Zpower_gt_Zdigits</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> &lt; <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5252')">Proof.</div>
<div class="proofscript" id="proof5252">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">x</span> <span class="id">Hex</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">H1</span> <span class="id">H2</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_trans">Zlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">H2</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_le">Zpower_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_gt_Zpower">Zdigits_gt_Zpower</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5253')">Proof.</div>
<div class="proofscript" id="proof5253">
<span class="tactic">intros</span> <span class="id">e</span> <span class="id">x</span> <span class="id">Hex</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zpower_gt_Zdigits">Zpower_gt_Zdigits</a></span> <span class="id">e</span> <span class="id">x</span>).<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Number of digits of a product.
This strong version is needed for proofs of division and square root
algorithms, since they involve operation remainders.
</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_mult_strong">Zdigits_mult_strong</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span>)%<span class="id">Z</span> -&gt; (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5254')">Proof.</div>
<div class="proofscript" id="proof5254">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_le_Zpower">Zdigits_le_Zpower</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_trans">Zlt_le_trans</a></span> <span class="kwd">with</span> ((<span class="id">x</span> + 1) * (<span class="id">y</span> + 1))%<span class="id">Z</span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_succ">Zle_lt_succ</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_ge_0">Zdigits_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat">Zmult_le_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span> <span class="id">x</span>) <span class="tactic">at</span> 1 <span class="tactic">by</span> <span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_correct">Zdigits_correct</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span> <span class="id">y</span>) <span class="tactic">at</span> 1 <span class="tactic">by</span> <span class="id">easy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_correct">Zdigits_correct</a></span>.<br/>
<span class="tactic">clear</span> -<span class="id">Hx</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">clear</span> -<span class="id">Hy</span> ; <span class="tactic">omega</span>.<br/>
<span class="id">change</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> <span class="kwd">with</span> (0 + 0 + 0)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_compat">Zplus_le_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_compat">Zplus_le_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_0_compat">Zmult_le_0_compat</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_mult">Zdigits_mult</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5255')">Proof.</div>
<div class="proofscript" id="proof5255">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_abs">Zdigits_abs</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_abs">Zdigits_abs</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_abs">Zdigits_abs</a></span> <span class="id">y</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">x</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">y</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">x</span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zabs">Zabs</a></span> <span class="id">y</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_le">Zdigits_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_pos">Zabs_pos</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_Zmult">Zabs_Zmult</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_pos">Zabs_pos</a></span> <span class="id">x</span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_pos">Zabs_pos</a></span> <span class="id">y</span>).<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_mult_strong">Zdigits_mult_strong</a></span> ; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_pos">Zabs_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_mult_ge">Zdigits_mult_ge</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> &lt;&gt; 0)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span> &lt;&gt; 0)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span> - 1 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#x">x</a></span> * <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#y">y</a></span>))%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5256')">Proof.</div>
<div class="proofscript" id="proof5256">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zx</span> <span class="id">Zy</span>.<br/>
<span class="tactic">cut</span> ((<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id">x</span> - 1) + (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id">y</span> - 1) &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> (<span class="id">x</span> * <span class="id">y</span>))%<span class="id">Z</span>. <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_gt_Zpower">Zdigits_gt_Zpower</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_Zmult">Zabs_Zmult</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_exp">Zpower_exp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_le_compat">Zmult_le_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zpower_le_Zdigits">Zpower_le_Zdigits</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_pred">Zlt_pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zpower_le_Zdigits">Zpower_le_Zdigits</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_pred">Zlt_pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_ge_0">Zpower_ge_0</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_gt_0">Zdigits_gt_0</a></span> <span class="id">x</span>). <span class="tactic">omega</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_gt_0">Zdigits_gt_0</a></span> <span class="id">y</span>). <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zdigits_div_Zpower">Zdigits_div_Zpower</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span>)%<span class="id">Z</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span> / <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>) = (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#e">e</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5257')">Proof.</div>
<div class="proofscript" id="proof5257">
<span class="tactic">intros</span> <span class="id">m</span> <span class="id">e</span> <span class="id">Hm</span> <span class="id">He</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_correct">Zdigits_correct</a></span> <span class="id">m</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_unique">Zdigits_unique</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">He</span>)) <span class="kwd">as</span> [<span class="id">He</span>'|<span class="id">He</span>'].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="tactic">by</span> <span class="id">easy</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">H1</span> <span class="id">H2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span> - <span class="id">e</span> - 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span> - 1 - <span class="id">e</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_sub_r">Z.pow_sub_r</a></span>.<br/>
&nbsp;&nbsp;2: <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zgt_not_eq">Zgt_not_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix_gt_0">radix_gt_0</a></span>.<br/>
&nbsp;&nbsp;2: <span class="tactic">clear</span> -<span class="id">He</span> <span class="id">He</span>' ; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_div_le">Z_div_le</a></span> <span class="kwd">with</span> (2 := <span class="id">H1</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_gt">Zlt_gt</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zmult_lt_reg_r">Zmult_lt_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits.beta">beta</a></span> <span class="id">e</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_trans">Zle_lt_trans</a></span> <span class="kwd">with</span> <span class="id">m</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_comm">Zmult_comm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_mult_div_ge">Z_mult_div_ge</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_gt">Zlt_gt</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_plus">Zpower_plus</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span> - <span class="id">e</span> + <span class="id">e</span>)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_minus_le_0">Zle_minus_le_0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">He</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_div_pos">Z_div_pos</a></span> <span class="kwd">with</span> (2 := <span class="id">Hm</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_gt">Zlt_gt</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#Zpower_gt_0">Zpower_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">He</span>'.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zeq_minus">Zeq_minus</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id">m</span>)) <span class="tactic">by</span> <span class="tactic">reflexivity</span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Zdiv_small">Zdiv_small</a></span>.<br/>
<span class="id">easy</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">exact</span> <span class="id">Hm</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zabs.html#Zabs_eq">Zabs_eq</a></span> <span class="id">m</span>) <span class="tactic">at</span> 1.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Fcore_digits">Fcore_digits</a></span>.<br/>
<br/>
<div class="doc">Specialized version for computing the number of bits of an integer </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Zdigits2">Zdigits2</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Z_of_nat_S_digits2_Pnat">Z_of_nat_S_digits2_Pnat</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z_of_nat">Z_of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span>)) = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5258')">Proof.</div>
<div class="proofscript" id="proof5258">
<span class="tactic">intros</span> <span class="id">m</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits_unique">Zdigits_unique</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat_Z">Zpower_nat_Z</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>.<br/>
<span class="id">change</span> (<span class="id">_</span> - 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zpred">Zpred</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zsucc">Zsucc</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat">digits2_Pnat</a></span> <span class="id">m</span>)))).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zpred_succ">Zpred_succ</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#Zpower_nat_Z">Zpower_nat_Z</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_Pnat_correct">digits2_Pnat_correct</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="digits2_pos">digits2_pos</a></span> (<span class="id">n</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xH">xH</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xO">xO</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Psucc">Psucc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_pos">digits2_pos</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#xI">xI</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Psucc">Psucc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_pos">digits2_pos</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Zpos_digits2_pos">Zpos_digits2_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#positive">positive</a></span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_pos">digits2_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix2">radix2</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5259')">Proof.</div>
<div class="proofscript" id="proof5259">
<span class="tactic">intros</span> <span class="id">m</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Z_of_nat_S_digits2_Pnat">Z_of_nat_S_digits2_Pnat</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">induction</span> <span class="id">m</span> ; <span class="tactic">simpl</span> ; <span class="tactic">try</span> <span class="id">easy</span> ;<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="tactic">f_equal</span>, <span class="id">IHm</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Zdigits2">Zdigits2</a></span> <span class="id">n</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span> =&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_pos">digits2_pos</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zneg">Zneg</a></span> <span class="id">p</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Zpos">Zpos</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#digits2_pos">digits2_pos</a></span> <span class="id">p</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Zdigits2_Zdigits">Zdigits2_Zdigits</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits2">Zdigits2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits">Zdigits</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix2">radix2</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5260')">Proof.</div>
<div class="proofscript" id="proof5260">
<span class="tactic">intros</span> [|<span class="id">p</span>|<span class="id">p</span>] ; <span class="tactic">try</span> <span class="id">easy</span> ;<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zpos_digits2_pos">Zpos_digits2_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_digits.html#Zdigits2">Zdigits2</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
