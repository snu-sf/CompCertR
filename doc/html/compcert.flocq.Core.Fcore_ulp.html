
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Fcore_ulp</title>
<meta name="description" content="Documentation of Coq module Fcore_ulp" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Fcore_ulp</h1>
<div class="coq">
<br/>
<h1> Unit in the Last Place: our definition using fexp and its properties, successor and predecessor </h1>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Reals.html">Reals</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.micromega.Psatz.html">Psatz</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html">Fcore_Raux</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html">Fcore_defs</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html">Fcore_rnd</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html">Fcore_generic_fmt</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html">Fcore_float_prop</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fcore_ulp">Fcore_ulp</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcore_ulp.beta">beta</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix">radix</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="bpow">bpow</a></span> <span class="id">e</span> := (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">e</span>).<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fcore_ulp.fexp">fexp</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<div class="doc">Definition and basic properties about the minimal exponent, when it exists </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Z_le_dec_aux">Z_le_dec_aux</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">Z</span> \/ ~ (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">Z</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5523')">Proof.</div>
<div class="proofscript" id="proof5523">
<span class="tactic">intros</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.ZArith_dec.html#Z_le_dec">Z_le_dec</a></span> <span class="id">x</span> <span class="id">y</span>).<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">negligible_exp</span></span> is either none (as in FLX) or Some n such that n &lt;= fexp n. </div>
<span class="kwd">Definition</span> <span class="id"><a name="negligible_exp">negligible_exp</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#LPO_Z">LPO_Z</a></span> <span class="id">_</span> (<span class="kwd">fun</span> <span class="id">z</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Z_le_dec_aux">Z_le_dec_aux</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#z">z</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#z">z</a></span>))) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#inleft">inleft</a></span> <span class="id">N</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#proj1_sig">proj1_sig</a></span> <span class="id">N</span>)<br/>
&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Specif.html#inright">inright</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="negligible_exp_prop">negligible_exp_prop</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="negligible_None">negligible_None</a></span>: (<span class="kwd">forall</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span>)%<span class="id">Z</span>) -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp_prop">negligible_exp_prop</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="negligible_Some">negligible_Some</a></span>: <span class="kwd">forall</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp_prop">negligible_exp_prop</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span>).<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="negligible_exp_spec">negligible_exp_spec</a></span>: <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp_prop">negligible_exp_prop</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp">negligible_exp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5524')">Proof.</div>
<div class="proofscript" id="proof5524">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp">negligible_exp</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#LPO_Z">LPO_Z</a></span> <span class="kwd">as</span> [(<span class="id">n</span>,<span class="id">Hn</span>)|<span class="id">Hn</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_Some">negligible_Some</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_None">negligible_None</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Hn</span> <span class="id">n</span>); <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">negligible_exp_spec</span>': (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp">negligible_exp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> /\ <span class="kwd">forall</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span>)%<span class="id">Z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id">exists</span> <span class="id">n</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp">negligible_exp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span> /\ (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span>)%<span class="id">Z</span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5525')">Proof.</div>
<div class="proofscript" id="proof5525">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp">negligible_exp</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#LPO_Z">LPO_Z</a></span> <span class="kwd">as</span> [(<span class="id">n</span>,<span class="id">Hn</span>)|<span class="id">Hn</span>].<br/>
<span class="id">right</span>; <span class="tactic">simpl</span>; <span class="id">exists</span> <span class="id">n</span>; <span class="id">now</span> <span class="tactic">split</span>.<br/>
<span class="id">left</span>; <span class="tactic">split</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span>; <span class="id">specialize</span> (<span class="id">Hn</span> <span class="id">n</span>); <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Context</span> { <span class="id">valid_exp</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_exp">Valid_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> }.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fexp_negligible_exp_eq">fexp_negligible_exp_eq</a></span>: <span class="kwd">forall</span> <span class="id">n</span> <span class="id">m</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span>)%<span class="id">Z</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#m">m</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#m">m</a></span>)%<span class="id">Z</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#n">n</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5526')">Proof.</div>
<div class="proofscript" id="proof5526">
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">m</span> <span class="id">Hn</span> <span class="id">Hm</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">n</span> <span class="id">m</span>); <span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<br/>
<div class="doc">Definition and basic properties about the ulp </div>
<div class="doc">Now includes a nice ulp(0): ulp(0) is now 0 when there is no minimal
   exponent, such as in FLX, and beta^(fexp n) when there is a n such
   that n &lt;= fexp n. For instance, the value of ulp(O) is then
   beta^emin in FIX and FLT. The main lemma to use is ulp_neq_0 that
   is equivalent to the previous "unfold ulp" provided the value is
   not zero. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ulp">ulp</a></span> <span class="id">x</span> := <span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool">Req_bool</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> 0 <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>   =&gt; <span class="kwd">match</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp">negligible_exp</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; 0%<span class="id">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>  =&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)<br/>
&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ulp_neq_0">ulp_neq_0</a></span> : <span class="kwd">forall</span> <span class="id">x</span>:<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5527')">Proof.</div>
<div class="proofscript" id="proof5527">
<span class="tactic">intros</span>  <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_spec">Req_bool_spec</a></span> <span class="id">x</span>); <span class="tactic">trivial</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>; <span class="id">now</span> <span class="id">contradict</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="F">F</a></span> := (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span>).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_opp">ulp_opp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5528')">Proof.</div>
<div class="proofscript" id="proof5528">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">H1</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>), <span class="id">H1</span>; <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_false">Req_bool_false</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_opp">canonic_exp_opp</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H2</span>; <span class="tactic">apply</span> <span class="id">H1</span>; <span class="tactic">rewrite</span> <span class="id">H2</span>; <span class="tactic">ring</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_abs">ulp_abs</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5529')">Proof.</div>
<div class="proofscript" id="proof5529">
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_spec">Req_bool_spec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">H1</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">H1</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_false">Req_bool_false</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_abs">canonic_exp_abs</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_no_R0">Rabs_no_R0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_ge_0">ulp_ge_0</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5530')">Proof.</div>
<div class="proofscript" id="proof5530">
<span class="tactic">intros</span> <span class="id">x</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp">negligible_exp</a></span>; <span class="tactic">intros</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_le_id">ulp_le_id</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5531')">Proof.</div>
<div class="proofscript" id="proof5531">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zsucc">Zsucc</a></span> 0)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_gt_0_reg">F2R_gt_0_reg</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_le_abs">ulp_le_abs</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5532')">Proof.</div>
<div class="proofscript" id="proof5532">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_abs">ulp_abs</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_le_id">ulp_le_id</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_abs">generic_format_abs</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_DN_ulp">round_UP_DN_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, ~ <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> = (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5533')">Proof.</div>
<div class="proofscript" id="proof5533">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_floor_neq">Zceil_floor_neq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_Z2R">Ztrunc_Z2R</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa_mult_bpow">scaled_mantissa_mult_bpow</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">V</span>; <span class="tactic">apply</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">V</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_bpow">ulp_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span> + 1)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5534')">Proof.</div>
<div class="proofscript" id="proof5534">
<span class="tactic">intros</span> <span class="id">e</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_fexp">canonic_exp_fexp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="id">ring_simplify</span> (<span class="id">e</span> + 1 - 1)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_succ">Zlt_succ</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_gt">Rlt_gt</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_ulp_0">generic_format_ulp_0</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> 0).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5535')">Proof.</div>
<div class="proofscript" id="proof5535">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp_spec">negligible_exp_spec</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">_</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">H1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_bpow_ge_ulp_0">generic_format_bpow_ge_ulp_0</a></span>:  <span class="kwd">forall</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> 0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5536')">Proof.</div>
<div class="proofscript" id="proof5536">
<span class="tactic">intros</span> <span class="id">e</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp_spec">negligible_exp_spec</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H1</span> <span class="id">_</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">specialize</span> (<span class="id">H1</span> (<span class="id">e</span>+1)%<span class="id">Z</span>); <span class="tactic">omega</span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id">e</span>+1) (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>+1))); <span class="tactic">intros</span> <span class="id">H4</span>.<br/>
<span class="id">absurd</span> (<span class="id">e</span>+1 &lt;= <span class="id">e</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">H4</span>).<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>+1)) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#le_bpow">le_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#fexp_negligible_exp_eq">fexp_negligible_exp_eq</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The three following properties are equivalent:
      <span class="bracket"><span class="id">Exp_not_FTZ</span></span> ;  forall x, F (ulp x) ; forall x, ulp 0 &lt;= ulp x </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_ulp">generic_format_ulp</a></span>: <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5537')">Proof.</div>
<div class="proofscript" id="proof5537">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span>; <span class="tactic">intros</span> <span class="id">H</span> <span class="id">x</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_ulp_0">generic_format_ulp_0</a></span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="id">_</span> <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="not_FTZ_generic_format_ulp">not_FTZ_generic_format_ulp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>,  <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)) -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5538')">Proof.</div>
<div class="proofscript" id="proof5538">
<span class="tactic">intros</span> <span class="id">H</span> <span class="id">e</span>.<br/>
<span class="id">specialize</span> (<span class="id">H</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id">e</span>-1))).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_bpow">ln_beta_bpow</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id">generic_format_bpow_inv</span>' <span class="kwd">in</span> <span class="id">H</span>...<br/>
<span class="id">now</span> <span class="tactic">replace</span> (<span class="id">e</span>-1+1)%<span class="id">Z</span> <span class="kwd">with</span> <span class="id">e</span> <span class="kwd">in</span> <span class="id">H</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ulp_ge_ulp_0">ulp_ge_ulp_0</a></span>: <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> 0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5539')">Proof.</div>
<div class="proofscript" id="proof5539">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span>; <span class="tactic">intros</span> <span class="id">H</span> <span class="id">x</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>; <span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="tactic">at</span> 1.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id">negligible_exp_spec</span>'.<br/>
<span class="tactic">intros</span> (<span class="id">H1</span>,<span class="id">H2</span>); <span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">H1</span>,<span class="id">H2</span>)); <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">l</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">l</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">l</span>)); <span class="tactic">intros</span> <span class="id">Hl</span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#fexp_negligible_exp_eq">fexp_negligible_exp_eq</a></span> <span class="id">n</span> <span class="id">l</span>); <span class="tactic">trivial</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">l</span>)); <span class="tactic">trivial</span>; <span class="tactic">intros</span> <span class="id">K</span>.<br/>
<span class="id">absurd</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">l</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (2:= <span class="id">H</span> <span class="id">_</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zeq_le">Zeq_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="not_FTZ_ulp_ge_ulp_0">not_FTZ_ulp_ge_ulp_0</a></span>:<br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span>,  (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> 0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>) -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Exp_not_FTZ">Exp_not_FTZ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5540')">Proof.</div>
<div class="proofscript" id="proof5540">
<span class="tactic">intros</span> <span class="id">H</span> <span class="id">e</span>.<br/>
<span class="tactic">apply</span> <span class="id">generic_format_bpow_inv</span>' <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_bpow_ge_ulp_0">generic_format_bpow_ge_ulp_0</a></span>.<br/>
<span class="tactic">replace</span> <span class="id">e</span> <span class="kwd">with</span> ((<span class="id">e</span>-1)+1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_bpow">ulp_bpow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_le_pos">ulp_le_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Hm</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> },<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>,<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5541')">Proof with</div>
<div class="proofscript" id="proof5541">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">Hm</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Hx</span> <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hm</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le">ln_beta_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_gt">Rlt_gt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">Hx</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_ge_ulp_0">ulp_ge_ulp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#monotone_exp_not_FTZ">monotone_exp_not_FTZ</a></span>...<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_le">ulp_le</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Hm</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> },<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5542')">Proof.</div>
<div class="proofscript" id="proof5542">
<span class="tactic">intros</span> <span class="id">Hm</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_abs">ulp_abs</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_abs">ulp_abs</a></span> <span class="id">y</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_le_pos">ulp_le_pos</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<div class="doc">Definition and properties of pred and succ </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="pred_pos">pred_pos</a></span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool">Req_bool</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - 1)) <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - 1)))%<span class="id">R</span><br/>
&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="succ">succ</a></span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool">Rle_bool</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>+<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span><br/>
&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="pred">pred</a></span> <span class="id">x</span> := (- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_eq_pos">pred_eq_pos</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5543')">Proof.</div>
<div class="proofscript" id="proof5543">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_spec">Rle_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">Hx</span>'.<br/>
<span class="tactic">assert</span> (<span class="id">K</span>:(<span class="id">x</span> = 0)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_cancel">Ropp_le_cancel</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">K</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_false">Req_bool_false</a></span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">ring</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_eq_pos">succ_eq_pos</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5544')">Proof.</div>
<div class="proofscript" id="proof5544">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_true">Rle_bool_true</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pred_eq_opp_succ_opp">pred_eq_opp_succ_opp</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> = (- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5545')">Proof.</div>
<div class="proofscript" id="proof5545">
<span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="succ_eq_opp_pred_opp">succ_eq_opp_pred_opp</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> = (- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5546')">Proof.</div>
<div class="proofscript" id="proof5546">
<span class="tactic">intros</span> <span class="id">x</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="succ_opp">succ_opp</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) = - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5547')">Proof.</div>
<div class="proofscript" id="proof5547">
<span class="tactic">intros</span> <span class="id">x</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_eq_opp_pred_opp">succ_eq_opp_pred_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pred_opp">pred_opp</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) = - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5548')">Proof.</div>
<div class="proofscript" id="proof5548">
<span class="tactic">intros</span> <span class="id">x</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_eq_opp_succ_opp">pred_eq_opp_succ_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<div class="doc">pred and succ are in the format </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="id_m_ulp_ge_bpow">id_m_ulp_ge_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>,  <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5549')">Proof.</div>
<div class="proofscript" id="proof5549">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">Fx</span> <span class="id">Hx</span>' <span class="id">Hx</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">assert</span> (1 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>))%<span class="id">Z</span>.<br/>
<span class="tactic">assert</span> (0 &lt;  <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>))%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_gt_0_reg">F2R_gt_0_reg</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>); <span class="tactic">intros</span> <span class="id">Hm</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
<span class="id">change</span> 1%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_minus">Z2R_minus</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> <span class="id">e</span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) - 1) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#bpow_le_F2R_m1">bpow_le_F2R_m1</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_gt">Rlt_gt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">Hx</span>), <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">contradict</span> <span class="id">Hx</span>'.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span>  &lt;- <span class="id">Hm</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_gt">Rlt_gt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">Hx</span>), <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="id_p_ulp_le_bpow">id_p_ulp_le_bpow</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">e</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5550')">Proof.</div>
<div class="proofscript" id="proof5550">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">e</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">Hx</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="id">change</span> 1%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) + 1) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> <span class="id">e</span>)%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_p1_le_bpow">F2R_p1_le_bpow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_gt_0_reg">F2R_gt_0_reg</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_pred_aux1">generic_format_pred_aux1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - 1) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5551')">Proof.</div>
<div class="proofscript" id="proof5551">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">Hx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">Ex</span>).<br/>
<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">Hx</span>.<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Zx</span>)).<br/>
<span class="tactic">assert</span> (<span class="id">Ex</span>' : (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id">ex</span> - 1) &lt; <span class="id">x</span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> <span class="id">ex</span>)%<span class="id">R</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">Ex</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Ex</span> <span class="kwd">as</span> (<span class="id">H</span>,<span class="id">H</span>'); <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">split</span>; <span class="tactic">trivial</span>.<br/>
<span class="id">contradict</span> <span class="id">Hx</span>; <span class="id">easy</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span> <span class="id">ex</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 3 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_fexp">canonic_exp_fexp</a></span> <span class="kwd">with</span> (1 := <span class="id">Ex</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> 0) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_minus">Z2R_minus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_Z2R">Ztrunc_Z2R</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_minus">Z2R_minus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#id_m_ulp_ge_bpow">id_m_ulp_ge_bpow</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">intro</span> <span class="id">H</span>.<br/>
<span class="tactic">assert</span> (<span class="id">ex</span>-1 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>  &lt; <span class="id">ex</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">split</span> ; <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>) ; <span class="tactic">rewrite</span> &lt;- <span class="id">H</span> ; <span class="id">easy</span>.<br/>
<span class="tactic">clear</span> -<span class="id">H0</span>. <span class="tactic">omega</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Ex</span>'.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Ex</span>').<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 3 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;-<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">replace</span> 1%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1) <span class="tactic">by</span> <span class="tactic">reflexivity</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
<span class="tactic">assert</span> (0 &lt;  <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>))%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_gt_0_reg">F2R_gt_0_reg</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Ex</span>').<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="generic_format_pred_aux2">generic_format_pred_aux2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_val">ln_beta_val</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> =  <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span> - 1) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span> - 1))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5552')">Proof.</div>
<div class="proofscript" id="proof5552">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">e</span> <span class="id">Hx</span>.<br/>
<span class="id">pose</span> (<span class="id">f</span>:=(<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span> - 1)))%<span class="id">R</span>).<br/>
<span class="id">fold</span> <span class="id">f</span>.<br/>
<span class="tactic">assert</span> (<span class="id">He</span>:(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1) &lt;= <span class="id">e</span>-1)%<span class="id">Z</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow_inv">generic_format_bpow_inv</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>; <span class="tactic">assumption</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span>); <span class="tactic">clear</span> <span class="id">He</span>; <span class="tactic">intros</span> <span class="id">He</span>.<br/>
<span class="tactic">assert</span> (<span class="id">f</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpow_def.html#Zpower">Zpower</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id">e</span>-1-(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1))) -1) (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1))))%<span class="id">R</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>; <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_minus">Z2R_minus</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_Zpower">Z2R_Zpower</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_minus_distr_r">Rmult_minus_distr_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="id">now</span> <span class="tactic">replace</span> (<span class="id">e</span> - 1 - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span> - 1) + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span> - 1))%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">e</span>-1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">_</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zeq_le">Zeq_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_fexp">canonic_exp_fexp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>; <span class="tactic">rewrite</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_l">Rplus_le_reg_l</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1))).<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2) + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat">Rplus_le_compat</a></span> ; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2*<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2))%<span class="id">R</span>;[<span class="id">right</span>; <span class="tactic">ring</span>|<span class="id">idtac</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> 1*<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">replace</span> 2%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2) <span class="tactic">by</span> <span class="tactic">reflexivity</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> 1) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
<span class="tactic">apply</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_is_le_bool">Zle_is_le_bool</a></span>.<br/>
<span class="id">now</span> <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Zpower_pos</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">replace</span> (1+(<span class="id">e</span>-2))%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">e</span>-1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">replace</span> <span class="id">f</span> <span class="kwd">with</span> 0%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rtopology.html#f">f</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>, <span class="id">He</span>.<br/>
<span class="tactic">ring</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_succ_aux1">generic_format_succ_aux1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5553')">Proof.</div>
<div class="proofscript" id="proof5553">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">Ex</span>).<br/>
<span class="id">specialize</span> (<span class="id">Ex</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Zx</span>)).<br/>
<span class="tactic">assert</span> (<span class="id">Ex</span>' := <span class="id">Ex</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">Ex</span>'.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#id_p_ulp_le_bpow">id_p_ulp_le_bpow</a></span> <span class="id">x</span> <span class="id">ex</span>) ; <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id">x</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span> <span class="id">ex</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 3 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_fexp">canonic_exp_fexp</a></span> <span class="kwd">with</span> (1 := <span class="id">Ex</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> 0) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_Z2R">Ztrunc_Z2R</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Ex</span>').<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_le_0_compat">Rplus_le_le_0_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">ex</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">ex</span>)) ; <span class="tactic">trivial</span>.<br/>
<span class="tactic">elim</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">Zx</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z0">Z0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_0">F2R_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_fexp">canonic_exp_fexp</a></span> <span class="kwd">with</span> (1 := <span class="id">Ex</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#mantissa_small_pos">mantissa_small_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span> <span class="id">ex</span>) ; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_floor">Ztrunc_floor</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_imp">Zfloor_imp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">H2</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_pred_pos">generic_format_pred_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5554')">Proof.</div>
<div class="proofscript" id="proof5554">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">Zx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span>; <span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_pred_aux2">generic_format_pred_aux2</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_pred_aux1">generic_format_pred_aux1</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_succ">generic_format_succ</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5555')">Proof.</div>
<div class="proofscript" id="proof5555">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span>; <span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_spec">Rle_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Zx</span> <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Zx</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_succ_aux1">generic_format_succ_aux1</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Zx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_ulp_0">generic_format_ulp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_pred_pos">generic_format_pred_pos</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_pred">generic_format_pred</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5556')">Proof.</div>
<div class="proofscript" id="proof5556">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_succ">generic_format_succ</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_pos_lt_id">pred_pos_lt_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5557')">Proof.</div>
<div class="proofscript" id="proof5557">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_gt_id">succ_gt_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5558')">Proof.</div>
<div class="proofscript" id="proof5558">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_spec">Rle_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_lt_id">pred_pos_lt_id</a></span>.<br/>
<span class="id">now</span> <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">real</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_lt_id">pred_lt_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5559')">Proof.</div>
<div class="proofscript" id="proof5559">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_gt_id">succ_gt_id</a></span>.<br/>
<span class="id">now</span> <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">real</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_ge_id">succ_ge_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5560')">Proof.</div>
<div class="proofscript" id="proof5560">
<span class="tactic">intros</span> <span class="id">x</span>; <span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0).<br/>
<span class="tactic">intros</span> <span class="id">V</span>; <span class="tactic">rewrite</span> <span class="id">V</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_true">Rle_bool_true</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">right</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">intros</span>; <span class="id">left</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_gt_id">succ_gt_id</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_le_id">pred_le_id</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5561')">Proof.</div>
<div class="proofscript" id="proof5561">
<span class="tactic">intros</span> <span class="id">x</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_ge_id">succ_ge_id</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_pos_ge_0">pred_pos_ge_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5562')">Proof.</div>
<div class="proofscript" id="proof5562">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>,<span class="id">Ex</span>) ; <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_bpow">ln_beta_bpow</a></span>.<br/>
<span class="id">ring_simplify</span> (<span class="id">ex</span> - 1 + 1 - 1)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow_inv">generic_format_bpow_inv</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>; <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_le_id">ulp_le_id</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_ge_0">pred_ge_0</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5563')">Proof.</div>
<div class="proofscript" id="proof5563">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_eq_pos">pred_eq_pos</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_ge_0">pred_pos_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pred_pos_plus_ulp_aux1">pred_pos_plus_ulp_aux1</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - 1) -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5564')">Proof.</div>
<div class="proofscript" id="proof5564">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">Hx</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>)) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span>:(<span class="id">x</span> &lt;&gt; 0)%<span class="id">R</span>) <span class="tactic">by</span> <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">real</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H</span>':(<span class="id">x</span> &lt;&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>))%<span class="id">R</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">intros</span> <span class="id">M</span>.<br/>
<span class="id">case_eq</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">Hex</span> <span class="id">T</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Lex</span>:(<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_val">ln_beta_val</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) = <span class="id">ex</span>)%<span class="id">Z</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">T</span>; <span class="tactic">reflexivity</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Lex</span> <span class="kwd">in</span> *.<br/>
<span class="tactic">clear</span> <span class="id">T</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">specialize</span> (<span class="id">Hex</span> <span class="id">H</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="kwd">in</span> <span class="id">Hex</span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>; <span class="id">easy</span>.<br/>
<span class="tactic">assert</span> (<span class="id">ex</span>-1 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">ex</span>  &lt; <span class="id">ex</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">split</span> ; <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_bpow">lt_bpow</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>); <span class="tactic">rewrite</span> &lt;- <span class="id">M</span>;[<span class="id">idtac</span>|<span class="id">easy</span>].<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hex</span>);[<span class="tactic">trivial</span>|<span class="id">idtac</span>].<br/>
<span class="id">contradict</span> <span class="id">Hx</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">real</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">try</span> <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">real</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="id">case_eq</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">ex</span> <span class="id">Hex</span> <span class="id">T</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Lex</span>:(<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_val">ln_beta_val</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) = <span class="id">ex</span>)%<span class="id">Z</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">T</span>; <span class="tactic">reflexivity</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Lex</span> <span class="kwd">in</span> *; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">T</span>.<br/>
<span class="id">specialize</span> (<span class="id">Hex</span> <span class="id">H</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="kwd">in</span> <span class="id">Hex</span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>; <span class="id">easy</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Hex</span> <span class="kwd">as</span> ([<span class="id">H1</span>|<span class="id">H1</span>],<span class="id">H2</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id">x</span>-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#id_m_ulp_ge_bpow">id_m_ulp_ge_bpow</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">right</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Lex</span>.<br/>
<span class="id">contradict</span> <span class="id">Hx</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">real</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hex</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Lex</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">ex</span>)) <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">replace</span> 1%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zsucc">Zsucc</a></span> 0)) <span class="tactic">by</span> <span class="tactic">reflexivity</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_succ">Zlt_le_succ</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_gt_0_reg">F2R_gt_0_reg</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pred_pos_plus_ulp_aux2">pred_pos_plus_ulp_aux2</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_val">ln_beta_val</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> =  <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span> - 1) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span>-1)) &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span>-1))) + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span>-1))) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5565')">Proof.</div>
<div class="proofscript" id="proof5565">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">e</span> <span class="id">Hxe</span> <span class="id">Zp</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span> - 1)))) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span> - 1))).<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">assert</span> (<span class="id">He</span>:(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1) &lt;= <span class="id">e</span>-1)%<span class="id">Z</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow_inv">generic_format_bpow_inv</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hxe</span>; <span class="tactic">assumption</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">He</span>); <span class="tactic">clear</span> <span class="id">He</span>; <span class="tactic">intros</span> <span class="id">He</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_l">Rplus_le_reg_l</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1))).<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2) + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat">Rplus_le_compat</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>; <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2*<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2))%<span class="id">R</span>;[<span class="id">right</span>; <span class="tactic">ring</span>|<span class="id">idtac</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> 1*<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id">e</span> - 2))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">replace</span> 2%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 2) <span class="tactic">by</span> <span class="tactic">reflexivity</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> 1) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span>.<br/>
<span class="tactic">apply</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_is_le_bool">Zle_is_le_bool</a></span>.<br/>
<span class="id">now</span> <span class="tactic">destruct</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Zpower_pos</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">replace</span> (1+(<span class="id">e</span>-2))%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id">e</span>-1)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>, <span class="id">Hxe</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hxe</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="id">contradict</span> <span class="id">Zp</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hxe</span>, <span class="id">He</span>; <span class="tactic">ring</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="pred_pos_plus_ulp_aux3">pred_pos_plus_ulp_aux3</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_val">ln_beta_val</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> =  <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span> - 1) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#e">e</a></span>-1)) = 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> 0 = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5566')">Proof.</div>
<div class="proofscript" id="proof5566">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span> <span class="id">Fx</span> <span class="id">e</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H3</span>:(<span class="id">x</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span> - 1)))).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_diag_uniq">Rminus_diag_uniq</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id">H4</span>: (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">e</span>-1) = <span class="id">e</span>-1)%<span class="id">Z</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_inj">bpow_inj</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp_spec">negligible_exp_spec</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">K</span>.<br/>
<span class="id">specialize</span> (<span class="id">K</span> (<span class="id">e</span>-1)%<span class="id">Z</span>).<br/>
<span class="id">contradict</span> <span class="id">K</span>; <span class="tactic">omega</span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">Hn</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H3</span>; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">n</span> (<span class="id">e</span>-1)); <span class="tactic">intros</span> <span class="id">H6</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<div class="doc">The following one is false for x = 0 in FTZ </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_pos_plus_ulp">pred_pos_plus_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5567')">Proof.</div>
<div class="proofscript" id="proof5567">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_EM_T">Req_EM_T</a></span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_val">ln_beta_val</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) -1))) 0); <span class="tactic">intros</span> <span class="id">H1</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_plus_ulp_aux3">pred_pos_plus_ulp_aux3</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_plus_ulp_aux2">pred_pos_plus_ulp_aux2</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_plus_ulp_aux1">pred_pos_plus_ulp_aux1</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<div class="doc">Rounding x + small epsilon </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ln_beta_plus_eps">ln_beta_plus_eps</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> :&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5568')">Proof.</div>
<div class="proofscript" id="proof5568">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">He</span>).<br/>
<span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">He</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">Zx</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">He</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">He</span>).<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id">x</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="id">change</span> 1%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> 1).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
<span class="id">change</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) + 1) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> <span class="id">ex</span>)%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_p1_le_bpow">F2R_p1_le_bpow</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_gt_0_reg">F2R_gt_0_reg</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_le_0_compat">Rplus_le_le_0_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_plus_eps_pos">round_DN_plus_eps_pos</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5569')">Proof.</div>
<div class="proofscript" id="proof5569">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Zx</span> <span class="kwd">as</span> [<span class="id">Zx</span>|<span class="id">Zx</span>].<br/>
<span class="comment">(*&nbsp;.&nbsp;0&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="tactic">at</span> 1 2.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ln_beta_plus_eps">ln_beta_plus_eps</a></span> ; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> (<span class="tactic">f_equal</span> (<span class="kwd">fun</span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#m">m</a></span> <span class="id">_</span>))).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc_floor">Ztrunc_floor</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_imp">Zfloor_imp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lb">Zfloor_lb</a></span> <span class="id">_</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> ((<span class="id">x</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>) * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_compat_r">Rmult_lt_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_plus_distr_r">Rmult_plus_distr_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_plus">Z2R_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat">Rplus_le_compat</a></span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 3 ; <span class="tactic">rewrite</span> <span class="id">Fx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_Z2R">Zfloor_Z2R</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_opp_r">Zplus_opp_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;x=0&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Zx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>; <span class="tactic">rewrite</span> &lt;- <span class="id">Zx</span> <span class="kwd">in</span> <span class="id">Heps</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Heps</span>); <span class="tactic">intros</span> <span class="id">P</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="id">revert</span> <span class="id">Heps</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp_spec">negligible_exp_spec</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">_</span> (<span class="id">H1</span>,<span class="id">H2</span>).<br/>
<span class="id">absurd</span> (0 &lt; 0)%<span class="id">R</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">real</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">H1</span>).<br/>
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">Hn</span> <span class="id">H</span>.<br/>
<span class="tactic">assert</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">assert</span>(<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>-1 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)%<span class="id">Z</span>;[<span class="id">idtac</span>|<span class="tactic">omega</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_bpow">lt_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">H</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>) <span class="kwd">as</span> (<span class="id">e</span>,<span class="id">He</span>).<br/>
<span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">He</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">He</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id">eps</span> * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>)))) <span class="kwd">with</span> 0%<span class="id">Z</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>; <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_imp">Zfloor_imp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="id">ring_simplify</span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">P</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_DN">valid_rnd_DN</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_plus_eps_pos">round_UP_plus_eps_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span>) = (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5570')">Proof with</div>
<div class="proofscript" id="proof5570">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">eps</span>.<br/>
<span class="tactic">case</span> <span class="id">Zx</span>; <span class="tactic">intros</span> <span class="id">Zx1</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;0&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">intros</span> (<span class="id">Heps1</span>,[<span class="id">Heps2</span>|<span class="id">Heps2</span>]).<br/>
<span class="tactic">assert</span> (<span class="id">Heps</span>: (0 &lt;= <span class="id">eps</span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">split</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">exact</span> <span class="id">Heps2</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hd</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_DN_plus_eps_pos">round_DN_plus_eps_pos</a></span> <span class="id">x</span> <span class="id">Zx</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_DN_ulp">round_UP_DN_ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hd</span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ln_beta_plus_eps">ln_beta_plus_eps</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_0_compat">Rplus_lt_0_compat</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Fs</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span> <span class="kwd">in</span> <span class="id">Hd</span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span> <span class="kwd">with</span> (2 := <span class="id">Hd</span>).<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2 ; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Heps2</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_succ_aux1">generic_format_succ_aux1</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;x=0&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Zx1</span>, 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Heps</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Heps</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp_spec">negligible_exp_spec</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H2</span>.<br/>
<span class="tactic">intros</span> <span class="id">J</span>; <span class="id">absurd</span> (0 &lt; 0)%<span class="id">R</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">real</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> <span class="id">eps</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>; <span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">Hn</span> <span class="id">H</span>.<br/>
<span class="tactic">assert</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">assert</span>(<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>-1 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)%<span class="id">Z</span>;[<span class="id">idtac</span>|<span class="tactic">omega</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_bpow">lt_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">H</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>) <span class="kwd">as</span> (<span class="id">e</span>,<span class="id">He</span>).<br/>
<span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="kwd">in</span> <span class="id">He</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">He</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id">eps</span> * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">eps</span>)))) <span class="kwd">with</span> 1%<span class="id">Z</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span>; <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil_imp">Zceil_imp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">simpl</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_0_compat">Rmult_lt_0_compat</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="id">ring_simplify</span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">intros</span> <span class="id">P</span>; <span class="tactic">rewrite</span> <span class="id">P</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_ulp_0">generic_format_ulp_0</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_pred_plus_eps_pos">round_UP_pred_plus_eps_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) )%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5571')">Proof.</div>
<div class="proofscript" id="proof5571">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_plus_eps_pos">round_UP_plus_eps_pos</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_eq_pos">pred_eq_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_ge_0">pred_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_pred">generic_format_pred</a></span>; <span class="tactic">trivial</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_minus_eps_pos">round_DN_minus_eps_pos</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5572')">Proof.</div>
<div class="proofscript" id="proof5572">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hpx</span> <span class="id">Fx</span> <span class="id">eps</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_eq_pos">pred_eq_pos</a></span>;[<span class="tactic">intros</span> <span class="id">Heps</span>|<span class="id">now</span> <span class="id">left</span>].<br/>
<span class="tactic">replace</span> (<span class="id">x</span>-<span class="id">eps</span>)%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> <span class="id">x</span> + (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> <span class="id">x</span>)-<span class="id">eps</span>))%<span class="id">R</span>.<br/>
2: <span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 3; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span> <span class="id">x</span>); <span class="tactic">trivial</span>.<br/>
2: <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_DN_plus_eps_pos">round_DN_plus_eps_pos</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_ge_0">pred_pos_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_pred_pos">generic_format_pred_pos</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_0_r">Rplus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_lt_compat_l">Rplus_lt_compat_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_plus_eps">round_DN_plus_eps</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span> &lt; <span class="kwd">if</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool">Rle_bool</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) <span class="kwd">then</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>))))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5573')">Proof.</div>
<div class="proofscript" id="proof5573">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_DN_plus_eps_pos">round_DN_plus_eps_pos</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">split</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_true">Rle_bool_true</a></span> <span class="kwd">in</span> <span class="id">Heps</span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_false">Rle_bool_false</a></span> <span class="kwd">in</span> <span class="id">Heps</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> (<span class="id">x</span>+<span class="id">eps</span>)).<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_opp">round_DN_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">replace</span> (-(<span class="id">x</span>+<span class="id">eps</span>))%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (-<span class="id">x</span>) + (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (-<span class="id">x</span>)) - <span class="id">eps</span>))%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_pred_plus_eps_pos">round_UP_pred_plus_eps_pos</a></span>; <span class="tactic">try</span> <span class="tactic">reflexivity</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> <span class="id">eps</span>; <span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_l">Rplus_le_reg_l</a></span> <span class="kwd">with</span> (<span class="id">eps</span>-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (- <span class="id">x</span>)))%<span class="id">R</span>; <span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_false">Rle_bool_false</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_assoc">Rplus_assoc</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span>.<br/>
<span class="tactic">ring</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_plus_eps">round_UP_plus_eps</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span> &lt;= <span class="kwd">if</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool">Rle_bool</a></span> 0 <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) <span class="kwd">then</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>))))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span>) = (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5574')">Proof with</div>
<div class="proofscript" id="proof5574">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_eq_pos">succ_eq_pos</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_true">Rle_bool_true</a></span> <span class="kwd">in</span> <span class="id">Heps</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_plus_eps_pos">round_UP_plus_eps_pos</a></span>; <span class="tactic">assumption</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_false">Rle_bool_false</a></span> <span class="kwd">in</span> <span class="id">Heps</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> (<span class="id">x</span>+<span class="id">eps</span>)).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_opp">round_UP_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">replace</span> (-(<span class="id">x</span>+<span class="id">eps</span>))%<span class="id">R</span> <span class="kwd">with</span> (-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">x</span> + (-<span class="id">eps</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (-<span class="id">x</span>))))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_DN_plus_eps_pos">round_DN_plus_eps_pos</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_opp">pred_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_ge_0">pred_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_succ">generic_format_succ</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_l">Rplus_le_reg_l</a></span> <span class="kwd">with</span> <span class="id">eps</span>; <span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> (<span class="id">eps</span>-<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">x</span>))%<span class="id">R</span>; <span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id">Heps</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_false">Rle_bool_false</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#trans_eq">trans_eq</a></span> <span class="kwd">with</span> (-<span class="id">x</span> +-<span class="id">eps</span>)%<span class="id">R</span>;[<span class="id">idtac</span>|<span class="tactic">ring</span>].<br/>
<span class="tactic">pattern</span> (-<span class="id">x</span>)%<span class="id">R</span> <span class="tactic">at</span> 3; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span> (-<span class="id">x</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_eq_pos">pred_eq_pos</a></span>.<br/>
<span class="tactic">ring</span>.<br/>
<span class="id">left</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="le_pred_pos_lt">le_pred_pos_lt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5575')">Proof with</div>
<div class="proofscript" id="proof5575">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">H</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">H</span>); <span class="tactic">intros</span> <span class="id">V</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Zy</span>:(0 &lt; <span class="id">y</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">H</span>).<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">Zp</span>: (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id">y</span>)%<span class="id">R</span>).<br/>
<span class="tactic">assert</span> (<span class="id">Zp</span>:(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id">y</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_ge_0">pred_ge_0</a></span> ; <span class="tactic">trivial</span>.<br/>
<span class="tactic">destruct</span> <span class="id">Zp</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">generalize</span> <span class="id">H0</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_eq_pos">pred_eq_pos</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">left</span>].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">y</span>) <span class="kwd">as</span> (<span class="id">ey</span>,<span class="id">Hey</span>); <span class="tactic">simpl</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_spec">Req_bool_spec</a></span>; <span class="tactic">intros</span> <span class="id">Hy2</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">Hy3</span>.<br/>
<span class="tactic">assert</span> (<span class="id">ey</span>-1 = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">ey</span> -1))%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_inj">bpow_inj</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hy2</span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id">Hy3</span>.<br/>
<span class="tactic">ring</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Zx</span>: (<span class="id">x</span> &lt;&gt; 0)%<span class="id">R</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>,<span class="id">Hex</span>).<br/>
<span class="id">specialize</span> (<span class="id">Hex</span> <span class="id">Zx</span>).<br/>
<span class="tactic">assert</span> (<span class="id">ex</span> &lt;= <span class="id">ey</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt_bpow">bpow_lt_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hex</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">y</span>).<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_ge">Rgt_ge</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_ge">Rgt_ge</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hey</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_lt_or_eq">Zle_lt_or_eq</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span>); <span class="tactic">intros</span> <span class="id">Hexy</span>.<br/>
<span class="tactic">assert</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">ex</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id">ey</span>-1))%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="id">absurd</span> (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) &lt; 1)%<span class="id">Z</span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_gt_0_reg">F2R_gt_0_reg</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_Z2R">lt_Z2R</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_lt_reg_r">Rmult_lt_reg_r</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R">Z2R</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>)) *<br/>
&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>))%<span class="id">R</span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span> <span class="id">ex</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H3</span>,&lt;-<span class="id">H1</span>, &lt;- <span class="id">Hy2</span>.<br/>
<span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="tactic">exact</span> <span class="id">Hex</span>.<br/>
<span class="id">absurd</span> (<span class="id">y</span> &lt;= <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="kwd">in</span> <span class="id">Hex</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (2:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">Hex</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Hexy</span>, <span class="id">Hy2</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_ge">Rgt_ge</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">Hy3</span>.<br/>
<span class="tactic">assert</span> (<span class="id">y</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">ey</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_diag_uniq">Rminus_diag_uniq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hy3</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">y</span> <span class="id">ey</span>); <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id">Hey</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">contradict</span> <span class="id">Hy2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zplus_reg_l">Zplus_reg_l</a></span> <span class="kwd">with</span> 1%<span class="id">Z</span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#trans_eq">trans_eq</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">y</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_lt">bpow_lt</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_ge">Rle_ge</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_unique">ln_beta_unique</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">Hey</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> <span class="id">y</span>)) (<span class="id">y</span>-<span class="id">x</span>)); <span class="tactic">intros</span> <span class="id">H1</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> <span class="kwd">with</span> (-<span class="id">x</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> <span class="id">y</span>))%<span class="id">R</span>.<br/>
<span class="id">ring_simplify</span> (<span class="id">x</span>+(-<span class="id">x</span>+<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span> <span class="id">y</span>)))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">H1</span>).<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span> <span class="id">y</span>) <span class="tactic">at</span> 1; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_le">Req_le</a></span>; <span class="tactic">ring</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">replace</span> <span class="id">x</span> <span class="kwd">with</span> (<span class="id">y</span>-(<span class="id">y</span>-<span class="id">x</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_eq_pos">pred_eq_pos</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">left</span>].<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_DN_minus_eps_pos">round_DN_minus_eps_pos</a></span> <span class="kwd">with</span> (<span class="id">eps</span>:=(<span class="id">y</span>-<span class="id">x</span>)%<span class="id">R</span>); <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="id">ring_simplify</span> (<span class="id">y</span>-(<span class="id">y</span>-<span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_le">Req_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">split</span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_Rminus">Rlt_Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_eq_pos">pred_eq_pos</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">left</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">V</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_ge_0">pred_pos_ge_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">H</span>); <span class="tactic">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_le_lt_aux">succ_le_lt_aux</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(0 &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5576')">Proof with</div>
<div class="proofscript" id="proof5576">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hy</span> <span class="id">Zx</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_eq_pos">succ_eq_pos</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>) (<span class="id">y</span>-<span class="id">x</span>)); <span class="tactic">intros</span> <span class="id">H1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> <span class="kwd">with</span> (-<span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="id">ring_simplify</span> (<span class="id">x</span>+<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span> + -<span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="tactic">replace</span> <span class="id">y</span> <span class="kwd">with</span> (<span class="id">x</span>+(<span class="id">y</span>-<span class="id">x</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="id">absurd</span> (<span class="id">x</span> &lt; <span class="id">y</span>)%<span class="id">R</span>.<br/>
2: <span class="tactic">apply</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">Rle_not_lt</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_le">Req_le</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_DN_plus_eps_pos">round_DN_plus_eps_pos</a></span> <span class="kwd">with</span> (<span class="id">eps</span>:=(<span class="id">y</span>-<span class="id">x</span>)%<span class="id">R</span>); <span class="tactic">try</span> <span class="id">easy</span>.<br/>
<span class="id">ring_simplify</span> (<span class="id">x</span>+(<span class="id">y</span>-<span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">split</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_Rminus">Rlt_Rminus</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_le_lt">succ_le_lt</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5577')">Proof with</div>
<div class="proofscript" id="proof5577">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">H</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_le_lt_aux">succ_le_lt_aux</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_false">Rle_bool_false</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> <span class="id">y</span> 0); <span class="tactic">intros</span> <span class="id">Hy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">y</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#le_pred_pos_lt">le_pred_pos_lt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">split</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (-0)%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_ge_0">pred_pos_ge_0</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="id">now</span> <span class="id">left</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="le_pred_lt">le_pred_lt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5578')">Proof.</div>
<div class="proofscript" id="proof5578">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_le_lt">succ_le_lt</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="lt_succ_le">lt_succ_le</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5579')">Proof.</div>
<div class="proofscript" id="proof5579">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">Hxy</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_gt_id">succ_gt_id</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_lt_le">pred_lt_le</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5580')">Proof.</div>
<div class="proofscript" id="proof5580">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Zy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">Hxy</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_lt_id">pred_lt_id</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_pred_aux">succ_pred_aux</a></span> : <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)=<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5581')">Proof.</div>
<div class="proofscript" id="proof5581">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_eq_pos">pred_eq_pos</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">left</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_eq_pos">succ_eq_pos</a></span>.<br/>
2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_ge_0">pred_pos_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos_plus_ulp">pred_pos_plus_ulp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_ulp_0">pred_ulp_0</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> 0) = 0%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5582')">Proof.</div>
<div class="proofscript" id="proof5582">
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_eq_pos">pred_eq_pos</a></span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id">negligible_exp_spec</span>'.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">intros</span> [<span class="id">H1</span> <span class="id">_</span>]; <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_false">Req_bool_false</a></span>.<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>; <span class="tactic">ring</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">H1</span>,<span class="id">H2</span>)); <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_pos">pred_pos</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_bpow">ln_beta_bpow</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span> + 1 - 1)%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_diag_eq">Rminus_diag_eq</a></span>, <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_0">succ_0</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> 0 = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> 0.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5583')">Proof.</div>
<div class="proofscript" id="proof5583">
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_true">Rle_bool_true</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_0">pred_0</a></span> :<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> 0 = <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Ropp">Ropp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> 0).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5584')">Proof.</div>
<div class="proofscript" id="proof5584">
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_0">succ_0</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span> <span class="tactic">at</span> 1.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_opp">pred_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_succ_aux">pred_succ_aux</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5585')">Proof.</div>
<div class="proofscript" id="proof5585">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_lt_le">Rnot_lt_le</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_le_lt">succ_le_lt</a></span> <span class="kwd">with</span> (1 := <span class="id">Fx</span>) <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_lt_id">pred_lt_id</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_ge_id">succ_ge_id</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_pred">generic_format_pred</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_succ">generic_format_succ</a></span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#le_pred_lt">le_pred_lt</a></span> <span class="kwd">with</span> (1 := <span class="id">Fx</span>).<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_succ">generic_format_succ</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_gt_id">succ_gt_id</a></span>.<br/>
&nbsp;&nbsp;<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_pred">succ_pred</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5586')">Proof.</div>
<div class="proofscript" id="proof5586">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>) <span class="kwd">as</span> [[<span class="id">Hx</span>|<span class="id">Hx</span>]|<span class="id">Hx</span>].<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_pred_aux">succ_pred_aux</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_0">pred_0</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_opp">succ_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_ulp_0">pred_ulp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_eq_opp_succ_opp">pred_eq_opp_succ_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_opp">succ_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_succ_aux">pred_succ_aux</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_succ">pred_succ</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5587')">Proof.</div>
<div class="proofscript" id="proof5587">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_opp">succ_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_opp">pred_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_pred">succ_pred</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_pred_plus_eps">round_UP_pred_plus_eps</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span> &lt;= <span class="kwd">if</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool">Rle_bool</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> 0) <span class="kwd">then</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5588')">Proof.</div>
<div class="proofscript" id="proof5588">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_plus_eps">round_UP_plus_eps</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_pred">succ_pred</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_pred">generic_format_pred</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="tactic">at</span> 4.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_succ">pred_succ</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_opp">ulp_opp</a></span>.<br/>
<span class="tactic">generalize</span> <span class="id">Heps</span>; <span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_spec">Rle_bool_spec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_false">Rle_bool_false</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id">H1</span>; <span class="tactic">intros</span> <span class="id">H1</span>'.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">H1</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_lt_id">pred_lt_id</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>'; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_true">Rle_bool_true</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">right</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">H2</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">H2</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>, <span class="id">H1</span>'.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_true">Rle_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_ge_0">pred_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_minus_eps">round_DN_minus_eps</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">eps</span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span> &lt;= <span class="kwd">if</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool">Rle_bool</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> 0) <span class="kwd">then</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)))%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#eps">eps</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5589')">Proof.</div>
<div class="proofscript" id="proof5589">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span> <span class="id">eps</span> <span class="id">Heps</span>.<br/>
<span class="tactic">replace</span> (<span class="id">x</span>-<span class="id">eps</span>)%<span class="id">R</span> <span class="kwd">with</span> (-(-<span class="id">x</span>+<span class="id">eps</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_opp">round_DN_opp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span>; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">pattern</span> (-<span class="id">x</span>)%<span class="id">R</span> <span class="tactic">at</span> 1; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_succ">pred_succ</a></span> (-<span class="id">x</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_pred_plus_eps">round_UP_pred_plus_eps</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_succ">generic_format_succ</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_succ">pred_succ</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_opp">ulp_opp</a></span>.<br/>
<span class="tactic">generalize</span> <span class="id">Heps</span>; <span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_spec">Rle_bool_spec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_false">Rle_bool_false</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id">H1</span>; <span class="tactic">intros</span> <span class="id">H1</span>'.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (-<span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_ge_id">succ_ge_id</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_eq_pos">succ_eq_pos</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">right</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">H2</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">H1</span>' <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">apply</span> <span class="id">H2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_true">Rle_bool_true</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_opp">succ_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_opp">ulp_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_opp">succ_opp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_ge_0">pred_ge_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Error of a rounding, expressed in number of ulps </div>
<div class="doc">false for x=0 in the FLX format </div>
<span class="kwd">Theorem</span> <span class="id"><a name="error_lt_ulp">error_lt_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5590')">Proof with</div>
<div class="proofscript" id="proof5590">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">Zrnd</span> <span class="id">x</span> <span class="id">Zx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="comment">(*&nbsp;x&nbsp;=&nbsp;rnd&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="comment">(*&nbsp;x&nbsp;&lt;&gt;&nbsp;rnd&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_or_UP">round_DN_or_UP</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">rnd</span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>] ; <span class="tactic">rewrite</span> <span class="id">H</span> ; <span class="tactic">clear</span> <span class="id">H</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_minus_distr">Ropp_minus_distr</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_l">Rplus_lt_reg_l</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_DN_ulp">round_UP_DN_ulp</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hu</span>: (<span class="id">x</span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">destruct</span> <span class="id">Hu</span> <span class="kwd">as</span> [<span class="id">Hu</span>|<span class="id">Hu</span>].<br/>
<span class="tactic">exact</span> <span class="id">Hu</span>.<br/>
<span class="tactic">elim</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hu</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_minus">Rle_minus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_DN_ulp">round_UP_DN_ulp</a></span> <span class="kwd">with</span> (1 := <span class="id">Hx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_lt_reg_r">Rplus_lt_reg_r</a></span> <span class="kwd">with</span> (<span class="id">x</span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Hd</span>: (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span> &lt;= <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">destruct</span> <span class="id">Hd</span> <span class="kwd">as</span> [<span class="id">Hd</span>|<span class="id">Hd</span>].<br/>
<span class="tactic">exact</span> <span class="id">Hd</span>.<br/>
<span class="tactic">elim</span> <span class="id">Hx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hd</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="error_le_ulp">error_le_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5591')">Proof with</div>
<div class="proofscript" id="proof5591">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span>  <span class="id">rnd</span> <span class="id">Zrnd</span> <span class="id">x</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0).<br/>
<span class="tactic">intros</span> <span class="id">Zx</span>; <span class="tactic">rewrite</span> <span class="id">Zx</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">Zx</span>; <span class="id">left</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_lt_ulp">error_lt_ulp</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="error_le_half_ulp">error_le_half_ulp</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5592')">Proof with</div>
<div class="proofscript" id="proof5592">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Hx</span>|<span class="id">Hx</span>].<br/>
<span class="comment">(*&nbsp;x&nbsp;=&nbsp;rnd&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_opp_r">Rplus_opp_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R0">Rabs_R0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_ge_0">ulp_ge_0</a></span>.<br/>
<span class="comment">(*&nbsp;x&nbsp;&lt;&gt;&nbsp;rnd&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">set</span> (<span class="id">d</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_pt">round_N_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">choice</span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">Hr1</span>, <span class="id">Hr2</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id">x</span> - <span class="id">d</span>) (<span class="id">d</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span> - <span class="id">x</span>)) <span class="kwd">as</span> [<span class="id">H</span>|<span class="id">H</span>].<br/>
<span class="comment">(*&nbsp;.&nbsp;rnd(x)&nbsp;=&nbsp;rndd(x)&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">d</span> - <span class="id">x</span>)).<br/>
<span class="tactic">apply</span> <span class="id">Hr2</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_minus_distr">Ropp_minus_distr</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="kwd">with</span> 2%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> <span class="kwd">with</span> (<span class="id">d</span> - <span class="id">x</span>)%<span class="id">R</span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="id">right</span>. <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_minus">Rle_minus</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="comment">(*&nbsp;.&nbsp;rnd(x)&nbsp;=&nbsp;rndu(x)&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">Hu</span>: (<span class="id">d</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>)%<span class="id">R</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>).<br/>
<span class="tactic">unfold</span> <span class="id">d</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_DN_ulp">round_UP_DN_ulp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id">d</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span> - <span class="id">x</span>)).<br/>
<span class="tactic">apply</span> <span class="id">Hr2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hu</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="kwd">with</span> 2%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rplus_le_reg_r">Rplus_le_reg_r</a></span> <span class="kwd">with</span> (- (<span class="id">d</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span> - <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="id">right</span>. <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_0_minus">Rle_0_minus</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hu</span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ulp_DN">ulp_DN</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5593')">Proof with</div>
<div class="proofscript" id="proof5593">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hd</span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp_DN">canonic_exp_DN</a></span> <span class="kwd">with</span> (2 := <span class="id">Hd</span>).<br/>
<span class="tactic">intros</span> <span class="id">T</span>; <span class="id">contradict</span> <span class="id">Hd</span>; <span class="tactic">rewrite</span> <span class="id">T</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_neq_0_negligible_exp">round_neq_0_negligible_exp</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp">negligible_exp</a></span>=<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt; <span class="kwd">forall</span> <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;  (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5594')">Proof with</div>
<div class="proofscript" id="proof5594">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span> <span class="id">rndn</span> <span class="id">Hrnd</span> <span class="id">x</span> <span class="id">Hx</span> <span class="id">K</span>.<br/>
<span class="tactic">case</span> <span class="id">negligible_exp_spec</span>'.<br/>
<span class="tactic">intros</span> (<span class="id">_</span>,<span class="id">Hn</span>).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">e</span>,<span class="id">He</span>).<br/>
<span class="id">absurd</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span> &lt; <span class="id">e</span>)%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_not_lt">Zle_not_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#exp_small_round_0">exp_small_round_0</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">rndn</span> <span class="id">x</span>...<br/>
<span class="tactic">apply</span> (<span class="id">Hn</span> <span class="id">e</span>).<br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">H1</span>,<span class="id">_</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<br/>
<div class="doc">allows rnd x to be 0 </div>
<span class="kwd">Theorem</span> <span class="id"><a name="error_lt_ulp_round">error_lt_ulp_round</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Hm</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> } <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#rnd">rnd</a></span> } <span class="id">x</span>,<br/>
&nbsp;&nbsp;( <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;&gt; 0)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5595')">Proof with</div>
<div class="proofscript" id="proof5595">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">Hm</span>.<br/>
<span class="comment">(*&nbsp;wlog&nbsp;*)</span><br/>
<span class="tactic">cut</span> (<span class="kwd">forall</span> <span class="id">rnd</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#rnd">rnd</a></span> -&gt; <span class="kwd">forall</span> <span class="id">x</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R">R</a></span>, (0 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>  -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#rnd">rnd</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>))%<span class="id">R</span>).<br/>
<span class="tactic">intros</span> <span class="id">M</span> <span class="id">rnd</span> <span class="id">Hrnd</span> <span class="id">x</span> <span class="id">Zx</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>).<br/>
<span class="tactic">intros</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">M</span>.<br/>
<span class="id">contradict</span> <span class="id">H</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_not_eq">sym_not_eq</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_opp">round_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_opp">ulp_opp</a></span>.<br/>
<span class="tactic">replace</span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span> <span class="id">rnd</span>) (- <span class="id">x</span>) - - - <span class="id">x</span>)%<span class="id">R</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(-(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Zrnd_opp">Zrnd_opp</a></span> <span class="id">rnd</span>) (- <span class="id">x</span>) - (-<span class="id">x</span>)))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id">M</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#valid_rnd_opp">valid_rnd_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>.<br/>
<span class="comment">(*&nbsp;0&nbsp;&lt;&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">Hrnd</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_or_eq_dec">Rle_lt_or_eq_dec</a></span> 0 (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ge_generic">round_ge_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;0&nbsp;&lt;&nbsp;round&nbsp;Zfloor&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_lt_ulp">error_lt_ulp</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_DN">ulp_DN</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_le_pos">ulp_le_pos</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_or_UP">round_DN_or_UP</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">rnd</span> <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">V</span>; <span class="tactic">rewrite</span> <span class="id">V</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="comment">(*&nbsp;.&nbsp;0&nbsp;=&nbsp;round&nbsp;Zfloor&nbsp;x&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_or_UP">round_DN_or_UP</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">rnd</span> <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">V</span>; <span class="tactic">rewrite</span> <span class="id">V</span>; <span class="tactic">clear</span> <span class="id">V</span>.<br/>
<span class="comment">(*&nbsp;..&nbsp;round&nbsp;down&nbsp;--&nbsp;difficult&nbsp;case&nbsp;*)</span><br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hx2</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#negligible_exp_spec">negligible_exp_spec</a></span>.<br/>
<span class="comment">(*&nbsp;without&nbsp;minimal&nbsp;exponent&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">K</span>; <span class="id">contradict</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_float_prop.html#F2R_gt_0_compat">F2R_gt_0_compat</a></span>; <span class="tactic">simpl</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zlt_le_trans">Zlt_le_trans</a></span> <span class="kwd">with</span> 1%<span class="id">Z</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Pos2Z.is_pos">Pos2Z.is_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor_lub">Zfloor_lub</a></span>.<br/>
<span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">e</span>,<span class="id">He</span>); <span class="tactic">simpl</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id">e</span>-1) * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">e</span>))%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">replace</span> 1%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> 0) <span class="tactic">by</span> <span class="tactic">reflexivity</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="id">specialize</span> (<span class="id">K</span> <span class="id">e</span>); <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">He</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="comment">(*&nbsp;with&nbsp;a&nbsp;minimal&nbsp;exponent&nbsp;*)</span><br/>
<span class="tactic">intros</span> <span class="id">n</span> <span class="id">Hn</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">left</span>].<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)) <span class="id">x</span>); <span class="tactic">trivial</span>.<br/>
<span class="tactic">intros</span> <span class="id">K</span>; <span class="id">contradict</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_eq">Rlt_not_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ge_generic">round_ge_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>.<br/>
<span class="comment">(*&nbsp;..&nbsp;round&nbsp;up&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_lt_ulp">error_lt_ulp</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_le_pos">ulp_le_pos</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
Qed.</div>
<br/>
<div class="doc">allows both x and rnd x to be 0 </div>
<span class="kwd">Theorem</span> <span class="id"><a name="error_le_half_ulp_round">error_le_half_ulp_round</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> { <span class="id">Hm</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Monotone_exp">Monotone_exp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> },<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) &lt;= /2 * <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5596')">Proof with</div>
<div class="proofscript" id="proof5596">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">Hm</span> <span class="id">choice</span> <span class="id">x</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice</span>) <span class="id">x</span>) 0); <span class="tactic">intros</span> <span class="id">Hfx</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">x</span> 0); <span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_le_half_ulp">error_le_half_ulp</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="id">right</span>; <span class="tactic">ring</span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_le_half_ulp">error_le_half_ulp</a></span> <span class="id">choice</span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Hfx</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">N</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id">negligible_exp_spec</span>'.<br/>
<span class="tactic">intros</span> (<span class="id">H1</span>,<span class="id">H2</span>).<br/>
<span class="id">contradict</span> <span class="id">Hfx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_neq_0_negligible_exp">round_neq_0_negligible_exp</a></span>...<br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">H1</span>,<span class="id">Hn</span>)); <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">N</span>).<br/>
<span class="id">right</span>; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">assert</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span> -1 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)%<span class="id">Z</span>;[<span class="id">idtac</span>|<span class="tactic">omega</span>].<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#lt_bpow">lt_bpow</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">e</span>,<span class="id">He</span>).<br/>
<span class="tactic">simpl</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">x</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">He</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice</span>) <span class="id">x</span> - <span class="id">x</span>)).<br/>
<span class="id">right</span>; <span class="tactic">rewrite</span> <span class="id">Hfx</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> 0).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hfx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_lt_ulp_round">error_lt_ulp_round</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>, <span class="id">H1</span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">case</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_or_UP">round_DN_or_UP</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id">choice</span>) <span class="id">x</span>); <span class="tactic">intros</span> <span class="id">Hx</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">intros</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span> <span class="tactic">at</span> 2.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_DN">ulp_DN</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_le_half_ulp">error_le_half_ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span> <span class="kwd">in</span> <span class="id">Hfx</span>; <span class="id">contradict</span> <span class="id">Hfx</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">real</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_le_half_ulp">error_le_half_ulp</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pos_half_prf">pos_half_prf</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_le">ulp_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>; <span class="tactic">rewrite</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left1">Rabs_left1</a></span> <span class="id">x</span>), <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_left">Rabs_left</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> <span class="id">x</span> 0); <span class="tactic">trivial</span>.<br/>
<span class="tactic">intros</span> <span class="id">H1</span>; <span class="id">contradict</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">Rle_not_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ge_generic">round_ge_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">intros</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_le_half_ulp">error_le_half_ulp</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_l">Rmult_le_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Ratan.html#pos_half_prf">pos_half_prf</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_le_pos">ulp_le_pos</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> 0 <span class="id">x</span>); <span class="tactic">trivial</span>.<br/>
<span class="tactic">intros</span> <span class="id">H1</span>; <span class="id">contradict</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">Rle_not_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le_generic">round_le_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>; <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span> <span class="kwd">in</span> <span class="id">Hfx</span>; <span class="id">contradict</span> <span class="id">Hfx</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">real</span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span> <span class="tactic">at</span> 2; <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_opp">ulp_opp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_opp">round_DN_opp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_DN">ulp_DN</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">pattern</span> <span class="id">x</span> <span class="tactic">at</span> 1 2; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_plus_distr">Ropp_plus_distr</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_le_half_ulp">error_le_half_ulp</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_opp">round_DN_opp</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0_gt_lt_contravar">Ropp_0_gt_lt_contravar</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_gt">Rlt_gt</a></span>; <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_le">pred_le</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5597')">Proof.</div>
<div class="proofscript" id="proof5597">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> [<span class="id">Hxy</span>| -&gt;].<br/>
2: <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_refl">Rle_refl</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#le_pred_lt">le_pred_lt</a></span> <span class="kwd">with</span> (2 := <span class="id">Fy</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_pred">generic_format_pred</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2 := <span class="id">Hxy</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_le_id">pred_le_id</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_le">succ_le</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5598')">Proof.</div>
<div class="proofscript" id="proof5598">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">rewrite</span> 2!<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_eq_opp_pred_opp">succ_eq_opp_pred_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_le">pred_le</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_le_inv">pred_le_inv</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span><br/>
&nbsp;&nbsp;&nbsp;-&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5599')">Proof.</div>
<div class="proofscript" id="proof5599">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_pred">succ_pred</a></span> <span class="id">x</span>), &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_pred">succ_pred</a></span> <span class="id">y</span>); <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_le">succ_le</a></span>; <span class="tactic">trivial</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_pred">generic_format_pred</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_le_inv">succ_le_inv</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span><br/>
&nbsp;&nbsp;&nbsp;-&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5600')">Proof.</div>
<div class="proofscript" id="proof5600">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_succ">pred_succ</a></span> <span class="id">x</span>), &lt;- (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_succ">pred_succ</a></span> <span class="id">y</span>); <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_le">pred_le</a></span>; <span class="tactic">trivial</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_succ">generic_format_succ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_lt">pred_lt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5601')">Proof.</div>
<div class="proofscript" id="proof5601">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_le_lt">Rnot_le_lt</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_le">Rgt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">Hxy</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_le_inv">pred_le_inv</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_lt">succ_lt</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5602')">Proof.</div>
<div class="proofscript" id="proof5602">
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fx</span> <span class="id">Fy</span> <span class="id">Hxy</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_le_lt">Rnot_le_lt</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_le">Rgt_not_le</a></span> <span class="kwd">with</span> (1 := <span class="id">Hxy</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_le_inv">succ_le_inv</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="le_round_DN_lt_UP">le_round_DN_lt_UP</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5603')">Proof with</div>
<div class="proofscript" id="proof5603">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fy</span> <span class="id">Hlt</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_lt_le">Rnot_lt_le</a></span>.<br/>
<span class="id">contradict</span> <span class="id">Hlt</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">RIneq.Rle_not_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_le_gt_DN">round_UP_le_gt_DN</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5604')">Proof with</div>
<div class="proofscript" id="proof5604">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Fy</span> <span class="id">Hlt</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rnot_lt_le">Rnot_lt_le</a></span>.<br/>
<span class="id">contradict</span> <span class="id">Hlt</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">RIneq.Rle_not_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_UP_le_DN">pred_UP_le_DN</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5605')">Proof with</div>
<div class="proofscript" id="proof5605">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Fx</span>|<span class="id">Fx</span>].<br/>
<span class="tactic">rewrite</span> !<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_le_id">pred_le_id</a></span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>) 0); <span class="tactic">intros</span> <span class="id">Zx</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Zx</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rle_bool_true">Rle_bool_true</a></span>;[<span class="id">idtac</span>|<span class="id">now</span> <span class="id">right</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_0_l">Rplus_0_l</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Req_bool_true">Req_bool_true</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">case</span> <span class="id">negligible_exp_spec</span>'.<br/>
<span class="tactic">intros</span> (<span class="id">H1</span>,<span class="id">H2</span>).<br/>
<span class="id">contradict</span> <span class="id">Zx</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_neq_0_negligible_exp">round_neq_0_negligible_exp</a></span>...<br/>
<span class="tactic">intros</span> <span class="id">L</span>; <span class="tactic">apply</span> <span class="id">Fx</span>; <span class="tactic">rewrite</span> <span class="id">L</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">intros</span> (<span class="id">n</span>,(<span class="id">H1</span>,<span class="id">Hn</span>)); <span class="tactic">rewrite</span> <span class="id">H1</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_or_lt">Rle_or_lt</a></span> (- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>)) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)); <span class="tactic">trivial</span>; <span class="tactic">intros</span> <span class="id">K</span>.<br/>
<span class="id">absurd</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> &lt;= - <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">n</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_not_le">Rlt_not_le</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Zx</span>, &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_0">Ropp_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_le_gt_DN">round_UP_le_gt_DN</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.valid_exp">valid_exp</a></span>.<br/>
<span class="tactic">assert</span> (<span class="kwd">let</span> <span class="id">u</span> := <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span> <span class="kwd">in</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span>)%<span class="id">R</span> <span class="kwd">as</span> <span class="id">Hup</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_lt_id">pred_lt_id</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#le_round_DN_lt_UP">le_round_DN_lt_UP</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_pred">generic_format_pred</a></span>...<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="pred_UP_eq_DN">pred_UP_eq_DN</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  ~ <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5606')">Proof with</div>
<div class="proofscript" id="proof5606">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_UP_le_DN">pred_UP_le_DN</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#le_pred_lt">le_pred_lt</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="id">pose</span> <span class="id">proof</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_UP_lt">round_DN_UP_lt</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Fx</span> <span class="kwd">as</span> <span class="id">HE</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rlt_trans">Rlt_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj1">proj1</a></span> <span class="id">HE</span>) (2 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">HE</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="succ_DN_eq_UP">succ_DN_eq_UP</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>,  ~ <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>) = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5607')">Proof with</div>
<div class="proofscript" id="proof5607">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Fx</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_UP_eq_DN">pred_UP_eq_DN</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_pred">succ_pred</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_DN_eq_betw">round_DN_eq_betw</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">d</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#d">d</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#d">d</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#d">d</a></span>)%<span class="id">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5608')">Proof with</div>
<div class="proofscript" id="proof5608">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">d</span> <span class="id">Fd</span> (<span class="id">Hxd1</span>,<span class="id">Hxd2</span>).<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>); <span class="tactic">intros</span> (<span class="id">T1</span>,(<span class="id">T2</span>,<span class="id">T3</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id">T3</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Fx</span>|<span class="id">NFx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_le_inv">succ_le_inv</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_le_lt">succ_le_lt</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_succ">generic_format_succ</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_le_inv">succ_le_inv</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_DN_eq_UP">succ_DN_eq_UP</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_succ">generic_format_succ</a></span>...<br/>
<span class="id">now</span> <span class="id">left</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_UP_eq_betw">round_UP_eq_betw</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">u</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span>)%<span class="id">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;-&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5609')">Proof with</div>
<div class="proofscript" id="proof5609">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">u</span> <span class="id">Fu</span> <span class="id">Hux</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_opp">round_DN_opp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">u</span>).<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_DN_eq_betw">round_DN_eq_betw</a></span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">split</span>;[<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>|<span class="id">idtac</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_opp">succ_opp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_contravar">Ropp_lt_contravar</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<br/>
<br/>
<div class="doc">Properties of rounding to nearest and ulp </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_N_le_midp">round_N_le_midp</a></span>: <span class="kwd">forall</span> <span class="id">choice</span> <span class="id">u</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span> -&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#v">v</a></span> &lt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span>)/2)%<span class="id">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#choice">choice</a></span>)  <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#v">v</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5610')">Proof with</div>
<div class="proofscript" id="proof5610">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">u</span> <span class="id">v</span> <span class="id">Fu</span> <span class="id">H</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">V</span>: ((<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">u</span> = 0 /\ <span class="id">u</span> = 0) \/ <span class="id">u</span> &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">u</span>)%<span class="id">R</span>).<br/>
<span class="id">specialize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_ge_id">succ_ge_id</a></span> <span class="id">u</span>); <span class="tactic">intros</span> <span class="id">P</span>; <span class="tactic">destruct</span> <span class="id">P</span> <span class="kwd">as</span> [<span class="id">P</span>|<span class="id">P</span>].<br/>
<span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">u</span> 0); <span class="tactic">intros</span> <span class="id">Zu</span>.<br/>
<span class="id">left</span>; <span class="tactic">split</span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">P</span>.<br/>
<span class="id">right</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_gt_id">succ_gt_id</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">destruct</span> <span class="id">V</span> <span class="kwd">as</span> [(<span class="id">V1</span>,<span class="id">V2</span>)|<span class="id">V</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">V2</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le_generic">round_le_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="id">left</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">H</span>).<br/>
<span class="tactic">rewrite</span> <span class="id">V1</span>,<span class="id">V2</span>; <span class="id">right</span>; <span class="id">field</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id">T</span>: (<span class="id">u</span> &lt; (<span class="id">u</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">u</span>) / 2 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">u</span>)%<span class="id">R</span>) <span class="tactic">by</span> <span class="id">lra</span>.<br/>
<span class="tactic">destruct</span> <span class="id">T</span> <span class="kwd">as</span> (<span class="id">T1</span>,<span class="id">T2</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_N_pt_monotone">Rnd_N_pt_monotone</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id">v</span> ((<span class="id">u</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">u</span>) / 2)%<span class="id">R</span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_pt">round_N_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_DN_pt_N">Rnd_DN_pt_N</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">u</span>)%<span class="id">R</span>.<br/>
<span class="tactic">pattern</span> <span class="id">u</span> <span class="tactic">at</span> 3; <span class="tactic">replace</span> <span class="id">u</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> ((<span class="id">u</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">u</span>) / 2)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_DN_eq_betw">round_DN_eq_betw</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">left</span>; <span class="tactic">assumption</span>.<br/>
<span class="tactic">pattern</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">u</span>) <span class="tactic">at</span> 2; <span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">u</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> ((<span class="id">u</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ">succ</a></span> <span class="id">u</span>) / 2)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_UP_eq_betw">round_UP_eq_betw</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#generic_format_succ">generic_format_succ</a></span>...<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_succ">pred_succ</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">left</span>; <span class="tactic">assumption</span>.<br/>
<span class="id">right</span>; <span class="id">field</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="round_N_ge_midp">round_N_ge_midp</a></span>: <span class="kwd">forall</span> <span class="id">choice</span> <span class="id">u</span> <span class="id">v</span>,<br/>
&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span> -&gt;  ((<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span>)/2 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#v">v</a></span>)%<span class="id">R</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&gt; (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span> &lt;= <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#choice">choice</a></span>)  <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#v">v</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5611')">Proof with</div>
<div class="proofscript" id="proof5611">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">u</span> <span class="id">v</span> <span class="id">Fu</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">v</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_N_opp">round_N_opp</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span> <span class="id">u</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_le_contravar">Ropp_le_contravar</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_N_le_midp">round_N_le_midp</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_opp">generic_format_opp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_lt_cancel">Ropp_lt_cancel</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Ropp_involutive">Ropp_involutive</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">H</span>).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred">pred</a></span>.<br/>
<span class="id">right</span>; <span class="id">field</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="round_N_eq_DN">round_N_eq_DN</a></span>: <span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">d</span>:=<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">u</span>:=<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>&lt;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#d">d</a></span>+<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span>)/2)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5612')">Proof with</div>
<div class="proofscript" id="proof5612">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Fx</span>|<span class="id">Fx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>; <span class="tactic">trivial</span>; <span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_N_le_midp">round_N_le_midp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">H</span>).<br/>
<span class="id">right</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal2">f_equal2</a></span>; <span class="tactic">trivial</span>; <span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#sym_eq">sym_eq</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#succ_DN_eq_UP">succ_DN_eq_UP</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_ge_generic">round_ge_generic</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="round_N_eq_DN_pt">round_N_eq_DN_pt</a></span>: <span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Rnd_DN_pt">Rnd_DN_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#d">d</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Rnd_UP_pt">Rnd_UP_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>&lt;(<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#d">d</a></span>+<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span>)/2)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#d">d</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5613')">Proof with</div>
<div class="proofscript" id="proof5613">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span> <span class="id">Hd</span> <span class="id">Hu</span> <span class="id">H</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H0</span>:(<span class="id">d</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_DN_pt_unicity">Rnd_DN_pt_unicity</a></span> <span class="kwd">with</span> (1:=<span class="id">Hd</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
<span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_N_eq_DN">round_N_eq_DN</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_UP_pt_unicity">Rnd_UP_pt_unicity</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>) <span class="id">u</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="round_N_eq_UP">round_N_eq_UP</a></span>: <span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">d</span>:=<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">u</span>:=<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#d">d</a></span>+<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span>)/2 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5614')">Proof with</div>
<div class="proofscript" id="proof5614">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span> <span class="id">H</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_antisym">Rle_antisym</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_le_generic">round_le_generic</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_EM">generic_format_EM</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id">x</span>) <span class="kwd">as</span> [<span class="id">Fx</span>|<span class="id">Fx</span>].<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_generic">round_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>; <span class="tactic">trivial</span>; <span class="id">now</span> <span class="id">right</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_N_ge_midp">round_N_ge_midp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (2:=<span class="id">H</span>).<br/>
<span class="id">right</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal2">f_equal2</a></span>; <span class="tactic">trivial</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rplus_comm">Rplus_comm</a></span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal2">f_equal2</a></span>; <span class="tactic">trivial</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#pred_UP_eq_DN">pred_UP_eq_DN</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="round_N_eq_UP_pt">round_N_eq_UP_pt</a></span>: <span class="kwd">forall</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Rnd_DN_pt">Rnd_DN_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#d">d</a></span> -&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Rnd_UP_pt">Rnd_UP_pt</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#d">d</a></span>+<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span>)/2 &lt; <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span>)%<span class="id">R</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#choice">choice</a></span>) <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#u">u</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5615')">Proof with</div>
<div class="proofscript" id="proof5615">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">choice</span> <span class="id">x</span> <span class="id">d</span> <span class="id">u</span> <span class="id">Hd</span> <span class="id">Hu</span> <span class="id">H</span>.<br/>
<span class="tactic">assert</span> (<span class="id">H0</span>:(<span class="id">u</span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zceil">Zceil</a></span> <span class="id">x</span>)%<span class="id">R</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_UP_pt_unicity">Rnd_UP_pt_unicity</a></span> <span class="kwd">with</span> (1:=<span class="id">Hu</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_UP_pt">round_UP_pt</a></span>...<br/>
<span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#round_N_eq_UP">round_N_eq_UP</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_rnd.html#Rnd_DN_pt_unicity">Rnd_DN_pt_unicity</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#F">F</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp.fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Zfloor">Zfloor</a></span> <span class="id">x</span>) <span class="id">d</span>; <span class="tactic">try</span> <span class="tactic">assumption</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_DN_pt">round_DN_pt</a></span>...<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#Fcore_ulp">Fcore_ulp</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
