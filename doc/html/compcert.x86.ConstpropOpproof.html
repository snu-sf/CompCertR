
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module ConstpropOpproof</title>
<meta name="description" content="Documentation of Coq module ConstpropOpproof" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module ConstpropOpproof</h1>
<div class="coq">
<br/>
<div class="doc">Correctness proof for operator strength reduction. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.driver.Compopts.html">Compopts</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span> <span class="id"><a href="compcert.common.Values.html">Values</a></span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="compcert.common.Events.html">Events</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span> <span class="id"><a href="compcert.backend.Registers.html">Registers</a></span> <span class="id"><a href="compcert.backend.RTL.html">RTL</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html">ValueDomain</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.x86.ConstpropOp.html">ConstpropOp</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="STRENGTH_REDUCTION">STRENGTH_REDUCTION</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="STRENGTH_REDUCTION.bc">bc</a></span>: <span class="id"><a href="compcert.backend.ValueDomain.html#block_classification">block_classification</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="STRENGTH_REDUCTION.ge">ge</a></span>: <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="STRENGTH_REDUCTION.GENV">GENV</a></span>: <span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="STRENGTH_REDUCTION.sp">sp</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="STRENGTH_REDUCTION.STACK">STACK</a></span>: <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> = <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="STRENGTH_REDUCTION.ae">ae</a></span>: <span class="id"><a href="compcert.backend.ValueDomain.html#AE.t">AE.t</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="STRENGTH_REDUCTION.e">e</a></span>: <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="STRENGTH_REDUCTION.m">m</a></span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="STRENGTH_REDUCTION.MATCH">MATCH</a></span>: <span class="id"><a href="compcert.backend.ValueDomain.html#ematch">ematch</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_G">match_G</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">id</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span> = <span class="id"><a href="compcert.backend.ValueDomain.html#Ptr">Ptr</a></span>(<span class="id"><a href="compcert.backend.ValueDomain.html#Gl">Gl</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#id">id</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#ofs">ofs</a></span>) -&gt; <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#id">id</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#ofs">ofs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3214')">Proof.</div>
<div class="proofscript" id="proof3214">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ptr_gl">vmatch_ptr_gl</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.MATCH">MATCH</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_S">match_S</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span> = <span class="id"><a href="compcert.backend.ValueDomain.html#Ptr">Ptr</a></span>(<span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#ofs">ofs</a></span>) -&gt; <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#ofs">ofs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3215')">Proof.</div>
<div class="proofscript" id="proof3215">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ptr_stk">vmatch_ptr_stk</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.MATCH">MATCH</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">InvApproxRegs</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id">_</span> :: <span class="id">_</span> = <span class="id">_</span> :: <span class="id">_</span> |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">intros</span>; <span class="id">InvApproxRegs</span><br/>
&nbsp;&nbsp;| [ <span class="id">H</span>: ?<span class="id">v</span> = <span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> ?<span class="id">r</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span> |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.MATCH">MATCH</a></span> <span class="id">r</span>); <span class="tactic">rewrite</span> &lt;- <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">intro</span>; <span class="id">InvApproxRegs</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">SimplVM</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">_</span> ?<span class="id">v</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#I">I</a></span> ?<span class="id">n</span>) |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">E</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">E</span>: <span class="id">v</span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span>) <span class="tactic">by</span> (<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">SimplVM</span><br/>
&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">_</span> ?<span class="id">v</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#L">L</a></span> ?<span class="id">n</span>) |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">E</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">E</span>: <span class="id">v</span> = <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n</span>) <span class="tactic">by</span> (<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">SimplVM</span><br/>
&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">_</span> ?<span class="id">v</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#F">F</a></span> ?<span class="id">n</span>) |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">E</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">E</span>: <span class="id">v</span> = <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">n</span>) <span class="tactic">by</span> (<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">SimplVM</span><br/>
&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">_</span> ?<span class="id">v</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#FS">FS</a></span> ?<span class="id">n</span>) |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">E</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">E</span>: <span class="id">v</span> = <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">n</span>) <span class="tactic">by</span> (<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E</span> <span class="kwd">in</span> *; <span class="tactic">clear</span> <span class="id">H</span>; <span class="id">SimplVM</span><br/>
&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">_</span> ?<span class="id">v</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ptr">Ptr</a></span>(<span class="id"><a href="compcert.backend.ValueDomain.html#Gl">Gl</a></span> ?<span class="id">id</span> ?<span class="id">ofs</span>)) |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">E</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">E</span>: <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id">v</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> <span class="id">id</span> <span class="id">ofs</span>)) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ptr_gl">vmatch_ptr_gl</a></span>; <span class="tactic">eauto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>; <span class="id">SimplVM</span><br/>
&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id">_</span> ?<span class="id">v</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Ptr">Ptr</a></span>(<span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> ?<span class="id">ofs</span>)) |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">E</span> := <span class="tactic">fresh</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">E</span>: <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id">v</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id">ofs</span>)) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ptr_stk">vmatch_ptr_stk</a></span>; <span class="tactic">eauto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">H</span>; <span class="id">SimplVM</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_Olea_ptr">eval_Olea_ptr</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">el</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id"><a href="compcert.x86.ConstpropOp.html#Olea_ptr">Olea_ptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#a">a</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#el">el</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#a">a</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#el">el</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3216')">Proof.</div>
<div class="proofscript" id="proof3216">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#Olea_ptr">Olea_ptr</a></span>, <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="const_for_result_correct">const_for_result_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">op</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOp.html#const_for_result">const_for_result</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#a">a</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>', <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>' /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> <span class="id">v</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3217')">Proof.</div>
<div class="proofscript" id="proof3217">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#const_for_result">const_for_result</a></span>. <span class="tactic">generalize</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">intros</span> <span class="id">ptr64</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">SimplVM</span>.<br/>
- <span class="comment">(*&nbsp;integer&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span>); <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;long&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ptr64</span>; <span class="id">inv</span> <span class="id">H2</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n</span>); <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;float&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#generate_float_constants">Compopts.generate_float_constants</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>); <span class="id">inv</span> <span class="id">H2</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f</span>); <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;single&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.driver.Compopts.html#generate_float_constants">Compopts.generate_float_constants</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>); <span class="id">inv</span> <span class="id">H2</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f</span>); <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;pointer&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">SimplVM</span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;global&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOp.html#symbol_is_external">symbol_is_external</a></span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;* <span class="id">revert</span> <span class="id">H2</span>; <span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq">Ptrofs.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_spec">Ptrofs.eq_spec</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>; <span class="tactic">intros</span> <span class="id">EQ</span>; <span class="id">inv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> <span class="id">id</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;* <span class="id">inv</span> <span class="id">H2</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> <span class="id">id</span> <span class="id">ofs</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#eval_Olea_ptr">eval_Olea_ptr</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_Aglobal">eval_addressing_Aglobal</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="comment">(*&nbsp;stack&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id">ofs</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#eval_Olea_ptr">eval_Olea_ptr</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_Ainstack">eval_addressing_Ainstack</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="cond_strength_reduction_correct">cond_strength_reduction_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cond</span> <span class="id">args</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">cond</span>', <span class="id">args</span>') := <span class="id"><a href="compcert.x86.ConstpropOp.html#cond_strength_reduction">cond_strength_reduction</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#cond">cond</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id">cond</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id">args</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#cond">cond</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3218')">Proof.</div>
<div class="proofscript" id="proof3218">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">vl</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#cond_strength_reduction">cond_strength_reduction</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">case</span> (<span class="id"><a href="compcert.x86.ConstpropOp.html#cond_strength_reduction_match">cond_strength_reduction_match</a></span> <span class="id">cond</span> <span class="id">args</span> <span class="id">vl</span>); <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.swap_cmp_bool">Val.swap_cmp_bool</a></span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.swap_cmpu_bool">Val.swap_cmpu_bool</a></span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.swap_cmpl_bool">Val.swap_cmpl_bool</a></span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.swap_cmplu_bool">Val.swap_cmplu_bool</a></span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="addr_strength_reduction_32_generic_correct">addr_strength_reduction_32_generic_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span> <span class="id">res</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing32">eval_addressing32</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr">addr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#res">res</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">addr</span>', <span class="id">args</span>') := <span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_32_generic">addr_strength_reduction_32_generic</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr">addr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">res</span>', <span class="id"><a href="compcert.x86.Op.html#eval_addressing32">eval_addressing32</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">addr</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id">args</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">res</span>' /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#res">res</a></span> <span class="id">res</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3219')">Proof.</div>
<div class="proofscript" id="proof3219">
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.signed">Int.signed</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> + <span class="id"><a href="compcert.x86.ConstpropOpproof.html#y">y</a></span>) = <span class="id"><a href="compcert.lib.Integers.html#Int.add">Int.add</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#y">y</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqm_samerepr">Int.eqm_samerepr</a></span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqm_signed_unsigned">Int.eqm_signed_unsigned</a></span> <span class="kwd">with</span> <span class="id">ints</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">B</span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span>, <span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.signed">Int.signed</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> * <span class="id"><a href="compcert.x86.ConstpropOpproof.html#y">y</a></span> + <span class="id"><a href="compcert.x86.ConstpropOpproof.html#z">z</a></span>) = <span class="id"><a href="compcert.lib.Integers.html#Int.add">Int.add</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.mul">Int.mul</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#y">y</a></span>)) (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#z">z</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqm_samerepr">Int.eqm_samerepr</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqm_add">Int.eqm_add</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">ints</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Int.mul">Int.mul</a></span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqm_signed_unsigned">Int.eqm_signed_unsigned</a></span> <span class="kwd">with</span> <span class="id">ints</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">res</span>; <span class="tactic">intros</span> <span class="id">VL</span> <span class="id">EA</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_32_generic">addr_strength_reduction_32_generic</a></span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_32_generic_match">addr_strength_reduction_32_generic_match</a></span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span>);<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="tactic">try</span> (<span class="id">inv</span> <span class="id">EA</span>).<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">A</span>, <span class="id"><a href="compcert.common.Values.html#Val.add_assoc">Val.add_assoc</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.add_permut">Val.add_permut</a></span>. <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">A</span>, <span class="id"><a href="compcert.common.Values.html#Val.add_assoc">Val.add_assoc</a></span>. <span class="tactic">auto</span>.<br/>
- <span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">A</span>, <span class="id"><a href="compcert.common.Values.html#Val.add_permut">Val.add_permut</a></span>. <span class="tactic">auto</span>.<br/>
- <span class="id">exists</span> <span class="id">res</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="addr_strength_reduction_32_correct">addr_strength_reduction_32_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span> <span class="id">res</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing32">eval_addressing32</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr">addr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#res">res</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">addr</span>', <span class="id">args</span>') := <span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_32">addr_strength_reduction_32</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr">addr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">res</span>', <span class="id"><a href="compcert.x86.Op.html#eval_addressing32">eval_addressing32</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">addr</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id">args</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">res</span>' /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#res">res</a></span> <span class="id">res</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3220')">Proof.</div>
<div class="proofscript" id="proof3220">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">res</span>; <span class="tactic">intros</span> <span class="id">VL</span> <span class="id">EA</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_32">addr_strength_reduction_32</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id">eqn</span>:<span class="id">SF</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr_strength_reduction_32_generic_correct">addr_strength_reduction_32_generic_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>: <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int">Ptrofs.of_int</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>) = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>) <span class="tactic">by</span> <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">ptrofs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">B</span>: <span class="kwd">forall</span> <span class="id">symb</span> <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#symb">symb</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#symb">symb</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>))).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">A</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.shift_symbol_address_32">Genv.shift_symbol_address_32</a></span>; <span class="tactic">auto</span>. }<br/>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_32_match">addr_strength_reduction_32_match</a></span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span>);<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">FuncInv</span>; <span class="tactic">subst</span>; <span class="tactic">rewrite</span> ?<span class="id">SF</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.add_lessdef">Val.add_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>.<br/>
<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">SF</span>, <span class="id">A</span>. <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="tactic">at</span> 2. <span class="tactic">rewrite</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">n1</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int">Ptrofs.of_int</a></span> <span class="id">n2</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.shift_symbol_address_32">Genv.shift_symbol_address_32</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Values.html#Val.add_assoc">Val.add_assoc</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.add_lessdef">Val.add_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="tactic">at</span> 2. <span class="tactic">rewrite</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">n2</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int">Ptrofs.of_int</a></span> <span class="id">n1</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.shift_symbol_address_32">Genv.shift_symbol_address_32</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Values.html#Val.add_assoc">Val.add_assoc</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.add_permut">Val.add_permut</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.add_lessdef">Val.add_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.add_assoc">Val.add_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_trans">Val.lessdef_trans</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.add_lessdef">Val.add_lessdef</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">SF</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_assoc">Ptrofs.add_assoc</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>; <span class="tactic">do</span> 3 <span class="tactic">f_equal</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">ptrofs</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.add_assoc">Val.add_assoc</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.add_permut">Val.add_permut</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_trans">Val.lessdef_trans</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.add_lessdef">Val.add_lessdef</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">SF</span>. <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_commut">Ptrofs.add_commut</a></span> <span class="id">n2</span>). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_assoc">Ptrofs.add_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>; <span class="tactic">do</span> 3 <span class="tactic">f_equal</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">ptrofs</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Values.html#Val.add_assoc">Val.add_assoc</a></span>. <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Values.html#Val.add_commut">Val.add_commut</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">ofs</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.add_lessdef">Val.add_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Values.html#Val.add_commut">Val.add_commut</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>). <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Values.html#Val.add_assoc">Val.add_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Values.html#Val.add_commut">Val.add_commut</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">ofs</span>))). <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.add_lessdef">Val.add_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.shift_symbol_address_32">Genv.shift_symbol_address_32</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Values.html#Val.add_assoc">Val.add_assoc</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.add_lessdef">Val.add_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Values.html#Val.add_assoc">Val.add_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Values.html#Val.add_commut">Val.add_commut</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id">ofs</span>))). <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.add_lessdef">Val.add_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.shift_symbol_address_32">Genv.shift_symbol_address_32</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.shift_symbol_address_32">Genv.shift_symbol_address_32</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr_strength_reduction_32_generic_correct">addr_strength_reduction_32_generic_correct</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="addr_strength_reduction_64_generic_correct">addr_strength_reduction_64_generic_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span> <span class="id">res</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing64">eval_addressing64</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr">addr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#res">res</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">addr</span>', <span class="id">args</span>') := <span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_64_generic">addr_strength_reduction_64_generic</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr">addr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">res</span>', <span class="id"><a href="compcert.x86.Op.html#eval_addressing64">eval_addressing64</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">addr</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id">args</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">res</span>' /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#res">res</a></span> <span class="id">res</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3221')">Proof.</div>
<div class="proofscript" id="proof3221">
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.signed">Int64.signed</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> + <span class="id"><a href="compcert.x86.ConstpropOpproof.html#y">y</a></span>) = <span class="id"><a href="compcert.lib.Integers.html#Int64.add">Int64.add</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#y">y</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eqm_samerepr">Int64.eqm_samerepr</a></span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eqm_signed_unsigned">Int64.eqm_signed_unsigned</a></span> <span class="kwd">with</span> <span class="id">ints</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">B</span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span>, <span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.signed">Int64.signed</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> * <span class="id"><a href="compcert.x86.ConstpropOpproof.html#y">y</a></span> + <span class="id"><a href="compcert.x86.ConstpropOpproof.html#z">z</a></span>) = <span class="id"><a href="compcert.lib.Integers.html#Int64.add">Int64.add</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.mul">Int64.mul</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#y">y</a></span>)) (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#z">z</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eqm_samerepr">Int64.eqm_samerepr</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eqm_add">Int64.eqm_add</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">ints</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.mul">Int64.mul</a></span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eqm_signed_unsigned">Int64.eqm_signed_unsigned</a></span> <span class="kwd">with</span> <span class="id">ints</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">res</span>; <span class="tactic">intros</span> <span class="id">VL</span> <span class="id">EA</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_64_generic">addr_strength_reduction_64_generic</a></span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_64_generic_match">addr_strength_reduction_64_generic_match</a></span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span>);<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="tactic">try</span> (<span class="id">inv</span> <span class="id">EA</span>).<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">A</span>, <span class="id"><a href="compcert.common.Values.html#Val.addl_assoc">Val.addl_assoc</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.addl_permut">Val.addl_permut</a></span>. <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">A</span>, <span class="id"><a href="compcert.common.Values.html#Val.addl_assoc">Val.addl_assoc</a></span>. <span class="tactic">auto</span>.<br/>
- <span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">A</span>, <span class="id"><a href="compcert.common.Values.html#Val.addl_permut">Val.addl_permut</a></span>. <span class="tactic">auto</span>.<br/>
- <span class="id">exists</span> <span class="id">res</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="addr_strength_reduction_64_correct">addr_strength_reduction_64_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span> <span class="id">res</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing64">eval_addressing64</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr">addr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#res">res</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">addr</span>', <span class="id">args</span>') := <span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_64">addr_strength_reduction_64</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr">addr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">res</span>', <span class="id"><a href="compcert.x86.Op.html#eval_addressing64">eval_addressing64</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">addr</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id">args</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">res</span>' /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#res">res</a></span> <span class="id">res</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3222')">Proof.</div>
<div class="proofscript" id="proof3222">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">res</span>; <span class="tactic">intros</span> <span class="id">VL</span> <span class="id">EA</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_64">addr_strength_reduction_64</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>) <span class="id">eqn</span>:<span class="id">SF</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr_strength_reduction_64_generic_correct">addr_strength_reduction_64_generic_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#negb_false_iff">negb_false_iff</a></span> <span class="kwd">in</span> <span class="id">SF</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>: <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int64">Ptrofs.of_int64</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>) = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>) <span class="tactic">by</span> <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">ptrofs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">B</span>: <span class="kwd">forall</span> <span class="id">symb</span> <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#symb">symb</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#symb">symb</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>))).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">A</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.shift_symbol_address_64">Genv.shift_symbol_address_64</a></span>; <span class="tactic">auto</span>. }<br/>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_64_match">addr_strength_reduction_64_match</a></span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span>);<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">FuncInv</span>; <span class="tactic">subst</span>; <span class="tactic">rewrite</span> ?<span class="id">SF</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.addl_lessdef">Val.addl_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>.<br/>
<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">SF</span>, <span class="id">A</span>. <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="tactic">at</span> 2. <span class="tactic">rewrite</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">n1</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int64">Ptrofs.of_int64</a></span> <span class="id">n2</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.shift_symbol_address_64">Genv.shift_symbol_address_64</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Values.html#Val.addl_assoc">Val.addl_assoc</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.addl_lessdef">Val.addl_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="tactic">at</span> 2. <span class="tactic">rewrite</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">n2</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int64">Ptrofs.of_int64</a></span> <span class="id">n1</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.shift_symbol_address_64">Genv.shift_symbol_address_64</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Values.html#Val.addl_assoc">Val.addl_assoc</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.addl_permut">Val.addl_permut</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.addl_lessdef">Val.addl_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.addl_assoc">Val.addl_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_trans">Val.lessdef_trans</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.addl_lessdef">Val.addl_lessdef</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">SF</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_assoc">Ptrofs.add_assoc</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>; <span class="tactic">do</span> 3 <span class="tactic">f_equal</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">ptrofs</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.addl_assoc">Val.addl_assoc</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.addl_permut">Val.addl_permut</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_trans">Val.lessdef_trans</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.addl_lessdef">Val.addl_lessdef</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">SF</span>. <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_commut">Ptrofs.add_commut</a></span> <span class="id">n2</span>). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_assoc">Ptrofs.add_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>; <span class="tactic">do</span> 3 <span class="tactic">f_equal</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">ptrofs</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.shift_symbol_address_64">Genv.shift_symbol_address_64</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Values.html#Val.addl_assoc">Val.addl_assoc</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.addl_lessdef">Val.addl_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr_strength_reduction_64_generic_correct">addr_strength_reduction_64_generic_correct</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="addr_strength_reduction_correct">addr_strength_reduction_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span> <span class="id">res</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr">addr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#res">res</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">addr</span>', <span class="id">args</span>') := <span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction">addr_strength_reduction</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr">addr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">res</span>', <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">addr</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id">args</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">res</span>' /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#res">res</a></span> <span class="id">res</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3223')">Proof.</div>
<div class="proofscript" id="proof3223">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">res</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction">addr_strength_reduction</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">aa</span> := <span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_64">addr_strength_reduction_64</a></span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_32">addr_strength_reduction_32</a></span> <span class="id">addr</span> <span class="id">args</span> <span class="id">vl</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.Op.html#addressing_valid">addressing_valid</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">aa</span>)).<br/>
- <span class="tactic">unfold</span> <span class="id">aa</span>, <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>.<br/>
+ <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr_strength_reduction_64_correct">addr_strength_reduction_64_correct</a></span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr_strength_reduction_32_correct">addr_strength_reduction_32_correct</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">exists</span> <span class="id">res</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_cmp_base_correct">make_cmp_base_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">args</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>', <span class="id">args</span>') := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cmp_base">make_cmp_base</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#c">c</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">op</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id">args</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.of_optbool">Val.of_optbool</a></span> (<span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#c">c</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3224')">Proof.</div>
<div class="proofscript" id="proof3224">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cmp_base">make_cmp_base</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#cond_strength_reduction_correct">cond_strength_reduction_correct</a></span> <span class="id">c</span> <span class="id">args</span> <span class="id">vl</span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOp.html#cond_strength_reduction">cond_strength_reduction</a></span> <span class="id">c</span> <span class="id">args</span> <span class="id">vl</span>) <span class="kwd">as</span> [<span class="id">c</span>' <span class="id">args</span>']. <span class="tactic">intros</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">EQ</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_cmp_correct">make_cmp_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">args</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>', <span class="id">args</span>') := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cmp">make_cmp</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#c">c</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">op</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id">args</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.of_optbool">Val.of_optbool</a></span> (<span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#c">c</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3225')">Proof.</div>
<div class="proofscript" id="proof3225">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">c</span> <span class="id">args</span> <span class="id">vl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Y</span>: <span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> (<span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span>) (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 1) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> = <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> \/ <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span> \/ <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_Uns_1">vmatch_Uns_1</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ge">vmatch_ge</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vincl_ge">vincl_ge</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.MATCH">MATCH</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cmp">make_cmp</a></span>. <span class="tactic">case</span> (<span class="id"><a href="compcert.x86.ConstpropOp.html#make_cmp_match">make_cmp_match</a></span> <span class="id">c</span> <span class="id">args</span> <span class="id">vl</span>); <span class="tactic">intros</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cmp_imm_eq">make_cmp_imm_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> <span class="id">v1</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 1)) <span class="id">eqn</span>:<span class="id">E1</span>.<br/>
+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="id">InvBooleans</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">Y</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | [<span class="id">A</span> | <span class="id">A</span>]]; <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> <span class="id">v1</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 1)) <span class="id">eqn</span>:<span class="id">E0</span>.<br/>
* <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="id">InvBooleans</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.xor">Val.xor</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span>)); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">Y</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | [<span class="id">A</span> | <span class="id">A</span>]]; <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
* <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_cmp_base_correct">make_cmp_base_correct</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cmp_imm_ne">make_cmp_imm_ne</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> <span class="id">v1</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 1)) <span class="id">eqn</span>:<span class="id">E0</span>.<br/>
+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="id">InvBooleans</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">Y</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | [<span class="id">A</span> | <span class="id">A</span>]]; <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> <span class="id">v1</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 1)) <span class="id">eqn</span>:<span class="id">E1</span>.<br/>
* <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="id">InvBooleans</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.xor">Val.xor</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span>)); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">Y</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | [<span class="id">A</span> | <span class="id">A</span>]]; <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
* <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_cmp_base_correct">make_cmp_base_correct</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cmp_imm_eq">make_cmp_imm_eq</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> <span class="id">v1</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 1)) <span class="id">eqn</span>:<span class="id">E1</span>.<br/>
+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="id">InvBooleans</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">Y</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | [<span class="id">A</span> | <span class="id">A</span>]]; <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> <span class="id">v1</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 1)) <span class="id">eqn</span>:<span class="id">E0</span>.<br/>
* <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="id">InvBooleans</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.xor">Val.xor</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span>)); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">Y</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | [<span class="id">A</span> | <span class="id">A</span>]]; <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
* <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_cmp_base_correct">make_cmp_base_correct</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cmp_imm_ne">make_cmp_imm_ne</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> <span class="id">v1</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 1)) <span class="id">eqn</span>:<span class="id">E0</span>.<br/>
+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="id">InvBooleans</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">Y</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | [<span class="id">A</span> | <span class="id">A</span>]]; <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> <span class="id">v1</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 1)) <span class="id">eqn</span>:<span class="id">E1</span>.<br/>
* <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="id">InvBooleans</span>. <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.xor">Val.xor</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span>)); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">Y</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | [<span class="id">A</span> | <span class="id">A</span>]]; <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
* <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_cmp_base_correct">make_cmp_base_correct</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_cmp_base_correct">make_cmp_base_correct</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_addimm_correct">make_addimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_addimm">make_addimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3226')">Proof.</div>
<div class="proofscript" id="proof3226">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_addimm">make_addimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>; <span class="tactic">rewrite</span> ?<span class="id"><a href="compcert.lib.Integers.html#Int.add_zero">Int.add_zero</a></span>, ?<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n</span>)); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.repr_signed">Int.repr_signed</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_shlimm_correct">make_shlimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_shlimm">make_shlimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.shl">Val.shl</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3227')">Proof.</div>
<div class="proofscript" id="proof3227">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_shlimm">make_shlimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.shl_zero">Int.shl_zero</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.iwordsize">Int.iwordsize</a></span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_shrimm_correct">make_shrimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_shrimm">make_shrimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.shr">Val.shr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3228')">Proof.</div>
<div class="proofscript" id="proof3228">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_shrimm">make_shrimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.shr_zero">Int.shr_zero</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.iwordsize">Int.iwordsize</a></span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_shruimm_correct">make_shruimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_shruimm">make_shruimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.shru">Val.shru</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3229')">Proof.</div>
<div class="proofscript" id="proof3229">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_shruimm">make_shruimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.shru_zero">Int.shru_zero</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.iwordsize">Int.iwordsize</a></span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_mulimm_correct">make_mulimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_mulimm">make_mulimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.mul">Val.mul</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3230')">Proof.</div>
<div class="proofscript" id="proof3230">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_mulimm">make_mulimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.mul_zero">Int.mul_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.mul_one">Int.mul_one</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.is_power2">Int.is_power2</a></span> <span class="id">n</span>) <span class="id">eqn</span>:?; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Values.html#Val.mul_pow2">Val.mul_pow2</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Heqo</span>). <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_divimm_correct">make_divimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.divs">Val.divs</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_divimm">make_divimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">w</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3231')">Proof.</div>
<div class="proofscript" id="proof3231">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_divimm">make_divimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>) <span class="id">eqn</span>:?;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.divs_one">Val.divs_one</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>); <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Heqv0</span>; <span class="tactic">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.is_power2">Int.is_power2</a></span> <span class="id">n</span>) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 31)) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.divs_pow2">Val.divs_pow2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_divuimm_correct">make_divuimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.divu">Val.divu</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_divuimm">make_divuimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">w</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3232')">Proof.</div>
<div class="proofscript" id="proof3232">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_divuimm">make_divuimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>) <span class="id">eqn</span>:?;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.divu_one">Val.divu_one</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>); <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">Heqv0</span>; <span class="tactic">auto</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.is_power2">Int.is_power2</a></span> <span class="id">n</span>) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.divu_pow2">Val.divu_pow2</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_moduimm_correct">make_moduimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.modu">Val.modu</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_moduimm">make_moduimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">w</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3233')">Proof.</div>
<div class="proofscript" id="proof3233">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_moduimm">make_moduimm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.is_power2">Int.is_power2</a></span> <span class="id">n</span>) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="id">decEq</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.modu_pow2">Val.modu_pow2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_andimm_correct">make_andimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_andimm">make_andimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3234')">Proof.</div>
<div class="proofscript" id="proof3234">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_andimm">make_andimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">n</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.and_zero">Int.and_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">n</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.and_mone">Int.and_mone</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="kwd">match</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id">_</span> <span class="id">k</span> =&gt; <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">k</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id">n</span>)) <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="kwd">end</span>) <span class="id">eqn</span>:<span class="id">UNS</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">replace</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id">i</span> <span class="id">n</span>) <span class="kwd">with</span> <span class="id">i</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id">n0</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id">n</span>)) <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>); <span class="tactic">rewrite</span> <span class="id">UNS</span>; <span class="tactic">intro</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">Int.bit_solve</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i0</span> <span class="id">n0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id">n</span> <span class="id">i0</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span> <span class="id">i0</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero">Int.bits_zero</a></span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_r">andb_true_r</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">EQ</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_not">Int.bits_not</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#negb_involutive">negb_involutive</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H6</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_orimm_correct">make_orimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_orimm">make_orimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3235')">Proof.</div>
<div class="proofscript" id="proof3235">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_orimm">make_orimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">n</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.or_zero">Int.or_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">n</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.or_mone">Int.or_mone</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_xorimm_correct">make_xorimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_xorimm">make_xorimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.xor">Val.xor</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3236')">Proof.</div>
<div class="proofscript" id="proof3236">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_xorimm">make_xorimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">n</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.xor_zero">Int.xor_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">n</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.notint">Val.notint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_addlimm_correct">make_addlimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_addlimm">make_addlimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3237')">Proof.</div>
<div class="proofscript" id="proof3237">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_addlimm">make_addlimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq_spec">Int64.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>; <span class="tactic">rewrite</span> ? <span class="id"><a href="compcert.lib.Integers.html#Int64.add_zero">Int64.add_zero</a></span>, ? <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n</span>)); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.repr_signed">Int64.repr_signed</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_shllimm_correct">make_shllimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_shllimm">make_shllimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.shll">Val.shll</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3238')">Proof.</div>
<div class="proofscript" id="proof3238">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_shllimm">make_shllimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">Int64.shl</span>'. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftl_0_r">Z.shiftl_0_r</a></span>, <span class="id"><a href="compcert.lib.Integers.html#Int64.repr_unsigned">Int64.repr_unsigned</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">n</span> <span class="id">Int64.iwordsize</span>').<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_shrlimm_correct">make_shrlimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_shrlimm">make_shrlimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.shrl">Val.shrl</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3239')">Proof.</div>
<div class="proofscript" id="proof3239">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_shrlimm">make_shrlimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">Int64.shr</span>'. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftr_0_r">Z.shiftr_0_r</a></span>, <span class="id"><a href="compcert.lib.Integers.html#Int64.repr_signed">Int64.repr_signed</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">n</span> <span class="id">Int64.iwordsize</span>').<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_shrluimm_correct">make_shrluimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_shrluimm">make_shrluimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.shrlu">Val.shrlu</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3240')">Proof.</div>
<div class="proofscript" id="proof3240">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_shrluimm">make_shrluimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_spec">Int.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">Int64.shru</span>'. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.shiftr_0_r">Z.shiftr_0_r</a></span>, <span class="id"><a href="compcert.lib.Integers.html#Int64.repr_unsigned">Int64.repr_unsigned</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">n</span> <span class="id">Int64.iwordsize</span>').<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_mullimm_correct">make_mullimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_mullimm">make_mullimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.mull">Val.mull</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3241')">Proof.</div>
<div class="proofscript" id="proof3241">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_mullimm">make_mullimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq_spec">Int64.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.mul_zero">Int64.mul_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq_spec">Int64.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.one">Int64.one</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.mul_one">Int64.mul_one</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">Int64.is_power2</span>' <span class="id">n</span>) <span class="id">eqn</span>:?; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.shll">Val.shll</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>)); <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">Int64.is_power2</span>'<span class="id">_range</span> <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">Int64.mul_pow2</span>' <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_divlimm_correct">make_divlimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.divls">Val.divls</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_divlimm">make_divlimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">w</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3242')">Proof.</div>
<div class="proofscript" id="proof3242">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_divlimm">make_divlimm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">Int64.is_power2</span>' <span class="id">n</span>) <span class="id">eqn</span>:?. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 63)) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.divls_pow2">Val.divls_pow2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_divluimm_correct">make_divluimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.divlu">Val.divlu</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_divluimm">make_divluimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">w</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3243')">Proof.</div>
<div class="proofscript" id="proof3243">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_divluimm">make_divluimm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">Int64.is_power2</span>' <span class="id">n</span>) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>); <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">Int64.is_power2</span>'<span class="id">_range</span> <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">Int64.divu_pow2</span>' <span class="tactic">by</span> <span class="tactic">eauto</span>.  <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_modluimm_correct">make_modluimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.modlu">Val.modlu</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_modluimm">make_modluimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">w</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3244')">Proof.</div>
<div class="proofscript" id="proof3244">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_modluimm">make_modluimm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.is_power2">Int64.is_power2</a></span> <span class="id">n</span>) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>); <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.modu_and">Int64.modu_and</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_andlimm_correct">make_andlimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_andlimm">make_andlimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.andl">Val.andl</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3245')">Proof.</div>
<div class="proofscript" id="proof3245">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_andlimm">make_andlimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq_spec">Int64.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">n</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.and_zero">Int64.and_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq_spec">Int64.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.mone">Int64.mone</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">n</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.and_mone">Int64.and_mone</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_orlimm_correct">make_orlimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_orlimm">make_orlimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.orl">Val.orl</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3246')">Proof.</div>
<div class="proofscript" id="proof3246">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_orlimm">make_orlimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq_spec">Int64.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">n</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.or_zero">Int64.or_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq_spec">Int64.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.mone">Int64.mone</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">n</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.mone">Int64.mone</a></span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.or_mone">Int64.or_mone</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_xorlimm_correct">make_xorlimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_xorlimm">make_xorlimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.xorl">Val.xorl</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span>)) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3247')">Proof.</div>
<div class="proofscript" id="proof3247">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_xorlimm">make_xorlimm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq_spec">Int64.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">n</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.xor_zero">Int64.xor_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">predSpec</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.eq_spec">Int64.eq_spec</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.mone">Int64.mone</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">n</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.notl">Val.notl</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>); <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_mulfimm_correct">make_mulfimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_mulfimm">make_mulfimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.mulf">Val.mulf</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3248')">Proof.</div>
<div class="proofscript" id="proof3248">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_mulfimm">make_mulfimm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Floats.html#Float.eq_dec">Float.eq_dec</a></span> <span class="id">n</span> (<span class="id"><a href="compcert.lib.Floats.html#Float.of_int">Float.of_int</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 2))); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Floats.html#Float.mul2_add">Float.mul2_add</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_mulfimm_correct_2">make_mulfimm_correct_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> = <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_mulfimm">make_mulfimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.mulf">Val.mulf</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3249')">Proof.</div>
<div class="proofscript" id="proof3249">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_mulfimm">make_mulfimm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Floats.html#Float.eq_dec">Float.eq_dec</a></span> <span class="id">n</span> (<span class="id"><a href="compcert.lib.Floats.html#Float.of_int">Float.of_int</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 2))); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r2</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Floats.html#Float.mul2_add">Float.mul2_add</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Floats.html#Float.mul_commut">Float.mul_commut</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_mulfsimm_correct">make_mulfsimm_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> = <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_mulfsimm">make_mulfsimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.mulfs">Val.mulfs</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3250')">Proof.</div>
<div class="proofscript" id="proof3250">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_mulfsimm">make_mulfsimm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Floats.html#Float32.eq_dec">Float32.eq_dec</a></span> <span class="id">n</span> (<span class="id"><a href="compcert.lib.Floats.html#Float32.of_int">Float32.of_int</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 2))); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Floats.html#Float32.mul2_add">Float32.mul2_add</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_mulfsimm_correct_2">make_mulfsimm_correct_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> = <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_mulfsimm">make_mulfsimm</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#n">n</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.mulfs">Val.mulfs</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r1">r1</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r2">r2</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3251')">Proof.</div>
<div class="proofscript" id="proof3251">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_mulfsimm">make_mulfsimm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Floats.html#Float32.eq_dec">Float32.eq_dec</a></span> <span class="id">n</span> (<span class="id"><a href="compcert.lib.Floats.html#Float32.of_int">Float32.of_int</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 2))); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">subst</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r2</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Floats.html#Float32.mul2_add">Float32.mul2_add</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Floats.html#Float32.mul_commut">Float32.mul_commut</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_cast8signed_correct">make_cast8signed_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cast8signed">make_cast8signed</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> 8 <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3252')">Proof.</div>
<div class="proofscript" id="proof3252">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cast8signed">make_cast8signed</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Sgn">Sgn</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 8)) <span class="id">eqn</span>:<span class="id">INCL</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">V</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Sgn">Sgn</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 8)).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ge">vmatch_ge</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vincl_ge">vincl_ge</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">V</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#is_sgn_sign_ext">is_sgn_sign_ext</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_cast8unsigned_correct">make_cast8unsigned_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cast8unsigned">make_cast8unsigned</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> 8 <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3253')">Proof.</div>
<div class="proofscript" id="proof3253">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cast8unsigned">make_cast8unsigned</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 8)) <span class="id">eqn</span>:<span class="id">INCL</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">V</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 8)).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ge">vmatch_ge</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vincl_ge">vincl_ge</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">V</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#is_uns_zero_ext">is_uns_zero_ext</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_cast16signed_correct">make_cast16signed_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cast16signed">make_cast16signed</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> 16 <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3254')">Proof.</div>
<div class="proofscript" id="proof3254">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cast16signed">make_cast16signed</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Sgn">Sgn</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 16)) <span class="id">eqn</span>:<span class="id">INCL</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">V</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Sgn">Sgn</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 16)).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ge">vmatch_ge</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vincl_ge">vincl_ge</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">V</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#is_sgn_sign_ext">is_sgn_sign_ext</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="make_cast16unsigned_correct">make_cast16unsigned_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>, <span class="id">args</span>) := <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cast16unsigned">make_cast16unsigned</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#x">x</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> 16 <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3255')">Proof.</div>
<div class="proofscript" id="proof3255">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#make_cast16unsigned">make_cast16unsigned</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#vincl">vincl</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 16)) <span class="id">eqn</span>:<span class="id">INCL</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">V</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch">vmatch</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.bc">bc</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r</span> (<span class="id"><a href="compcert.backend.ValueDomain.html#Uns">Uns</a></span> <span class="id"><a href="compcert.backend.ValueDomain.html#Ptop">Ptop</a></span> 16)).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vmatch_ge">vmatch_ge</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#vincl_ge">vincl_ge</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">V</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.ValueDomain.html#is_uns_zero_ext">is_uns_zero_ext</a></span> <span class="kwd">in</span> <span class="id">H4</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H4</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="op_strength_reduction_correct">op_strength_reduction_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">op</span> <span class="id">args</span> <span class="id">vl</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.backend.ValueDomain.html#AE.get">AE.get</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#r">r</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ae">ae</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">op</span>', <span class="id">args</span>') := <span class="id"><a href="compcert.x86.ConstpropOp.html#op_strength_reduction">op_strength_reduction</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#op">op</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#args">args</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#vl">vl</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">w</span>, <span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">op</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>##<span class="id">args</span>' <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#v">v</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#w">w</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3256')">Proof.</div>
<div class="proofscript" id="proof3256">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">v</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.ConstpropOp.html#op_strength_reduction">op_strength_reduction</a></span>;<br/>
&nbsp;&nbsp;<span class="tactic">case</span> (<span class="id"><a href="compcert.x86.ConstpropOp.html#op_strength_reduction_match">op_strength_reduction_match</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">vl</span>); <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;cast8signed&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_cast8signed_correct">make_cast8signed_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;cast8unsigned&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_cast8unsigned_correct">make_cast8unsigned_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;cast16signed&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_cast16signed_correct">make_cast16signed_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;cast16unsigned&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_cast16unsigned_correct">make_cast16unsigned_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;sub&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.sub_add_opp">Val.sub_add_opp</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_addimm_correct">make_addimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;mul&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.mul_commut">Val.mul_commut</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_mulimm_correct">make_mulimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_mulimm_correct">make_mulimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;divs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r2</span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n2</span>). <span class="tactic">clear</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_divimm_correct">make_divimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;divu&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r2</span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n2</span>). <span class="tactic">clear</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_divuimm_correct">make_divuimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;modu&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r2</span> = <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">n2</span>). <span class="tactic">clear</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_moduimm_correct">make_moduimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;and&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.and_commut">Val.and_commut</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_andimm_correct">make_andimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_andimm_correct">make_andimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_andimm_correct">make_andimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;or&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.or_commut">Val.or_commut</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_orimm_correct">make_orimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_orimm_correct">make_orimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;xor&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.xor_commut">Val.xor_commut</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_xorimm_correct">make_xorimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_xorimm_correct">make_xorimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;shl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_shlimm_correct">make_shlimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;shr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_shrimm_correct">make_shrimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;shru&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_shruimm_correct">make_shruimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;lea&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr_strength_reduction_32_correct">addr_strength_reduction_32_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_32">addr_strength_reduction_32</a></span> <span class="id">addr</span> <span class="id">args0</span> <span class="id">vl0</span>) <span class="kwd">as</span> [<span class="id">addr</span>' <span class="id">args</span>'].<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;subl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.common.Values.html#Val.subl">Val.subl</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n2</span>)) <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.neg">Int64.neg</a></span> <span class="id">n2</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_addlimm_correct">make_addlimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.subl">Val.subl</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id">eqn</span>:<span class="id">SF</span>, <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.sub_add_opp">Int64.sub_add_opp</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.sub_add_opp">Ptrofs.sub_add_opp</a></span>. <span class="tactic">do</span> 2 <span class="tactic">f_equal</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">ptrofs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.sub_add_opp">Int64.sub_add_opp</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;mull&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.mull_commut">Val.mull_commut</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_mullimm_correct">make_mullimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_mullimm_correct">make_mullimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;divl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r2</span> = <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n2</span>). <span class="tactic">clear</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_divlimm_correct">make_divlimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;divlu&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r2</span> = <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n2</span>). <span class="tactic">clear</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_divluimm_correct">make_divluimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;modlu&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r2</span> = <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">n2</span>). <span class="tactic">clear</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_modluimm_correct">make_modluimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;andl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.andl_commut">Val.andl_commut</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_andlimm_correct">make_andlimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_andlimm_correct">make_andlimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_andlimm_correct">make_andlimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;orl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.orl_commut">Val.orl_commut</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_orlimm_correct">make_orlimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_orlimm_correct">make_orlimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;xorl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.xorl_commut">Val.xorl_commut</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_xorlimm_correct">make_xorlimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_xorlimm_correct">make_xorlimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;shll&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_shllimm_correct">make_shllimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;shrl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_shrlimm_correct">make_shrlimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;shrlu&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_shrluimm_correct">make_shrluimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;leal&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#addr_strength_reduction_64_correct">addr_strength_reduction_64_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.x86.ConstpropOp.html#addr_strength_reduction_64">addr_strength_reduction_64</a></span> <span class="id">addr</span> <span class="id">args0</span> <span class="id">vl0</span>) <span class="kwd">as</span> [<span class="id">addr</span>' <span class="id">args</span>'].<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;cond&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_cmp_correct">make_cmp_correct</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;mulf&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_mulfimm_correct">make_mulfimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="id">fold</span> (<span class="id"><a href="compcert.common.Values.html#Val.mulf">Val.mulf</a></span> (<span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">n1</span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_mulfimm_correct_2">make_mulfimm_correct_2</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;mulfs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_mulfsimm_correct">make_mulfsimm_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">InvApproxRegs</span>; <span class="id">SimplVM</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="id">fold</span> (<span class="id"><a href="compcert.common.Values.html#Val.mulfs">Val.mulfs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">n1</span>) <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION.e">e</a></span>#<span class="id">r2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#make_mulfsimm_correct_2">make_mulfsimm_correct_2</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;default&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.x86.ConstpropOpproof.html#STRENGTH_REDUCTION">STRENGTH_REDUCTION</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
