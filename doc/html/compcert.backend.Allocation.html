
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Allocation</title>
<meta name="description" content="Documentation of Coq module Allocation" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Allocation</h1>
<div class="coq">
<br/>
<div class="doc">Register allocation by external oracle and a posteriori validation. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSets.html">FSets</a></span> <span class="id"><a href="compcert.lib.FSetAVLplus.html">FSetAVLplus</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.lib.Ordered.html">Ordered</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.lib.Lattice.html">Lattice</a></span> <span class="id"><a href="compcert.backend.Kildall.html">Kildall</a></span> <span class="id"><a href="compcert.common.Memdata.html">Memdata</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.x86_64.Archi.html">Archi</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span> <span class="id"><a href="compcert.backend.Registers.html">Registers</a></span> <span class="id"><a href="compcert.backend.RTL.html">RTL</a></span> <span class="id"><a href="compcert.backend.Locations.html">Locations</a></span> <span class="id"><a href="compcert.backend.Conventions.html">Conventions</a></span> <span class="id"><a href="compcert.backend.RTLtyping.html">RTLtyping</a></span> <span class="id"><a href="compcert.backend.LTL.html">LTL</a></span>.<br/>
<br/>
<div class="doc">The validation algorithm used here is described in
  "Validating register allocation and spilling",
  by Silvain Rideau and Xavier Leroy,
  in Compiler Construction (CC 2010), LNCS 6011, Springer, 2010. </div>
<br/>
<h1> Structural checks </h1>
<br/>
<div class="doc">As a first pass, we check the LTL code returned by the external oracle
  against the original RTL code for structural conformance.
  Each RTL instruction was transformed into a LTL basic block whose
  shape must agree with the RTL instruction.  For example, if the RTL
  instruction is <span class="bracket"><span class="id">Istore</span>(<span class="id">Mint32</span>, <span class="id">addr</span>, <span class="id">args</span>, <span class="id">src</span>, <span class="id">s</span>)</span>, the LTL basic block
  must be of the following shape:
<ul>
<li>
 zero, one or several "move" instructions
</li>
<li>
 a store instruction <span class="bracket"><span class="id">Lstore</span>(<span class="id">Mint32</span>, <span class="id">addr</span>, <span class="id">args</span>', <span class="id">src</span>')</span>
</li>
<li>
 a <span class="bracket"><span class="id">Lbranch</span> <span class="id">s</span></span> instruction.
</li>
</ul>
  The <span class="bracket"><span class="id">block_shape</span></span> type below describes all possible cases of structural
  maching between an RTL instruction and an LTL basic block.
</div>
<br/>
<span class="kwd">Inductive</span> <span class="tactic">move</span>: <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="MV">MV</a></span> (<span class="id">src</span> <span class="id">dst</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="MVmakelong">MVmakelong</a></span> (<span class="id">src1</span> <span class="id">src2</span> <span class="id">dst</span>: <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="MVlowlong">MVlowlong</a></span> (<span class="id">src</span> <span class="id">dst</span>: <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="MVhighlong">MVhighlong</a></span> (<span class="id">src</span> <span class="id">dst</span>: <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="moves">moves</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="tactic">move</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="block_shape">block_shape</a></span>: <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSnop">BSnop</a></span> (<span class="id">mv</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSmove">BSmove</a></span> (<span class="id">src</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">dst</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">mv</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSmakelong">BSmakelong</a></span> (<span class="id">src1</span> <span class="id">src2</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">dst</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">mv</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSlowlong">BSlowlong</a></span> (<span class="id">src</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">dst</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">mv</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BShighlong">BShighlong</a></span> (<span class="id">src</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">dst</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">mv</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSop">BSop</a></span> (<span class="id">op</span>: <span class="id"><a href="compcert.x86.Op.html#operation">operation</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">res</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv1</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">args</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">res</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv2</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSopdead">BSopdead</a></span> (<span class="id">op</span>: <span class="id"><a href="compcert.x86.Op.html#operation">operation</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">res</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSload">BSload</a></span> (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">addr</span>: <span class="id"><a href="compcert.x86.Op.html#addressing">addressing</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">dst</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv1</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">args</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">dst</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv2</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSloaddead">BSloaddead</a></span> (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">addr</span>: <span class="id"><a href="compcert.x86.Op.html#addressing">addressing</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">dst</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSload2">BSload2</a></span> (<span class="id">addr1</span> <span class="id">addr2</span>: <span class="id"><a href="compcert.x86.Op.html#addressing">addressing</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">dst</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv1</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">args1</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">dst1</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv2</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">args2</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">dst2</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv3</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSload2_1">BSload2_1</a></span> (<span class="id">addr</span>: <span class="id"><a href="compcert.x86.Op.html#addressing">addressing</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">dst</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv1</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">args</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">dst</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv2</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSload2_2">BSload2_2</a></span> (<span class="id">addr</span> <span class="id">addr</span>': <span class="id"><a href="compcert.x86.Op.html#addressing">addressing</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">dst</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv1</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">args</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">dst</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv2</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSstore">BSstore</a></span> (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">addr</span>: <span class="id"><a href="compcert.x86.Op.html#addressing">addressing</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">src</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv1</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">args</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">src</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSstore2">BSstore2</a></span> (<span class="id">addr1</span> <span class="id">addr2</span>: <span class="id"><a href="compcert.x86.Op.html#addressing">addressing</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">src</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv1</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">args1</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">src1</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv2</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">args2</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">src2</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BScall">BScall</a></span> (<span class="id">sg</span>: <span class="id"><a href="compcert.common.AST.html#signature">signature</a></span>) (<span class="id">ros</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span> + <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">res</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv1</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">ros</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span> + <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) (<span class="id">mv2</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BStailcall">BStailcall</a></span> (<span class="id">sg</span>: <span class="id"><a href="compcert.common.AST.html#signature">signature</a></span>) (<span class="id">ros</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span> + <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv1</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">ros</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span> + <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSbuiltin">BSbuiltin</a></span> (<span class="id">ef</span>: <span class="id"><a href="compcert.common.AST.html#external_function">external_function</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)) (<span class="id">res</span>: <span class="id"><a href="compcert.common.AST.html#builtin_res">builtin_res</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv1</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">args</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>)) (<span class="id">res</span>': <span class="id"><a href="compcert.common.AST.html#builtin_res">builtin_res</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv2</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BScond">BScond</a></span> (<span class="id">cond</span>: <span class="id"><a href="compcert.x86.Op.html#condition">condition</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">args</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">s1</span> <span class="id">s2</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSjumptable">BSjumptable</a></span> (<span class="id">arg</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">arg</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">tbl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="BSreturn">BSreturn</a></span> (<span class="id">arg</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">mv</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>).<br/>
<br/>
<div class="doc">Classify operations into moves, 64-bit split integer operations, and other
  arithmetic/logical operations. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="operation_kind">operation_kind</a></span> {<span class="id">A</span>: <span class="kwd">Type</span>}: <span class="id"><a href="compcert.x86.Op.html#operation">operation</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id">A</span> -&gt; <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="operation_Omove">operation_Omove</a></span>: <span class="kwd">forall</span> <span class="id">arg</span>, <span class="id"><a href="compcert.backend.Allocation.html#operation_kind">operation_kind</a></span> <span class="id"><a href="compcert.x86.Op.html#Omove">Omove</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#arg">arg</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="operation_Omakelong">operation_Omakelong</a></span>: <span class="kwd">forall</span> <span class="id">arg1</span> <span class="id">arg2</span>, <span class="id"><a href="compcert.backend.Allocation.html#operation_kind">operation_kind</a></span> <span class="id"><a href="compcert.x86.Op.html#Omakelong">Omakelong</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#arg1">arg1</a></span> :: <span class="id"><a href="compcert.backend.Allocation.html#arg2">arg2</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="operation_Olowlong">operation_Olowlong</a></span>: <span class="kwd">forall</span> <span class="id">arg</span>, <span class="id"><a href="compcert.backend.Allocation.html#operation_kind">operation_kind</a></span> <span class="id"><a href="compcert.x86.Op.html#Olowlong">Olowlong</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#arg">arg</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="operation_Ohighlong">operation_Ohighlong</a></span>: <span class="kwd">forall</span> <span class="id">arg</span>, <span class="id"><a href="compcert.backend.Allocation.html#operation_kind">operation_kind</a></span> <span class="id"><a href="compcert.x86.Op.html#Ohighlong">Ohighlong</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#arg">arg</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="operation_other">operation_other</a></span>: <span class="kwd">forall</span> <span class="id">op</span> <span class="id">args</span>, <span class="id"><a href="compcert.backend.Allocation.html#operation_kind">operation_kind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#op">op</a></span> <span class="id"><a href="compcert.backend.Allocation.html#args">args</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="classify_operation">classify_operation</a></span> {<span class="id">A</span>: <span class="kwd">Type</span>} (<span class="id">op</span>: <span class="id"><a href="compcert.x86.Op.html#operation">operation</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Allocation.html#A">A</a></span>) : <span class="id"><a href="compcert.backend.Allocation.html#operation_kind">operation_kind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#op">op</a></span> <span class="id"><a href="compcert.backend.Allocation.html#args">args</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#op">op</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#args">args</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.x86.Op.html#Omove">Omove</a></span>, <span class="id">arg</span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#operation_Omove">operation_Omove</a></span> <span class="id">arg</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.x86.Op.html#Omakelong">Omakelong</a></span>, <span class="id">arg1</span>::<span class="id">arg2</span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#operation_Omakelong">operation_Omakelong</a></span> <span class="id">arg1</span> <span class="id">arg2</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.x86.Op.html#Olowlong">Olowlong</a></span>, <span class="id">arg</span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#operation_Olowlong">operation_Olowlong</a></span> <span class="id">arg</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.x86.Op.html#Ohighlong">Ohighlong</a></span>, <span class="id">arg</span>::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#operation_Ohighlong">operation_Ohighlong</a></span> <span class="id">arg</span><br/>
&nbsp;&nbsp;| <span class="id">op</span>, <span class="id">args</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#operation_other">operation_other</a></span> <span class="id"><a href="compcert.backend.Allocation.html#op">op</a></span> <span class="id"><a href="compcert.backend.Allocation.html#args">args</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Extract the move instructions at the beginning of block <span class="bracket"><span class="id">b</span></span>.
  Return the list of moves and the suffix of <span class="bracket"><span class="id">b</span></span> after the moves.
  Two versions are provided: <span class="bracket"><span class="id">extract_moves</span></span>, which extracts only
  "true" moves, and <span class="bracket"><span class="id">extract_moves_ext</span></span>, which also extracts
  the <span class="bracket"><span class="id">makelong</span></span>, <span class="bracket"><span class="id">lowlong</span></span> and <span class="bracket"><span class="id">highlong</span></span> operations over 64-bit integers.
</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="extract_moves">extract_moves</a></span> (<span class="id">accu</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.backend.LTL.html#bblock">bblock</a></span>) {<span class="kwd">struct</span> <span class="id">b</span>} : <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span> * <span class="id"><a href="compcert.backend.LTL.html#bblock">bblock</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lgetstack">Lgetstack</a></span> <span class="id">sl</span> <span class="id">ofs</span> <span class="id">ty</span> <span class="id">dst</span> :: <span class="id">b</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#MV">MV</a></span> (<span class="id"><a href="compcert.backend.Locations.html#S">S</a></span> <span class="id">sl</span> <span class="id">ofs</span> <span class="id">ty</span>) (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst</span>) :: <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>) <span class="id">b</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lsetstack">Lsetstack</a></span> <span class="id">src</span> <span class="id">sl</span> <span class="id">ofs</span> <span class="id">ty</span> :: <span class="id">b</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#MV">MV</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">src</span>) (<span class="id"><a href="compcert.backend.Locations.html#S">S</a></span> <span class="id">sl</span> <span class="id">ofs</span> <span class="id">ty</span>) :: <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>) <span class="id">b</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lop">Lop</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> :: <span class="id">b</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.x86.Op.html#is_move_operation">is_move_operation</a></span> <span class="id">op</span> <span class="id">args</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">arg</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#MV">MV</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">arg</span>) (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">res</span>) :: <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>) <span class="id">b</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">List.rev</a></span> <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">List.rev</a></span> <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="extract_moves_ext">extract_moves_ext</a></span> (<span class="id">accu</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.backend.LTL.html#bblock">bblock</a></span>) {<span class="kwd">struct</span> <span class="id">b</span>} : <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span> * <span class="id"><a href="compcert.backend.LTL.html#bblock">bblock</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lgetstack">Lgetstack</a></span> <span class="id">sl</span> <span class="id">ofs</span> <span class="id">ty</span> <span class="id">dst</span> :: <span class="id">b</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#extract_moves_ext">extract_moves_ext</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#MV">MV</a></span> (<span class="id"><a href="compcert.backend.Locations.html#S">S</a></span> <span class="id">sl</span> <span class="id">ofs</span> <span class="id">ty</span>) (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst</span>) :: <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>) <span class="id">b</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lsetstack">Lsetstack</a></span> <span class="id">src</span> <span class="id">sl</span> <span class="id">ofs</span> <span class="id">ty</span> :: <span class="id">b</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#extract_moves_ext">extract_moves_ext</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#MV">MV</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">src</span>) (<span class="id"><a href="compcert.backend.Locations.html#S">S</a></span> <span class="id">sl</span> <span class="id">ofs</span> <span class="id">ty</span>) :: <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>) <span class="id">b</span>'<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lop">Lop</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> :: <span class="id">b</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#classify_operation">classify_operation</a></span> <span class="id">op</span> <span class="id">args</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#operation_Omove">operation_Omove</a></span> <span class="id">arg</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#extract_moves_ext">extract_moves_ext</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#MV">MV</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">arg</span>) (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">res</span>) :: <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>) <span class="id">b</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#operation_Omakelong">operation_Omakelong</a></span> <span class="id">arg1</span> <span class="id">arg2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#extract_moves_ext">extract_moves_ext</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#MVmakelong">MVmakelong</a></span> <span class="id">arg1</span> <span class="id">arg2</span> <span class="id">res</span> :: <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>) <span class="id">b</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#operation_Olowlong">operation_Olowlong</a></span> <span class="id">arg</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#extract_moves_ext">extract_moves_ext</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#MVlowlong">MVlowlong</a></span> <span class="id">arg</span> <span class="id">res</span> :: <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>) <span class="id">b</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#operation_Ohighlong">operation_Ohighlong</a></span> <span class="id">arg</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#extract_moves_ext">extract_moves_ext</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#MVhighlong">MVhighlong</a></span> <span class="id">arg</span> <span class="id">res</span> :: <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>) <span class="id">b</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#operation_other">operation_other</a></span> <span class="id">_</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">List.rev</a></span> <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">List.rev</a></span> <span class="id"><a href="compcert.backend.Allocation.html#accu">accu</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="check_succ">check_succ</a></span> (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.backend.LTL.html#bblock">LTL.bblock</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lbranch">Lbranch</a></span> <span class="id">s</span>' :: <span class="id">_</span> =&gt; <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#s">s</a></span> <span class="id">s</span>'<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Notation</span> "'<span class="tactic">do</span>' <span class="id">X</span> &lt;- <span class="id">A</span> ; <span class="id">B</span>" := (<span class="kwd">match</span> <span class="id">A</span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">X</span> =&gt; <span class="id">B</span> | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">at</span> <span class="id">level</span> 200, <span class="id">X</span> <span class="id">ident</span>, <span class="id">A</span> <span class="tactic">at</span> <span class="id">level</span> 100, <span class="id">B</span> <span class="tactic">at</span> <span class="id">level</span> 200)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id">option_monad_scope</span>.<br/>
<br/>
<span class="kwd">Notation</span> "'<span class="id">assertion</span>' <span class="id">A</span> ; <span class="id">B</span>" := (<span class="kwd">if</span> <span class="id">A</span> <span class="kwd">then</span> <span class="id">B</span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tactic">at</span> <span class="id">level</span> 200, <span class="id">A</span> <span class="tactic">at</span> <span class="id">level</span> 100, <span class="id">B</span> <span class="tactic">at</span> <span class="id">level</span> 200)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <span class="id">option_monad_scope</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">option_monad_scope</span>.<br/>
<br/>
<div class="doc">Check RTL instruction <span class="bracket"><span class="id">i</span></span> against LTL basic block <span class="bracket"><span class="id">b</span></span>.
  On success, return <span class="bracket"><span class="id">Some</span></span> with a <span class="bracket"><span class="id">block_shape</span></span> describing the correspondence.
  On error, return <span class="bracket"><span class="id">None</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="pair_Iop_block">pair_Iop_block</a></span> (<span class="id">op</span>: <span class="id"><a href="compcert.x86.Op.html#operation">operation</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">res</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.backend.LTL.html#bblock">LTL.bblock</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv1</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lop">Lop</a></span> <span class="id">op</span>' <span class="id">args</span>' <span class="id">res</span>' :: <span class="id">b2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv2</span>, <span class="id">b3</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">b2</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.x86.Op.html#eq_operation">eq_operation</a></span> <span class="id"><a href="compcert.backend.Allocation.html#op">op</a></span> <span class="id">op</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id"><a href="compcert.backend.Allocation.html#s">s</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b3">b3</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSop">BSop</a></span> <span class="id"><a href="compcert.backend.Allocation.html#op">op</a></span> <span class="id"><a href="compcert.backend.Allocation.html#args">args</a></span> <span class="id"><a href="compcert.backend.Allocation.html#res">res</a></span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">args</span>' <span class="id">res</span>' <span class="id"><a href="compcert.backend.Allocation.html#mv2">mv2</a></span> <span class="id"><a href="compcert.backend.Allocation.html#s">s</a></span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id"><a href="compcert.backend.Allocation.html#s">s</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSopdead">BSopdead</a></span> <span class="id"><a href="compcert.backend.Allocation.html#op">op</a></span> <span class="id"><a href="compcert.backend.Allocation.html#args">args</a></span> <span class="id"><a href="compcert.backend.Allocation.html#res">res</a></span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id"><a href="compcert.backend.Allocation.html#s">s</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="pair_instr_block">pair_instr_block</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">i</span>: <span class="id"><a href="compcert.backend.RTL.html#instruction">RTL.instruction</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.backend.LTL.html#bblock">LTL.bblock</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#block_shape">block_shape</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#i">i</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.RTL.html#Inop">Inop</a></span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span>); <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSnop">BSnop</a></span> <span class="id"><a href="compcert.backend.Allocation.html#mv">mv</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.RTL.html#Iop">Iop</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#classify_operation">classify_operation</a></span> <span class="id">op</span> <span class="id">args</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#operation_Omove">operation_Omove</a></span> <span class="id">arg</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span>); <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSmove">BSmove</a></span> <span class="id">arg</span> <span class="id">res</span> <span class="id"><a href="compcert.backend.Allocation.html#mv">mv</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#operation_Omakelong">operation_Omakelong</a></span> <span class="id">arg1</span> <span class="id">arg2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#splitlong">Archi.splitlong</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">let</span> (<span class="id">mv</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span>); <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSmakelong">BSmakelong</a></span> <span class="id">arg1</span> <span class="id">arg2</span> <span class="id">res</span> <span class="id"><a href="compcert.backend.Allocation.html#mv">mv</a></span> <span class="id">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#pair_Iop_block">pair_Iop_block</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#operation_Olowlong">operation_Olowlong</a></span> <span class="id">arg</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#splitlong">Archi.splitlong</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">let</span> (<span class="id">mv</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span>); <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSlowlong">BSlowlong</a></span> <span class="id">arg</span> <span class="id">res</span> <span class="id"><a href="compcert.backend.Allocation.html#mv">mv</a></span> <span class="id">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#pair_Iop_block">pair_Iop_block</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#operation_Ohighlong">operation_Ohighlong</a></span> <span class="id">arg</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#splitlong">Archi.splitlong</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">let</span> (<span class="id">mv</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span>); <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BShighlong">BShighlong</a></span> <span class="id">arg</span> <span class="id">res</span> <span class="id"><a href="compcert.backend.Allocation.html#mv">mv</a></span> <span class="id">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#pair_Iop_block">pair_Iop_block</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#operation_other">operation_other</a></span> <span class="id">_</span> <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#pair_Iop_block">pair_Iop_block</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.RTL.html#Iload">Iload</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv1</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lload">Lload</a></span> <span class="id">chunk</span>' <span class="id">addr</span>' <span class="id">args</span>' <span class="id">dst</span>' :: <span class="id">b2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.AST.html#chunk_eq">chunk_eq</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> &amp;&amp; <span class="id"><a href="compcert.x86_64.Archi.html#splitlong">Archi.splitlong</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#chunk_eq">chunk_eq</a></span> <span class="id">chunk</span>' <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv2</span>, <span class="id">b3</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">b2</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b3">b3</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lload">Lload</a></span> <span class="id">chunk</span>'' <span class="id">addr</span>'' <span class="id">args</span>'' <span class="id">dst</span>'' :: <span class="id">b4</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv3</span>, <span class="id">b5</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">b4</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#chunk_eq">chunk_eq</a></span> <span class="id">chunk</span>'' <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.x86.Op.html#eq_addressing">eq_addressing</a></span> <span class="id">addr</span> <span class="id">addr</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Coqlib.html#option_eq">option_eq</a></span> <span class="id"><a href="compcert.x86.Op.html#eq_addressing">eq_addressing</a></span> (<span class="id"><a href="compcert.x86.Op.html#offset_addressing">offset_addressing</a></span> <span class="id">addr</span> 4) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">addr</span>''));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b5">b5</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSload2">BSload2</a></span> <span class="id">addr</span> <span class="id">addr</span>'' <span class="id">args</span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">args</span>' <span class="id">dst</span>' <span class="id"><a href="compcert.backend.Allocation.html#mv2">mv2</a></span> <span class="id">args</span>'' <span class="id">dst</span>'' <span class="id"><a href="compcert.backend.Allocation.html#mv3">mv3</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b3">b3</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> (<span class="id"><a href="compcert.x86.Op.html#eq_addressing">eq_addressing</a></span> <span class="id">addr</span> <span class="id">addr</span>') <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSload2_1">BSload2_1</a></span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">args</span>' <span class="id">dst</span>' <span class="id"><a href="compcert.backend.Allocation.html#mv2">mv2</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Coqlib.html#option_eq">option_eq</a></span> <span class="id"><a href="compcert.x86.Op.html#eq_addressing">eq_addressing</a></span> (<span class="id"><a href="compcert.x86.Op.html#offset_addressing">offset_addressing</a></span> <span class="id">addr</span> 4) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">addr</span>'));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSload2_2">BSload2_2</a></span> <span class="id">addr</span> <span class="id">addr</span>' <span class="id">args</span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">args</span>' <span class="id">dst</span>' <span class="id"><a href="compcert.backend.Allocation.html#mv2">mv2</a></span> <span class="id">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv2</span>, <span class="id">b3</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">b2</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#chunk_eq">chunk_eq</a></span> <span class="id">chunk</span> <span class="id">chunk</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.x86.Op.html#eq_addressing">eq_addressing</a></span> <span class="id">addr</span> <span class="id">addr</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b3">b3</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSload">BSload</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">args</span>' <span class="id">dst</span>' <span class="id"><a href="compcert.backend.Allocation.html#mv2">mv2</a></span> <span class="id">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSloaddead">BSloaddead</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.RTL.html#Istore">Istore</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">src</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv1</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lstore">Lstore</a></span> <span class="id">chunk</span>' <span class="id">addr</span>' <span class="id">args</span>' <span class="id">src</span>' :: <span class="id">b2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.AST.html#chunk_eq">chunk_eq</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> &amp;&amp; <span class="id"><a href="compcert.x86_64.Archi.html#splitlong">Archi.splitlong</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv2</span>, <span class="id">b3</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">b2</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b3">b3</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lstore">Lstore</a></span> <span class="id">chunk</span>'' <span class="id">addr</span>'' <span class="id">args</span>'' <span class="id">src</span>'' :: <span class="id">b4</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#chunk_eq">chunk_eq</a></span> <span class="id">chunk</span>' <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#chunk_eq">chunk_eq</a></span> <span class="id">chunk</span>'' <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.x86.Op.html#eq_addressing">eq_addressing</a></span> <span class="id">addr</span> <span class="id">addr</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Coqlib.html#option_eq">option_eq</a></span> <span class="id"><a href="compcert.x86.Op.html#eq_addressing">eq_addressing</a></span> (<span class="id"><a href="compcert.x86.Op.html#offset_addressing">offset_addressing</a></span> <span class="id">addr</span> 4) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">addr</span>''));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id">b4</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSstore2">BSstore2</a></span> <span class="id">addr</span> <span class="id">addr</span>'' <span class="id">args</span> <span class="id">src</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">args</span>' <span class="id">src</span>' <span class="id"><a href="compcert.backend.Allocation.html#mv2">mv2</a></span> <span class="id">args</span>'' <span class="id">src</span>'' <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#chunk_eq">chunk_eq</a></span> <span class="id">chunk</span> <span class="id">chunk</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.x86.Op.html#eq_addressing">eq_addressing</a></span> <span class="id">addr</span> <span class="id">addr</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id">b2</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSstore">BSstore</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">src</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">args</span>' <span class="id">src</span>' <span class="id">s</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.RTL.html#Icall">Icall</a></span> <span class="id">sg</span> <span class="id">ros</span> <span class="id">args</span> <span class="id">res</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv1</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves_ext">extract_moves_ext</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lcall">Lcall</a></span> <span class="id">sg</span>' <span class="id">ros</span>' :: <span class="id">b2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv2</span>, <span class="id">b3</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves_ext">extract_moves_ext</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">b2</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#signature_eq">signature_eq</a></span> <span class="id">sg</span> <span class="id">sg</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b3">b3</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BScall">BScall</a></span> <span class="id">sg</span> <span class="id">ros</span> <span class="id">args</span> <span class="id">res</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">ros</span>' <span class="id"><a href="compcert.backend.Allocation.html#mv2">mv2</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.RTL.html#Itailcall">Itailcall</a></span> <span class="id">sg</span> <span class="id">ros</span> <span class="id">args</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv1</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves_ext">extract_moves_ext</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Ltailcall">Ltailcall</a></span> <span class="id">sg</span>' <span class="id">ros</span>' :: <span class="id">b2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#signature_eq">signature_eq</a></span> <span class="id">sg</span> <span class="id">sg</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BStailcall">BStailcall</a></span> <span class="id">sg</span> <span class="id">ros</span> <span class="id">args</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">ros</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.RTL.html#Ibuiltin">Ibuiltin</a></span> <span class="id">ef</span> <span class="id">args</span> <span class="id">res</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv1</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lbuiltin">Lbuiltin</a></span> <span class="id">ef</span>' <span class="id">args</span>' <span class="id">res</span>' :: <span class="id">b2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv2</span>, <span class="id">b3</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">b2</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#external_function_eq">external_function_eq</a></span> <span class="id">ef</span> <span class="id">ef</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> <span class="id">s</span> <span class="id"><a href="compcert.backend.Allocation.html#b3">b3</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSbuiltin">BSbuiltin</a></span> <span class="id">ef</span> <span class="id">args</span> <span class="id">res</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">args</span>' <span class="id">res</span>' <span class="id"><a href="compcert.backend.Allocation.html#mv2">mv2</a></span> <span class="id">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.RTL.html#Icond">Icond</a></span> <span class="id">cond</span> <span class="id">args</span> <span class="id">s1</span> <span class="id">s2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv1</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lcond">Lcond</a></span> <span class="id">cond</span>' <span class="id">args</span>' <span class="id">s1</span>' <span class="id">s2</span>' :: <span class="id">b2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.x86.Op.html#eq_condition">eq_condition</a></span> <span class="id">cond</span> <span class="id">cond</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">s1</span> <span class="id">s1</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">s2</span> <span class="id">s2</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BScond">BScond</a></span> <span class="id">cond</span> <span class="id">args</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">args</span>' <span class="id">s1</span> <span class="id">s2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.RTL.html#Ijumptable">Ijumptable</a></span> <span class="id">arg</span> <span class="id">tbl</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv1</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves">extract_moves</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Ljumptable">Ljumptable</a></span> <span class="id">arg</span>' <span class="id">tbl</span>' :: <span class="id">b2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#list_eq_dec">list_eq_dec</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">tbl</span> <span class="id">tbl</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSjumptable">BSjumptable</a></span> <span class="id">arg</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span> <span class="id">arg</span>' <span class="id">tbl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.RTL.html#Ireturn">Ireturn</a></span> <span class="id">arg</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv1</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves_ext">extract_moves_ext</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.LTL.html#Lreturn">Lreturn</a></span> :: <span class="id">b2</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#BSreturn">BSreturn</a></span> <span class="id">arg</span> <span class="id"><a href="compcert.backend.Allocation.html#mv1">mv1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Check all instructions of the RTL function <span class="bracket"><span class="id">f1</span></span> against the corresponding
  basic blocks of LTL function <span class="bracket"><span class="id">f2</span></span>.  Return a map from CFG nodes to
  <span class="bracket"><span class="id">block_shape</span></span> info. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="pair_codes">pair_codes</a></span> (<span class="id">f1</span>: <span class="id"><a href="compcert.backend.RTL.html#function">RTL.function</a></span>) (<span class="id">f2</span>: <span class="id"><a href="compcert.backend.LTL.html#function">LTL.function</a></span>) : <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.backend.Allocation.html#block_shape">block_shape</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.combine">PTree.combine</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">opti</span> <span class="id">optb</span> =&gt; <span class="tactic">do</span> <span class="id">i</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#opti">opti</a></span>; <span class="tactic">do</span> <span class="id">b</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#optb">optb</a></span>; <span class="id"><a href="compcert.backend.Allocation.html#pair_instr_block">pair_instr_block</a></span> <span class="id"><a href="compcert.backend.Allocation.html#i">i</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#fn_code">RTL.fn_code</a></span> <span class="id"><a href="compcert.backend.Allocation.html#f1">f1</a></span>) (<span class="id"><a href="compcert.backend.LTL.html#fn_code">LTL.fn_code</a></span> <span class="id"><a href="compcert.backend.Allocation.html#f2">f2</a></span>).<br/>
<br/>
<div class="doc">Check the entry point code of the LTL function <span class="bracket"><span class="id">f2</span></span>.  It must be
  a sequence of moves that branches to the same node as the entry point
  of RTL function <span class="bracket"><span class="id">f1</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="pair_entrypoints">pair_entrypoints</a></span> (<span class="id">f1</span>: <span class="id"><a href="compcert.backend.RTL.html#function">RTL.function</a></span>) (<span class="id">f2</span>: <span class="id"><a href="compcert.backend.LTL.html#function">LTL.function</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span> :=<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">b</span> &lt;- (<span class="id"><a href="compcert.backend.LTL.html#fn_code">LTL.fn_code</a></span> <span class="id"><a href="compcert.backend.Allocation.html#f2">f2</a></span>)!(<span class="id"><a href="compcert.backend.LTL.html#fn_entrypoint">LTL.fn_entrypoint</a></span> <span class="id"><a href="compcert.backend.Allocation.html#f2">f2</a></span>);<br/>
&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">mv</span>, <span class="id">b1</span>) := <span class="id"><a href="compcert.backend.Allocation.html#extract_moves_ext">extract_moves_ext</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.Allocation.html#b">b</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#check_succ">check_succ</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">RTL.fn_entrypoint</a></span> <span class="id"><a href="compcert.backend.Allocation.html#f1">f1</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#b1">b1</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#mv">mv</a></span>.<br/>
<br/>
<h1> Representing sets of equations between RTL registers and LTL locations. </h1>
<br/>
<div class="doc">The Rideau-Leroy validation algorithm manipulates sets of equations of
  the form <span class="bracket"><span class="id">pseudoreg</span> = <span class="id">location</span> [<span class="id">kind</span>]</span>, meaning:
<ul>
<li>
 if <span class="bracket"><span class="id">kind</span> = <span class="id">Full</span></span>, the value of <span class="bracket"><span class="id">location</span></span> in the generated LTL code is
  the same as (or more defined than) the value of <span class="bracket"><span class="id">pseudoreg</span></span> in the original
  RTL code;
</li>
<li>
 if <span class="bracket"><span class="id">kind</span> = <span class="id">Low</span></span>, the value of <span class="bracket"><span class="id">location</span></span> in the generated LTL code is
  the same as (or more defined than) the low 32 bits of the 64-bit
  integer value of <span class="bracket"><span class="id">pseudoreg</span></span> in the original RTL code;
</li>
<li>
 if <span class="bracket"><span class="id">kind</span> = <span class="id">High</span></span>, the value of <span class="bracket"><span class="id">location</span></span> in the generated LTL code is
  the same as (or more defined than) the high 32 bits of the 64-bit
  integer value of <span class="bracket"><span class="id">pseudoreg</span></span> in the original RTL code.
</li>
</ul>
</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="equation_kind">equation_kind</a></span> : <span class="kwd">Type</span> := <span class="id"><a name="Full">Full</a></span> | <span class="id"><a name="Low">Low</a></span> | <span class="id"><a name="High">High</a></span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="equation">equation</a></span> := <span class="id"><a name="Eq">Eq</a></span> {<br/>
&nbsp;&nbsp;<span class="id"><a name="ekind">ekind</a></span>: <span class="id"><a href="compcert.backend.Allocation.html#equation_kind">equation_kind</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="ereg">ereg</a></span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="eloc">eloc</a></span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span><br/>
}.<br/>
<br/>
<div class="doc">We use AVL finite sets to represent sets of equations.  Therefore, we need
  total orders over equations and their components. </div>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="IndexedEqKind">IndexedEqKind</a></span> &lt;: <span class="id"><a href="compcert.lib.Maps.html#INDEXED_TYPE">INDEXED_TYPE</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="IndexedEqKind.t">t</a></span> := <span class="id"><a href="compcert.backend.Allocation.html#equation_kind">equation_kind</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="IndexedEqKind.index">index</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.Allocation.html#IndexedEqKind.t">t</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> =&gt; 1%<span class="id">positive</span> | <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> =&gt; 2%<span class="id">positive</span> | <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> =&gt; 3%<span class="id">positive</span> <span class="kwd">end</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="IndexedEqKind.index_inj">index_inj</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.Allocation.html#IndexedEqKind.index">index</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> = <span class="id"><a href="compcert.backend.Allocation.html#IndexedEqKind.index">index</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> = <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3685')">Proof.</div>
<div class="proofscript" id="proof3685">
 <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">simpl</span>; <span class="tactic">congruence</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="IndexedEqKind.eq">eq</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.Allocation.html#IndexedEqKind.t">t</a></span>) : {<span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>=<span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>} + {<span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>&lt;&gt;<span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3686')">Proof.</div>
<div class="proofscript" id="proof3686">
 <span class="id">decide</span> <span class="id">equality</span>. Defined.</div>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.Allocation.html#IndexedEqKind">IndexedEqKind</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="OrderedEqKind">OrderedEqKind</a></span> := <span class="id"><a href="compcert.lib.Ordered.html#OrderedIndexed">OrderedIndexed</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#IndexedEqKind">IndexedEqKind</a></span>).<br/>
<br/>
<div class="doc">This is an order over equations that is lexicographic on <span class="bracket"><span class="id">ereg</span></span>, then
  <span class="bracket"><span class="id">eloc</span></span>, then <span class="bracket"><span class="id">ekind</span></span>. </div>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="OrderedEquation">OrderedEquation</a></span> &lt;: <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#OrderedType">OrderedType</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OrderedEquation.t">t</a></span> := <span class="id"><a href="compcert.backend.Allocation.html#equation">equation</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OrderedEquation.eq">eq</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.t">t</a></span>) := <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> = <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OrderedEquation.lt">lt</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.t">t</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>) \/ (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> = <span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Locations.html#OrderedLoc.lt">OrderedLoc.lt</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>) \/ (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> = <span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#OrderedEqKind.lt">OrderedEqKind.lt</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>)))).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OrderedEquation.eq_refl">eq_refl</a></span> : <span class="kwd">forall</span> <span class="id">x</span> : <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.t">t</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Proof</span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.t">t</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OrderedEquation.eq_sym">eq_sym</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.t">t</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Proof</span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span> <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.t">t</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OrderedEquation.eq_trans">eq_trans</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.t">t</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="id"><a href="compcert.backend.Allocation.html#z">z</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#z">z</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Proof</span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_trans">eq_trans</a></span> <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.t">t</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OrderedEquation.lt_trans">lt_trans</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.t">t</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.lt">lt</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.lt">lt</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="id"><a href="compcert.backend.Allocation.html#z">z</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.lt">lt</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#z">z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3687')">Proof.</div>
<div class="proofscript" id="proof3687">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.lt">lt</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans">Plt_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">right</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Locations.html#OrderedLoc.lt_trans">OrderedLoc.lt_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">congruence</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Allocation.html#OrderedEqKind.lt_trans">OrderedEqKind.lt_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="OrderedEquation.lt_not_eq">lt_not_eq</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.t">t</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.lt">lt</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; ~ <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3688')">Proof.</div>
<div class="proofscript" id="proof3688">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.lt">lt</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.eq">eq</a></span>; <span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">subst</span> <span class="id">y</span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> <span class="id"><a href="compcert.backend.Locations.html#OrderedLoc.lt_not_eq">OrderedLoc.lt_not_eq</a></span>; <span class="tactic">eauto</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> <span class="id"><a href="compcert.backend.Allocation.html#OrderedEqKind.lt_not_eq">OrderedEqKind.lt_not_eq</a></span>; <span class="tactic">eauto</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OrderedEquation.compare">compare</a></span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.t">t</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#Compare">Compare</a></span> <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.lt">lt</a></span> <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3689')">Proof.</div>
<div class="proofscript" id="proof3689">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Ordered.html#OrderedPositive.compare">OrderedPositive.compare</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#LT">LT</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.Locations.html#OrderedLoc.compare">OrderedLoc.compare</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#LT">LT</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.Allocation.html#OrderedEqKind.compare">OrderedEqKind.compare</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#LT">LT</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#EQ">EQ</a></span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e</span>; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e0</span>; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e1</span>; <span class="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#GT">GT</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#GT">GT</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#GT">GT</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Defined.</div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="OrderedEquation.eq_dec">eq_dec</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.t">t</a></span>) : {<span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> = <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>} + {<span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> &lt;&gt; <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3690')">Proof.</div>
<div class="proofscript" id="proof3690">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">decide</span> <span class="id">equality</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Locations.html#Loc.eq">Loc.eq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#IndexedEqKind.eq">IndexedEqKind.eq</a></span>.<br/>
&nbsp;&nbsp;Defined.</div>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation">OrderedEquation</a></span>.<br/>
<br/>
<div class="doc">This is an alternate order over equations that is lexicgraphic on
  <span class="bracket"><span class="id">eloc</span></span>, then <span class="bracket"><span class="id">ereg</span></span>, then <span class="bracket"><span class="id">ekind</span></span>. </div>
<br/>
<span class="kwd">Module</span> <span class="id">OrderedEquation</span>' &lt;: <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#OrderedType">OrderedType</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">t</span> := <span class="id"><a href="compcert.backend.Allocation.html#equation">equation</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">eq</span> (<span class="id">x</span> <span class="id">y</span>: <span class="id">t</span>) := <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> = <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">lt</span> (<span class="id">x</span> <span class="id">y</span>: <span class="id">t</span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Locations.html#OrderedLoc.lt">OrderedLoc.lt</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>) \/ (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> = <span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>) \/ (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> = <span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#OrderedEqKind.lt">OrderedEqKind.lt</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>)))).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">eq_refl</span> : <span class="kwd">forall</span> <span class="id">x</span> : <span class="id">t</span>, <span class="id">eq</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Proof</span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">eq_sym</span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id">t</span>, <span class="id">eq</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; <span class="id">eq</span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Proof</span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">eq_trans</span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : <span class="id">t</span>, <span class="id">eq</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; <span class="id">eq</span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="id"><a href="compcert.backend.Allocation.html#z">z</a></span> -&gt; <span class="id">eq</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#z">z</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Proof</span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_trans">eq_trans</a></span> <span class="id">t</span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">lt_trans</span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span> : <span class="id">t</span>, <span class="id">lt</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; <span class="id">lt</span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="id"><a href="compcert.backend.Allocation.html#z">z</a></span> -&gt; <span class="id">lt</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#z">z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3691')">Proof.</div>
<div class="proofscript" id="proof3691">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">lt</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Locations.html#OrderedLoc.lt_trans">OrderedLoc.lt_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">right</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans">Plt_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">congruence</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Allocation.html#OrderedEqKind.lt_trans">OrderedEqKind.lt_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id">lt_not_eq</span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id">t</span>, <span class="id">lt</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; ~ <span class="id">eq</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3692')">Proof.</div>
<div class="proofscript" id="proof3692">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">lt</span>, <span class="id">eq</span>; <span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">subst</span> <span class="id">y</span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> <span class="id"><a href="compcert.backend.Locations.html#OrderedLoc.lt_not_eq">OrderedLoc.lt_not_eq</a></span>; <span class="tactic">eauto</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> <span class="id"><a href="compcert.backend.Allocation.html#OrderedEqKind.lt_not_eq">OrderedEqKind.lt_not_eq</a></span>; <span class="tactic">eauto</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">compare</span> : <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> : <span class="id">t</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#Compare">Compare</a></span> <span class="id">lt</span> <span class="id">eq</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3693')">Proof.</div>
<div class="proofscript" id="proof3693">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.Locations.html#OrderedLoc.compare">OrderedLoc.compare</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#LT">LT</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Ordered.html#OrderedPositive.compare">OrderedPositive.compare</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#LT">LT</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.Allocation.html#OrderedEqKind.compare">OrderedEqKind.compare</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id">x</span>) (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id">y</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#LT">LT</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#EQ">EQ</a></span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e</span>; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e0</span>; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">e1</span>; <span class="tactic">red</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#GT">GT</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#GT">GT</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#GT">GT</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Defined.</div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id">eq_dec</span>: <span class="kwd">forall</span> (<span class="id">x</span> <span class="id">y</span>: <span class="id">t</span>), {<span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> = <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>} + {<span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> &lt;&gt; <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>} := <span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation.eq_dec">OrderedEquation.eq_dec</a></span>.<br/>
<span class="kwd">End</span> <span class="id">OrderedEquation</span>'.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="EqSet">EqSet</a></span> := <span class="id"><a href="compcert.lib.FSetAVLplus.html#Make">FSetAVLplus.Make</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#OrderedEquation">OrderedEquation</a></span>).<br/>
<span class="kwd">Module</span> <span class="id"><a name="EqSet2">EqSet2</a></span> := <span class="id"><a href="compcert.lib.FSetAVLplus.html#Make">FSetAVLplus.Make</a></span>(<span class="id">OrderedEquation</span>').<br/>
<br/>
<div class="doc">We use a redundant representation for sets of equations, comprising
  two AVL finite sets, containing the same elements, but ordered along
  the two orders defined above.  Playing on properties of lexicographic
  orders, this redundant representation enables us to quickly find
  all equations involving a given RTL pseudoregister, or all equations
  involving a given LTL location or overlapping location. </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="eqs">eqs</a></span> := <span class="id"><a name="mkeqs">mkeqs</a></span> {<br/>
&nbsp;&nbsp;<span class="id"><a name="eqs1">eqs1</a></span> :&gt; <span class="id"><a href="compcert.backend.Allocation.html#t">EqSet.t</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="eqs2">eqs2</a></span> : <span class="id"><a href="compcert.backend.Allocation.html#t">EqSet2.t</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="eqs_same">eqs_same</a></span>: <span class="kwd">forall</span> <span class="id">q</span>, <span class="id"><a href="compcert.backend.Allocation.html#In">EqSet2.In</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs2">eqs2</a></span> &lt;-&gt; <span class="id"><a href="compcert.backend.Allocation.html#In">EqSet.In</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs1">eqs1</a></span><br/>
}.<br/>
<br/>
<h1> Operations on sets of equations </h1>
<br/>
<div class="doc">The empty set of equations. </div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="empty_eqs">empty_eqs</a></span> := <span class="id"><a href="compcert.backend.Allocation.html#mkeqs">mkeqs</a></span> <span class="id"><a href="compcert.backend.Allocation.html#empty">EqSet.empty</a></span> <span class="id"><a href="compcert.backend.Allocation.html#empty">EqSet2.empty</a></span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3694')">Next Obligation.</div>
<div class="proofscript" id="proof3694">
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.backend.Allocation.html#empty_1">EqSet2.empty_1</a></span>; <span class="tactic">eauto</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.backend.Allocation.html#empty_1">EqSet.empty_1</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Adding or removing an equation from a set. </div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="add_equation">add_equation</a></span> (<span class="id">q</span>: <span class="id"><a href="compcert.backend.Allocation.html#equation">equation</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#mkeqs">mkeqs</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#add">EqSet.add</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eqs1">eqs1</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)) (<span class="id"><a href="compcert.backend.Allocation.html#add">EqSet2.add</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eqs2">eqs2</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)) <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3695')">Next Obligation.</div>
<div class="proofscript" id="proof3695">
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.Allocation.html#eq_dec">OrderedEquation</a></span>'.<span class="id">eq_dec</span> <span class="id">q</span> <span class="id">q0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#add_1">EqSet.add_1</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#add_2">EqSet.add_2</a></span>. <span class="tactic">apply</span> (<span class="id"><a href="compcert.backend.Allocation.html#eqs_same">eqs_same</a></span> <span class="id">e</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#add_3">EqSet2.add_3</a></span> <span class="kwd">with</span> <span class="id">q</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.Allocation.html#eq_dec">OrderedEquation.eq_dec</a></span> <span class="id">q</span> <span class="id">q0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#add_1">EqSet2.add_1</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#add_2">EqSet2.add_2</a></span>. <span class="tactic">apply</span> (<span class="id"><a href="compcert.backend.Allocation.html#eqs_same">eqs_same</a></span> <span class="id">e</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#add_3">EqSet.add_3</a></span> <span class="kwd">with</span> <span class="id">q</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="remove_equation">remove_equation</a></span> (<span class="id">q</span>: <span class="id"><a href="compcert.backend.Allocation.html#equation">equation</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#mkeqs">mkeqs</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#remove">EqSet.remove</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eqs1">eqs1</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)) (<span class="id"><a href="compcert.backend.Allocation.html#remove">EqSet2.remove</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eqs2">eqs2</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)) <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3696')">Next Obligation.</div>
<div class="proofscript" id="proof3696">
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.Allocation.html#eq_dec">OrderedEquation</a></span>'.<span class="id">eq_dec</span> <span class="id">q</span> <span class="id">q0</span>).<br/>
&nbsp;&nbsp;<span class="id">eelim</span> <span class="id"><a href="compcert.backend.Allocation.html#remove_1">EqSet2.remove_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#remove_2">EqSet.remove_2</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> (<span class="id"><a href="compcert.backend.Allocation.html#eqs_same">eqs_same</a></span> <span class="id">e</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#remove_3">EqSet2.remove_3</a></span> <span class="kwd">with</span> <span class="id">q</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.backend.Allocation.html#eq_dec">OrderedEquation.eq_dec</a></span> <span class="id">q</span> <span class="id">q0</span>).<br/>
&nbsp;&nbsp;<span class="id">eelim</span> <span class="id"><a href="compcert.backend.Allocation.html#remove_1">EqSet.remove_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#remove_2">EqSet2.remove_2</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> (<span class="id"><a href="compcert.backend.Allocation.html#eqs_same">eqs_same</a></span> <span class="id">e</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#remove_3">EqSet.remove_3</a></span> <span class="kwd">with</span> <span class="id">q</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">reg_unconstrained</span> <span class="id">r</span> <span class="id">e</span></span> is true if <span class="bracket"><span class="id">e</span></span> contains no equations involving
  the RTL pseudoregister <span class="bracket"><span class="id">r</span></span>.  In other words, all equations <span class="bracket"><span class="id">r</span>' = <span class="id">l</span> [<span class="id">kind</span>]</span>
  in <span class="bracket"><span class="id">e</span></span> are such that <span class="bracket"><span class="id">r</span>' &lt;&gt; <span class="id">r</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="select_reg_l">select_reg_l</a></span> (<span class="id">r</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">q</span>: <span class="id"><a href="compcert.backend.Allocation.html#equation">equation</a></span>) := <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.leb">Pos.leb</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="select_reg_h">select_reg_h</a></span> (<span class="id">r</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">q</span>: <span class="id"><a href="compcert.backend.Allocation.html#equation">equation</a></span>) := <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.leb">Pos.leb</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="reg_unconstrained">reg_unconstrained</a></span> (<span class="id">r</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#mem_between">EqSet.mem_between</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#select_reg_l">select_reg_l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#select_reg_h">select_reg_h</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#eqs1">eqs1</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)).<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">loc_unconstrained</span> <span class="id">l</span> <span class="id">e</span></span> is true if <span class="bracket"><span class="id">e</span></span> contains no equations involving
  the LTL location <span class="bracket"><span class="id">l</span></span> or a location that partially overlaps with <span class="bracket"><span class="id">l</span></span>.
  In other words, all equations <span class="bracket"><span class="id">r</span> = <span class="id">l</span>' [<span class="id">kind</span>]</span> in <span class="bracket"><span class="id">e</span></span> are such that
  <span class="bracket"><span class="id">Loc.diff</span> <span class="id">l</span>' <span class="id">l</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="select_loc_l">select_loc_l</a></span> (<span class="id">l</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">lb</span> := <span class="id"><a href="compcert.backend.Locations.html#OrderedLoc.diff_low_bound">OrderedLoc.diff_low_bound</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">fun</span> (<span class="id">q</span>: <span class="id"><a href="compcert.backend.Allocation.html#equation">equation</a></span>) =&gt; <span class="kwd">match</span> <span class="id"><a href="compcert.backend.Locations.html#OrderedLoc.compare">OrderedLoc.compare</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#lb">lb</a></span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#LT">LT</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="kwd">end</span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="select_loc_h">select_loc_h</a></span> (<span class="id">l</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">lh</span> := <span class="id"><a href="compcert.backend.Locations.html#OrderedLoc.diff_high_bound">OrderedLoc.diff_high_bound</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">fun</span> (<span class="id">q</span>: <span class="id"><a href="compcert.backend.Allocation.html#equation">equation</a></span>) =&gt; <span class="kwd">match</span> <span class="id"><a href="compcert.backend.Locations.html#OrderedLoc.compare">OrderedLoc.compare</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#lh">lh</a></span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.OrderedType.html#GT">GT</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> | <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="loc_unconstrained">loc_unconstrained</a></span> (<span class="id">l</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#mem_between">EqSet2.mem_between</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#select_loc_l">select_loc_l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#select_loc_h">select_loc_h</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#eqs2">eqs2</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="reg_loc_unconstrained">reg_loc_unconstrained</a></span> (<span class="id">r</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">l</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#reg_unconstrained">reg_unconstrained</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.Allocation.html#loc_unconstrained">loc_unconstrained</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">subst_reg</span> <span class="id">r1</span> <span class="id">r2</span> <span class="id">e</span></span> simulates the effect of assigning <span class="bracket"><span class="id">r2</span></span> to <span class="bracket"><span class="id">r1</span></span> on <span class="bracket"><span class="id">e</span></span>.
  All equations of the form <span class="bracket"><span class="id">r1</span> = <span class="id">l</span> [<span class="id">kind</span>]</span> are replaced by <span class="bracket"><span class="id">r2</span> = <span class="id">l</span> [<span class="id">kind</span>]</span>.
</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="subst_reg">subst_reg</a></span> (<span class="id">r1</span> <span class="id">r2</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#fold">EqSet.fold</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">q</span> <span class="id">e</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#r2">r2</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>)) (<span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#elements_between">EqSet.elements_between</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#select_reg_l">select_reg_l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r1">r1</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#select_reg_h">select_reg_h</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r1">r1</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#eqs1">eqs1</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">subst_reg_kind</span> <span class="id">r1</span> <span class="id">k1</span> <span class="id">r2</span> <span class="id">k2</span> <span class="id">e</span></span> simulates the effect of assigning
  the <span class="bracket"><span class="id">k2</span></span> part of <span class="bracket"><span class="id">r2</span></span> to the <span class="bracket"><span class="id">k1</span></span> part of <span class="bracket"><span class="id">r1</span></span> on <span class="bracket"><span class="id">e</span></span>.
  All equations of the form <span class="bracket"><span class="id">r1</span> = <span class="id">l</span> [<span class="id">k1</span>]</span> are replaced by <span class="bracket"><span class="id">r2</span> = <span class="id">l</span> [<span class="id">k2</span>]</span>.
</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="subst_reg_kind">subst_reg_kind</a></span> (<span class="id">r1</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">k1</span>: <span class="id"><a href="compcert.backend.Allocation.html#equation_kind">equation_kind</a></span>) (<span class="id">r2</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">k2</span>: <span class="id"><a href="compcert.backend.Allocation.html#equation_kind">equation_kind</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#fold">EqSet.fold</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">q</span> <span class="id">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.backend.Allocation.html#eq">IndexedEqKind.eq</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#k1">k1</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#k2">k2</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r2">r2</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>)) (<span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#elements_between">EqSet.elements_between</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#select_reg_l">select_reg_l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r1">r1</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#select_reg_h">select_reg_h</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r1">r1</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#eqs1">eqs1</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">subst_loc</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">e</span></span> simulates the effect of assigning <span class="bracket"><span class="id">l2</span></span> to <span class="bracket"><span class="id">l1</span></span> on <span class="bracket"><span class="id">e</span></span>.
  All equations of the form <span class="bracket"><span class="id">r</span> = <span class="id">l1</span> [<span class="id">kind</span>]</span> are replaced by <span class="bracket"><span class="id">r</span> = <span class="id">l2</span> [<span class="id">kind</span>]</span>.
  Return <span class="bracket"><span class="id">None</span></span> if <span class="bracket"><span class="id">e</span></span> contains an equation of the form <span class="bracket"><span class="id">r</span> = <span class="id">l</span></span> with <span class="bracket"><span class="id">l</span></span>
  partially overlapping <span class="bracket"><span class="id">l1</span></span>.
</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="subst_loc">subst_loc</a></span> (<span class="id">l1</span> <span class="id">l2</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#fold">EqSet2.fold</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">q</span> <span class="id">opte</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#opte">opte</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.backend.Locations.html#Loc.eq">Loc.eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l1">l1</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#l2">l2</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#elements_between">EqSet2.elements_between</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#select_loc_l">select_loc_l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l1">l1</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#select_loc_h">select_loc_h</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l1">l1</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#eqs2">eqs2</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>).<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">subst_loc_part</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">k</span> <span class="id">e</span></span> simulates the effect of assigning
  <span class="bracket"><span class="id">l2</span></span> to the <span class="bracket"><span class="id">k</span></span> part of <span class="bracket"><span class="id">l1</span></span> on <span class="bracket"><span class="id">e</span></span>.
  All equations of the form <span class="bracket"><span class="id">r</span> = <span class="id">l1</span> [<span class="id">k</span>]</span> are replaced by <span class="bracket"><span class="id">r</span> = <span class="id">l2</span> [<span class="id">Full</span>]</span>.
  Return <span class="bracket"><span class="id">None</span></span> if <span class="bracket"><span class="id">e</span></span> contains an equation of the form <span class="bracket"><span class="id">r</span> = <span class="id">l</span></span> with <span class="bracket"><span class="id">l</span></span>
  partially overlapping <span class="bracket"><span class="id">l1</span></span>, or an equation of the form <span class="bracket"><span class="id">r</span> = <span class="id">l1</span></span> with
  a kind different from <span class="bracket"><span class="id">k1</span></span>.
</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="subst_loc_part">subst_loc_part</a></span> (<span class="id">l1</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">l2</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">k</span>: <span class="id"><a href="compcert.backend.Allocation.html#equation_kind">equation_kind</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#fold">EqSet2.fold</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">q</span> <span class="id">opte</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#opte">opte</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.backend.Locations.html#Loc.eq">Loc.eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l1">l1</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.backend.Allocation.html#eq">IndexedEqKind.eq</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#k">k</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#l2">l2</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#elements_between">EqSet2.elements_between</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#select_loc_l">select_loc_l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l1">l1</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#select_loc_h">select_loc_h</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l1">l1</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#eqs2">eqs2</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>).<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">subst_loc_pair</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">l2</span>'</span> simulates the effect of assigning
  <span class="bracket"><span class="id">makelong</span> <span class="id">l2</span> <span class="id">l2</span>'</span> to <span class="bracket"><span class="id">l1</span></span>.  All equations of the form <span class="bracket"><span class="id">r</span> = <span class="id">l1</span> [<span class="id">Full</span>]</span>
  are replaced by the two equations <span class="bracket"><span class="id">r</span> = <span class="id">l2</span> [<span class="id">High</span>], <span class="id">r</span> = <span class="id">l2</span>' [<span class="id">Low</span>]</span>.
  Return <span class="bracket"><span class="id">None</span></span> if <span class="bracket"><span class="id">e</span></span> contains an equation of the form <span class="bracket"><span class="id">r</span> = <span class="id">l</span></span> with <span class="bracket"><span class="id">l</span></span>
  partially overlapping <span class="bracket"><span class="id">l1</span></span>, or an equation of the form <span class="bracket"><span class="id">r</span> = <span class="id">l1</span></span> with
  a kind different from <span class="bracket"><span class="id">Full</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="subst_loc_pair">subst_loc_pair</a></span> (<span class="id">l1</span> <span class="id">l2</span> <span class="id">l2</span>': <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#fold">EqSet2.fold</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">q</span> <span class="id">opte</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#opte">opte</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.backend.Locations.html#Loc.eq">Loc.eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l1">l1</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.backend.Allocation.html#eq">IndexedEqKind.eq</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#l2">l2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) <span class="id">l2</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#elements_between">EqSet2.elements_between</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#select_loc_l">select_loc_l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l1">l1</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#select_loc_h">select_loc_h</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l1">l1</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#eqs2">eqs2</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>).<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">loc_type_compat</span> <span class="id">env</span> <span class="id">l</span> <span class="id">e</span></span> checks that for all equations <span class="bracket"><span class="id">r</span> = <span class="id">l</span></span> in <span class="bracket"><span class="id">e</span></span>,
  the type <span class="bracket"><span class="id">env</span> <span class="id">r</span></span> of <span class="bracket"><span class="id">r</span></span> is compatible with the type of <span class="bracket"><span class="id">l</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sel_type">sel_type</a></span> (<span class="id">k</span>: <span class="id"><a href="compcert.backend.Allocation.html#equation_kind">equation_kind</a></span>) (<span class="id">ty</span>: <span class="id"><a href="compcert.common.AST.html#typ">typ</a></span>) : <span class="id"><a href="compcert.common.AST.html#typ">typ</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#k">k</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#ty">ty</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> | <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> =&gt; <span class="id"><a href="compcert.common.AST.html#Tint">Tint</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="loc_type_compat">loc_type_compat</a></span> (<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>) (<span class="id">l</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#for_all_between">EqSet2.for_all_between</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">q</span> =&gt; <span class="id"><a href="compcert.common.AST.html#subtype">subtype</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#sel_type">sel_type</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>))) (<span class="id"><a href="compcert.backend.Locations.html#Loc.type">Loc.type</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#select_loc_l">select_loc_l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#select_loc_h">select_loc_h</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#eqs2">eqs2</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>).<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">long_type_compat</span> <span class="id">env</span> <span class="id">l</span> <span class="id">e</span></span> checks that for all equations <span class="bracket"><span class="id">r</span> = <span class="id">l</span></span> in <span class="bracket"><span class="id">e</span></span>.
  then type <span class="bracket"><span class="id">env</span> <span class="id">r</span></span> of <span class="bracket"><span class="id">r</span></span> is compatible with the type <span class="bracket"><span class="id">Tlong</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="long_type_compat">long_type_compat</a></span> (<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>) (<span class="id">l</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#for_all_between">EqSet2.for_all_between</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">q</span> =&gt; <span class="id"><a href="compcert.common.AST.html#subtype">subtype</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#ereg">ereg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>)) <span class="id"><a href="compcert.common.AST.html#Tlong">Tlong</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#select_loc_l">select_loc_l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#select_loc_h">select_loc_h</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#eqs2">eqs2</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>).<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">add_equations</span> [<span class="id">r1</span>...<span class="id">rN</span>] [<span class="id">m1</span>...<span class="id">mN</span>] <span class="id">e</span></span> adds to <span class="bracket"><span class="id">e</span></span> the <span class="bracket"><span class="id">N</span></span> equations
    <span class="bracket"><span class="id">ri</span> = <span class="id">R</span> <span class="id">mi</span> [<span class="id">Full</span>]</span>.  Return <span class="bracket"><span class="id">None</span></span> if the two lists have different lengths.
</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="add_equations">add_equations</a></span> (<span class="id">rl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">ml</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#rl">rl</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#ml">ml</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id">r1</span> :: <span class="id">rl</span>, <span class="id">m1</span> :: <span class="id">ml</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#add_equations">add_equations</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rl">rl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#ml">ml</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id">r1</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">m1</span>)) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">add_equations_args</span></span> is similar but additionally handles the splitting
  of pseudoregisters of type <span class="bracket"><span class="id">Tlong</span></span> in two locations containing the
  two 32-bit halves of the 64-bit integer. </div>
<br/>
<span class="id">Function</span> <span class="id">add_equations_args</span> (<span class="id">rl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">tyl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#typ">typ</a></span>) (<span class="id">ll</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#rpair">rpair</a></span> <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>)) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#rl">rl</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#tyl">tyl</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#ll">ll</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id">r1</span> :: <span class="id">rl</span>, <span class="id">ty</span> :: <span class="id">tyl</span>, <span class="id"><a href="compcert.common.AST.html#One">One</a></span> <span class="id">l1</span> :: <span class="id">ll</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#add_equations_args">add_equations_args</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rl">rl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#tyl">tyl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#ll">ll</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id">r1</span> <span class="id">l1</span>) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)<br/>
&nbsp;&nbsp;| <span class="id">r1</span> :: <span class="id">rl</span>, <span class="id"><a href="compcert.common.AST.html#Tlong">Tlong</a></span> :: <span class="id">tyl</span>, <span class="id"><a href="compcert.common.AST.html#Twolong">Twolong</a></span> <span class="id">l1</span> <span class="id">l2</span> :: <span class="id">ll</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#add_equations_args">add_equations_args</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rl">rl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#tyl">tyl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#ll">ll</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> <span class="id">r1</span> <span class="id">l2</span>) (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> <span class="id">r1</span> <span class="id">l1</span>) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">add_equations_res</span></span> is similar but is specialized to the case where
  there is only one pseudo-register. </div>
<br/>
<span class="id">Function</span> <span class="id">add_equations_res</span> (<span class="id">r</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">oty</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.AST.html#typ">typ</a></span>) (<span class="id">p</span>: <span class="id"><a href="compcert.common.AST.html#rpair">rpair</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#p">p</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#oty">oty</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#One">One</a></span> <span class="id">mr</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">mr</span>)) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Twolong">Twolong</a></span> <span class="id">mr1</span> <span class="id">mr2</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.AST.html#Tlong">Tlong</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">mr2</span>)) (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">mr1</span>)) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">remove_equations_res</span></span> is similar to <span class="bracket"><span class="id">add_equations_res</span></span> but removes
  equations instead of adding them. </div>
<br/>
<span class="id">Function</span> <span class="id">remove_equations_res</span> (<span class="id">r</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">p</span>: <span class="id"><a href="compcert.common.AST.html#rpair">rpair</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#One">One</a></span> <span class="id">mr</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">mr</span>)) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Twolong">Twolong</a></span> <span class="id">mr1</span> <span class="id">mr2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.x86.Machregs.html#mreg_eq">mreg_eq</a></span> <span class="id">mr2</span> <span class="id">mr1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">mr2</span>)) (<span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">mr1</span>)) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">add_equations_ros</span></span> adds an equation, if needed, between an optional
  pseudoregister and an optional machine register.  It is used for the
  function argument of the <span class="bracket"><span class="id">Icall</span></span> and <span class="bracket"><span class="id">Itailcall</span></span> instructions. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="add_equation_ros">add_equation_ros</a></span> (<span class="id">ros</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span> + <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) (<span class="id">ros</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span> + <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#ros">ros</a></span>, <span class="id">ros</span>' <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inl">inl</a></span> <span class="id">r</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inl">inl</a></span> <span class="id">mr</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id">r</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">mr</span>)) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inr">inr</a></span> <span class="id">id</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inr">inr</a></span> <span class="id">id</span>' =&gt; <span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> <span class="id">id</span>'); <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">add_equations_builtin_arg</span></span> adds the needed equations for arguments
    to builtin functions. </div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="add_equations_builtin_arg">add_equations_builtin_arg</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>) (<span class="id">arg</span>: <span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">arg</span>': <span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#arg">arg</a></span>, <span class="id">arg</span>' <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BA">BA</a></span> <span class="id">r</span>, <span class="id"><a href="compcert.common.AST.html#BA">BA</a></span> <span class="id">l</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id">r</span> <span class="id">l</span>) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BA">BA</a></span> <span class="id">r</span>, <span class="id"><a href="compcert.common.AST.html#BA_splitlong">BA_splitlong</a></span> (<span class="id"><a href="compcert.common.AST.html#BA">BA</a></span> <span class="id">lhi</span>) (<span class="id"><a href="compcert.common.AST.html#BA">BA</a></span> <span class="id">llo</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#typ_eq">typ_eq</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">r</span>) <span class="id"><a href="compcert.common.AST.html#Tlong">Tlong</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.x86_64.Archi.html#splitlong">Archi.splitlong</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> <span class="id">r</span> <span class="id">llo</span>) (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> <span class="id">r</span> <span class="id">lhi</span>) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BA_int">BA_int</a></span> <span class="id">n</span>, <span class="id"><a href="compcert.common.AST.html#BA_int">BA_int</a></span> <span class="id">n</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id">n</span> <span class="id">n</span>'); <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BA_long">BA_long</a></span> <span class="id">n</span>, <span class="id"><a href="compcert.common.AST.html#BA_long">BA_long</a></span> <span class="id">n</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.eq_dec">Int64.eq_dec</a></span> <span class="id">n</span> <span class="id">n</span>'); <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BA_float">BA_float</a></span> <span class="id">f</span>, <span class="id"><a href="compcert.common.AST.html#BA_float">BA_float</a></span> <span class="id">f</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Floats.html#Float.eq_dec">Float.eq_dec</a></span> <span class="id">f</span> <span class="id">f</span>'); <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BA_single">BA_single</a></span> <span class="id">f</span>, <span class="id"><a href="compcert.common.AST.html#BA_single">BA_single</a></span> <span class="id">f</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Floats.html#Float32.eq_dec">Float32.eq_dec</a></span> <span class="id">f</span> <span class="id">f</span>'); <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BA_loadstack">BA_loadstack</a></span> <span class="id">chunk</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.AST.html#BA_loadstack">BA_loadstack</a></span> <span class="id">chunk</span>' <span class="id">ofs</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#chunk_eq">chunk_eq</a></span> <span class="id">chunk</span> <span class="id">chunk</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span> <span class="id">ofs</span> <span class="id">ofs</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BA_addrstack">BA_addrstack</a></span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.AST.html#BA_addrstack">BA_addrstack</a></span> <span class="id">ofs</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span> <span class="id">ofs</span> <span class="id">ofs</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BA_loadglobal">BA_loadglobal</a></span> <span class="id">chunk</span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.AST.html#BA_loadglobal">BA_loadglobal</a></span> <span class="id">chunk</span>' <span class="id">id</span>' <span class="id">ofs</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#chunk_eq">chunk_eq</a></span> <span class="id">chunk</span> <span class="id">chunk</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> <span class="id">id</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span> <span class="id">ofs</span> <span class="id">ofs</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BA_addrglobal">BA_addrglobal</a></span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.AST.html#BA_addrglobal">BA_addrglobal</a></span> <span class="id">id</span>' <span class="id">ofs</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> <span class="id">id</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq_dec">Ptrofs.eq_dec</a></span> <span class="id">ofs</span> <span class="id">ofs</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BA_splitlong">BA_splitlong</a></span> <span class="id">hi</span> <span class="id">lo</span>, <span class="id"><a href="compcert.common.AST.html#BA_splitlong">BA_splitlong</a></span> <span class="id">hi</span>' <span class="id">lo</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations_builtin_arg">add_equations_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">hi</span> <span class="id">hi</span>' <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#add_equations_builtin_arg">add_equations_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">lo</span> <span class="id">lo</span>' <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BA_addptr">BA_addptr</a></span> <span class="id">a1</span> <span class="id">a2</span>, <span class="id"><a href="compcert.common.AST.html#BA_addptr">BA_addptr</a></span> <span class="id">a1</span>' <span class="id">a2</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations_builtin_arg">add_equations_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">a1</span> <span class="id">a1</span>' <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#add_equations_builtin_arg">add_equations_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">a2</span> <span class="id">a2</span>' <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="add_equations_builtin_args">add_equations_builtin_args</a></span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>))<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">args</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>)) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#args">args</a></span>, <span class="id">args</span>' <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id">a1</span> :: <span class="id">al</span>, <span class="id">a1</span>' :: <span class="id">al</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations_builtin_arg">add_equations_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">a1</span> <span class="id">a1</span>' <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#add_equations_builtin_args">add_equations_builtin_args</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">al</span> <span class="id">al</span>' <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">For <span class="bracket"><span class="id">EF_debug</span></span> builtins, some arguments can be removed. </div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="add_equations_debug_args">add_equations_debug_args</a></span><br/>
&nbsp;&nbsp;&nbsp;(<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>) (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>))<br/>
&nbsp;&nbsp;&nbsp;(<span class="id">args</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>)) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#args">args</a></span>, <span class="id">args</span>' <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id">a1</span> :: <span class="id">al</span>, <span class="id">a1</span>' :: <span class="id">al</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#add_equations_builtin_arg">add_equations_builtin_arg</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">a1</span> <span class="id">a1</span>' <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#add_equations_debug_args">add_equations_debug_args</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">al</span> <span class="id">args</span>' <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e1</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#add_equations_debug_args">add_equations_debug_args</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">al</span> <span class="id">al</span>' <span class="id">e1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Checking of the result of a builtin </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="remove_equations_builtin_res">remove_equations_builtin_res</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>) (<span class="id">res</span>: <span class="id"><a href="compcert.common.AST.html#builtin_res">builtin_res</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">res</span>': <span class="id"><a href="compcert.common.AST.html#builtin_res">builtin_res</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#res">res</a></span>, <span class="id">res</span>' <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BR">BR</a></span> <span class="id">r</span>, <span class="id"><a href="compcert.common.AST.html#BR">BR</a></span> <span class="id">r</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id">r</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">r</span>')) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BR">BR</a></span> <span class="id">r</span>, <span class="id"><a href="compcert.common.AST.html#BR_splitlong">BR_splitlong</a></span> (<span class="id"><a href="compcert.common.AST.html#BR">BR</a></span> <span class="id">rhi</span>) (<span class="id"><a href="compcert.common.AST.html#BR">BR</a></span> <span class="id">rlo</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#typ_eq">typ_eq</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">r</span>) <span class="id"><a href="compcert.common.AST.html#Tlong">Tlong</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.x86.Machregs.html#mreg_eq">mreg_eq</a></span> <span class="id">rhi</span> <span class="id">rlo</span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> <span class="id">r</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">rlo</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> <span class="id">r</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">rhi</span>)) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#BR_none">BR_none</a></span>, <span class="id"><a href="compcert.common.AST.html#BR_none">BR_none</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">can_undef</span> <span class="id">ml</span></span> returns true if all machine registers in <span class="bracket"><span class="id">ml</span></span> are
  unconstrained and can harmlessly be undefined. </div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="can_undef">can_undef</a></span> (<span class="id">ml</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#ml">ml</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id">m1</span> :: <span class="id">ml</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#loc_unconstrained">loc_unconstrained</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">m1</span>) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> <span class="id"><a href="compcert.backend.Allocation.html#ml">ml</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="can_undef_except">can_undef_except</a></span> (<span class="id">l</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">ml</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#ml">ml</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id">m1</span> :: <span class="id">ml</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Locations.html#Loc.eq">Loc.eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">m1</span>) || <span class="id"><a href="compcert.backend.Allocation.html#loc_unconstrained">loc_unconstrained</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">m1</span>) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>) &amp;&amp; <span class="id"><a href="compcert.backend.Allocation.html#can_undef_except">can_undef_except</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#ml">ml</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">no_caller_saves</span> <span class="id">e</span></span> returns <span class="bracket"><span class="id">e</span></span> if all caller-save locations are
  unconstrained in <span class="bracket"><span class="id">e</span></span>.  In other words, <span class="bracket"><span class="id">e</span></span> contains no equations
  involving a caller-save register or <span class="bracket"><span class="id">Outgoing</span></span> stack slot. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="no_caller_saves">no_caller_saves</a></span> (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#for_all">EqSet.for_all</a></span><br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">eq</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eq">eq</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.x86.Conventions1.html#is_callee_save">is_callee_save</a></span> <span class="id">r</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Locations.html#S">S</a></span> <span class="id"><a href="compcert.backend.Locations.html#Outgoing">Outgoing</a></span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Locations.html#S">S</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">compat_left</span> <span class="id">r</span> <span class="id">l</span> <span class="id">e</span></span> returns true if all equations in <span class="bracket"><span class="id">e</span></span> that involve
    <span class="bracket"><span class="id">r</span></span> are of the form <span class="bracket"><span class="id">r</span> = <span class="id">l</span> [<span class="id">Full</span>]</span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="compat_left">compat_left</a></span> (<span class="id">r</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">l</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#for_all_between">EqSet.for_all_between</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">q</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> =&gt; <span class="id"><a href="compcert.backend.Locations.html#Loc.eq">Loc.eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#select_reg_l">select_reg_l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#select_reg_h">select_reg_h</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#eqs1">eqs1</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>).<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">compat_left2</span> <span class="id">r</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id">e</span></span> returns true if all equations in <span class="bracket"><span class="id">e</span></span> that involve
    <span class="bracket"><span class="id">r</span></span> are of the form <span class="bracket"><span class="id">r</span> = <span class="id">l1</span> [<span class="id">High</span>]</span> or <span class="bracket"><span class="id">r</span> = <span class="id">l2</span> [<span class="id">Low</span>]</span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="compat_left2">compat_left2</a></span> (<span class="id">r</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">l1</span> <span class="id">l2</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#for_all_between">EqSet.for_all_between</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">q</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#ekind">ekind</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> =&gt; <span class="id"><a href="compcert.backend.Locations.html#Loc.eq">Loc.eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l1">l1</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> =&gt; <span class="id"><a href="compcert.backend.Locations.html#Loc.eq">Loc.eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#l2">l2</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eloc">eloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#q">q</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#select_reg_l">select_reg_l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span>) (<span class="id"><a href="compcert.backend.Allocation.html#select_reg_h">select_reg_h</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#eqs1">eqs1</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>).<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">ros_compatible_tailcall</span> <span class="id">ros</span></span> returns true if <span class="bracket"><span class="id">ros</span></span> is a function
  name or a caller-save register.  This is used to check <span class="bracket"><span class="id">Itailcall</span></span>
  instructions. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ros_compatible_tailcall">ros_compatible_tailcall</a></span> (<span class="id">ros</span>: <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span> + <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#ros">ros</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inl">inl</a></span> <span class="id">r</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.x86.Conventions1.html#is_callee_save">is_callee_save</a></span> <span class="id">r</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inr">inr</a></span> <span class="id">id</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<h1> The validator </h1>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="destroyed_by_move">destroyed_by_move</a></span> (<span class="id">src</span> <span class="id">dst</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#src">src</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#dst">dst</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Locations.html#S">S</a></span> <span class="id">sl</span> <span class="id">ofs</span> <span class="id">ty</span>, <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.LTL.html#destroyed_by_getstack">destroyed_by_getstack</a></span> <span class="id">sl</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id"><a href="compcert.backend.Locations.html#S">S</a></span> <span class="id">sl</span> <span class="id">ofs</span> <span class="id">ty</span> =&gt; <span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_setstack">destroyed_by_setstack</a></span> <span class="id">ty</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_op">destroyed_by_op</a></span> <span class="id"><a href="compcert.x86.Op.html#Omove">Omove</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="well_typed_move">well_typed_move</a></span> (<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>) (<span class="id">dst</span>: <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#dst">dst</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">r</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Locations.html#S">S</a></span> <span class="id">sl</span> <span class="id">ofs</span> <span class="id">ty</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#loc_type_compat">loc_type_compat</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id"><a href="compcert.backend.Allocation.html#dst">dst</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Simulate the effect of a sequence of moves <span class="bracket"><span class="id">mv</span></span> on a set of
  equations <span class="bracket"><span class="id">e</span></span>.  The set <span class="bracket"><span class="id">e</span></span> is the equations that must hold
  after the sequence of moves.  Return the set of equations that
  must hold before the sequence of moves.  Return <span class="bracket"><span class="id">None</span></span> if the
  set of equations <span class="bracket"><span class="id">e</span></span> cannot hold after the sequence of moves. </div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="track_moves">track_moves</a></span> (<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>) (<span class="id">mv</span>: <span class="id"><a href="compcert.backend.Allocation.html#moves">moves</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#mv">mv</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#MV">MV</a></span> <span class="id">src</span> <span class="id">dst</span> :: <span class="id">mv</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id"><a href="compcert.backend.Allocation.html#mv">mv</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef_except">can_undef_except</a></span> <span class="id">dst</span> (<span class="id"><a href="compcert.backend.Allocation.html#destroyed_by_move">destroyed_by_move</a></span> <span class="id">src</span> <span class="id">dst</span>)) <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#well_typed_move">well_typed_move</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#subst_loc">subst_loc</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#MVmakelong">MVmakelong</a></span> <span class="id">src1</span> <span class="id">src2</span> <span class="id">dst</span> :: <span class="id">mv</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id"><a href="compcert.backend.Allocation.html#mv">mv</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#long_type_compat">long_type_compat</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst</span>) <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#subst_loc_pair">subst_loc_pair</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst</span>) (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">src1</span>) (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">src2</span>) <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#MVlowlong">MVlowlong</a></span> <span class="id">src</span> <span class="id">dst</span> :: <span class="id">mv</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id"><a href="compcert.backend.Allocation.html#mv">mv</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#subst_loc_part">subst_loc_part</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst</span>) (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">src</span>) <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#MVhighlong">MVhighlong</a></span> <span class="id">src</span> <span class="id">dst</span> :: <span class="id">mv</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id"><a href="compcert.backend.Allocation.html#mv">mv</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#subst_loc_part">subst_loc_part</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst</span>) (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">src</span>) <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">transfer_use_def</span> <span class="id">args</span> <span class="id">res</span> <span class="id">args</span>' <span class="id">res</span>' <span class="id">undefs</span> <span class="id">e</span></span> returns the set
  of equations that must hold "before" in order for the equations <span class="bracket"><span class="id">e</span></span>
  to hold "after" the execution of RTL and LTL code of the following form:
<pre>
                RTL                            LTL
         use pseudoregs args            use machine registers args'
         define pseudoreg res           undefine machine registers undef
                                        define machine register res'</pre>
  As usual, <span class="bracket"><span class="id">None</span></span> is returned if the equations <span class="bracket"><span class="id">e</span></span> cannot hold after
  this execution.
</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transfer_use_def">transfer_use_def</a></span> (<span class="id">args</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">res</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">args</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">res</span>': <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">undefs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.x86.Machregs.html#mreg">mreg</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e1</span> := <span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id"><a href="compcert.backend.Allocation.html#res">res</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">res</span>')) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#reg_loc_unconstrained">reg_loc_unconstrained</a></span> <span class="id"><a href="compcert.backend.Allocation.html#res">res</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">res</span>') <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>);<br/>
&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> <span class="id"><a href="compcert.backend.Allocation.html#undefs">undefs</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#add_equations">add_equations</a></span> <span class="id"><a href="compcert.backend.Allocation.html#args">args</a></span> <span class="id">args</span>' <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="kind_first_word">kind_first_word</a></span> := <span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span>.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="kind_second_word">kind_second_word</a></span> := <span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span>.<br/>
<br/>
<div class="doc">The core transfer function.  It takes a set <span class="bracket"><span class="id">e</span></span> of equations that must
  hold "after" and a block shape <span class="bracket"><span class="id">shape</span></span> representing a matching pair
  of an RTL instruction and an LTL basic block.  It returns the set of
  equations that must hold "before" these instructions, or <span class="bracket"><span class="id">None</span></span> if
  impossible. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transfer_aux">transfer_aux</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.backend.RTL.html#function">RTL.function</a></span>) (<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">shape</span>: <span class="id"><a href="compcert.backend.Allocation.html#block_shape">block_shape</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#shape">shape</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSnop">BSnop</a></span> <span class="id">mv</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSmove">BSmove</a></span> <span class="id">src</span> <span class="id">dst</span> <span class="id">mv</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv</span> (<span class="id"><a href="compcert.backend.Allocation.html#subst_reg">subst_reg</a></span> <span class="id">dst</span> <span class="id">src</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSmakelong">BSmakelong</a></span> <span class="id">src1</span> <span class="id">src2</span> <span class="id">dst</span> <span class="id">mv</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e1</span> := <span class="id"><a href="compcert.backend.Allocation.html#subst_reg_kind">subst_reg_kind</a></span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> <span class="id">src1</span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e2</span> := <span class="id"><a href="compcert.backend.Allocation.html#subst_reg_kind">subst_reg_kind</a></span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> <span class="id">src2</span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#reg_unconstrained">reg_unconstrained</a></span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv</span> <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSlowlong">BSlowlong</a></span> <span class="id">src</span> <span class="id">dst</span> <span class="id">mv</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e1</span> := <span class="id"><a href="compcert.backend.Allocation.html#subst_reg_kind">subst_reg_kind</a></span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id">src</span> <span class="id"><a href="compcert.backend.Allocation.html#Low">Low</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#reg_unconstrained">reg_unconstrained</a></span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv</span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BShighlong">BShighlong</a></span> <span class="id">src</span> <span class="id">dst</span> <span class="id">mv</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e1</span> := <span class="id"><a href="compcert.backend.Allocation.html#subst_reg_kind">subst_reg_kind</a></span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id">src</span> <span class="id"><a href="compcert.backend.Allocation.html#High">High</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#reg_unconstrained">reg_unconstrained</a></span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv</span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSop">BSop</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> <span class="id">mv1</span> <span class="id">args</span>' <span class="id">res</span>' <span class="id">mv2</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv2</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e2</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#transfer_use_def">transfer_use_def</a></span> <span class="id">args</span> <span class="id">res</span> <span class="id">args</span>' <span class="id">res</span>' (<span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_op">destroyed_by_op</a></span> <span class="id">op</span>) <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv1</span> <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSopdead">BSopdead</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> <span class="id">mv</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#reg_unconstrained">reg_unconstrained</a></span> <span class="id">res</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSload">BSload</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id">mv1</span> <span class="id">args</span>' <span class="id">dst</span>' <span class="id">mv2</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv2</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e2</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#transfer_use_def">transfer_use_def</a></span> <span class="id">args</span> <span class="id">dst</span> <span class="id">args</span>' <span class="id">dst</span>' (<span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_load">destroyed_by_load</a></span> <span class="id">chunk</span> <span class="id">addr</span>) <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv1</span> <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSload2">BSload2</a></span> <span class="id">addr</span> <span class="id">addr</span>' <span class="id">args</span> <span class="id">dst</span> <span class="id">mv1</span> <span class="id">args1</span>' <span class="id">dst1</span>' <span class="id">mv2</span> <span class="id">args2</span>' <span class="id">dst2</span>' <span class="id">mv3</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv3</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e2</span> := <span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#kind_second_word">kind_second_word</a></span> <span class="id">dst</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst2</span>')) <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#loc_unconstrained">loc_unconstrained</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst2</span>') <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_load">destroyed_by_load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">addr</span>') <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e3</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations">add_equations</a></span> <span class="id">args</span> <span class="id">args2</span>' <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e4</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv2</span> <span class="id"><a href="compcert.backend.Allocation.html#e3">e3</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e5</span> := <span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#kind_first_word">kind_first_word</a></span> <span class="id">dst</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst1</span>')) <span class="id"><a href="compcert.backend.Allocation.html#e4">e4</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#loc_unconstrained">loc_unconstrained</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst1</span>') <span class="id"><a href="compcert.backend.Allocation.html#e5">e5</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_load">destroyed_by_load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">addr</span>) <span class="id"><a href="compcert.backend.Allocation.html#e5">e5</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#reg_unconstrained">reg_unconstrained</a></span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#e5">e5</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e6</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations">add_equations</a></span> <span class="id">args</span> <span class="id">args1</span>' <span class="id"><a href="compcert.backend.Allocation.html#e5">e5</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv1</span> <span class="id"><a href="compcert.backend.Allocation.html#e6">e6</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSload2_1">BSload2_1</a></span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id">mv1</span> <span class="id">args</span>' <span class="id">dst</span>' <span class="id">mv2</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv2</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e2</span> := <span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#kind_first_word">kind_first_word</a></span> <span class="id">dst</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst</span>')) <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#reg_loc_unconstrained">reg_loc_unconstrained</a></span> <span class="id">dst</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst</span>') <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_load">destroyed_by_load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">addr</span>) <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e3</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations">add_equations</a></span> <span class="id">args</span> <span class="id">args</span>' <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv1</span> <span class="id"><a href="compcert.backend.Allocation.html#e3">e3</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSload2_2">BSload2_2</a></span> <span class="id">addr</span> <span class="id">addr</span>' <span class="id">args</span> <span class="id">dst</span> <span class="id">mv1</span> <span class="id">args</span>' <span class="id">dst</span>' <span class="id">mv2</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv2</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e2</span> := <span class="id"><a href="compcert.backend.Allocation.html#remove_equation">remove_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#kind_second_word">kind_second_word</a></span> <span class="id">dst</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst</span>')) <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#reg_loc_unconstrained">reg_loc_unconstrained</a></span> <span class="id">dst</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">dst</span>') <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_load">destroyed_by_load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">addr</span>') <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e3</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations">add_equations</a></span> <span class="id">args</span> <span class="id">args</span>' <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv1</span> <span class="id"><a href="compcert.backend.Allocation.html#e3">e3</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSloaddead">BSloaddead</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id">mv</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#reg_unconstrained">reg_unconstrained</a></span> <span class="id">dst</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSstore">BSstore</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">src</span> <span class="id">mv</span> <span class="id">args</span>' <span class="id">src</span>' <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_store">destroyed_by_store</a></span> <span class="id">chunk</span> <span class="id">addr</span>) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations">add_equations</a></span> (<span class="id">src</span> :: <span class="id">args</span>) (<span class="id">src</span>' :: <span class="id">args</span>') <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv</span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSstore2">BSstore2</a></span> <span class="id">addr</span> <span class="id">addr</span>' <span class="id">args</span> <span class="id">src</span> <span class="id">mv1</span> <span class="id">args1</span>' <span class="id">src1</span>' <span class="id">mv2</span> <span class="id">args2</span>' <span class="id">src2</span>' <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_store">destroyed_by_store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">addr</span>') <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations">add_equations</a></span> <span class="id">args</span> <span class="id">args2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#kind_second_word">kind_second_word</a></span> <span class="id">src</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">src2</span>')) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e2</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv2</span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_store">destroyed_by_store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id">addr</span>) <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e3</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations">add_equations</a></span> <span class="id">args</span> <span class="id">args1</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#kind_first_word">kind_first_word</a></span> <span class="id">src</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">src1</span>')) <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv1</span> <span class="id"><a href="compcert.backend.Allocation.html#e3">e3</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BScall">BScall</a></span> <span class="id">sg</span> <span class="id">ros</span> <span class="id">args</span> <span class="id">res</span> <span class="id">mv1</span> <span class="id">ros</span>' <span class="id">mv2</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">args</span>' := <span class="id"><a href="compcert.x86.Conventions1.html#loc_arguments">loc_arguments</a></span> <span class="id">sg</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">res</span>' := <span class="id"><a href="compcert.x86.Conventions1.html#loc_result">loc_result</a></span> <span class="id">sg</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv2</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e2</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#remove_equations_res">remove_equations_res</a></span> <span class="id">res</span> <span class="id">res</span>' <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#forallb">forallb</a></span> (<span class="kwd">fun</span> <span class="id">l</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#reg_loc_unconstrained">reg_loc_unconstrained</a></span> <span class="id">res</span> <span class="id"><a href="compcert.backend.Allocation.html#l">l</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> (<span class="id"><a href="compcert.common.AST.html#regs_of_rpair">regs_of_rpair</a></span> <span class="id">res</span>')));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#no_caller_saves">no_caller_saves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e3</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equation_ros">add_equation_ros</a></span> <span class="id">ros</span> <span class="id">ros</span>' <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e4</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations_args">add_equations_args</a></span> <span class="id">args</span> (<span class="id"><a href="compcert.common.AST.html#sig_args">sig_args</a></span> <span class="id">sg</span>) <span class="id">args</span>' <span class="id"><a href="compcert.backend.Allocation.html#e3">e3</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv1</span> <span class="id"><a href="compcert.backend.Allocation.html#e4">e4</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BStailcall">BStailcall</a></span> <span class="id">sg</span> <span class="id">ros</span> <span class="id">args</span> <span class="id">mv1</span> <span class="id">ros</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">args</span>' := <span class="id"><a href="compcert.x86.Conventions1.html#loc_arguments">loc_arguments</a></span> <span class="id">sg</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Conventions.html#tailcall_is_possible">tailcall_is_possible</a></span> <span class="id">sg</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#opt_typ_eq">opt_typ_eq</a></span> <span class="id">sg</span>.(<span class="id"><a href="compcert.common.AST.html#sig_res">sig_res</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_sig">RTL.fn_sig</a></span>).(<span class="id"><a href="compcert.common.AST.html#sig_res">sig_res</a></span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#ros_compatible_tailcall">ros_compatible_tailcall</a></span> <span class="id">ros</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equation_ros">add_equation_ros</a></span> <span class="id">ros</span> <span class="id">ros</span>' <span class="id"><a href="compcert.backend.Allocation.html#empty_eqs">empty_eqs</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e2</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations_args">add_equations_args</a></span> <span class="id">args</span> (<span class="id"><a href="compcert.common.AST.html#sig_args">sig_args</a></span> <span class="id">sg</span>) <span class="id">args</span>' <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv1</span> <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSbuiltin">BSbuiltin</a></span> <span class="id">ef</span> <span class="id">args</span> <span class="id">res</span> <span class="id">mv1</span> <span class="id">args</span>' <span class="id">res</span>' <span class="id">mv2</span> <span class="id">s</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv2</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e2</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#remove_equations_builtin_res">remove_equations_builtin_res</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">res</span> <span class="id">res</span>' <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#forallb">forallb</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#reg_unconstrained">reg_unconstrained</a></span> <span class="id"><a href="compcert.backend.Allocation.html#r">r</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#params_of_builtin_res">params_of_builtin_res</a></span> <span class="id">res</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#forallb">forallb</a></span> (<span class="kwd">fun</span> <span class="id">mr</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#loc_unconstrained">loc_unconstrained</a></span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id"><a href="compcert.backend.Allocation.html#mr">mr</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#params_of_builtin_res">params_of_builtin_res</a></span> <span class="id">res</span>'));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_builtin">destroyed_by_builtin</a></span> <span class="id">ef</span>) <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e3</span> &lt;-<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">ef</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_debug">EF_debug</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#add_equations_debug_args">add_equations_debug_args</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">args</span> <span class="id">args</span>' <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>              =&gt; <span class="id"><a href="compcert.backend.Allocation.html#add_equations_builtin_args">add_equations_builtin_args</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">args</span> <span class="id">args</span>' <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv1</span> <span class="id"><a href="compcert.backend.Allocation.html#e3">e3</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BScond">BScond</a></span> <span class="id">cond</span> <span class="id">args</span> <span class="id">mv</span> <span class="id">args</span>' <span class="id">s1</span> <span class="id">s2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> (<span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_cond">destroyed_by_cond</a></span> <span class="id">cond</span>) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations">add_equations</a></span> <span class="id">args</span> <span class="id">args</span>' <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv</span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSjumptable">BSjumptable</a></span> <span class="id">arg</span> <span class="id">mv</span> <span class="id">arg</span>' <span class="id">tbl</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> <span class="id"><a href="compcert.x86.Machregs.html#destroyed_by_jumptable">destroyed_by_jumptable</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv</span> (<span class="id"><a href="compcert.backend.Allocation.html#add_equation">add_equation</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#Eq">Eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#Full">Full</a></span> <span class="id">arg</span> (<span class="id"><a href="compcert.backend.Locations.html#R">R</a></span> <span class="id">arg</span>')) <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSreturn">BSreturn</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id">mv</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv</span> <span class="id"><a href="compcert.backend.Allocation.html#empty_eqs">empty_eqs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSreturn">BSreturn</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">arg</span>) <span class="id">mv</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">arg</span>' := <span class="id"><a href="compcert.x86.Conventions1.html#loc_result">loc_result</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_sig">RTL.fn_sig</a></span> <span class="id"><a href="compcert.backend.Allocation.html#f">f</a></span>) <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#add_equations_res">add_equations_res</a></span> <span class="id">arg</span> (<span class="id"><a href="compcert.common.AST.html#sig_res">sig_res</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_sig">RTL.fn_sig</a></span> <span class="id"><a href="compcert.backend.Allocation.html#f">f</a></span>)) <span class="id">arg</span>' <span class="id"><a href="compcert.backend.Allocation.html#empty_eqs">empty_eqs</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">mv</span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">The main transfer function for the dataflow analysis.  Like <span class="bracket"><span class="id">transfer_aux</span></span>,
  it infers the equations that must hold "before" as a function of the
  equations that must hold "after".  It also handles error propagation
  and reporting. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transfer">transfer</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.backend.RTL.html#function">RTL.function</a></span>) (<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>) (<span class="id">shapes</span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.backend.Allocation.html#block_shape">block_shape</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">pc</span>: <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span>) (<span class="id">after</span>: <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#after">after</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#after">after</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">e</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#shapes">shapes</a></span>!<span class="id"><a href="compcert.backend.Allocation.html#pc">pc</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#MSG">MSG</a></span> "<span class="id">At</span> <span class="id">PC</span> " :: <span class="id"><a href="compcert.common.Errors.html#POS">POS</a></span> <span class="id"><a href="compcert.backend.Allocation.html#pc">pc</a></span> :: <span class="id"><a href="compcert.common.Errors.html#MSG">MSG</a></span> ": <span class="id">unmatched</span> <span class="id">block</span>" :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">shape</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#transfer_aux">transfer_aux</a></span> <span class="id"><a href="compcert.backend.Allocation.html#f">f</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id">shape</span> <span class="id">e</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span>(<span class="id"><a href="compcert.common.Errors.html#MSG">MSG</a></span> "<span class="id">At</span> <span class="id">PC</span> " :: <span class="id"><a href="compcert.common.Errors.html#POS">POS</a></span> <span class="id"><a href="compcert.backend.Allocation.html#pc">pc</a></span> :: <span class="id"><a href="compcert.common.Errors.html#MSG">MSG</a></span> ": <span class="id">invalid</span> <span class="id">register</span> <span class="id">allocation</span>" :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>' =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">e</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">The semilattice for dataflow analysis.  Operates on analysis results
  of type <span class="bracket"><span class="id">res</span> <span class="id">eqs</span></span>, that is, either a set of equations or an error
  message.  Errors correspond to <span class="bracket"><span class="id">Top</span></span>.  Sets of equations are ordered
  by inclusion. </div>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="LEq">LEq</a></span> &lt;: <span class="id"><a href="compcert.lib.Lattice.html#SEMILATTICE">SEMILATTICE</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LEq.t">t</a></span> := <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LEq.eq">eq</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.Allocation.html#LEq.t">t</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">a</span>, <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">b</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#EqSet.Equal">EqSet.Equal</a></span> <span class="id">a</span> <span class="id">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">_</span>, <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LEq.eq_refl">eq_refl</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3697')">Proof.</div>
<div class="proofscript" id="proof3697">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LEq.eq_sym">eq_sym</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#LEq.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3698')">Proof.</div>
<div class="proofscript" id="proof3698">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Allocation.html#LEq.eq">eq</a></span>; <span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LEq.eq_trans">eq_trans</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#LEq.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="id"><a href="compcert.backend.Allocation.html#z">z</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#LEq.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#z">z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3699')">Proof.</div>
<div class="proofscript" id="proof3699">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Allocation.html#LEq.eq">eq</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">try</span> <span class="id">contradiction</span>; <span class="tactic">destruct</span> <span class="id">z</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LEq.beq">beq</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.Allocation.html#LEq.t">t</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">a</span>, <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">b</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#EqSet.equal">EqSet.equal</a></span> <span class="id">a</span> <span class="id">b</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">_</span>, <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LEq.beq_correct">beq_correct</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.beq">beq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#LEq.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3700')">Proof.</div>
<div class="proofscript" id="proof3700">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Allocation.html#LEq.beq">beq</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.eq">eq</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#EqSet.equal_2">EqSet.equal_2</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LEq.ge">ge</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.Allocation.html#LEq.t">t</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">a</span>, <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">b</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#EqSet.Subset">EqSet.Subset</a></span> <span class="id">b</span> <span class="id">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LEq.ge_refl">ge_refl</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.eq">eq</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#LEq.ge">ge</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3701')">Proof.</div>
<div class="proofscript" id="proof3701">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Allocation.html#LEq.eq">eq</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.ge">ge</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#EqSet.Equal">EqSet.Equal</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#EqSet.Subset">EqSet.Subset</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>; <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LEq.ge_trans">ge_trans</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.ge">ge</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#LEq.ge">ge</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="id"><a href="compcert.backend.Allocation.html#z">z</a></span> -&gt; <span class="id"><a href="compcert.backend.Allocation.html#LEq.ge">ge</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#z">z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3702')">Proof.</div>
<div class="proofscript" id="proof3702">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Allocation.html#LEq.ge">ge</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#EqSet.Subset">EqSet.Subset</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">auto</span>; <span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">z</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="LEq.bot">bot</a></span>: <span class="id"><a href="compcert.backend.Allocation.html#LEq.t">t</a></span> := <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.Allocation.html#empty_eqs">empty_eqs</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LEq.ge_bot">ge_bot</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.ge">ge</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#LEq.bot">bot</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3703')">Proof.</div>
<div class="proofscript" id="proof3703">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Allocation.html#LEq.ge">ge</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.bot">bot</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#EqSet.Subset">EqSet.Subset</a></span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>. <span class="tactic">elim</span> (<span class="id"><a href="compcert.backend.Allocation.html#EqSet.empty_1">EqSet.empty_1</a></span> <span class="id">H</span>).<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="LEq.lub">lub</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.Allocation.html#LEq.t">t</a></span>) : <span class="id"><a href="compcert.backend.Allocation.html#LEq.t">t</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span> <span class="kwd">return</span> <span class="id">_</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">a</span>, <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">b</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#mkeqs">mkeqs</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#EqSet.union">EqSet.union</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eqs1">eqs1</a></span> <span class="id">a</span>) (<span class="id"><a href="compcert.backend.Allocation.html#eqs1">eqs1</a></span> <span class="id">b</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Allocation.html#EqSet2.union">EqSet2.union</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#eqs2">eqs2</a></span> <span class="id">a</span>) (<span class="id"><a href="compcert.backend.Allocation.html#eqs2">eqs2</a></span> <span class="id">b</span>)) <span class="id">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">_</span>, <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3704')">Next Obligation.</div>
<div class="proofscript" id="proof3704">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#EqSet2.union_1">EqSet2.union_1</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Allocation.html#eqs_same">eqs_same</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#EqSet.union_2">EqSet.union_2</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#EqSet.union_3">EqSet.union_3</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#EqSet.union_1">EqSet.union_1</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#eqs_same">eqs_same</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#EqSet2.union_2">EqSet2.union_2</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#EqSet2.union_3">EqSet2.union_3</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LEq.ge_lub_left">ge_lub_left</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.ge">ge</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#LEq.lub">lub</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3705')">Proof.</div>
<div class="proofscript" id="proof3705">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Allocation.html#LEq.lub">lub</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.ge">ge</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#EqSet.Subset">EqSet.Subset</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#EqSet.union_2">EqSet.union_2</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="LEq.ge_lub_right">ge_lub_right</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.ge">ge</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#LEq.lub">lub</a></span> <span class="id"><a href="compcert.backend.Allocation.html#x">x</a></span> <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3706')">Proof.</div>
<div class="proofscript" id="proof3706">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Allocation.html#LEq.lub">lub</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#LEq.ge">ge</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#EqSet.Subset">EqSet.Subset</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">destruct</span> <span class="id">y</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Allocation.html#EqSet.union_3">EqSet.union_3</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.Allocation.html#LEq">LEq</a></span>.<br/>
<br/>
<div class="doc">The backward dataflow solver is an instantiation of Kildall's algorithm. </div>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="DS">DS</a></span> := <span class="id"><a href="compcert.backend.Kildall.html#Backward_Dataflow_Solver">Backward_Dataflow_Solver</a></span>(<span class="id"><a href="compcert.backend.Allocation.html#LEq">LEq</a></span>)(<span class="id"><a href="compcert.backend.Kildall.html#NodeSetBackward">NodeSetBackward</a></span>).<br/>
<br/>
<div class="doc">The control-flow graph that the solver operates on is the CFG of
  block shapes built by the structural check phase.  Here is its notion
  of successors. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="successors_block_shape">successors_block_shape</a></span> (<span class="id">bsh</span>: <span class="id"><a href="compcert.backend.Allocation.html#block_shape">block_shape</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.LTL.html#node">node</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#bsh">bsh</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSnop">BSnop</a></span> <span class="id">mv</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSmove">BSmove</a></span> <span class="id">src</span> <span class="id">dst</span> <span class="id">mv</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSmakelong">BSmakelong</a></span> <span class="id">src1</span> <span class="id">src2</span> <span class="id">dst</span> <span class="id">mv</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSlowlong">BSlowlong</a></span> <span class="id">src</span> <span class="id">dst</span> <span class="id">mv</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BShighlong">BShighlong</a></span> <span class="id">src</span> <span class="id">dst</span> <span class="id">mv</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSop">BSop</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> <span class="id">mv1</span> <span class="id">args</span>' <span class="id">res</span>' <span class="id">mv2</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSopdead">BSopdead</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> <span class="id">mv</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSload">BSload</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id">mv1</span> <span class="id">args</span>' <span class="id">dst</span>' <span class="id">mv2</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSload2">BSload2</a></span> <span class="id">addr</span> <span class="id">addr</span>' <span class="id">args</span> <span class="id">dst</span> <span class="id">mv1</span> <span class="id">args1</span>' <span class="id">dst1</span>' <span class="id">mv2</span> <span class="id">args2</span>' <span class="id">dst2</span>' <span class="id">mv3</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSload2_1">BSload2_1</a></span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id">mv1</span> <span class="id">args</span>' <span class="id">dst</span>' <span class="id">mv2</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSload2_2">BSload2_2</a></span> <span class="id">addr</span> <span class="id">addr</span>' <span class="id">args</span> <span class="id">dst</span> <span class="id">mv1</span> <span class="id">args</span>' <span class="id">dst</span>' <span class="id">mv2</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSloaddead">BSloaddead</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id">mv</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSstore">BSstore</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">src</span> <span class="id">mv1</span> <span class="id">args</span>' <span class="id">src</span>' <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSstore2">BSstore2</a></span> <span class="id">addr</span> <span class="id">addr</span>' <span class="id">args</span> <span class="id">src</span> <span class="id">mv1</span> <span class="id">args1</span>' <span class="id">src1</span>' <span class="id">mv2</span> <span class="id">args2</span>' <span class="id">src2</span>' <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BScall">BScall</a></span> <span class="id">sg</span> <span class="id">ros</span> <span class="id">args</span> <span class="id">res</span> <span class="id">mv1</span> <span class="id">ros</span>' <span class="id">mv2</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BStailcall">BStailcall</a></span> <span class="id">sg</span> <span class="id">ros</span> <span class="id">args</span> <span class="id">mv1</span> <span class="id">ros</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSbuiltin">BSbuiltin</a></span> <span class="id">ef</span> <span class="id">args</span> <span class="id">res</span> <span class="id">mv1</span> <span class="id">args</span>' <span class="id">res</span>' <span class="id">mv2</span> <span class="id">s</span> =&gt; <span class="id">s</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BScond">BScond</a></span> <span class="id">cond</span> <span class="id">args</span> <span class="id">mv</span> <span class="id">args</span>' <span class="id">s1</span> <span class="id">s2</span> =&gt; <span class="id">s1</span> :: <span class="id">s2</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSjumptable">BSjumptable</a></span> <span class="id">arg</span> <span class="id">mv</span> <span class="id">arg</span>' <span class="id">tbl</span> =&gt; <span class="id">tbl</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Allocation.html#BSreturn">BSreturn</a></span> <span class="id">optarg</span> <span class="id">mv</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="analyze">analyze</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.backend.RTL.html#function">RTL.function</a></span>) (<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>) (<span class="id">bsh</span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.backend.Allocation.html#block_shape">block_shape</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#fixpoint_allnodes">DS.fixpoint_allnodes</a></span> <span class="id"><a href="compcert.backend.Allocation.html#bsh">bsh</a></span> <span class="id"><a href="compcert.backend.Allocation.html#successors_block_shape">successors_block_shape</a></span> (<span class="id"><a href="compcert.backend.Allocation.html#transfer">transfer</a></span> <span class="id"><a href="compcert.backend.Allocation.html#f">f</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id"><a href="compcert.backend.Allocation.html#bsh">bsh</a></span>).<br/>
<br/>
<h1> Validating and translating functions and programs </h1>
<br/>
<div class="doc">Checking equations at function entry point.  The RTL function receives
  its arguments in the list <span class="bracket"><span class="id">rparams</span></span> of pseudoregisters.  The LTL function
  receives them in the list <span class="bracket"><span class="id">lparams</span></span> of locations dictated by the
  calling conventions, with arguments of type <span class="bracket"><span class="id">Tlong</span></span> being split in
  two 32-bit halves.  We check that the equations <span class="bracket"><span class="id">e</span></span> that must hold
  at the beginning of the functions are compatible with these calling
  conventions, in the sense that all equations involving a pseudoreg
  <span class="bracket"><span class="id">r</span></span> from <span class="bracket"><span class="id">rparams</span></span> is of the form <span class="bracket"><span class="id">r</span> = <span class="id">l</span> [<span class="id">Full</span>]</span> or <span class="bracket"><span class="id">r</span> = <span class="id">l</span> [<span class="id">Low</span>]</span>
  or <span class="bracket"><span class="id">r</span> = <span class="id">l</span> [<span class="id">High</span>]</span>, where <span class="bracket"><span class="id">l</span></span> is the corresponding element of <span class="bracket"><span class="id">lparams</span></span>.
  Note that <span class="bracket"><span class="id">e</span></span> can contain additional equations <span class="bracket"><span class="id">r</span>' = <span class="id">l</span> [<span class="id">kind</span>]</span>
  involving pseudoregs <span class="bracket"><span class="id">r</span>'</span> not in <span class="bracket"><span class="id">rparams</span></span>: these equations are
  automatically satisfied since the initial value of <span class="bracket"><span class="id">r</span>'</span> is <span class="bracket"><span class="id">Vundef</span></span>. </div>
<br/>
<span class="id">Function</span> <span class="id">compat_entry</span> (<span class="id">rparams</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) (<span class="id">lparams</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#rpair">rpair</a></span> <span class="id"><a href="compcert.backend.Locations.html#loc">loc</a></span>)) (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="kwd">struct</span> <span class="id">rparams</span>} : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#rparams">rparams</a></span>, <span class="id"><a href="compcert.backend.Allocation.html#lparams">lparams</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id">r1</span> :: <span class="id">rl</span>,  <span class="id"><a href="compcert.common.AST.html#One">One</a></span> <span class="id">l1</span> :: <span class="id">ll</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#compat_left">compat_left</a></span> <span class="id">r1</span> <span class="id">l1</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.Allocation.html#compat_entry">compat_entry</a></span> <span class="id">rl</span> <span class="id">ll</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id">r1</span> :: <span class="id">rl</span>, <span class="id"><a href="compcert.common.AST.html#Twolong">Twolong</a></span> <span class="id">l1</span> <span class="id">l2</span> :: <span class="id">ll</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Allocation.html#compat_left2">compat_left2</a></span> <span class="id">r1</span> <span class="id">l1</span> <span class="id">l2</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.Allocation.html#compat_entry">compat_entry</a></span> <span class="id">rl</span> <span class="id">ll</span> <span class="id"><a href="compcert.backend.Allocation.html#e">e</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Checking the satisfiability of equations inferred at function entry
  point.  We also check that the RTL and LTL functions agree in signature
  and stack size. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="check_entrypoints_aux">check_entrypoints_aux</a></span> (<span class="id">rtl</span>: <span class="id"><a href="compcert.backend.RTL.html#function">RTL.function</a></span>) (<span class="id">ltl</span>: <span class="id"><a href="compcert.backend.LTL.html#function">LTL.function</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>) (<span class="id">e1</span>: <span class="id"><a href="compcert.backend.Allocation.html#eqs">eqs</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> :=<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">mv</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#pair_entrypoints">pair_entrypoints</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rtl">rtl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#ltl">ltl</a></span>;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e2</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#track_moves">track_moves</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id"><a href="compcert.backend.Allocation.html#mv">mv</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span>;<br/>
&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#compat_entry">compat_entry</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_params">RTL.fn_params</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rtl">rtl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Conventions.html#loc_parameters">loc_parameters</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_sig">RTL.fn_sig</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rtl">rtl</a></span>)) <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.backend.Allocation.html#can_undef">can_undef</a></span> <span class="id"><a href="compcert.x86.Machregs.html#destroyed_at_function_entry">destroyed_at_function_entry</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e2">e2</a></span>);<br/>
&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_stacksize">RTL.fn_stacksize</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rtl">rtl</a></span>) (<span class="id"><a href="compcert.backend.LTL.html#fn_stacksize">LTL.fn_stacksize</a></span> <span class="id"><a href="compcert.backend.Allocation.html#ltl">ltl</a></span>));<br/>
&nbsp;&nbsp;<span class="id">assertion</span> (<span class="id"><a href="compcert.common.AST.html#signature_eq">signature_eq</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_sig">RTL.fn_sig</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rtl">rtl</a></span>) (<span class="id"><a href="compcert.backend.LTL.html#fn_sig">LTL.fn_sig</a></span> <span class="id"><a href="compcert.backend.Allocation.html#ltl">ltl</a></span>));<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="id">Close</span> <span class="kwd">Scope</span> <span class="id">option_monad_scope</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="check_entrypoints">check_entrypoints</a></span> (<span class="id">rtl</span>: <span class="id"><a href="compcert.backend.RTL.html#function">RTL.function</a></span>) (<span class="id">ltl</span>: <span class="id"><a href="compcert.backend.LTL.html#function">LTL.function</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>) (<span class="id">bsh</span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.backend.Allocation.html#block_shape">block_shape</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">a</span>: <span class="id"><a href="compcert.lib.Maps.html#PMap.t">PMap.t</a></span> <span class="id"><a href="compcert.backend.Allocation.html#t">LEq.t</a></span>): <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> :=<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">e1</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#transfer">transfer</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rtl">rtl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id"><a href="compcert.backend.Allocation.html#bsh">bsh</a></span> (<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">RTL.fn_entrypoint</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rtl">rtl</a></span>) <span class="id"><a href="compcert.backend.Allocation.html#a">a</a></span>!!(<span class="id"><a href="compcert.backend.RTL.html#fn_entrypoint">RTL.fn_entrypoint</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rtl">rtl</a></span>);<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#check_entrypoints_aux">check_entrypoints_aux</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rtl">rtl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#ltl">ltl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id"><a href="compcert.backend.Allocation.html#e1">e1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">invalid</span> <span class="id">register</span> <span class="id">allocation</span> <span class="tactic">at</span> <span class="id">entry</span> <span class="id">point</span>")<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Putting it all together, this is the validation function for
  a source RTL function and an LTL function generated by the external
  register allocator. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="check_function">check_function</a></span> (<span class="id">rtl</span>: <span class="id"><a href="compcert.backend.RTL.html#function">RTL.function</a></span>) (<span class="id">ltl</span>: <span class="id"><a href="compcert.backend.LTL.html#function">LTL.function</a></span>) (<span class="id">env</span>: <span class="id"><a href="compcert.backend.RTLtyping.html#regenv">regenv</a></span>): <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">bsh</span> := <span class="id"><a href="compcert.backend.Allocation.html#pair_codes">pair_codes</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rtl">rtl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#ltl">ltl</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#analyze">analyze</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rtl">rtl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id"><a href="compcert.backend.Allocation.html#bsh">bsh</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">allocation</span> <span class="id">analysis</span> <span class="id">diverges</span>")<br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">a</span> =&gt; <span class="id"><a href="compcert.backend.Allocation.html#check_entrypoints">check_entrypoints</a></span> <span class="id"><a href="compcert.backend.Allocation.html#rtl">rtl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#ltl">ltl</a></span> <span class="id"><a href="compcert.backend.Allocation.html#env">env</a></span> <span class="id"><a href="compcert.backend.Allocation.html#bsh">bsh</a></span> <span class="id">a</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">regalloc</span></span> is the external register allocator.  It is written in OCaml
  in file <span class="bracket"><span class="id">backend</span>/<span class="id">Regalloc.ml</span></span>. </div>
<br/>
<span class="kwd">Parameter</span> <span class="id"><a name="regalloc">regalloc</a></span>: <span class="id"><a href="compcert.backend.RTL.html#function">RTL.function</a></span> -&gt; <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.backend.LTL.html#function">LTL.function</a></span>.<br/>
<br/>
<div class="doc">Register allocation followed by validation. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transf_function">transf_function</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.backend.RTL.html#function">RTL.function</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.backend.LTL.html#function">LTL.function</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.RTLtyping.html#type_function">type_function</a></span> <span class="id"><a href="compcert.backend.Allocation.html#f">f</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">m</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">env</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Allocation.html#regalloc">regalloc</a></span> <span class="id"><a href="compcert.backend.Allocation.html#f">f</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> <span class="id">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">tf</span> =&gt; <span class="tactic">do</span> <span class="id">x</span> &lt;- <span class="id"><a href="compcert.backend.Allocation.html#check_function">check_function</a></span> <span class="id"><a href="compcert.backend.Allocation.html#f">f</a></span> <span class="id">tf</span> <span class="id">env</span>; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">tf</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transf_fundef">transf_fundef</a></span> (<span class="id">fd</span>: <span class="id"><a href="compcert.backend.RTL.html#fundef">RTL.fundef</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.backend.LTL.html#fundef">LTL.fundef</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#transf_partial_fundef">AST.transf_partial_fundef</a></span> <span class="id"><a href="compcert.backend.Allocation.html#transf_function">transf_function</a></span> <span class="id"><a href="compcert.backend.Allocation.html#fd">fd</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="transf_program">transf_program</a></span> (<span class="id">p</span>: <span class="id"><a href="compcert.backend.RTL.html#program">RTL.program</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.backend.LTL.html#program">LTL.program</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#transform_partial_program">transform_partial_program</a></span> <span class="id"><a href="compcert.backend.Allocation.html#transf_fundef">transf_fundef</a></span> <span class="id"><a href="compcert.backend.Allocation.html#p">p</a></span>.<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
