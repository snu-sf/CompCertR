
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Events</title>
<meta name="description" content="Documentation of Coq module Events" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Events</h1>
<div class="coq">
<br/>
<div class="doc">Observable events, execution traces, and semantics of external calls. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.lib.Intv.html">Intv</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.sflib.html">sflib</a></span>.<br/>
<br/>
<h1> Events and traces </h1>
<br/>
<div class="doc">The observable behaviour of programs is stated in terms of
  input/output events, which represent the actions of the program
  that the external world can observe.  CompCert leaves much flexibility as to
  the exact content of events: the only requirement is that they
  do not expose memory states nor pointer values
  (other than pointers to global variables), because these
  are not preserved literally during compilation.  For concreteness,
  we use the following type for events.  Each event represents either:
<ul>
<li>
 A system call (e.g. an input/output operation), recording the
  name of the system call, its parameters, and its result.
</li>
</ul>
<ul>
<li>
 A volatile load from a global memory location, recording the chunk
  and address being read and the value just read.
</li>
</ul>
<ul>
<li>
 A volatile store to a global memory location, recording the chunk
  and address being written and the value stored there.
</li>
</ul>
<ul>
<li>
 An annotation, recording the text of the annotation and the values
  of the arguments.
</li>
</ul>
  The values attached to these events are of the following form.
  As mentioned above, we do not expose pointer values directly.
  Pointers relative to a global variable are shown with the name
  of the variable instead of the block identifier.
</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="eventval">eventval</a></span>: <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="EVint">EVint</a></span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="EVlong">EVlong</a></span>: <span class="id"><a href="compcert.lib.Integers.html#int64">int64</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="EVfloat">EVfloat</a></span>: <span class="id"><a href="compcert.lib.Floats.html#float">float</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="EVsingle">EVsingle</a></span>: <span class="id"><a href="compcert.lib.Floats.html#float32">float32</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="EVptr_global">EVptr_global</a></span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#ptrofs">ptrofs</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="event">event</a></span>: <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="Event_syscall">Event_syscall</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#event">event</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="Event_vload">Event_vload</a></span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span> -&gt; <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#ptrofs">ptrofs</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#event">event</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="Event_vstore">Event_vstore</a></span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span> -&gt; <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#ptrofs">ptrofs</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#event">event</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="Event_annot">Event_annot</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#event">event</a></span>.<br/>
<br/>
<div class="doc">The dynamic semantics for programs collect traces of events.
  Traces are of two kinds: finite (type <span class="bracket"><span class="id">trace</span></span>) or infinite (type <span class="bracket"><span class="id">traceinf</span></span>). </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="trace">trace</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Events.html#event">event</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="E0">E0</a></span> : <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Eapp">Eapp</a></span> (<span class="id">t1</span> <span class="id">t2</span>: <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span>) : <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> := <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> ++ <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span>.<br/>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="traceinf">traceinf</a></span> : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="Econsinf">Econsinf</a></span>: <span class="id"><a href="compcert.common.Events.html#event">event</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Eappinf">Eappinf</a></span> (<span class="id">t</span>: <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span>) (<span class="id">T</span>: <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span>) {<span class="kwd">struct</span> <span class="id">t</span>} : <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="compcert.common.Events.html#T">T</a></span><br/>
&nbsp;&nbsp;| <span class="id">ev</span> :: <span class="id">t</span>' =&gt; <span class="id"><a href="compcert.common.Events.html#Econsinf">Econsinf</a></span> <span class="id">ev</span> (<span class="id"><a href="compcert.common.Events.html#Eappinf">Eappinf</a></span> <span class="id">t</span>' <span class="id"><a href="compcert.common.Events.html#T">T</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Concatenation of traces is written <span class="bracket">**</span> in the finite case
  or <span class="bracket">***</span> in the infinite case. </div>
<br/>
<span class="kwd">Infix</span> "**" := <span class="id"><a href="compcert.common.Events.html#Eapp">Eapp</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<span class="kwd">Infix</span> "***" := <span class="id"><a href="compcert.common.Events.html#Eappinf">Eappinf</a></span> (<span class="tactic">at</span> <span class="id">level</span> 60, <span class="id">right</span> <span class="id">associativity</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="E0_left">E0_left</a></span>: <span class="kwd">forall</span> <span class="id">t</span>, <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> ** <span class="id"><a href="compcert.common.Events.html#t">t</a></span> = <span class="id"><a href="compcert.common.Events.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1269')">Proof.</div>
<div class="proofscript" id="proof1269">
 <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="E0_right">E0_right</a></span>: <span class="kwd">forall</span> <span class="id">t</span>, <span class="id"><a href="compcert.common.Events.html#t">t</a></span> ** <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> = <span class="id"><a href="compcert.common.Events.html#t">t</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1270')">Proof.</div>
<div class="proofscript" id="proof1270">
 <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>, <span class="id"><a href="compcert.common.Events.html#Eapp">Eapp</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_end">app_nil_end</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Eapp_assoc">Eapp_assoc</a></span>: <span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">t3</span>, (<span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span>) ** <span class="id"><a href="compcert.common.Events.html#t3">t3</a></span> = <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> ** (<span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> ** <span class="id"><a href="compcert.common.Events.html#t3">t3</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1271')">Proof.</div>
<div class="proofscript" id="proof1271">
 <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#Eapp">Eapp</a></span>, <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Eapp_E0_inv">Eapp_E0_inv</a></span>: <span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>, <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> /\ <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>.<br/>
<span class="kwd">Proof</span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_eq_nil">app_eq_nil</a></span> <span class="id"><a href="compcert.common.Events.html#event">event</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="E0_left_inf">E0_left_inf</a></span>: <span class="kwd">forall</span> <span class="id">T</span>, <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> *** <span class="id"><a href="compcert.common.Events.html#T">T</a></span> = <span class="id"><a href="compcert.common.Events.html#T">T</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1272')">Proof.</div>
<div class="proofscript" id="proof1272">
 <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Eappinf_assoc">Eappinf_assoc</a></span>: <span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">T</span>, (<span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span>) *** <span class="id"><a href="compcert.common.Events.html#T">T</a></span> = <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> *** (<span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> *** <span class="id"><a href="compcert.common.Events.html#T">T</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1273')">Proof.</div>
<div class="proofscript" id="proof1273">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">t1</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>. <span class="tactic">auto</span>. <span class="id">decEq</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Rewrite</span> <span class="id"><a href="compcert.common.Events.html#E0_left">E0_left</a></span> <span class="id"><a href="compcert.common.Events.html#E0_right">E0_right</a></span> <span class="id"><a href="compcert.common.Events.html#Eapp_assoc">Eapp_assoc</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#E0_left_inf">E0_left_inf</a></span> <span class="id"><a href="compcert.common.Events.html#Eappinf_assoc">Eappinf_assoc</a></span>: <span class="id">trace_rewrite</span>.<br/>
<br/>
<span class="id">Opaque</span> <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Events.html#Eapp">Eapp</a></span> <span class="id"><a href="compcert.common.Events.html#Eappinf">Eappinf</a></span>.<br/>
<br/>
<div class="doc">The following <span class="bracket"><span class="id">traceEq</span></span> tactic proves equalities between traces
  or infinite traces. </div>
<br/>
<span class="kwd">Ltac</span> <span class="id">substTraceHyp</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [ <span class="id">H</span>: (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> ?<span class="id">x</span> ?<span class="id">y</span>) |- <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">x</span> || <span class="tactic">clear</span> <span class="id">H</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">decomposeTraceEq</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [ |- (<span class="id">_</span> ** <span class="id">_</span>) = (<span class="id">_</span> ** <span class="id">_</span>) ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#f_equal2">f_equal2</a></span> <span class="id"><a href="compcert.common.Events.html#Eapp">Eapp</a></span>); <span class="tactic">auto</span>; <span class="id">decomposeTraceEq</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">traceEq</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="id">substTraceHyp</span>; <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">trace_rewrite</span>; <span class="id">decomposeTraceEq</span>.<br/>
<br/>
<div class="doc">Bisimilarity between infinite traces. </div>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="traceinf_sim">traceinf_sim</a></span>: <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="traceinf_sim_cons">traceinf_sim_cons</a></span>: <span class="kwd">forall</span> <span class="id">e</span> <span class="id">T1</span> <span class="id">T2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#traceinf_sim">traceinf_sim</a></span> <span class="id"><a href="compcert.common.Events.html#T1">T1</a></span> <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#traceinf_sim">traceinf_sim</a></span> (<span class="id"><a href="compcert.common.Events.html#Econsinf">Econsinf</a></span> <span class="id"><a href="compcert.common.Events.html#e">e</a></span> <span class="id"><a href="compcert.common.Events.html#T1">T1</a></span>) (<span class="id"><a href="compcert.common.Events.html#Econsinf">Econsinf</a></span> <span class="id"><a href="compcert.common.Events.html#e">e</a></span> <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="traceinf_sim_refl">traceinf_sim_refl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span>, <span class="id"><a href="compcert.common.Events.html#traceinf_sim">traceinf_sim</a></span> <span class="id"><a href="compcert.common.Events.html#T">T</a></span> <span class="id"><a href="compcert.common.Events.html#T">T</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1274')">Proof.</div>
<div class="proofscript" id="proof1274">
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COINDHYP</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">T</span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id">COINDHYP</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="traceinf_sim_sym">traceinf_sim_sym</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T1</span> <span class="id">T2</span>, <span class="id"><a href="compcert.common.Events.html#traceinf_sim">traceinf_sim</a></span> <span class="id"><a href="compcert.common.Events.html#T1">T1</a></span> <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#traceinf_sim">traceinf_sim</a></span> <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span> <span class="id"><a href="compcert.common.Events.html#T1">T1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1275')">Proof.</div>
<div class="proofscript" id="proof1275">
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COINDHYP</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="traceinf_sim_trans">traceinf_sim_trans</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T1</span> <span class="id">T2</span> <span class="id">T3</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#traceinf_sim">traceinf_sim</a></span> <span class="id"><a href="compcert.common.Events.html#T1">T1</a></span> <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#traceinf_sim">traceinf_sim</a></span> <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span> <span class="id"><a href="compcert.common.Events.html#T3">T3</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#traceinf_sim">traceinf_sim</a></span> <span class="id"><a href="compcert.common.Events.html#T1">T1</a></span> <span class="id"><a href="compcert.common.Events.html#T3">T3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1276')">Proof.</div>
<div class="proofscript" id="proof1276">
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COINDHYP</span>;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">CoInductive</span> <span class="id">traceinf_sim</span>': <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id">traceinf_sim</span>'<span class="id">_cons</span>: <span class="kwd">forall</span> <span class="id">t</span> <span class="id">T1</span> <span class="id">T2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#t">t</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> -&gt; <span class="id">traceinf_sim</span>' <span class="id"><a href="compcert.common.Events.html#T1">T1</a></span> <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span> -&gt; <span class="id">traceinf_sim</span>' (<span class="id"><a href="compcert.common.Events.html#t">t</a></span> *** <span class="id"><a href="compcert.common.Events.html#T1">T1</a></span>) (<span class="id"><a href="compcert.common.Events.html#t">t</a></span> *** <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">traceinf_sim</span>'<span class="id">_sim</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T1</span> <span class="id">T2</span>, <span class="id">traceinf_sim</span>' <span class="id"><a href="compcert.common.Events.html#T1">T1</a></span> <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#traceinf_sim">traceinf_sim</a></span> <span class="id"><a href="compcert.common.Events.html#T1">T1</a></span> <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1277')">Proof.</div>
<div class="proofscript" id="proof1277">
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COINDHYP</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>. <span class="tactic">elim</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
<span class="id">Transparent</span> <span class="id"><a href="compcert.common.Events.html#Eappinf">Eappinf</a></span>.<br/>
<span class="id">Transparent</span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>. <span class="tactic">simpl</span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id">COINDHYP</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id">COINDHYP</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>; <span class="tactic">congruence</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">An alternate presentation of infinite traces as
  infinite concatenations of nonempty finite traces. </div>
<br/>
<span class="kwd">CoInductive</span> <span class="id">traceinf</span>': <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id">Econsinf</span>': <span class="kwd">forall</span> (<span class="id">t</span>: <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span>) (<span class="id">T</span>: <span class="id">traceinf</span>'), <span class="id"><a href="compcert.common.Events.html#t">t</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> -&gt; <span class="id">traceinf</span>'.<br/>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id">split_traceinf</span>' (<span class="id">t</span>: <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span>) (<span class="id">T</span>: <span class="id">traceinf</span>') (<span class="id">NE</span>: <span class="id"><a href="compcert.common.Events.html#t">t</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>): <span class="id"><a href="compcert.common.Events.html#event">event</a></span> * <span class="id">traceinf</span>' :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id">_</span><br/>
&nbsp;&nbsp;| <span class="id">e</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; (<span class="id">e</span>, <span class="id"><a href="compcert.common.Events.html#T">T</a></span>)<br/>
&nbsp;&nbsp;| <span class="id">e</span> :: <span class="id">t</span>' =&gt; (<span class="id">e</span>, <span class="id">Econsinf</span>' <span class="id">t</span>' <span class="id"><a href="compcert.common.Events.html#T">T</a></span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1278')">Next Obligation.</div>
<div class="proofscript" id="proof1278">
&nbsp;&nbsp;<span class="tactic">elimtype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>. <span class="tactic">elim</span> <span class="id">NE</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1279')">Next Obligation.</div>
<div class="proofscript" id="proof1279">
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intro</span>. <span class="tactic">elim</span> (<span class="id">H</span> <span class="id">e</span>). <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">CoFixpoint</span> <span class="id">traceinf_of_traceinf</span>' (<span class="id">T</span>': <span class="id">traceinf</span>') : <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">T</span>' <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">Econsinf</span>' <span class="id">t</span> <span class="id">T</span>'' <span class="id">NOTEMPTY</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> (<span class="id">e</span>, <span class="id">tl</span>) := <span class="id">split_traceinf</span>' <span class="id">t</span> <span class="id">T</span>'' <span class="id">NOTEMPTY</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#Econsinf">Econsinf</a></span> <span class="id"><a href="compcert.common.Events.html#e">e</a></span> (<span class="id">traceinf_of_traceinf</span>' <span class="id"><a href="compcert.common.Events.html#tl">tl</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id">unroll_traceinf</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span>, <span class="id"><a href="compcert.common.Events.html#T">T</a></span> = <span class="kwd">match</span> <span class="id"><a href="compcert.common.Events.html#T">T</a></span> <span class="kwd">with</span> <span class="id">Econsinf</span>' <span class="id">t</span> <span class="id">T</span>' <span class="id">NE</span> =&gt; <span class="id">Econsinf</span>' <span class="id">t</span> <span class="id">T</span>' <span class="id">NE</span> <span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1280')">Proof.</div>
<div class="proofscript" id="proof1280">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">T</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="unroll_traceinf">unroll_traceinf</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span>, <span class="id"><a href="compcert.common.Events.html#T">T</a></span> = <span class="kwd">match</span> <span class="id"><a href="compcert.common.Events.html#T">T</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Events.html#Econsinf">Econsinf</a></span> <span class="id">t</span> <span class="id">T</span>' =&gt; <span class="id"><a href="compcert.common.Events.html#Econsinf">Econsinf</a></span> <span class="id">t</span> <span class="id">T</span>' <span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1281')">Proof.</div>
<div class="proofscript" id="proof1281">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">T</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">traceinf_traceinf</span>'<span class="id">_app</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">T</span> <span class="id">NE</span>,<br/>
&nbsp;&nbsp;<span class="id">traceinf_of_traceinf</span>' (<span class="id">Econsinf</span>' <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#T">T</a></span> <span class="id"><a href="compcert.common.Events.html#NE">NE</a></span>) = <span class="id"><a href="compcert.common.Events.html#t">t</a></span> *** <span class="id">traceinf_of_traceinf</span>' <span class="id"><a href="compcert.common.Events.html#T">T</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1282')">Proof.</div>
<div class="proofscript" id="proof1282">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">NE</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Events.html#unroll_traceinf">unroll_traceinf</a></span> (<span class="id">traceinf_of_traceinf</span>' (<span class="id">Econsinf</span>' (<span class="id">a</span> :: <span class="id">t</span>) <span class="id">T</span> <span class="id">NE</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">t</span>. <span class="tactic">auto</span>.<br/>
<span class="id">Transparent</span> <span class="id"><a href="compcert.common.Events.html#Eappinf">Eappinf</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id">IHt</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Prefixes of traces. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="trace_prefix">trace_prefix</a></span> (<span class="id">t1</span> <span class="id">t2</span>: <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t3</span>, <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> = <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Events.html#t3">t3</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="traceinf_prefix">traceinf_prefix</a></span> (<span class="id">t1</span>: <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span>) (<span class="id">T2</span>: <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">T3</span>, <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span> = <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> *** <span class="id"><a href="compcert.common.Events.html#T3">T3</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="trace_prefix_app">trace_prefix_app</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#trace_prefix">trace_prefix</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#trace_prefix">trace_prefix</a></span> (<span class="id"><a href="compcert.common.Events.html#t">t</a></span> ** <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span>) (<span class="id"><a href="compcert.common.Events.html#t">t</a></span> ** <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1283')">Proof.</div>
<div class="proofscript" id="proof1283">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">t3</span> <span class="id">EQ</span>]. <span class="id">exists</span> <span class="id">t3</span>. <span class="id">traceEq</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="traceinf_prefix_app">traceinf_prefix_app</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">T2</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#traceinf_prefix">traceinf_prefix</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#traceinf_prefix">traceinf_prefix</a></span> (<span class="id"><a href="compcert.common.Events.html#t">t</a></span> ** <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span>) (<span class="id"><a href="compcert.common.Events.html#t">t</a></span> *** <span class="id"><a href="compcert.common.Events.html#T2">T2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1284')">Proof.</div>
<div class="proofscript" id="proof1284">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">T3</span> <span class="id">EQ</span>]. <span class="id">exists</span> <span class="id">T3</span>. <span class="tactic">subst</span> <span class="id">T2</span>. <span class="id">traceEq</span>.<br/>
Qed.</div>
<br/>
<h1> Relating values and event values </h1>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="id">Arguments</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="EVENTVAL">EVENTVAL</a></span>.<br/>
<br/>
<div class="doc">Symbol environment used to translate between global variable names and their block identifiers. </div>
<span class="kwd">Variable</span> <span class="id"><a name="EVENTVAL.ge">ge</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>.<br/>
<br/>
<div class="doc">Translation between values and event values. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="eventval_match">eventval_match</a></span>: <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span> -&gt; <span class="id"><a href="compcert.common.AST.html#typ">typ</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="ev_match_int">ev_match_int</a></span>: <span class="kwd">forall</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> (<span class="id"><a href="compcert.common.Events.html#EVint">EVint</a></span> <span class="id"><a href="compcert.common.Events.html#i">i</a></span>) <span class="id"><a href="compcert.common.AST.html#Tint">Tint</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Events.html#i">i</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="ev_match_long">ev_match_long</a></span>: <span class="kwd">forall</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> (<span class="id"><a href="compcert.common.Events.html#EVlong">EVlong</a></span> <span class="id"><a href="compcert.common.Events.html#i">i</a></span>) <span class="id"><a href="compcert.common.AST.html#Tlong">Tlong</a></span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.common.Events.html#i">i</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="ev_match_float">ev_match_float</a></span>: <span class="kwd">forall</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> (<span class="id"><a href="compcert.common.Events.html#EVfloat">EVfloat</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span>) <span class="id"><a href="compcert.common.AST.html#Tfloat">Tfloat</a></span> (<span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="ev_match_single">ev_match_single</a></span>: <span class="kwd">forall</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> (<span class="id"><a href="compcert.common.Events.html#EVsingle">EVsingle</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span>) <span class="id"><a href="compcert.common.AST.html#Tsingle">Tsingle</a></span> (<span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="ev_match_ptr">ev_match_ptr</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL.ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL.ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> (<span class="id"><a href="compcert.common.Events.html#EVptr_global">EVptr_global</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>) <span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="eventval_list_match">eventval_list_match</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#typ">typ</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="evl_match_nil">evl_match_nil</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="evl_match_cons">evl_match_cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ev1</span> <span class="id">evl</span> <span class="id">ty1</span> <span class="id">tyl</span> <span class="id">v1</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev1">ev1</a></span> <span class="id"><a href="compcert.common.Events.html#ty1">ty1</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> <span class="id"><a href="compcert.common.Events.html#evl">evl</a></span> <span class="id"><a href="compcert.common.Events.html#tyl">tyl</a></span> <span class="id"><a href="compcert.common.Events.html#vl">vl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> (<span class="id"><a href="compcert.common.Events.html#ev1">ev1</a></span>::<span class="id"><a href="compcert.common.Events.html#evl">evl</a></span>) (<span class="id"><a href="compcert.common.Events.html#ty1">ty1</a></span>::<span class="id"><a href="compcert.common.Events.html#tyl">tyl</a></span>) (<span class="id"><a href="compcert.common.Events.html#v1">v1</a></span>::<span class="id"><a href="compcert.common.Events.html#vl">vl</a></span>).<br/>
<br/>
<div class="doc">Some properties of these translation predicates. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_match_type">eventval_match_type</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ev</span> <span class="id">ty</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#Val.has_type">Val.has_type</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1285')">Proof.</div>
<div class="proofscript" id="proof1285">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_list_match_length">eventval_list_match_length</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">evl</span> <span class="id">tyl</span> <span class="id">vl</span>, <span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> <span class="id"><a href="compcert.common.Events.html#evl">evl</a></span> <span class="id"><a href="compcert.common.Events.html#tyl">tyl</a></span> <span class="id"><a href="compcert.common.Events.html#vl">vl</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">List.length</a></span> <span class="id"><a href="compcert.common.Events.html#vl">vl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">List.length</a></span> <span class="id"><a href="compcert.common.Events.html#tyl">tyl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1286')">Proof.</div>
<div class="proofscript" id="proof1286">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_match_lessdef">eventval_match_lessdef</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ev</span> <span class="id">ty</span> <span class="id">v1</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1287')">Proof.</div>
<div class="proofscript" id="proof1287">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_list_match_lessdef">eventval_list_match_lessdef</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">evl</span> <span class="id">tyl</span> <span class="id">vl1</span>, <span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> <span class="id"><a href="compcert.common.Events.html#evl">evl</a></span> <span class="id"><a href="compcert.common.Events.html#tyl">tyl</a></span> <span class="id"><a href="compcert.common.Events.html#vl1">vl1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl2</span>, <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.common.Events.html#vl1">vl1</a></span> <span class="id"><a href="compcert.common.Events.html#vl2">vl2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> <span class="id"><a href="compcert.common.Events.html#evl">evl</a></span> <span class="id"><a href="compcert.common.Events.html#tyl">tyl</a></span> <span class="id"><a href="compcert.common.Events.html#vl2">vl2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1288')">Proof.</div>
<div class="proofscript" id="proof1288">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">constructor</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_lessdef">eventval_match_lessdef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Determinism </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_match_determ_1">eventval_match_determ_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ev</span> <span class="id">ty</span> <span class="id">v1</span> <span class="id">v2</span>, <span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> = <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1289')">Proof.</div>
<div class="proofscript" id="proof1289">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_match_determ_2">eventval_match_determ_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ev1</span> <span class="id">ev2</span> <span class="id">ty</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev1">ev1</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev2">ev2</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#ev1">ev1</a></span> = <span class="id"><a href="compcert.common.Events.html#ev2">ev2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1290')">Proof.</div>
<div class="proofscript" id="proof1290">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">decEq</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol_injective">Senv.find_symbol_injective</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_list_match_determ_2">eventval_list_match_determ_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">evl1</span> <span class="id">tyl</span> <span class="id">vl</span>, <span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> <span class="id"><a href="compcert.common.Events.html#evl1">evl1</a></span> <span class="id"><a href="compcert.common.Events.html#tyl">tyl</a></span> <span class="id"><a href="compcert.common.Events.html#vl">vl</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">evl2</span>, <span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> <span class="id"><a href="compcert.common.Events.html#evl2">evl2</a></span> <span class="id"><a href="compcert.common.Events.html#tyl">tyl</a></span> <span class="id"><a href="compcert.common.Events.html#vl">vl</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#evl1">evl1</a></span> = <span class="id"><a href="compcert.common.Events.html#evl2">evl2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1291')">Proof.</div>
<div class="proofscript" id="proof1291">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">f_equal</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_determ_2">eventval_match_determ_2</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Validity </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="eventval_valid">eventval_valid</a></span> (<span class="id">ev</span>: <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#EVint">EVint</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#EVlong">EVlong</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#EVfloat">EVfloat</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#EVsingle">EVsingle</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#EVptr_global">EVptr_global</a></span> <span class="id">id</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL.ge">ge</a></span> <span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="eventval_type">eventval_type</a></span> (<span class="id">ev</span>: <span class="id"><a href="compcert.common.Events.html#eventval">eventval</a></span>) : <span class="id"><a href="compcert.common.AST.html#typ">typ</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#EVint">EVint</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.AST.html#Tint">Tint</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#EVlong">EVlong</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.AST.html#Tlong">Tlong</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#EVfloat">EVfloat</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.AST.html#Tfloat">Tfloat</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#EVsingle">EVsingle</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.AST.html#Tsingle">Tsingle</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#EVptr_global">EVptr_global</a></span> <span class="id">id</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_match_receptive">eventval_match_receptive</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ev1</span> <span class="id">ty</span> <span class="id">v1</span> <span class="id">ev2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev1">ev1</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_valid">eventval_valid</a></span> <span class="id"><a href="compcert.common.Events.html#ev1">ev1</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_valid">eventval_valid</a></span> <span class="id"><a href="compcert.common.Events.html#ev2">ev2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_type">eventval_type</a></span> <span class="id"><a href="compcert.common.Events.html#ev1">ev1</a></span> = <span class="id"><a href="compcert.common.Events.html#eventval_type">eventval_type</a></span> <span class="id"><a href="compcert.common.Events.html#ev2">ev2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>, <span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev2">ev2</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1292')">Proof.</div>
<div class="proofscript" id="proof1292">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#eventval_type">eventval_type</a></span>, <span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">remember</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="kwd">as</span> <span class="id">ptr64</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span> <span class="id">ev1</span> <span class="id">ty</span> <span class="id">v1</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">ev2</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">inv</span> <span class="id">H2</span>.<br/>
- <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i0</span>); <span class="id">constructor</span>.<br/>
- <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol_exists">Senv.public_symbol_exists</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span> <span class="id">FS</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">i1</span>); <span class="tactic">rewrite</span> <span class="id">H3</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">i0</span>); <span class="id">constructor</span>.<br/>
- <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol_exists">Senv.public_symbol_exists</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span> <span class="id">FS</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">i1</span>); <span class="tactic">rewrite</span> <span class="id">H3</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f0</span>); <span class="id">constructor</span>.<br/>
- <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">discriminate</span>.<br/>
- <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f0</span>); <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">discriminate</span>.<br/>
- <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>); <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span>; <span class="tactic">rewrite</span> <span class="id">H5</span>; <span class="id">constructor</span>.<br/>
- <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">i</span>); <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span>; <span class="tactic">rewrite</span> <span class="id">H5</span>; <span class="id">constructor</span>.<br/>
- <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">discriminate</span>.<br/>
- <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">discriminate</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol_exists">Senv.public_symbol_exists</a></span>. <span class="id">eexact</span> <span class="id">H1</span>. <span class="tactic">intros</span> [<span class="id">b</span>' <span class="id">FS</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">i0</span>); <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_match_valid">eventval_match_valid</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ev</span> <span class="id">ty</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_valid">eventval_valid</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1293')">Proof.</div>
<div class="proofscript" id="proof1293">
&nbsp;&nbsp;<span class="tactic">destruct</span> 1; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_match_same_type">eventval_match_same_type</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ev1</span> <span class="id">ty</span> <span class="id">v1</span> <span class="id">ev2</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev1">ev1</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ev2">ev2</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_type">eventval_type</a></span> <span class="id"><a href="compcert.common.Events.html#ev1">ev1</a></span> = <span class="id"><a href="compcert.common.Events.html#eventval_type">eventval_type</a></span> <span class="id"><a href="compcert.common.Events.html#ev2">ev2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1294')">Proof.</div>
<div class="proofscript" id="proof1294">
&nbsp;&nbsp;<span class="tactic">destruct</span> 1; <span class="tactic">intros</span> <span class="id">EV</span>; <span class="id">inv</span> <span class="id">EV</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL">EVENTVAL</a></span>.<br/>
<br/>
<div class="doc">Invariance under changes to the global environment </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="EVENTVAL_INV">EVENTVAL_INV</a></span>.<br/>
<br/>
<span class="kwd">Variables</span> <span class="id"><a name="EVENTVAL_INV.ge1">ge1</a></span> <span class="id"><a name="EVENTVAL_INV.ge2">ge2</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="EVENTVAL_INV.public_preserved">public_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_valid_preserved">eventval_valid_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ev</span>, <span class="id"><a href="compcert.common.Events.html#eventval_valid">eventval_valid</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_valid">eventval_valid</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1295')">Proof.</div>
<div class="proofscript" id="proof1295">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ev</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="EVENTVAL_INV.symbols_preserved">symbols_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_match_preserved">eventval_match_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ev</span> <span class="id">ty</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1296')">Proof.</div>
<div class="proofscript" id="proof1296">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV.public_preserved">public_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV.symbols_preserved">symbols_preserved</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_list_match_preserved">eventval_list_match_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">evl</span> <span class="id">tyl</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#evl">evl</a></span> <span class="id"><a href="compcert.common.Events.html#tyl">tyl</a></span> <span class="id"><a href="compcert.common.Events.html#vl">vl</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#evl">evl</a></span> <span class="id"><a href="compcert.common.Events.html#tyl">tyl</a></span> <span class="id"><a href="compcert.common.Events.html#vl">vl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1297')">Proof.</div>
<div class="proofscript" id="proof1297">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_preserved">eventval_match_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INV">EVENTVAL_INV</a></span>.<br/>
<br/>
<div class="doc">Compatibility with memory injections </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="EVENTVAL_INJECT">EVENTVAL_INJECT</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVENTVAL_INJECT.f">f</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="compcert.common.Values.html#block">block</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a name="EVENTVAL_INJECT.ge2">ge2</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="symbols_inject_weak">symbols_inject_weak</a></span> <span class="id">m</span> : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span>)<br/>
/\ (<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.f">f</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Events.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#delta">delta</a></span> = 0 /\ <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>)<br/>
/\ (<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b2</span>, <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.f">f</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>, 0) /\ <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>)<br/>
/\ (<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.f">f</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Events.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile">Senv.block_is_volatile</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#b2">b2</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile">Senv.block_is_volatile</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile">Senv.block_is_volatile</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> /\ <span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">p</span> <span class="id">k</span>, ~ <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#k">k</a></span> <span class="id"><a href="compcert.common.Events.html#p">p</a></span>)).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="symbols_inject">symbols_inject</a></span> : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span>)<br/>
/\ (<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.f">f</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Events.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#delta">delta</a></span> = 0 /\ <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>)<br/>
/\ (<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b2</span>, <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.f">f</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>, 0) /\ <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>)<br/>
/\ (<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.f">f</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Events.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile">Senv.block_is_volatile</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#b2">b2</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile">Senv.block_is_volatile</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="symbols_inject_weak_imply">symbols_inject_weak_imply</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SYMBINJ</span>: <span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="id"><a href="compcert.common.Events.html#symbols_inject_weak">symbols_inject_weak</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1298')">Proof.</div>
<div class="proofscript" id="proof1298">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">m</span>. <span class="tactic">destruct</span> <span class="id">SYMBINJ</span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#symbols_inject_weak">symbols_inject_weak</a></span>. <span class="id">esplits</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id">D</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVENTVAL_INJECT.m">m</a></span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="EVENTVAL_INJECT.symb_inj">symb_inj</a></span>: <span class="id"><a href="compcert.common.Events.html#symbols_inject_weak">symbols_inject_weak</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.m">m</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_match_inject">eventval_match_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ev</span> <span class="id">ty</span> <span class="id">v1</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.f">f</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1299')">Proof.</div>
<div class="proofscript" id="proof1299">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.symb_inj">symb_inj</a></span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span>). <span class="id">exploit</span> <span class="id">C</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b3</span> [<span class="id">EQ</span> <span class="id">FS</span>]]. <span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">EQ</span>; <span class="id">inv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_match_inject_2">eventval_match_inject_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ev</span> <span class="id">ty</span> <span class="id">v1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>, <span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="id"><a href="compcert.common.Events.html#ty">ty</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.f">f</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1300')">Proof.</div>
<div class="proofscript" id="proof1300">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">try</span> (<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>; <span class="id">constructor</span>; <span class="tactic">fail</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.symb_inj">symb_inj</a></span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span>). <span class="id">exploit</span> <span class="id">C</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b2</span> [<span class="id">EQ</span> <span class="id">FS</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b2</span> <span class="id">ofs</span>); <span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eventval_list_match_inject">eventval_list_match_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">evl</span> <span class="id">tyl</span> <span class="id">vl1</span>, <span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#evl">evl</a></span> <span class="id"><a href="compcert.common.Events.html#tyl">tyl</a></span> <span class="id"><a href="compcert.common.Events.html#vl1">vl1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl2</span>, <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.f">f</a></span> <span class="id"><a href="compcert.common.Events.html#vl1">vl1</a></span> <span class="id"><a href="compcert.common.Events.html#vl2">vl2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#evl">evl</a></span> <span class="id"><a href="compcert.common.Events.html#tyl">tyl</a></span> <span class="id"><a href="compcert.common.Events.html#vl2">vl2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1301')">Proof.</div>
<div class="proofscript" id="proof1301">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">constructor</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_inject">eventval_match_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Events.html#EVENTVAL_INJECT">EVENTVAL_INJECT</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="init_symbols_inject">init_symbols_inject</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">C</span> `{<span class="id"><a href="compcert.common.Linking.html#Linker">Linking.Linker</a></span> <span class="id"><a href="compcert.common.Events.html#C">C</a></span>} <span class="id">F1</span> <span class="id">V1</span> <span class="id">F2</span> <span class="id">V2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="compcert.common.Events.html#F1">F1</a></span> <span class="id"><a href="compcert.common.Events.html#V1">V1</a></span>) (<span class="id">tge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="compcert.common.Events.html#F2">F2</a></span> <span class="id"><a href="compcert.common.Events.html#V2">V2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">match_fundef</span> <span class="id">match_varinfo</span> <span class="id">CTX</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MGE</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="compcert.common.Linking.html#match_globdef">Linking.match_globdef</a></span> <span class="id"><a href="compcert.common.Events.html#match_fundef">match_fundef</a></span> <span class="id"><a href="compcert.common.Events.html#match_varinfo">match_varinfo</a></span> <span class="id"><a href="compcert.common.Events.html#CTX">CTX</a></span>) <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#tge">tge</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span>)) <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1302')">Proof.</div>
<div class="proofscript" id="proof1302">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MGE</span>. <span class="id">rr</span>. <span class="id">s</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.public_symbol">Genv.public_symbol</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.block_is_volatile">Genv.block_is_volatile</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span>.<br/>
&nbsp;&nbsp;<span class="id">splits</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">specialize</span> (<span class="id">mge_symb</span> <span class="id">id</span>). <span class="tactic">rewrite</span> <span class="id">mge_symb</span>. <span class="id">des_ifs</span>. <span class="tactic">rewrite</span> <span class="id">mge_pubs</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">des_ifs</span>. <span class="tactic">split</span>; <span class="id">ss</span>. <span class="id">specialize</span> (<span class="id">mge_symb</span> <span class="id">id</span>). <span class="tactic">rewrite</span> <span class="id">mge_symb</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">des_ifs_safe</span>. <span class="id">des_sumbool</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des_ifs</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">specialize</span> (<span class="id">mge_symb</span> <span class="id">id</span>). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">des_ifs_safe</span>. <span class="id">specialize</span> (<span class="id">mge_defs</span> <span class="id">b2</span>). <span class="id">inv</span> <span class="id">mge_defs</span>; <span class="id">ss</span>. <span class="id">inv</span> <span class="id">H2</span>; <span class="id">ss</span>. <span class="id">inv</span> <span class="id">H3</span>; <span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="symbols_inject_incr">symbols_inject_incr</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j</span> <span class="id">se</span> <span class="id">tse</span> <span class="id">j</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SYMBINJ</span>: <span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span> <span class="id"><a href="compcert.common.Events.html#j">j</a></span> <span class="id"><a href="compcert.common.Events.html#se">se</a></span> <span class="id"><a href="compcert.common.Events.html#tse">tse</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INCR</span>: <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.common.Events.html#j">j</a></span> <span class="id">j</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAME</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.nextblock">Senv.nextblock</a></span> <span class="id"><a href="compcert.common.Events.html#se">se</a></span>) -&gt; <span class="id">j</span>' <span class="id"><a href="compcert.common.Events.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.common.Events.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Events.html#j">j</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.common.Events.html#delta">delta</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SAME</span>': <span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b</span>' (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.nextblock">Senv.nextblock</a></span> <span class="id"><a href="compcert.common.Events.html#tse">tse</a></span>) -&gt; <span class="id">j</span>' <span class="id"><a href="compcert.common.Events.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.common.Events.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Events.html#j">j</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b</span>', <span class="id"><a href="compcert.common.Events.html#delta">delta</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">SYMBINJ</span>: <span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span> <span class="id">j</span>' <span class="id"><a href="compcert.common.Events.html#se">se</a></span> <span class="id"><a href="compcert.common.Events.html#tse">tse</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1303')">Proof.</div>
<div class="proofscript" id="proof1303">
&nbsp;&nbsp;<span class="id">rr</span> <span class="kwd">in</span> <span class="id">SYMBINJ</span>. <span class="id">des</span>. <span class="id">rr</span>. <span class="id">esplits</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;* <span class="id">i</span>. <span class="tactic">eapply</span> <span class="id">SYMBINJ0</span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> &lt;- <span class="id">SAME</span>; <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol_below">Senv.find_symbol_below</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id">i</span>. <span class="id">exploit</span> <span class="id">SYMBINJ1</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;* <span class="id">i</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">Classical_Prop.classic</a></span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b1</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.nextblock">Senv.nextblock</a></span> <span class="id">se</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">erewrite</span> <span class="id">SYMBINJ2</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile">Senv.block_is_volatile</a></span> <span class="id">se</span> <span class="id">b1</span>) <span class="id">eqn</span>:<span class="id">TSRC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile_below">Senv.block_is_volatile_below</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile">Senv.block_is_volatile</a></span> <span class="id">tse</span> <span class="id">b2</span>) <span class="id">eqn</span>:<span class="id">TTGT</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile_below">Senv.block_is_volatile_below</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<h1> Matching traces. </h1>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="MATCH_TRACES">MATCH_TRACES</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="MATCH_TRACES.ge">ge</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>.<br/>
<br/>
<div class="doc">Matching between traces corresponding to single transitions.
  Arguments (provided by the program) must be equal.
  Results (provided by the outside world) can vary as long as they
  can be converted safely to values. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_traces">match_traces</a></span>: <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_traces_E0">match_traces_E0</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_traces_syscall">match_traces_syscall</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">args</span> <span class="id">res1</span> <span class="id">res2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_valid">eventval_valid</a></span> <span class="id"><a href="compcert.common.Events.html#MATCH_TRACES.ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#res1">res1</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_valid">eventval_valid</a></span> <span class="id"><a href="compcert.common.Events.html#MATCH_TRACES.ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#res2">res2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_type">eventval_type</a></span> <span class="id"><a href="compcert.common.Events.html#res1">res1</a></span> = <span class="id"><a href="compcert.common.Events.html#eventval_type">eventval_type</a></span> <span class="id"><a href="compcert.common.Events.html#res2">res2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> (<span class="id"><a href="compcert.common.Events.html#Event_syscall">Event_syscall</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#args">args</a></span> <span class="id"><a href="compcert.common.Events.html#res1">res1</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="compcert.common.Events.html#Event_syscall">Event_syscall</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#args">args</a></span> <span class="id"><a href="compcert.common.Events.html#res2">res2</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_traces_vload">match_traces_vload</a></span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">id</span> <span class="id">ofs</span> <span class="id">res1</span> <span class="id">res2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_valid">eventval_valid</a></span> <span class="id"><a href="compcert.common.Events.html#MATCH_TRACES.ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#res1">res1</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_valid">eventval_valid</a></span> <span class="id"><a href="compcert.common.Events.html#MATCH_TRACES.ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#res2">res2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eventval_type">eventval_type</a></span> <span class="id"><a href="compcert.common.Events.html#res1">res1</a></span> = <span class="id"><a href="compcert.common.Events.html#eventval_type">eventval_type</a></span> <span class="id"><a href="compcert.common.Events.html#res2">res2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> (<span class="id"><a href="compcert.common.Events.html#Event_vload">Event_vload</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#res1">res1</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="compcert.common.Events.html#Event_vload">Event_vload</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#res2">res2</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_traces_vstore">match_traces_vstore</a></span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">id</span> <span class="id">ofs</span> <span class="id">arg</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> (<span class="id"><a href="compcert.common.Events.html#Event_vstore">Event_vstore</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#arg">arg</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="compcert.common.Events.html#Event_vstore">Event_vstore</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#arg">arg</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_traces_annot">match_traces_annot</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">args</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> (<span class="id"><a href="compcert.common.Events.html#Event_annot">Event_annot</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#args">args</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="compcert.common.Events.html#Event_annot">Event_annot</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#args">args</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Events.html#MATCH_TRACES">MATCH_TRACES</a></span>.<br/>
<br/>
<div class="doc">Invariance by change of global environment </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="MATCH_TRACES_INV">MATCH_TRACES_INV</a></span>.<br/>
<br/>
<span class="kwd">Variables</span> <span class="id"><a name="MATCH_TRACES_INV.ge1">ge1</a></span> <span class="id"><a name="MATCH_TRACES_INV.ge2">ge2</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="MATCH_TRACES_INV.public_preserved">public_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#MATCH_TRACES_INV.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#MATCH_TRACES_INV.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_traces_preserved">match_traces_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>, <span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> <span class="id"><a href="compcert.common.Events.html#MATCH_TRACES_INV.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> <span class="id"><a href="compcert.common.Events.html#MATCH_TRACES_INV.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1304')">Proof.</div>
<div class="proofscript" id="proof1304">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_valid_preserved">eventval_valid_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Events.html#MATCH_TRACES_INV">MATCH_TRACES_INV</a></span>.<br/>
<br/>
<div class="doc">An output trace is a trace composed only of output events,
  that is, events that do not take any result from the outside world. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="output_event">output_event</a></span> (<span class="id">ev</span>: <span class="id"><a href="compcert.common.Events.html#event">event</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#Event_syscall">Event_syscall</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#Event_vload">Event_vload</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#Event_vstore">Event_vstore</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Events.html#Event_annot">Event_annot</a></span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="output_trace">output_trace</a></span> (<span class="id">t</span>: <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id">ev</span> :: <span class="id">t</span>' =&gt; <span class="id"><a href="compcert.common.Events.html#output_event">output_event</a></span> <span class="id">ev</span> /\ <span class="id"><a href="compcert.common.Events.html#output_trace">output_trace</a></span> <span class="id">t</span>'<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<h1> Semantics of volatile memory accesses </h1>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="volatile_load">volatile_load</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#ptrofs">ptrofs</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="volatile_load_vol">volatile_load_vol</a></span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">id</span> <span class="id">ev</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile">Senv.block_is_volatile</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> (<span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span>) <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_load">volatile_load</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Events.html#Event_vload">Event_vload</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="volatile_load_nonvol">volatile_load_nonvol</a></span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile">Senv.block_is_volatile</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_load">volatile_load</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="volatile_store">volatile_store</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#ptrofs">ptrofs</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="volatile_store_vol">volatile_store_vol</a></span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">id</span> <span class="id">ev</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile">Senv.block_is_volatile</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol">Senv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> (<span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_store">volatile_store</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Events.html#Event_vstore">Event_vstore</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#ev">ev</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#m">m</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="volatile_store_nonvol">volatile_store_nonvol</a></span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.block_is_volatile">Senv.block_is_volatile</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>) <span class="id"><a href="compcert.common.Events.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_store">volatile_store</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">m</span>'.<br/>
<br/>
<h1> Semantics of external functions </h1>
<br/>
<div class="doc">For each external function, its behavior is defined by a predicate relating:
<ul>
<li>
 the global symbol environment
</li>
<li>
 the values of the arguments passed to this function
</li>
<li>
 the memory state before the call
</li>
<li>
 the result value of the call
</li>
<li>
 the memory state after the call
</li>
<li>
 the trace generated by the call (can be empty).
</li>
</ul>
</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="extcall_sem">extcall_sem</a></span> : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
<div class="doc">We now specify the expected properties of this predicate. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="loc_out_of_bounds">loc_out_of_bounds</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;~<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="loc_not_writable">loc_not_writable</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;~<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="loc_unmapped">loc_unmapped</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="loc_out_of_reach">loc_out_of_reach</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b0</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#b0">b0</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Events.html#b">b</a></span>, <span class="id"><a href="compcert.common.Events.html#delta">delta</a></span>) -&gt; ~<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b0">b0</a></span> (<span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> - <span class="id"><a href="compcert.common.Events.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="inject_separated">inject_separated</a></span> (<span class="id">f</span> <span class="id">f</span>': <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">m1</span> <span class="id">m2</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt; <span class="id">f</span>' <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Events.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;~<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> /\ ~<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="extcall_properties">extcall_properties</a></span> (<span class="id">sem</span>: <span class="id"><a href="compcert.common.Events.html#extcall_sem">extcall_sem</a></span>) (<span class="id">sg</span>: <span class="id"><a href="compcert.common.AST.html#signature">signature</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="mk_extcall_properties">mk_extcall_properties</a></span> {<br/>
<br/>
<div class="doc">The return value of an external call must agree with its signature. </div>
&nbsp;&nbsp;<span class="id"><a name="ec_well_typed">ec_well_typed</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m1</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.has_type">Val.has_type</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> (<span class="id"><a href="compcert.common.AST.html#proj_sig_res">proj_sig_res</a></span> <span class="id"><a href="compcert.common.Events.html#sg">sg</a></span>);<br/>
<br/>
<div class="doc">The semantics is invariant under change of global environment that preserves symbols. </div>
&nbsp;&nbsp;<span class="id"><a name="ec_symbols_preserved">ec_symbols_preserved</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">vargs</span> <span class="id">m1</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span>;<br/>
<br/>
<div class="doc">External calls cannot invalidate memory blocks.  (Remember that
  freeing a block does not invalidate its block identifier.) </div>
&nbsp;&nbsp;<span class="id"><a name="ec_valid_block">ec_valid_block</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m1</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m2</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span>;<br/>
<br/>
<div class="doc">External calls cannot increase the max permissions of a valid block.
    They can decrease the max permissions, e.g. by freeing. </div>
&nbsp;&nbsp;<span class="id"><a name="ec_max_perm">ec_max_perm</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m1</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Events.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Events.html#p">p</a></span>;<br/>
<br/>
<div class="doc">External call cannot modify memory unless they have <span class="bracket"><span class="id">Max</span>, <span class="id">Writable</span></span>
   permissions. </div>
&nbsp;&nbsp;<span class="id"><a name="ec_readonly">ec_readonly</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m1</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_not_writable">loc_not_writable</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span>) <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span>;<br/>
<br/>
<div class="doc">External calls must commute with memory extensions, in the
  following sense. </div>
&nbsp;&nbsp;<span class="id"><a name="ec_mem_extends">ec_mem_extends</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m1</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m2</span> <span class="id">m1</span>' <span class="id">vargs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id">vargs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">vres</span>', <span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id">vargs</span>' <span class="id">m1</span>' <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id">vres</span>' <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id">vres</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_out_of_bounds">loc_out_of_bounds</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span>) <span class="id">m1</span>' <span class="id">m2</span>';<br/>
<br/>
<div class="doc">External calls must commute with memory injections,
  in the following sense. </div>
&nbsp;&nbsp;<span class="id"><a name="ec_mem_inject_weak">ec_mem_inject_weak</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">vargs</span> <span class="id">m1</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m2</span> <span class="id">f</span> <span class="id">m1</span>' <span class="id">vargs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#symbols_inject_weak">symbols_inject_weak</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id">vargs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>', <span class="id">exists</span> <span class="id">vres</span>', <span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> <span class="id">vargs</span>' <span class="id">m1</span>' <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id">vres</span>' <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id">vres</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span>) <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span>) <span class="id">m1</span>' <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id">f</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id">m1</span>';<br/>
<br/>
<div class="doc">External calls produce at most one event. </div>
&nbsp;&nbsp;<span class="id"><a name="ec_trace_length">ec_trace_length</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id">m</span>' -&gt; (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> &lt;= 1)%<span class="id">nat</span>;<br/>
<br/>
<div class="doc">External calls must be receptive to changes of traces by another, matching trace. </div>
&nbsp;&nbsp;<span class="id"><a name="ec_receptive">ec_receptive</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m</span> <span class="id">t1</span> <span class="id">vres1</span> <span class="id">m1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#vres1">vres1</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">vres2</span>, <span class="id">exists</span> <span class="id">m2</span>, <span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Events.html#vres2">vres2</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span>;<br/>
<br/>
<div class="doc">External calls must be deterministic up to matching between traces. </div>
&nbsp;&nbsp;<span class="id"><a name="ec_determ">ec_determ</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m</span> <span class="id">t1</span> <span class="id">vres1</span> <span class="id">m1</span> <span class="id">t2</span> <span class="id">vres2</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#vres1">vres1</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Events.html#vres2">vres2</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> /\ (<span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> = <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#vres1">vres1</a></span> = <span class="id"><a href="compcert.common.Events.html#vres2">vres2</a></span> /\ <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> = <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span>)<br/>
}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ec_mem_inject">ec_mem_inject</a></span> <span class="id">sem</span> <span class="id">sg</span> (<span class="id">ECPROP</span>: <span class="id"><a href="compcert.common.Events.html#extcall_properties">extcall_properties</a></span> <span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#sg">sg</a></span>):<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">vargs</span> <span class="id">m1</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m2</span> <span class="id">f</span> <span class="id">m1</span>' <span class="id">vargs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id">vargs</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>', <span class="id">exists</span> <span class="id">vres</span>', <span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#sem">sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> <span class="id">vargs</span>' <span class="id">m1</span>' <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id">vres</span>' <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id">vres</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span>) <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span>) <span class="id">m1</span>' <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id">f</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id">m1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1305')">Proof.</div>
<div class="proofscript" id="proof1305">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#ec_mem_inject_weak">ec_mem_inject_weak</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#symbols_inject_weak_imply">symbols_inject_weak_imply</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Semantics of volatile loads </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="volatile_load_sem">volatile_load_sem</a></span> (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="volatile_load_sem_intro">volatile_load_sem_intro</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">m</span> <span class="id">t</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_load">volatile_load</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_load_sem">volatile_load_sem</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="volatile_load_preserved">volatile_load_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_load">volatile_load</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_load">volatile_load</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1306')">Proof.</div>
<div class="proofscript" id="proof1306">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="id">inv</span> <span class="id">H0</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">C</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_preserved">eventval_match_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">C</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="volatile_load_extends">volatile_load_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_load">volatile_load</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>', <span class="id"><a href="compcert.common.Events.html#volatile_load">volatile_load</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id">v</span>' /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id">v</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1307')">Proof.</div>
<div class="proofscript" id="proof1307">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_extends">Mem.load_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="volatile_load_inject">volatile_load_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">f</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t</span> <span class="id">v</span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#symbols_inject_weak">symbols_inject_weak</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_load">volatile_load</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">ofs</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>', <span class="id"><a href="compcert.common.Events.html#volatile_load">volatile_load</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id">v</span>' /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id">v</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1308')">Proof.</div>
<div class="proofscript" id="proof1308">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">m</span>'; <span class="tactic">intros</span> <span class="id">SI</span> <span class="id">VL</span> <span class="id">VI</span> <span class="id">MI</span>. <span class="tactic">generalize</span> <span class="id">SI</span>; <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">VL</span>.<br/>
- <span class="comment">(*&nbsp;volatile&nbsp;load&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">VI</span>. <span class="id">exploit</span> <span class="id">B</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">U</span> <span class="id">V</span>]. <span class="tactic">subst</span> <span class="id">delta</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_inject_2">eventval_match_inject_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">v2</span> &amp; <span class="id">X</span> &amp; <span class="id">Y</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id">chunk</span> <span class="id">v2</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econs</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id">D</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H5</span>) <span class="kwd">as</span> [|[]].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">assumption</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result_inject">Val.load_result_inject</a></span>. <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;normal&nbsp;load&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_inject">Mem.loadv_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">intros</span> (<span class="id">v2</span> &amp; <span class="id">X</span> &amp; <span class="id">Y</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">VI</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">D</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span>) <span class="kwd">as</span> [|[]]. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_valid_access">Mem.load_valid_access</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">reflexivity</span>. <span class="tactic">set</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>). <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="volatile_load_receptive">volatile_load_receptive</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">t1</span> <span class="id">t2</span> <span class="id">v1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_load">volatile_load</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>, <span class="id"><a href="compcert.common.Events.html#volatile_load">volatile_load</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1309')">Proof.</div>
<div class="proofscript" id="proof1309">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_receptive">eventval_match_receptive</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span>' <span class="id">EM</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id">chunk</span> <span class="id">v</span>'). <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v1</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="volatile_load_ok">volatile_load_ok</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_properties">extcall_properties</a></span> (<span class="id"><a href="compcert.common.Events.html#volatile_load_sem">volatile_load_sem</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#mksignature">mksignature</a></span> (<span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span>)) <span class="id"><a href="compcert.common.AST.html#cc_default">cc_default</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1310')">Proof.</div>
<div class="proofscript" id="proof1310">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;well&nbsp;typed&nbsp;*)</span><br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#proj_sig_res">proj_sig_res</a></span>; <span class="tactic">simpl</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result_type">Val.load_result_type</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_type">Mem.load_type</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;symbols&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#volatile_load_preserved">volatile_load_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;valid&nbsp;blocks&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;max&nbsp;perms&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;readonly&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;extends&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#volatile_load_extends">volatile_load_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>'; <span class="id">exists</span> <span class="id">m1</span>'; <span class="tactic">intuition</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;injects&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H7</span>. <span class="tactic">inversion</span> <span class="id">H5</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#volatile_load_inject">volatile_load_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>; <span class="id">exists</span> <span class="id">v</span>'; <span class="id">exists</span> <span class="id">m1</span>'; <span class="tactic">intuition</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">congruence</span>.<br/>
<span class="comment">(*&nbsp;trace&nbsp;length&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;receptive&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#volatile_load_receptive">volatile_load_receptive</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v2</span> <span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>; <span class="id">exists</span> <span class="id">m1</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;determ&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H7</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">id</span> = <span class="id">id0</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol_injective">Senv.find_symbol_injective</a></span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">id0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_valid">eventval_match_valid</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_valid">eventval_match_valid</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_same_type">eventval_match_same_type</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">EQ</span>; <span class="id">inv</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">v</span> = <span class="id">v0</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_determ_1">eventval_match_determ_1</a></span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">v0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<h2> Semantics of volatile stores </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="volatile_store_sem">volatile_store_sem</a></span> (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="volatile_store_sem_intro">volatile_store_sem_intro</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">m1</span> <span class="id">v</span> <span class="id">t</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_store">volatile_store</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_store_sem">volatile_store_sem</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> :: <span class="id"><a href="compcert.common.Events.html#v">v</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="volatile_store_preserved">volatile_store_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">t</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_store">volatile_store</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_store">volatile_store</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1311')">Proof.</div>
<div class="proofscript" id="proof1311">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="id">inv</span> <span class="id">H0</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">C</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_preserved">eventval_match_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">C</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="volatile_store_readonly">volatile_store_readonly</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">chunk1</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs1</span> <span class="id">v</span> <span class="id">t</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_store">volatile_store</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk1">chunk1</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Events.html#ofs1">ofs1</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_not_writable">loc_not_writable</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span>) <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1312')">Proof.</div>
<div class="proofscript" id="proof1312">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unchanged_on">Mem.store_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_access_3">Mem.store_valid_access_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_not_writable">loc_not_writable</a></span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id">P</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="volatile_store_extends">volatile_store_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">t</span> <span class="id">m2</span> <span class="id">m1</span>' <span class="id">v</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_store">volatile_store</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id">v</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_store">volatile_store</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id">m1</span>' <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id">v</span>' <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_out_of_bounds">loc_out_of_bounds</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span>) <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1313')">Proof.</div>
<div class="proofscript" id="proof1313">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_lessdef">eventval_match_lessdef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result_lessdef">Val.load_result_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_within_extends">Mem.store_within_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">m2</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">intuition</span>.<br/>
+ <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unchanged_on">Mem.store_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_bounds">loc_out_of_bounds</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">i</span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_access_3">Mem.store_valid_access_3</a></span>. <span class="id">eexact</span> <span class="id">H3</span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="volatile_store_inject">volatile_store_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge1</span> <span class="id">ge2</span> <span class="id">f</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">t</span> <span class="id">m2</span> <span class="id">m1</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">v</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#symbols_inject_weak">symbols_inject_weak</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_store">volatile_store</a></span> <span class="id"><a href="compcert.common.Events.html#ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">ofs</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id">v</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_store">volatile_store</a></span> <span class="id"><a href="compcert.common.Events.html#ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id">m1</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">v</span>' <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span>) <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span>) <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1314')">Proof.</div>
<div class="proofscript" id="proof1314">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">v</span>'; <span class="tactic">intros</span> <span class="id">SI</span> <span class="id">VS</span> <span class="id">AI</span> <span class="id">VI</span> <span class="id">MI</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">SI</span>; <span class="tactic">intros</span> (<span class="id">P</span> &amp; <span class="id">Q</span> &amp; <span class="id">R</span> &amp; <span class="id">S</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">VS</span>.<br/>
- <span class="comment">(*&nbsp;volatile&nbsp;store&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">AI</span>. <span class="id">exploit</span> <span class="id">Q</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">subst</span> <span class="id">delta</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>. <span class="id">exists</span> <span class="id">m1</span>'; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id">S</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H5</span>) <span class="kwd">as</span> [|[]].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">assumption</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_inject">eventval_match_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result_inject">Val.load_result_inject</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
- <span class="comment">(*&nbsp;normal&nbsp;store&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">AI</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="id">chunk</span> <span class="id">m1</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span>) <span class="id">v</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>). <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev_mapped_inject">Mem.storev_mapped_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">m2</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">intuition</span> <span class="tactic">auto</span>.<br/>
+ <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id">S</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span>) <span class="kwd">as</span> [|[]].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">H3</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_access_3">Mem.store_valid_access_3</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">eapply</span> <span class="id">H1</span>. <span class="tactic">split</span>. <span class="tactic">reflexivity</span>. <span class="tactic">set</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>). <span class="tactic">omega</span>.<br/>
+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unchanged_on">Mem.store_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">AI</span>; <span class="tactic">congruence</span>.<br/>
+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unchanged_on">Mem.store_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span>; <span class="tactic">intros</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQ</span>: <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta</span>)) = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">delta</span>)<br/>
&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">Mem.address_inject</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">EQ</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">eelim</span> <span class="id">H3</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_access_3">Mem.store_valid_access_3</a></span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="tactic">intros</span> [<span class="id">X</span> <span class="id">Y</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">X</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="volatile_store_receptive">volatile_store_receptive</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">t1</span> <span class="id">m1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#volatile_store">volatile_store</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> = <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1315')">Proof.</div>
<div class="proofscript" id="proof1315">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="volatile_store_ok">volatile_store_ok</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_properties">extcall_properties</a></span> (<span class="id"><a href="compcert.common.Events.html#volatile_store_sem">volatile_store_sem</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#mksignature">mksignature</a></span> (<span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span> :: <span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="compcert.common.AST.html#cc_default">cc_default</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1316')">Proof.</div>
<div class="proofscript" id="proof1316">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;well&nbsp;typed&nbsp;*)</span><br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#proj_sig_res">proj_sig_res</a></span>; <span class="tactic">simpl</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;symbols&nbsp;preserved&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#volatile_store_preserved">volatile_store_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;valid&nbsp;block&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;perms&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;readonly&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#volatile_store_readonly">volatile_store_readonly</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;extends*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H6</span>. <span class="id">inv</span> <span class="id">H7</span>. <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#volatile_store_extends">volatile_store_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">m2</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>; <span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">intuition</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;inject&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H7</span>. <span class="id">inv</span> <span class="id">H8</span>. <span class="tactic">inversion</span> <span class="id">H5</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#volatile_store_inject">volatile_store_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">m2</span>' [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>; <span class="id">exists</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>; <span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">intuition</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">congruence</span>.<br/>
<span class="comment">(*&nbsp;trace&nbsp;length&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;receptive&nbsp;*)</span><br/>
- <span class="tactic">assert</span> (<span class="id">t1</span> = <span class="id">t2</span>). <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#volatile_store_receptive">volatile_store_receptive</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t2</span>; <span class="id">exists</span> <span class="id">vres1</span>; <span class="id">exists</span> <span class="id">m1</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;determ&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H8</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">id</span> = <span class="id">id0</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.find_symbol_injective">Senv.find_symbol_injective</a></span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">id0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ev</span> = <span class="id">ev0</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_determ_2">eventval_match_determ_2</a></span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">ev0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<h2> Semantics of dynamic memory allocation (malloc) </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="extcall_malloc_sem">extcall_malloc_sem</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="extcall_malloc_sem_intro">extcall_malloc_sem_intro</a></span>: <span class="kwd">forall</span> <span class="id">sz</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">m</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> (- <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span>) = (<span class="id">m</span>', <span class="id"><a href="compcert.common.Events.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Events.html#b">b</a></span> (- <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_malloc_sem">extcall_malloc_sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">m</span>''.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="extcall_malloc_ok">extcall_malloc_ok</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_properties">extcall_properties</a></span> <span class="id"><a href="compcert.common.Events.html#extcall_malloc_sem">extcall_malloc_sem</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#mksignature">mksignature</a></span> (<span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span>) <span class="id"><a href="compcert.common.AST.html#cc_default">cc_default</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1317')">Proof.</div>
<div class="proofscript" id="proof1317">
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">UNCHANGED</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">v</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">m</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Events.html#hi">hi</a></span> = (<span class="id">m</span>', <span class="id"><a href="compcert.common.Events.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.common.Events.html#P">P</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id">m</span>'').<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span> <span class="kwd">with</span> (<span class="kwd">fun</span> <span class="id">b1</span> <span class="id">ofs1</span> =&gt; <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> &lt;&gt; <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_trans">Mem.unchanged_on_trans</a></span> <span class="kwd">with</span> <span class="id">m</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unchanged_on">Mem.store_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">Mem.valid_not_valid_diff</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;well&nbsp;typed&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#proj_sig_res">proj_sig_res</a></span>, <span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span>; <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;symbols&nbsp;preserved&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;valid&nbsp;block&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;perms&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">Mem.perm_alloc_inv</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">Mem.perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">Mem.valid_not_valid_diff</a></span> <span class="kwd">with</span> <span class="id">m1</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;readonly&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">UNCHANGED</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;extends&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">SZ</span>: <span class="id">v2</span> = <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="id">sz</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="id">inv</span> <span class="id">H5</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">v2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_extends">Mem.alloc_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">m3</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_within_extends">Mem.store_within_extends</a></span>. <span class="id">eexact</span> <span class="id">B</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">m2</span>' [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>); <span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">UNCHANGED</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;injects&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">SZ</span>: <span class="id">v</span>' = <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="id">sz</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="id">inv</span> <span class="id">H6</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">v</span>'.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_parallel_inject">Mem.alloc_parallel_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f</span>' [<span class="id">m3</span>' [<span class="id">b</span>' [<span class="id">ALLOC</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]]]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mapped_inject">Mem.store_mapped_inject</a></span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="id">sz</span>). <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">intros</span> [<span class="id">m2</span>' [<span class="id">E</span> <span class="id">G</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>'; <span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>); <span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">intuition</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">UNCHANGED</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">UNCHANGED</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b1</span>. <span class="tactic">rewrite</span> <span class="id">C</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">D</span> <span class="kwd">in</span> <span class="id">H2</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
<span class="comment">(*&nbsp;trace&nbsp;length&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;receptive&nbsp;*)</span><br/>
- <span class="tactic">assert</span> (<span class="id">t1</span> = <span class="id">t2</span>). <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">t2</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">vres1</span>; <span class="id">exists</span> <span class="id">m1</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;determ&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="id">simple</span> <span class="tactic">inversion</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQ2</span>: <span class="id">sz0</span> = <span class="id">sz</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id">eqn</span>:<span class="id">SF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int64_to_int64">Ptrofs.of_int64_to_int64</a></span> <span class="id">SF</span> <span class="id">sz0</span>), &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int64_to_int64">Ptrofs.of_int64_to_int64</a></span> <span class="id">SF</span> <span class="id">sz</span>). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int_to_int">Ptrofs.of_int_to_int</a></span> <span class="id">SF</span> <span class="id">sz0</span>), &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int_to_int">Ptrofs.of_int_to_int</a></span> <span class="id">SF</span> <span class="id">sz</span>). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<h2> Semantics of dynamic memory deallocation (free) </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="extcall_free_sem">extcall_free_sem</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="extcall_free_sem_intro">extcall_free_sem_intro</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">sz</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#lo">lo</a></span> - <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span> &gt; 0 -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#lo">lo</a></span> - <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#lo">lo</a></span> + <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_free_sem">extcall_free_sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> <span class="id"><a href="compcert.common.Events.html#lo">lo</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id">m</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="extcall_free_ok">extcall_free_ok</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_properties">extcall_properties</a></span> <span class="id"><a href="compcert.common.Events.html#extcall_free_sem">extcall_free_sem</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#mksignature">mksignature</a></span> (<span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="compcert.common.AST.html#cc_default">cc_default</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1318')">Proof.</div>
<div class="proofscript" id="proof1318">
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;well&nbsp;typed&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#proj_sig_res">proj_sig_res</a></span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;symbols&nbsp;preserved&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;valid&nbsp;block&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;perms&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;readonly&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_unchanged_on">Mem.free_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;extends&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H8</span>. <span class="id">inv</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_extends">Mem.load_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">v</span>' = <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="id">sz</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="kwd">in</span> *; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="id">inv</span> <span class="id">B</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">v</span>'.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_extends">Mem.free_parallel_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">m2</span>' [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>; <span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_unchanged_on">Mem.free_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_bounds">loc_out_of_bounds</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">i</span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>. <span class="id">eexact</span> <span class="id">H4</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;inject&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H7</span>. <span class="id">inv</span> <span class="id">H9</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_inject">Mem.load_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">v</span>' = <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="id">sz</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="kwd">in</span> *; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="id">inv</span> <span class="id">B</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">v</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m1</span> <span class="id">b</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">lo</span> - <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">lo</span> + <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">sz</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">Mem.address_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">P</span>. <span class="id">instantiate</span> (1 := <span class="id">lo</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id"><a href="compcert.common.AST.html#Mptr">Mptr</a></span>); <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">EQ</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_inject">Mem.free_parallel_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">m2</span>' &amp; <span class="id">C</span> &amp; <span class="id">D</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>, <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>, <span class="id">m2</span>'; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#extcall_free_sem_intro">extcall_free_sem_intro</a></span> <span class="kwd">with</span> (<span class="id">sz</span> := <span class="id">sz</span>) (<span class="id">m</span>' := <span class="id">m2</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">EQ</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">A</span>. <span class="tactic">f_equal</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id">EQ</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">C</span>. <span class="tactic">f_equal</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_unchanged_on">Mem.free_unchanged_on</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span>. <span class="tactic">intros</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_unchanged_on">Mem.free_unchanged_on</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">eelim</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">P</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">congruence</span>.<br/>
<span class="comment">(*&nbsp;trace&nbsp;length&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;receptive&nbsp;*)</span><br/>
- <span class="tactic">assert</span> (<span class="id">t1</span> = <span class="id">t2</span>). <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">t2</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">vres1</span>; <span class="id">exists</span> <span class="id">m1</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;determ&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQ1</span>: <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="id">sz0</span> = <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="id">sz</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQ2</span>: <span class="id">sz0</span> = <span class="id">sz</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Vptrofs">Vptrofs</a></span> <span class="kwd">in</span> <span class="id">EQ1</span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id">eqn</span>:<span class="id">SF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int64_to_int64">Ptrofs.of_int64_to_int64</a></span> <span class="id">SF</span> <span class="id">sz0</span>), &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int64_to_int64">Ptrofs.of_int64_to_int64</a></span> <span class="id">SF</span> <span class="id">sz</span>). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int_to_int">Ptrofs.of_int_to_int</a></span> <span class="id">SF</span> <span class="id">sz0</span>), &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int_to_int">Ptrofs.of_int_to_int</a></span> <span class="id">SF</span> <span class="id">sz</span>). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">sz0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<h2> Semantics of <span class="bracket"><span class="id">memcpy</span></span> operations. </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="extcall_memcpy_sem">extcall_memcpy_sem</a></span> (<span class="id">sz</span> <span class="id">al</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="extcall_memcpy_sem_intro">extcall_memcpy_sem_intro</a></span>: <span class="kwd">forall</span> <span class="id">bdst</span> <span class="id">odst</span> <span class="id">bsrc</span> <span class="id">osrc</span> <span class="id">m</span> <span class="id">bytes</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#al">al</a></span> = 1 \/ <span class="id"><a href="compcert.common.Events.html#al">al</a></span> = 2 \/ <span class="id"><a href="compcert.common.Events.html#al">al</a></span> = 4 \/ <span class="id"><a href="compcert.common.Events.html#al">al</a></span> = 8 -&gt; <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span> &gt;= 0 -&gt; (<span class="id"><a href="compcert.common.Events.html#al">al</a></span> | <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Events.html#sz">sz</a></span> &gt; 0 -&gt; (<span class="id"><a href="compcert.common.Events.html#al">al</a></span> | <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#osrc">osrc</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Events.html#sz">sz</a></span> &gt; 0 -&gt; (<span class="id"><a href="compcert.common.Events.html#al">al</a></span> | <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#odst">odst</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#bsrc">bsrc</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Events.html#bdst">bdst</a></span> \/ <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#osrc">osrc</a></span> = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#odst">odst</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#osrc">osrc</a></span> + <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#odst">odst</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#odst">odst</a></span> + <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#osrc">osrc</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#bsrc">bsrc</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#osrc">osrc</a></span>) <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#bytes">bytes</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">Mem.storebytes</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#bdst">bdst</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Events.html#odst">odst</a></span>) <span class="id"><a href="compcert.common.Events.html#bytes">bytes</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_memcpy_sem">extcall_memcpy_sem</a></span> <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span> <span class="id"><a href="compcert.common.Events.html#al">al</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Events.html#bdst">bdst</a></span> <span class="id"><a href="compcert.common.Events.html#odst">odst</a></span> :: <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Events.html#bsrc">bsrc</a></span> <span class="id"><a href="compcert.common.Events.html#osrc">osrc</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id">m</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="extcall_memcpy_ok">extcall_memcpy_ok</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sz</span> <span class="id">al</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_properties">extcall_properties</a></span> (<span class="id"><a href="compcert.common.Events.html#extcall_memcpy_sem">extcall_memcpy_sem</a></span> <span class="id"><a href="compcert.common.Events.html#sz">sz</a></span> <span class="id"><a href="compcert.common.Events.html#al">al</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#mksignature">mksignature</a></span> (<span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span> :: <span class="id"><a href="compcert.common.AST.html#Tptr">Tptr</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="compcert.common.AST.html#cc_default">cc_default</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1319')">Proof.</div>
<div class="proofscript" id="proof1319">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
- <span class="comment">(*&nbsp;return&nbsp;type&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
- <span class="comment">(*&nbsp;change&nbsp;of&nbsp;globalenv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;valid&nbsp;blocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
- <span class="comment">(*&nbsp;perms&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">Mem.perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;readonly&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unchanged_on">Mem.storebytes_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">H8</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">Mem.storebytes_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;extensions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H13</span>. <span class="id">inv</span> <span class="id">H14</span>. <span class="id">inv</span> <span class="id">H10</span>. <span class="id">inv</span> <span class="id">H11</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">Mem.loadbytes_length</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">LEN</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_extends">Mem.loadbytes_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">bytes2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_within_extends">Mem.storebytes_within_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">m2</span>' [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>; <span class="id">exists</span> <span class="id">m2</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unchanged_on">Mem.storebytes_unchanged_on</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_bounds">loc_out_of_bounds</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m1</span> <span class="id">bdst</span> <span class="id">i</span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">Mem.storebytes_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_length">list_forall2_length</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
- <span class="comment">(*&nbsp;injections&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H14</span>. <span class="id">inv</span> <span class="id">H15</span>. <span class="id">inv</span> <span class="id">H11</span>. <span class="id">inv</span> <span class="id">H12</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">sz</span> 0).<br/>
+ <span class="comment">(*&nbsp;special&nbsp;case&nbsp;sz&nbsp;=&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">bytes</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_empty">Mem.loadbytes_empty</a></span> <span class="id">m1</span> <span class="id">bsrc</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">osrc</span>) <span class="id">sz</span>). <span class="tactic">omega</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_storebytes">Mem.range_perm_storebytes</a></span> <span class="id">m1</span>' <span class="id">b0</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">odst</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta0</span>))) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">as</span> [<span class="id">m2</span>' <span class="id">SB</span>].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>, <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>, <span class="id">m2</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_empty">Mem.loadbytes_empty</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_empty_inject">Mem.storebytes_empty_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unchanged_on">Mem.storebytes_unchanged_on</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unchanged_on">Mem.storebytes_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_refl">inject_incr_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">congruence</span>.<br/>
+ <span class="comment">(*&nbsp;general&nbsp;case&nbsp;sz&nbsp;&gt;&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">Mem.loadbytes_length</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">LEN</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">RPSRC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m1</span> <span class="id">bsrc</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">osrc</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">osrc</span> + <span class="id">sz</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_implies">Mem.range_perm_implies</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_range_perm">Mem.loadbytes_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">RPDST</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m1</span> <span class="id">bdst</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">odst</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">odst</span> + <span class="id">sz</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">sz</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_implies">Mem.range_perm_implies</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">Mem.storebytes_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">LEN</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">PSRC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m1</span> <span class="id">bsrc</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">osrc</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">RPSRC</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">PDST</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m1</span> <span class="id">bdst</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">odst</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">RPDST</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">Mem.address_inject</a></span>.  <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">PSRC</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">Mem.address_inject</a></span>.  <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">PDST</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_inject">Mem.loadbytes_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">bytes2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mapped_inject">Mem.storebytes_mapped_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">m2</span>' [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>; <span class="id">exists</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>; <span class="id">exists</span> <span class="id">m2</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">EQ1</span>; <span class="tactic">try</span> <span class="tactic">rewrite</span> <span class="id">EQ2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.aligned_area_inject">Mem.aligned_area_inject</a></span> <span class="kwd">with</span> (<span class="id">m</span> := <span class="id">m1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.aligned_area_inject">Mem.aligned_area_inject</a></span> <span class="kwd">with</span> (<span class="id">m</span> := <span class="id">m1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.disjoint_or_equal_inject">Mem.disjoint_or_equal_inject</a></span> <span class="kwd">with</span> (<span class="id">m</span> := <span class="id">m1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_max">Mem.range_perm_max</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_max">Mem.range_perm_max</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span>; <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unchanged_on">Mem.storebytes_unchanged_on</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unchanged_on">Mem.storebytes_unchanged_on</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span>; <span class="tactic">intros</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eelim</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">Mem.storebytes_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_length">list_forall2_length</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_refl">inject_incr_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">congruence</span>.<br/>
- <span class="comment">(*&nbsp;trace&nbsp;length&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
- <span class="comment">(*&nbsp;receptive&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">t1</span> = <span class="id">t2</span>). <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">t2</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">vres1</span>; <span class="id">exists</span> <span class="id">m1</span>; <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;determ&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">intros</span>; <span class="tactic">split</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<h2> Semantics of annotations. </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="extcall_annot_sem">extcall_annot_sem</a></span> (<span class="id">text</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">targs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#typ">typ</a></span>) (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="extcall_annot_sem_intro">extcall_annot_sem_intro</a></span>: <span class="kwd">forall</span> <span class="id">vargs</span> <span class="id">m</span> <span class="id">args</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_list_match">eventval_list_match</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#args">args</a></span> <span class="id"><a href="compcert.common.Events.html#targs">targs</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_annot_sem">extcall_annot_sem</a></span> <span class="id"><a href="compcert.common.Events.html#text">text</a></span> <span class="id"><a href="compcert.common.Events.html#targs">targs</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> (<span class="id"><a href="compcert.common.Events.html#Event_annot">Event_annot</a></span> <span class="id"><a href="compcert.common.Events.html#text">text</a></span> <span class="id"><a href="compcert.common.Events.html#args">args</a></span> :: <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>) <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="extcall_annot_ok">extcall_annot_ok</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">text</span> <span class="id">targs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_properties">extcall_properties</a></span> (<span class="id"><a href="compcert.common.Events.html#extcall_annot_sem">extcall_annot_sem</a></span> <span class="id"><a href="compcert.common.Events.html#text">text</a></span> <span class="id"><a href="compcert.common.Events.html#targs">targs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#mksignature">mksignature</a></span> <span class="id"><a href="compcert.common.Events.html#targs">targs</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="compcert.common.AST.html#cc_default">cc_default</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1320')">Proof.</div>
<div class="proofscript" id="proof1320">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;well&nbsp;typed&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;symbols&nbsp;*)</span><br/>
- <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="id">inv</span> <span class="id">H0</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_list_match_preserved">eventval_list_match_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;valid&nbsp;blocks&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;perms&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;readonly&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;extends&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>; <span class="id">exists</span> <span class="id">m1</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_list_match_lessdef">eventval_list_match_lessdef</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;injects&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>; <span class="id">exists</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>; <span class="id">exists</span> <span class="id">m1</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_list_match_inject">eventval_list_match_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">congruence</span>.<br/>
<span class="comment">(*&nbsp;trace&nbsp;length&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;receptive&nbsp;*)</span><br/>
- <span class="tactic">assert</span> (<span class="id">t1</span> = <span class="id">t2</span>). <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">vres1</span>; <span class="id">exists</span> <span class="id">m1</span>; <span class="tactic">congruence</span>.<br/>
<span class="comment">(*&nbsp;determ&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">args</span> = <span class="id">args0</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_list_match_determ_2">eventval_list_match_determ_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">subst</span> <span class="id">args0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="extcall_annot_val_sem">extcall_annot_val_sem</a></span> (<span class="id">text</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">string</a></span>) (<span class="id">targ</span>: <span class="id"><a href="compcert.common.AST.html#typ">typ</a></span>) (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="extcall_annot_val_sem_intro">extcall_annot_val_sem_intro</a></span>: <span class="kwd">forall</span> <span class="id">varg</span> <span class="id">m</span> <span class="id">arg</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eventval_match">eventval_match</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#arg">arg</a></span> <span class="id"><a href="compcert.common.Events.html#targ">targ</a></span> <span class="id"><a href="compcert.common.Events.html#varg">varg</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_annot_val_sem">extcall_annot_val_sem</a></span> <span class="id"><a href="compcert.common.Events.html#text">text</a></span> <span class="id"><a href="compcert.common.Events.html#targ">targ</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Events.html#varg">varg</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="compcert.common.Events.html#m">m</a></span> (<span class="id"><a href="compcert.common.Events.html#Event_annot">Event_annot</a></span> <span class="id"><a href="compcert.common.Events.html#text">text</a></span> (<span class="id"><a href="compcert.common.Events.html#arg">arg</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) :: <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>) <span class="id"><a href="compcert.common.Events.html#varg">varg</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="extcall_annot_val_ok">extcall_annot_val_ok</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">text</span> <span class="id">targ</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_properties">extcall_properties</a></span> (<span class="id"><a href="compcert.common.Events.html#extcall_annot_val_sem">extcall_annot_val_sem</a></span> <span class="id"><a href="compcert.common.Events.html#text">text</a></span> <span class="id"><a href="compcert.common.Events.html#targ">targ</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#mksignature">mksignature</a></span> (<span class="id"><a href="compcert.common.Events.html#targ">targ</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#targ">targ</a></span>) <span class="id"><a href="compcert.common.AST.html#cc_default">cc_default</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1321')">Proof.</div>
<div class="proofscript" id="proof1321">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;well&nbsp;typed&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#proj_sig_res">proj_sig_res</a></span>; <span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_type">eventval_match_type</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;symbols&nbsp;*)</span><br/>
- <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="id">inv</span> <span class="id">H0</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_preserved">eventval_match_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;valid&nbsp;blocks&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;perms&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;readonly&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;extends&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>; <span class="id">exists</span> <span class="id">m1</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_lessdef">eventval_match_lessdef</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;inject&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>; <span class="id">exists</span> <span class="id">v</span>'; <span class="id">exists</span> <span class="id">m1</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_inject">eventval_match_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">congruence</span>.<br/>
<span class="comment">(*&nbsp;trace&nbsp;length&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;receptive&nbsp;*)</span><br/>
- <span class="tactic">assert</span> (<span class="id">t1</span> = <span class="id">t2</span>). <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">t2</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">vres1</span>; <span class="id">exists</span> <span class="id">m1</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;determ&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">arg</span> = <span class="id">arg0</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eventval_match_determ_2">eventval_match_determ_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">subst</span> <span class="id">arg0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="extcall_debug_sem">extcall_debug_sem</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="extcall_debug_sem_intro">extcall_debug_sem_intro</a></span>: <span class="kwd">forall</span> <span class="id">vargs</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_debug_sem">extcall_debug_sem</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="extcall_debug_ok">extcall_debug_ok</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">targs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_properties">extcall_properties</a></span> <span class="id"><a href="compcert.common.Events.html#extcall_debug_sem">extcall_debug_sem</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#mksignature">mksignature</a></span> <span class="id"><a href="compcert.common.Events.html#targs">targs</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="compcert.common.AST.html#cc_default">cc_default</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1322')">Proof.</div>
<div class="proofscript" id="proof1322">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;well&nbsp;typed&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;symbols&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;valid&nbsp;blocks&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;perms&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;readonly&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;extends&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>; <span class="id">exists</span> <span class="id">m1</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem&nbsp;injects&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>; <span class="id">exists</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>; <span class="id">exists</span> <span class="id">m1</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">congruence</span>.<br/>
<span class="comment">(*&nbsp;trace&nbsp;length&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;receptive&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="id">exists</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>, <span class="id">m1</span>; <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;determ&nbsp;*)</span><br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Semantics of external functions. </h2>
<br/>
<div class="doc">For functions defined outside the program (<span class="bracket"><span class="id">EF_external</span></span>,
  <span class="bracket"><span class="id">EF_builtin</span></span> and <span class="bracket"><span class="id">EF_runtime</span></span>), we do not define their
  semantics, but only assume that it satisfies
  <span class="bracket"><span class="id">extcall_properties</span></span>. </div>
<br/>
<span class="kwd">Parameter</span> <span class="id"><a name="external_functions_sem">external_functions_sem</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">String.string</a></span> -&gt; <span class="id"><a href="compcert.common.AST.html#signature">signature</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#extcall_sem">extcall_sem</a></span>.<br/>
<br/>
<span class="kwd">Axiom</span> <span class="id"><a name="external_functions_properties">external_functions_properties</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">sg</span>, <span class="id"><a href="compcert.common.Events.html#extcall_properties">extcall_properties</a></span> (<span class="id"><a href="compcert.common.Events.html#external_functions_sem">external_functions_sem</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#sg">sg</a></span>) <span class="id"><a href="compcert.common.Events.html#sg">sg</a></span>.<br/>
<br/>
<div class="doc">We treat inline assembly similarly. </div>
<br/>
<span class="kwd">Parameter</span> <span class="id"><a name="inline_assembly_sem">inline_assembly_sem</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">String.string</a></span> -&gt; <span class="id"><a href="compcert.common.AST.html#signature">signature</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#extcall_sem">extcall_sem</a></span>.<br/>
<br/>
<span class="kwd">Axiom</span> <span class="id"><a name="inline_assembly_properties">inline_assembly_properties</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">sg</span>, <span class="id"><a href="compcert.common.Events.html#extcall_properties">extcall_properties</a></span> (<span class="id"><a href="compcert.common.Events.html#inline_assembly_sem">inline_assembly_sem</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#sg">sg</a></span>) <span class="id"><a href="compcert.common.Events.html#sg">sg</a></span>.<br/>
<br/>
<h2> Combined semantics of external calls </h2>
<br/>
<div class="doc">Combining the semantics given above for the various kinds of external calls,
  we define the predicate <span class="bracket"><span class="id">external_call</span></span> that relates:
<ul>
<li>
 the external function being invoked
</li>
<li>
 the values of the arguments passed to this function
</li>
<li>
 the memory state before the call
</li>
<li>
 the result value of the call
</li>
<li>
 the memory state after the call
</li>
<li>
 the trace generated by the call (can be empty).
</li>
</ul>
This predicate is used in the semantics of all CompCert languages. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="external_call">external_call</a></span> (<span class="id">ef</span>: <span class="id"><a href="compcert.common.AST.html#external_function">external_function</a></span>): <span class="id"><a href="compcert.common.Events.html#extcall_sem">extcall_sem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_external">EF_external</a></span> <span class="id">name</span> <span class="id">sg</span>  =&gt; <span class="id"><a href="compcert.common.Events.html#external_functions_sem">external_functions_sem</a></span> <span class="id">name</span> <span class="id">sg</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_builtin">EF_builtin</a></span> <span class="id">name</span> <span class="id">sg</span>   =&gt; <span class="id"><a href="compcert.common.Events.html#external_functions_sem">external_functions_sem</a></span> <span class="id">name</span> <span class="id">sg</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_runtime">EF_runtime</a></span> <span class="id">name</span> <span class="id">sg</span>   =&gt; <span class="id"><a href="compcert.common.Events.html#external_functions_sem">external_functions_sem</a></span> <span class="id">name</span> <span class="id">sg</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_vload">EF_vload</a></span> <span class="id">chunk</span>       =&gt; <span class="id"><a href="compcert.common.Events.html#volatile_load_sem">volatile_load_sem</a></span> <span class="id">chunk</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_vstore">EF_vstore</a></span> <span class="id">chunk</span>      =&gt; <span class="id"><a href="compcert.common.Events.html#volatile_store_sem">volatile_store_sem</a></span> <span class="id">chunk</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_malloc">EF_malloc</a></span>            =&gt; <span class="id"><a href="compcert.common.Events.html#extcall_malloc_sem">extcall_malloc_sem</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_free">EF_free</a></span>              =&gt; <span class="id"><a href="compcert.common.Events.html#extcall_free_sem">extcall_free_sem</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_memcpy">EF_memcpy</a></span> <span class="id">sz</span> <span class="id">al</span>      =&gt; <span class="id"><a href="compcert.common.Events.html#extcall_memcpy_sem">extcall_memcpy_sem</a></span> <span class="id">sz</span> <span class="id">al</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_annot">EF_annot</a></span> <span class="id">kind</span> <span class="id">txt</span> <span class="id">targs</span>   =&gt; <span class="id"><a href="compcert.common.Events.html#extcall_annot_sem">extcall_annot_sem</a></span> <span class="id">txt</span> <span class="id">targs</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_annot_val">EF_annot_val</a></span> <span class="id">kind</span> <span class="id">txt</span> <span class="id">targ</span> =&gt; <span class="id"><a href="compcert.common.Events.html#extcall_annot_val_sem">extcall_annot_val_sem</a></span> <span class="id">txt</span> <span class="id">targ</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_inline_asm">EF_inline_asm</a></span> <span class="id">txt</span> <span class="id">sg</span> <span class="id">clb</span> =&gt; <span class="id"><a href="compcert.common.Events.html#inline_assembly_sem">inline_assembly_sem</a></span> <span class="id">txt</span> <span class="id">sg</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#EF_debug">EF_debug</a></span> <span class="id">kind</span> <span class="id">txt</span> <span class="id">targs</span> =&gt; <span class="id"><a href="compcert.common.Events.html#extcall_debug_sem">extcall_debug_sem</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="external_call_spec">external_call_spec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ef</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#extcall_properties">extcall_properties</a></span> (<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span>) (<span class="id"><a href="compcert.common.AST.html#ef_sig">ef_sig</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1323')">Proof.</div>
<div class="proofscript" id="proof1323">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span>, <span class="id"><a href="compcert.common.AST.html#ef_sig">ef_sig</a></span>; <span class="tactic">destruct</span> <span class="id">ef</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#external_functions_properties">external_functions_properties</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#external_functions_properties">external_functions_properties</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#external_functions_properties">external_functions_properties</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#volatile_load_ok">volatile_load_ok</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#volatile_store_ok">volatile_store_ok</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#extcall_malloc_ok">extcall_malloc_ok</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#extcall_free_ok">extcall_free_ok</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#extcall_memcpy_ok">extcall_memcpy_ok</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#extcall_annot_ok">extcall_annot_ok</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#extcall_annot_val_ok">extcall_annot_val_ok</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#inline_assembly_properties">inline_assembly_properties</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#extcall_debug_ok">extcall_debug_ok</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="external_call_well_typed">external_call_well_typed</a></span> <span class="id">ef</span> := <span class="id"><a href="compcert.common.Events.html#ec_well_typed">ec_well_typed</a></span> (<span class="id"><a href="compcert.common.Events.html#external_call_spec">external_call_spec</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="external_call_symbols_preserved">external_call_symbols_preserved</a></span> <span class="id">ef</span> := <span class="id"><a href="compcert.common.Events.html#ec_symbols_preserved">ec_symbols_preserved</a></span> (<span class="id"><a href="compcert.common.Events.html#external_call_spec">external_call_spec</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="external_call_valid_block">external_call_valid_block</a></span> <span class="id">ef</span> := <span class="id"><a href="compcert.common.Events.html#ec_valid_block">ec_valid_block</a></span> (<span class="id"><a href="compcert.common.Events.html#external_call_spec">external_call_spec</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="external_call_max_perm">external_call_max_perm</a></span> <span class="id">ef</span> := <span class="id"><a href="compcert.common.Events.html#ec_max_perm">ec_max_perm</a></span> (<span class="id"><a href="compcert.common.Events.html#external_call_spec">external_call_spec</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="external_call_readonly">external_call_readonly</a></span> <span class="id">ef</span> := <span class="id"><a href="compcert.common.Events.html#ec_readonly">ec_readonly</a></span> (<span class="id"><a href="compcert.common.Events.html#external_call_spec">external_call_spec</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="external_call_mem_extends">external_call_mem_extends</a></span> <span class="id">ef</span> := <span class="id"><a href="compcert.common.Events.html#ec_mem_extends">ec_mem_extends</a></span> (<span class="id"><a href="compcert.common.Events.html#external_call_spec">external_call_spec</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="external_call_mem_inject_gen">external_call_mem_inject_gen</a></span> <span class="id">ef</span> := <span class="id"><a href="compcert.common.Events.html#ec_mem_inject">ec_mem_inject</a></span> (<span class="id"><a href="compcert.common.Events.html#external_call_spec">external_call_spec</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="external_call_trace_length">external_call_trace_length</a></span> <span class="id">ef</span> := <span class="id"><a href="compcert.common.Events.html#ec_trace_length">ec_trace_length</a></span> (<span class="id"><a href="compcert.common.Events.html#external_call_spec">external_call_spec</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="external_call_receptive">external_call_receptive</a></span> <span class="id">ef</span> := <span class="id"><a href="compcert.common.Events.html#ec_receptive">ec_receptive</a></span> (<span class="id"><a href="compcert.common.Events.html#external_call_spec">external_call_spec</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span>).<br/>
<span class="kwd">Definition</span> <span class="id"><a name="external_call_determ">external_call_determ</a></span> <span class="id">ef</span> := <span class="id"><a href="compcert.common.Events.html#ec_determ">ec_determ</a></span> (<span class="id"><a href="compcert.common.Events.html#external_call_spec">external_call_spec</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span>).<br/>
<br/>
<div class="doc">Corollary of <span class="bracket"><span class="id">external_call_valid_block</span></span>. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="external_call_nextblock">external_call_nextblock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ef</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m1</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1324')">Proof.</div>
<div class="proofscript" id="proof1324">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m2</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>)).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_valid_block">external_call_valid_block</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">eelim</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span>, <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="kwd">in</span> *; <span class="id">zify</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Special case of <span class="bracket"><span class="id">external_call_mem_inject_gen</span></span> (for backward compatibility) </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="meminj_preserves_globals">meminj_preserves_globals</a></span> (<span class="id">F</span> <span class="id">V</span>: <span class="kwd">Type</span>) (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="compcert.common.Events.html#F">F</a></span> <span class="id"><a href="compcert.common.Events.html#V">V</a></span>) (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="compcert.common.Values.html#block">block</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Events.html#b">b</a></span>, 0))<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b</span> <span class="id">gv</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#gv">gv</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Events.html#b">b</a></span>, 0))<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">gv</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#b2">b2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#gv">gv</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Events.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Events.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Events.html#b2">b2</a></span> = <span class="id"><a href="compcert.common.Events.html#b1">b1</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="external_call_mem_inject">external_call_mem_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ef</span> <span class="id">F</span> <span class="id">V</span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="compcert.common.Events.html#F">F</a></span> <span class="id"><a href="compcert.common.Events.html#V">V</a></span>) <span class="id">vargs</span> <span class="id">m1</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m2</span> <span class="id">f</span> <span class="id">m1</span>' <span class="id">vargs</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id">vargs</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>', <span class="id">exists</span> <span class="id">vres</span>', <span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id">vargs</span>' <span class="id">m1</span>' <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id">vres</span>' <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.common.Events.html#vres">vres</a></span> <span class="id">vres</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span>) <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span>) <span class="id">m1</span>' <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id">f</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.common.Events.html#f">f</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> <span class="id">m1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1325')">Proof.</div>
<div class="proofscript" id="proof1325">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_inject_gen">external_call_mem_inject_gen</a></span> <span class="kwd">with</span> (<span class="id">ge1</span> := <span class="id">ge</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">exploit</span> <span class="id">A</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ</span>; <span class="tactic">rewrite</span> <span class="id">EQ</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">exploit</span> <span class="id">A</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ</span>; <span class="tactic">rewrite</span> <span class="id">EQ</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="id">exists</span> <span class="id">b1</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.block_is_volatile">Genv.block_is_volatile</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id">ge</span> <span class="id">b1</span>) <span class="kwd">as</span> [<span class="id">gv1</span>|] <span class="id">eqn</span>:<span class="id">V1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exploit</span> <span class="id">B</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ</span>; <span class="tactic">rewrite</span> <span class="id">EQ</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">V1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id">ge</span> <span class="id">b2</span>) <span class="kwd">as</span> [<span class="id">gv2</span>|] <span class="id">eqn</span>:<span class="id">V2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">C</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">EQ</span>; <span class="tactic">subst</span> <span class="id">b2</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Corollaries of <span class="bracket"><span class="id">external_call_determ</span></span>. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="external_call_match_traces">external_call_match_traces</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ef</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m</span> <span class="id">t1</span> <span class="id">vres1</span> <span class="id">m1</span> <span class="id">t2</span> <span class="id">vres2</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#vres1">vres1</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Events.html#vres2">vres2</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Events.html#t2">t2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1326')">Proof.</div>
<div class="proofscript" id="proof1326">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_determ">external_call_determ</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="external_call_deterministic">external_call_deterministic</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ef</span> <span class="id">ge</span> <span class="id">vargs</span> <span class="id">m</span> <span class="id">t</span> <span class="id">vres1</span> <span class="id">m1</span> <span class="id">vres2</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres1">vres1</a></span> <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.common.Events.html#ef">ef</a></span> <span class="id"><a href="compcert.common.Events.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#vargs">vargs</a></span> <span class="id"><a href="compcert.common.Events.html#m">m</a></span> <span class="id"><a href="compcert.common.Events.html#t">t</a></span> <span class="id"><a href="compcert.common.Events.html#vres2">vres2</a></span> <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#vres1">vres1</a></span> = <span class="id"><a href="compcert.common.Events.html#vres2">vres2</a></span> /\ <span class="id"><a href="compcert.common.Events.html#m1">m1</a></span> = <span class="id"><a href="compcert.common.Events.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1327')">Proof.</div>
<div class="proofscript" id="proof1327">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_determ">external_call_determ</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<h1> Evaluation of builtin arguments </h1>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="EVAL_BUILTIN_ARG">EVAL_BUILTIN_ARG</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG.A">A</a></span>: <span class="kwd">Type</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG.ge">ge</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG.e">e</a></span>: <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG.A">A</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG.sp">sp</a></span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG.m">m</a></span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="eval_builtin_arg">eval_builtin_arg</a></span>: <span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG.A">A</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="eval_BA">eval_BA</a></span>: <span class="kwd">forall</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> (<span class="id"><a href="compcert.common.AST.html#BA">BA</a></span> <span class="id"><a href="compcert.common.Events.html#x">x</a></span>) (<span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG.e">e</a></span> <span class="id"><a href="compcert.common.Events.html#x">x</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="eval_BA_int">eval_BA_int</a></span>: <span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> (<span class="id"><a href="compcert.common.AST.html#BA_int">BA_int</a></span> <span class="id"><a href="compcert.common.Events.html#n">n</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Events.html#n">n</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="eval_BA_long">eval_BA_long</a></span>: <span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> (<span class="id"><a href="compcert.common.AST.html#BA_long">BA_long</a></span> <span class="id"><a href="compcert.common.Events.html#n">n</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id"><a href="compcert.common.Events.html#n">n</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="eval_BA_float">eval_BA_float</a></span>: <span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> (<span class="id"><a href="compcert.common.AST.html#BA_float">BA_float</a></span> <span class="id"><a href="compcert.common.Events.html#n">n</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id"><a href="compcert.common.Events.html#n">n</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="eval_BA_single">eval_BA_single</a></span>: <span class="kwd">forall</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> (<span class="id"><a href="compcert.common.AST.html#BA_single">BA_single</a></span> <span class="id"><a href="compcert.common.Events.html#n">n</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id"><a href="compcert.common.Events.html#n">n</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="eval_BA_loadstack">eval_BA_loadstack</a></span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG.m">m</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG.sp">sp</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> (<span class="id"><a href="compcert.common.AST.html#BA_loadstack">BA_loadstack</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>) <span class="id"><a href="compcert.common.Events.html#v">v</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="eval_BA_addrstack">eval_BA_addrstack</a></span>: <span class="kwd">forall</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> (<span class="id"><a href="compcert.common.AST.html#BA_addrstack">BA_addrstack</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.offset_ptr">Val.offset_ptr</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG.sp">sp</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="eval_BA_loadglobal">eval_BA_loadglobal</a></span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">id</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">Mem.loadv</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG.m">m</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG.ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> (<span class="id"><a href="compcert.common.AST.html#BA_loadglobal">BA_loadglobal</a></span> <span class="id"><a href="compcert.common.Events.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>) <span class="id"><a href="compcert.common.Events.html#v">v</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="eval_BA_addrglobal">eval_BA_addrglobal</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> (<span class="id"><a href="compcert.common.AST.html#BA_addrglobal">BA_addrglobal</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG.ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="eval_BA_splitlong">eval_BA_splitlong</a></span>: <span class="kwd">forall</span> <span class="id">hi</span> <span class="id">lo</span> <span class="id">vhi</span> <span class="id">vlo</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Events.html#vhi">vhi</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Events.html#vlo">vlo</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> (<span class="id"><a href="compcert.common.AST.html#BA_splitlong">BA_splitlong</a></span> <span class="id"><a href="compcert.common.Events.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Events.html#lo">lo</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.longofwords">Val.longofwords</a></span> <span class="id"><a href="compcert.common.Events.html#vhi">vhi</a></span> <span class="id"><a href="compcert.common.Events.html#vlo">vlo</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="eval_BA_addptr">eval_BA_addptr</a></span>: <span class="kwd">forall</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">v1</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#a1">a1</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#a2">a2</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> (<span class="id"><a href="compcert.common.AST.html#BA_addptr">BA_addptr</a></span> <span class="id"><a href="compcert.common.Events.html#a1">a1</a></span> <span class="id"><a href="compcert.common.Events.html#a2">a2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="eval_builtin_args">eval_builtin_args</a></span> (<span class="id">al</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#builtin_arg">builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG.A">A</a></span>)) (<span class="id">vl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#al">al</a></span> <span class="id"><a href="compcert.common.Events.html#vl">vl</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_builtin_arg_determ">eval_builtin_arg_determ</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#a">a</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt; <span class="kwd">forall</span> <span class="id">v</span>', <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#a">a</a></span> <span class="id">v</span>' -&gt; <span class="id">v</span>' = <span class="id"><a href="compcert.common.Events.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1328')">Proof.</div>
<div class="proofscript" id="proof1328">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span> <span class="id">v</span>' <span class="id">EV</span>; <span class="id">inv</span> <span class="id">EV</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHeval_builtin_arg1</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id">IHeval_builtin_arg2</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">subst</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_builtin_args_determ">eval_builtin_args_determ</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">al</span> <span class="id">vl</span>, <span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.common.Events.html#al">al</a></span> <span class="id"><a href="compcert.common.Events.html#vl">vl</a></span> -&gt; <span class="kwd">forall</span> <span class="id">vl</span>', <span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.common.Events.html#al">al</a></span> <span class="id">vl</span>' -&gt; <span class="id">vl</span>' = <span class="id"><a href="compcert.common.Events.html#vl">vl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1329')">Proof.</div>
<div class="proofscript" id="proof1329">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span> <span class="id">v</span>' <span class="id">EV</span>; <span class="id">inv</span> <span class="id">EV</span>; <span class="tactic">f_equal</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg_determ">eval_builtin_arg_determ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG">EVAL_BUILTIN_ARG</a></span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span>: <span class="id">barg</span>.<br/>
<br/>
<div class="doc">Invariance by change of global environment. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED">EVAL_BUILTIN_ARG_PRESERVED</a></span>.<br/>
<br/>
<span class="kwd">Variables</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.A">A</a></span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.F1">F1</a></span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.V1">V1</a></span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.F2">F2</a></span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.V2">V2</a></span>: <span class="kwd">Type</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.ge1">ge1</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.F1">F1</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.V1">V1</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.ge2">ge2</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.F2">F2</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.V2">V2</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.e">e</a></span>: <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.A">A</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.sp">sp</a></span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.m">m</a></span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="EVAL_BUILTIN_ARG_PRESERVED.symbols_preserved">symbols_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_builtin_arg_preserved">eval_builtin_arg_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.e">e</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.sp">sp</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.m">m</a></span> <span class="id"><a href="compcert.common.Events.html#a">a</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.e">e</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.sp">sp</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.m">m</a></span> <span class="id"><a href="compcert.common.Events.html#a">a</a></span> <span class="id"><a href="compcert.common.Events.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1330')">Proof.</div>
<div class="proofscript" id="proof1330">
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQ</span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#id">id</a></span> <span class="id"><a href="compcert.common.Events.html#ofs">ofs</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.symbols_preserved">symbols_preserved</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">EQ</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">EQ</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_builtin_args_preserved">eval_builtin_args_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">al</span> <span class="id">vl</span>, <span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.ge1">ge1</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.e">e</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.sp">sp</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.m">m</a></span> <span class="id"><a href="compcert.common.Events.html#al">al</a></span> <span class="id"><a href="compcert.common.Events.html#vl">vl</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.ge2">ge2</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.e">e</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.sp">sp</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED.m">m</a></span> <span class="id"><a href="compcert.common.Events.html#al">al</a></span> <span class="id"><a href="compcert.common.Events.html#vl">vl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1331')">Proof.</div>
<div class="proofscript" id="proof1331">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="id">constructor</span>; <span class="tactic">auto</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg_preserved">eval_builtin_arg_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_PRESERVED">EVAL_BUILTIN_ARG_PRESERVED</a></span>.<br/>
<br/>
<div class="doc">Compatibility with the "is less defined than" relation. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF">EVAL_BUILTIN_ARG_LESSDEF</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.A">A</a></span>: <span class="kwd">Type</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.ge">ge</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>.<br/>
<span class="kwd">Variables</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.e1">e1</a></span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.e2">e2</a></span>: <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.A">A</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.sp">sp</a></span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="kwd">Variables</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.m1">m1</a></span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.m2">m2</a></span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.env_lessdef">env_lessdef</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.e1">e1</a></span> <span class="id"><a href="compcert.common.Events.html#x">x</a></span>) (<span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.e2">e2</a></span> <span class="id"><a href="compcert.common.Events.html#x">x</a></span>).<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="EVAL_BUILTIN_ARG_LESSDEF.mem_extends">mem_extends</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.m2">m2</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_builtin_arg_lessdef">eval_builtin_arg_lessdef</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">v1</span>, <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.e1">e1</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.sp">sp</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#a">a</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>, <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.e2">e2</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.sp">sp</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.m2">m2</a></span> <span class="id"><a href="compcert.common.Events.html#a">a</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Events.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Events.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1332')">Proof.</div>
<div class="proofscript" id="proof1332">
&nbsp;&nbsp;<span class="tactic">induction</span> 1.<br/>
- <span class="id">exists</span> (<span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.e2">e2</a></span> <span class="id">x</span>); <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_extends">Mem.loadv_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">v</span>' &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_extends">Mem.loadv_extends</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">v</span>' &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">IHeval_builtin_arg1</span> <span class="kwd">as</span> (<span class="id">vhi</span>' &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHeval_builtin_arg2</span> <span class="kwd">as</span> (<span class="id">vlo</span>' &amp; <span class="id">R</span> &amp; <span class="id">S</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.longofwords_lessdef">Val.longofwords_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">IHeval_builtin_arg1</span> <span class="kwd">as</span> (<span class="id">vhi</span>' &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHeval_builtin_arg2</span> <span class="kwd">as</span> (<span class="id">vlo</span>' &amp; <span class="id">R</span> &amp; <span class="id">S</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Values.html#Val.add_lessdef">Val.add_lessdef</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.addl_lessdef">Val.addl_lessdef</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_builtin_args_lessdef">eval_builtin_args_lessdef</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">al</span> <span class="id">vl1</span>, <span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.e1">e1</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.sp">sp</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.m1">m1</a></span> <span class="id"><a href="compcert.common.Events.html#al">al</a></span> <span class="id"><a href="compcert.common.Events.html#vl1">vl1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">vl2</span>, <span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.ge">ge</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.e2">e2</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.sp">sp</a></span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF.m2">m2</a></span> <span class="id"><a href="compcert.common.Events.html#al">al</a></span> <span class="id"><a href="compcert.common.Events.html#vl2">vl2</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.common.Events.html#vl1">vl1</a></span> <span class="id"><a href="compcert.common.Events.html#vl2">vl2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1333')">Proof.</div>
<div class="proofscript" id="proof1333">
&nbsp;&nbsp;<span class="tactic">induction</span> 1.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#eval_builtin_arg_lessdef">eval_builtin_arg_lessdef</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">v1</span>' &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHlist_forall2</span> <span class="kwd">as</span> (<span class="id">vl</span>' &amp; <span class="id">U</span> &amp; <span class="id">V</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">v1</span>'::<span class="id">vl</span>'); <span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Events.html#EVAL_BUILTIN_ARG_LESSDEF">EVAL_BUILTIN_ARG_LESSDEF</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
