
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Memory</title>
<meta name="description" content="Documentation of Coq module Memory" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Memory</h1>
<div class="coq">
<br/>
<div class="doc">This file develops the memory model that is used in the dynamic
  semantics of all the languages used in the compiler.
  It defines a type <span class="bracket"><span class="id">mem</span></span> of memory states, the following 4 basic
  operations over memory states, and their properties:
<ul>
<li>
 <span class="bracket"><span class="id">load</span></span>: read a memory chunk at a given address;
</li>
<li>
 <span class="bracket"><span class="id">store</span></span>: store a memory chunk at a given address;
</li>
<li>
 <span class="bracket"><span class="id">alloc</span></span>: allocate a fresh memory block;
</li>
<li>
 <span class="bracket"><span class="id">free</span></span>: invalidate a memory block.
</li>
</ul>
</div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zwf.html">Zwf</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Axioms.html">Axioms</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.lib.Intv.html">Intv</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.x86_64.Archi.html">Archi</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="compcert.common.Memdata.html">Memdata</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="compcert.common.Memtype.html">Memtype</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.sflib.html">sflib</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Unset</span> <span class="id">Elimination</span> <span class="id">Schemes</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Unset</span> <span class="id">Case</span> <span class="id">Analysis</span> <span class="id">Schemes</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "<span class="id">a</span> # <span class="id">b</span>" := (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id">b</span> <span class="id">a</span>) (<span class="tactic">at</span> <span class="id">level</span> 1).<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="Mem">Mem</a></span> &lt;: <span class="id"><a href="compcert.common.Memtype.html#MEM">MEM</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">perm_order</span>' (<span class="id">po</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>) (<span class="id">p</span>: <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#po">po</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">p</span>' =&gt; <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id">p</span>' <span class="id"><a href="compcert.common.Memory.html#p">p</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id">perm_order</span>'' (<span class="id">po1</span> <span class="id">po2</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#po1">po1</a></span>, <span class="id"><a href="compcert.common.Memory.html#po2">po2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">p1</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">p2</span> =&gt; <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id">p1</span> <span class="id">p2</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id">mem</span>' : <span class="kwd">Type</span> := <span class="id"><a name="Mem.mkmem">mkmem</a></span> {<br/>
&nbsp;&nbsp;<span class="id"><a name="Mem.mem_contents">mem_contents</a></span>: <span class="id"><a href="compcert.lib.Maps.html#PMap.t">PMap.t</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.t">ZMap.t</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>);  <span class="docright">(* <span class="bracket"><span class="id">block</span> -&gt; <span class="id">offset</span> -&gt; <span class="id">memval</span></span>  *)</span><br/>
&nbsp;&nbsp;<span class="id"><a name="Mem.mem_access">mem_access</a></span>: <span class="id"><a href="compcert.lib.Maps.html#PMap.t">PMap.t</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="compcert.common.Memtype.html#perm_kind">perm_kind</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a name="Mem.nextblock">nextblock</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="Mem.access_max">access_max</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id">perm_order</span>'' (<span class="id"><a href="compcert.common.Memory.html#mem_access">mem_access</a></span>#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span>) (<span class="id"><a href="compcert.common.Memory.html#mem_access">mem_access</a></span>#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a name="Mem.nextblock_noaccess">nextblock_noaccess</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span>, ~(<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#nextblock">nextblock</a></span>) -&gt; <span class="id"><a href="compcert.common.Memory.html#mem_access">mem_access</a></span>#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="Mem.contents_default">contents_default</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.common.Memory.html#mem_contents">mem_contents</a></span>#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span><br/>
}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.mem">mem</a></span> := <span class="id">mem</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.mkmem_ext">mkmem_ext</a></span>:<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">cont1</span> <span class="id">cont2</span> <span class="id">acc1</span> <span class="id">acc2</span> <span class="id">next1</span> <span class="id">next2</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">c1</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#cont1">cont1</a></span>=<span class="id"><a href="compcert.common.Memory.html#cont2">cont2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#acc1">acc1</a></span>=<span class="id"><a href="compcert.common.Memory.html#acc2">acc2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#next1">next1</a></span>=<span class="id"><a href="compcert.common.Memory.html#next2">next2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> <span class="id"><a href="compcert.common.Memory.html#cont1">cont1</a></span> <span class="id"><a href="compcert.common.Memory.html#acc1">acc1</a></span> <span class="id"><a href="compcert.common.Memory.html#next1">next1</a></span> <span class="id"><a href="compcert.common.Memory.html#a1">a1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#c1">c1</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> <span class="id"><a href="compcert.common.Memory.html#cont2">cont2</a></span> <span class="id"><a href="compcert.common.Memory.html#acc2">acc2</a></span> <span class="id"><a href="compcert.common.Memory.html#next2">next2</a></span> <span class="id"><a href="compcert.common.Memory.html#a2">a2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#c2">c2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1530')">Proof.</div>
<div class="proofscript" id="proof1530">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">subst</span>. <span class="tactic">f_equal</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#proof_irr">proof_irr</a></span>.<br/>
Qed.</div>
<br/>
<h1> Validity of blocks and accesses </h1>
<br/>
<div class="doc">A block address is valid if it was previously allocated. It remains valid
  even after being freed. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.valid_block">valid_block</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) := <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_not_valid_diff">valid_not_valid_diff</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> -&gt; ~(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">b</span>') -&gt; <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> &lt;&gt; <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1531')">Proof.</div>
<div class="proofscript" id="proof1531">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">subst</span> <span class="id">b</span>'. <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">valid_not_valid_diff</span>: <span class="id">mem</span>.<br/>
<br/>
<div class="doc">Permissions </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.perm">perm</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">k</span>: <span class="id"><a href="compcert.common.Memtype.html#perm_kind">perm_kind</a></span>) (<span class="id">p</span>: <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id">perm_order</span>' (<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span>) <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_implies">perm_implies</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p1</span> <span class="id">p2</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p1">p1</a></span> -&gt; <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#p1">p1</a></span> <span class="id"><a href="compcert.common.Memory.html#p2">p2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p2">p2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1532')">Proof.</div>
<div class="proofscript" id="proof1532">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>, <span class="id">perm_order</span>'; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)#<span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memtype.html#perm_order_trans">perm_order_trans</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">perm_implies</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_cur_max">perm_cur_max</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1533')">Proof.</div>
<div class="proofscript" id="proof1533">
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">po1</span> <span class="id">po2</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">perm_order</span>' <span class="id"><a href="compcert.common.Memory.html#po2">po2</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id">perm_order</span>'' <span class="id"><a href="compcert.common.Memory.html#po1">po1</a></span> <span class="id"><a href="compcert.common.Memory.html#po2">po2</a></span> -&gt; <span class="id">perm_order</span>' <span class="id"><a href="compcert.common.Memory.html#po1">po1</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">perm_order</span>', <span class="id">perm_order</span>''. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">po2</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">po1</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memtype.html#perm_order_trans">perm_order_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span>). <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_cur">perm_cur</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1534')">Proof.</div>
<div class="proofscript" id="proof1534">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">k</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_max">perm_max</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1535')">Proof.</div>
<div class="proofscript" id="proof1535">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">k</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">perm_cur</span> <span class="id">perm_max</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_valid_block">perm_valid_block</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1536')">Proof.</div>
<div class="proofscript" id="proof1536">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> <span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>)).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)#<span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">perm_valid_block</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Mem.perm_order_dec">perm_order_dec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p1</span> <span class="id">p2</span>, {<span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#p1">p1</a></span> <span class="id"><a href="compcert.common.Memory.html#p2">p2</a></span>} + {~<span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#p1">p1</a></span> <span class="id"><a href="compcert.common.Memory.html#p2">p2</a></span>}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1537')">Proof.</div>
<div class="proofscript" id="proof1537">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">p1</span>; <span class="tactic">destruct</span> <span class="id">p2</span>; (<span class="id">left</span>; <span class="id">constructor</span>) || (<span class="id">right</span>; <span class="tactic">intro</span> <span class="id">PO</span>; <span class="tactic">inversion</span> <span class="id">PO</span>).<br/>
Defined.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">perm_order</span>'<span class="id">_dec</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">op</span> <span class="id">p</span>, {<span class="id">perm_order</span>' <span class="id"><a href="compcert.common.Memory.html#op">op</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>} + {~<span class="id">perm_order</span>' <span class="id"><a href="compcert.common.Memory.html#op">op</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1538')">Proof.</div>
<div class="proofscript" id="proof1538">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">op</span>; <span class="tactic">unfold</span> <span class="id">perm_order</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_order_dec">perm_order_dec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">tauto</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_dec">perm_dec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, {<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>} + {~ <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1539')">Proof.</div>
<div class="proofscript" id="proof1539">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">perm_order</span>'<span class="id">_dec</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.range_perm">range_perm</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">k</span>: <span class="id"><a href="compcert.common.Memtype.html#perm_kind">perm_kind</a></span>) (<span class="id">p</span>: <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.range_perm_implies">range_perm_implies</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">k</span> <span class="id">p1</span> <span class="id">p2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p1">p1</a></span> -&gt; <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#p1">p1</a></span> <span class="id"><a href="compcert.common.Memory.html#p2">p2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p2">p2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1540')">Proof.</div>
<div class="proofscript" id="proof1540">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.range_perm_cur">range_perm_cur</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1541')">Proof.</div>
<div class="proofscript" id="proof1541">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.range_perm_max">range_perm_max</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1542')">Proof.</div>
<div class="proofscript" id="proof1542">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">range_perm_implies</span> <span class="id">range_perm_cur</span> <span class="id">range_perm_max</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.range_perm_dec">range_perm_dec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">k</span> <span class="id">p</span>, {<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>} + {~ <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1543')">Proof.</div>
<div class="proofscript" id="proof1543">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">lo</span> <span class="kwd">using</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_induction_type">well_founded_induction_type</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zwf.html#Zwf_up_well_founded">Zwf_up_well_founded</a></span> <span class="id">hi</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">lo</span> <span class="id">hi</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_dec">perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">k</span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">H</span> (<span class="id">lo</span> + 1)). <span class="tactic">red</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">lo</span> <span class="id">ofs</span>). <span class="tactic">congruence</span>. <span class="tactic">apply</span> <span class="id">r</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">n</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">n</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">omegaContradiction</span>.<br/>
Defined.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">valid_access</span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span></span> holds if a memory access
    of the given chunk is possible in <span class="bracket"><span class="id">m</span></span> at address <span class="bracket"><span class="id">b</span>, <span class="id">ofs</span></span>
    with current permissions <span class="bracket"><span class="id">p</span></span>.
    This means:
<ul>
<li>
 The range of bytes accessed all have current permission <span class="bracket"><span class="id">p</span></span>.
</li>
<li>
 The offset <span class="bracket"><span class="id">ofs</span></span> is aligned.
</li>
</ul>
</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.valid_access">valid_access</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">p</span>: <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span><br/>
&nbsp;&nbsp;/\ (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> | <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_implies">valid_access_implies</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p1</span> <span class="id">p2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p1">p1</a></span> -&gt; <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#p1">p1</a></span> <span class="id"><a href="compcert.common.Memory.html#p2">p2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p2">p2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1544')">Proof.</div>
<div class="proofscript" id="proof1544">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_freeable_any">valid_access_freeable_any</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1545')">Proof.</div>
<div class="proofscript" id="proof1545">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_implies">valid_access_implies</a></span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">valid_access_implies</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_valid_block">valid_access_valid_block</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1546')">Proof.</div>
<div class="proofscript" id="proof1546">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">valid_access_valid_block</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.valid_access_perm">valid_access_perm</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1547')">Proof.</div>
<div class="proofscript" id="proof1547">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">perm_cur</a></span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>). <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.valid_access_compat">valid_access_compat</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">chunk1</span> <span class="id">chunk2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span> = <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span> &lt;= <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>-&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1548')">Proof.</div>
<div class="proofscript" id="proof1548">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_trans">Z.divide_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memdata.html#align_le_divides">align_le_divides</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.valid_access_dec">valid_access_dec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;{<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>} + {~ <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1549')">Proof.</div>
<div class="proofscript" id="proof1549">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Zdivide_dec">Zdivide_dec</a></span> (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id">chunk</span>) <span class="id">ofs</span> (<span class="id"><a href="compcert.common.Memdata.html#align_chunk_pos">align_chunk_pos</a></span> <span class="id">chunk</span>)).<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intro</span> <span class="id">V</span>; <span class="id">inv</span> <span class="id">V</span>; <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intro</span> <span class="id">V</span>; <span class="id">inv</span> <span class="id">V</span>; <span class="id">contradiction</span>.<br/>
Defined.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">valid_pointer</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span></span> returns <span class="bracket"><span class="id">true</span></span> if the address <span class="bracket"><span class="id">b</span>, <span class="id">ofs</span></span>
  is nonempty in <span class="bracket"><span class="id">m</span></span> and <span class="bracket"><span class="id">false</span></span> if it is empty. </div>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.valid_pointer">valid_pointer</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm_dec">perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_pointer_nonempty_perm">valid_pointer_nonempty_perm</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> &lt;-&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1550')">Proof.</div>
<div class="proofscript" id="proof1550">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_dec">perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>); <span class="tactic">simpl</span>;<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> &lt;-&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1551')">Proof.</div>
<div class="proofscript" id="proof1551">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_nonempty_perm">valid_pointer_nonempty_perm</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">simpl</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">replace</span> <span class="id">ofs0</span> <span class="kwd">with</span> <span class="id">ofs</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_1_l">Z.divide_1_l</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">C allows pointers one past the last element of an array.  These are not
  valid according to the previously defined <span class="bracket"><span class="id">valid_pointer</span></span>. The property
  <span class="bracket"><span class="id">weak_valid_pointer</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span></span> holds if address <span class="bracket"><span class="id">b</span>, <span class="id">ofs</span></span> is a valid pointer
  in <span class="bracket"><span class="id">m</span></span>, or a pointer one past a valid block in <span class="bracket"><span class="id">m</span></span>.  </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.weak_valid_pointer">weak_valid_pointer</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> || <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> - 1).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.weak_valid_pointer_spec">weak_valid_pointer_spec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> &lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> - 1) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1552')">Proof.</div>
<div class="proofscript" id="proof1552">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span>. <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>.<br/>
Qed.</div>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.valid_pointer_implies">valid_pointer_implies</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1553')">Proof.</div>
<div class="proofscript" id="proof1553">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_spec">weak_valid_pointer_spec</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Operations over memory stores </h1>
<br/>
<div class="doc">The initial store </div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="Mem.empty">empty</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.init">PMap.init</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.init">ZMap.init</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PMap.init">PMap.init</a></span> (<span class="kwd">fun</span> <span class="id">ofs</span> <span class="id">k</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2%<span class="id">positive</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1554')">Next Obligation.</div>
<div class="proofscript" id="proof1554">
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gi">PMap.gi</a></span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1555')">Next Obligation.</div>
<div class="proofscript" id="proof1555">
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gi">PMap.gi</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1556')">Next Obligation.</div>
<div class="proofscript" id="proof1556">
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gi">PMap.gi</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Allocation of a fresh block with the given bounds.  Return an updated
  memory state and the address of the fresh block, which initially contains
  undefined cells.  Note that allocation never fails: we model an
  infinite memory. </div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="Mem.alloc">alloc</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#ZMap.init">ZMap.init</a></span> <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">ofs</span> <span class="id">k</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.succ">Pos.succ</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_</span> <span class="id">_</span> <span class="id">_</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1557')">Next Obligation.</div>
<div class="proofscript" id="proof1557">
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">lo</span> <span class="id">ofs</span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">hi</span>); <span class="tactic">red</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1558')">Next Obligation.</div>
<div class="proofscript" id="proof1558">
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>. <span class="tactic">elim</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_succ">Plt_succ</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess</a></span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1559')">Next Obligation.</div>
<div class="proofscript" id="proof1559">
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>)). <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Freeing a block between the given bounds.
  Return the updated memory state where the given range of the given block
  has been invalidated: future reads and writes to this
  range will fail.  Requires freeable permission on the given range. </div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="Mem.unchecked_free">unchecked_free</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>): <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">ofs</span> <span class="id">k</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>) <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1560')">Next Obligation.</div>
<div class="proofscript" id="proof1560">
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">lo</span> <span class="id">ofs</span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">hi</span>). <span class="tactic">red</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1561')">Next Obligation.</div>
<div class="proofscript" id="proof1561">
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>). <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">lo</span> <span class="id">ofs</span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">hi</span>). <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1562')">Next Obligation.</div>
<div class="proofscript" id="proof1562">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.free">free</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span><br/>
&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Mem.free_list">free_list</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">l</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.Values.html#block">block</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) {<span class="kwd">struct</span> <span class="id">l</span>}: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#l">l</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span><br/>
&nbsp;&nbsp;| (<span class="id">b</span>, <span class="id">lo</span>, <span class="id">hi</span>) :: <span class="id">l</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' =&gt; <span class="id"><a href="compcert.common.Memory.html#free_list">free_list</a></span> <span class="id">m</span>' <span class="id">l</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Memory reads. </div>
<br/>
<div class="doc">Reading N adjacent bytes in a block content. </div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Mem.getN">getN</a></span> (<span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">c</span>: <span class="id"><a href="compcert.lib.Maps.html#ZMap.t">ZMap.t</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) {<span class="kwd">struct</span> <span class="id">n</span>}: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>' =&gt; <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span> :: <span class="id"><a href="compcert.common.Memory.html#getN">getN</a></span> <span class="id">n</span>' (<span class="id"><a href="compcert.common.Memory.html#p">p</a></span> + 1) <span class="id"><a href="compcert.common.Memory.html#c">c</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">load</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span></span> perform a read in memory state <span class="bracket"><span class="id">m</span></span>, at address
  <span class="bracket"><span class="id">b</span></span> and offset <span class="bracket"><span class="id">ofs</span></span>.  It returns the value of the memory chunk
  at that address.  <span class="bracket"><span class="id">None</span></span> is returned if the accessed bytes
  are not readable. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.load">load</a></span> (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span><br/>
&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span>) <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>)))<br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">loadv</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">addr</span></span> is similar, but the address and offset are given
  as a single value <span class="bracket"><span class="id">addr</span></span>, which must be a pointer value. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.loadv">loadv</a></span> (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">addr</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#addr">addr</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">loadbytes</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span></span> reads <span class="bracket"><span class="id">n</span></span> consecutive bytes starting at
  location <span class="bracket">(<span class="id">b</span>, <span class="id">ofs</span>)</span>.  Returns <span class="bracket"><span class="id">None</span></span> if the accessed locations are
  not readable. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.loadbytes">loadbytes</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span> <span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span><br/>
&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z">nat_of_Z</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>) <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>))<br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<div class="doc">Memory stores. </div>
<br/>
<div class="doc">Writing N adjacent bytes in a block content. </div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="Mem.setN">setN</a></span> (<span class="id">vl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) (<span class="id">p</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">c</span>: <span class="id"><a href="compcert.lib.Maps.html#ZMap.t">ZMap.t</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) {<span class="kwd">struct</span> <span class="id">vl</span>}: <span class="id"><a href="compcert.lib.Maps.html#ZMap.t">ZMap.t</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="compcert.common.Memory.html#c">c</a></span><br/>
&nbsp;&nbsp;| <span class="id">v</span> :: <span class="id">vl</span>' =&gt; <span class="id"><a href="compcert.common.Memory.html#setN">setN</a></span> <span class="id">vl</span>' (<span class="id"><a href="compcert.common.Memory.html#p">p</a></span> + 1) (<span class="id"><a href="compcert.lib.Maps.html#ZMap.set">ZMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id">v</span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Mem.setN_other">setN_other</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">c</span> <span class="id">p</span> <span class="id">q</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#r">r</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span>) -&gt; <span class="id"><a href="compcert.common.Memory.html#r">r</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#q">q</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>) = <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1563')">Proof.</div>
<div class="proofscript" id="proof1563">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vl</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">length</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">q</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.set">ZMap.set</a></span> <span class="id">p</span> <span class="id">a</span> <span class="id">c</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHvl</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gso">ZMap.gso</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#not_eq_sym">not_eq_sym</a></span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Mem.setN_outside">setN_outside</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">c</span> <span class="id">p</span> <span class="id">q</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#q">q</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> &gt;= <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>) = <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1564')">Proof.</div>
<div class="proofscript" id="proof1564">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_other">setN_other</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Mem.getN_setN_same">getN_setN_same</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">p</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span>) <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>) = <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1565')">Proof.</div>
<div class="proofscript" id="proof1565">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vl</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gss">ZMap.gss</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHvl</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Mem.getN_exten">getN_exten</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c1</span> <span class="id">c2</span> <span class="id">n</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> -&gt; <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> <span class="id"><a href="compcert.common.Memory.html#c1">c1</a></span> = <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> <span class="id"><a href="compcert.common.Memory.html#c2">c2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c1">c1</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c2">c2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1566')">Proof.</div>
<div class="proofscript" id="proof1566">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">omega</span>. <span class="tactic">apply</span> <span class="id">IHn</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Mem.getN_setN_disjoint">getN_setN_disjoint</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">q</span> <span class="id">c</span> <span class="id">n</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Intv.html#disjoint">Intv.disjoint</a></span> (<span class="id"><a href="compcert.common.Memory.html#p">p</a></span>, <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>) (<span class="id"><a href="compcert.common.Memory.html#q">q</a></span>, <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>) = <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1567')">Proof.</div>
<div class="proofscript" id="proof1567">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_exten">getN_exten</a></span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_other">setN_other</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">r</span>. <span class="id">eelim</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Mem.getN_setN_outside">getN_setN_outside</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">q</span> <span class="id">c</span> <span class="id">n</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#p">p</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span>) &lt;= <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>) = <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1568')">Proof.</div>
<div class="proofscript" id="proof1568">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_disjoint">getN_setN_disjoint</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Intv.html#disjoint_range">Intv.disjoint_range</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Mem.setN_default">setN_default</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">q</span> <span class="id">c</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1569')">Proof.</div>
<div class="proofscript" id="proof1569">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">IHvl</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">store</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span></span> perform a write in memory state <span class="bracket"><span class="id">m</span></span>.
  Value <span class="bracket"><span class="id">v</span></span> is stored at address <span class="bracket"><span class="id">b</span></span> and offset <span class="bracket"><span class="id">ofs</span></span>.
  Return the updated memory store, or <span class="bracket"><span class="id">None</span></span> if the accessed bytes
  are not writable. </div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="Mem.store">store</a></span> (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">v</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>) <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1570')">Next Obligation.</div>
<div class="proofscript" id="proof1570">
 <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1571')">Next Obligation.</div>
<div class="proofscript" id="proof1571">
 <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess</a></span>; <span class="tactic">auto</span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1572')">Next Obligation.</div>
<div class="proofscript" id="proof1572">
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_default">setN_default</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">storev</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">addr</span> <span class="id">v</span></span> is similar, but the address and offset are given
  as a single value <span class="bracket"><span class="id">addr</span></span>, which must be a pointer value. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.storev">storev</a></span> (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">addr</span> <span class="id">v</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#addr">addr</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) <span class="id"><a href="compcert.common.Memory.html#v">v</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">storebytes</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes</span></span> stores the given list of bytes <span class="bracket"><span class="id">bytes</span></span>
  starting at location <span class="bracket">(<span class="id">b</span>, <span class="id">ofs</span>)</span>.  Returns updated memory state
  or <span class="bracket"><span class="id">None</span></span> if the accessed locations are not writable. </div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="Mem.storebytes">storebytes</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">bytes</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>)) <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;<span class="kwd">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1573')">Next Obligation.</div>
<div class="proofscript" id="proof1573">
 <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1574')">Next Obligation.</div>
<div class="proofscript" id="proof1574">
 <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess</a></span>; <span class="tactic">auto</span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1575')">Next Obligation.</div>
<div class="proofscript" id="proof1575">
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_default">setN_default</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">drop_perm</span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">p</span></span> sets the max permissions of the byte range
    <span class="bracket">(<span class="id">b</span>, <span class="id">lo</span>) ... (<span class="id">b</span>, <span class="id">hi</span> - 1)</span> to <span class="bracket"><span class="id">p</span></span>.  These bytes must have current permissions
    <span class="bracket"><span class="id">Freeable</span></span> in the initial memory state <span class="bracket"><span class="id">m</span></span>.
    Returns updated memory state, or <span class="bracket"><span class="id">None</span></span> if insufficient permissions. </div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="Mem.drop_perm">drop_perm</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">p</span>: <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> <span class="kwd">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">mkmem</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">ofs</span> <span class="id">k</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span>) <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1576')">Next Obligation.</div>
<div class="proofscript" id="proof1576">
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>). <span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">lo</span> <span class="id">ofs</span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">hi</span>). <span class="tactic">red</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.access_max">access_max</a></span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1577')">Next Obligation.</div>
<div class="proofscript" id="proof1577">
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess</a></span> <span class="id">m</span> <span class="id">b0</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">H0</span>). <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>). <span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">lo</span> <span class="id">ofs</span>). <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">hi</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">perm_cur</a></span>. <span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof1578')">Next Obligation.</div>
<div class="proofscript" id="proof1578">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">contents_default</a></span>.<br/>
Qed.</div>
<br/>
<h1> Properties of the memory operations </h1>
<br/>
<div class="doc">Properties of the empty store. </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.nextblock_empty">nextblock_empty</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">empty</a></span> = 2%<span class="id">positive</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1579')">Proof.</div>
<div class="proofscript" id="proof1579">
 <span class="tactic">reflexivity</span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_empty">perm_empty</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, ~<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">empty</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1580')">Proof.</div>
<div class="proofscript" id="proof1580">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.empty">empty</a></span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gi">PMap.gi</a></span>. <span class="tactic">simpl</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_empty">valid_access_empty</a></span>: <span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>, ~<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">empty</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1581')">Proof.</div>
<div class="proofscript" id="proof1581">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_empty">perm_empty</a></span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id">p</span>). <span class="tactic">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>); <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">load</span></span> </h2>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_load">valid_access_load</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1582')">Proof.</div>
<div class="proofscript" id="proof1582">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">econstructor</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_valid_access">load_valid_access</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1583')">Proof.</div>
<div class="proofscript" id="proof1583">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">v</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.load_result">load_result</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span>) <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1584')">Proof.</div>
<div class="proofscript" id="proof1584">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">v</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">load_valid_access</span> <span class="id">valid_access_load</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_type">load_type</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.has_type">Val.has_type</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> (<span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1585')">Proof.</div>
<div class="proofscript" id="proof1585">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span>; <span class="tactic">eauto</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_type">decode_val_type</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_cast">load_cast</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> =&gt; <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> 8 <span class="id"><a href="compcert.common.Memory.html#v">v</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> =&gt; <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> 8 <span class="id"><a href="compcert.common.Memory.html#v">v</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> =&gt; <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> 16 <span class="id"><a href="compcert.common.Memory.html#v">v</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> =&gt; <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> 16 <span class="id"><a href="compcert.common.Memory.html#v">v</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1586')">Proof.</div>
<div class="proofscript" id="proof1586">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">l</span> := <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>) <span class="id">ofs</span> <span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">subst</span> <span class="id">v</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_cast">decode_val_cast</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_int8_signed_unsigned">load_int8_signed_unsigned</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> 8) (<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1587')">Proof.</div>
<div class="proofscript" id="proof1587">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">cl</span> := <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span>) <span class="id">ofs</span> <span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>; <span class="tactic">auto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">cl</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">decEq</span>. <span class="id">decEq</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext_zero_ext">Int.sign_ext_zero_ext</a></span>. <span class="tactic">auto</span>. <span class="tactic">compute</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_int16_signed_unsigned">load_int16_signed_unsigned</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> 16) (<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1588')">Proof.</div>
<div class="proofscript" id="proof1588">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">cl</span> := <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span>) <span class="id">ofs</span> <span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>; <span class="tactic">auto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#proj_bytes">proj_bytes</a></span> <span class="id">cl</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">decEq</span>. <span class="id">decEq</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext_zero_ext">Int.sign_ext_zero_ext</a></span>. <span class="tactic">auto</span>. <span class="tactic">compute</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">loadbytes</span></span> </h2>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.range_perm_loadbytes">range_perm_loadbytes</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">len</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#len">len</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">bytes</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#len">len</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1589')">Proof.</div>
<div class="proofscript" id="proof1589">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">econstructor</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_range_perm">loadbytes_range_perm</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">len</span> <span class="id">bytes</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#len">len</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#len">len</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1590')">Proof.</div>
<div class="proofscript" id="proof1590">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">bytes</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id">len</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>). <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_load">loadbytes_load</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> | <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1591')">Proof.</div>
<div class="proofscript" id="proof1591">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_loadbytes">load_loadbytes</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">bytes</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1592')">Proof.</div>
<div class="proofscript" id="proof1592">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_valid_access">load_valid_access</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>) <span class="id">ofs</span> <span class="id">m</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.getN_length">getN_length</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">n</span> <span class="id">p</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>) = <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1593')">Proof.</div>
<div class="proofscript" id="proof1593">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">auto</span>. <span class="id">decEq</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_length">loadbytes_length</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span> <span class="id">bytes</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> = <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z">nat_of_Z</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1594')">Proof.</div>
<div class="proofscript" id="proof1594">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_length">getN_length</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_empty">loadbytes_empty</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#n">n</a></span> &lt;= 0 -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1595')">Proof.</div>
<div class="proofscript" id="proof1595">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_neg">nat_of_Z_neg</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">omegaContradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.getN_concat">getN_concat</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> + <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span>)%<span class="id">nat</span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span> ++ <span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span> (<span class="id"><a href="compcert.common.Memory.html#p">p</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span>) <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1596')">Proof.</div>
<div class="proofscript" id="proof1596">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n1</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">decEq</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>. <span class="tactic">simpl</span>. <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">p</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n1</span>)) <span class="kwd">with</span> ((<span class="id">p</span> + 1) + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">n1</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_concat">loadbytes_concat</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">bytes1</span> <span class="id">bytes2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span>) <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> &gt;= 0 -&gt; <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span> &gt;= 0 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> + <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> ++ <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1597')">Proof.</div>
<div class="proofscript" id="proof1597">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id">n1</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> (<span class="id">ofs</span> + <span class="id">n1</span>) (<span class="id">ofs</span> + <span class="id">n1</span> + <span class="id">n2</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_plus">nat_of_Z_plus</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_concat">getN_concat</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ofs0</span> &lt; <span class="id">ofs</span> + <span class="id">n1</span> \/ <span class="id">ofs0</span> &gt;= <span class="id">ofs</span> + <span class="id">n1</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>. <span class="tactic">apply</span> <span class="id">r</span>; <span class="tactic">omega</span>. <span class="tactic">apply</span> <span class="id">r0</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_split">loadbytes_split</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n1</span> <span class="id">n2</span> <span class="id">bytes</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> + <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> &gt;= 0 -&gt; <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span> &gt;= 0 -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">bytes1</span>, <span class="id">exists</span> <span class="id">bytes2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span>) <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> = <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> ++ <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1598')">Proof.</div>
<div class="proofscript" id="proof1598">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + (<span class="id">n1</span> + <span class="id">n2</span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_plus">nat_of_Z_plus</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_concat">getN_concat</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">reflexivity</span>. <span class="tactic">split</span>. <span class="tactic">reflexivity</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">r</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">r</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_rep">load_rep</a></span>:<br/>
&nbsp;<span class="kwd">forall</span> <span class="id">ch</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v1</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">z</span>, 0 &lt;= <span class="id"><a href="compcert.common.Memory.html#z">z</a></span> &lt; <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#ch">ch</a></span> -&gt; <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#z">z</a></span>) <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#z">z</a></span>) <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#ch">ch</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#ch">ch</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> = <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1599')">Proof.</div>
<div class="proofscript" id="proof1599">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">remember</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">ch</span>) <span class="kwd">as</span> <span class="id">n</span>; <span class="tactic">clear</span> <span class="id">Heqn</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">ofs</span> <span class="id">H</span>; <span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">ofs</span> <span class="kwd">with</span> (<span class="id">ofs</span>+0) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHn</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_assoc">Z.add_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_int64_split">load_int64_split</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v1</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + 4) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.longofwords">Val.longofwords</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1600')">Proof.</div>
<div class="proofscript" id="proof1600">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_valid_access">load_valid_access</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_loadbytes">load_loadbytes</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">bytes</span> [<span class="id">LB</span> <span class="id">EQ</span>]].<br/>
&nbsp;&nbsp;<span class="id">change</span> 8 <span class="kwd">with</span> (4 + 4) <span class="kwd">in</span> <span class="id">LB</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_split">loadbytes_split</a></span>. <span class="id">eexact</span> <span class="id">LB</span>. <span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">bytes1</span> &amp; <span class="id">bytes2</span> &amp; <span class="id">LB1</span> &amp; <span class="id">LB2</span> &amp; <span class="id">APP</span>).<br/>
&nbsp;&nbsp;<span class="id">change</span> 4 <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span>) <span class="kwd">in</span> <span class="id">LB1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_load">loadbytes_load</a></span>. <span class="id">eexact</span> <span class="id">LB1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zdivides_trans">Zdivides_trans</a></span> <span class="kwd">with</span> 8; <span class="tactic">auto</span>. <span class="id">exists</span> 2; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> 4 <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span>) <span class="kwd">in</span> <span class="id">LB2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_load">loadbytes_load</a></span>. <span class="id">eexact</span> <span class="id">LB2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zdivides_trans">Zdivides_trans</a></span> <span class="kwd">with</span> 8; <span class="tactic">auto</span>. <span class="id">exists</span> 2; <span class="tactic">auto</span>. <span class="id">exists</span> 1; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">L2</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="kwd">then</span> <span class="id">bytes1</span> <span class="kwd">else</span> <span class="id">bytes2</span>));<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="kwd">then</span> <span class="id">bytes2</span> <span class="kwd">else</span> <span class="id">bytes1</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">EQ</span>. <span class="tactic">rewrite</span> <span class="id">APP</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_int64">decode_val_int64</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">loadbytes_length</a></span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_length">loadbytes_length</a></span>; <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.addressing_int64_split">addressing_int64_split</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;(8 | <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int">Ptrofs.of_int</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 4))) = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> + 4.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1601')">Proof.</div>
<div class="proofscript" id="proof1601">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_unsigned">Ptrofs.add_unsigned</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int">Ptrofs.of_int</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 4))) <span class="kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 4))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">symmetry</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.agree32_of_int">Ptrofs.agree32_of_int</a></span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 4)) <span class="kwd">with</span> 4.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Zdivide_interval">Zdivide_interval</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">i</span>) <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.modulus">Ptrofs.modulus</a></span> 8).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range">Ptrofs.unsigned_range</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zwordsize">Ptrofs.zwordsize</a></span> - 3)).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.modulus">Ptrofs.modulus</a></span>, <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zwordsize">Ptrofs.zwordsize</a></span>, <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.wordsize">Ptrofs.wordsize</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Wordsize_Ptrofs.wordsize">Wordsize_Ptrofs.wordsize</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadv_int64_split">loadv_int64_split</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">a</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v1</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#a">a</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> <span class="id"><a href="compcert.common.Memory.html#a">a</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 4))) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.longofwords">Val.longofwords</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1602')">Proof.</div>
<div class="proofscript" id="proof1602">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_int64_split">load_int64_split</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">v1</span> &amp; <span class="id">v2</span> &amp; <span class="id">L1</span> &amp; <span class="id">L2</span> &amp; <span class="id">EQ</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span>; <span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">NV</span>: <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.of_int">Ptrofs.of_int</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 4))) = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">i</span> + 4).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.addressing_int64_split">addressing_int64_split</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_valid_access">load_valid_access</a></span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v1</span>, <span class="id">v2</span>.<br/>
<span class="id">Opaque</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">NV</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">store</span></span> </h2>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_store">valid_access_store</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span> -&gt;<br/>
&nbsp;&nbsp;{ <span class="id">m2</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> | <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> }.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1603')">Proof.</div>
<div class="proofscript" id="proof1603">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m1</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">valid_access_store</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Mem.STORE">STORE</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.STORE.chunk">chunk</a></span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.STORE.m1">m1</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.STORE.b">b</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.STORE.ofs">ofs</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.STORE.v">v</a></span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.STORE.m2">m2</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Mem.STORE.STORE">STORE</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.store_access">store_access</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1604')">Proof.</div>
<div class="proofscript" id="proof1604">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="kwd">in</span> <span class="id">STORE</span>. <span class="tactic">destruct</span> ( <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>); <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.store_mem_contents">store_mem_contents</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> = <span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span>) <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span>) <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1605')">Proof.</div>
<div class="proofscript" id="proof1605">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="kwd">in</span> <span class="id">STORE</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>); <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_store_1">perm_store_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1606')">Proof.</div>
<div class="proofscript" id="proof1606">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_access">store_access</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_store_2">perm_store_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1607')">Proof.</div>
<div class="proofscript" id="proof1607">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="kwd">in</span> *.  <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_access">store_access</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">perm_store_1</span> <span class="id">perm_store_2</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.nextblock_store">nextblock_store</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1608')">Proof.</div>
<div class="proofscript" id="proof1608">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="kwd">in</span> <span class="id">STORE</span>. <span class="tactic">destruct</span> ( <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>); <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_valid_block_1">store_valid_block_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id">b</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1609')">Proof.</div>
<div class="proofscript" id="proof1609">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">nextblock_store</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_valid_block_2">store_valid_block_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id">b</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1610')">Proof.</div>
<div class="proofscript" id="proof1610">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">nextblock_store</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">store_valid_block_1</span> <span class="id">store_valid_block_2</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_valid_access_1">store_valid_access_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1611')">Proof.</div>
<div class="proofscript" id="proof1611">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">try</span> <span class="tactic">red</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_valid_access_2">store_valid_access_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1612')">Proof.</div>
<div class="proofscript" id="proof1612">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">try</span> <span class="tactic">red</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_valid_access_3">store_valid_access_3</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1613')">Proof.</div>
<div class="proofscript" id="proof1613">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="kwd">in</span> <span class="id">STORE</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">store_valid_access_1</span> <span class="id">store_valid_access_2</span> <span class="id">store_valid_access_3</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_store_similar">load_store_similar</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>' = <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id">chunk</span>' &lt;= <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id">chunk</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>' /\ <span class="id"><a href="compcert.common.Memdata.html#decode_encode_val">decode_encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id">chunk</span>' <span class="id">v</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1614')">Proof.</div>
<div class="proofscript" id="proof1614">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_load">valid_access_load</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id">chunk</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_compat">valid_access_compat</a></span>. <span class="tactic">symmetry</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v</span>' <span class="id">LOAD</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>') <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span>)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_same">getN_setN_same</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_val_general">decode_encode_val_general</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj">Nat2Z.inj</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_store_similar_2">load_store_similar_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>' = <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id">chunk</span>' &lt;= <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id">chunk</span>' = <span class="id"><a href="compcert.common.AST.html#type_of_chunk">type_of_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id">chunk</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id">chunk</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1615')">Proof.</div>
<div class="proofscript" id="proof1615">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.load_store_similar">load_store_similar</a></span> <span class="id">chunk</span>') <span class="kwd">as</span> [<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">A</span>. <span class="id">decEq</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_encode_val_similar">decode_encode_val_similar</a></span> <span class="kwd">with</span> (<span class="id">chunk1</span> := <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span>); <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_store_same">load_store_same</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1616')">Proof.</div>
<div class="proofscript" id="proof1616">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_similar_2">load_store_similar_2</a></span>; <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_store_other">load_store_other</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;<span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span><br/>
&nbsp;&nbsp;\/ <span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>' &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span><br/>
&nbsp;&nbsp;\/ <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> &lt;= <span class="id">ofs</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id">chunk</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id">b</span>' <span class="id">ofs</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id">chunk</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1617')">Proof.</div>
<div class="proofscript" id="proof1617">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">decEq</span>. <span class="id">decEq</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span>). <span class="tactic">subst</span> <span class="id">b</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_outside">getN_setN_outside</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_store_same">loadbytes_store_same</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1618')">Proof.</div>
<div class="proofscript" id="proof1618">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>) <span class="tactic">by</span> <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z">nat_of_Z</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span>)) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.v">v</a></span>)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_same">getN_setN_same</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_store_other">loadbytes_store_other</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span><br/>
&nbsp;&nbsp;\/ <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> &lt;= 0<br/>
&nbsp;&nbsp;\/ <span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span><br/>
&nbsp;&nbsp;\/ <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.chunk">chunk</a></span> &lt;= <span class="id">ofs</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m2">m2</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1619')">Proof.</div>
<div class="proofscript" id="proof1619">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' (<span class="id">ofs</span>' + <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">decEq</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.STORE.b">b</a></span>). <span class="tactic">subst</span> <span class="id">b</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">n</span> 0) <span class="kwd">as</span> [<span class="id">z</span> | <span class="id">n0</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_neg">nat_of_Z_neg</a></span> <span class="id">_</span> <span class="id">z</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_outside">getN_setN_outside</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span>. <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intro</span>; <span class="tactic">elim</span> <span class="id">n0</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.setN_in">setN_in</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl</span> <span class="id">p</span> <span class="id">q</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#p">p</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>)) <span class="id"><a href="compcert.common.Memory.html#vl">vl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1620')">Proof.</div>
<div class="proofscript" id="proof1620">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">length</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">p</span> <span class="id">q</span>). <span class="tactic">subst</span> <span class="id">q</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gss">ZMap.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">apply</span> <span class="id">IHvl</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.getN_in">getN_in</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">c</span> <span class="id">q</span> <span class="id">n</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#p">p</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1621')">Proof.</div>
<div class="proofscript" id="proof1621">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">p</span> <span class="id">q</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">q</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">apply</span> <span class="id">IHn</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STORE">STORE</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">perm_store_1</span> <span class="id">perm_store_2</span>: <span class="id">mem</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">store_valid_block_1</span> <span class="id">store_valid_block_2</span>: <span class="id">mem</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">store_valid_access_1</span> <span class="id">store_valid_access_2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">store_valid_access_3</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.load_store_overlap">load_store_overlap</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m2</span> <span class="id">chunk</span>' <span class="id">ofs</span>' <span class="id">v</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id">chunk</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id">ofs</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>' &gt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &gt; <span class="id">ofs</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">mv1</span> <span class="id">mvl</span> <span class="id">mv1</span>' <span class="id">mvl</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#shape_encoding">shape_encoding</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> (<span class="id"><a href="compcert.common.Memory.html#mv1">mv1</a></span> :: <span class="id"><a href="compcert.common.Memory.html#mvl">mvl</a></span>)<br/>
&nbsp;&nbsp;/\  <span class="id"><a href="compcert.common.Memdata.html#shape_decoding">shape_decoding</a></span> <span class="id">chunk</span>' (<span class="id">mv1</span>' :: <span class="id">mvl</span>') <span class="id">v</span>'<br/>
&nbsp;&nbsp;/\  (   (<span class="id">ofs</span>' = <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> /\ <span class="id">mv1</span>' = <span class="id"><a href="compcert.common.Memory.html#mv1">mv1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ (<span class="id">ofs</span>' &gt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">mv1</span>' <span class="id"><a href="compcert.common.Memory.html#mvl">mvl</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ (<span class="id">ofs</span>' &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memory.html#mv1">mv1</a></span> <span class="id">mvl</span>')).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1622')">Proof.</div>
<div class="proofscript" id="proof1622">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">c</span> := (<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id">m1</span>)#<span class="id">b</span>). <span class="tactic">intros</span> <span class="id">V</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat_pos">size_chunk_nat_pos</a></span> <span class="id">chunk</span>) <span class="kwd">as</span> [<span class="id">sz</span> <span class="id">SIZE</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat_pos">size_chunk_nat_pos</a></span> <span class="id">chunk</span>') <span class="kwd">as</span> [<span class="id">sz</span>' <span class="id">SIZE</span>'].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id">chunk</span> <span class="id">v</span>) <span class="kwd">as</span> [ | <span class="id">mv1</span> <span class="id">mvl</span>] <span class="id">eqn</span>:<span class="id">ENC</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="id">chunk</span> <span class="id">v</span>); <span class="tactic">rewrite</span> <span class="id">ENC</span>; <span class="tactic">simpl</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">c</span>' := <span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> (<span class="id">mv1</span>::<span class="id">mvl</span>) <span class="id">ofs</span> <span class="id">c</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">mv1</span>, <span class="id">mvl</span>, (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">ofs</span>' <span class="id">c</span>'), (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id">sz</span>' (<span class="id">ofs</span>' + 1) <span class="id">c</span>').<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">ENC</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_shape">encode_val_shape</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id">V</span>', <span class="id">SIZE</span>'. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_shape">decode_val_shape</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">ofs</span>' <span class="id">ofs</span>).<br/>
- <span class="tactic">subst</span> <span class="id">ofs</span>'. <span class="id">left</span>; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">unfold</span> <span class="id">c</span>'. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gss">ZMap.gss</a></span>.<br/>
- <span class="id">right</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">ofs</span>').<br/>
<span class="comment">(*&nbsp;If&nbsp;ofs&nbsp;&lt;&nbsp;ofs':&nbsp;&nbsp;the&nbsp;load&nbsp;reads&nbsp;(at&nbsp;ofs')&nbsp;a&nbsp;continuation&nbsp;byte&nbsp;from&nbsp;the&nbsp;write.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ofs&nbsp;&nbsp;&nbsp;ofs'&nbsp;&nbsp;&nbsp;ofs+|chunk|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-------------------]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;write<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-------------------]&nbsp;&nbsp;read<br/>
*)</span><br/>
+ <span class="id">left</span>; <span class="tactic">split</span>. <span class="tactic">omega</span>. <span class="tactic">unfold</span> <span class="id">c</span>'. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_in">setN_in</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id">mv1</span> :: <span class="id">mvl</span>)) = <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> &lt;- <span class="id">ENC</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">length</span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;If&nbsp;ofs&nbsp;&gt;&nbsp;ofs':&nbsp;&nbsp;the&nbsp;load&nbsp;reads&nbsp;(at&nbsp;ofs)&nbsp;the&nbsp;first&nbsp;byte&nbsp;from&nbsp;the&nbsp;write.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ofs'&nbsp;&nbsp;&nbsp;ofs&nbsp;&nbsp;&nbsp;ofs'+|chunk'|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[-------------------]&nbsp;&nbsp;write<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[----------------]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read<br/>
*)</span><br/>
+ <span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">omega</span>. <span class="tactic">replace</span> <span class="id">mv1</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">ofs</span> <span class="id">c</span>').<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_in">getN_in</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.succ">Z.succ</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">sz</span>')).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="tactic">rewrite</span> <span class="id">SIZE</span>'. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">c</span>'. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gss">ZMap.gss</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.compat_pointer_chunks">compat_pointer_chunks</a></span> (<span class="id">chunk1</span> <span class="id">chunk2</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span>, <span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| (<span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> | <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span>), (<span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> | <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| (<span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> | <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>), (<span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> | <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.compat_pointer_chunks_true">compat_pointer_chunks_true</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk1</span> <span class="id">chunk2</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span> = <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span> = <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span> = <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span> = <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span> = <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span> = <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span> = <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span> = <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#quantity_chunk">quantity_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span> = <span class="id"><a href="compcert.common.Memdata.html#quantity_chunk">quantity_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.compat_pointer_chunks">compat_pointer_chunks</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1623')">Proof.</div>
<div class="proofscript" id="proof1623">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">P</span>|[<span class="id">P</span>|[<span class="id">P</span>|<span class="id">P</span>]]]; <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">Q</span>|[<span class="id">Q</span>|[<span class="id">Q</span>|<span class="id">Q</span>]]];<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="tactic">red</span>; <span class="tactic">auto</span>; <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_pointer_store">load_pointer_store</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m2</span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">v_b</span> <span class="id">v_o</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id">chunk</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id">b</span>' <span class="id">ofs</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#v_b">v_b</a></span> <span class="id"><a href="compcert.common.Memory.html#v_o">v_o</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#v_b">v_b</a></span> <span class="id"><a href="compcert.common.Memory.html#v_o">v_o</a></span> /\ <span class="id"><a href="compcert.common.Memory.html#Mem.compat_pointer_chunks">compat_pointer_chunks</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">chunk</span>' /\ <span class="id">b</span>' = <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> /\ <span class="id">ofs</span>' = <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;\/ (<span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> \/ <span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>' &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &lt;= <span class="id">ofs</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1624')">Proof.</div>
<div class="proofscript" id="proof1624">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span>' <span class="id">b</span>); <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">b</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>') <span class="id">ofs</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">ofs</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) <span class="id">ofs</span>'); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_overlap">load_store_overlap</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">mv1</span> &amp; <span class="id">mvl</span> &amp; <span class="id">mv1</span>' &amp; <span class="id">mvl</span>' &amp; <span class="id">ENC</span> &amp; <span class="id">DEC</span> &amp; <span class="id">CASES</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">DEC</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">CASES</span> <span class="kwd">as</span> [(<span class="id">A</span> &amp; <span class="id">B</span>) | [(<span class="id">A</span> &amp; <span class="id">B</span>) | (<span class="id">A</span> &amp; <span class="id">B</span>)]].<br/>
- <span class="comment">(*&nbsp;Same&nbsp;offset&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">ENC</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">chunk</span> = <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> \/ <span class="id">chunk</span> = <span class="id"><a href="compcert.common.AST.html#Many32">Many32</a></span> \/ <span class="id">chunk</span> = <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> \/ <span class="id">chunk</span> = <span class="id"><a href="compcert.common.AST.html#Many64">Many64</a></span>)<br/>
&nbsp;&nbsp;<span class="tactic">by</span> (<span class="tactic">destruct</span> <span class="id">chunk</span>; <span class="tactic">auto</span> || <span class="id">contradiction</span>).<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [<span class="id">P</span>|[<span class="id">P</span>|[<span class="id">P</span>|<span class="id">P</span>]]]; <span class="tactic">subst</span> <span class="id">chunk</span>'; <span class="tactic">destruct</span> <span class="id">v0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H3</span>;<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">congruence</span>; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.compat_pointer_chunks_true">compat_pointer_chunks_true</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;ofs'&nbsp;&gt;&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ENC</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">H10</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">j</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">inv</span> <span class="id">P</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">H8</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">n</span> &amp; <span class="id">P</span>); <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
- <span class="comment">(*&nbsp;ofs'&nbsp;&lt;&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H7</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">j</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="tactic">subst</span> <span class="id">mv1</span>. <span class="id">inv</span> <span class="id">ENC</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_store_pointer_overlap">load_store_pointer_overlap</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v_b</span> <span class="id">v_o</span> <span class="id">m2</span> <span class="id">chunk</span>' <span class="id">ofs</span>' <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#v_b">v_b</a></span> <span class="id"><a href="compcert.common.Memory.html#v_o">v_o</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id">chunk</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id">ofs</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">ofs</span>' &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>' &gt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &gt; <span class="id">ofs</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1625')">Proof.</div>
<div class="proofscript" id="proof1625">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_overlap">load_store_overlap</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">mv1</span> &amp; <span class="id">mvl</span> &amp; <span class="id">mv1</span>' &amp; <span class="id">mvl</span>' &amp; <span class="id">ENC</span> &amp; <span class="id">DEC</span> &amp; <span class="id">CASES</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">CASES</span> <span class="kwd">as</span> [(<span class="id">A</span> &amp; <span class="id">B</span>) | [(<span class="id">A</span> &amp; <span class="id">B</span>) | (<span class="id">A</span> &amp; <span class="id">B</span>)]].<br/>
- <span class="tactic">congruence</span>.<br/>
- <span class="id">inv</span> <span class="id">ENC</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">H9</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">j</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="tactic">subst</span> <span class="id">mv1</span>'. <span class="id">inv</span> <span class="id">DEC</span>. <span class="tactic">congruence</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">H5</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>; <span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">DEC</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">DEC</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">H10</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">j</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="tactic">subst</span> <span class="id">mv1</span>. <span class="id">inv</span> <span class="id">ENC</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">H8</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">n</span> &amp; <span class="id">P</span>). <span class="tactic">subst</span> <span class="id">mv1</span>. <span class="id">inv</span> <span class="id">ENC</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_store_pointer_mismatch">load_store_pointer_mismatch</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v_b</span> <span class="id">v_o</span> <span class="id">m2</span> <span class="id">chunk</span>' <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#v_b">v_b</a></span> <span class="id"><a href="compcert.common.Memory.html#v_o">v_o</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id">chunk</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;~<span class="id"><a href="compcert.common.Memory.html#Mem.compat_pointer_chunks">compat_pointer_chunks</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">chunk</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1626')">Proof.</div>
<div class="proofscript" id="proof1626">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_store_overlap">load_store_overlap</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>'); <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>); <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">mv1</span> &amp; <span class="id">mvl</span> &amp; <span class="id">mv1</span>' &amp; <span class="id">mvl</span>' &amp; <span class="id">ENC</span> &amp; <span class="id">DEC</span> &amp; <span class="id">CASES</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">CASES</span> <span class="kwd">as</span> [(<span class="id">A</span> &amp; <span class="id">B</span>) | [(<span class="id">A</span> &amp; <span class="id">B</span>) | (<span class="id">A</span> &amp; <span class="id">B</span>)]]; <span class="tactic">try</span> <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ENC</span>; <span class="id">inv</span> <span class="id">DEC</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">elim</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.compat_pointer_chunks_true">compat_pointer_chunks_true</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.store_similar_chunks">store_similar_chunks</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk1</span> <span class="id">chunk2</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> = <span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span> = <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk1">chunk1</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk2">chunk2</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1627')">Proof.</div>
<div class="proofscript" id="proof1627">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk1</span> = <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="id">chunk1</span> <span class="id">v1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="id">chunk2</span> <span class="id">v2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id">chunk1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id">chunk2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mkmem_ext">mkmem_ext</a></span>; <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> <span class="id">n</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_compat">valid_access_compat</a></span> <span class="kwd">with</span> <span class="id">chunk1</span>; <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> <span class="id">n</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_compat">valid_access_compat</a></span> <span class="kwd">with</span> <span class="id">chunk2</span>; <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_signed_unsigned_8">store_signed_unsigned_8</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1628')">Proof.</div>
<div class="proofscript" id="proof1628">
 <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_similar_chunks">store_similar_chunks</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int8_signed_unsigned">encode_val_int8_signed_unsigned</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_signed_unsigned_16">store_signed_unsigned_16</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1629')">Proof.</div>
<div class="proofscript" id="proof1629">
 <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_similar_chunks">store_similar_chunks</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int16_signed_unsigned">encode_val_int16_signed_unsigned</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_int8_zero_ext">store_int8_zero_ext</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> 8 <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>)) =<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1630')">Proof.</div>
<div class="proofscript" id="proof1630">
 <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_similar_chunks">store_similar_chunks</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int8_zero_ext">encode_val_int8_zero_ext</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_int8_sign_ext">store_int8_sign_ext</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> 8 <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>)) =<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1631')">Proof.</div>
<div class="proofscript" id="proof1631">
 <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_similar_chunks">store_similar_chunks</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int8_sign_ext">encode_val_int8_sign_ext</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_int16_zero_ext">store_int16_zero_ext</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> 16 <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>)) =<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1632')">Proof.</div>
<div class="proofscript" id="proof1632">
 <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_similar_chunks">store_similar_chunks</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int16_zero_ext">encode_val_int16_zero_ext</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_int16_sign_ext">store_int16_sign_ext</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.sign_ext">Int.sign_ext</a></span> 16 <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>)) =<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1633')">Proof.</div>
<div class="proofscript" id="proof1633">
 <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_similar_chunks">store_similar_chunks</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int16_sign_ext">encode_val_int16_sign_ext</a></span>. <span class="tactic">auto</span>. Qed.</div>
<br/>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">storebytes</span></span>. </h2>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.range_perm_storebytes">range_perm_storebytes</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span> -&gt;<br/>
&nbsp;&nbsp;{ <span class="id">m2</span> : <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> | <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> }.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1634')">Proof.</div>
<div class="proofscript" id="proof1634">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes</span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_store">storebytes_store</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">chunk</span> <span class="id">v</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> | <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1635')">Proof.</div>
<div class="proofscript" id="proof1635">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id">chunk</span> <span class="id">v</span>))) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>); <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m1</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mkmem_ext">mkmem_ext</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> <span class="id">n</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="kwd">in</span> <span class="id">r</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_storebytes">store_storebytes</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">chunk</span> <span class="id">v</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1636')">Proof.</div>
<div class="proofscript" id="proof1636">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m1</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>); <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id">chunk</span> <span class="id">v</span>))) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mkmem_ext">mkmem_ext</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v0</span>.  <span class="tactic">elim</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Mem.STOREBYTES">STOREBYTES</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.STOREBYTES.m1">m1</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.STOREBYTES.b">b</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.STOREBYTES.ofs">ofs</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.STOREBYTES.bytes">bytes</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.STOREBYTES.m2">m2</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Mem.STOREBYTES.STORE">STORE</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.storebytes_access">storebytes_access</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">mem_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1637')">Proof.</div>
<div class="proofscript" id="proof1637">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="kwd">in</span> <span class="id">STORE</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>);<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.storebytes_mem_contents">storebytes_mem_contents</a></span>:<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> = <span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span>) <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1638')">Proof.</div>
<div class="proofscript" id="proof1638">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="kwd">in</span> <span class="id">STORE</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>);<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_storebytes_1">perm_storebytes_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1639')">Proof.</div>
<div class="proofscript" id="proof1639">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_access">storebytes_access</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_storebytes_2">perm_storebytes_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1640')">Proof.</div>
<div class="proofscript" id="proof1640">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_access">storebytes_access</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">perm_storebytes_1</span> <span class="id">perm_storebytes_2</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_valid_access_1">storebytes_valid_access_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1641')">Proof.</div>
<div class="proofscript" id="proof1641">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">try</span> <span class="tactic">red</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_valid_access_2">storebytes_valid_access_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">chunk</span>' <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1642')">Proof.</div>
<div class="proofscript" id="proof1642">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">try</span> <span class="tactic">red</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">storebytes_valid_access_1</span> <span class="id">storebytes_valid_access_2</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.nextblock_storebytes">nextblock_storebytes</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1643')">Proof.</div>
<div class="proofscript" id="proof1643">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="kwd">in</span> <span class="id">STORE</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>);<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_valid_block_1">storebytes_valid_block_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">b</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1644')">Proof.</div>
<div class="proofscript" id="proof1644">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">nextblock_storebytes</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_valid_block_2">storebytes_valid_block_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id">b</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1645')">Proof.</div>
<div class="proofscript" id="proof1645">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">nextblock_storebytes</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">storebytes_valid_block_1</span> <span class="id">storebytes_valid_block_2</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_range_perm">storebytes_range_perm</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1646')">Proof.</div>
<div class="proofscript" id="proof1646">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="kwd">in</span> <span class="id">STORE</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>);<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.STORE">STORE</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_storebytes_same">loadbytes_storebytes_same</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1647')">Proof.</div>
<div class="proofscript" id="proof1647">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">assert</span> (<span class="id">STORE2</span>:=<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.STORE">STORE</a></span>). <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="kwd">in</span> <span class="id">STORE2</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>);<br/>
&nbsp;&nbsp;<span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="id">decEq</span>. <span class="id">inv</span> <span class="id">STORE2</span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_of_nat">nat_of_Z_of_nat</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_same">getN_setN_same</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_storebytes_disjoint">loadbytes_storebytes_disjoint</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">len</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#len">len</a></span> &gt;= 0 -&gt;<br/>
&nbsp;&nbsp;<span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span> \/ <span class="id"><a href="compcert.lib.Intv.html#disjoint">Intv.disjoint</a></span> (<span class="id">ofs</span>', <span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memory.html#len">len</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#len">len</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#len">len</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1648')">Proof.</div>
<div class="proofscript" id="proof1648">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' (<span class="id">ofs</span>' + <span class="id">len</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span>. <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span>). <span class="tactic">subst</span> <span class="id">b</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_disjoint">getN_setN_disjoint</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span>; <span class="tactic">auto</span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">n</span>. <span class="tactic">red</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_storebytes_other">loadbytes_storebytes_other</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id">len</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#len">len</a></span> &gt;= 0 -&gt;<br/>
&nbsp;&nbsp;<span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span><br/>
&nbsp;&nbsp;\/ <span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memory.html#len">len</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span><br/>
&nbsp;&nbsp;\/ <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>) &lt;= <span class="id">ofs</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#len">len</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#len">len</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1649')">Proof.</div>
<div class="proofscript" id="proof1649">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_storebytes_disjoint">loadbytes_storebytes_disjoint</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="id">right</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Intv.html#disjoint_range">Intv.disjoint_range</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_storebytes_other">load_storebytes_other</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;<span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span><br/>
&nbsp;&nbsp;\/ <span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span><br/>
&nbsp;&nbsp;\/ <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.bytes">bytes</a></span>) &lt;= <span class="id">ofs</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m2">m2</a></span> <span class="id">b</span>' <span class="id">ofs</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1650')">Proof.</div>
<div class="proofscript" id="proof1650">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.m1">m1</a></span> <span class="id">chunk</span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span>. <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES.b">b</a></span>). <span class="tactic">subst</span> <span class="id">b</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_setN_outside">getN_setN_outside</a></span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">n</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem.STOREBYTES">STOREBYTES</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.setN_concat">setN_concat</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bytes1</span> <span class="id">bytes2</span> <span class="id">ofs</span> <span class="id">c</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> (<span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> ++ <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span>) <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span>)) (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#c">c</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1651')">Proof.</div>
<div class="proofscript" id="proof1651">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">bytes1</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">decEq</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">length</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">IHbytes1</span>. <span class="id">decEq</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_concat">storebytes_concat</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes1</span> <span class="id">m1</span> <span class="id">bytes2</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span>)) <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> ++ <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1652')">Proof.</div>
<div class="proofscript" id="proof1652">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">generalize</span> <span class="id">H</span>; <span class="tactic">intro</span> <span class="id">ST1</span>. <span class="tactic">generalize</span> <span class="id">H0</span>; <span class="tactic">intro</span> <span class="id">ST2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="kwd">in</span> <span class="id">ST1</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="kwd">in</span> <span class="id">ST2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b</span> (<span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>)) (<span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>) + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes2</span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id">bytes1</span> ++ <span class="id">bytes2</span>))) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ST1</span>; <span class="id">inv</span> <span class="id">ST2</span>; <span class="tactic">simpl</span>. <span class="id">decEq</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mkmem_ext">mkmem_ext</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>.  <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_concat">setN_concat</a></span>. <span class="tactic">symmetry</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.set2">PMap.set2</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> <span class="id">n</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_add">Nat2Z.inj_add</a></span>. <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> (<span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">r</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">r0</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_split">storebytes_split</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes1</span> <span class="id">bytes2</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> ++ <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span>)) <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1653')">Proof.</div>
<div class="proofscript" id="proof1653">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_storebytes">range_perm_storebytes</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes1</span>) <span class="kwd">as</span> [<span class="id">m1</span> <span class="id">ST1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">storebytes_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_add">Nat2Z.inj_add</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_storebytes">range_perm_storebytes</a></span> <span class="id">m1</span> <span class="id">b</span> (<span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>)) <span class="id">bytes2</span>) <span class="kwd">as</span> [<span class="id">m2</span>' <span class="id">ST2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1</a></span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">storebytes_range_perm</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">H</span>. <span class="id">instantiate</span> (1 := <span class="id">ofs0</span>). <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_add">Nat2Z.inj_add</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>').<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_concat">storebytes_concat</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m1</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_int64_split">store_int64_split</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword">Val.hiword</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.loword">Val.loword</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + 4) (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.loword">Val.loword</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword">Val.hiword</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1654')">Proof.</div>
<div class="proofscript" id="proof1654">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_access_3">store_valid_access_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_storebytes">store_storebytes</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="tactic">intros</span> <span class="id">SB</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_int64">encode_val_int64</a></span> <span class="kwd">in</span> <span class="id">SB</span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_split">storebytes_split</a></span>. <span class="id">eexact</span> <span class="id">SB</span>. <span class="tactic">intros</span> [<span class="id">m1</span> [<span class="id">SB1</span> <span class="id">SB2</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="kwd">in</span> <span class="id">SB2</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">SB2</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m1</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_store">storebytes_store</a></span>. <span class="tactic">exact</span> <span class="id">SB1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zdivides_trans">Zdivides_trans</a></span> <span class="kwd">with</span> 8; <span class="tactic">auto</span>. <span class="id">exists</span> 2; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_store">storebytes_store</a></span>. <span class="tactic">exact</span> <span class="id">SB2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zdivides_trans">Zdivides_trans</a></span> <span class="kwd">with</span> 8; <span class="tactic">auto</span>. <span class="id">exists</span> 2; <span class="tactic">auto</span>. <span class="id">exists</span> 1; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storev_int64_split">storev_int64_split</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">a</span> <span class="id">v</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#a">a</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#a">a</a></span> (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword">Val.hiword</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.loword">Val.loword</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> <span class="id"><a href="compcert.common.Memory.html#a">a</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 4))) (<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#big_endian">Archi.big_endian</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Values.html#Val.loword">Val.loword</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Values.html#Val.hiword">Val.hiword</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1655')">Proof.</div>
<div class="proofscript" id="proof1655">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_int64_split">store_int64_split</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">m1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m1</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">exact</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span>. <span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.addressing_int64_split">addressing_int64_split</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_access_3">store_valid_access_3</a></span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="tactic">exact</span> <span class="id">Q</span>.<br/>
Qed.</div>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">alloc</span></span>. </h2>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Mem.ALLOC">ALLOC</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.ALLOC.m1">m1</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="kwd">Variables</span> <span class="id"><a name="Mem.ALLOC.lo">lo</a></span> <span class="id"><a name="Mem.ALLOC.hi">hi</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.ALLOC.m2">m2</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.ALLOC.b">b</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Mem.ALLOC.ALLOC">ALLOC</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span> = (<span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span>).<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.nextblock_alloc">nextblock_alloc</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.succ">Pos.succ</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1656')">Proof.</div>
<div class="proofscript" id="proof1656">
&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.alloc_result">alloc_result</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1657')">Proof.</div>
<div class="proofscript" id="proof1657">
&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_block_alloc">valid_block_alloc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id">b</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1658')">Proof.</div>
<div class="proofscript" id="proof1658">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">nextblock_alloc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_trans_succ">Plt_trans_succ</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.fresh_block_alloc">fresh_block_alloc</a></span>:<br/>
&nbsp;&nbsp;~(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1659')">Proof.</div>
<div class="proofscript" id="proof1659">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_new_block">valid_new_block</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1660')">Proof.</div>
<div class="proofscript" id="proof1660">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">nextblock_alloc</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_succ">Plt_succ</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">valid_block_alloc</span> <span class="id">fresh_block_alloc</span> <span class="id">valid_new_block</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_block_alloc_inv">valid_block_alloc_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id">b</span>' -&gt; <span class="id">b</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1661')">Proof.</div>
<div class="proofscript" id="proof1661">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">nextblock_alloc</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_succ_inv">Plt_succ_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_alloc_1">perm_alloc_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1662')">Proof.</div>
<div class="proofscript" id="proof1662">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>; <span class="tactic">intros</span>. <span class="tactic">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span>' (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span>)); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">nextblock_noaccess</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">contradiction</span>. <span class="tactic">subst</span> <span class="id">b</span>'. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_alloc_2">perm_alloc_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1663')">Proof.</div>
<div class="proofscript" id="proof1663">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>; <span class="tactic">intros</span>. <span class="tactic">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle_true">zle_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_alloc_inv">perm_alloc_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1664')">Proof.</div>
<div class="proofscript" id="proof1664">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">p</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>. <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span>' (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span>)); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> <span class="id">ofs</span>); <span class="tactic">try</span> <span class="id">contradiction</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span>); <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_alloc_3">perm_alloc_3</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1665')">Proof.</div>
<div class="proofscript" id="proof1665">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_alloc_4">perm_alloc_4</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1666')">Proof.</div>
<div class="proofscript" id="proof1666">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">perm_alloc_1</span> <span class="id">perm_alloc_2</span> <span class="id">perm_alloc_3</span> <span class="id">perm_alloc_4</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_alloc_other">valid_access_alloc_other</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1667')">Proof.</div>
<div class="proofscript" id="proof1667">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_alloc_same">valid_access_alloc_same</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span> -&gt; (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> | <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1668')">Proof.</div>
<div class="proofscript" id="proof1668">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2</a></span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">valid_access_alloc_other</span> <span class="id">valid_access_alloc_same</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_alloc_inv">valid_access_alloc_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span><br/>
&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> /\ <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span> /\ (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> | <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1669')">Proof.</div>
<div class="proofscript" id="proof1669">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>); <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span>). <span class="tactic">subst</span> <span class="id">b</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id">p</span>). <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> (<span class="id">ofs</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span> - 1) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id">p</span>). <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="id">eexact</span> <span class="id">H3</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>. <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_alloc_unchanged">load_alloc_unchanged</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span>' <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1670')">Proof.</div>
<div class="proofscript" id="proof1670">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id">chunk</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_alloc_inv">valid_access_alloc_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>'. <span class="tactic">elimtype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#not_eq_sym">not_eq_sym</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_alloc_other">load_alloc_other</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1671')">Proof.</div>
<div class="proofscript" id="proof1671">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_alloc_unchanged">load_alloc_unchanged</a></span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_alloc_same">load_alloc_same</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1672')">Proof.</div>
<div class="proofscript" id="proof1672">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H2</span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat_pos">size_chunk_nat_pos</a></span> <span class="id">chunk</span>) <span class="kwd">as</span> [<span class="id">n</span> <span class="id">E</span>]. <span class="tactic">rewrite</span> <span class="id">E</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gi">ZMap.gi</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_undef">decode_val_undef</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id">load_alloc_same</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.hi">hi</a></span> -&gt; (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> | <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1673')">Proof.</div>
<div class="proofscript" id="proof1673">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">v</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id">chunk</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id">ofs</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_load">valid_access_load</a></span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2</a></span>. <span class="tactic">omega</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> [<span class="id">v</span> <span class="id">LOAD</span>]. <span class="tactic">rewrite</span> <span class="id">LOAD</span>. <span class="id">decEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_alloc_same">load_alloc_same</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_alloc_unchanged">loadbytes_alloc_unchanged</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1674')">Proof.</div>
<div class="proofscript" id="proof1674">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC</a></span>; <span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">B</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span>. <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">A</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">n0</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_alloc_same">loadbytes_alloc_same</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">ofs</span> <span class="id">bytes</span> <span class="id">byte</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.common.Memory.html#byte">byte</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#byte">byte</a></span> = <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1675')">Proof.</div>
<div class="proofscript" id="proof1675">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.b">b</a></span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>); <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC.ALLOC">ALLOC</a></span>; <span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">A</span>; <span class="tactic">rewrite</span> &lt;- <span class="id">B</span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z">nat_of_Z</a></span> <span class="id">n</span>) <span class="id">ofs</span>. <span class="tactic">induction</span> <span class="id">n0</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gi">ZMap.gi</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem.ALLOC">ALLOC</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">valid_block_alloc</span> <span class="id">fresh_block_alloc</span> <span class="id">valid_new_block</span>: <span class="id">mem</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">valid_access_alloc_other</span> <span class="id">valid_access_alloc_same</span>: <span class="id">mem</span>.<br/>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">free</span></span>. </h2>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.range_perm_free">range_perm_free</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> -&gt;<br/>
&nbsp;&nbsp;{ <span class="id">m2</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> | <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> }.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1676')">Proof.</div>
<div class="proofscript" id="proof1676">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Mem.FREE">FREE</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.FREE.m1">m1</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.FREE.bf">bf</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="kwd">Variables</span> <span class="id"><a name="Mem.FREE.lo">lo</a></span> <span class="id"><a name="Mem.FREE.hi">hi</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.FREE.m2">m2</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Mem.FREE.FREE">FREE</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.free_range_perm">free_range_perm</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1677')">Proof.</div>
<div class="proofscript" id="proof1677">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="kwd">in</span> <span class="id">FREE</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.free_result">free_result</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1678')">Proof.</div>
<div class="proofscript" id="proof1678">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="kwd">in</span> <span class="id">FREE</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.nextblock_free">nextblock_free</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1679')">Proof.</div>
<div class="proofscript" id="proof1679">
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>; <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_block_free_1">valid_block_free_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1680')">Proof.</div>
<div class="proofscript" id="proof1680">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_block_free_2">valid_block_free_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1681')">Proof.</div>
<div class="proofscript" id="proof1681">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">assumption</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">valid_block_free_1</span> <span class="id">valid_block_free_2</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_free_1">perm_free_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1682')">Proof.</div>
<div class="proofscript" id="proof1682">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span>). <span class="tactic">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id">ofs</span>); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elimtype</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_free_2">perm_free_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> -&gt; ~ <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1683')">Proof.</div>
<div class="proofscript" id="proof1683">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle_true">zle_true</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">tauto</span>. <span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_free_3">perm_free_3</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1684')">Proof.</div>
<div class="proofscript" id="proof1684">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">p</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span>). <span class="tactic">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id">ofs</span>); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>); <span class="tactic">simpl</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_free_inv">perm_free_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> /\ <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>) \/ <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1685')">Proof.</div>
<div class="proofscript" id="proof1685">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span>); <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id">ofs</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_free_1">valid_access_free_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> &gt;= <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1686')">Proof.</div>
<div class="proofscript" id="proof1686">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">perm_free_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>). <span class="tactic">intuition</span>. <span class="id">right</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_free_2">valid_access_free_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &gt; <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> -&gt;<br/>
&nbsp;&nbsp;~(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1687')">Proof.</div>
<div class="proofscript" id="proof1687">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>. <span class="tactic">apply</span> <span class="id">H3</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id">p</span>).<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>. <span class="tactic">apply</span> <span class="id">H3</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_free_inv_1">valid_access_free_inv_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1688')">Proof.</div>
<div class="proofscript" id="proof1688">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">generalize</span> (<span class="id">H</span> <span class="id">ofs0</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">unchecked_free</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span>). <span class="tactic">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id">ofs0</span>); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>); <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_free_inv_2">valid_access_free_inv_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> &gt;= <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1689')">Proof.</div>
<div class="proofscript" id="proof1689">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">ofs</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> <span class="id">ofs</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_free_2">valid_access_free_2</a></span> <span class="id">chunk</span> <span class="id">ofs</span> <span class="id">p</span>); <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_free">load_free</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> &gt;= <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1690')">Proof.</div>
<div class="proofscript" id="proof1690">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_free_inv_1">valid_access_free_inv_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intro</span>; <span class="tactic">elim</span> <span class="id">n</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_free_1">valid_access_free_1</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_free_2">load_free_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1691')">Proof.</div>
<div class="proofscript" id="proof1691">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_free_inv_1">valid_access_free_inv_1</a></span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_free">loadbytes_free</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b">b</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.bf">bf</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> &gt;= <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.lo">lo</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.hi">hi</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1692')">Proof.</div>
<div class="proofscript" id="proof1692">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">n0</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">perm_free_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">auto</span>. <span class="id">right</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_free_2">loadbytes_free_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span> <span class="id">bytes</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1693')">Proof.</div>
<div class="proofscript" id="proof1693">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE.m2">m2</a></span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>); <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem.FREE">FREE</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">valid_block_free_1</span> <span class="id">valid_block_free_2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">perm_free_1</span> <span class="id">perm_free_2</span> <span class="id">perm_free_3</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">valid_access_free_1</span> <span class="id">valid_access_free_inv_1</span>: <span class="id">mem</span>.<br/>
<br/>
<h2> Properties related to <span class="bracket"><span class="id">drop_perm</span></span> </h2>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.range_perm_drop_1">range_perm_drop_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">p</span> <span class="id">m</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1694')">Proof.</div>
<div class="proofscript" id="proof1694">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>). <span class="tactic">auto</span>. <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.range_perm_drop_2">range_perm_drop_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> -&gt; {<span class="id">m</span>' | <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' }.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1695')">Proof.</div>
<div class="proofscript" id="proof1695">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>). <span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Mem.DROP">DROP</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.DROP.m">m</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.DROP.b">b</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.DROP.lo">lo</a></span> <span class="id"><a name="Mem.DROP.hi">hi</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.DROP.p">p</a></span>: <span class="id"><a href="compcert.common.Memtype.html#permission">permission</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id">m</span>': <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="Mem.DROP.DROP">DROP</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>'.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.nextblock_drop">nextblock_drop</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1696')">Proof.</div>
<div class="proofscript" id="proof1696">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="kwd">in</span> <span class="id">DROP</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.drop_perm_valid_block_1">drop_perm_valid_block_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id">b</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m</span>' <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1697')">Proof.</div>
<div class="proofscript" id="proof1697">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_drop">nextblock_drop</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.drop_perm_valid_block_2">drop_perm_valid_block_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m</span>' <span class="id">b</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1698')">Proof.</div>
<div class="proofscript" id="proof1698">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_drop">nextblock_drop</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_drop_1">perm_drop_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1699')">Proof.</div>
<div class="proofscript" id="proof1699">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="kwd">in</span> <span class="id">DROP</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle_true">zle_true</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>. <span class="tactic">simpl</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_drop_2">perm_drop_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id">p</span>' -&gt; <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span> <span class="id">p</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1700')">Proof.</div>
<div class="proofscript" id="proof1700">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="kwd">in</span> <span class="id">DROP</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H0</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle_true">zle_true</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_drop_3">perm_drop_3</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>', <span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id">p</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id">p</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1701')">Proof.</div>
<div class="proofscript" id="proof1701">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="kwd">in</span> <span class="id">DROP</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span>). <span class="tactic">subst</span> <span class="id">b</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id">ofs</span>). <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span>).<br/>
&nbsp;&nbsp;<span class="id">byContradiction</span>. <span class="tactic">intuition</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_drop_4">perm_drop_4</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id">p</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id">p</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1702')">Proof.</div>
<div class="proofscript" id="proof1702">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="kwd">in</span> <span class="id">DROP</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>'. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id">ofs</span>). <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">perm_cur</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">r</span>. <span class="tactic">tauto</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.valid_access_drop_1">valid_access_drop_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">p</span>',<br/>
&nbsp;&nbsp;<span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> \/ <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span> <span class="id">p</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id">p</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id">p</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1703')">Proof.</div>
<div class="proofscript" id="proof1703">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span>). <span class="tactic">subst</span> <span class="id">b</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id">ofs0</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_1">perm_drop_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>); <span class="tactic">intros</span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.valid_access_drop_2">valid_access_drop_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">p</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id">p</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id">p</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1704')">Proof.</div>
<div class="proofscript" id="proof1704">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_drop">load_drop</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">b</span>' <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> \/ <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1705')">Proof.</div>
<div class="proofscript" id="proof1705">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id">chunk</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="kwd">in</span> <span class="id">DROP</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_drop_1">valid_access_drop_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">n</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_drop_2">valid_access_drop_2</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_drop">loadbytes_drop</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> \/ <span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id">m</span>' <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1706')">Proof.</div>
<div class="proofscript" id="proof1706">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id">b</span>' <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="kwd">in</span> <span class="id">DROP</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.DROP">DROP</a></span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.b">b</a></span>). <span class="tactic">subst</span> <span class="id">b</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.lo">lo</a></span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.hi">hi</a></span> <span class="id">ofs0</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP.p">p</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_1">perm_drop_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">n0</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem.DROP">DROP</a></span>.<br/>
<br/>
<h1> Generic injections </h1>
<br/>
<div class="doc">A memory state <span class="bracket"><span class="id">m1</span></span> generically injects into another memory state <span class="bracket"><span class="id">m2</span></span> via the
  memory injection <span class="bracket"><span class="id">f</span></span> if the following conditions hold:
<ul>
<li>
 each access in <span class="bracket"><span class="id">m2</span></span> that corresponds to a valid access in <span class="bracket"><span class="id">m1</span></span>
  is itself valid;
</li>
<li>
 the memory value associated in <span class="bracket"><span class="id">m1</span></span> to an accessible address
  must inject into <span class="bracket"><span class="id">m2</span></span>'s memory value at the corersponding address.
</li>
</ul>
</div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="Mem.mem_inj">mem_inj</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">m1</span> <span class="id">m2</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Mem.mk_mem_inj">mk_mem_inj</a></span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Mem.mi_perm">mi_perm</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Mem.mi_align">mi_align</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">chunk</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> | <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Mem.mi_memval">mi_memval</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>+<span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>)<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<div class="doc">Preservation of permissions </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.perm_inj">perm_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1707')">Proof.</div>
<div class="proofscript" id="proof1707">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_perm">mi_perm</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.range_perm_inj">range_perm_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">k</span> <span class="id">p</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) (<span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1708')">Proof.</div>
<div class="proofscript" id="proof1708">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">ofs</span> <span class="kwd">with</span> ((<span class="id">ofs</span> - <span class="id">delta</span>) + <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.valid_access_inj">valid_access_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">chunk</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1709')">Proof.</div>
<div class="proofscript" id="proof1709">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + <span class="id">delta</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> ((<span class="id">ofs</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) + <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_inj">range_perm_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_align">mi_align</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of loads. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.getN_inj">getN_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) (<span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1710')">Proof.</div>
<div class="proofscript" id="proof1710">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_memval">mi_memval</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + <span class="id">delta</span> + 1) <span class="kwd">with</span> ((<span class="id">ofs</span> + 1) + <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHn</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">H1</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.load_inj">load_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">v1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1711')">Proof.</div>
<div class="proofscript" id="proof1711">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Memdata.html#decode_val">decode_val</a></span> <span class="id">chunk</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>) (<span class="id">ofs</span> + <span class="id">delta</span>) (<span class="id">m2</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b2</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_inj">valid_access_inj</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_result">load_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#decode_val_inject">decode_val_inject</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_inj">getN_inj</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_valid_access">load_valid_access</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.loadbytes_inj">loadbytes_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">len</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">bytes1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#len">len</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">bytes2</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#len">len</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span>) <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1712')">Proof.</div>
<div class="proofscript" id="proof1712">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id">len</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>); <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">getN</a></span> (<span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z">nat_of_Z</a></span> <span class="id">len</span>) (<span class="id">ofs</span> + <span class="id">delta</span>) (<span class="id">m2</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b2</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + <span class="id">delta</span> + <span class="id">len</span>) <span class="kwd">with</span> ((<span class="id">ofs</span> + <span class="id">len</span>) + <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_inj">range_perm_inj</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_inj">getN_inj</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> 0 <span class="id">len</span>). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span>; <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_neg">nat_of_Z_neg</a></span>. <span class="tactic">simpl</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">omegaContradiction</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of stores. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.setN_inj">setN_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">access</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">delta</span> <span class="id">f</span> <span class="id">vl1</span> <span class="id">vl2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span>) <span class="id"><a href="compcert.common.Memory.html#vl1">vl1</a></span> <span class="id"><a href="compcert.common.Memory.html#vl2">vl2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">c1</span> <span class="id">c2</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">q</span>, <span class="id"><a href="compcert.common.Memory.html#access">access</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> -&gt; <span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> <span class="id"><a href="compcert.common.Memory.html#c1">c1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="compcert.common.Memory.html#q">q</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#c2">c2</a></span>)) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">q</span>, <span class="id"><a href="compcert.common.Memory.html#access">access</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> -&gt; <span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#q">q</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl1">vl1</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> <span class="id"><a href="compcert.common.Memory.html#c1">c1</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> (<span class="id"><a href="compcert.common.Memory.html#q">q</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">setN</a></span> <span class="id"><a href="compcert.common.Memory.html#vl2">vl2</a></span> (<span class="id"><a href="compcert.common.Memory.html#p">p</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#c2">c2</a></span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1713')">Proof.</div>
<div class="proofscript" id="proof1713">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">p</span> + <span class="id">delta</span> + 1) <span class="kwd">with</span> ((<span class="id">p</span> + 1) + <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHlist_forall2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gsspec">ZMap.gsspec</a></span> <span class="tactic">at</span> 1. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#ZIndexed.eq">ZIndexed.eq</a></span> <span class="id">q0</span> <span class="id">p</span>). <span class="tactic">subst</span> <span class="id">q0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gss">ZMap.gss</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gso">ZMap.gso</a></span>. <span class="tactic">auto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#ZIndexed.t">ZIndexed.t</a></span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.meminj_no_overlap">meminj_no_overlap</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b1</span>' <span class="id">delta1</span> <span class="id">b2</span> <span class="id">b2</span>' <span class="id">delta2</span> <span class="id">ofs1</span> <span class="id">ofs2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b1</span>', <span class="id"><a href="compcert.common.Memory.html#delta1">delta1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b2</span>', <span class="id"><a href="compcert.common.Memory.html#delta2">delta2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">b1</span>' &lt;&gt; <span class="id">b2</span>' \/ <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta1">delta1</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta2">delta2</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.store_mapped_inj">store_mapped_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">v1</span> <span class="id">n1</span> <span class="id">m2</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">meminj_no_overlap</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1714')">Proof.</div>
<div class="proofscript" id="proof1714">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b2</span> (<span class="id">ofs</span> + <span class="id">delta</span>) <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_inj">valid_access_inj</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_store">valid_access_store</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">v2</span> <span class="id">H4</span>) <span class="kwd">as</span> [<span class="id">n2</span> <span class="id">STORE</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n2</span>; <span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_1">perm_store_1</a></span>; [<span class="id">eexact</span> <span class="id">STORE</span>|].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_perm">mi_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_align">mi_align</a></span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs0</span>) (<span class="id">p</span> := <span class="id">p</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">STORE</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;=&nbsp;b1,&nbsp;block&nbsp;=&nbsp;b2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b3</span> = <span class="id">b2</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">delta0</span> = <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_inj">setN_inj</a></span> <span class="kwd">with</span> (<span class="id">access</span> := <span class="kwd">fun</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>; <span class="tactic">auto</span>. <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_memval">mi_memval</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b3</span> <span class="id">b2</span>). <span class="tactic">subst</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;&lt;&gt;&nbsp;b1,&nbsp;block&nbsp;=&nbsp;b2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_other">setN_other</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_memval">mi_memval</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b2</span> &lt;&gt; <span class="id">b2</span> \/ <span class="id">ofs0</span> + <span class="id">delta0</span> &lt;&gt; (<span class="id">r</span> - <span class="id">delta</span>) + <span class="id">delta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span> 6 <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_access_3">store_valid_access_3</a></span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id">A</span>. <span class="tactic">omega</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H8</span>. <span class="tactic">congruence</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;&lt;&gt;&nbsp;b1,&nbsp;block&nbsp;&lt;&gt;&nbsp;b2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_memval">mi_memval</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.store_unmapped_inj">store_unmapped_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">v1</span> <span class="id">n1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1715')">Proof.</div>
<div class="proofscript" id="proof1715">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_perm">mi_perm</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_align">mi_align</a></span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs0</span>) (<span class="id">p</span> := <span class="id">p</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_memval">mi_memval</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.store_outside_inj">store_outside_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt;= <span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1716')">Proof.</div>
<div class="proofscript" id="proof1716">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;access&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">mi_align0</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b2</span> <span class="id">b</span>). <span class="tactic">subst</span> <span class="id">b2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">ofs0</span> + <span class="id">delta</span>) <span class="id">ofs</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">ofs</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>) (<span class="id">ofs0</span> + <span class="id">delta</span>)). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">byContradiction</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.storebytes_mapped_inj">storebytes_mapped_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">bytes1</span> <span class="id">n1</span> <span class="id">m2</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">bytes2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">meminj_no_overlap</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span>) <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1717')">Proof.</div>
<div class="proofscript" id="proof1717">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id">m2</span> <span class="id">b2</span> (<span class="id">ofs</span> + <span class="id">delta</span>) (<span class="id">ofs</span> + <span class="id">delta</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes2</span>)) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Writable">Writable</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + <span class="id">delta</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> ((<span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes1</span>)) + <span class="id">delta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_inj">range_perm_inj</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">storebytes_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_length">list_forall2_length</a></span> <span class="id">H3</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_storebytes">range_perm_storebytes</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H4</span>) <span class="kwd">as</span> [<span class="id">n2</span> <span class="id">STORE</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n2</span>; <span class="tactic">split</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1</a></span>; [<span class="tactic">apply</span> <span class="id">STORE</span> |].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_align">mi_align</a></span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs0</span>) (<span class="id">p</span> := <span class="id">p</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id">b0</span> <span class="id">ofs0</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">STORE</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;=&nbsp;b1,&nbsp;block&nbsp;=&nbsp;b2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b3</span> = <span class="id">b2</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">delta0</span> = <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#peq_true">peq_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_inj">setN_inj</a></span> <span class="kwd">with</span> (<span class="id">access</span> := <span class="kwd">fun</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b3</span> <span class="id">b2</span>). <span class="tactic">subst</span> <span class="id">b3</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;&lt;&gt;&nbsp;b1,&nbsp;block&nbsp;=&nbsp;b2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_other">setN_other</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b2</span> &lt;&gt; <span class="id">b2</span> \/ <span class="id">ofs0</span> + <span class="id">delta0</span> &lt;&gt; (<span class="id">r</span> - <span class="id">delta</span>) + <span class="id">delta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span> 6 <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_range_perm">storebytes_range_perm</a></span>. <span class="id">eexact</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">r</span> - <span class="id">delta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_length">list_forall2_length</a></span> <span class="id">H3</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span> 6 <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H9</span>. <span class="tactic">congruence</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;&lt;&gt;&nbsp;b1,&nbsp;block&nbsp;&lt;&gt;&nbsp;b2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.storebytes_unmapped_inj">storebytes_unmapped_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">bytes1</span> <span class="id">n1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1718')">Proof.</div>
<div class="proofscript" id="proof1718">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_perm0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_align">mi_align</a></span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs0</span>) (<span class="id">p</span> := <span class="id">p</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span>. <span class="tactic">eapply</span> <span class="id">mi_memval0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.storebytes_outside_inj">storebytes_outside_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes2</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt;= <span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1719')">Proof.</div>
<div class="proofscript" id="proof1719">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b2</span> <span class="id">b</span>). <span class="tactic">subst</span> <span class="id">b2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">ofs0</span> + <span class="id">delta</span>) <span class="id">ofs</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes2</span>)) (<span class="id">ofs0</span> + <span class="id">delta</span>)). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">byContradiction</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.storebytes_empty_inj">storebytes_empty_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs1</span> <span class="id">m1</span>' <span class="id">m2</span> <span class="id">b2</span> <span class="id">ofs2</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1720')">Proof.</div>
<div class="proofscript" id="proof1720">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_align0</span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs</span>) (<span class="id">p</span> := <span class="id">p</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id">b0</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b1</span>); <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b3</span> <span class="id">b2</span>); <span class="tactic">subst</span>; <span class="tactic">eapply</span> <span class="id">mi_memval0</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of allocations </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.alloc_right_inj">alloc_right_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">b2</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = (<span class="id">m2</span>', <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1721')">Proof.</div>
<div class="proofscript" id="proof1721">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">injection</span> <span class="id">H0</span>. <span class="tactic">intros</span> <span class="id">NEXT</span> <span class="id">MEM</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m2</span> <span class="id">b0</span> (<span class="id">ofs</span> + <span class="id">delta</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m2</span> <span class="id">b0</span>) <span class="tactic">by</span> <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">MEM</span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">NEXT</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.alloc_left_unmapped_inj">alloc_left_unmapped_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>' <span class="id">b1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = (<span class="id">m1</span>', <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">m1</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1722')">Proof.</div>
<div class="proofscript" id="proof1722">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="tactic">congruence</span>. <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_align0</span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs</span>) (<span class="id">p</span> := <span class="id">p</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>); <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">H0</span>; <span class="tactic">intros</span> <span class="id">NEXT</span> <span class="id">MEM</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">MEM</span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">NEXT</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gi">ZMap.gi</a></span>. <span class="id">constructor</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.inj_offset_aligned">inj_offset_aligned</a></span> (<span class="id">delta</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">size</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span>, <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#size">size</a></span> -&gt; (<span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> | <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.alloc_left_mapped_inj">alloc_left_mapped_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>' <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = (<span class="id">m1</span>', <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inj_offset_aligned">inj_offset_aligned</a></span> <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> (<span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span>-<span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">m1</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1723')">Proof.</div>
<div class="proofscript" id="proof1723">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>. <span class="tactic">assert</span> (<span class="id">delta0</span> = <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">lo</span> &lt;= <span class="id">ofs</span> &lt; <span class="id">hi</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_3">perm_alloc_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">H6</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>); <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">lo</span> &lt;= <span class="id">ofs</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span> - 1 &lt; <span class="id">hi</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_3">perm_alloc_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">H6</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>); <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H2</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_align0</span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs</span>) (<span class="id">p</span> := <span class="id">p</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">injection</span> <span class="id">H0</span>; <span class="tactic">intros</span> <span class="id">NEXT</span> <span class="id">MEM</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">MEM</span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">NEXT</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#ZMap.gi">ZMap.gi</a></span>. <span class="id">constructor</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.free_left_inj">free_left_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">m1</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1724')">Proof.</div>
<div class="proofscript" id="proof1724">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">FREE</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_align0</span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs</span>) (<span class="id">p</span> := <span class="id">p</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">FREE</span>; <span class="tactic">simpl</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.free_right_inj">free_right_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1725')">Proof.</div>
<div class="proofscript" id="proof1725">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_result">free_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">FREE</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">PERM</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m2</span>' <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">perm_free_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">b</span>); <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">b</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (~ (<span class="id">lo</span> &lt;= <span class="id">ofs</span> + <span class="id">delta</span> &lt; <span class="id">hi</span>)). <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_align0</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">FREE</span>; <span class="tactic">simpl</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of <span class="bracket"><span class="id">drop_perm</span></span> operations. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.drop_unmapped_inj">drop_unmapped_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">p</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">m1</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1726')">Proof.</div>
<div class="proofscript" id="proof1726">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_perm0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_align0</span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs</span>) (<span class="id">p</span> := <span class="id">p0</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">ofs</span> <span class="id">m1</span>'.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b1</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">ofs</span> <span class="id">m1</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">mi_memval0</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.drop_mapped_inj">drop_mapped_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">p</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">meminj_no_overlap</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) (<span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1727')">Proof.</div>
<div class="proofscript" id="proof1727">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> ({ <span class="id">m2</span>' | <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id">m2</span> <span class="id">b2</span> (<span class="id">lo</span> + <span class="id">delta</span>) (<span class="id">hi</span> + <span class="id">delta</span>) <span class="id">p</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' }).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_drop_2">range_perm_drop_2</a></span>. <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">ofs</span> <span class="kwd">with</span> ((<span class="id">ofs</span> - <span class="id">delta</span>) + <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_drop_1">range_perm_drop_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">X</span> <span class="kwd">as</span> [<span class="id">m2</span>' <span class="id">DROP</span>]. <span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m2</span> <span class="id">b3</span> (<span class="id">ofs</span> + <span class="id">delta0</span>) <span class="id">k</span> <span class="id">p0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">b0</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;b1&nbsp;=&nbsp;b0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>. <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">ofs</span> + <span class="id">delta0</span>) (<span class="id">lo</span> + <span class="id">delta0</span>)). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">hi</span> + <span class="id">delta0</span>) (<span class="id">ofs</span> + <span class="id">delta0</span>)). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memtype.html#perm_order">perm_order</a></span> <span class="id">p</span> <span class="id">p0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_2">perm_drop_2</a></span>.  <span class="id">eexact</span> <span class="id">H0</span>. <span class="id">instantiate</span> (1 := <span class="id">ofs</span>). <span class="tactic">omega</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id">p</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_1">perm_drop_1</a></span>. <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;b1&nbsp;&lt;&gt;&nbsp;b0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b3</span> <span class="id">b2</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">ofs</span> + <span class="id">delta0</span>) (<span class="id">lo</span> + <span class="id">delta</span>)); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> (<span class="id">hi</span> + <span class="id">delta</span>) (<span class="id">ofs</span> + <span class="id">delta0</span>)); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">ofs</span> + <span class="id">delta0</span> - <span class="id">delta</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_drop_1">range_perm_drop_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_max">perm_max</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id">p0</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_align0</span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs</span>) (<span class="id">p</span> := <span class="id">p0</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;memval&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">m1</span>'.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b0</span>) <span class="kwd">with</span> (<span class="id">m1</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">m2</span>'.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b3</span>) <span class="kwd">with</span> (<span class="id">m2</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b3</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">mi_memval0</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="kwd">in</span> <span class="id">DROP</span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m2</span> <span class="id">b2</span> (<span class="id">lo</span> + <span class="id">delta</span>) (<span class="id">hi</span> + <span class="id">delta</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id">DROP</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.drop_outside_inj">drop_outside_inj</a></span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">p</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">ofs</span>' <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1728')">Proof.</div>
<div class="proofscript" id="proof1728">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">b</span>); <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">b2</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">ofs</span> + <span class="id">delta</span>) <span class="id">lo</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">hi</span> (<span class="id">ofs</span> + <span class="id">delta</span>)); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">byContradiction</span>. <span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_align0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">m2</span>'.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b2</span>) <span class="kwd">with</span> (<span class="id">m2</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)#<span class="id">b2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">mi_memval0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Memory extensions </h1>
<br/>
<div class="doc"> A store <span class="bracket"><span class="id">m2</span></span> extends a store <span class="bracket"><span class="id">m1</span></span> if <span class="bracket"><span class="id">m2</span></span> can be obtained from <span class="bracket"><span class="id">m1</span></span>
  by increasing the sizes of the memory blocks of <span class="bracket"><span class="id">m1</span></span> (decreasing
  the low bounds, increasing the high bounds), and replacing some of
  the <span class="bracket"><span class="id">Vundef</span></span> values stored in <span class="bracket"><span class="id">m1</span></span> by more defined values stored
  in <span class="bracket"><span class="id">m2</span></span> at the same locations. </div>
<br/>
<span class="kwd">Record</span> <span class="id">extends</span>' (<span class="id">m1</span> <span class="id">m2</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Mem.mk_extends">mk_extends</a></span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Mem.mext_next">mext_next</a></span>: <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Mem.mext_inj">mext_inj</a></span>:  <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Mem.mext_perm_inv">mext_perm_inv</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> \/ ~<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.extends">extends</a></span> := <span class="id">extends</span>'.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.extends_refl">extends_refl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1729')">Proof.</div>
<div class="proofscript" id="proof1729">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">replace</span> (<span class="id">ofs</span> + 0) <span class="kwd">with</span> <span class="id">ofs</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">replace</span> (<span class="id">ofs</span> + 0) <span class="kwd">with</span> <span class="id">ofs</span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef_refl">memval_lessdef_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_extends">load_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1730')">Proof.</div>
<div class="proofscript" id="proof1730">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_inj">load_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v2</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">exists</span> <span class="id">v2</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + 0) <span class="kwd">with</span> <span class="id">ofs</span> <span class="kwd">in</span> <span class="id">A</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span> <span class="kwd">in</span> <span class="id">B</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadv_extends">loadv_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">addr1</span> <span class="id">addr2</span> <span class="id">v1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#addr1">addr1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#addr1">addr1</a></span> <span class="id"><a href="compcert.common.Memory.html#addr2">addr2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#addr2">addr2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1731')">Proof.</div>
<div class="proofscript" id="proof1731">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">addr2</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_extends">load_extends</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_extends">loadbytes_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">len</span> <span class="id">bytes1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#len">len</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">bytes2</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#len">len</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef">memval_lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1732')">Proof.</div>
<div class="proofscript" id="proof1732">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">ofs</span> <span class="kwd">with</span> (<span class="id">ofs</span> + 0) <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_inj">loadbytes_inj</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_within_extends">store_within_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v1</span> <span class="id">m1</span>' <span class="id">v2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1733')">Proof.</div>
<div class="proofscript" id="proof1733">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mapped_inj">store_mapped_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H3</span>; <span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">m2</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + 0) <span class="kwd">with</span> <span class="id">ofs</span> <span class="kwd">in</span> <span class="id">A</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">nextblock_store</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">nextblock_store</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span>).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">mext_perm_inv0</span>; <span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_1">perm_store_1</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_outside_extends">store_outside_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt;= <span class="id">ofs</span>' &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1734')">Proof.</div>
<div class="proofscript" id="proof1734">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">nextblock_store</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_outside_inj">store_outside_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storev_extends">storev_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">addr1</span> <span class="id">v1</span> <span class="id">m1</span>' <span class="id">addr2</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#addr1">addr1</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#addr1">addr1</a></span> <span class="id"><a href="compcert.common.Memory.html#addr2">addr2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#addr2">addr2</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1735')">Proof.</div>
<div class="proofscript" id="proof1735">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">addr2</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_within_extends">store_within_extends</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_within_extends">storebytes_within_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes1</span> <span class="id">m1</span>' <span class="id">bytes2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef">memval_lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1736')">Proof.</div>
<div class="proofscript" id="proof1736">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mapped_inj">storebytes_mapped_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H3</span>; <span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">m2</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + 0) <span class="kwd">with</span> <span class="id">ofs</span> <span class="kwd">in</span> <span class="id">A</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">nextblock_storebytes</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">nextblock_storebytes</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">A</span>).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">mext_perm_inv0</span>; <span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_outside_extends">storebytes_outside_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes2</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt;= <span class="id">ofs</span>' &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1737')">Proof.</div>
<div class="proofscript" id="proof1737">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">nextblock_storebytes</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_outside_inj">storebytes_outside_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.alloc_extends">alloc_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">lo1</span> <span class="id">hi1</span> <span class="id">b</span> <span class="id">m1</span>' <span class="id">lo2</span> <span class="id">hi2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo1">lo1</a></span> <span class="id"><a href="compcert.common.Memory.html#hi1">hi1</a></span> = (<span class="id">m1</span>', <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#lo2">lo2</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#lo1">lo1</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#hi1">hi1</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#hi2">hi2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#lo2">lo2</a></span> <span class="id"><a href="compcert.common.Memory.html#hi2">hi2</a></span> = (<span class="id">m2</span>', <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1738')">Proof.</div>
<div class="proofscript" id="proof1738">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id">m2</span> <span class="id">lo2</span> <span class="id">hi2</span>); <span class="tactic">intros</span> <span class="id">m2</span>' <span class="id">b</span>' <span class="id">ALLOC</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b</span>' = <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ALLOC</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>'.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">nextblock_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">nextblock_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">ALLOC</span>).<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_mapped_inj">alloc_left_mapped_inj</a></span> <span class="kwd">with</span> (<span class="id">m1</span> := <span class="id">m1</span>) (<span class="id">m2</span> := <span class="id">m2</span>') (<span class="id">b2</span> := <span class="id">b</span>) (<span class="id">delta</span> := 0); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_right_inj">alloc_right_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span> <span class="id">b0</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>); <span class="tactic">intros</span> <span class="id">PERM</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EITHER</span>: <span class="id">lo1</span> &lt;= <span class="id">ofs</span> &lt; <span class="id">hi1</span> \/ ~(<span class="id">lo1</span> &lt;= <span class="id">ofs</span> &lt; <span class="id">hi1</span>)) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">EITHER</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mext_perm_inv0</span>; <span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.free_left_extends">free_left_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id">m1</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1739')">Proof.</div>
<div class="proofscript" id="proof1739">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">nextblock_free</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inj">free_left_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">mext_perm_inv0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_inv">perm_free_inv</a></span> <span class="kwd">in</span> <span class="id">A</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> [[<span class="id">A</span> <span class="id">B</span>]|<span class="id">A</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.free_right_extends">free_right_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1740')">Proof.</div>
<div class="proofscript" id="proof1740">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">nextblock_free</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_right_inj">free_right_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.free_parallel_extends">free_parallel_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1741')">Proof.</div>
<div class="proofscript" id="proof1741">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> ({ <span class="id">m2</span>': <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span> | <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' }).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_free">range_perm_free</a></span>. <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">ofs</span> <span class="kwd">with</span> (<span class="id">ofs</span> + 0) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span> <span class="kwd">with</span> (<span class="id">b1</span> := <span class="id">b</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">free_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">X</span> <span class="kwd">as</span> [<span class="id">m2</span>' <span class="id">FREE</span>]. <span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">nextblock_free</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">nextblock_free</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">FREE</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_right_inj">free_right_inj</a></span> <span class="kwd">with</span> (<span class="id">m1</span> := <span class="id">m1</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inj">free_left_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2</a></span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="id">instantiate</span> (1 := <span class="id">ofs</span>); <span class="tactic">omega</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">mext_perm_inv0</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_inv">perm_free_inv</a></span> <span class="kwd">in</span> <span class="id">A</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> [[<span class="id">A</span> <span class="id">B</span>]|<span class="id">A</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_block_extends">valid_block_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> &lt;-&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1742')">Proof.</div>
<div class="proofscript" id="proof1742">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>. <span class="tactic">rewrite</span> <span class="id">mext_next0</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_extends">perm_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1743')">Proof.</div>
<div class="proofscript" id="proof1743">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">replace</span> <span class="id">ofs</span> <span class="kwd">with</span> (<span class="id">ofs</span> + 0) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_extends_inv">perm_extends_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> \/ ~<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1744')">Proof.</div>
<div class="proofscript" id="proof1744">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_extends">valid_access_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1745')">Proof.</div>
<div class="proofscript" id="proof1745">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">replace</span> <span class="id">ofs</span> <span class="kwd">with</span> (<span class="id">ofs</span> + 0) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_inj">valid_access_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_pointer_extends">valid_pointer_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1746')">Proof.</div>
<div class="proofscript" id="proof1746">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_extends">valid_access_extends</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.weak_valid_pointer_extends">weak_valid_pointer_extends</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1747')">Proof.</div>
<div class="proofscript" id="proof1747">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> 1. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span>. <span class="tactic">rewrite</span> !<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> []; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_extends">valid_pointer_extends</a></span>.<br/>
Qed.</div>
<br/>
<h1> Memory injections </h1>
<br/>
<div class="doc">A memory state <span class="bracket"><span class="id">m1</span></span> injects into another memory state <span class="bracket"><span class="id">m2</span></span> via the
  memory injection <span class="bracket"><span class="id">f</span></span> if the following conditions hold:
<ul>
<li>
 each access in <span class="bracket"><span class="id">m2</span></span> that corresponds to a valid access in <span class="bracket"><span class="id">m1</span></span>
  is itself valid;
</li>
<li>
 the memory value associated in <span class="bracket"><span class="id">m1</span></span> to an accessible address
  must inject into <span class="bracket"><span class="id">m2</span></span>'s memory value at the corersponding address;
</li>
<li>
 unallocated blocks in <span class="bracket"><span class="id">m1</span></span> must be mapped to <span class="bracket"><span class="id">None</span></span> by <span class="bracket"><span class="id">f</span></span>;
</li>
<li>
 if <span class="bracket"><span class="id">f</span> <span class="id">b</span> = <span class="id">Some</span>(<span class="id">b</span>', <span class="id">delta</span>)</span>, <span class="bracket"><span class="id">b</span>'</span> must be valid in <span class="bracket"><span class="id">m2</span></span>;
</li>
<li>
 distinct blocks in <span class="bracket"><span class="id">m1</span></span> are mapped to non-overlapping sub-blocks in <span class="bracket"><span class="id">m2</span></span>;
</li>
<li>
 the sizes of <span class="bracket"><span class="id">m2</span></span>'s blocks are representable with unsigned machine integers;
</li>
<li>
 pointers that could be represented using unsigned machine integers remain
  representable after the injection.
</li>
</ul>
</div>
<br/>
<span class="kwd">Record</span> <span class="id">inject</span>' (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">m1</span> <span class="id">m2</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Mem.mk_inject">mk_inject</a></span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Mem.mi_inj">mi_inj</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Mem.mi_freeblocks">mi_freeblocks</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>, ~(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>) -&gt; <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Mem.mi_mappedblocks">mi_mappedblocks</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>, <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id">b</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Mem.mi_no_overlap">mi_no_overlap</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">meminj_no_overlap</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Mem.mi_representable">mi_representable</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> - 1) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &gt;= 0 /\ 0 &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="Mem.mi_perm_inv">mi_perm_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> \/ ~<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span><br/>
&nbsp;&nbsp;}.<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.inject">inject</a></span> := <span class="id">inject</span>'.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">mi_mappedblocks</span>: <span class="id">mem</span>.<br/>
<br/>
<div class="doc">Preservation of access validity and pointer validity </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_block_inject_1">valid_block_inject_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1748')">Proof.</div>
<div class="proofscript" id="proof1748">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m1</span>)). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">f</span> <span class="id">b1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_freeblocks">mi_freeblocks</a></span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_block_inject_2">valid_block_inject_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1749')">Proof.</div>
<div class="proofscript" id="proof1749">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_mappedblocks">mi_mappedblocks</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">valid_block_inject_1</span> <span class="id">valid_block_inject_2</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_inject">perm_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1750')">Proof.</div>
<div class="proofscript" id="proof1750">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.perm_inject_inv">perm_inject_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> \/ ~<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1751')">Proof.</div>
<div class="proofscript" id="proof1751">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_perm_inv">mi_perm_inv</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.range_perm_inject">range_perm_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) (<span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1752')">Proof.</div>
<div class="proofscript" id="proof1752">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_inj">range_perm_inj</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_access_inject">valid_access_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1753')">Proof.</div>
<div class="proofscript" id="proof1753">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_inj">valid_access_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_inj">mi_inj</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_pointer_inject">valid_pointer_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1754')">Proof.</div>
<div class="proofscript" id="proof1754">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_inject">valid_access_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.weak_valid_pointer_inject">weak_valid_pointer_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1755')">Proof.</div>
<div class="proofscript" id="proof1755">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> 2. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span>. <span class="tactic">rewrite</span> !<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + <span class="id">delta</span> - 1) <span class="kwd">with</span> ((<span class="id">ofs</span> - 1) + <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> []; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_inject">valid_pointer_inject</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">The following lemmas establish the absence of machine integer overflow
  during address computations. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.address_inject">address_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">ofs1</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>)) = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1756')">Proof.</div>
<div class="proofscript" id="proof1756">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m1</span> <span class="id">b1</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>) <span class="tactic">by</span> <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">mi_representable</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (0 &lt;= <span class="id">delta</span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range">Ptrofs.unsigned_range</a></span> <span class="id">ofs1</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">address_inject</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b1</span> <span class="id">ofs1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>)) = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1757')">Proof.</div>
<div class="proofscript" id="proof1757">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">address_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>). <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.weak_valid_pointer_inject_no_overflow">weak_valid_pointer_inject_no_overflow</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1758')">Proof.</div>
<div class="proofscript" id="proof1758">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_spec">weak_valid_pointer_spec</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_nonempty_perm">valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">mi_representable</a></span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range">Ptrofs.unsigned_range</a></span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_pointer_inject_no_overflow">valid_pointer_inject_no_overflow</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1759')">Proof.</div>
<div class="proofscript" id="proof1759">
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_inject_no_overflow">weak_valid_pointer_inject_no_overflow</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_implies">valid_pointer_implies</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.valid_pointer_inject_val">valid_pointer_inject_val</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">ofs</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id">b</span>' (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>') = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1760')">Proof.</div>
<div class="proofscript" id="proof1760">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">address_inject</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_inject">valid_pointer_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.weak_valid_pointer_inject_val">weak_valid_pointer_inject_val</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">b</span>' <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span>' <span class="id">ofs</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">weak_valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id">b</span>' (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>') = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1761')">Proof.</div>
<div class="proofscript" id="proof1761">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_inject">weak_valid_pointer_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">W</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_spec">weak_valid_pointer_spec</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_nonempty_perm">valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">mi_representable</a></span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="id">pose</span> <span class="id">proof</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range">Ptrofs.unsigned_range</a></span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span>. <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">auto</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.inject_no_overlap">inject_no_overlap</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">b1</span>' <span class="id">b2</span>' <span class="id">delta1</span> <span class="id">delta2</span> <span class="id">ofs1</span> <span class="id">ofs2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b1</span>', <span class="id"><a href="compcert.common.Memory.html#delta1">delta1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b2</span>', <span class="id"><a href="compcert.common.Memory.html#delta2">delta2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">b1</span>' &lt;&gt; <span class="id">b2</span>' \/ <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta1">delta1</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta2">delta2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1762')">Proof.</div>
<div class="proofscript" id="proof1762">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id">mi_no_overlap0</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.different_pointers_inject">different_pointers_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b1</span> <span class="id">ofs1</span> <span class="id">b2</span> <span class="id">ofs2</span> <span class="id">b1</span>' <span class="id">delta1</span> <span class="id">b2</span>' <span class="id">delta2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">valid_pointer</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b1</span>', <span class="id"><a href="compcert.common.Memory.html#delta1">delta1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b2</span>', <span class="id"><a href="compcert.common.Memory.html#delta2">delta2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">b1</span>' &lt;&gt; <span class="id">b2</span>' \/<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.common.Memory.html#delta1">delta1</a></span>)) &lt;&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.common.Memory.html#delta2">delta2</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1763')">Proof.</div>
<div class="proofscript" id="proof1763">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_valid_access">valid_pointer_valid_access</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">address_inject</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H1</span> <span class="id">H3</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id">address_inject</span>' <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span> <span class="id">H2</span> <span class="id">H4</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_no_overlap">mi_no_overlap</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="tactic">apply</span> (<span class="id">H5</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span>)). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="tactic">apply</span> (<span class="id">H1</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs2</span>)). <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.disjoint_or_equal_inject">disjoint_or_equal_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b1</span> <span class="id">b1</span>' <span class="id">delta1</span> <span class="id">b2</span> <span class="id">b2</span>' <span class="id">delta2</span> <span class="id">ofs1</span> <span class="id">ofs2</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b1</span>', <span class="id"><a href="compcert.common.Memory.html#delta1">delta1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b2</span>', <span class="id"><a href="compcert.common.Memory.html#delta2">delta2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> + <span class="id"><a href="compcert.common.Memory.html#sz">sz</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> + <span class="id"><a href="compcert.common.Memory.html#sz">sz</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#sz">sz</a></span> &gt; 0 -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> = <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> + <span class="id"><a href="compcert.common.Memory.html#sz">sz</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> \/ <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> + <span class="id"><a href="compcert.common.Memory.html#sz">sz</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">b1</span>' &lt;&gt; <span class="id">b2</span>' \/ <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta1">delta1</a></span> = <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta2">delta2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta1">delta1</a></span> + <span class="id"><a href="compcert.common.Memory.html#sz">sz</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta2">delta2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\/ <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta2">delta2</a></span> + <span class="id"><a href="compcert.common.Memory.html#sz">sz</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta1">delta1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1764')">Proof.</div>
<div class="proofscript" id="proof1764">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">b2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">b1</span>' = <span class="id">b2</span>') <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">assert</span> (<span class="id">delta1</span> = <span class="id">delta2</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H5</span>. <span class="tactic">congruence</span>. <span class="id">right</span>. <span class="tactic">destruct</span> <span class="id">H5</span>. <span class="id">left</span>; <span class="tactic">congruence</span>. <span class="id">right</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span>' <span class="id">b2</span>'); <span class="tactic">auto</span>. <span class="tactic">subst</span>. <span class="id">right</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">i1</span> := (<span class="id">ofs1</span> + <span class="id">delta1</span>, <span class="id">ofs1</span> + <span class="id">delta1</span> + <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">i2</span> := (<span class="id">ofs2</span> + <span class="id">delta2</span>, <span class="id">ofs2</span> + <span class="id">delta2</span> + <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">i1</span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">i2</span> \/ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id">i2</span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">i1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Intv.range_disjoint</span>'; <span class="tactic">simpl</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Intv.html#disjoint">Intv.disjoint</a></span>, <span class="id"><a href="compcert.lib.Intv.html#In">Intv.In</a></span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_no_overlap">mi_no_overlap</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">x</span> - <span class="id">delta1</span>). <span class="tactic">apply</span> <span class="id">H2</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">x</span> - <span class="id">delta2</span>). <span class="tactic">apply</span> <span class="id">H3</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.aligned_area_inject">aligned_area_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">ofs</span> <span class="id">al</span> <span class="id">sz</span> <span class="id">b</span>' <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#al">al</a></span> = 1 \/ <span class="id"><a href="compcert.common.Memory.html#al">al</a></span> = 2 \/ <span class="id"><a href="compcert.common.Memory.html#al">al</a></span> = 4 \/ <span class="id"><a href="compcert.common.Memory.html#al">al</a></span> = 8 -&gt; <span class="id"><a href="compcert.common.Memory.html#sz">sz</a></span> &gt; 0 -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#al">al</a></span> | <span class="id"><a href="compcert.common.Memory.html#sz">sz</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">range_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#sz">sz</a></span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#al">al</a></span> | <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#al">al</a></span> | <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1765')">Proof.</div>
<div class="proofscript" id="proof1765">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">P</span>: <span class="id">al</span> &gt; 0) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Q</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">al</span> &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs">Z.abs</a></span> <span class="id">sz</span>). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znumtheory.html#Zdivide_bounds">Zdivide_bounds</a></span>; <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="kwd">in</span> <span class="id">Q</span>; <span class="tactic">try</span> <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.abs_eq">Z.abs_eq</a></span> <span class="kwd">in</span> <span class="id">Q</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">R</span>: <span class="id">exists</span> <span class="id">chunk</span>, <span class="id">al</span> = <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> /\ <span class="id">al</span> = <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">subst</span>; <span class="id">exists</span> <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">subst</span>; <span class="id">exists</span> <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">subst</span>; <span class="id">exists</span> <span class="id"><a href="compcert.common.AST.html#Mint32">Mint32</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="id">exists</span> <span class="id"><a href="compcert.common.AST.html#Mint64">Mint64</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">R</span> <span class="kwd">as</span> [<span class="id">chunk</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access">valid_access</a></span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id">H3</span>. <span class="tactic">omega</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_inject">valid_access_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">C</span> <span class="id">D</span>].<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of loads </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.load_inject">load_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">v1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1766')">Proof.</div>
<div class="proofscript" id="proof1766">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_inj">load_inj</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadv_inject">loadv_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">v1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#a1">a1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#a1">a1</a></span> <span class="id"><a href="compcert.common.Memory.html#a2">a2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#a2">a2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1767')">Proof.</div>
<div class="proofscript" id="proof1767">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_inject">load_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">v2</span> [<span class="id">LOAD</span> <span class="id">INJ</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv">loadv</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs1</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span> + <span class="id">delta</span>).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id">address_inject</span>'; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.loadbytes_inject">loadbytes_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">len</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">bytes1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#len">len</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">bytes2</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#len">len</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span>) <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1768')">Proof.</div>
<div class="proofscript" id="proof1768">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_inj">loadbytes_inj</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of stores </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_mapped_inject">store_mapped_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">v1</span> <span class="id">n1</span> <span class="id">m2</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1769')">Proof.</div>
<div class="proofscript" id="proof1769">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mapped_inj">store_mapped_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">n2</span> [<span class="id">STORE</span> <span class="id">MI</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n2</span>; <span class="tactic">split</span>. <span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">mi_representable</a></span>; <span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_1">perm_store_1</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_unmapped_inject">store_unmapped_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">v1</span> <span class="id">n1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1770')">Proof.</div>
<div class="proofscript" id="proof1770">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unmapped_inj">store_unmapped_inj</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">mi_representable</a></span>; <span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_1">perm_store_1</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_outside_inject">store_outside_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt;= <span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1771')">Proof.</div>
<div class="proofscript" id="proof1771">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_outside_inj">store_outside_inj</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">perm_store_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storev_mapped_inject">storev_mapped_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">a1</span> <span class="id">v1</span> <span class="id">n1</span> <span class="id">m2</span> <span class="id">a2</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#a1">a1</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#a1">a1</a></span> <span class="id"><a href="compcert.common.Memory.html#a2">a2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#a2">a2</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span> /\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1772')">Proof.</div>
<div class="proofscript" id="proof1772">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">storev</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id">ofs1</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">delta</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs1</span> + <span class="id">delta</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mapped_inject">store_mapped_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id">address_inject</span>'; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_mapped_inject">storebytes_mapped_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">bytes1</span> <span class="id">n1</span> <span class="id">m2</span> <span class="id">b2</span> <span class="id">delta</span> <span class="id">bytes2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span>) <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#n2">n2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1773')">Proof.</div>
<div class="proofscript" id="proof1773">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mapped_inj">storebytes_mapped_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">n2</span> [<span class="id">STORE</span> <span class="id">MI</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n2</span>; <span class="tactic">split</span>. <span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">mi_freeblocks0</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">H3</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_valid_block_1">storebytes_valid_block_1</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_valid_block_1">storebytes_valid_block_1</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_no_overlap0</span>; <span class="tactic">eauto</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_representable0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_unmapped_inject">storebytes_unmapped_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">bytes1</span> <span class="id">n1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes1">bytes1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#n1">n1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1774')">Proof.</div>
<div class="proofscript" id="proof1774">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_unmapped_inj">storebytes_unmapped_inj</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">mi_freeblocks0</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">H2</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_valid_block_1">storebytes_valid_block_1</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_no_overlap0</span>; <span class="tactic">eauto</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_representable0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_outside_inject">storebytes_outside_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes2</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">ofs</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">b</span>' <span class="id">ofs</span>' <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt;= <span class="id">ofs</span>' + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes2">bytes2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1775')">Proof.</div>
<div class="proofscript" id="proof1775">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_outside_inj">storebytes_outside_inj</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_valid_block_1">storebytes_valid_block_1</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.storebytes_empty_inject">storebytes_empty_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">b1</span> <span class="id">ofs1</span> <span class="id">m1</span>' <span class="id">m2</span> <span class="id">b2</span> <span class="id">ofs2</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs1">ofs1</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs2">ofs2</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1776')">Proof.</div>
<div class="proofscript" id="proof1776">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_empty_inj">storebytes_empty_inj</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">mi_freeblocks0</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">H2</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_valid_block_1">storebytes_valid_block_1</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_valid_block_1">storebytes_valid_block_1</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_no_overlap0</span>; <span class="tactic">eauto</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_representable0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H3</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.alloc_right_inject">alloc_right_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">b2</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = (<span class="id">m2</span>', <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1777')">Proof.</div>
<div class="proofscript" id="proof1777">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">injection</span> <span class="id">H0</span>. <span class="tactic">intros</span> <span class="id">NEXT</span> <span class="id">MEM</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_right_inj">alloc_right_inj</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">fresh_block_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.alloc_left_unmapped_inject">alloc_left_unmapped_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>' <span class="id">b1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = (<span class="id">m1</span>', <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id">f</span>' <span class="id">m1</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">f</span>'<br/>
&nbsp;&nbsp;/\ <span class="id">f</span>' <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> -&gt; <span class="id">f</span>' <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1778')">Proof.</div>
<div class="proofscript" id="proof1778">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">f</span>' := <span class="kwd">fun</span> <span class="id">b</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id">b1</span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">else</span> <span class="id">f</span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id">f</span> <span class="id">f</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="tactic">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">f</span> <span class="id">b1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>). <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id">f</span>' <span class="id">m1</span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">mi_inj0</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="tactic">congruence</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="tactic">congruence</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject_incr">memval_inject_incr</a></span> <span class="kwd">with</span> <span class="id">f</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>'; <span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_unmapped_inj">alloc_left_unmapped_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id">f</span>'. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">mi_freeblocks0</span>. <span class="tactic">red</span>; <span class="tactic">intro</span>; <span class="tactic">elim</span> <span class="id">H3</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="tactic">congruence</span>. <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>); <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">b1</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_no_overlap0</span>. <span class="id">eexact</span> <span class="id">H3</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">H6</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">H7</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false</a></span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_representable0</span>; <span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H4</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id">f</span>' <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>.<br/>
<span class="comment">(*&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;image&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="comment">(*&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.alloc_left_mapped_inject">alloc_left_mapped_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>' <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = (<span class="id">m1</span>', <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> = 0 \/ 0 &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span> (<span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inj_offset_aligned">inj_offset_aligned</a></span> <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> (<span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span>-<span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">delta</span>' <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id">delta</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id">delta</span>' &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id">f</span>' <span class="id">m1</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">f</span>'<br/>
&nbsp;&nbsp;/\ <span class="id">f</span>' <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> -&gt; <span class="id">f</span>' <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1779')">Proof.</div>
<div class="proofscript" id="proof1779">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">f</span>' := <span class="kwd">fun</span> <span class="id">b</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id">b1</span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b2</span>, <span class="id">delta</span>) <span class="kwd">else</span> <span class="id">f</span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id">f</span> <span class="id">f</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="tactic">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">f</span> <span class="id">b1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>). <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id">f</span>' <span class="id">m1</span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">mi_inj0</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>. <span class="tactic">subst</span> <span class="id">b0</span> <span class="id">b3</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">fresh_block_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>. <span class="tactic">subst</span> <span class="id">b0</span> <span class="id">b3</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">fresh_block_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_valid_block">perm_valid_block</a></span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs</span>). <span class="tactic">apply</span> <span class="id">H9</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>); <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>. <span class="tactic">subst</span> <span class="id">b0</span> <span class="id">b3</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">fresh_block_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject_incr">memval_inject_incr</a></span> <span class="kwd">with</span> <span class="id">f</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>'. <span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_mapped_inj">alloc_left_mapped_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="tactic">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> <span class="id">H9</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="tactic">congruence</span>. <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">H12</span>. <span class="tactic">intros</span> <span class="id">P1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">H13</span>. <span class="tactic">intros</span> <span class="id">P2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>); <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b3</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H10</span>; <span class="tactic">subst</span> <span class="id">b0</span> <span class="id">b1</span>' <span class="id">delta1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">b2</span>'); <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">b2</span>'. <span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H6</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H11</span>; <span class="tactic">subst</span> <span class="id">b3</span> <span class="id">b2</span>' <span class="id">delta2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span>' <span class="id">b2</span>); <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">b1</span>'. <span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H6</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">injection</span> <span class="id">H9</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">b</span>' <span class="id">delta0</span>. <span class="tactic">destruct</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>; <span class="tactic">eauto</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id">H4</span> <span class="kwd">with</span> (<span class="id">k</span> := <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span>) (<span class="id">p</span> := <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span> <span class="id">ofs</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>; <span class="tactic">eauto</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id">H4</span> <span class="kwd">with</span> (<span class="id">k</span> := <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span>) (<span class="id">p</span> := <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span> <span class="id">ofs</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_representable0</span>; <span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H10</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id">f</span>' <span class="kwd">in</span> <span class="id">H9</span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H9</span>; <span class="tactic">clear</span> <span class="id">H9</span>; <span class="tactic">subst</span> <span class="id">b0</span> <span class="id">b3</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EITHER</span>: <span class="id">lo</span> &lt;= <span class="id">ofs</span> &lt; <span class="id">hi</span> \/ ~(<span class="id">lo</span> &lt;= <span class="id">ofs</span> &lt; <span class="id">hi</span>)) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">EITHER</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">intros</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span> <span class="kwd">in</span> <span class="id">A</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span> <span class="kwd">in</span> <span class="id">A</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span>. <span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>.<br/>
<span class="comment">(*&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;image&nbsp;of&nbsp;b1&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="comment">(*&nbsp;image&nbsp;of&nbsp;others&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.alloc_parallel_inject">alloc_parallel_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">lo1</span> <span class="id">hi1</span> <span class="id">m1</span>' <span class="id">b1</span> <span class="id">lo2</span> <span class="id">hi2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#lo1">lo1</a></span> <span class="id"><a href="compcert.common.Memory.html#hi1">hi1</a></span> = (<span class="id">m1</span>', <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#lo2">lo2</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#lo1">lo1</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#hi1">hi1</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#hi2">hi2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>', <span class="id">exists</span> <span class="id">m2</span>', <span class="id">exists</span> <span class="id">b2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#lo2">lo2</a></span> <span class="id"><a href="compcert.common.Memory.html#hi2">hi2</a></span> = (<span class="id">m2</span>', <span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id">f</span>' <span class="id">m1</span>' <span class="id">m2</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">f</span>'<br/>
&nbsp;&nbsp;/\ <span class="id">f</span>' <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b2">b2</a></span>, 0)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> -&gt; <span class="id">f</span>' <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1780')">Proof.</div>
<div class="proofscript" id="proof1780">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id">m2</span> <span class="id">lo2</span> <span class="id">hi2</span>). <span class="tactic">intros</span> <span class="id">m2</span>' <span class="id">b2</span> <span class="id">ALLOC</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_mapped_inject">alloc_left_mapped_inject</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_right_inject">alloc_right_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">b2</span>). <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := 0). <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>. <span class="tactic">generalize</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.modulus_pos">Ptrofs.modulus_pos</a></span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">valid_not_valid_diff</a></span> <span class="id">m2</span> <span class="id">b2</span> <span class="id">b2</span>); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f</span>' [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>'; <span class="id">exists</span> <span class="id">m2</span>'; <span class="id">exists</span> <span class="id">b2</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of <span class="bracket"><span class="id">free</span></span> operations </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.free_left_inject">free_left_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">m1</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1781')">Proof.</div>
<div class="proofscript" id="proof1781">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inj">free_left_inj</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_representable0</span>; <span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H2</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span>. <span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_inv">perm_free_inv</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">H4</span> <span class="kwd">as</span> [[<span class="id">A</span> <span class="id">B</span>] | <span class="id">A</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b1</span>. <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.free_list_left_inject">free_list_left_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m2</span> <span class="id">l</span> <span class="id">m1</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">free_list</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">m1</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1782')">Proof.</div>
<div class="proofscript" id="proof1782">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b</span> <span class="id">lo</span>] <span class="id">hi</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id">m1</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>) <span class="kwd">as</span> [<span class="id">m11</span>|] <span class="id">eqn</span>:<span class="id">E</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHl</span> <span class="kwd">with</span> <span class="id">m11</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_left_inject">free_left_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.free_right_inject">free_right_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">delta</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1783')">Proof.</div>
<div class="proofscript" id="proof1783">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_right_inj">free_right_inj</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.perm_free_list">perm_free_list</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">free_list</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> /\<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">lo</span> <span class="id">hi</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>, <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span>, <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span>) <span class="id"><a href="compcert.common.Memory.html#l">l</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1784')">Proof.</div>
<div class="proofscript" id="proof1784">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b1</span> <span class="id">lo1</span>] <span class="id">hi1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id">m</span> <span class="id">b1</span> <span class="id">lo1</span> <span class="id">hi1</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:<span class="id">E</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_2">perm_free_2</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">E</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>). <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.free_inject">free_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">l</span> <span class="id">m1</span>' <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">free_list</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">delta</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">lo1</span>, <span class="id">exists</span> <span class="id">hi1</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Memory.html#b1">b1</a></span>, <span class="id"><a href="compcert.common.Memory.html#lo1">lo1</a></span>, <span class="id"><a href="compcert.common.Memory.html#hi1">hi1</a></span>) <span class="id"><a href="compcert.common.Memory.html#l">l</a></span> /\ <span class="id"><a href="compcert.common.Memory.html#lo1">lo1</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi1">hi1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1785')">Proof.</div>
<div class="proofscript" id="proof1785">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_right_inject">free_right_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_list_left_inject">free_list_left_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_list">perm_free_list</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">lo1</span> [<span class="id">hi1</span> [<span class="id">C</span> <span class="id">D</span>]]]. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.free_parallel_inject">free_parallel_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>' <span class="id">b</span>' <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id">b</span>' (<span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) (<span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">m1</span>' <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1786')">Proof.</div>
<div class="proofscript" id="proof1786">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_free">range_perm_free</a></span> <span class="id">m2</span> <span class="id">b</span>' (<span class="id">lo</span> + <span class="id">delta</span>) (<span class="id">hi</span> + <span class="id">delta</span>)) <span class="kwd">as</span> [<span class="id">m2</span>' <span class="id">FREE</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_inject">range_perm_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">free_range_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_inject">free_inject</a></span> <span class="kwd">with</span> (<span class="id">m1</span> := <span class="id">m1</span>) (<span class="id">l</span> := (<span class="id">b</span>,<span class="id">lo</span>,<span class="id">hi</span>)::<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b1</span>. <span class="tactic">rewrite</span> <span class="id">H1</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">lo</span>, <span class="id">hi</span>; <span class="tactic">split</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_no_overlap">mi_no_overlap</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="id">eexact</span> <span class="id">n</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_max">perm_max</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">ofs</span> + <span class="id">delta0</span> - <span class="id">delta</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">perm_cur_max</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">free_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>]. <span class="tactic">congruence</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.drop_outside_inject">drop_outside_inject</a></span>: <span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">p</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>, <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#delta">delta</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id">m2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1787')">Proof.</div>
<div class="proofscript" id="proof1787">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_outside_inj">drop_outside_inj</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="kwd">in</span> *. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_drop">nextblock_drop</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4</a></span>.<br/>
Qed.</div>
<br/>
<div class="doc">Composing two memory injections. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.mem_inj_compose">mem_inj_compose</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">f</span>' <span class="id">m1</span> <span class="id">m2</span> <span class="id">m3</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#m3">m3</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">f</span>') <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m3">m3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1788')">Proof.</div>
<div class="proofscript" id="proof1788">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span>. <span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>'] |] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b</span>') <span class="kwd">as</span> [[<span class="id">b</span>'' <span class="id">delta</span>''] |] <span class="id">eqn</span>:?; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + (<span class="id">delta</span>' + <span class="id">delta</span>'')) <span class="kwd">with</span> ((<span class="id">ofs</span> + <span class="id">delta</span>') + <span class="id">delta</span>'') <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>'] |] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b</span>') <span class="kwd">as</span> [[<span class="id">b</span>'' <span class="id">delta</span>''] |] <span class="id">eqn</span>:?; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_add_r">Z.divide_add_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_align0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_align1</span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs</span> + <span class="id">delta</span>') (<span class="id">p</span> := <span class="id">p</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">replace</span> <span class="id">ofs0</span> <span class="kwd">with</span> ((<span class="id">ofs0</span> - <span class="id">delta</span>') + <span class="id">delta</span>') <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm0</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;memval&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>'] |] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b</span>') <span class="kwd">as</span> [[<span class="id">b</span>'' <span class="id">delta</span>''] |] <span class="id">eqn</span>:?; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + (<span class="id">delta</span>' + <span class="id">delta</span>'')) <span class="kwd">with</span> ((<span class="id">ofs</span> + <span class="id">delta</span>') + <span class="id">delta</span>'') <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject_compose">memval_inject_compose</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.inject_compose">inject_compose</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">f</span>' <span class="id">m1</span> <span class="id">m2</span> <span class="id">m3</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#m3">m3</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id">f</span>') <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m3">m3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1789')">Proof.</div>
<div class="proofscript" id="proof1789">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj_compose">mem_inj_compose</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;unmapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">erewrite</span> <span class="id">mi_freeblocks0</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b1</span> <span class="id">delta1</span>] |] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b2</span> <span class="id">delta2</span>] |] <span class="id">eqn</span>:?; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b1x</span> <span class="id">delta1x</span>] |] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b1x</span>) <span class="kwd">as</span> [[<span class="id">b1y</span> <span class="id">delta1y</span>] |] <span class="id">eqn</span>:?; <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b2</span>) <span class="kwd">as</span> [[<span class="id">b2x</span> <span class="id">delta2x</span>] |] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b2x</span>) <span class="kwd">as</span> [[<span class="id">b2y</span> <span class="id">delta2y</span>] |] <span class="id">eqn</span>:?; <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_no_overlap0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1x</span> <span class="id">b2x</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b1x</span>. <span class="tactic">destruct</span> <span class="id">A</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">delta1y</span> = <span class="id">delta2y</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="id">right</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_no_overlap1</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">H3</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b1</span> <span class="id">delta1</span>] |] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b2</span> <span class="id">delta2</span>] |] <span class="id">eqn</span>:?; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_representable0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">ofs</span>' := <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">delta1</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>' = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">delta1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">ofs</span>'; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_representable1</span>. <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id">ofs</span>').<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">delta1</span> - 1) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> - 1) + <span class="id">delta1</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b1</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>'] |] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span>' <span class="id">b</span>') <span class="kwd">as</span> [[<span class="id">b</span>'' <span class="id">delta</span>''] |] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">clear</span> <span class="id">H</span>; <span class="tactic">subst</span> <span class="id">b</span>'' <span class="id">delta</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + (<span class="id">delta</span>' + <span class="id">delta</span>'')) <span class="kwd">with</span> ((<span class="id">ofs</span> + <span class="id">delta</span>') + <span class="id">delta</span>'') <span class="kwd">in</span> <span class="id">H0</span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_perm_inv1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.val_lessdef_inject_compose">val_lessdef_inject_compose</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">v3</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> <span class="id"><a href="compcert.common.Memory.html#v3">v3</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v3">v3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1790')">Proof.</div>
<div class="proofscript" id="proof1790">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.val_inject_lessdef_compose">val_inject_lessdef_compose</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">v3</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.common.Memory.html#v2">v2</a></span> <span class="id"><a href="compcert.common.Memory.html#v3">v3</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#v1">v1</a></span> <span class="id"><a href="compcert.common.Memory.html#v3">v3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1791')">Proof.</div>
<div class="proofscript" id="proof1791">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.extends_inject_compose">extends_inject_compose</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">m3</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#m3">m3</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m3">m3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1792')">Proof.</div>
<div class="proofscript" id="proof1792">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">f</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id">f</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj_compose">mem_inj_compose</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="tactic">extensionality</span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span>, <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">x</span>) <span class="kwd">as</span> [[<span class="id">y</span> <span class="id">delta</span>] | ]; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;unmapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_freeblocks0</span>. <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_extends">valid_block_extends</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_no_overlap0</span>; <span class="tactic">eauto</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_extends">perm_extends</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_representable0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_extends">perm_extends</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mext_perm_inv0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_extends">perm_extends</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.inject_extends_compose">inject_extends_compose</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">m3</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#m3">m3</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.common.Memory.html#f">f</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m3">m3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1793')">Proof.</div>
<div class="proofscript" id="proof1793">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">inversion</span> <span class="id">H0</span>. <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">f</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id">f</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj_compose">mem_inj_compose</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="tactic">extensionality</span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span>, <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">x</span>) <span class="kwd">as</span> [[<span class="id">y</span> <span class="id">delta</span>] | ]; <span class="tactic">auto</span>. <span class="id">decEq</span>. <span class="id">decEq</span>. <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;unmapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;mapped&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_extends">valid_block_extends</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">mi_no_overlap0</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_representable0</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mext_perm_inv0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inj">perm_inj</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.extends_extends_compose">extends_extends_compose</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">m3</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#m3">m3</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.extends">extends</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m3">m3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1794')">Proof.</div>
<div class="proofscript" id="proof1794">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;nextblock&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;meminj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj_compose">mem_inj_compose</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="tactic">extensionality</span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#compose_meminj">compose_meminj</a></span>, <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mext_perm_inv1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mext_perm_inv0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_extends">perm_extends</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Injecting a memory into itself. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.flat_inj">flat_inj</a></span> (<span class="id">thr</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) : <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>, 0) <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem.inject_neutral">inject_neutral</a></span> (<span class="id">thr</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span>) <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="Mem.flat_inj_no_overlap">flat_inj_no_overlap</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thr</span> <span class="id">m</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">meminj_no_overlap</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span>) <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1795')">Proof.</div>
<div class="proofscript" id="proof1795">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>; <span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> <span class="id">thr</span>); <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b2</span> <span class="id">thr</span>); <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.neutral_inject">neutral_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>) <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>)) <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1796')">Proof.</div>
<div class="proofscript" id="proof1796">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;meminj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>)); <span class="tactic">inversion</span> <span class="id">H0</span>; <span class="tactic">subst</span>. <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;no&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj_no_overlap">flat_inj_no_overlap</a></span>.<br/>
<span class="comment">(*&nbsp;range&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>)); <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span> <span class="id">ofs</span>); <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>)); <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.empty_inject_neutral">empty_inject_neutral</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thr</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span> <span class="id"><a href="compcert.common.Memory.html#Mem.empty">empty</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1797')">Proof.</div>
<div class="proofscript" id="proof1797">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> <span class="id">thr</span>); <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + 0) <span class="kwd">with</span> <span class="id">ofs</span> <span class="tactic">by</span> <span class="tactic">omega</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;align&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> <span class="id">thr</span>); <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
<span class="comment">(*&nbsp;mem_contents&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#PMap.gi">PMap.gi</a></span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#ZMap.gi">ZMap.gi</a></span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.alloc_inject_neutral">alloc_inject_neutral</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">thr</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">b</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = (<span class="id">m</span>', <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>) <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1798')">Proof.</div>
<div class="proofscript" id="proof1798">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_mapped_inj">alloc_left_mapped_inj</a></span> <span class="kwd">with</span> (<span class="id">m1</span> := <span class="id">m</span>) (<span class="id">b2</span> := <span class="id">b</span>) (<span class="id">delta</span> := 0).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_right_inj">alloc_right_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.store_inject_neutral">store_inject_neutral</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m</span>' <span class="id">thr</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span>) <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1799')">Proof.</div>
<div class="proofscript" id="proof1799">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mapped_inj">store_mapped_inj</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj_no_overlap">flat_inj_no_overlap</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>; <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + 0) <span class="kwd">with</span> <span class="id">ofs</span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">m</span>'' [<span class="id">A</span> <span class="id">B</span>]]. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem.drop_inject_neutral">drop_inject_neutral</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">p</span> <span class="id">m</span>' <span class="id">thr</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span> <span class="id"><a href="compcert.common.Memory.html#thr">thr</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1800')">Proof.</div>
<div class="proofscript" id="proof1800">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject_neutral">inject_neutral</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_mapped_inj">drop_mapped_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj_no_overlap">flat_inj_no_overlap</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">flat_inj</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">intros</span> [<span class="id">m</span>'' [<span class="id">A</span> <span class="id">B</span>]]. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<h1> Invariance properties between two memory states </h1>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Mem.UNCHANGED_ON">UNCHANGED_ON</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Mem.UNCHANGED_ON.P">P</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="Mem.unchanged_on">unchanged_on</a></span> (<span class="id">m_before</span> <span class="id">m_after</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem">mem</a></span>) : <span class="kwd">Prop</span> := <span class="id"><a name="Mem.mk_unchanged_on">mk_unchanged_on</a></span> {<br/>
&nbsp;&nbsp;<span class="id"><a name="Mem.unchanged_on_nextblock">unchanged_on_nextblock</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m_before">m_before</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m_after">m_after</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a name="Mem.unchanged_on_perm">unchanged_on_perm</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m_before">m_before</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m_before">m_before</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> &lt;-&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m_after">m_after</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a name="Mem.unchanged_on_contents">unchanged_on_contents</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m_before">m_before</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#m_after">m_after</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>)) =<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#m_before">m_before</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span>))<br/>
}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.unchanged_on_refl">unchanged_on_refl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1801')">Proof.</div>
<div class="proofscript" id="proof1801">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>. <span class="tactic">tauto</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.valid_block_unchanged_on">valid_block_unchanged_on</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1802')">Proof.</div>
<div class="proofscript" id="proof1802">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">unchanged_on_nextblock</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.perm_unchanged_on">perm_unchanged_on</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1803')">Proof.</div>
<div class="proofscript" id="proof1803">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">unchanged_on_perm0</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_valid_block">perm_valid_block</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.perm_unchanged_on_2">perm_unchanged_on_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#k">k</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1804')">Proof.</div>
<div class="proofscript" id="proof1804">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">unchanged_on_perm0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.unchanged_on_trans">unchanged_on_trans</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">m3</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m2">m2</a></span> <span class="id"><a href="compcert.common.Memory.html#m3">m3</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m1">m1</a></span> <span class="id"><a href="compcert.common.Memory.html#m3">m3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1805')">Proof.</div>
<div class="proofscript" id="proof1805">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m2</span>); <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_nextblock">unchanged_on_nextblock</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>); <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_perm">unchanged_on_perm</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_unchanged_on">valid_block_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id">ofs</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">mem_contents</a></span> <span class="id">m2</span>)#<span class="id">b</span>); <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">perm_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.loadbytes_unchanged_on_1">loadbytes_unchanged_on_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1806')">Proof.</div>
<div class="proofscript" id="proof1806">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">n</span> 0).<br/>
+ <span class="id">erewrite</span> ! <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_empty">loadbytes_empty</a></span> <span class="tactic">by</span> <span class="tactic">assumption</span>. <span class="tactic">auto</span>.<br/>
+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> (<span class="id">ofs</span> + <span class="id">n</span>) <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_exten">getN_exten</a></span>. <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span> <span class="kwd">in</span> <span class="id">H</span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">unchanged_on_contents0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">unchanged_on_perm0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">n0</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> &lt;- <span class="id">unchanged_on_perm0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.loadbytes_unchanged_on">loadbytes_unchanged_on</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">ofs</span> <span class="id">n</span> <span class="id">bytes</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">loadbytes</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1807')">Proof.</div>
<div class="proofscript" id="proof1807">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">n</span> 0).<br/>
+ <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_empty">loadbytes_empty</a></span> <span class="kwd">in</span> * <span class="tactic">by</span> <span class="tactic">assumption</span>. <span class="tactic">auto</span>.<br/>
+ <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_unchanged_on_1">loadbytes_unchanged_on_1</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes_range_perm">loadbytes_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1 := <span class="id">ofs</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.load_unchanged_on_1">load_unchanged_on_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1808')">Proof.</div>
<div class="proofscript" id="proof1808">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_access_dec">valid_access_dec</a></span> <span class="id">m</span> <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">v</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>. <span class="tactic">f_equal</span>. <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.getN_exten">getN_exten</a></span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_contents">unchanged_on_contents</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">perm_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_false">pred_dec_false</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]; <span class="tactic">elim</span> <span class="id">n</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on_2">perm_unchanged_on_2</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.load_unchanged_on">load_unchanged_on</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">chunk</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">load</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1809')">Proof.</div>
<div class="proofscript" id="proof1809">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_unchanged_on_1">load_unchanged_on_1</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.store_unchanged_on">store_unchanged_on</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.store">store</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id"><a href="compcert.common.Memory.html#chunk">chunk</a></span> -&gt; ~ <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1810')">Proof.</div>
<div class="proofscript" id="proof1810">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">nextblock_store</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
- <span class="tactic">split</span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
- <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_mem_contents">store_mem_contents</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>); <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">b0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Memdata.html#size_chunk_conv">size_chunk_conv</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> <span class="id">ofs</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> (<span class="id">ofs</span> + <span class="id"><a href="compcert.common.Memdata.html#size_chunk">size_chunk</a></span> <span class="id">chunk</span>)); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id">H0</span> <span class="id">ofs0</span>). <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.storebytes_unchanged_on">storebytes_unchanged_on</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">bytes</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storebytes">storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Memory.html#bytes">bytes</a></span>) -&gt; ~ <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1811')">Proof.</div>
<div class="proofscript" id="proof1811">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_storebytes">nextblock_storebytes</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
- <span class="tactic">split</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_1">perm_storebytes_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_storebytes_2">perm_storebytes_2</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storebytes_mem_contents">storebytes_mem_contents</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">b0</span> <span class="id">b</span>); <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">b0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">setN_outside</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> <span class="id">ofs</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs0</span> (<span class="id">ofs</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">bytes</span>))); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id">H0</span> <span class="id">ofs0</span>). <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.alloc_unchanged_on">alloc_unchanged_on</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m</span>' <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = (<span class="id">m</span>', <span class="id"><a href="compcert.common.Memory.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1812')">Proof.</div>
<div class="proofscript" id="proof1812">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">nextblock_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_succ">Ple_succ</a></span>.<br/>
- <span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">valid_not_valid_diff</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
- <span class="tactic">injection</span> <span class="id">H</span>; <span class="tactic">intros</span> <span class="id">A</span> <span class="id">B</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">B</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gso">PMap.gso</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">A</span>.  <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_not_valid_diff">valid_not_valid_diff</a></span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.free_unchanged_on">free_unchanged_on</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt; ~ <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1813')">Proof.</div>
<div class="proofscript" id="proof1813">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">nextblock_free</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
- <span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">perm_free_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b</span>); <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> <span class="id">lo</span>); <span class="tactic">auto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">hi</span> <span class="id">ofs</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>. <span class="tactic">elim</span> (<span class="id">H0</span> <span class="id">ofs</span>). <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">perm_free_3</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">free</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.free_list_nextblock">free_list_nextblock</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">free_list</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">nextblock</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1814')">Proof.</div>
<div class="proofscript" id="proof1814">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>. <span class="tactic">destruct</span> <span class="id">p</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">z0</span> <span class="id">z</span>) <span class="kwd">as</span> [<span class="id">m1</span>|] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>). <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.free_list_unchanged_on">free_list_unchanged_on</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">free_list</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">i</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.Memory.html#b">b</a></span>, <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span>, <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span>) <span class="id"><a href="compcert.common.Memory.html#l">l</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt; ~ <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1815')">Proof.</div>
<div class="proofscript" id="proof1815">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="id">i</span>.<br/>
&nbsp;&nbsp;- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">unchanged_on_refl</a></span>.<br/>
&nbsp;&nbsp;- <span class="tactic">destruct</span> <span class="id">a</span>, <span class="id">p</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_unchanged_on">free_unchanged_on</a></span>; <span class="tactic">eauto</span>. { <span class="id">i</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="id">left</span>; <span class="id">ss</span>. } <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_trans">unchanged_on_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="id">right</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.drop_perm_unchanged_on">drop_perm_unchanged_on</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">p</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memory.html#p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.common.Memory.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.common.Memory.html#i">i</a></span> &lt; <span class="id"><a href="compcert.common.Memory.html#hi">hi</a></span> -&gt; ~ <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON.P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#i">i</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1816')">Proof.</div>
<div class="proofscript" id="proof1816">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_drop">nextblock_drop</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
- <span class="tactic">split</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_3">perm_drop_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (~ (<span class="id">lo</span> &lt;= <span class="id">ofs</span> &lt; <span class="id">hi</span>)). { <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">eelim</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_drop_4">perm_drop_4</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.drop_perm">drop_perm</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">range_perm_dec</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>); <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem.UNCHANGED_ON">UNCHANGED_ON</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem.unchanged_on_implies">unchanged_on_implies</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span> <span class="id">Q</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.Memory.html#Q">Q</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#P">P</a></span> <span class="id"><a href="compcert.common.Memory.html#b">b</a></span> <span class="id"><a href="compcert.common.Memory.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">unchanged_on</a></span> <span class="id"><a href="compcert.common.Memory.html#Q">Q</a></span> <span class="id"><a href="compcert.common.Memory.html#m">m</a></span> <span class="id">m</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1817')">Proof.</div>
<div class="proofscript" id="proof1817">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id">unchanged_on_perm0</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id">unchanged_on_contents0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_valid_block">perm_valid_block</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Memory.html#Mem">Mem</a></span>.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="mem">mem</a></span> := <span class="id"><a href="compcert.common.Memory.html#mem">Mem.mem</a></span>.<br/>
<br/>
<span class="kwd">Global</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Memory.html#alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.common.Memory.html#free">Mem.free</a></span> <span class="id"><a href="compcert.common.Memory.html#store">Mem.store</a></span> <span class="id"><a href="compcert.common.Memory.html#load">Mem.load</a></span> <span class="id"><a href="compcert.common.Memory.html#storebytes">Mem.storebytes</a></span> <span class="id"><a href="compcert.common.Memory.html#loadbytes">Mem.loadbytes</a></span>.<br/>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_not_valid_diff</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_implies</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_cur</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_max</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_valid_block</span><br/>
&nbsp;&nbsp;<span class="id">Mem.range_perm_implies</span><br/>
&nbsp;&nbsp;<span class="id">Mem.range_perm_cur</span><br/>
&nbsp;&nbsp;<span class="id">Mem.range_perm_max</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_implies</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_valid_block</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_perm</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_load</span><br/>
&nbsp;&nbsp;<span class="id">Mem.load_valid_access</span><br/>
&nbsp;&nbsp;<span class="id">Mem.loadbytes_range_perm</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_store</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_store_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_store_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.nextblock_store</span><br/>
&nbsp;&nbsp;<span class="id">Mem.store_valid_block_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.store_valid_block_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.store_valid_access_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.store_valid_access_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.store_valid_access_3</span><br/>
&nbsp;&nbsp;<span class="id">Mem.storebytes_range_perm</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_storebytes_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_storebytes_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.storebytes_valid_access_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.storebytes_valid_access_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.nextblock_storebytes</span><br/>
&nbsp;&nbsp;<span class="id">Mem.storebytes_valid_block_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.storebytes_valid_block_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.nextblock_alloc</span><br/>
&nbsp;&nbsp;<span class="id">Mem.alloc_result</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_block_alloc</span><br/>
&nbsp;&nbsp;<span class="id">Mem.fresh_block_alloc</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_new_block</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_alloc_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_alloc_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_alloc_3</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_alloc_4</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_alloc_inv</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_alloc_other</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_alloc_same</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_alloc_inv</span><br/>
&nbsp;&nbsp;<span class="id">Mem.range_perm_free</span><br/>
&nbsp;&nbsp;<span class="id">Mem.free_range_perm</span><br/>
&nbsp;&nbsp;<span class="id">Mem.nextblock_free</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_block_free_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_block_free_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_free_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_free_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.perm_free_3</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_free_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_free_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_free_inv_1</span><br/>
&nbsp;&nbsp;<span class="id">Mem.valid_access_free_inv_2</span><br/>
&nbsp;&nbsp;<span class="id">Mem.unchanged_on_refl</span><br/>
: <span class="id">mem</span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
