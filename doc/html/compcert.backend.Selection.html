
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Selection</title>
<meta name="description" content="Documentation of Coq module Selection" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Selection</h1>
<div class="coq">
<br/>
<div class="doc">Instruction selection </div>
<br/>
<div class="doc">The instruction selection pass recognizes opportunities for using
  combined arithmetic and logical operations and addressing modes
  offered by the target processor.  For instance, the expression <span class="bracket"><span class="id">x</span> + 1</span>
  can take advantage of the "immediate add" instruction of the processor,
  and on the PowerPC, the expression <span class="bracket">(<span class="id">x</span> &gt;&gt; 6) &amp; 0<span class="id">xFF</span></span> can be turned
  into a "rotate and mask" instruction.
  Instruction selection proceeds by bottom-up rewriting over expressions.
  The source language is Cminor and the target language is CminorSel. </div>
<br/>
<span class="kwd">Require</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html">String</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="compcert.common.Switch.html">Switch</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.backend.Cminor.html">Cminor</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span> <span class="id"><a href="compcert.backend.CminorSel.html">CminorSel</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.x86.SelectOp.html">SelectOp</a></span> <span class="id"><a href="compcert.backend.SplitLong.html">SplitLong</a></span> <span class="id"><a href="compcert.x86.SelectLong.html">SelectLong</a></span> <span class="id"><a href="compcert.backend.SelectDiv.html">SelectDiv</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.x86.Machregs.html">Machregs</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">cminorsel_scope</span>.<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<br/>
<div class="doc">Conversion of conditions </div>
<br/>
<span class="id">Function</span> <span class="id">condexpr_of_expr</span> (<span class="id">e</span>: <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span>) : <span class="id"><a href="compcert.backend.CminorSel.html#condexpr">condexpr</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#e">e</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="compcert.x86.Op.html#Ocmp">Ocmp</a></span> <span class="id">c</span>) <span class="id">el</span> =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#CEcond">CEcond</a></span> <span class="id">c</span> <span class="id">el</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.CminorSel.html#Econdition">Econdition</a></span> <span class="id">a</span> <span class="id">b</span> <span class="id">c</span> =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#CEcondition">CEcondition</a></span> <span class="id">a</span> (<span class="id"><a href="compcert.backend.Selection.html#condexpr_of_expr">condexpr_of_expr</a></span> <span class="id">b</span>) (<span class="id"><a href="compcert.backend.Selection.html#condexpr_of_expr">condexpr_of_expr</a></span> <span class="id">c</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.CminorSel.html#Elet">Elet</a></span> <span class="id">a</span> <span class="id">b</span> =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#CElet">CElet</a></span> <span class="id">a</span> (<span class="id"><a href="compcert.backend.Selection.html#condexpr_of_expr">condexpr_of_expr</a></span> <span class="id">b</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#CEcond">CEcond</a></span> (<span class="id"><a href="compcert.x86.Op.html#Ccompuimm">Ccompuimm</a></span> <span class="id"><a href="compcert.lib.Integers.html#Cne">Cne</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>) (<span class="id"><a href="compcert.backend.Selection.html#e">e</a></span> ::: <span class="id"><a href="compcert.backend.CminorSel.html#Enil">Enil</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Conversion of loads and stores </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="load">load</a></span> (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">e1</span>: <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.x86.SelectOp.html#addressing">addressing</a></span> <span class="id"><a href="compcert.backend.Selection.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.Selection.html#e1">e1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| (<span class="id">mode</span>, <span class="id">args</span>) =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Eload">Eload</a></span> <span class="id"><a href="compcert.backend.Selection.html#chunk">chunk</a></span> <span class="id">mode</span> <span class="id">args</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="store">store</a></span> (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) (<span class="id">e1</span> <span class="id">e2</span>: <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.x86.SelectOp.html#addressing">addressing</a></span> <span class="id"><a href="compcert.backend.Selection.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.Selection.html#e1">e1</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| (<span class="id">mode</span>, <span class="id">args</span>) =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Sstore">Sstore</a></span> <span class="id"><a href="compcert.backend.Selection.html#chunk">chunk</a></span> <span class="id">mode</span> <span class="id">args</span> <span class="id"><a href="compcert.backend.Selection.html#e2">e2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Instruction selection for operator applications.  Most of the work
    is done by the processor-specific smart constructors defined
    in modules <span class="bracket"><span class="id">SelectOp</span></span> and <span class="bracket"><span class="id">SelectLong</span></span>. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SELECTION">SELECTION</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="globdef">globdef</a></span> := <span class="id"><a href="compcert.common.AST.html#globdef">AST.globdef</a></span> <span class="id"><a href="compcert.backend.Cminor.html#fundef">Cminor.fundef</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SELECTION.defmap">defmap</a></span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.backend.Selection.html#globdef">globdef</a></span>.<br/>
<span class="kwd">Context</span> {<span class="id">hf</span>: <span class="id"><a href="compcert.backend.SplitLong.html#helper_functions">helper_functions</a></span>}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sel_constant">sel_constant</a></span> (<span class="id">cst</span>: <span class="id"><a href="compcert.backend.Cminor.html#constant">Cminor.constant</a></span>) : <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#cst">cst</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ointconst">Cminor.Ointconst</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="compcert.x86.Op.html#Ointconst">Ointconst</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.backend.CminorSel.html#Enil">Enil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ofloatconst">Cminor.Ofloatconst</a></span> <span class="id">f</span> =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="compcert.x86.Op.html#Ofloatconst">Ofloatconst</a></span> <span class="id">f</span>) <span class="id"><a href="compcert.backend.CminorSel.html#Enil">Enil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Osingleconst">Cminor.Osingleconst</a></span> <span class="id">f</span> =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="compcert.x86.Op.html#Osingleconst">Osingleconst</a></span> <span class="id">f</span>) <span class="id"><a href="compcert.backend.CminorSel.html#Enil">Enil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Olongconst">Cminor.Olongconst</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#longconst">longconst</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oaddrsymbol">Cminor.Oaddrsymbol</a></span> <span class="id">id</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#addrsymbol">addrsymbol</a></span> <span class="id">id</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oaddrstack">Cminor.Oaddrstack</a></span> <span class="id">ofs</span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#addrstack">addrstack</a></span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sel_unop">sel_unop</a></span> (<span class="id">op</span>: <span class="id"><a href="compcert.backend.Cminor.html#unary_operation">Cminor.unary_operation</a></span>) (<span class="id">arg</span>: <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span>) : <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#op">op</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ocast8unsigned">Cminor.Ocast8unsigned</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#cast8unsigned">cast8unsigned</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ocast8signed">Cminor.Ocast8signed</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#cast8signed">cast8signed</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ocast16unsigned">Cminor.Ocast16unsigned</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#cast16unsigned">cast16unsigned</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ocast16signed">Cminor.Ocast16signed</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#cast16signed">cast16signed</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Onegint">Cminor.Onegint</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#negint">negint</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Onotint">Cminor.Onotint</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#notint">notint</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Onegf">Cminor.Onegf</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#negf">negf</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oabsf">Cminor.Oabsf</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#absf">absf</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Onegfs">Cminor.Onegfs</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#negfs">negfs</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oabsfs">Cminor.Oabsfs</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#absfs">absfs</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Osingleoffloat">Cminor.Osingleoffloat</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#singleoffloat">singleoffloat</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ofloatofsingle">Cminor.Ofloatofsingle</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#floatofsingle">floatofsingle</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ointoffloat">Cminor.Ointoffloat</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#intoffloat">intoffloat</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ointuoffloat">Cminor.Ointuoffloat</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#intuoffloat">intuoffloat</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ofloatofint">Cminor.Ofloatofint</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#floatofint">floatofint</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ofloatofintu">Cminor.Ofloatofintu</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#floatofintu">floatofintu</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ointofsingle">Cminor.Ointofsingle</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#intofsingle">intofsingle</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ointuofsingle">Cminor.Ointuofsingle</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#intuofsingle">intuofsingle</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Osingleofint">Cminor.Osingleofint</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#singleofint">singleofint</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Osingleofintu">Cminor.Osingleofintu</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#singleofintu">singleofintu</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Onegl">Cminor.Onegl</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#negl">negl</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Onotl">Cminor.Onotl</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#notl">notl</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ointoflong">Cminor.Ointoflong</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#intoflong">intoflong</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Olongofint">Cminor.Olongofint</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#longofint">longofint</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Olongofintu">Cminor.Olongofintu</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#longofintu">longofintu</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Olongoffloat">Cminor.Olongoffloat</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#longoffloat">longoffloat</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Olonguoffloat">Cminor.Olonguoffloat</a></span> =&gt; <span class="id"><a href="compcert.backend.SplitLong.html#longuoffloat">longuoffloat</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ofloatoflong">Cminor.Ofloatoflong</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#floatoflong">floatoflong</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ofloatoflongu">Cminor.Ofloatoflongu</a></span> =&gt; <span class="id"><a href="compcert.backend.SplitLong.html#floatoflongu">floatoflongu</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Olongofsingle">Cminor.Olongofsingle</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#longofsingle">longofsingle</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Olonguofsingle">Cminor.Olonguofsingle</a></span> =&gt; <span class="id"><a href="compcert.backend.SplitLong.html#longuofsingle">longuofsingle</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Osingleoflong">Cminor.Osingleoflong</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#singleoflong">singleoflong</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Osingleoflongu">Cminor.Osingleoflongu</a></span> =&gt; <span class="id"><a href="compcert.backend.SplitLong.html#singleoflongu">singleoflongu</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sel_binop">sel_binop</a></span> (<span class="id">op</span>: <span class="id"><a href="compcert.backend.Cminor.html#binary_operation">Cminor.binary_operation</a></span>) (<span class="id">arg1</span> <span class="id">arg2</span>: <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span>) : <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#op">op</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oadd">Cminor.Oadd</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#add">add</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Osub">Cminor.Osub</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#sub">sub</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Omul">Cminor.Omul</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#mul">mul</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Odiv">Cminor.Odiv</a></span> =&gt; <span class="id"><a href="compcert.backend.SelectDiv.html#divs">divs</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Odivu">Cminor.Odivu</a></span> =&gt; <span class="id"><a href="compcert.backend.SelectDiv.html#divu">divu</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Omod">Cminor.Omod</a></span> =&gt; <span class="id"><a href="compcert.backend.SelectDiv.html#mods">mods</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Omodu">Cminor.Omodu</a></span> =&gt; <span class="id"><a href="compcert.backend.SelectDiv.html#modu">modu</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oand">Cminor.Oand</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#and">and</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oor">Cminor.Oor</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#or">or</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oxor">Cminor.Oxor</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#xor">xor</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oshl">Cminor.Oshl</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#shl">shl</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oshr">Cminor.Oshr</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#shr">shr</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oshru">Cminor.Oshru</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#shru">shru</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oaddf">Cminor.Oaddf</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#addf">addf</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Osubf">Cminor.Osubf</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#subf">subf</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Omulf">Cminor.Omulf</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#mulf">mulf</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Odivf">Cminor.Odivf</a></span> =&gt; <span class="id"><a href="compcert.backend.SelectDiv.html#divf">divf</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oaddfs">Cminor.Oaddfs</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#addfs">addfs</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Osubfs">Cminor.Osubfs</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#subfs">subfs</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Omulfs">Cminor.Omulfs</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#mulfs">mulfs</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Odivfs">Cminor.Odivfs</a></span> =&gt; <span class="id"><a href="compcert.backend.SelectDiv.html#divfs">divfs</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oaddl">Cminor.Oaddl</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#addl">addl</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Osubl">Cminor.Osubl</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#subl">subl</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Omull">Cminor.Omull</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#mull">mull</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Odivl">Cminor.Odivl</a></span> =&gt; <span class="id"><a href="compcert.backend.SelectDiv.html#divls">divls</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Odivlu">Cminor.Odivlu</a></span> =&gt; <span class="id"><a href="compcert.backend.SelectDiv.html#divlu">divlu</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Omodl">Cminor.Omodl</a></span> =&gt; <span class="id"><a href="compcert.backend.SelectDiv.html#modls">modls</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Omodlu">Cminor.Omodlu</a></span> =&gt; <span class="id"><a href="compcert.backend.SelectDiv.html#modlu">modlu</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oandl">Cminor.Oandl</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#andl">andl</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oorl">Cminor.Oorl</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#orl">orl</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oxorl">Cminor.Oxorl</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#xorl">xorl</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oshll">Cminor.Oshll</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#shll">shll</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oshrl">Cminor.Oshrl</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#shrl">shrl</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Oshrlu">Cminor.Oshrlu</a></span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#shrlu">shrlu</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ocmp">Cminor.Ocmp</a></span> <span class="id">c</span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#comp">comp</a></span> <span class="id">c</span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ocmpu">Cminor.Ocmpu</a></span> <span class="id">c</span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#compu">compu</a></span> <span class="id">c</span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ocmpf">Cminor.Ocmpf</a></span> <span class="id">c</span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#compf">compf</a></span> <span class="id">c</span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ocmpfs">Cminor.Ocmpfs</a></span> <span class="id">c</span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#compfs">compfs</a></span> <span class="id">c</span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ocmpl">Cminor.Ocmpl</a></span> <span class="id">c</span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#cmpl">cmpl</a></span> <span class="id">c</span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ocmplu">Cminor.Ocmplu</a></span> <span class="id">c</span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#cmplu">cmplu</a></span> <span class="id">c</span> <span class="id"><a href="compcert.backend.Selection.html#arg1">arg1</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg2">arg2</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Conversion from Cminor expression to Cminorsel expressions </div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="sel_expr">sel_expr</a></span> (<span class="id">a</span>: <span class="id"><a href="compcert.backend.Cminor.html#expr">Cminor.expr</a></span>) : <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#a">a</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Evar">Cminor.Evar</a></span> <span class="id">id</span> =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Evar">Evar</a></span> <span class="id">id</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Econst">Cminor.Econst</a></span> <span class="id">cst</span> =&gt; <span class="id"><a href="compcert.backend.Selection.html#sel_constant">sel_constant</a></span> <span class="id">cst</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Eunop">Cminor.Eunop</a></span> <span class="id">op</span> <span class="id">arg</span> =&gt; <span class="id"><a href="compcert.backend.Selection.html#sel_unop">sel_unop</a></span> <span class="id">op</span> (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">arg</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Ebinop">Cminor.Ebinop</a></span> <span class="id">op</span> <span class="id">arg1</span> <span class="id">arg2</span> =&gt; <span class="id"><a href="compcert.backend.Selection.html#sel_binop">sel_binop</a></span> <span class="id">op</span> (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">arg1</span>) (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">arg2</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Eload">Cminor.Eload</a></span> <span class="id">chunk</span> <span class="id">addr</span> =&gt; <span class="id"><a href="compcert.backend.Selection.html#load">load</a></span> <span class="id">chunk</span> (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">addr</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="sel_exprlist">sel_exprlist</a></span> (<span class="id">al</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Cminor.html#expr">Cminor.expr</a></span>) : <span class="id"><a href="compcert.backend.CminorSel.html#exprlist">exprlist</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#al">al</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Enil">Enil</a></span><br/>
&nbsp;&nbsp;| <span class="id">a</span> :: <span class="id">bl</span> =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Econs">Econs</a></span> (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">a</span>) (<span class="id"><a href="compcert.backend.Selection.html#sel_exprlist">sel_exprlist</a></span> <span class="id">bl</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Recognition of immediate calls and calls to built-in functions
    that should be inlined </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="call_kind">call_kind</a></span> : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="Call_default">Call_default</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="Call_imm">Call_imm</a></span> (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="Call_builtin">Call_builtin</a></span> (<span class="id">ef</span>: <span class="id"><a href="compcert.common.AST.html#external_function">external_function</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="expr_is_addrof_ident">expr_is_addrof_ident</a></span> (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Cminor.html#expr">Cminor.expr</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#e">e</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Econst">Cminor.Econst</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#Oaddrsymbol">Cminor.Oaddrsymbol</a></span> <span class="id">id</span> <span class="id">ofs</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.eq">Ptrofs.eq</a></span> <span class="id">ofs</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">id</span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="classify_call">classify_call</a></span> (<span class="id">e</span>: <span class="id"><a href="compcert.backend.Cminor.html#expr">Cminor.expr</a></span>) : <span class="id"><a href="compcert.backend.Selection.html#call_kind">call_kind</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#expr_is_addrof_ident">expr_is_addrof_ident</a></span> <span class="id"><a href="compcert.backend.Selection.html#e">e</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.backend.Selection.html#Call_default">Call_default</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">id</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#SELECTION.defmap">defmap</a></span>!<span class="id">id</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span>(<span class="id"><a href="compcert.common.AST.html#External">External</a></span> <span class="id">ef</span>)) =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.common.AST.html#ef_inline">ef_inline</a></span> <span class="id">ef</span> <span class="kwd">then</span> <span class="id"><a href="compcert.backend.Selection.html#Call_builtin">Call_builtin</a></span> <span class="id">ef</span> <span class="kwd">else</span> <span class="id"><a href="compcert.backend.Selection.html#Call_imm">Call_imm</a></span> <span class="id">id</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.Selection.html#Call_imm">Call_imm</a></span> <span class="id">id</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Builtin arguments and results </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sel_builtin_arg">sel_builtin_arg</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">e</span>: <span class="id"><a href="compcert.backend.Cminor.html#expr">Cminor.expr</a></span>) (<span class="id">c</span>: <span class="id"><a href="compcert.common.AST.html#builtin_arg_constraint">builtin_arg_constraint</a></span>): <span class="id"><a href="compcert.common.AST.html#builtin_arg">AST.builtin_arg</a></span> <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">e</span>' := <span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id"><a href="compcert.backend.Selection.html#e">e</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">ba</span> := <span class="id"><a href="compcert.x86.SelectOp.html#builtin_arg">builtin_arg</a></span> <span class="id">e</span>' <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.x86.Op.html#builtin_arg_ok">builtin_arg_ok</a></span> <span class="id"><a href="compcert.backend.Selection.html#ba">ba</a></span> <span class="id"><a href="compcert.backend.Selection.html#c">c</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.backend.Selection.html#ba">ba</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.common.AST.html#BA">BA</a></span> <span class="id">e</span>'.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="sel_builtin_args">sel_builtin_args</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">el</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.Cminor.html#expr">Cminor.expr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">cl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#builtin_arg_constraint">builtin_arg_constraint</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#builtin_arg">AST.builtin_arg</a></span> <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#el">el</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id">e</span> :: <span class="id">el</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Selection.html#sel_builtin_arg">sel_builtin_arg</a></span> <span class="id">e</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#hd">List.hd</a></span> <span class="id"><a href="compcert.common.AST.html#OK_default">OK_default</a></span> <span class="id"><a href="compcert.backend.Selection.html#cl">cl</a></span>) :: <span class="id"><a href="compcert.backend.Selection.html#sel_builtin_args">sel_builtin_args</a></span> <span class="id"><a href="compcert.backend.Selection.html#el">el</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#tl">List.tl</a></span> <span class="id"><a href="compcert.backend.Selection.html#cl">cl</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sel_builtin_res">sel_builtin_res</a></span> (<span class="id">optid</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) : <span class="id"><a href="compcert.common.AST.html#builtin_res">builtin_res</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#optid">optid</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.AST.html#BR_none">BR_none</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">id</span> =&gt; <span class="id"><a href="compcert.common.AST.html#BR">BR</a></span> <span class="id">id</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Conversion of Cminor <span class="bracket"><span class="id">switch</span></span> statements to decision trees. </div>
<br/>
<span class="kwd">Parameter</span> <span class="id"><a name="compile_switch">compile_switch</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="compcert.common.Switch.html#table">table</a></span> -&gt; <span class="id"><a href="compcert.common.Switch.html#comptree">comptree</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SELECTION.SEL_SWITCH">SEL_SWITCH</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SELECTION.SEL_SWITCH.make_cmp_eq">make_cmp_eq</a></span>: <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SELECTION.SEL_SWITCH.make_cmp_ltu">make_cmp_ltu</a></span>: <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SELECTION.SEL_SWITCH.make_sub">make_sub</a></span>: <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SELECTION.SEL_SWITCH.make_to_int">make_to_int</a></span>: <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span> -&gt; <span class="id"><a href="compcert.backend.CminorSel.html#expr">expr</a></span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="sel_switch">sel_switch</a></span> (<span class="id">arg</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>) (<span class="id">t</span>: <span class="id"><a href="compcert.common.Switch.html#comptree">comptree</a></span>): <span class="id"><a href="compcert.backend.CminorSel.html#exitexpr">exitexpr</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#t">t</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Switch.html#CTaction">CTaction</a></span> <span class="id">act</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CminorSel.html#XEexit">XEexit</a></span> <span class="id">act</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Switch.html#CTifeq">CTifeq</a></span> <span class="id">key</span> <span class="id">act</span> <span class="id">t</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CminorSel.html#XEcondition">XEcondition</a></span> (<span class="id"><a href="compcert.backend.Selection.html#condexpr_of_expr">condexpr_of_expr</a></span> (<span class="id"><a href="compcert.backend.Selection.html#SELECTION.SEL_SWITCH.make_cmp_eq">make_cmp_eq</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span>) <span class="id">key</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.CminorSel.html#XEexit">XEexit</a></span> <span class="id">act</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Selection.html#sel_switch">sel_switch</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span> <span class="id">t</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Switch.html#CTiflt">CTiflt</a></span> <span class="id">key</span> <span class="id">t1</span> <span class="id">t2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CminorSel.html#XEcondition">XEcondition</a></span> (<span class="id"><a href="compcert.backend.Selection.html#condexpr_of_expr">condexpr_of_expr</a></span> (<span class="id"><a href="compcert.backend.Selection.html#SELECTION.SEL_SWITCH.make_cmp_ltu">make_cmp_ltu</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span>) <span class="id">key</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Selection.html#sel_switch">sel_switch</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span> <span class="id">t1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Selection.html#sel_switch">sel_switch</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span> <span class="id">t2</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Switch.html#CTjumptable">CTjumptable</a></span> <span class="id">ofs</span> <span class="id">sz</span> <span class="id">tbl</span> <span class="id">t</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.CminorSel.html#XElet">XElet</a></span> (<span class="id"><a href="compcert.backend.Selection.html#SELECTION.SEL_SWITCH.make_sub">make_sub</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span>) <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.CminorSel.html#XEcondition">XEcondition</a></span> (<span class="id"><a href="compcert.backend.Selection.html#condexpr_of_expr">condexpr_of_expr</a></span> (<span class="id"><a href="compcert.backend.Selection.html#SELECTION.SEL_SWITCH.make_cmp_ltu">make_cmp_ltu</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="id">sz</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.CminorSel.html#XEjumptable">XEjumptable</a></span> (<span class="id"><a href="compcert.backend.Selection.html#SELECTION.SEL_SWITCH.make_to_int">make_to_int</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Eletvar">Eletvar</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>)) <span class="id">tbl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Selection.html#sel_switch">sel_switch</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span>) <span class="id">t</span>'))<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.Selection.html#SELECTION.SEL_SWITCH">SEL_SWITCH</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sel_switch_int">sel_switch_int</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Selection.html#sel_switch">sel_switch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">arg</span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#comp">comp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ceq">Ceq</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="compcert.x86.Op.html#Ointconst">Ointconst</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.backend.Selection.html#n">n</a></span>)) <span class="id"><a href="compcert.backend.CminorSel.html#Enil">Enil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">arg</span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#compu">compu</a></span> <span class="id"><a href="compcert.lib.Integers.html#Clt">Clt</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="compcert.x86.Op.html#Ointconst">Ointconst</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.backend.Selection.html#n">n</a></span>)) <span class="id"><a href="compcert.backend.CminorSel.html#Enil">Enil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">arg</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="compcert.x86.SelectOp.html#sub">sub</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Eop">Eop</a></span> (<span class="id"><a href="compcert.x86.Op.html#Ointconst">Ointconst</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.backend.Selection.html#ofs">ofs</a></span>)) <span class="id"><a href="compcert.backend.CminorSel.html#Enil">Enil</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">arg</span> =&gt; <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sel_switch_long">sel_switch_long</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Selection.html#sel_switch">sel_switch</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">arg</span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#cmpl">cmpl</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ceq">Ceq</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span> (<span class="id"><a href="compcert.x86.SelectLong.html#longconst">longconst</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="compcert.backend.Selection.html#n">n</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">arg</span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#cmplu">cmplu</a></span> <span class="id"><a href="compcert.lib.Integers.html#Clt">Clt</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span> (<span class="id"><a href="compcert.x86.SelectLong.html#longconst">longconst</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="compcert.backend.Selection.html#n">n</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">arg</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="compcert.x86.SelectLong.html#subl">subl</a></span> <span class="id"><a href="compcert.backend.Selection.html#arg">arg</a></span> (<span class="id"><a href="compcert.x86.SelectLong.html#longconst">longconst</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="compcert.backend.Selection.html#ofs">ofs</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.SplitLong.html#lowlong">lowlong</a></span>.<br/>
<br/>
<div class="doc">Conversion from Cminor statements to Cminorsel statements. </div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="sel_stmt">sel_stmt</a></span> (<span class="id">s</span>: <span class="id"><a href="compcert.backend.Cminor.html#stmt">Cminor.stmt</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.backend.CminorSel.html#stmt">stmt</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#s">s</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sskip">Cminor.Sskip</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.backend.CminorSel.html#Sskip">Sskip</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sassign">Cminor.Sassign</a></span> <span class="id">id</span> <span class="id">e</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Sassign">Sassign</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">e</span>))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sstore">Cminor.Sstore</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">rhs</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.Selection.html#store">store</a></span> <span class="id">chunk</span> (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">addr</span>) (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">rhs</span>))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Scall">Cminor.Scall</a></span> <span class="id">optid</span> <span class="id">sg</span> <span class="id">fn</span> <span class="id">args</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#classify_call">classify_call</a></span> <span class="id">fn</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Selection.html#Call_default">Call_default</a></span> =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Scall">Scall</a></span> <span class="id">optid</span> <span class="id">sg</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inl">inl</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">fn</span>)) (<span class="id"><a href="compcert.backend.Selection.html#sel_exprlist">sel_exprlist</a></span> <span class="id">args</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Selection.html#Call_imm">Call_imm</a></span> <span class="id">id</span>  =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Scall">Scall</a></span> <span class="id">optid</span> <span class="id">sg</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inr">inr</a></span> <span class="id">_</span> <span class="id">id</span>) (<span class="id"><a href="compcert.backend.Selection.html#sel_exprlist">sel_exprlist</a></span> <span class="id">args</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Selection.html#Call_builtin">Call_builtin</a></span> <span class="id">ef</span> =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Sbuiltin">Sbuiltin</a></span> (<span class="id"><a href="compcert.backend.Selection.html#sel_builtin_res">sel_builtin_res</a></span> <span class="id">optid</span>) <span class="id">ef</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Selection.html#sel_builtin_args">sel_builtin_args</a></span> <span class="id">args</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.x86.Machregs.html#builtin_constraints">Machregs.builtin_constraints</a></span> <span class="id">ef</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sbuiltin">Cminor.Sbuiltin</a></span> <span class="id">optid</span> <span class="id">ef</span> <span class="id">args</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Sbuiltin">Sbuiltin</a></span> (<span class="id"><a href="compcert.backend.Selection.html#sel_builtin_res">sel_builtin_res</a></span> <span class="id">optid</span>) <span class="id">ef</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Selection.html#sel_builtin_args">sel_builtin_args</a></span> <span class="id">args</span> (<span class="id"><a href="compcert.x86.Machregs.html#builtin_constraints">Machregs.builtin_constraints</a></span> <span class="id">ef</span>)))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Stailcall">Cminor.Stailcall</a></span> <span class="id">sg</span> <span class="id">fn</span> <span class="id">args</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#classify_call">classify_call</a></span> <span class="id">fn</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Selection.html#Call_imm">Call_imm</a></span> <span class="id">id</span>  =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Stailcall">Stailcall</a></span> <span class="id">sg</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inr">inr</a></span> <span class="id">_</span> <span class="id">id</span>) (<span class="id"><a href="compcert.backend.Selection.html#sel_exprlist">sel_exprlist</a></span> <span class="id">args</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>            =&gt; <span class="id"><a href="compcert.backend.CminorSel.html#Stailcall">Stailcall</a></span> <span class="id">sg</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inl">inl</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">fn</span>)) (<span class="id"><a href="compcert.backend.Selection.html#sel_exprlist">sel_exprlist</a></span> <span class="id">args</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sseq">Cminor.Sseq</a></span> <span class="id">s1</span> <span class="id">s2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">s1</span>' &lt;- <span class="id"><a href="compcert.backend.Selection.html#sel_stmt">sel_stmt</a></span> <span class="id">s1</span>; <span class="tactic">do</span> <span class="id">s2</span>' &lt;- <span class="id"><a href="compcert.backend.Selection.html#sel_stmt">sel_stmt</a></span> <span class="id">s2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Sseq">Sseq</a></span> <span class="id">s1</span>' <span class="id">s2</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sifthenelse">Cminor.Sifthenelse</a></span> <span class="id">e</span> <span class="id">ifso</span> <span class="id">ifnot</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">ifso</span>' &lt;- <span class="id"><a href="compcert.backend.Selection.html#sel_stmt">sel_stmt</a></span> <span class="id">ifso</span>; <span class="tactic">do</span> <span class="id">ifnot</span>' &lt;- <span class="id"><a href="compcert.backend.Selection.html#sel_stmt">sel_stmt</a></span> <span class="id">ifnot</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Sifthenelse">Sifthenelse</a></span> (<span class="id"><a href="compcert.backend.Selection.html#condexpr_of_expr">condexpr_of_expr</a></span> (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">e</span>)) <span class="id">ifso</span>' <span class="id">ifnot</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sloop">Cminor.Sloop</a></span> <span class="id">body</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">body</span>' &lt;- <span class="id"><a href="compcert.backend.Selection.html#sel_stmt">sel_stmt</a></span> <span class="id">body</span>; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Sloop">Sloop</a></span> <span class="id">body</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sblock">Cminor.Sblock</a></span> <span class="id">body</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">body</span>' &lt;- <span class="id"><a href="compcert.backend.Selection.html#sel_stmt">sel_stmt</a></span> <span class="id">body</span>; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Sblock">Sblock</a></span> <span class="id">body</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sexit">Cminor.Sexit</a></span> <span class="id">n</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Sexit">Sexit</a></span> <span class="id">n</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sswitch">Cminor.Sswitch</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> <span class="id">e</span> <span class="id">cases</span> <span class="id">dfl</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">t</span> := <span class="id"><a href="compcert.backend.Selection.html#compile_switch">compile_switch</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.modulus">Int.modulus</a></span> <span class="id">dfl</span> <span class="id">cases</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.Switch.html#validate_switch">validate_switch</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.modulus">Int.modulus</a></span> <span class="id">dfl</span> <span class="id">cases</span> <span class="id"><a href="compcert.backend.Selection.html#t">t</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Sswitch">Sswitch</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#XElet">XElet</a></span> (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">e</span>) (<span class="id"><a href="compcert.backend.Selection.html#sel_switch_int">sel_switch_int</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> <span class="id"><a href="compcert.backend.Selection.html#t">t</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">Selection</span>: <span class="id">bad</span> <span class="id">switch</span> (<span class="id">int</span>)")<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sswitch">Cminor.Sswitch</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> <span class="id">e</span> <span class="id">cases</span> <span class="id">dfl</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">t</span> := <span class="id"><a href="compcert.backend.Selection.html#compile_switch">compile_switch</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.modulus">Int64.modulus</a></span> <span class="id">dfl</span> <span class="id">cases</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.Switch.html#validate_switch">validate_switch</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.modulus">Int64.modulus</a></span> <span class="id">dfl</span> <span class="id">cases</span> <span class="id"><a href="compcert.backend.Selection.html#t">t</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Sswitch">Sswitch</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#XElet">XElet</a></span> (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">e</span>) (<span class="id"><a href="compcert.backend.Selection.html#sel_switch_long">sel_switch_long</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> <span class="id"><a href="compcert.backend.Selection.html#t">t</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="compcert.common.Errors.html#msg">msg</a></span> "<span class="id">Selection</span>: <span class="id">bad</span> <span class="id">switch</span> (<span class="id">long</span>)")<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sreturn">Cminor.Sreturn</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Sreturn">Sreturn</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sreturn">Cminor.Sreturn</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">e</span>) =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Sreturn">Sreturn</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.backend.Selection.html#sel_expr">sel_expr</a></span> <span class="id">e</span>)))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Slabel">Cminor.Slabel</a></span> <span class="id">lbl</span> <span class="id">body</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">body</span>' &lt;- <span class="id"><a href="compcert.backend.Selection.html#sel_stmt">sel_stmt</a></span> <span class="id">body</span>; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Slabel">Slabel</a></span> <span class="id">lbl</span> <span class="id">body</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.Cminor.html#Sgoto">Cminor.Sgoto</a></span> <span class="id">lbl</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#Sgoto">Sgoto</a></span> <span class="id">lbl</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.Selection.html#SELECTION">SELECTION</a></span>.<br/>
<br/>
<div class="doc">Conversion of functions. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sel_function">sel_function</a></span> (<span class="id">dm</span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.backend.Selection.html#globdef">globdef</a></span>) (<span class="id">hf</span>: <span class="id"><a href="compcert.backend.SplitLong.html#helper_functions">helper_functions</a></span>) (<span class="id">f</span>: <span class="id"><a href="compcert.backend.Cminor.html#function">Cminor.function</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.backend.CminorSel.html#function">function</a></span> :=<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">body</span>' &lt;- <span class="id"><a href="compcert.backend.Selection.html#sel_stmt">sel_stmt</a></span> <span class="id"><a href="compcert.backend.Selection.html#dm">dm</a></span> <span class="id"><a href="compcert.backend.Selection.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_body">Cminor.fn_body</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.CminorSel.html#mkfunction">mkfunction</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Selection.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_sig">Cminor.fn_sig</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Selection.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_params">Cminor.fn_params</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Selection.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_vars">Cminor.fn_vars</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Selection.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">Cminor.fn_stackspace</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">body</span>').<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sel_fundef">sel_fundef</a></span> (<span class="id">dm</span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.backend.Selection.html#globdef">globdef</a></span>) (<span class="id">hf</span>: <span class="id"><a href="compcert.backend.SplitLong.html#helper_functions">helper_functions</a></span>) (<span class="id">f</span>: <span class="id"><a href="compcert.backend.Cminor.html#fundef">Cminor.fundef</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.backend.CminorSel.html#fundef">fundef</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#transf_partial_fundef">transf_partial_fundef</a></span> (<span class="id"><a href="compcert.backend.Selection.html#sel_function">sel_function</a></span> <span class="id"><a href="compcert.backend.Selection.html#dm">dm</a></span> <span class="id"><a href="compcert.backend.Selection.html#hf">hf</a></span>) <span class="id"><a href="compcert.backend.Selection.html#f">f</a></span>.<br/>
<br/>
<div class="doc">Setting up the helper functions. </div>
<br/>
<div class="doc">We build a partial mapping from global identifiers to their definitions,
  restricting ourselves to the globals we are interested in, namely
  the external function declarations that are marked as runtime library
  helpers.
  This ensures that the mapping remains small and that <span class="bracket"><span class="id">lookup_helper</span></span>
  below is efficient. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="globdef_of_interest">globdef_of_interest</a></span> (<span class="id">gd</span>: <span class="id"><a href="compcert.backend.Selection.html#globdef">globdef</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#gd">gd</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> (<span class="id"><a href="compcert.common.AST.html#External">External</a></span> (<span class="id"><a href="compcert.common.AST.html#EF_runtime">EF_runtime</a></span> <span class="id">name</span> <span class="id">sg</span>)) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="record_globdefs">record_globdefs</a></span> (<span class="id">defmap</span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.backend.Selection.html#globdef">globdef</a></span>) : <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.backend.Selection.html#globdef">globdef</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.fold">PTree.fold</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">m</span> <span class="id">id</span> <span class="id">gd</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.backend.Selection.html#globdef_of_interest">globdef_of_interest</a></span> <span class="id"><a href="compcert.backend.Selection.html#gd">gd</a></span> <span class="kwd">then</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.backend.Selection.html#id">id</a></span> <span class="id"><a href="compcert.backend.Selection.html#gd">gd</a></span> <span class="id"><a href="compcert.backend.Selection.html#m">m</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.backend.Selection.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Selection.html#defmap">defmap</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="compcert.backend.Selection.html#globdef">globdef</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="lookup_helper_aux">lookup_helper_aux</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">name</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">String.string</a></span>) (<span class="id">sg</span>: <span class="id"><a href="compcert.common.AST.html#signature">signature</a></span>) (<span class="id">res</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) (<span class="id">gd</span>: <span class="id"><a href="compcert.backend.Selection.html#globdef">globdef</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.Selection.html#gd">gd</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> (<span class="id"><a href="compcert.common.AST.html#External">External</a></span> (<span class="id"><a href="compcert.common.AST.html#EF_runtime">EF_runtime</a></span> <span class="id">name</span>' <span class="id">sg</span>')) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string_dec">String.string_dec</a></span> <span class="id"><a href="compcert.backend.Selection.html#name">name</a></span> <span class="id">name</span>' &amp;&amp; <span class="id"><a href="compcert.common.AST.html#signature_eq">signature_eq</a></span> <span class="id"><a href="compcert.backend.Selection.html#sg">sg</a></span> <span class="id">sg</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.Selection.html#id">id</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.backend.Selection.html#res">res</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.Selection.html#res">res</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="lookup_helper">lookup_helper</a></span> (<span class="id">globs</span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.backend.Selection.html#globdef">globdef</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">name</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Strings.String.html#string">String.string</a></span>) (<span class="id">sg</span>: <span class="id"><a href="compcert.common.AST.html#signature">signature</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.fold">PTree.fold</a></span> (<span class="id"><a href="compcert.backend.Selection.html#lookup_helper_aux">lookup_helper_aux</a></span> <span class="id"><a href="compcert.backend.Selection.html#name">name</a></span> <span class="id"><a href="compcert.backend.Selection.html#sg">sg</a></span>) <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">id</span> =&gt; <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">id</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>    =&gt; <span class="id"><a href="compcert.common.Errors.html#Error">Error</a></span> (<span class="id"><a href="compcert.common.Errors.html#MSG">MSG</a></span> <span class="id"><a href="compcert.backend.Selection.html#name">name</a></span> :: <span class="id"><a href="compcert.common.Errors.html#MSG">MSG</a></span> ": <span class="id">missing</span> <span class="id">or</span> <span class="id">incorrect</span> <span class="id">declaration</span>" :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">string_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="get_helpers">get_helpers</a></span> (<span class="id">defmap</span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.backend.Selection.html#globdef">globdef</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.backend.SplitLong.html#helper_functions">helper_functions</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">globs</span> := <span class="id"><a href="compcert.backend.Selection.html#record_globdefs">record_globdefs</a></span> <span class="id"><a href="compcert.backend.Selection.html#defmap">defmap</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_dtos</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_dtos</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_f_l">sig_f_l</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_dtou</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_dtou</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_f_l">sig_f_l</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_stod</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_stod</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_l_f">sig_l_f</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_utod</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_utod</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_l_f">sig_l_f</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_stof</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_stof</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_l_s">sig_l_s</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_utof</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_utof</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_l_s">sig_l_s</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_sdiv</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_sdiv</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_ll_l">sig_ll_l</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_udiv</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_udiv</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_ll_l">sig_ll_l</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_smod</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_smod</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_ll_l">sig_ll_l</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_umod</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_umod</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_ll_l">sig_ll_l</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_shl</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_shl</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_li_l">sig_li_l</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_shr</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_shr</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_li_l">sig_li_l</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_sar</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_sar</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_li_l">sig_li_l</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_umulh</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_umulh</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_ll_l">sig_ll_l</a></span> ;<br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">i64_smulh</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#lookup_helper">lookup_helper</a></span> <span class="id"><a href="compcert.backend.Selection.html#globs">globs</a></span> "<span class="id">__compcert_i64_smulh</span>" <span class="id"><a href="compcert.backend.SplitLong.html#sig_ll_l">sig_ll_l</a></span> ;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> (<span class="id"><a href="compcert.backend.SplitLong.html#mk_helper_functions">mk_helper_functions</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Selection.html#i64_dtos">i64_dtos</a></span> <span class="id"><a href="compcert.backend.Selection.html#i64_dtou">i64_dtou</a></span> <span class="id"><a href="compcert.backend.Selection.html#i64_stod">i64_stod</a></span> <span class="id"><a href="compcert.backend.Selection.html#i64_utod">i64_utod</a></span> <span class="id"><a href="compcert.backend.Selection.html#i64_stof">i64_stof</a></span> <span class="id"><a href="compcert.backend.Selection.html#i64_utof">i64_utof</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Selection.html#i64_sdiv">i64_sdiv</a></span> <span class="id"><a href="compcert.backend.Selection.html#i64_udiv">i64_udiv</a></span> <span class="id"><a href="compcert.backend.Selection.html#i64_smod">i64_smod</a></span> <span class="id"><a href="compcert.backend.Selection.html#i64_umod">i64_umod</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Selection.html#i64_shl">i64_shl</a></span> <span class="id"><a href="compcert.backend.Selection.html#i64_shr">i64_shr</a></span> <span class="id"><a href="compcert.backend.Selection.html#i64_sar">i64_sar</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Selection.html#i64_umulh">i64_umulh</a></span> <span class="id"><a href="compcert.backend.Selection.html#i64_smulh">i64_smulh</a></span>).<br/>
<br/>
<div class="doc">Conversion of programs. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sel_program">sel_program</a></span> (<span class="id">p</span>: <span class="id"><a href="compcert.backend.Cminor.html#program">Cminor.program</a></span>) : <span class="id"><a href="compcert.common.Errors.html#res">res</a></span> <span class="id"><a href="compcert.backend.CminorSel.html#program">program</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">dm</span> := <span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.backend.Selection.html#p">p</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="tactic">do</span> <span class="id">hf</span> &lt;- <span class="id"><a href="compcert.backend.Selection.html#get_helpers">get_helpers</a></span> <span class="id"><a href="compcert.backend.Selection.html#dm">dm</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.AST.html#transform_partial_program">transform_partial_program</a></span> (<span class="id"><a href="compcert.backend.Selection.html#sel_fundef">sel_fundef</a></span> <span class="id"><a href="compcert.backend.Selection.html#dm">dm</a></span> <span class="id"><a href="compcert.backend.Selection.html#hf">hf</a></span>) <span class="id"><a href="compcert.backend.Selection.html#p">p</a></span>.<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
