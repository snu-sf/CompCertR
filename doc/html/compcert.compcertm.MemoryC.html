
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module MemoryC</title>
<meta name="description" content="Documentation of Coq module MemoryC" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module MemoryC</h1>
<div class="coq">
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zwf.html">Zwf</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Axioms.html">Axioms</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html">CoqlibC</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.lib.Intv.html">Intv</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.MapsC.html">MapsC</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.x86_64.Archi.html">Archi</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.ASTC.html">ASTC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.IntegersC.html">IntegersC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.compcertm.ValuesC.html">ValuesC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="compcert.common.Memdata.html">Memdata</a></span> <span class="id"><a href="compcert.compcertm.MemdataC.html">MemdataC</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="compcert.common.Memtype.html">Memtype</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.sflib.html">sflib</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.micromega.Lia.html">Lia</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Events.html">Events</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Pred_Type.html">Classical_Pred_Type</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.FunctionalExtensionality.html">Coq.Logic.FunctionalExtensionality</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Notation</span> "<span class="id">a</span> # <span class="id">b</span>" := (<span class="id"><a href="compcert.lib.Maps.html#PMap.get">PMap.get</a></span> <span class="id">b</span> <span class="id">a</span>) (<span class="tactic">at</span> <span class="id">level</span> 1).<br/>
<div class="doc">Above is exactly copied from Memory.v *</div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Export</span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span>.<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Global</span> <span class="kwd">Program</span> <span class="kwd">Instance</span> <span class="id"><a name="mem_unchanged_on_PreOrder">mem_unchanged_on_PreOrder</a></span> <span class="id">P</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Classes.RelationClasses.html#PreOrder">RelationClasses.PreOrder</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#P">P</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7169')">Next Obligation.</div>
<div class="proofscript" id="proof7169">
 <span class="id">ii</span>; <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>. Qed.</div>
<div class="toggleproof" onclick="toggleDisplay('proof7170')">Next Obligation.</div>
<div class="proofscript" id="proof7170">
 <span class="id">ii</span>; <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_trans">Mem.unchanged_on_trans</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_unchanged_on_trans_strong">Mem_unchanged_on_trans_strong</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> <span class="id">m0</span> <span class="id">m1</span> <span class="id">m2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNCH0</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#P">P</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNCH1</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#P">P</a></span> /2\ (<span class="kwd">fun</span> <span class="id">b</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span>)) <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m2">m2</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">UNCH2</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#P">P</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m2">m2</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7171')">Proof.</div>
<div class="proofscript" id="proof7171">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">UNCH0</span>. <span class="id">inv</span> <span class="id">UNCH1</span>. <span class="id">econs</span>; <span class="id">i</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="id">etransitivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">unchanged_on_perm</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">unchanged_on_perm0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;- <span class="id">erewrite</span> &lt;- <span class="id">unchanged_on_contents</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">dup</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_valid_block">Mem.perm_valid_block</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id">unchanged_on_contents0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">unchanged_on_perm</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_alloc_range_perm">Mem_alloc_range_perm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span> <span class="id">blk</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ALLOC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = (<span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>, <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">PERM</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7172')">Proof.</div>
<div class="proofscript" id="proof7172">
 <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">Mem.perm_alloc_2</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">Mem_alloc_range_perm</span> : <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="dead_block">dead_block</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>): <span class="kwd">Prop</span> := <span class="kwd">forall</span> <span class="id">ofs</span>, ~<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m">m</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="mem_equiv">mem_equiv</a></span> (<span class="id">m0</span> <span class="id">m1</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>): <span class="kwd">Prop</span> :=<br/>
| <span class="id"><a name="mem_equiv_intro">mem_equiv_intro</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNCH</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#top2">top2</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DEAD</span>: <span class="kwd">forall</span> <span class="id">b</span> (<span class="id">BETWEEN</span>: (<span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>) &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> &lt; <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>))%<span class="id">positive</span>), <span class="id"><a href="compcert.compcertm.MemoryC.html#dead_block">dead_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="update_meminj">update_meminj</a></span> (<span class="id">F</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">blk_src</span> <span class="id">blk_tgt</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">delta</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>): <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">blk</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_src">blk_src</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#blk_tgt">blk_tgt</a></span>, <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span>) <span class="kwd">else</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#update_meminj">update_meminj</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="no_overlap_equiv">no_overlap_equiv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">F</span> <span class="id">m0</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PERM</span>: <span class="id">all4</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> &lt;4&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OVERLAP</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">Mem.meminj_no_overlap</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">OVERLAP</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">Mem.meminj_no_overlap</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7173')">Proof.</div>
<div class="proofscript" id="proof7173">
 <span class="id">ii</span>; <span class="id">ss</span>. <span class="tactic">eapply</span> <span class="id">OVERLAP</span>; <span class="tactic">eauto</span>; <span class="tactic">eapply</span> <span class="id">PERM</span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_alloc_fresh_perm">Mem_alloc_fresh_perm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">blk</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ALLOC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = (<span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>, <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">NOPERM</span>: <span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">p</span> <span class="id">k</span>, ~<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#p">p</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#k">k</a></span>&gt;&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ &lt;&lt;<span class="id">NOPERM</span>: <span class="kwd">forall</span> <span class="id">ofs</span> (<span class="id">OUTSIDE</span>: ~ <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>) <span class="id">p</span> <span class="id">k</span>, ~<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#p">p</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#k">k</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7174')">Proof.</div>
<div class="proofscript" id="proof7174">
&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">clarify</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">Mem.nextblock_noaccess</a></span> <span class="id">m0</span> <span class="id">m0</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>)); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id">H0</span> <span class="kwd">in</span> *. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">Mem.nextblock_noaccess</a></span> <span class="id">m0</span> <span class="id">m0</span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>)); <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="id">Unshelve</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="update_no_overlap">update_no_overlap</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">F</span> <span class="id">m0</span> <span class="id">sz</span> <span class="id">blk_src</span> <span class="id">blk_tgt</span> <span class="id">delta</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">OVERLAP</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">Mem.meminj_no_overlap</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ALLOC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> 0 <span class="id"><a href="compcert.compcertm.MemoryC.html#sz">sz</a></span> = (<span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>, <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_src">blk_src</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PRIVTGT</span>: <span class="kwd">forall</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SZ</span>: 0 &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.compcertm.MemoryC.html#sz">sz</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_tgt">blk_tgt</a></span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">OVERLAP</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.meminj_no_overlap">Mem.meminj_no_overlap</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.compcertm.MemoryC.html#update_meminj">update_meminj</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_src">blk_src</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_tgt">blk_tgt</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7175')">Proof.</div>
<div class="proofscript" id="proof7175">
&nbsp;&nbsp;<span class="id">u</span>. <span class="id">hnf</span>. <span class="id">ii</span>; <span class="id">ss</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">b1</span>' = <span class="id">b2</span>')); <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;{ <span class="id">left</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">clarify</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">clarify</span>. <span class="id">des_ifs</span>; <span class="id">ss</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_3">Mem.perm_alloc_3</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">PRIVTGT</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>; <span class="tactic">eauto</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs2</span> + <span class="id">delta2</span> - <span class="id">delta1</span>) <span class="kwd">with</span> <span class="id">ofs1</span> <span class="tactic">by</span> <span class="id">xomega</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id">OVERLAP</span>; [|<span class="tactic">apply</span> <span class="id">H0</span>|<span class="tactic">apply</span> <span class="id">H1</span>|..]; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="id">ii</span>; <span class="id">des</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_3">Mem.perm_alloc_3</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">PRIVTGT</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">H3</span>; <span class="tactic">eauto</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs1</span> + <span class="id">delta1</span> - <span class="id">delta2</span>) <span class="kwd">with</span> <span class="id">ofs2</span> <span class="tactic">by</span> <span class="id">xomega</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="INJECT">INJECT</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="private_unchanged_inject">private_unchanged_inject</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">F</span> <span class="id">m_src</span> <span class="id">m_tgt0</span> <span class="id">m_tgt1</span> <span class="id">P</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src">m_src</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt0">m_tgt0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNCH</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#P">P</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt0">m_tgt0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt1">m_tgt1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PRIV</span>: ~2 <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src">m_src</a></span> &lt;2= <span class="id"><a href="compcert.compcertm.MemoryC.html#P">P</a></span>):<br/>
&nbsp;&nbsp;&lt;&lt;<span class="id">INJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src">m_src</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt1">m_tgt1</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7176')">Proof.</div>
<div class="proofscript" id="proof7176">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">UNCH</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">ii</span>; <span class="tactic">eapply</span> <span class="id">INJ</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span> <span class="tactic">congruence</span>).<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">cycle</span> 1; <span class="tactic">try</span> (<span class="tactic">apply</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">P</span> <span class="id">b2</span> (<span class="id">ofs</span> + <span class="id">delta</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;publics&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id">unchanged_on_contents</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id">INJ</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">INJ</span>. <span class="id">inv</span> <span class="id">mi_inj</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;privs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id">F</span> <span class="id">m_src</span> <span class="id">b2</span> (<span class="id">ofs</span> + <span class="id">delta</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="id">hnf</span> <span class="kwd">in</span> <span class="id">PRIV</span>. <span class="id">exploit</span> <span class="id">PRIV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span>. <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + <span class="id">delta</span> - <span class="id">delta</span>) <span class="kwd">with</span> <span class="id">ofs</span> <span class="tactic">by</span> <span class="id">lia</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">P</span> <span class="id">b2</span> (<span class="id">ofs</span> + <span class="id">delta</span>) /\ <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m_tgt0</span> <span class="id">b2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;publics&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>. <span class="id">erewrite</span> &lt;- <span class="id">unchanged_on_perm</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">INJ</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="comment">(*&nbsp;privs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">des</span>; <span class="id">exfalso</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">INJ</span>. <span class="id">exploit</span> <span class="id">mi_mappedblocks</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id">PRIV</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span>. <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">H2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + <span class="id">delta</span> - <span class="id">delta</span>) <span class="kwd">with</span> <span class="id">ofs</span> <span class="tactic">by</span> <span class="id">lia</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">P</span> <span class="id">b2</span> (<span class="id">ofs</span> + <span class="id">delta</span>) /\ <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m_tgt0</span> <span class="id">b2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;publics&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>. <span class="tactic">eapply</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">unchanged_on_perm</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;privs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_and_or">not_and_or</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">des</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exfalso</span>. <span class="id">inv</span> <span class="id">INJ</span>. <span class="id">exploit</span> <span class="id">mi_mappedblocks</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="id">ii</span>. <span class="tactic">apply</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id">PRIV</span>. <span class="id">ii</span>. <span class="id">exploit</span> <span class="id">H3</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">ofs</span> + <span class="id">delta</span> - <span class="id">delta</span>) <span class="kwd">with</span> <span class="id">ofs</span> <span class="tactic">by</span> <span class="id">lia</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#INJECT">INJECT</a></span>.<br/>
<br/>
<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ARGPASSING">ARGPASSING</a></span>.<br/>
<br/>
<span class="kwd">Import</span> <span class="id">Mem</span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="alloc_left_mapped_inject">alloc_left_mapped_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>' <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = (<span class="id">m1</span>', <span class="id"><a href="compcert.compcertm.MemoryC.html#b1">b1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">valid_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m2">m2</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b2">b2</a></span> -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m2">m2</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b2">b2</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#k">k</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span> = 0 \/ 0 &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m2">m2</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b2">b2</a></span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span>) <span class="id"><a href="compcert.compcertm.MemoryC.html#k">k</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inj_offset_aligned">inj_offset_aligned</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>-<span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">delta</span>' <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.MemoryC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#b2">b2</a></span>, <span class="id">delta</span>') -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#k">k</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> + <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span> &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> + <span class="id">delta</span>' &lt; <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> + <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>', <span class="id"><a href="compcert.common.Memory.html#Mem.inject">inject</a></span> <span class="id">f</span>' <span class="id">m1</span>' <span class="id"><a href="compcert.compcertm.MemoryC.html#m2">m2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#f">f</a></span> <span class="id">f</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">f</span>' <span class="id"><a href="compcert.compcertm.MemoryC.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.compcertm.MemoryC.html#b2">b2</a></span>, <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> &lt;&gt; <span class="id"><a href="compcert.compcertm.MemoryC.html#b1">b1</a></span> -&gt; <span class="id">f</span>' <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> = <span class="id"><a href="compcert.compcertm.MemoryC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id">f</span>' = <span class="kwd">fun</span> <span class="id">b</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b1">b1</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.compcertm.MemoryC.html#b2">b2</a></span>, <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span>) <span class="kwd">else</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7177')">Proof.</div>
<div class="proofscript" id="proof7177">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">f</span>' := <span class="kwd">fun</span> <span class="id">b</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> <span class="id">b1</span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b2</span>, <span class="id">delta</span>) <span class="kwd">else</span> <span class="id">f</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id">f</span> <span class="id">f</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="tactic">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">f</span> <span class="id">b1</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>). <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">congruence</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">mem_inj</a></span> <span class="id">f</span>' <span class="id">m1</span> <span class="id">m2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">mi_inj0</span>; <span class="id">constructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>. <span class="tactic">subst</span> <span class="id">b0</span> <span class="id">b3</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">fresh_block_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>. <span class="tactic">subst</span> <span class="id">b0</span> <span class="id">b3</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">fresh_block_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_valid_block">perm_valid_block</a></span> <span class="kwd">with</span> (<span class="id">ofs</span> := <span class="id">ofs</span>). <span class="tactic">apply</span> <span class="id">H9</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>); <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H8</span>. <span class="tactic">subst</span> <span class="id">b0</span> <span class="id">b3</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">elim</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">fresh_block_alloc</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>). <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject_incr">memval_inject_incr</a></span> <span class="kwd">with</span> <span class="id">f</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>'. <span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;inj&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_mapped_inj">alloc_left_mapped_inj</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="comment">(*&nbsp;freeblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="tactic">subst</span> <span class="id">b</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> <span class="id">H9</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
<span class="comment">(*&nbsp;mappedblocks&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>). <span class="tactic">congruence</span>. <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;overlap&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">H12</span>. <span class="tactic">intros</span> <span class="id">P1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">H13</span>. <span class="tactic">intros</span> <span class="id">P2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>); <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b3</span> <span class="id">b1</span>); <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H10</span>; <span class="tactic">subst</span> <span class="id">b0</span> <span class="id">b1</span>' <span class="id">delta1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b2</span> <span class="id">b2</span>'); <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">b2</span>'. <span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H6</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H11</span>; <span class="tactic">subst</span> <span class="id">b3</span> <span class="id">b2</span>' <span class="id">delta2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span>' <span class="id">b2</span>); <span class="tactic">auto</span>. <span class="tactic">subst</span> <span class="id">b1</span>'. <span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">H6</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
<span class="comment">(*&nbsp;representable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">injection</span> <span class="id">H9</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">b</span>' <span class="id">delta0</span>. <span class="tactic">destruct</span> <span class="id">H10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>; <span class="tactic">eauto</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span> <span class="id">ofs</span>). <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id">H4</span> <span class="kwd">with</span> (<span class="id">k</span> := <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span>) (<span class="id">p</span> := <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>); <span class="tactic">eauto</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span>; <span class="tactic">eauto</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;&nbsp;{ <span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span> <span class="id">ofs</span>). <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id">H4</span> <span class="kwd">with</span> (<span class="id">k</span> := <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span>) (<span class="id">p</span> := <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>); <span class="tactic">eauto</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">mi_representable0</span>; <span class="tactic">try</span> <span class="id">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H10</span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>.<br/>
<span class="comment">(*&nbsp;perm&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id">f</span>' <span class="kwd">in</span> <span class="id">H9</span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H9</span>; <span class="tactic">clear</span> <span class="id">H9</span>; <span class="tactic">subst</span> <span class="id">b0</span> <span class="id">b3</span> <span class="id">delta0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EITHER</span>: <span class="id">lo</span> &lt;= <span class="id">ofs</span> &lt; <span class="id">hi</span> \/ ~(<span class="id">lo</span> &lt;= <span class="id">ofs</span> &lt; <span class="id">hi</span>)) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">EITHER</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">perm_alloc_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">intros</span> <span class="id">A</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">perm_alloc_inv</a></span> <span class="kwd">in</span> <span class="id">A</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span> <span class="kwd">in</span> <span class="id">A</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span>. <span class="tactic">intuition</span> <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">perm_alloc_1</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">perm_alloc_4</a></span>.<br/>
<span class="comment">(*&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;image&nbsp;of&nbsp;b1&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
<span class="comment">(*&nbsp;image&nbsp;of&nbsp;others&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id">f</span>'; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_false">dec_eq_false</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_alloc_left_inject">Mem_alloc_left_inject</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j0</span> <span class="id">m_src0</span> <span class="id">m_src1</span> <span class="id">m_tgt</span> <span class="id">sz</span> <span class="id">blk_src</span> <span class="id">blk_tgt</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#j0">j0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src0">m_src0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt">m_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ALLOC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src0">m_src0</a></span> 0 <span class="id"><a href="compcert.compcertm.MemoryC.html#sz">sz</a></span> = (<span class="id"><a href="compcert.compcertm.MemoryC.html#m_src1">m_src1</a></span>, <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_src">blk_src</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt">m_tgt</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_tgt">blk_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TGTPRIV</span>: <span class="kwd">forall</span> <span class="id">ofs</span> (<span class="id">BOUND</span>: 0 &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.compcertm.MemoryC.html#sz">sz</a></span>), <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#j0">j0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src0">m_src0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_tgt">blk_tgt</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TGTPERM</span>: <span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span> (<span class="id">BOUND</span>: 0 &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.compcertm.MemoryC.html#sz">sz</a></span>), <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt">m_tgt</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_tgt">blk_tgt</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#k">k</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#p">p</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> (<span class="kwd">fun</span> <span class="id">blk</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_src">blk_src</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#blk_tgt">blk_tgt</a></span>, 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#j0">j0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span>) <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src1">m_src1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt">m_tgt</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7178')">Proof.</div>
<div class="proofscript" id="proof7178">
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#alloc_left_mapped_inject">alloc_left_mapped_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">xomega</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.IntegersC.html#max_unsigned_zero">max_unsigned_zero</a></span>. }<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">eapply</span> <span class="id">TGTPERM</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">hnf</span>. <span class="id">ii</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>. }<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span> <span class="kwd">in</span> *. <span class="tactic">eapply</span> <span class="id">TGTPRIV</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_simpl_r">Z.add_simpl_r</a></span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. }<br/>
&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_alloc_left_inject_empty">Mem_alloc_left_inject_empty</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j0</span> <span class="id">m_src0</span> <span class="id">m_src1</span> <span class="id">m_tgt</span> <span class="id">blk_src</span> <span class="id">blk_tgt</span> <span class="id">delta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#j0">j0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src0">m_src0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt">m_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ALLOC</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src0">m_src0</a></span> 0 0 = (<span class="id"><a href="compcert.compcertm.MemoryC.html#m_src1">m_src1</a></span>, <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_src">blk_src</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt">m_tgt</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_tgt">blk_tgt</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> (<span class="kwd">fun</span> <span class="id">blk</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_src">blk_src</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#blk_tgt">blk_tgt</a></span>, <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#j0">j0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span>) <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src1">m_src1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt">m_tgt</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7179')">Proof.</div>
<div class="proofscript" id="proof7179">
<span class="comment">(*&nbsp;NOTE:&nbsp;"alloc_left_mapped_inject"&nbsp;is&nbsp;not&nbsp;good&nbsp;enough.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">NOPERM</span>: <span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">p</span> <span class="id">k</span>, ~<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m_src1</span> <span class="id">blk_src</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#k">k</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#p">p</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>; <span class="id">clarify</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_3">Mem.perm_alloc_3</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">xomega</span>. }<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">PERM</span>: <span class="id">all4</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m_src0</span> -4&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m_src1</span>) /\ <span class="id">all4</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m_src1</span> -4&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m_src0</span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">split</span>; <span class="id">ii</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">Mem.perm_alloc_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>; <span class="tactic">eauto</span>. <span class="id">ii</span>; <span class="id">clarify</span>. <span class="tactic">eapply</span> <span class="id">NOPERM</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;} <span class="id">ss</span>; <span class="id">des</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">INCR</span>: <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id">j0</span> (<span class="kwd">fun</span> <span class="id">blk</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id">blk_src</span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">blk_tgt</span>, <span class="id">delta</span>) <span class="kwd">else</span> <span class="id">j0</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>; <span class="id">des_ifs</span>. <span class="id">inv</span> <span class="id">INJ</span>. <span class="id">exfalso</span>. <span class="id">exploit</span> <span class="id">mi_freeblocks0</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="id">i</span>; <span class="id">ss</span>. <span class="id">clarify</span>. }<br/>
&nbsp;&nbsp;<span class="id">econs</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">INJ</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">INJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="id">des_ifs</span>; <span class="tactic">try</span> (<span class="tactic">eapply</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>). <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">NOPERM</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="id">des_ifs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">NOPERM</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="id">instantiate</span> (1:= <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_pos">size_chunk_pos</a></span> <span class="id">chunk</span>); <span class="tactic">intro</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">apply</span> <span class="id">PERM0</span>. <span class="tactic">eapply</span> <span class="id">H0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="id">des_ifs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">NOPERM</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;it&nbsp;should&nbsp;only&nbsp;inject&nbsp;more.&nbsp;not&nbsp;less&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">INJ</span>. <span class="id">clear_until</span> <span class="id">mi_inj0</span>. <span class="id">inv</span> <span class="id">mi_inj0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_memval0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memdata.html#memval_inject_incr">memval_inject_incr</a></span>; <span class="tactic">eauto</span>; <span class="id">cycle</span> 1.<br/>
<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">n</span> <span class="id">H1</span> <span class="id">ALLOC</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">alloc</a></span> <span class="kwd">in</span> *. <span class="id">clarify</span>; <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">des_ifs</span>.<br/>
<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">des_ifs</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">INJ</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">exfalso</span>. <span class="tactic">eapply</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_new_block">valid_new_block</a></span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">des_ifs</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">INJ</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">des_ifs</span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">exploit</span> <span class="id">NOPERM</span>; <span class="tactic">eauto</span>). <span class="tactic">eapply</span> <span class="id">INJ</span>; [<span class="tactic">apply</span> <span class="id">H</span>|..]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">des</span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">exploit</span> <span class="id">NOPERM</span>; <span class="tactic">eauto</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">INJ</span>; [<span class="tactic">apply</span> <span class="id">H</span>|..]; <span class="tactic">eauto</span>. <span class="id">des</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">des_ifs</span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">INJ</span>. <span class="id">exploit</span> <span class="id">mi_perm_inv0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_store_perm_iff">Mem_store_perm_iff</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">chunk</span> <span class="id">m0</span> <span class="id">blk</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STORE</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#chunk">chunk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">EQ</span>: <span class="id">all4</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> &lt;4&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>)&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7180')">Proof.</div>
<div class="proofscript" id="proof7180">
 <span class="id">ii</span>; <span class="tactic">split</span>; <span class="id">ss</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_store_perm_eq">Mem_store_perm_eq</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">chunk</span> <span class="id">m0</span> <span class="id">blk</span> <span class="id">ofs</span> <span class="id">v</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STORE</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.store">Mem.store</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#chunk">chunk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">EQ</span>: <span class="id">all4</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> =4= <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>)&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7181')">Proof.</div>
<div class="proofscript" id="proof7181">
 <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#prop_ext4">prop_ext4</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_store_perm_iff">Mem_store_perm_iff</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ARGPASSING">ARGPASSING</a></span>.<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="brange">brange</a></span> (<span class="id">blk</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>): <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span> := <span class="kwd">fun</span> <span class="id">b</span> <span class="id">ofs</span> =&gt; <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span>= <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> /\ <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>. <br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="UNFREE">UNFREE</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Mem_range_noperm">Mem_range_noperm</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span> (<span class="id">BDD</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>), ~ <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m">m</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.common.Memtype.html#Nonempty">Nonempty</a></span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_range_noperm">Mem_range_noperm</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_unchanged_noperm">Mem_unchanged_noperm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> <span class="id">m0</span> <span class="id">m1</span> <span class="id">blk</span> <span class="id">lo</span> <span class="id">hi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNCH</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#P">P</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NOPERM</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_range_noperm">Mem_range_noperm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RANGE</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> &lt;2= <span class="id"><a href="compcert.compcertm.MemoryC.html#P">P</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">NOPERM</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_range_noperm">Mem_range_noperm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7182')">Proof.</div>
<div class="proofscript" id="proof7182">
&nbsp;&nbsp;<span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">NOPERM</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">UNCH</span>. <span class="tactic">eapply</span> <span class="id">unchanged_on_perm</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_free_noperm">Mem_free_noperm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> <span class="id">blk</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FREE</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">NOPERM</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_range_noperm">Mem_range_noperm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7183')">Proof.</div>
<div class="proofscript" id="proof7183">
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchecked_free">Mem.unchecked_free</a></span>. <span class="id">ss</span>. <span class="id">ii</span>; <span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="id">simpl_bool</span>. <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Program</span> <span class="kwd">Definition</span> <span class="id"><a name="Mem_unfree">Mem_unfree</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mkmem">Mem.mkmem</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">Mem.setN</a></span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_repeat">list_repeat</a></span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>-<span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span>).(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span>) <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span>) <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> ((<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m">m</a></span>) # <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m">m</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PMap.set">PMap.set</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">ofs</span> <span class="id">k</span> =&gt; <span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> <span class="kwd">then</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> <span class="kwd">else</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">Mem.mem_access</a></span>)#<span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.MemoryC.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">Mem.mem_access</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.MemoryC.html#m">m</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>) <span class="id">_</span> <span class="id">_</span> <span class="id">_</span>)<br/>
&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7184')">Next Obligation.</div>
<div class="proofscript" id="proof7184">
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.access_max">Mem.access_max</a></span> <span class="id">m</span>). <span class="tactic">intro</span> <span class="id">PERM</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">Mem.perm_order</span>'' <span class="kwd">in</span> *. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">des_ifs</span>; <span class="id">simpl_bool</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">specialize</span> (<span class="id">PERM</span> <span class="id">b</span> <span class="id">ofs</span>); <span class="id">des_ifs</span>); <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">specialize</span> (<span class="id">PERM</span> <span class="id">b0</span> <span class="id">ofs</span>); <span class="id">des_ifs</span>).<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof7185')">Next Obligation.</div>
<div class="proofscript" id="proof7185">
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> *. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_noaccess">Mem.nextblock_noaccess</a></span> <span class="id">m</span>); <span class="tactic">eauto</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="id">des_ifs</span>; <span class="id">simpl_bool</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Defined.</div>
<div class="toggleproof" onclick="toggleDisplay('proof7186')">Next Obligation.</div>
<div class="proofscript" id="proof7186">
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.contents_default">Mem.contents_default</a></span> <span class="id">m</span>); <span class="tactic">eauto</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>; <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_default">Mem.setN_default</a></span>. <span class="id">ss</span>.<br/>
Defined.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_nextblock_unfree">Mem_nextblock_unfree</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> <span class="id">m1</span> <span class="id">blk</span> <span class="id">lo</span> <span class="id">hi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNFR</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>) = <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7187')">Proof.</div>
<div class="proofscript" id="proof7187">
 <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>; <span class="id">ss</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_valid_block_unfree">Mem_valid_block_unfree</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> <span class="id">m1</span> <span class="id">blk</span> <span class="id">lo</span> <span class="id">hi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNFR</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">all1</span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span>) &lt;1&gt; <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>.(<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7188')">Proof.</div>
<div class="proofscript" id="proof7188">
 <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>; <span class="id">ss</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_unfree_unchanged_on0">Mem_unfree_unchanged_on0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> <span class="id">m1</span> <span class="id">blk</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">P</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNFR</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RANGE</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> &lt;2= ~2 <span class="id"><a href="compcert.compcertm.MemoryC.html#P">P</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">UNCH</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#P">P</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7189')">Proof.</div>
<div class="proofscript" id="proof7189">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>; <span class="id">ss</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="id">refl</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span>. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">des_ifs</span>. <span class="id">exfalso</span>. <span class="id">simpl_bool</span>. <span class="id">des</span>. <span class="id">des_sumbool</span>. <span class="tactic">eapply</span> <span class="id">RANGE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">des_ifs</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">Mem.setN_outside</a></span>; <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#length_list_repeat">length_list_repeat</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#NNPP">NNPP</a></span>; <span class="id">ii</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#not_or_and">not_or_and</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">des</span>. <span class="tactic">eapply</span> <span class="id">RANGE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">u</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="id">lia</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (0 &lt;= <span class="id">hi</span> - <span class="id">lo</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span> <span class="kwd">in</span> *; <span class="id">ss</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">abstr</span> (<span class="id">hi</span> - <span class="id">lo</span>) <span class="id">x</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">try</span> <span class="id">xomega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.inj_neg">Z2Nat.inj_neg</a></span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_unfree_unchanged_on">Mem_unfree_unchanged_on</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> <span class="id">m1</span> <span class="id">blk</span> <span class="id">lo</span> <span class="id">hi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNFR</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">UNCH</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (~2 <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>) <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7190')">Proof.</div>
<div class="proofscript" id="proof7190">
 <span class="id">exploit</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_unchanged_on0">Mem_unfree_unchanged_on0</a></span>; <span class="id">et</span>. <span class="id">ii</span>. <span class="tactic">tauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_unfree_perm">Mem_unfree_perm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> <span class="id">m1</span> <span class="id">blk</span> <span class="id">lo</span> <span class="id">hi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNFR</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">PERM</span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#k">k</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#p">p</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7191')">Proof.</div>
<div class="proofscript" id="proof7191">
&nbsp;&nbsp;<span class="id">ii</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span>. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gss">PMap.gss</a></span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;- <span class="id">ss</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;- <span class="id">bsimpl</span>. <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_unfree_suceeds">Mem_unfree_suceeds</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> <span class="id">blk</span> <span class="id">lo</span> <span class="id">hi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VALID</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m1</span>, &lt;&lt;<span class="id">UNFR</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7192')">Proof.</div>
<div class="proofscript" id="proof7192">
 <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span>. <span class="id">des_ifs</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_unfree_extends">Mem_unfree_extends</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> <span class="id">m1</span> <span class="id">blk</span> <span class="id">lo</span> <span class="id">hi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NOPERM</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_range_noperm">Mem_range_noperm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNFR</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">EXT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7193')">Proof.</div>
<div class="proofscript" id="proof7193">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="id">econs</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>. <span class="id">econs</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="kwd">in</span> *; <span class="id">ii</span>; <span class="id">ss</span>; <span class="id">clarify</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">zsimpl</span>. <span class="id">des_ifs</span>; <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">ss</span>; <span class="id">des_sumbool</span>; <span class="id">clarify</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">zsimpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="id">des_ifs</span>; <span class="tactic">try</span> <span class="id">refl</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">lo</span> &lt;= <span class="id">ofs</span> &lt; <span class="id">hi</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exfalso</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">des_ifs</span>. <span class="tactic">eapply</span> <span class="id">NOPERM</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span>. <span class="tactic">rewrite</span> <span class="id">Heq</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_other">Mem.setN_other</a></span>; <span class="tactic">try</span> <span class="id">refl</span>. <span class="id">ii</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#length_list_repeat">length_list_repeat</a></span> <span class="kwd">in</span> *. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (0 &lt;= <span class="id">hi</span> - <span class="id">lo</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span> <span class="kwd">in</span> *; <span class="id">ss</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">abstr</span> (<span class="id">hi</span> - <span class="id">lo</span>) <span class="id">x</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">try</span> <span class="id">xomega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.inj_neg">Z2Nat.inj_neg</a></span> <span class="kwd">in</span> *. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>; <span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">ss</span>; <span class="id">des_sumbool</span>; <span class="id">clarify</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_unfree_right_inject">Mem_unfree_right_inject</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">F</span> <span class="id">m_src0</span> <span class="id">m_tgt0</span> <span class="id">blk</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m_tgt1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src0">m_src0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt0">m_tgt0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NOPERM</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_range_noperm">Mem_range_noperm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt0">m_tgt0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNFR</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt0">m_tgt0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt1">m_tgt1</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">INJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src0">m_src0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt1">m_tgt1</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7194')">Proof.</div>
<div class="proofscript" id="proof7194">
 <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.inject_extends_compose">Mem.inject_extends_compose</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree_extends">Mem_unfree_extends</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Local</span> <span class="kwd">Ltac</span> <span class="id">simp</span> := <span class="tactic">repeat</span> (<span class="id">bsimpl</span>; <span class="id">des</span>; <span class="id">des_sumbool</span>; <span class="id">ss</span>; <span class="id">clarify</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_setN_in_repeat">Mem_setN_in_repeat</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">n</span> <span class="id">v</span> <span class="id">p</span> <span class="id">q</span> <span class="id">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">IN</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#p">p</a></span> &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#q">q</a></span> &lt; <span class="id"><a href="compcert.compcertm.MemoryC.html#p">p</a></span> + <span class="id"><a href="compcert.compcertm.MemoryC.html#n">n</a></span>.(<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#q">q</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN">Mem.setN</a></span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_repeat">list_repeat</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#n">n</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#v">v</a></span>) <span class="id"><a href="compcert.compcertm.MemoryC.html#p">p</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#c">c</a></span>)) = <span class="id"><a href="compcert.compcertm.MemoryC.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7195')">Proof.</div>
<div class="proofscript" id="proof7195">
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.setN_in">Mem.setN_in</a></span> (<span class="id"><a href="compcert.lib.Coqlib.html#list_repeat">list_repeat</a></span> <span class="id">n</span> <span class="id">v</span>) <span class="id">p</span> <span class="id">q</span> <span class="id">c</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#length_list_repeat">length_list_repeat</a></span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#in_list_repeat">in_list_repeat</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="Mem_unfree_parallel_extends">Mem_unfree_parallel_extends</a></span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m1</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">EXTEND</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m2">m2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">UNFREE</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>'):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">UNFREE</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m2">m2</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>'&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">EXTEND</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.extends">Mem.extends</a></span> <span class="id">m1</span>' <span class="id">m2</span>'&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7196')">Proof.</div>
<div class="proofscript" id="proof7196">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span> <span class="kwd">in</span> <span class="id">UNFREE</span>. <span class="id">des_ifs</span>. <span class="id">dup</span> <span class="id">p</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mext_next">Mem.mext_next</a></span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_unfree">Mem_unfree</a></span>. <span class="id">des_ifs</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; <span class="id">i</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mext_next">Mem.mext_next</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">set</span> (<span class="id">INJ</span>:= <span class="id"><a href="compcert.common.Memory.html#Mem.mext_inj">Mem.mext_inj</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">EXTEND</span>). <span class="id">inv</span> <span class="id">INJ</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span>, <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>, <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="id">clarify</span>. <span class="id">zsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>; <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_extends">Mem.perm_extends</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="kwd">in</span> *. <span class="id">clarify</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span>, <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>, <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="id">clarify</span>. <span class="id">zsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_setN_in_repeat">Mem_setN_in_repeat</a></span>; <span class="tactic">eauto</span>; [<span class="id">econs</span>|]. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Z2Nat.id">Z2Nat.id</a></span>; <span class="id">nia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">Mem.setN_outside</a></span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">right</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#length_list_repeat">length_list_repeat</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.compcertm.IntegersC.html#Z2Nat_range">Z2Nat_range</a></span>; <span class="id">des_ifs</span>; <span class="tactic">try</span> <span class="id">nia</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">mi_memval</span>; <span class="tactic">eauto</span>; <span class="id">i</span>; <span class="id">zsimpl</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">Mem.setN_outside</a></span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">left</span>; <span class="id">nia</span>). <span class="id">exploit</span> <span class="id">mi_memval</span>; <span class="tactic">eauto</span>; <span class="id">i</span>; <span class="id">zsimpl</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.setN_outside">Mem.setN_outside</a></span>; <span class="tactic">try</span> <span class="tactic">by</span> (<span class="id">left</span>; <span class="id">nia</span>). <span class="id">exploit</span> <span class="id">mi_memval</span>; <span class="tactic">eauto</span>; <span class="id">i</span>; <span class="id">zsimpl</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exploit</span> <span class="id">mi_memval</span>; <span class="tactic">eauto</span>; <span class="id">i</span>; <span class="id">zsimpl</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span>, <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>, <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>; <span class="tactic">eauto</span>; <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mext_perm_inv">Mem.mext_perm_inv</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#UNFREE">UNFREE</a></span>.<br/>
<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">perm_impl_tac</span> := <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; [|<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>].<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="delta_range">delta_range</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">F</span> <span class="id">m_src</span> <span class="id">m_tgt</span> <span class="id">blk_src</span> <span class="id">blk_tgt</span> <span class="id">delta</span> <span class="id">sz</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJECT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src">m_src</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_tgt">m_tgt</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJVAL</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#F">F</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_src">blk_src</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.compcertm.MemoryC.html#blk_tgt">blk_tgt</a></span>, <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PERM</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m_src">m_src</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_src">blk_src</a></span> 0 <span class="id"><a href="compcert.compcertm.MemoryC.html#sz">sz</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SIZEARG</span>: 0 &lt; <span class="id"><a href="compcert.compcertm.MemoryC.html#sz">sz</a></span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">DELTA</span>: 0 &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">DELTA</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#sz">sz</a></span> + <span class="id"><a href="compcert.compcertm.MemoryC.html#delta">delta</a></span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7197')">Proof.</div>
<div class="proofscript" id="proof7197">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; <span class="tactic">eauto</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_zero">Ptrofs.unsigned_zero</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="id">perm_impl_tac</span>. <span class="tactic">eapply</span> <span class="id">PERM</span>. <span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.mi_representable">Mem.mi_representable</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">MWF</span>; <span class="tactic">eauto</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:= <span class="id">sz</span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span>)). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">try</span> <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_repr">Ptrofs.unsigned_repr</a></span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur_max">Mem.perm_cur_max</a></span>. <span class="id">perm_impl_tac</span>. <span class="tactic">eapply</span> <span class="id">PERM</span>. <span class="tactic">split</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_unchanged_on_bot">Mem_unchanged_on_bot</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NB</span>: ((<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span>) &lt;= (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>))%<span class="id">positive</span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id">bot2</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7198')">Proof.</div>
<div class="proofscript" id="proof7198">
 <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">Mem.unchanged_on_nextblock</span>: <span class="id">mem</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_loadbytes_succeeds">Mem_loadbytes_succeeds</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m0</span> <span class="id">blk</span> <span class="id">ofs</span> <span class="id">mv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PERM</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Readable">Readable</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MV</span>: <span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span>) # <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> = <span class="id"><a href="compcert.compcertm.MemoryC.html#mv">mv</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs">ofs</a></span> 1 = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> [<span class="id"><a href="compcert.compcertm.MemoryC.html#mv">mv</a></span>].<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7199')">Proof.</div>
<div class="proofscript" id="proof7199">
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span>. <span class="id">des_ifs</span>. <span class="id">exfalso</span>. <span class="tactic">apply</span> <span class="id">n</span>. <span class="id">r</span>. <span class="id">ii</span>. <span class="tactic">assert</span>(<span class="id">ofs0</span> = <span class="id">ofs</span>) <span class="tactic">by</span> <span class="id">xomega</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_equal_iff">Mem_equal_iff</a></span> <span class="id">m0</span> <span class="id">m1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CONTENTS</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.mem_contents">Mem.mem_contents</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PERM</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">Mem.mem_access</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.mem_access">Mem.mem_access</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NEXT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> = <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7200')">Proof.</div>
<div class="proofscript" id="proof7200">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">m0</span>, <span class="id">m1</span>. <span class="id">ss</span>. <span class="tactic">subst</span>. <span class="tactic">f_equal</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#proof_irrelevance">proof_irrelevance</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_unchanged_on_strengthen">Mem_unchanged_on_strengthen</a></span> <span class="id">P</span> <span class="id">m0</span> <span class="id">m1</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#P">P</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> &lt;-&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> ((<span class="kwd">fun</span> <span class="id">blk</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span>)/2\ <span class="id"><a href="compcert.compcertm.MemoryC.html#P">P</a></span>) <span class="id"><a href="compcert.compcertm.MemoryC.html#m0">m0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7201')">Proof.</div>
<div class="proofscript" id="proof7201">
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">i</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_implies">Mem.unchanged_on_implies</a></span>; <span class="tactic">eauto</span>; <span class="id">ss</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_free_zero_same">Mem_free_zero_same</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo0</span> <span class="id">hi0</span> <span class="id">lo1</span> <span class="id">hi1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SZ0</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#hi0">hi0</a></span> &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#lo0">lo0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SZ1</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#hi1">hi1</a></span> &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#lo1">lo1</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m">m</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo0">lo0</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi0">hi0</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m">m</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#b">b</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo1">lo1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi1">hi1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7202')">Proof.</div>
<div class="proofscript" id="proof7202">
&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span>. <span class="id">des_ifs</span>; <span class="tactic">try</span> (<span class="id">exfalso</span>; <span class="tactic">eapply</span> <span class="id">n</span>; <span class="id">ii</span>; <span class="id">lia</span>).<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_equal_iff">Mem_equal_iff</a></span>; <span class="id">ss</span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="tactic">extensionality</span> <span class="id">ofs</span>. <span class="tactic">extensionality</span> <span class="id">k</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="id">des_ifs</span>; <span class="id">exfalso</span>; <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id">Mem_free_parallel_inject</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">f</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">blk_src</span> <span class="id">blk_tgt</span> <span class="id">ofs_src</span> <span class="id">ofs_tgt</span> <span class="id">sz</span> <span class="id">m1</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#f">f</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m2">m2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VAL</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_src">blk_src</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs_src">ofs_src</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_tgt">blk_tgt</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs_tgt">ofs_tgt</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FREE</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m1">m1</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_src">blk_src</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs_src">ofs_src</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) (<span class="id"><a href="compcert.compcertm.MemoryC.html#ofs_src">ofs_src</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) + <span class="id"><a href="compcert.compcertm.MemoryC.html#sz">sz</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m1</span>'):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">FREE</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#m2">m2</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk_tgt">blk_tgt</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#ofs_tgt">ofs_tgt</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) (<span class="id"><a href="compcert.compcertm.MemoryC.html#ofs_tgt">ofs_tgt</a></span>.(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span>) + <span class="id"><a href="compcert.compcertm.MemoryC.html#sz">sz</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m2</span>'&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">INJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#f">f</a></span> <span class="id">m1</span>' <span class="id">m2</span>'&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7203')">Proof.</div>
<div class="proofscript" id="proof7203">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">VAL</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> 0 <span class="id">sz</span>).<br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_inject">Mem.free_parallel_inject</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.address_inject">Mem.address_inject</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">INJ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">replace</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs_src</span> + <span class="id">delta</span> + <span class="id">sz</span>) <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs_src</span> + <span class="id">sz</span> + <span class="id">delta</span>); [<span class="tactic">eauto</span>|<span class="id">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_range_perm">Mem.free_range_perm</a></span>; <span class="tactic">eauto</span>. <span class="id">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_inject">Mem.free_parallel_inject</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#Mem_free_zero_same">Mem_free_zero_same</a></span>; <span class="tactic">eauto</span>; <span class="id">lia</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="brange_split">brange_split</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">blk</span> <span class="id">lo</span> <span class="id">mid</span> <span class="id">hi</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RANGE</span>: <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> &lt;= <span class="id"><a href="compcert.compcertm.MemoryC.html#mid">mid</a></span> &lt; <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span> = <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#lo">lo</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#mid">mid</a></span> \2/ <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#blk">blk</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#mid">mid</a></span> <span class="id"><a href="compcert.compcertm.MemoryC.html#hi">hi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof7204')">Proof.</div>
<div class="proofscript" id="proof7204">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#func_ext1">func_ext1</a></span>; <span class="id">i</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.CoqlibC.html#func_ext1">func_ext1</a></span>; <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.compcertm.AxiomsC.html#prop_ext">AxiomsC.prop_ext</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.compcertm.MemoryC.html#brange">brange</a></span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">des</span>; <span class="id">clarify</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Logic.Classical_Prop.html#classic">classic</a></span> (<span class="id">x1</span> &lt; <span class="id">mid</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">left</span>. <span class="id">esplits</span>; <span class="id">et</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">right</span>. <span class="id">esplits</span>; <span class="id">et</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">des</span>; <span class="id">clarify</span>; <span class="id">esplits</span>; <span class="id">et</span>; <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
