
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Cminorgenproof</title>
<meta name="description" content="Documentation of Coq module Cminorgenproof" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Cminorgenproof</h1>
<div class="coq">
<br/>
<div class="doc">Correctness proof for Cminor generation. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Program.Equality.html">Coq.Program.Equality</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSets.html">FSets</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html">Permutation</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSets.html">FSets</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSetAVL.html">FSetAVL</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Structures.Orders.html">Orders</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Mergesort.html">Mergesort</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span> <span class="id"><a href="compcert.lib.Ordered.html">Ordered</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.lib.Intv.html">Intv</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.common.Linking.html">Linking</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span> <span class="id"><a href="compcert.common.Events.html">Events</a></span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="compcert.common.Smallstep.html">Smallstep</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html">Csharpminor</a></span> <span class="id"><a href="compcert.common.Switch.html">Switch</a></span> <span class="id"><a href="compcert.backend.Cminor.html">Cminor</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html">Cminorgen</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.sflib.html">sflib</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.common.SimMemInj.html">SimMemInj</a></span>.<br/>
<br/>
<span class="kwd">Local</span> <span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">error_monad_scope</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_prog">match_prog</a></span> (<span class="id">p</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#program">Csharpminor.program</a></span>) (<span class="id">tp</span>: <span class="id"><a href="compcert.backend.Cminor.html#program">Cminor.program</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#match_program">match_program</a></span> (<span class="kwd">fun</span> <span class="id">cu</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_fundef">transl_fundef</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tp">tp</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_program_match">transf_program_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">tp</span>, <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_program">transl_program</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tp">tp</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tp">tp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4849')">Proof.</div>
<div class="proofscript" id="proof4849">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Linking.html#match_transform_partial_program">match_transform_partial_program</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="TRANSLATION">TRANSLATION</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.prog">prog</a></span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#program">Csharpminor.program</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.tprog">tprog</a></span>: <span class="id"><a href="compcert.backend.Cminor.html#program">program</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="TRANSLATION.TRANSL">TRANSL</a></span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.prog">prog</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.tprog">tprog</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="TRANSLATION.CORELEMMA">CORELEMMA</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.CORELEMMA.se">se</a></span> <span class="id"><a name="TRANSLATION.CORELEMMA.tse">tse</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>.<br/>
<span class="kwd">Hypothesis</span> (<span class="id"><a name="TRANSLATION.CORELEMMA.MATCH_SENV">MATCH_SENV</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tse">tse</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.CORELEMMA.ge">ge</a></span> : <span class="id"><a href="compcert.cfrontend.Csharpminor.html#genv">Csharpminor.genv</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.CORELEMMA.tge">tge</a></span>: <span class="id"><a href="compcert.backend.Cminor.html#genv">genv</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="TRANSLATION.CORELEMMA.SECOMPATSRC">SECOMPATSRC</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#senv_genv_compat">senv_genv_compat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="TRANSLATION.CORELEMMA.SECOMPATTGT">SECOMPATTGT</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#senv_genv_compat">senv_genv_compat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tse">tse</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> (<span class="id"><a name="TRANSLATION.CORELEMMA.MATCH_GENV">MATCH_GENV</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="compcert.common.Linking.html#match_globdef">match_globdef</a></span> (<span class="kwd">fun</span> <span class="id">cu</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_fundef">transl_fundef</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.prog">prog</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="symbols_preserved">symbols_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">s</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>), <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span>.<br/>
<span class="kwd">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_match_genv">Genv.find_symbol_match_genv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.MATCH_GENV">MATCH_GENV</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="senv_preserved">senv_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Senv.equiv">Senv.equiv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span>.<br/>
<span class="kwd">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.senv_match_genv">Genv.senv_match_genv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.MATCH_GENV">MATCH_GENV</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="function_ptr_translated">function_ptr_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">f</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#fundef">Csharpminor.fundef</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> /\ <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_fundef">transl_fundef</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>.<br/>
<span class="kwd">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_transf_partial_genv">Genv.find_funct_ptr_transf_partial_genv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.MATCH_GENV">MATCH_GENV</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="functions_translated">functions_translated</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">v</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span class="id">f</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#fundef">Csharpminor.fundef</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> /\ <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_fundef">transl_fundef</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>.<br/>
<span class="kwd">Proof</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_transf_partial_genv">Genv.find_funct_transf_partial_genv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.MATCH_GENV">MATCH_GENV</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sig_preserved_body">sig_preserved_body</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">tf</span> <span class="id">cenv</span> <span class="id">size</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_funbody">transl_funbody</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#size">size</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_sig">fn_sig</a></span>) = <span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_sig">Csharpminor.fn_sig</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4850')">Proof.</div>
<div class="proofscript" id="proof4850">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_funbody">transl_funbody</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">monadInv</span> <span class="id">H</span>; <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sig_preserved">sig_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_fundef">transl_fundef</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#funsig">Cminor.funsig</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> = <span class="id"><a href="compcert.cfrontend.Csharpminor.html#funsig">Csharpminor.funsig</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4851')">Proof.</div>
<div class="proofscript" id="proof4851">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">tf</span>; <span class="tactic">destruct</span> <span class="id">f</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_function">transl_function</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#build_compilenv">build_compilenv</a></span> <span class="id">f</span>).<br/>
&nbsp;&nbsp;<span class="tactic">case</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">z</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>); <span class="tactic">simpl</span> <span class="id">bind</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sig_preserved_body">sig_preserved_body</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<h1> Derived properties of memory operations </h1>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="load_freelist">load_freelist</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fbl</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>' <span class="id">lo</span> <span class="id">hi</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fbl">fbl</a></span> -&gt; <span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fbl">fbl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#chunk">chunk</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> = <span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4852')">Proof.</div>
<div class="proofscript" id="proof4852">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">fbl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">lo</span>] <span class="id">hi</span>].<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">H0</span>. <span class="tactic">simpl</span>. <span class="id">case_eq</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m</span> <span class="id">b</span>' <span class="id">lo</span> <span class="id">hi</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">m1</span> <span class="id">FR1</span> <span class="id">FRL</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.load">Mem.load</a></span> <span class="id">chunk</span> <span class="id">m1</span> <span class="id">b</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHfbl</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_free">Mem.load_free</a></span>; <span class="tactic">eauto</span>. <span class="id">left</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#not_eq_sym">not_eq_sym</a></span>. <span class="tactic">eapply</span> <span class="id">H</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="perm_freelist">perm_freelist</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fbl</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fbl">fbl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4853')">Proof.</div>
<div class="proofscript" id="proof4853">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">fbl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">p</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">lo</span>] <span class="id">hi</span>]. <span class="id">case_eq</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m</span> <span class="id">b</span>' <span class="id">lo</span> <span class="id">hi</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nextblock_freelist">nextblock_freelist</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fbl</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fbl">fbl</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4854')">Proof.</div>
<div class="proofscript" id="proof4854">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">fbl</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">m</span>'; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b</span> <span class="id">lo</span>] <span class="id">hi</span>].<br/>
&nbsp;&nbsp;<span class="id">case_eq</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>); <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>). <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_list_freeable">free_list_freeable</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">m</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#l">l</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#l">l</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4855')">Proof.</div>
<div class="proofscript" id="proof4855">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">lo</span>'] <span class="id">hi</span>'].<br/>
&nbsp;&nbsp;<span class="id">caseEq</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">m</span> <span class="id">b</span>' <span class="id">lo</span>' <span class="id">hi</span>'); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">m1</span> <span class="id">FREE1</span> <span class="id">FREE2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nextblock_storev">nextblock_storev</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">m</span> <span class="id">addr</span> <span class="id">v</span> <span class="id">m</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#chunk">chunk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#addr">addr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>' = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4856')">Proof.</div>
<div class="proofscript" id="proof4856">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">addr</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">Mem.nextblock_store</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Correspondence between C#minor's and Cminor's environments and memory states </h1>
<br/>
<div class="doc">In C#minor, every variable is stored in a separate memory block.
  In the corresponding Cminor code, these variables become sub-blocks
  of the stack data block.  We capture these changes in memory via a
  memory injection <span class="bracket"><span class="id">f</span></span>:
  <span class="bracket"><span class="id">f</span> <span class="id">b</span> = <span class="id">Some</span>(<span class="id">b</span>', <span class="id">ofs</span>)</span> means that C#minor block <span class="bracket"><span class="id">b</span></span> corresponds
  to a sub-block of Cminor block <span class="bracket"><span class="id">b</span></span> at offset <span class="bracket"><span class="id">ofs</span></span>.
  A memory injection <span class="bracket"><span class="id">f</span></span> defines a relation <span class="bracket"><span class="id">Val.inject</span> <span class="id">f</span></span> between
  values and a relation <span class="bracket"><span class="id">Mem.inject</span> <span class="id">f</span></span> between memory states.  These
  relations will be used intensively in our proof of simulation
  between C#minor and Cminor executions. </div>
<br/>
<h2> Matching between Cshaprminor's temporaries and Cminor's variables </h2>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_temps">match_temps</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">le</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#temp_env">Csharpminor.temp_env</a></span>) (<span class="id">te</span>: <span class="id"><a href="compcert.backend.Cminor.html#env">env</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">v</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> -&gt; <span class="id">exists</span> <span class="id">v</span>', <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span>!(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">v</span>' /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id">v</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_temps_invariant">match_temps_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">f</span>' <span class="id">le</span> <span class="id">te</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps">match_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id">f</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps">match_temps</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4857')">Proof.</div>
<div class="proofscript" id="proof4857">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">H</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>) <span class="kwd">as</span> [<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_temps_assign">match_temps_assign</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">le</span> <span class="id">te</span> <span class="id">id</span> <span class="id">v</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps">match_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps">match_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4858')">Proof.</div>
<div class="proofscript" id="proof4858">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Matching between C#minor's variable environment and Cminor's stack pointer </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_var">match_var</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">sp</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> (<span class="id"><a href="compcert.common.Values.html#block">block</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#option">option</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_var_local">match_var_local</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span>)) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_var">match_var</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_var_global">match_var_global</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_var">match_var</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<br/>
<div class="doc">Matching between a C#minor environment <span class="bracket"><span class="id">e</span></span> and a Cminor
  stack pointer <span class="bracket"><span class="id">sp</span></span>. The <span class="bracket"><span class="id">lo</span></span> and <span class="bracket"><span class="id">hi</span></span> parameters delimit the range
  of addresses for the blocks referenced from <span class="bracket"><span class="id">te</span></span>. </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="match_env">match_env</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">cenv</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#compilenv">compilenv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">e</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#env">Csharpminor.env</a></span>) (<span class="id">sp</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="mk_match_env">mk_match_env</a></span> {<br/>
<br/>
<div class="doc">C#minor local variables match sub-blocks of the Cminor stack data block. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_vars">me_vars</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_var">match_var</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>) (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>);<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">lo</span>, <span class="id">hi</span></span> is a proper interval. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_low_high">me_low_high</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span>;<br/>
<br/>
<div class="doc">Every block appearing in the C#minor environment <span class="bracket"><span class="id">e</span></span> must be
  in the range <span class="bracket"><span class="id">lo</span>, <span class="id">hi</span></span>. </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_bounded">me_bounded</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span>, <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> /\ <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span>;<br/>
<br/>
<div class="doc">All blocks mapped to sub-blocks of the Cminor stack data must be
    images of variables from the C#minor environment <span class="bracket"><span class="id">e</span></span> </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_inv">me_inv</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>, <span class="id">exists</span> <span class="id">sz</span>, <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>);<br/>
<br/>
<div class="doc">All C#minor blocks below <span class="bracket"><span class="id">lo</span></span> (i.e. allocated before the blocks
  referenced from <span class="bracket"><span class="id">e</span></span>) must map to blocks that are below <span class="bracket"><span class="id">sp</span></span>
  (i.e. allocated before the stack data for the current Cminor function). </div>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="me_incr">me_incr</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">tb</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tb">tb</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tb">tb</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Ltac</span> <span class="id">geninv</span> <span class="id">x</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">H</span> := <span class="tactic">fresh</span> <span class="kwd">in</span> (<span class="tactic">generalize</span> <span class="id">x</span>; <span class="tactic">intro</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_invariant">match_env_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">f2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_env">match_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">delta</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span>)) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_env">match_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4859')">Proof.</div>
<div class="proofscript" id="proof4859">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;vars&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">geninv</span> (<span class="id">me_vars0</span> <span class="id">id</span>); <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;bounded&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;below&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">match_env</span></span> and external calls </div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="inject_incr_separated_same">inject_incr_separated_same</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">f2</span> <span class="id">m1</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4860')">Proof.</div>
<div class="proofscript" id="proof4860">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">case_eq</span> (<span class="id">f1</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b</span>' <span class="id">delta</span>] <span class="id">EQ</span>. <span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">EQ</span>. <span class="id">case_eq</span> (<span class="id">f2</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b</span>'1 <span class="id">delta1</span>] <span class="id">EQ1</span>. <span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">C</span> <span class="id">D</span>]. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">inject_incr_separated_same</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">f2</span> <span class="id">m1</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m1</span>' <span class="id">b</span>' -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4861')">Proof.</div>
<div class="proofscript" id="proof4861">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">case_eq</span> (<span class="id">f1</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b</span>'1 <span class="id">delta1</span>] <span class="id">EQ</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">H0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">C</span> <span class="id">D</span>]. <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_external_call">match_env_external_call</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">f2</span> <span class="id">m1</span> <span class="id">m1</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_env">match_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_env">match_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4862')">Proof.</div>
<div class="proofscript" id="proof4862">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_env_invariant">match_env_invariant</a></span> <span class="kwd">with</span> <span class="id">f1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">inject_incr_separated_same</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#inject_incr_separated_same">inject_incr_separated_same</a></span>; <span class="tactic">eauto</span>. <span class="tactic">red</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">match_env</span></span> and allocations </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_env_alloc">match_env_alloc</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">id</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">m1</span> <span class="id">sz</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">f2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_env">match_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">PTree.remove</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> 0 <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> = (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>', <span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id">b</span>' = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id">b</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_env">match_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4863')">Proof.</div>
<div class="proofscript" id="proof4863">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">f2</span>; <span class="tactic">intros</span> <span class="id">ME</span> <span class="id">ALLOC</span> <span class="id">CENV</span> <span class="id">INCR</span> <span class="id">SAME</span> <span class="id">OTHER</span> <span class="id">ENV</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">NEXTBLOCK</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">RES</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ME</span>; <span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;vars&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;the&nbsp;new&nbsp;var&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">id0</span>. <span class="tactic">rewrite</span> <span class="id">CENV</span>. <span class="id">constructor</span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_commut">Ptrofs.add_commut</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;old&nbsp;vars&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">me_vars0</span> <span class="id">id0</span>). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gro">PTree.gro</a></span>; <span class="tactic">auto</span>. <span class="tactic">intros</span> <span class="id">M</span>; <span class="id">inv</span> <span class="id">M</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
<span class="comment">(*&nbsp;low-high&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">NEXTBLOCK</span>; <span class="id">xomega</span>.<br/>
<span class="comment">(*&nbsp;bounded&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">NEXTBLOCK</span>; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">me_bounded0</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">NEXTBLOCK</span>; <span class="id">xomega</span>.<br/>
<span class="comment">(*&nbsp;inv&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>. <span class="tactic">rewrite</span> <span class="id">SAME</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="id">exists</span> <span class="id">id</span>; <span class="id">exists</span> <span class="id">sz</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">OTHER</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>. <span class="id">exploit</span> <span class="id">me_inv0</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">id1</span> [<span class="id">sz1</span> <span class="id">EQ</span>]]. <span class="id">exists</span> <span class="id">id1</span>; <span class="id">exists</span> <span class="id">sz1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
<span class="comment">(*&nbsp;incr&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">OTHER</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="kwd">in</span> *; <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The sizes of blocks appearing in <span class="bracket"><span class="id">e</span></span> are respected. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_bounds">match_bounds</a></span> (<span class="id">e</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#env">Csharpminor.env</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span> -&gt; 0 &lt;= <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_bounds_invariant">match_bounds_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">m1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_bounds">match_bounds</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">ofs</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_bounds">match_bounds</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4864')">Proof.</div>
<div class="proofscript" id="proof4864">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Permissions on the Cminor stack block </h2>
<br/>
<div class="doc">The parts of the Cminor stack data block that are not images of
    C#minor local variable blocks remain freeable at all times. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="is_reachable_from_env">is_reachable_from_env</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#env">Csharpminor.env</a></span>) (<span class="id">sp</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="is_reachable_intro">is_reachable_intro</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span> &lt;= <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span> + <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#is_reachable_from_env">is_reachable_from_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="padding_freeable">padding_freeable</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">e</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#env">Csharpminor.env</a></span>) (<span class="id">tm</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">sp</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">sz</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> \/ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#is_reachable_from_env">is_reachable_from_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="padding_freeable_invariant">padding_freeable_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">e</span> <span class="id">tm1</span> <span class="id">sp</span> <span class="id">sz</span> <span class="id">cenv</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">f2</span> <span class="id">tm2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#padding_freeable">padding_freeable</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm1">tm1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_env">match_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm1">tm1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm2">tm2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#padding_freeable">padding_freeable</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm2">tm2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4865')">Proof.</div>
<div class="proofscript" id="proof4865">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | <span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">inv</span> <span class="id">A</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#me_bounded">me_bounded</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">D</span> <span class="id">E</span>].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Decidability of the <span class="bracket"><span class="id">is_reachable_from_env</span></span> predicate. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="is_reachable_from_env_dec">is_reachable_from_env_dec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">e</span> <span class="id">sp</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#is_reachable_from_env">is_reachable_from_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> \/ ~<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#is_reachable_from_env">is_reachable_from_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4866')">Proof.</div>
<div class="proofscript" id="proof4866">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">pred</span> := <span class="kwd">fun</span> <span class="id">id_b_sz</span> : <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> * (<span class="id"><a href="compcert.common.Values.html#block">block</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id_b_sz">id_b_sz</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id">id</span>, (<span class="id">b</span>, <span class="id">sz</span>)) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">f</span> <span class="id">b</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">sp</span>', <span class="id">delta</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">sp</span> <span class="id">sp</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">delta</span> <span class="id">ofs</span> &amp;&amp; <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">ofs</span> (<span class="id">delta</span> + <span class="id">sz</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb">List.existsb</a></span> <span class="id">pred</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">PTree.elements</a></span> <span class="id">e</span>)) <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;yes&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb_exists">List.existsb_exists</a></span> <span class="kwd">in</span> <span class="id">Heqb</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">Heqb</span> <span class="kwd">as</span> [[<span class="id">id</span> [<span class="id">b</span> <span class="id">sz</span>]] [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">B</span>. <span class="tactic">destruct</span> (<span class="id">f</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">sp</span>' <span class="id">delta</span>] |] <span class="id">eqn</span>:?; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">sp</span> <span class="id">sp</span>'); <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#andb_prop">andb_prop</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#is_reachable_intro">is_reachable_intro</a></span> <span class="kwd">with</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">delta</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_complete">PTree.elements_complete</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool_true">proj_sumbool_true</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;no&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">red</span>; <span class="tactic">intro</span> <span class="id">NE</span>; <span class="id">inv</span> <span class="id">NE</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb">existsb</a></span> <span class="id">pred</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">PTree.elements</a></span> <span class="id">e</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#existsb_exists">List.existsb_exists</a></span>. <span class="id">exists</span> (<span class="id">id</span>, (<span class="id">b</span>, <span class="id">sz</span>)); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_true">dec_eq_true</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span>. <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zle_true">zle_true</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<h1> Correspondence between global environments </h1>
<br/>
<div class="doc">Global environments match if the memory injection <span class="bracket"><span class="id">f</span></span> leaves unchanged
  the references to global symbols and functions. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_globalenvs">match_globalenvs</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">bound</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="mk_match_globalenvs">mk_match_globalenvs</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">DOMAIN</span>: <span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, 0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">IMAGE</span>: <span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b2">b2</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b2">b2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b1">b1</a></span> = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b2">b2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SYMBOLS</span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FUNCTIONS</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">fd</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr">Genv.find_funct_ptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fd">fd</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VARINFOS</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">gv</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#gv">gv</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span>).<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="inj_preserves_globals">inj_preserves_globals</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">hi</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4867')">Proof.</div>
<div class="proofscript" id="proof4867">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">DOMAIN</span>. <span class="tactic">eapply</span> <span class="id">SYMBOLS</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">DOMAIN</span>. <span class="tactic">eapply</span> <span class="id">VARINFOS</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id">IMAGE</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Invariant on abstract call stacks  </h1>
<br/>
<div class="doc">Call stacks represent abstractly the execution state of the current
  C#minor and Cminor functions, as well as the states of the
  calling functions.  A call stack is a list of frames, each frame
  collecting information on the current execution state of a C#minor
  function and its Cminor translation. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="frame">frame</a></span> : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Frame">Frame</a></span>(<span class="id">cenv</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#compilenv">compilenv</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">tf</span>: <span class="id"><a href="compcert.backend.Cminor.html#function">Cminor.function</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">e</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#env">Csharpminor.env</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">le</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#temp_env">Csharpminor.temp_env</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">te</span>: <span class="id"><a href="compcert.backend.Cminor.html#env">Cminor.env</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">sp</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">lo</span> <span class="id">hi</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="callstack">callstack</a></span> : <span class="kwd">Type</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#frame">frame</a></span>.<br/>
<br/>
<div class="doc">Matching of call stacks imply:
<ul>
<li>
 matching of environments for each of the frames
</li>
<li>
 matching of the global environments
</li>
<li>
 separation conditions over the memory blocks allocated for C#minor local variables;
</li>
<li>
 separation conditions over the memory blocks allocated for Cminor stack data;
</li>
<li>
 freeable permissions on the parts of the Cminor stack data blocks
  that are not images of C#minor local variable blocks.
</li>
</ul>
</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_callstack">match_callstack</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">tm</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) (<span class="id">sm0</span>: <span class="id">SimMemInj.t</span>'):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#callstack">callstack</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="mcs_nil">mcs_nil</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">hi</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">SYMBINJ</span>: <span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tse">tse</a></span>) (<span class="id">HI</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="mcs_cons">mcs_cons</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">NON_EXT_TGT</span>: <span class="kwd">forall</span> <span class="id">i</span>, ~ (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">SimMemInj.tgt_external</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#i">i</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BOUND</span>: <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TBOUND</span>: <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MTMP</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps">match_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MENV</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_env">match_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">EXT</span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">blk</span> <span class="id">hi</span> (<span class="id">IN</span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">EXCL</span>: <span class="kwd">forall</span> <span class="id">ofs</span>, 0 &lt;= <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> -&gt; ~ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.common.SimMemInj.html#src_external">SimMemInj.src_external</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BOUND</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_bounds">match_bounds</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">PERM</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#padding_freeable">padding_freeable</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">match_callstack</span></span> implies <span class="bracket"><span class="id">match_globalenvs</span></span>. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_symbols_inject">match_callstack_symbols_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">sm0</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tse">tse</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4868')">Proof.</div>
<div class="proofscript" id="proof4868">
 <span class="tactic">induction</span> 1; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">sm0</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">hi</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> /\ (&lt;&lt;<span class="id">HI</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span>.(<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span>)&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4869')">Proof.</div>
<div class="proofscript" id="proof4869">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Invariance properties for <span class="bracket"><span class="id">match_callstack</span></span>. </div>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_le">match_callstack_le</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">sm0</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">sm1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.le</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4870')">Proof.</div>
<div class="proofscript" id="proof4870">
&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">induction</span> <span class="id">H</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">TGTPARENTEQ</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">SRCPARENTEQ</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_invariant">match_callstack_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">m1</span> <span class="id">tm1</span> <span class="id">f2</span> <span class="id">m2</span> <span class="id">tm2</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">sm0</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm1">tm1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">sp</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm1">tm1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm2">tm2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm2">tm2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4871')">Proof.</div>
<div class="proofscript" id="proof4871">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#symbols_inject_incr">symbols_inject_incr</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">inv</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.SECOMPATSRC">SECOMPATSRC</a></span>. <span class="tactic">rewrite</span> <span class="id">NB</span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> &lt;- <span class="id">H5</span>; <span class="id">ss</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">inv</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.SECOMPATTGT">SECOMPATTGT</a></span>. <span class="tactic">rewrite</span> <span class="id">NB</span> <span class="kwd">in</span> *. <span class="id">exploit</span> <span class="id">H6</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.MATCH_GENV">MATCH_GENV</a></span>. <span class="tactic">rewrite</span> <span class="id">mge_next</span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">intros</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IMAGE</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id">H6</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;inductive&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id">lo</span> <span class="id">hi</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#me_low_high">me_low_high</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps_invariant">match_temps_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_env_invariant">match_env_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H3</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_bounds_invariant">match_bounds_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#me_bounded">me_bounded</a></span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#padding_freeable_invariant">padding_freeable_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H3</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHmatch_callstack</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H2</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">H4</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_incr_bound">match_callstack_incr_bound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">bound</span>' <span class="id">tbound</span>' <span class="id">sm0</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id">bound</span>' -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span> <span class="id">tbound</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> <span class="id">bound</span>' <span class="id">tbound</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4872')">Proof.</div>
<div class="proofscript" id="proof4872">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">xomega</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Assigning a temporary variable. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_set_temp">match_callstack_set_temp</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">tf</span> <span class="id">id</span> <span class="id">v</span> <span class="id">tv</span> <span class="id">sm0</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4873')">Proof.</div>
<div class="proofscript" id="proof4873">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps_assign">match_temps_assign</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of <span class="bracket"><span class="id">match_callstack</span></span> by freeing all blocks allocated
  for local variables at function entry (on the C#minor side)
  and simultaneously freeing the Cminor stack data block. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="in_blocks_of_env">in_blocks_of_env</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, 0, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4874')">Proof.</div>
<div class="proofscript" id="proof4874">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#blocks_of_env">blocks_of_env</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id">b</span>, 0, <span class="id">sz</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#block_of_binding">block_of_binding</a></span> (<span class="id">id</span>, (<span class="id">b</span>, <span class="id">sz</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">List.in_map</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="in_blocks_of_env_inv">in_blocks_of_env_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">e</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span>) (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span>) /\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> = 0.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4875')">Proof.</div>
<div class="proofscript" id="proof4875">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#blocks_of_env">blocks_of_env</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_in_map_inv">list_in_map_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">id</span> [<span class="id">b</span>' <span class="id">sz</span>]] [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#block_of_binding">block_of_binding</a></span> <span class="kwd">in</span> <span class="id">A</span>. <span class="id">inv</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span>; <span class="tactic">intuition</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_complete">PTree.elements_complete</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_freelist">match_callstack_freelist</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">tm</span> <span class="id">sm0</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tm</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> 0 <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tm</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id">m</span>' <span class="id">tm</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>') (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>')<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id">m</span>' <span class="id">tm</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4876')">Proof.</div>
<div class="proofscript" id="proof4876">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">sm0</span>; <span class="tactic">intros</span> <span class="id">INJ</span> <span class="id">FREELIST</span> <span class="id">MCS</span>. <span class="id">inv</span> <span class="id">MCS</span>. <span class="id">inv</span> <span class="id">MENV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> ({<span class="id">tm</span>' | <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id">tm</span> <span class="id">sp</span> 0 (<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id">tf</span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tm</span>'}).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_free">Mem.range_perm_free</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">PERM</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | <span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">A</span>. <span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.range_perm">Mem.range_perm</a></span> <span class="id">m</span> <span class="id">b</span> 0 <span class="id">sz</span> <span class="id"><a href="compcert.common.Memtype.html#Cur">Cur</a></span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#free_list_freeable">free_list_freeable</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#in_blocks_of_env">in_blocks_of_env</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">ofs</span> <span class="kwd">with</span> ((<span class="id">ofs</span> - <span class="id">delta</span>) + <span class="id">delta</span>) <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_inject">Mem.perm_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">H3</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">X</span> <span class="kwd">as</span>  [<span class="id">tm</span>' <span class="id">FREE</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#nextblock_freelist">nextblock_freelist</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">NEXT</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">NEXT</span>'.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tm</span>'. <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">NEXT</span>; <span class="tactic">rewrite</span> <span class="id">NEXT</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_incr_bound">match_callstack_incr_bound</a></span> <span class="kwd">with</span> <span class="id">lo</span> <span class="id">sp</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_invariant">match_callstack_invariant</a></span> <span class="kwd">with</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#perm_freelist">perm_freelist</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_1">Mem.perm_free_1</a></span>; <span class="tactic">eauto</span>. <span class="id">left</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span>; <span class="id">xomega</span>. <span class="id">xomega</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_inject">Mem.free_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">me_inv0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">id</span> [<span class="id">sz</span> <span class="id">A</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> 0; <span class="id">exists</span> <span class="id">sz</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#in_blocks_of_env">in_blocks_of_env</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">BOUND0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_max">Mem.perm_max</a></span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Preservation of <span class="bracket"><span class="id">match_callstack</span></span> by external calls. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_external_call">match_callstack_external_call</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">f2</span> <span class="id">m1</span> <span class="id">m2</span> <span class="id">m1</span>' <span class="id">m2</span>' <span class="id">sm0</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span>) <span class="id">m1</span>' <span class="id">m2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.common.Memtype.html#Max">Max</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cs</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id">m1</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> <span class="id">m2</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4877')">Proof.</div>
<div class="proofscript" id="proof4877">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">sm0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">UNMAPPED</span> <span class="id">OUTOFREACH</span> <span class="id">INCR</span> <span class="id">SEPARATED</span> <span class="id">MAXPERMS</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#mcs_nil">mcs_nil</a></span> <span class="kwd">with</span> <span class="id">hi</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#symbols_inject_incr">symbols_inject_incr</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">i</span>. <span class="tactic">destruct</span> (<span class="id">f1</span> <span class="id">b</span>) <span class="id">eqn</span>:<span class="id">T</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">p</span>. <span class="id">clarify</span>. <span class="id">exploit</span> <span class="id">INCR</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">SEPARATED</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">clarify</span>. <span class="id">inv</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.SECOMPATSRC">SECOMPATSRC</a></span>. <span class="tactic">rewrite</span> <span class="id">NB</span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">i</span>. <span class="tactic">destruct</span> (<span class="id">f1</span> <span class="id">b</span>) <span class="id">eqn</span>:<span class="id">T</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">p</span>. <span class="id">clarify</span>. <span class="id">exploit</span> <span class="id">INCR</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">SEPARATED</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">clarify</span>. <span class="id">inv</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.SECOMPATTGT">SECOMPATTGT</a></span>. <span class="tactic">rewrite</span> <span class="id">NB</span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.MATCH_GENV">MATCH_GENV</a></span>. <span class="tactic">rewrite</span> <span class="id">mge_next</span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">case_eq</span> (<span class="id">f1</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">b2</span>' <span class="id">delta</span>'] <span class="id">EQ</span>. <span class="tactic">rewrite</span> (<span class="id">INCR</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">EQ</span>) <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">EQ</span>. <span class="id">exploit</span> <span class="id">SEPARATED</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">elim</span> <span class="id">B</span>. <span class="tactic">red</span>. <span class="id">xomega</span>.<br/>
<span class="comment">(*&nbsp;inductive&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps_invariant">match_temps_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_env_invariant">match_env_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span> <span class="kwd">in</span> <span class="id">SEPARATED</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">f1</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>']|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">INCR</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SEPARATED</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">elim</span> <span class="id">B</span>. <span class="tactic">red</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id">lo</span> <span class="id">hi</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#me_low_high">me_low_high</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f1</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>']|] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">INCR</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">f2</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>']|] <span class="id">eqn</span>:?; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SEPARATED</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">elim</span> <span class="id">A</span>. <span class="tactic">red</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_bounds_invariant">match_bounds_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">MAXPERMS</span>; <span class="tactic">eauto</span>. <span class="tactic">red</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#me_bounded">me_bounded</a></span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;padding-freeable&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#is_reachable_from_env_dec">is_reachable_from_env_dec</a></span> <span class="id">f1</span> <span class="id">e</span> <span class="id">sp</span> <span class="id">ofs</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>. <span class="id">right</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#is_reachable_intro">is_reachable_intro</a></span> <span class="kwd">with</span> <span class="id">id</span> <span class="id">b</span> <span class="id">sz</span> <span class="id">delta</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">PERM</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>]; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_unchanged_on">Mem.perm_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#me_inv">me_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">id</span> [<span class="id">lv</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">BOUND0</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#is_reachable_intro">is_reachable_intro</a></span> <span class="kwd">with</span> <span class="id">id</span> <span class="id">b0</span> <span class="id">lv</span> <span class="id">delta</span>; <span class="tactic">auto</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">mem</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;induction&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IHmatch_callstack</span>; <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">MENV</span>; <span class="id">xomega</span>. <span class="id">xomega</span>.<br/>
Qed.</div>
<br/>
<div class="doc"><span class="bracket"><span class="id">match_callstack</span></span> and allocations </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_alloc_right">match_callstack_alloc_right</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cs</span> <span class="id">tf</span> <span class="id">tm</span>' <span class="id">sp</span> <span class="id">le</span> <span class="id">te</span> <span class="id">cenv</span> <span class="id">sm0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VAL</span>: <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">ofs</span>, (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">SimMemInj.tgt_external</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> 0 <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span>) = (<span class="id">tm</span>', <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps">match_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id">tm</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#empty_env">empty_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4878')">Proof.</div>
<div class="proofscript" id="proof4878">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">NEXTBLOCK</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">RES</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">subst</span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">VAL</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="kwd">in</span> *; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eelim</span> <span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">Mem.fresh_block_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">RES</span>. <span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">tm</span> <span class="id">tb</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">Mem.perm_alloc_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_invariant">match_callstack_invariant</a></span> <span class="kwd">with</span> (<span class="id">tm1</span> := <span class="id">tm</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">RES</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_1">Mem.perm_alloc_1</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_alloc_left">match_callstack_alloc_left</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span> <span class="id">m1</span> <span class="id">tm</span> <span class="id">id</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">cs</span> <span class="id">sz</span> <span class="id">m2</span> <span class="id">b</span> <span class="id">f2</span> <span class="id">ofs</span> <span class="id">sm0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VAL</span>: <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">ofs</span>, (<span class="id"><a href="compcert.common.SimMemInj.html#src_external">SimMemInj.src_external</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">PTree.remove</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span>) :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> 0 <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> = (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b</span>', <span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id">b</span>' = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id">b</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span>) :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4879')">Proof.</div>
<div class="proofscript" id="proof4879">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">NEXTBLOCK</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">RES</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">LO</span>: <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id">lo</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m1</span>)) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#me_low_high">me_low_high</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps_invariant">match_temps_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_env_alloc">match_env_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">des_ifs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id">VAL</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id">EXT</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">H</span>. <span class="tactic">subst</span> <span class="id">b0</span> <span class="id">sz0</span> <span class="id">id0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_3">Mem.perm_alloc_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">BOUND0</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#me_bounded">me_bounded</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="kwd">in</span> *; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">PERM</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>]. <span class="tactic">auto</span>. <span class="id">right</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">A</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#is_reachable_intro">is_reachable_intro</a></span> <span class="kwd">with</span> <span class="id">id0</span> <span class="id">b0</span> <span class="id">sz0</span> <span class="id">delta</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_invariant">match_callstack_invariant</a></span> <span class="kwd">with</span> (<span class="id">m1</span> := <span class="id">m1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="kwd">in</span> *; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H4</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#block">block</a></span> <span class="kwd">in</span> *; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b0</span>. <span class="tactic">rewrite</span> <span class="id">H3</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">xomegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H4</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Correctness of stack allocation of local variables </h1>
<br/>
<div class="doc">This section shows the correctness of the translation of Csharpminor
  local variables as sub-blocks of the Cminor stack data.  This is the most difficult part of the proof. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="cenv_remove">cenv_remove</a></span> (<span class="id">cenv</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#compilenv">compilenv</a></span>) (<span class="id">vars</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) : <span class="id"><a href="compcert.cfrontend.Cminorgen.html#compilenv">compilenv</a></span> :=<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_right">fold_right</a></span> (<span class="kwd">fun</span> <span class="id">id_lv</span> <span class="id">ce</span> =&gt; <span class="id"><a href="compcert.lib.Maps.html#PTree.remove">PTree.remove</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id_lv">id_lv</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ce">ce</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="cenv_remove_gso">cenv_remove_gso</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">vars</span> <span class="id">cenv</span>,<br/>
&nbsp;&nbsp;~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_remove">cenv_remove</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>) = <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4880')">Proof.</div>
<div class="proofscript" id="proof4880">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gro">PTree.gro</a></span>. <span class="tactic">apply</span> <span class="id">IHvars</span>. <span class="tactic">intuition</span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="cenv_remove_gss">cenv_remove_gss</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">vars</span> <span class="id">cenv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_remove">cenv_remove</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4881')">Proof.</div>
<div class="proofscript" id="proof4881">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grspec">PTree.grspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">id</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">a</span>)). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">intuition</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="cenv_compat">cenv_compat</a></span> (<span class="id">cenv</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#compilenv">compilenv</a></span>) (<span class="id">vars</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) (<span class="id">tsz</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span><br/>
&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inj_offset_aligned">Mem.inj_offset_aligned</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span><br/>
&nbsp;&nbsp;&nbsp;/\ 0 &lt;= <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span><br/>
&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> 0 <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> &lt;= <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tsz">tsz</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="cenv_separated">cenv_separated</a></span> (<span class="id">cenv</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#compilenv">compilenv</a></span>) (<span class="id">vars</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id1</span> <span class="id">sz1</span> <span class="id">ofs1</span> <span class="id">id2</span> <span class="id">sz2</span> <span class="id">ofs2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id1">id1</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz1">sz1</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id2">id2</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz2">sz2</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id1">id1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs1">ofs1</a></span> -&gt; <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id2">id2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs2">ofs2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id1">id1</a></span> &lt;&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id2">id2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs1">ofs1</a></span> + <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz1">sz1</a></span> &lt;= <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs2">ofs2</a></span> \/ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs2">ofs2</a></span> + <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz2">sz2</a></span> &lt;= <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs1">ofs1</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="cenv_mem_separated">cenv_mem_separated</a></span> (<span class="id">cenv</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#compilenv">compilenv</a></span>) (<span class="id">vars</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> * <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>)) (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">sp</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">m</span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">sz</span> <span class="id">ofs</span> <span class="id">b</span> <span class="id">delta</span> <span class="id">ofs</span>' <span class="id">k</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> -&gt; <span class="id"><a href="compcert.lib.Maps.html#PTree.get">PTree.get</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id">ofs</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> &lt;= <span class="id">ofs</span>' + <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#delta">delta</a></span> &lt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> + <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_alloc_variables_rec">match_callstack_alloc_variables_rec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tm1</span> <span class="id">tm</span> <span class="id">sp</span> <span class="id">tf</span> <span class="id">cenv</span> <span class="id">le</span> <span class="id">te</span> <span class="id">lo</span> <span class="id">cs</span> <span class="id">sm0</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm1">tm1</a></span> 0 (<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>) = (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span> -&gt; 0 &lt;= <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, 0 &lt;= <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> &lt; <span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#p">p</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e1</span> <span class="id">m1</span> <span class="id">vars</span> <span class="id">e2</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Csharpminor.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e1">e1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e2">e2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VAL</span>: <span class="kwd">forall</span> <span class="id">blk</span> <span class="id">ofs</span>, (<span class="id"><a href="compcert.common.SimMemInj.html#src_external">SimMemInj.src_external</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_mem_separated">cenv_mem_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">sz</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e1">e1</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_remove">cenv_remove</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e1">e1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span>) :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e2">e2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span>) :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm1">tm1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4882')">Proof.</div>
<div class="proofscript" id="proof4882">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">sm0</span>; <span class="tactic">intros</span> <span class="id">ALLOC</span> <span class="id">VALID</span> <span class="id">REPRES</span> <span class="id">STKSIZE</span> <span class="id">STKPERMS</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span> <span class="id">f1</span> <span class="id">VAL</span> <span class="id">NOREPET</span> <span class="id">COMPAT</span> <span class="id">SEP1</span> <span class="id">SEP2</span> <span class="id">UNBOUND</span> <span class="id">MCS</span> <span class="id">MINJ</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">MCS</span>. <span class="id">exists</span> <span class="id">f1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">econs</span>; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;inductive&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">NOREPET</span>. <span class="id">inv</span> <span class="id">NOREPET</span>.<br/>
<span class="comment">(*&nbsp;exploit&nbsp;Mem.alloc_result;&nbsp;eauto.&nbsp;intros&nbsp;RES.<br/>
&nbsp;&nbsp;exploit&nbsp;Mem.nextblock_alloc;&nbsp;eauto.&nbsp;intros&nbsp;NB.*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">COMPAT</span> <span class="id">id</span> <span class="id">sz</span>). <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>. <span class="tactic">intros</span> [<span class="id">ofs</span> [<span class="id">CENV</span> [<span class="id">ALIGNED</span> [<span class="id">LOB</span> <span class="id">HIB</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_left_mapped_inject">Mem.alloc_left_mapped_inject</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">MINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">VALID</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">ofs</span>). <span class="id">zify</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">STKSIZE</span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">STKPERMS</span>. <span class="id">zify</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">sz</span> - 0) <span class="kwd">with</span> <span class="id">sz</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">SEP2</span>. <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">coqlib</span>. <span class="id">eexact</span> <span class="id">CENV</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f2</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">IHalloc_variables</span> <span class="id">f2</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">VAL</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">red</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">COMPAT</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">SEP1</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_inv">Mem.perm_alloc_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b</span> <span class="id">b1</span>); <span class="tactic">intros</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b</span>. <span class="tactic">rewrite</span> <span class="id">C</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="id">inv</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SEP1</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_eq">in_eq</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_cons">in_cons</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">id0</span>. <span class="tactic">elim</span> <span class="id">H3</span>. <span class="id">change</span> <span class="id">id</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id</span>, <span class="id">sz0</span>)). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">SEP2</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_cons">in_cons</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">D</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">eapply</span> <span class="id">UNBOUND</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">id0</span>. <span class="tactic">elim</span> <span class="id">H3</span>. <span class="id">change</span> <span class="id">id</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id</span>, <span class="id">sz0</span>)). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_alloc_left">match_callstack_alloc_left</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_remove_gso">cenv_remove_gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">UNBOUND</span> <span class="kwd">with</span> <span class="id">sz</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="id">exists</span> <span class="id">f0</span>; <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#inject_incr_trans">inject_incr_trans</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b0</span> <span class="id">b1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">subst</span> <span class="id">b0</span>. <span class="id">exploit</span> <span class="id">H5</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">clarify</span>. <span class="tactic">split</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">Mem.fresh_block_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id">H6</span>; <span class="tactic">eauto</span>. <span class="id">erewrite</span> <span class="id">D</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_callstack_alloc_variables">match_callstack_alloc_variables</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tm1</span> <span class="id">sp</span> <span class="id">tm2</span> <span class="id">m1</span> <span class="id">vars</span> <span class="id">e</span> <span class="id">m2</span> <span class="id">cenv</span> <span class="id">f1</span> <span class="id">cs</span> <span class="id">fn</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sm0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VAL</span>:<span class="kwd">forall</span> (<span class="id">blk</span> : <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>), <span class="id"><a href="compcert.common.SimMemInj.html#src_external">SimMemInj.src_external</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VAL2</span>: <span class="kwd">forall</span> (<span class="id">blk</span> : <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>), <span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">SimMemInj.tgt_external</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm1">tm1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm1">tm1</a></span> 0 (<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span>) = (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm2">tm2</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span> &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Csharpminor.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#empty_env">empty_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm1">tm1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm1">tm1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm1">tm1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps">match_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm2">tm2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span>) :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm2">tm2</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m2">m2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm2">tm2</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f1">f1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f2">f2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m1">m1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm1">tm1</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4883')">Proof.</div>
<div class="proofscript" id="proof4883">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_alloc_variables_rec">match_callstack_alloc_variables_rec</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_new_block">Mem.valid_new_block</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_3">Mem.perm_alloc_3</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Memtype.html#Freeable">Freeable</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">mem</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_2">Mem.perm_alloc_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.common.Memory.html#Mem.fresh_block_alloc">Mem.fresh_block_alloc</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_alloc_right">match_callstack_alloc_right</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In_dec">In_dec</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">vars</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_remove_gss">cenv_remove_gss</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_remove_gso">cenv_remove_gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">cenv</span>!<span class="id">id</span>) <span class="kwd">as</span> [<span class="id">ofs</span>|] <span class="id">eqn</span>:?; <span class="tactic">auto</span>. <span class="tactic">elim</span> <span class="id">n</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_right_inject">Mem.alloc_right_inject</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Properties of the compilation environment produced by <span class="bracket"><span class="id">build_compilenv</span></span> </div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="block_alignment_pos">block_alignment_pos</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sz</span>, <span class="id"><a href="compcert.cfrontend.Cminorgen.html#block_alignment">block_alignment</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> &gt; 0.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4884')">Proof.</div>
<div class="proofscript" id="proof4884">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#block_alignment">block_alignment</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 2). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 4). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 8); <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="assign_variable_incr">assign_variable_incr</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">sz</span> <span class="id">cenv</span> <span class="id">stksz</span> <span class="id">cenv</span>' <span class="id">stksz</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#assign_variable">assign_variable</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#stksz">stksz</a></span>) (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) = (<span class="id">cenv</span>', <span class="id">stksz</span>') -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#stksz">stksz</a></span> &lt;= <span class="id">stksz</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4885')">Proof.</div>
<div class="proofscript" id="proof4885">
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Coqlib.html#align_le">align_le</a></span> <span class="id">stksz</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#block_alignment">block_alignment</a></span> <span class="id">sz</span>) (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#block_alignment_pos">block_alignment_pos</a></span> <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (0 &lt;= <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> 0 <span class="id">sz</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zmax_bound_l">Zmax_bound_l</a></span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="assign_variables_incr">assign_variables_incr</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span> <span class="id">cenv</span> <span class="id">sz</span> <span class="id">cenv</span>' <span class="id">sz</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#assign_variables">assign_variables</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> = (<span class="id">cenv</span>', <span class="id">sz</span>') -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> &lt;= <span class="id">sz</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4886')">Proof.</div>
<div class="proofscript" id="proof4886">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">sz</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">omega</span>.<br/>
<span class="id">Opaque</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#assign_variable">assign_variable</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">s</span>]. <span class="tactic">simpl</span>. <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#assign_variable">assign_variable</a></span> (<span class="id">cenv</span>, <span class="id">sz</span>) (<span class="id">id</span>, <span class="id">s</span>)) <span class="kwd">as</span> [<span class="id">cenv1</span> <span class="id">sz1</span>] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_trans">Z.le_trans</a></span> <span class="kwd">with</span> <span class="id">sz1</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#assign_variable_incr">assign_variable_incr</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
<span class="id">Transparent</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#assign_variable">assign_variable</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="inj_offset_aligned_block">inj_offset_aligned_block</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">stacksize</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inj_offset_aligned">Mem.inj_offset_aligned</a></span> (<span class="id"><a href="compcert.lib.Coqlib.html#align">align</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#stacksize">stacksize</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#block_alignment">block_alignment</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>)) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4887')">Proof.</div>
<div class="proofscript" id="proof4887">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zdivides_trans">Zdivides_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#block_alignment">block_alignment</a></span> <span class="id">sz</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memdata.html#align_chunk">align_chunk</a></span>.  <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#block_alignment">block_alignment</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_1_l">Z.divide_1_l</a></span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_refl">Z.divide_refl</a></span>; <span class="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (2 | 4). <span class="id">exists</span> 2; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (2 | 8). <span class="id">exists</span> 4; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (4 | 8). <span class="id">exists</span> 2; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 2).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">chunk</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 4).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">chunk</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 8).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">chunk</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">auto</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">chunk</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_divides">align_divides</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#block_alignment_pos">block_alignment_pos</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id">inj_offset_aligned_block</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">stacksize</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inj_offset_aligned">Mem.inj_offset_aligned</a></span> (<span class="id"><a href="compcert.lib.Coqlib.html#align">align</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#stacksize">stacksize</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#block_alignment">block_alignment</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> 0 <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4888')">Proof.</div>
<div class="proofscript" id="proof4888">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#block_alignment">block_alignment</a></span> <span class="id">sz</span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#block_alignment">block_alignment</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> 0 <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#inj_offset_aligned_block">inj_offset_aligned_block</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#Zmax_spec">Zmax_spec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">sz</span> 0); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">transitivity</span> 1. <span class="tactic">reflexivity</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#block_alignment">block_alignment</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>. <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="assign_variable_sound">assign_variable_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv1</span> <span class="id">sz1</span> <span class="id">id</span> <span class="id">sz</span> <span class="id">cenv2</span> <span class="id">sz2</span> <span class="id">vars</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#assign_variable">assign_variable</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv1">cenv1</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz1">sz1</a></span>) (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) = (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv2">cenv2</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz2">sz2</a></span>) -&gt;<br/>
&nbsp;&nbsp;~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz1">sz1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv1">cenv1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz1">sz1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv1">cenv1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv2">cenv2</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> ++ (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz2">sz2</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv2">cenv2</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> ++ (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4889')">Proof.</div>
<div class="proofscript" id="proof4889">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#assign_variable">assign_variable</a></span>; <span class="tactic">intros</span> <span class="id">until</span> <span class="id">vars</span>; <span class="tactic">intros</span> <span class="id">ASV</span> <span class="id">NOREPET</span> <span class="id">POS</span> <span class="id">COMPAT</span> <span class="id">SEP</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">ASV</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">LE</span>: <span class="id">sz1</span> &lt;= <span class="id"><a href="compcert.lib.Coqlib.html#align">align</a></span> <span class="id">sz1</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#block_alignment">block_alignment</a></span> <span class="id">sz</span>)). <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#align_le">align_le</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#block_alignment_pos">block_alignment_pos</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EITHER</span>: <span class="kwd">forall</span> <span class="id">id</span>' <span class="id">sz</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">id</span>', <span class="id">sz</span>') (<span class="id">vars</span> ++ (<span class="id">id</span>, <span class="id">sz</span>) :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id">id</span>', <span class="id">sz</span>') <span class="id">vars</span> /\ <span class="id">id</span>' &lt;&gt; <span class="id">id</span> \/ (<span class="id">id</span>', <span class="id">sz</span>') = (<span class="id">id</span>, <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#in_app">in_app</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">id</span>'. <span class="tactic">elim</span> <span class="id">NOREPET</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id">id</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id</span>, <span class="id">sz</span>')). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">auto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">EITHER</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [[<span class="id">P</span> <span class="id">Q</span>] | <span class="id">P</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">COMPAT</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">ofs</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">zify</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">P</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.lib.Coqlib.html#align">align</a></span> <span class="id">sz1</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#block_alignment">block_alignment</a></span> <span class="id">sz</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#inj_offset_aligned_block">inj_offset_aligned_block</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">EITHER</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">apply</span> <span class="id">EITHER</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [[<span class="id">P</span> <span class="id">Q</span>] | <span class="id">P</span>]; <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [[<span class="id">R</span> <span class="id">S</span>] | <span class="id">R</span>].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="kwd">in</span> *; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id">SEP</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">R</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">COMPAT</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">ofs</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ofs</span> = <span class="id">ofs1</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="id">zify</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">P</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">COMPAT</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">ofs</span> [<span class="id">A</span> [<span class="id">B</span> [<span class="id">C</span> <span class="id">D</span>]]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ofs</span> = <span class="id">ofs2</span>) <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">subst</span> <span class="id">ofs</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">zify</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="assign_variables_sound">assign_variables_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span>' <span class="id">cenv1</span> <span class="id">sz1</span> <span class="id">cenv2</span> <span class="id">sz2</span> <span class="id">vars</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#assign_variables">assign_variables</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv1">cenv1</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz1">sz1</a></span>) <span class="id">vars</span>' = (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv2">cenv2</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz2">sz2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">vars</span>' ++ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>) -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz1">sz1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv1">cenv1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz1">sz1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv1">cenv1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv2">cenv2</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> ++ <span class="id">vars</span>') <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz2">sz2</a></span> /\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv2">cenv2</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> ++ <span class="id">vars</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4890')">Proof.</div>
<div class="proofscript" id="proof4890">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>'; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>. <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">sz</span>].<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#in_app">in_app</a></span> <span class="kwd">in</span> <span class="id">H6</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet_app">list_norepet_app</a></span> <span class="kwd">in</span> <span class="id">H7</span>. <span class="tactic">destruct</span> <span class="id">H7</span> <span class="kwd">as</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#assign_variable">assign_variable</a></span> (<span class="id">cenv1</span>, <span class="id">sz1</span>) (<span class="id">id</span>, <span class="id">sz</span>)) <span class="kwd">as</span> [<span class="id">cenv</span>' <span class="id">sz</span>'] <span class="id">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#assign_variable_sound">assign_variable_sound</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">vars</span>). <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHvars</span>'.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">vars</span> ++ ((<span class="id">id</span>, <span class="id">sz</span>) :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet_app">list_norepet_app</a></span>. <span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet_append_commut">list_norepet_append_commut</a></span>. <span class="tactic">simpl</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="tactic">simpl</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#in_app">in_app</a></span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">destruct</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">destruct</span> <span class="id">H4</span>. <span class="tactic">subst</span> <span class="id">y</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">x</span>. <span class="tactic">tauto</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#assign_variable_incr">assign_variable_incr</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">Heqp</span>). <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_ass">app_ass</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="permutation_norepet">permutation_norepet</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">A</span>: <span class="kwd">Type</span>) (<span class="id">l</span> <span class="id">l</span>': <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#A">A</a></span>), <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation">Permutation</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#l">l</a></span> <span class="id">l</span>' -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#l">l</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> <span class="id">l</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4891')">Proof.</div>
<div class="proofscript" id="proof4891">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">H3</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_in">Permutation_in</a></span> <span class="kwd">with</span> <span class="id">l</span>'; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_sym">Permutation_sym</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="id">constructor</span>. <span class="tactic">simpl</span>; <span class="tactic">intuition</span>. <span class="id">constructor</span>. <span class="tactic">intuition</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="build_compilenv_sound">build_compilenv_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#build_compilenv">build_compilenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> = (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_compat">cenv_compat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> /\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_separated">cenv_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4892')">Proof.</div>
<div class="proofscript" id="proof4892">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#build_compilenv">build_compilenv</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">vars1</span> := <span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id">f</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#VarSort.Permuted_sort">VarSort.Permuted_sort</a></span> <span class="id">vars1</span>). <span class="tactic">intros</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">vars2</span> := <span class="id"><a href="compcert.cfrontend.Cminorgen.html#VarSort.sort">VarSort.sort</a></span> <span class="id">vars1</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_compat">cenv_compat</a></span> <span class="id">cenv</span> <span class="id">vars2</span> <span class="id">sz</span> /\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv_separated">cenv_separated</a></span> <span class="id">cenv</span> <span class="id">vars2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">change</span> <span class="id">vars2</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> ++ <span class="id">vars2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#assign_variables_sound">assign_variables_sound</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexact</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_nil_r">app_nil_r</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#permutation_norepet">permutation_norepet</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">vars1</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_map">Permutation_map</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">A</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_in">Permutation_in</a></span> <span class="kwd">with</span> <span class="id">vars1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id">B</span>; <span class="tactic">eauto</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_in">Permutation_in</a></span> <span class="kwd">with</span> <span class="id">vars1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="assign_variables_domain">assign_variables_domain</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">vars</span> <span class="id">cesz</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#assign_variables">assign_variables</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cesz">cesz</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>))!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cesz">cesz</a></span>)!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> \/ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4893')">Proof.</div>
<div class="proofscript" id="proof4893">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHvars</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#assign_variable">assign_variable</a></span>. <span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id1</span> <span class="id">sz1</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cesz</span> <span class="kwd">as</span> [<span class="id">cenv</span> <span class="id">stksz</span>]. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">id1</span>). <span class="tactic">auto</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="build_compilenv_domain">build_compilenv_domain</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">cenv</span> <span class="id">sz</span> <span class="id">id</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#build_compilenv">build_compilenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> = (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4894')">Proof.</div>
<div class="proofscript" id="proof4894">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#build_compilenv">build_compilenv</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">vars1</span> := <span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id">f</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#VarSort.Permuted_sort">VarSort.Permuted_sort</a></span> <span class="id">vars1</span>). <span class="tactic">intros</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">vars2</span> := <span class="id"><a href="compcert.cfrontend.Cminorgen.html#VarSort.sort">VarSort.sort</a></span> <span class="id">vars1</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#assign_variables_domain">assign_variables_domain</a></span> <span class="id">id</span> <span class="id">vars2</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>, 0)).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H1</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_in">Permutation_in</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id">vars2</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_map">Permutation_map</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Sorting.Permutation.html#Permutation_sym">Permutation_sym</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Initialization of C#minor temporaries and Cminor local variables. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="create_undef_temps_val">create_undef_temps_val</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">v</span> <span class="id">temps</span>, (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#temps">temps</a></span>)!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#temps">temps</a></span> /\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> = <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4895')">Proof.</div>
<div class="proofscript" id="proof4895">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">temps</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHtemps</span>; <span class="tactic">eauto</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id">set_params</span>' (<span class="id">vl</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span class="id">il</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) (<span class="id">te</span>: <span class="id"><a href="compcert.backend.Cminor.html#env">Cminor.env</a></span>) : <span class="id"><a href="compcert.backend.Cminor.html#env">Cminor.env</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vl">vl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id">i1</span> :: <span class="id">is</span>, <span class="id">v1</span> :: <span class="id">vs</span> =&gt; <span class="id">set_params</span>' <span class="id">vs</span> <span class="id">is</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">i1</span> <span class="id">v1</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span>)<br/>
&nbsp;&nbsp;| <span class="id">i1</span> :: <span class="id">is</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id">set_params</span>' <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">is</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">i1</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bind_parameters_agree_rec">bind_parameters_agree_rec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">vars</span> <span class="id">vals</span> <span class="id">tvals</span> <span class="id">le1</span> <span class="id">le2</span> <span class="id">te</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Csharpminor.html#bind_parameters">bind_parameters</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vals">vals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le1">le1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le2">le2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vals">vals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tvals">tvals</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps">match_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le1">le1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps">match_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le2">le2</a></span> (<span class="id">set_params</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tvals">tvals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4896')">Proof.</div>
<div class="proofscript" id="proof4896">
<span class="id">Opaque</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vars</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vals</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vals</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id">IHvars</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_params</span>'<span class="id">_outside</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">il</span> <span class="id">vl</span> <span class="id">te</span>, ~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span> -&gt; (<span class="id">set_params</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vl">vl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span>)!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4897')">Proof.</div>
<div class="proofscript" id="proof4897">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vl</span>; <span class="tactic">rewrite</span> <span class="id">IHil</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">intuition</span>. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">intuition</span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_params</span>'<span class="id">_inside</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">il</span> <span class="id">vl</span> <span class="id">te1</span> <span class="id">te2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">set_params</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vl">vl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te1">te1</a></span>)!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = (<span class="id">set_params</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vl">vl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te2">te2</a></span>)!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4898')">Proof.</div>
<div class="proofscript" id="proof4898">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">vl</span>; <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">List.in_dec</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">il</span>); <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>;<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">a</span> = <span class="id">id</span>) <span class="tactic">by</span> <span class="tactic">intuition</span>; <span class="tactic">subst</span> <span class="id">a</span>; <span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_params_set_params</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">il</span> <span class="id">vl</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Cminor.html#set_params">set_params</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vl">vl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span>)!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = (<span class="id">set_params</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vl">vl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>))!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4899')">Proof.</div>
<div class="proofscript" id="proof4899">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">vl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHil</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">List.in_dec</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">il</span>). <span class="tactic">apply</span> <span class="id">set_params</span>'<span class="id">_inside</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">IHil</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">List.in_dec</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">il</span>). <span class="tactic">apply</span> <span class="id">set_params</span>'<span class="id">_inside</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_locals_outside">set_locals_outside</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">id</span> <span class="id">il</span>,<br/>
&nbsp;&nbsp;~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span> -&gt; (<span class="id"><a href="compcert.backend.Cminor.html#set_locals">set_locals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>)!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4900')">Proof.</div>
<div class="proofscript" id="proof4900">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span>. <span class="tactic">apply</span> <span class="id">IHil</span>. <span class="tactic">tauto</span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_locals_inside">set_locals_inside</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">id</span> <span class="id">il</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span> -&gt; (<span class="id"><a href="compcert.backend.Cminor.html#set_locals">set_locals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#il">il</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>)!<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4901')">Proof.</div>
<div class="proofscript" id="proof4901">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">a</span>). <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">set_locals_set_params</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vars</span> <span class="id">vals</span> <span class="id">params</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#params">params</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_disjoint">list_disjoint</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#params">params</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Cminor.html#set_locals">set_locals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#set_params">set_params</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vals">vals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#params">params</a></span>)) ! <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> =<br/>
&nbsp;&nbsp;(<span class="id">set_params</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vals">vals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#params">params</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#set_locals">set_locals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vars">vars</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>))) ! <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4902')">Proof.</div>
<div class="proofscript" id="proof4902">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">vars</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">id</span> <span class="id">params</span>). <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_disjoint_notin">list_disjoint_notin</a></span> <span class="kwd">with</span> <span class="id">vars</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_disjoint_sym">list_disjoint_sym</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#set_locals_inside">set_locals_inside</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#set_locals_inside">set_locals_inside</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#set_locals_outside">set_locals_outside</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">set_params_set_params</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">params</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">set_params</span>'<span class="id">_inside</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> <span class="tactic">rewrite</span> <span class="id">set_params</span>'<span class="id">_outside</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#set_locals_outside">set_locals_outside</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bind_parameters_agree">bind_parameters_agree</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">params</span> <span class="id">temps</span> <span class="id">vals</span> <span class="id">tvals</span> <span class="id">le</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Csharpminor.html#bind_parameters">bind_parameters</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#params">params</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vals">vals</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#temps">temps</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#vals">vals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tvals">tvals</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#params">params</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_disjoint">list_disjoint</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#params">params</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#temps">temps</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_temps">match_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#set_locals">set_locals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#temps">temps</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#set_params">set_params</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tvals">tvals</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#params">params</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4903')">Proof.</div>
<div class="proofscript" id="proof4903">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bind_parameters_agree_rec">bind_parameters_agree_rec</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id"><a href="compcert.backend.Cminor.html#set_locals">set_locals</a></span> <span class="id">temps</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>)).<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#create_undef_temps_val">create_undef_temps_val</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">subst</span> <span class="id">v0</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#set_locals_inside">set_locals_inside</a></span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">v</span>' [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">A</span>. <span class="tactic">apply</span> <span class="id">set_locals_set_params</span>'; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The main result in this section. </div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="match_callstack_function_entry">match_callstack_function_entry</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fn</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">m</span> <span class="id">e</span> <span class="id">m</span>' <span class="id">tm</span> <span class="id">tm</span>' <span class="id">sp</span> <span class="id">f</span> <span class="id">cs</span> <span class="id">args</span> <span class="id">targs</span> <span class="id">le</span> <span class="id">sm0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VAL</span>:<span class="kwd">forall</span> (<span class="id">blk</span> : <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>), <span class="id"><a href="compcert.common.SimMemInj.html#src_external">SimMemInj.src_external</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">VAL2</span>:<span class="kwd">forall</span> (<span class="id">blk</span> : <span class="id"><a href="compcert.common.Values.html#block">block</a></span>) (<span class="id">ofs</span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>), <span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">SimMemInj.tgt_external</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#blk">blk</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#build_compilenv">build_compilenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span> = (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span>) &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_params">Csharpminor.fn_params</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_disjoint">list_disjoint</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_params">Csharpminor.fn_params</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span>) (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_temps">Csharpminor.fn_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Csharpminor.html#alloc_variables">alloc_variables</a></span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#empty_env">Csharpminor.empty_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_vars">Csharpminor.fn_vars</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Csharpminor.html#bind_parameters">bind_parameters</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_params">Csharpminor.fn_params</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#args">args</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#create_undef_temps">create_undef_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span>.(<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_temps">fn_temps</a></span>)) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#args">args</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#targs">targs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> 0 <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span>) = (<span class="id">tm</span>', <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">te</span> := <span class="id"><a href="compcert.backend.Cminor.html#set_locals">set_locals</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_temps">Csharpminor.fn_temps</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span>) (<span class="id"><a href="compcert.backend.Cminor.html#set_params">set_params</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#targs">targs</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_params">Csharpminor.fn_params</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span>)) <span class="kwd">in</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id">f</span>' <span class="id">m</span>' <span class="id">tm</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>') :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>') (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>')<br/>
&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id">f</span>' <span class="id">m</span>' <span class="id">tm</span>'<br/>
&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id">f</span>'<br/>
&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4904')">Proof.</div>
<div class="proofscript" id="proof4904">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#build_compilenv_sound">build_compilenv_sound</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">C1</span> <span class="id">C2</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_alloc_variables">match_callstack_alloc_variables</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#build_compilenv_domain">build_compilenv_domain</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bind_parameters_agree">bind_parameters_agree</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Compatibility of evaluation functions with respect to memory injections. </h1>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="val_inject_val_of_bool">val_inject_val_of_bool</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.of_bool">Val.of_bool</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.of_bool">Val.of_bool</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4905')">Proof.</div>
<div class="proofscript" id="proof4905">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">b</span>; <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="val_inject_val_of_optbool">val_inject_val_of_optbool</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">ob</span>, <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.of_optbool">Val.of_optbool</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ob">ob</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.of_optbool">Val.of_optbool</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ob">ob</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4906')">Proof.</div>
<div class="proofscript" id="proof4906">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">ob</span>; <span class="tactic">simpl</span>. <span class="tactic">destruct</span> <span class="id">b</span>; <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">TrivialExists</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [ |- <span class="id">exists</span> <span class="id">y</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> ?<span class="id">x</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#y">y</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>; <span class="tactic">split</span>; [<span class="tactic">auto</span> | <span class="tactic">try</span>(<span class="id">econstructor</span>; <span class="tactic">eauto</span>)]<br/>
&nbsp;&nbsp;| [ |- <span class="id">exists</span> <span class="id">y</span>, <span class="id">_</span> /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> ?<span class="id">x</span>) <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">x</span>); <span class="tactic">split</span>; [<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">evalexpr</span> | <span class="id">constructor</span>]<br/>
&nbsp;&nbsp;| [ |- <span class="id">exists</span> <span class="id">y</span>, <span class="id">_</span> /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> ?<span class="id">x</span>) <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">x</span>); <span class="tactic">split</span>; [<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">evalexpr</span> | <span class="id">constructor</span>]<br/>
&nbsp;&nbsp;| [ |- <span class="id">exists</span> <span class="id">y</span>, <span class="id">_</span> /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">_</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> ?<span class="id">x</span>) <span class="id">_</span> ] =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">x</span>); <span class="tactic">split</span>; [<span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">evalexpr</span> | <span class="id">constructor</span>]<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id">idtac</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<div class="doc">Compatibility of <span class="bracket"><span class="id">eval_unop</span></span> with respect to <span class="bracket"><span class="id">Val.inject</span></span>. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_unop_compat">eval_unop_compat</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">op</span> <span class="id">v1</span> <span class="id">tv1</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#eval_unop">eval_unop</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#op">op</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v1">v1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v1">v1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv1">tv1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#eval_unop">eval_unop</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#op">op</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv1">tv1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4907')">Proof.</div>
<div class="proofscript" id="proof4907">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">op</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Floats.html#Float.to_int">Float.to_int</a></span> <span class="id">f0</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H1</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Floats.html#Float.to_intu">Float.to_intu</a></span> <span class="id">f0</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H1</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Floats.html#Float32.to_int">Float32.to_int</a></span> <span class="id">f0</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H1</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Floats.html#Float32.to_intu">Float32.to_intu</a></span> <span class="id">f0</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H1</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Floats.html#Float.to_long">Float.to_long</a></span> <span class="id">f0</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H1</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Floats.html#Float.to_longu">Float.to_longu</a></span> <span class="id">f0</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H1</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Floats.html#Float32.to_long">Float32.to_long</a></span> <span class="id">f0</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H1</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Floats.html#Float32.to_longu">Float32.to_longu</a></span> <span class="id">f0</span>); <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">inv</span> <span class="id">H1</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="id">TrivialExists</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">simpl</span>. <span class="id">TrivialExists</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Compatibility of <span class="bracket"><span class="id">eval_binop</span></span> with respect to <span class="bracket"><span class="id">Val.inject</span></span>. </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_binop_compat">eval_binop_compat</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">op</span> <span class="id">v1</span> <span class="id">tv1</span> <span class="id">v2</span> <span class="id">tv2</span> <span class="id">v</span> <span class="id">m</span> <span class="id">tm</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#eval_binop">eval_binop</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#op">op</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v1">v1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v2">v2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v1">v1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv1">tv1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v2">v2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv2">tv2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#eval_binop">eval_binop</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#op">op</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv1">tv1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv2">tv2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4908')">Proof.</div>
<div class="proofscript" id="proof4908">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">op</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
- <span class="id">TrivialExists</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.add_inject">Val.add_inject</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">TrivialExists</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.sub_inject">Val.sub_inject</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">TrivialExists</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.min_signed">Int.min_signed</a></span>) &amp;&amp; <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span>); <span class="id">inv</span> <span class="id">H4</span>; <span class="id">TrivialExists</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>); <span class="id">inv</span> <span class="id">H4</span>. <span class="id">TrivialExists</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.min_signed">Int.min_signed</a></span>) &amp;&amp; <span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span>); <span class="id">inv</span> <span class="id">H4</span>; <span class="id">TrivialExists</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq">Int.eq</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>); <span class="id">inv</span> <span class="id">H4</span>. <span class="id">TrivialExists</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int.iwordsize">Int.iwordsize</a></span>); <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int.iwordsize">Int.iwordsize</a></span>); <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int.iwordsize">Int.iwordsize</a></span>); <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.addl_inject">Val.addl_inject</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">TrivialExists</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.subl_inject">Val.subl_inject</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">TrivialExists</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.min_signed">Int64.min_signed</a></span>) &amp;&amp; <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.mone">Int64.mone</a></span>); <span class="id">inv</span> <span class="id">H4</span>; <span class="id">TrivialExists</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>); <span class="id">inv</span> <span class="id">H4</span>. <span class="id">TrivialExists</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|| <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.repr">Int64.repr</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int64.min_signed">Int64.min_signed</a></span>) &amp;&amp; <span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.mone">Int64.mone</a></span>); <span class="id">inv</span> <span class="id">H4</span>; <span class="id">TrivialExists</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int64.eq">Int64.eq</a></span> <span class="id">i0</span> <span class="id"><a href="compcert.lib.Integers.html#Int64.zero">Int64.zero</a></span>); <span class="id">inv</span> <span class="id">H4</span>. <span class="id">TrivialExists</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i0</span> <span class="id">Int64.iwordsize</span>'); <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i0</span> <span class="id">Int64.iwordsize</span>'); <span class="id">constructor</span>.<br/>
- <span class="id">TrivialExists</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">i0</span> <span class="id">Int64.iwordsize</span>'); <span class="id">constructor</span>.<br/>
- <span class="comment">(*&nbsp;cmp&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">TrivialExists</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#val_inject_val_of_optbool">val_inject_val_of_optbool</a></span>.<br/>
- <span class="comment">(*&nbsp;cmpu&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">TrivialExists</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.cmpu">Val.cmpu</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#Val.cmpu_bool">Val.cmpu_bool</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>) <span class="id">c</span> <span class="id">v1</span> <span class="id">v2</span>) <span class="kwd">as</span> [<span class="id">b</span>|] <span class="id">eqn</span>:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.common.Values.html#Val.cmpu_bool">Val.cmpu_bool</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">tm</span>) <span class="id">c</span> <span class="id">tv1</span> <span class="id">tv2</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#val_inject_val_of_optbool">val_inject_val_of_optbool</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.cmpu_bool_inject">Val.cmpu_bool_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_inject_val">Mem.valid_pointer_inject_val</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_inject_val">Mem.weak_valid_pointer_inject_val</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.different_pointers_inject">Mem.different_pointers_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;cmpf&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">TrivialExists</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#val_inject_val_of_optbool">val_inject_val_of_optbool</a></span>.<br/>
- <span class="comment">(*&nbsp;cmpfs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">TrivialExists</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#val_inject_val_of_optbool">val_inject_val_of_optbool</a></span>.<br/>
- <span class="comment">(*&nbsp;cmpl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.cmpl">Val.cmpl</a></span> <span class="kwd">in</span> *. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#val_inject_val_of_bool">val_inject_val_of_bool</a></span>.<br/>
- <span class="comment">(*&nbsp;cmplu&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.cmplu">Val.cmplu</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#Val.cmplu_bool">Val.cmplu_bool</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">m</span>) <span class="id">c</span> <span class="id">v1</span> <span class="id">v2</span>) <span class="kwd">as</span> [<span class="id">b</span>|] <span class="id">eqn</span>:<span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>; <span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.common.Values.html#Val.cmplu_bool">Val.cmplu_bool</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id">tm</span>) <span class="id">c</span> <span class="id">tv1</span> <span class="id">tv2</span>) <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#val_inject_val_of_bool">val_inject_val_of_bool</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Values.html#Val.cmplu_bool_inject">Val.cmplu_bool_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_inject_val">Mem.valid_pointer_inject_val</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_inject_val">Mem.weak_valid_pointer_inject_val</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.different_pointers_inject">Mem.different_pointers_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<h1> Correctness of Cminor construction functions </h1>
<br/>
<div class="doc">Correctness of the variable accessor <span class="bracket"><span class="id">var_addr</span></span> </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="var_addr_correct">var_addr_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">id</span> <span class="id">f</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">m</span> <span class="id">cs</span> <span class="id">tm</span> <span class="id">b</span> <span class="id">sm0</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Csharpminor.html#eval_var_addr">eval_var_addr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#eval_expr">eval_expr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#var_addr">var_addr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#id">id</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4909')">Proof.</div>
<div class="proofscript" id="proof4909">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#var_addr">var_addr</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_var">match_var</a></span> <span class="id">f</span> <span class="id">sp</span> <span class="id">e</span>!<span class="id">id</span> <span class="id">cenv</span>!<span class="id">id</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">MENV</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;local&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id">ofs</span>)); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero_l">Ptrofs.add_zero_l</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;global&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">bnd</span> [<span class="id">MG</span> <span class="id">_</span>]]. <span class="id">inv</span> <span class="id">MG</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">simpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span>. <br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#symbols_preserved">symbols_preserved</a></span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Semantic preservation for the translation </h1>
<br/>
<div class="doc">The proof of semantic preservation uses simulation diagrams of the
  following form:
<pre>
       e, m1, s ----------------- sp, te1, tm1, ts
          |                                |
         t|                                |t
          v                                v
       e, m2, out --------------- sp, te2, tm2, tout</pre>
  where <span class="bracket"><span class="id">ts</span></span> is the Cminor statement obtained by translating the
  C#minor statement <span class="bracket"><span class="id">s</span></span>.  The left vertical arrow is an execution
  of a C#minor statement.  The right vertical arrow is an execution
  of a Cminor statement.  The precondition (top vertical bar)
  includes a <span class="bracket"><span class="id">mem_inject</span></span> relation between the memory states <span class="bracket"><span class="id">m1</span></span> and <span class="bracket"><span class="id">tm1</span></span>,
  and a <span class="bracket"><span class="id">match_callstack</span></span> relation for any callstack having
  <span class="bracket"><span class="id">e</span></span>, <span class="bracket"><span class="id">te1</span></span>, <span class="bracket"><span class="id">sp</span></span> as top frame.  The postcondition (bottom vertical bar)
  is the existence of a memory injection <span class="bracket"><span class="id">f2</span></span> that extends the injection
  <span class="bracket"><span class="id">f1</span></span> we started with, preserves the <span class="bracket"><span class="id">match_callstack</span></span> relation for
  the transformed callstack at the final state, and validates a
  <span class="bracket"><span class="id">outcome_inject</span></span> relation between the outcomes <span class="bracket"><span class="id">out</span></span> and <span class="bracket"><span class="id">tout</span></span>.
</div>
<br/>
<h2> Semantic preservation for expressions </h2>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="bool_of_val_inject">bool_of_val_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">v</span> <span class="id">tv</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.bool_of_val">Val.bool_of_val</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#Val.bool_of_val">Val.bool_of_val</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4910')">Proof.</div>
<div class="proofscript" id="proof4910">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_constant_correct">transl_constant_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">cst</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Csharpminor.html#eval_constant">Csharpminor.eval_constant</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cst">cst</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#eval_constant">eval_constant</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_constant">transl_constant</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cst">cst</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4911')">Proof.</div>
<div class="proofscript" id="proof4911">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">cst</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">f0</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">f0</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">i</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_expr_correct">transl_expr_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">sm0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MATCH</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Csharpminor.html#eval_expr">Csharpminor.eval_expr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#a">a</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_expr">transl_expr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#a">a</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ta">ta</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#eval_expr">eval_expr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ta">ta</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4912')">Proof.</div>
<div class="proofscript" id="proof4912">
&nbsp;&nbsp;<span class="tactic">induction</span> 3; <span class="tactic">intros</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">TR</span>; <span class="tactic">try</span> (<span class="id">monadInv</span> <span class="id">TR</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Etempvar&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCH</span>. <span class="id">exploit</span> <span class="id">MTMP</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Eaddrof&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#var_addr_correct">var_addr_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Econst&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_constant_correct">transl_constant_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Eunop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_expr</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">EVAL1</span> <span class="id">INJ1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#eval_unop_compat">eval_unop_compat</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">EVAL</span> <span class="id">INJ</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Ebinop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_expr1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">EVAL1</span> <span class="id">INJ1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_expr2</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv2</span> [<span class="id">EVAL2</span> <span class="id">INJ2</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#eval_binop_compat">eval_binop_compat</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">EVAL</span> <span class="id">INJ</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Eload&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_expr</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">EVAL1</span> <span class="id">INJ1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_inject">Mem.loadv_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">LOAD</span> <span class="id">INJ</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>; <span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_exprlist_correct">transl_exprlist_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">m</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">tf</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">sm0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MATCH</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)),<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">a</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Csharpminor.html#eval_exprlist">Csharpminor.eval_exprlist</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#a">a</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ta</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_exprlist">transl_exprlist</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#a">a</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ta">ta</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#eval_exprlist">eval_exprlist</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ta">ta</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4913')">Proof.</div>
<div class="proofscript" id="proof4913">
&nbsp;&nbsp;<span class="tactic">induction</span> 3; <span class="tactic">intros</span>; <span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>); <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_expr_correct">transl_expr_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">EVAL1</span> <span class="id">VINJ1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHeval_exprlist</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv2</span> [<span class="id">EVAL2</span> <span class="id">VINJ2</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">tv1</span> :: <span class="id">tv2</span>); <span class="tactic">split</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Semantic preservation for statements and functions </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_cont">match_cont</a></span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#cont">Csharpminor.cont</a></span> -&gt; <span class="id"><a href="compcert.backend.Cminor.html#cont">Cminor.cont</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgen.html#compilenv">compilenv</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgen.html#exit_env">exit_env</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#callstack">callstack</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kstop">match_Kstop</a></span>: <span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">xenv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#Kstop">Csharpminor.Kstop</a></span> <span class="id"><a href="compcert.backend.Cminor.html#Kstop">Kstop</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kseq">match_Kseq</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">k</span> <span class="id">ts</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_stmt">transl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span>) (<span class="id"><a href="compcert.backend.Cminor.html#Kseq">Kseq</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kseq2">match_Kseq2</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">k</span> <span class="id">ts1</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_stmt">transl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s1">s1</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts1">ts1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s2">s2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Sseq">Csharpminor.Sseq</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s1">s1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s2">s2</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Cminor.html#Kseq">Kseq</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts1">ts1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kblock">match_Kblock</a></span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Kblock">Csharpminor.Kblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span>) (<span class="id"><a href="compcert.backend.Cminor.html#Kblock">Kblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kblock2">match_Kblock2</a></span>: <span class="kwd">forall</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#Kblock">Kblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_Kcall">match_Kcall</a></span>: <span class="kwd">forall</span> <span class="id">optid</span> <span class="id">fn</span> <span class="id">e</span> <span class="id">le</span> <span class="id">k</span> <span class="id">tfn</span> <span class="id">sp</span> <span class="id">te</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">sz</span> <span class="id">cenv</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_funbody">transl_funbody</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Kcall">Csharpminor.Kcall</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#optid">optid</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Cminor.html#Kcall">Kcall</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#optid">optid</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cenv</span>' <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_states">match_states</a></span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#state">Csharpminor.state</a></span> -&gt; <span class="id"><a href="compcert.backend.Cminor.html#state">Cminor.state</a></span> -&gt; <span class="id">SimMemInj.t</span>' -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_state">match_state</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fn</span> <span class="id">s</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">tfn</span> <span class="id">ts</span> <span class="id">tk</span> <span class="id">sp</span> <span class="id">te</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">f</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">sz</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> (<span class="id">MCOMPAT</span>: <span class="id"><a href="compcert.common.SimMemInj.html#mcompat">SimMemInj.mcompat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id">SimMemInj.wf</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TRF</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_funbody">transl_funbody</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_stmt">transl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MK</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#State">Csharpminor.State</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Cminor.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_state_seq">match_state_seq</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fn</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">tfn</span> <span class="id">ts1</span> <span class="id">tk</span> <span class="id">sp</span> <span class="id">te</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">f</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">sz</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> (<span class="id">MCOMPAT</span>: <span class="id"><a href="compcert.common.SimMemInj.html#mcompat">SimMemInj.mcompat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id">SimMemInj.wf</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TRF</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_funbody">transl_funbody</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_stmt">transl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s1">s1</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts1">ts1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MK</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s2">s2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#State">Csharpminor.State</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Sseq">Csharpminor.Sseq</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s1">s1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s2">s2</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Cminor.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts1">ts1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_callstate">match_callstate</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sg</span> <span class="id">fptr</span> <span class="id">args</span> <span class="id">k</span> <span class="id">m</span> <span class="id">tfptr</span> <span class="id">targs</span> <span class="id">tk</span> <span class="id">tm</span> <span class="id">f</span> <span class="id">cs</span> <span class="id">cenv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> (<span class="id">MCOMPAT</span>: <span class="id"><a href="compcert.common.SimMemInj.html#mcompat">SimMemInj.mcompat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id">SimMemInj.wf</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FPTR</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fptr">fptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfptr">tfptr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MK</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ISCC</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#is_call_cont">Csharpminor.is_call_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ARGSINJ</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#args">args</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#targs">targs</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Callstate">Csharpminor.Callstate</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fptr">fptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sg">sg</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#args">args</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Cminor.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfptr">tfptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sg">sg</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#targs">targs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_returnstate">match_returnstate</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">k</span> <span class="id">m</span> <span class="id">tv</span> <span class="id">tk</span> <span class="id">tm</span> <span class="id">f</span> <span class="id">cs</span> <span class="id">cenv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> (<span class="id">MCOMPAT</span>: <span class="id"><a href="compcert.common.SimMemInj.html#mcompat">SimMemInj.mcompat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id">SimMemInj.wf</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MK</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RESINJ</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Returnstate">Csharpminor.Returnstate</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.Cminor.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="val_inject_function_pointer">val_inject_function_pointer</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bound</span> <span class="id">v</span> <span class="id">fd</span> <span class="id">f</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fd">fd</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bound">bound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tv">tv</a></span> = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#v">v</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4914')">Proof.</div>
<div class="proofscript" id="proof4914">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_inv">Genv.find_funct_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">b</span> <span class="id">EQ</span>]. <span class="tactic">subst</span> <span class="id">v</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_find_funct_ptr">Genv.find_funct_find_funct_ptr</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">f</span> <span class="id">b</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>, 0)). <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id">DOMAIN</span>. <span class="tactic">eapply</span> <span class="id">FUNCTIONS</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H5</span>; <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_call_cont">match_call_cont</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#call_cont">Csharpminor.call_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span>) (<span class="id"><a href="compcert.backend.Cminor.html#call_cont">call_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4915')">Proof.</div>
<div class="proofscript" id="proof4915">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">auto</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_is_call_cont">match_is_call_cont</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">tfn</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">tm</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">cs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Csharpminor.html#is_call_cont">Csharpminor.is_call_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tk</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.backend.Cminor.html#step">step</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tse">tse</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span> <span class="id"><a href="compcert.backend.Cminor.html#Sskip">Sskip</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span> <span class="id"><a href="compcert.backend.Cminor.html#Sskip">Sskip</a></span> <span class="id">tk</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.backend.Cminor.html#is_call_cont">is_call_cont</a></span> <span class="id">tk</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id">tk</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4916')">Proof.</div>
<div class="proofscript" id="proof4916">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="tactic">split</span>. <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHmatch_cont</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tk</span>' [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">exists</span> <span class="id">tk</span>'; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>. <span class="id">traceEq</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="tactic">split</span>. <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#I">I</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Properties of <span class="bracket"><span class="id">switch</span></span> compilation </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="lbl_stmt_tail">lbl_stmt_tail</a></span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#lbl_stmt">lbl_stmt</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="compcert.cfrontend.Csharpminor.html#lbl_stmt">lbl_stmt</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="lstail_O">lstail_O</a></span>: <span class="kwd">forall</span> <span class="id">sl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="lstail_S">lstail_S</a></span>: <span class="kwd">forall</span> <span class="id">c</span> <span class="id">s</span> <span class="id">sl</span> <span class="id">n</span> <span class="id">sl</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#n">n</a></span> <span class="id">sl</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#LScons">LScons</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#c">c</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#n">n</a></span>) <span class="id">sl</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_table_default">switch_table_default</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sl</span> <span class="id">base</span>,<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#n">n</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#select_switch_default">select_switch_default</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_table">switch_table</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#base">base</a></span>) = (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#n">n</a></span> + <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#base">base</a></span>)%<span class="id">nat</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4917')">Proof.</div>
<div class="proofscript" id="proof4917">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">sl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>; <span class="tactic">split</span>. <span class="id">constructor</span>. <span class="tactic">omega</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">o</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id">IHsl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">base</span>)) <span class="kwd">as</span> (<span class="id">n</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_table">switch_table</a></span> <span class="id">sl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">base</span>)) <span class="kwd">as</span> [<span class="id">tbl</span> <span class="id">dfl</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>; <span class="tactic">split</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_table">switch_table</a></span> <span class="id">sl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">base</span>)) <span class="kwd">as</span> [<span class="id">tbl</span> <span class="id">dfl</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_table_case">switch_table_case</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">sl</span> <span class="id">base</span> <span class="id">dfl</span>,<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#select_switch_case">select_switch_case</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#i">i</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Switch.html#switch_target">switch_target</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#i">i</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#dfl">dfl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_table">switch_table</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#base">base</a></span>)) = <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#dfl">dfl</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">sl</span>' =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#n">n</a></span> <span class="id">sl</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Switch.html#switch_target">switch_target</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#i">i</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#dfl">dfl</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_table">switch_table</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#base">base</a></span>)) = (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#n">n</a></span> + <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#base">base</a></span>)%<span class="id">nat</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4918')">Proof.</div>
<div class="proofscript" id="proof4918">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">sl</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_table">switch_table</a></span> <span class="id">sl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">base</span>)) <span class="kwd">as</span> [<span class="id">tbl1</span> <span class="id">dfl1</span>] <span class="id">eqn</span>:<span class="id">ST</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">o</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#dec_eq_sym">dec_eq_sym</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">i</span> <span class="id">z</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHsl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">base</span>) <span class="id">dfl</span>). <span class="tactic">rewrite</span> <span class="id">ST</span> <span class="kwd">in</span> <span class="id">IHsl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#select_switch_case">select_switch_case</a></span> <span class="id">i</span> <span class="id">sl</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHsl</span> <span class="kwd">as</span> (<span class="id">x</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>); <span class="tactic">split</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">IHsl</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">base</span>) <span class="id">dfl</span>). <span class="tactic">rewrite</span> <span class="id">ST</span> <span class="kwd">in</span> <span class="id">IHsl</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#select_switch_case">select_switch_case</a></span> <span class="id">i</span> <span class="id">sl</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHsl</span> <span class="kwd">as</span> (<span class="id">x</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">x</span>); <span class="tactic">split</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_table_select">switch_table_select</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">sl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Switch.html#switch_target">switch_target</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#i">i</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_table">switch_table</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>)) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_table">switch_table</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Csharpminor.html#select_switch">select_switch</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#i">i</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sl">sl</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4919')">Proof.</div>
<div class="proofscript" id="proof4919">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#select_switch">select_switch</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#switch_table_case">switch_table_case</a></span> <span class="id">i</span> <span class="id">sl</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_table">switch_table</a></span> <span class="id">sl</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>))).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#select_switch_case">select_switch_case</a></span> <span class="id">i</span> <span class="id">sl</span>) <span class="kwd">as</span> [<span class="id">sl</span>'|].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">n</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="tactic">replace</span> (<span class="id">n</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>)%<span class="id">nat</span> <span class="kwd">with</span> <span class="id">n</span> <span class="kwd">in</span> <span class="id">Q</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">E</span>; <span class="tactic">rewrite</span> <span class="id">E</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#switch_table_default">switch_table_default</a></span> <span class="id">sl</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">as</span> (<span class="id">n</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">n</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>)%<span class="id">nat</span> <span class="kwd">with</span> <span class="id">n</span> <span class="kwd">in</span> <span class="id">Q</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="transl_lblstmt_cont">transl_lblstmt_cont</a></span>(<span class="id">cenv</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#compilenv">compilenv</a></span>) (<span class="id">xenv</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#exit_env">exit_env</a></span>): <span class="id"><a href="compcert.cfrontend.Csharpminor.html#lbl_stmt">lbl_stmt</a></span> -&gt; <span class="id"><a href="compcert.backend.Cminor.html#cont">cont</a></span> -&gt; <span class="id"><a href="compcert.backend.Cminor.html#cont">cont</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="tlsc_default">tlsc_default</a></span>: <span class="kwd">forall</span> <span class="id">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#LSnil">LSnil</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#Kblock">Kblock</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#Kseq">Kseq</a></span> <span class="id"><a href="compcert.backend.Cminor.html#Sskip">Sskip</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span>))<br/>
&nbsp;&nbsp;| <span class="id"><a name="tlsc_case">tlsc_case</a></span>: <span class="kwd">forall</span> <span class="id">i</span> <span class="id">s</span> <span class="id">ls</span> <span class="id">k</span> <span class="id">ts</span> <span class="id">k</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_stmt">transl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_env">switch_env</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#LScons">LScons</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#i">i</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id">k</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#LScons">LScons</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#i">i</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#Kblock">Kblock</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#Kseq">Kseq</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> <span class="id">k</span>')).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_descent">switch_descent</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">k</span> <span class="id">ls</span> <span class="id">body</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_lblstmt">transl_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_env">switch_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#body">body</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">k</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id">k</span>'<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">e</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.backend.Cminor.html#step">step</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tse">tse</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#body">body</a></span> <span class="id">k</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4920')">Proof.</div>
<div class="proofscript" id="proof4920">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_two">plus_two</a></span>. <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
- <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id">IHls</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">k</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star_trans">plus_star_trans</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_one">star_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_ascent">switch_ascent</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">e</span> <span class="id">m</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">ls</span> <span class="id">n</span> <span class="id">ls</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#n">n</a></span> <span class="id">ls</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">k</span> <span class="id">k1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k1">k1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">k2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.backend.Cminor.html#step">step</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tse">tse</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#Sexit">Sexit</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#n">n</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k1">k1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#Sexit">Sexit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k2">k2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id">ls</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k2">k2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4921')">Proof.</div>
<div class="proofscript" id="proof4921">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
- <span class="id">exists</span> <span class="id">k1</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id">IHlbl_stmt_tail</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">k2</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">k2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="id">constructor</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="id">constructor</span>. <span class="id">eexact</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_match_cont">switch_match_cont</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">k</span> <span class="id">cs</span> <span class="id">tk</span> <span class="id">ls</span> <span class="id">tk</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id">tk</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#seq_of_lbl_stmt">seq_of_lbl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span>) <span class="id">tk</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_env">switch_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4922')">Proof.</div>
<div class="proofscript" id="proof4922">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">intros</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_Kblock2">match_Kblock2</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_Kblock2">match_Kblock2</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_Kseq2">match_Kseq2</a></span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="switch_match_states">switch_match_states</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fn</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> <span class="id">tfn</span> <span class="id">ts</span> <span class="id">tk</span> <span class="id">sp</span> <span class="id">te</span> <span class="id">tm</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">f</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span> <span class="id">sz</span> <span class="id">ls</span> <span class="id">body</span> <span class="id">tk</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> (<span class="id">MCOMPAT</span>: <span class="id"><a href="compcert.common.SimMemInj.html#mcompat">SimMemInj.mcompat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id">SimMemInj.wf</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TRF</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_funbody">transl_funbody</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sz">sz</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TR</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_lblstmt">transl_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_env">switch_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#body">body</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MK</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TK</span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id">tk</span>'),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.backend.Cminor.html#step">step</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tse">tse</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#State">State</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span> (<span class="id"><a href="compcert.backend.Cminor.html#Sexit">Sexit</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="id">tk</span>' (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>) <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S">S</a></span><br/>
&nbsp;&nbsp;/\ <span class="id">exists</span> <span class="id">sm1</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#State">Csharpminor.State</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#fn">fn</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#seq_of_lbl_stmt">seq_of_lbl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S">S</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span> /\ &lt;&lt;<span class="id">MLE</span>: <span class="id">SimMemInj.le</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span>&gt;&gt;.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4923')">Proof.</div>
<div class="proofscript" id="proof4923">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">TK</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_two">plus_two</a></span>. <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl_exact</span> <span class="id">sm0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_state">match_state</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_one">star_one</a></span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl_exact</span> <span class="id">sm0</span>. <span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_state_seq">match_state_seq</a></span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#switch_match_cont">switch_match_cont</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_lblstmt_suffix">transl_lblstmt_suffix</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">ls</span> <span class="id">n</span> <span class="id">ls</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lbl_stmt_tail">lbl_stmt_tail</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#n">n</a></span> <span class="id">ls</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">body</span> <span class="id">ts</span>, <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_lblstmt">transl_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_env">switch_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#body">body</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">body</span>', <span class="id">exists</span> <span class="id">ts</span>', <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_lblstmt">transl_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_env">switch_env</a></span> <span class="id">ls</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span>) <span class="id">ls</span>' <span class="id">body</span>' = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">ts</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4924')">Proof.</div>
<div class="proofscript" id="proof4924">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
- <span class="id">exists</span> <span class="id">body</span>, <span class="id">ts</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">monadInv</span> <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Commutation between <span class="bracket"><span class="id">find_label</span></span> and compilation </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="TRANSLATION.CORELEMMA.FIND_LABEL">FIND_LABEL</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span>: <span class="id"><a href="compcert.backend.Cminor.html#label">label</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.CORELEMMA.FIND_LABEL.cenv">cenv</a></span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#compilenv">compilenv</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSLATION.CORELEMMA.FIND_LABEL.cs">cs</a></span>: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#callstack">callstack</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_lblstmt_find_label_context">transl_lblstmt_find_label_context</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">xenv</span> <span class="id">ls</span> <span class="id">body</span> <span class="id">ts</span> <span class="id">tk1</span> <span class="id">tk2</span> <span class="id">ts</span>' <span class="id">tk</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_lblstmt">transl_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_env">switch_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#body">body</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk1">tk1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk2">tk2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#body">body</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk2">tk2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">ts</span>', <span class="id">tk</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk1">tk1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">ts</span>', <span class="id">tk</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4925')">Proof.</div>
<div class="proofscript" id="proof4925">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ls</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
- <span class="id">monadInv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">eapply</span> <span class="id">IHls</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id">ts0</span> <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_find_label">transl_find_label</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">k</span> <span class="id">xenv</span> <span class="id">ts</span> <span class="id">tk</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_stmt">transl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#find_label">Csharpminor.find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.backend.Cminor.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">s</span>', <span class="id">k</span>') =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>', <span class="id">exists</span> <span class="id">tk</span>', <span class="id">exists</span> <span class="id">xenv</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">ts</span>', <span class="id">tk</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_stmt">transl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cenv">cenv</a></span> <span class="id">xenv</span>' <span class="id">s</span>' = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">ts</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id">k</span>' <span class="id">tk</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cenv">cenv</a></span> <span class="id">xenv</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cs">cs</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span><br/>
<br/>
<span class="kwd">with</span> <span class="id"><a name="transl_lblstmt_find_label">transl_lblstmt_find_label</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ls</span> <span class="id">xenv</span> <span class="id">body</span> <span class="id">k</span> <span class="id">ts</span> <span class="id">tk</span> <span class="id">tk1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_lblstmt">transl_lblstmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cenv">cenv</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_env">switch_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#body">body</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_lblstmt_cont">transl_lblstmt_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk1">tk1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#body">body</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk1">tk1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#find_label_ls">Csharpminor.find_label_ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ls">ls</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.backend.Cminor.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">s</span>', <span class="id">k</span>') =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>', <span class="id">exists</span> <span class="id">tk</span>', <span class="id">exists</span> <span class="id">xenv</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ts">ts</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">ts</span>', <span class="id">tk</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_stmt">transl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cenv">cenv</a></span> <span class="id">xenv</span>' <span class="id">s</span>' = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">ts</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id">k</span>' <span class="id">tk</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cenv">cenv</a></span> <span class="id">xenv</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.cs">cs</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4926')">Proof.</div>
<div class="proofscript" id="proof4926">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">s</span>; <span class="tactic">try</span> (<span class="id">monadInv</span> <span class="id">H</span>); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;seq&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">transl_find_label</span> <span class="id">s1</span>). <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_Kseq">match_Kseq</a></span>. <span class="id">eexact</span> <span class="id">EQ1</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#find_label">Csharpminor.find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id">s1</span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> <span class="id">s2</span> <span class="id">k</span>)) <span class="kwd">as</span> [[<span class="id">s</span>' <span class="id">k</span>'] | ].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ts</span>' [<span class="id">tk</span>' [<span class="id">xenv</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>'; <span class="id">exists</span> <span class="id">tk</span>'; <span class="id">exists</span> <span class="id">xenv</span>'. <span class="tactic">intuition</span>. <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">transl_find_label</span> <span class="kwd">with</span> <span class="id">xenv</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;ifthenelse&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">transl_find_label</span> <span class="id">s1</span>). <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#find_label">Csharpminor.find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id">s1</span> <span class="id">k</span>) <span class="kwd">as</span> [[<span class="id">s</span>' <span class="id">k</span>'] | ].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ts</span>' [<span class="id">tk</span>' [<span class="id">xenv</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>'; <span class="id">exists</span> <span class="id">tk</span>'; <span class="id">exists</span> <span class="id">xenv</span>'. <span class="tactic">intuition</span>. <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id">transl_find_label</span> <span class="kwd">with</span> <span class="id">xenv</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;loop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">transl_find_label</span> <span class="kwd">with</span> <span class="id">xenv</span>. <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">EQ</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;block&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">transl_find_label</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> :: <span class="id">xenv</span>). <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_table">switch_table</a></span> <span class="id">l</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">as</span> [<span class="id">tbl</span> <span class="id">dfl</span>]. <span class="id">monadInv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#switch_descent">switch_descent</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">k</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">transl_lblstmt_find_label</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">o</span>; <span class="id">monadInv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;label&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id">l</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">x</span>; <span class="id">exists</span> <span class="id">tk</span>; <span class="id">exists</span> <span class="id">xenv</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">transl_find_label</span> <span class="kwd">with</span> <span class="id">xenv</span>; <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">ls</span>; <span class="id">monadInv</span> <span class="id">H</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;nil&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;cons&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H7</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">transl_find_label</span> <span class="id">s</span>). <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#switch_match_cont">switch_match_cont</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#find_label">Csharpminor.find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL.lbl">lbl</a></span> <span class="id">s</span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#Kseq">Csharpminor.Kseq</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#seq_of_lbl_stmt">seq_of_lbl_stmt</a></span> <span class="id">ls</span>) <span class="id">k</span>)) <span class="kwd">as</span> [[<span class="id">s</span>' <span class="id">k</span>''] | ].<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ts</span>' [<span class="id">tk</span>' [<span class="id">xenv</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>'; <span class="id">exists</span> <span class="id">tk</span>'; <span class="id">exists</span> <span class="id">xenv</span>'; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_lblstmt_find_label_context">transl_lblstmt_find_label_context</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">replace</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id">ts0</span> <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span>. <span class="tactic">eapply</span> <span class="id">transl_lblstmt_find_label</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">replace</span> <span class="id">x</span> <span class="kwd">with</span> <span class="id">ts0</span> <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.FIND_LABEL">FIND_LABEL</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_find_label_body">transl_find_label_body</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cenv</span> <span class="id">xenv</span> <span class="id">size</span> <span class="id">f</span> <span class="id">tf</span> <span class="id">k</span> <span class="id">tk</span> <span class="id">cs</span> <span class="id">lbl</span> <span class="id">s</span>' <span class="id">k</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_funbody">transl_funbody</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#size">size</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#xenv">xenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Csharpminor.html#find_label">Csharpminor.find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>.(<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_body">Csharpminor.fn_body</a></span>) (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#call_cont">Csharpminor.call_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#k">k</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">s</span>', <span class="id">k</span>') -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ts</span>', <span class="id">exists</span> <span class="id">tk</span>', <span class="id">exists</span> <span class="id">xenv</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.Cminor.html#find_label">find_label</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lbl">lbl</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>.(<span class="id"><a href="compcert.backend.Cminor.html#fn_body">fn_body</a></span>) (<span class="id"><a href="compcert.backend.Cminor.html#call_cont">call_cont</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tk">tk</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">ts</span>', <span class="id">tk</span>')<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_stmt">transl_stmt</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id">xenv</span>' <span class="id">s</span>' = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id">ts</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_cont">match_cont</a></span> <span class="id">k</span>' <span class="id">tk</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id">xenv</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4927')">Proof.</div>
<div class="proofscript" id="proof4927">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">monadInv</span> <span class="id">H</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_find_label">transl_find_label</a></span>. <span class="id">eexact</span> <span class="id">EQ</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_call_cont">match_call_cont</a></span>. <span class="id">eexact</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">lbl</span>). <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The simulation diagram. </div>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="seq_left_depth">seq_left_depth</a></span> (<span class="id">s</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#stmt">Csharpminor.stmt</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s">s</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csharpminor.html#Sseq">Csharpminor.Sseq</a></span> <span class="id">s1</span> <span class="id">s2</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#seq_left_depth">seq_left_depth</a></span> <span class="id">s1</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="kwd">measure</span> (<span class="id">S</span>: <span class="id"><a href="compcert.cfrontend.Csharpminor.html#state">Csharpminor.state</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S">S</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.cfrontend.Csharpminor.html#State">Csharpminor.State</a></span> <span class="id">fn</span> <span class="id">s</span> <span class="id">k</span> <span class="id">e</span> <span class="id">le</span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#seq_left_depth">seq_left_depth</a></span> <span class="id">s</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="free_list_free_mapped">free_list_free_mapped</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> <span class="id">f</span> <span class="id">e</span> <span class="id">m</span> <span class="id">m</span>' <span class="id">tm</span> <span class="id">tm</span>' <span class="id">cenv</span> <span class="id">tfn</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> <span class="id">cs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCOMPAT</span>: <span class="id"><a href="compcert.common.SimMemInj.html#mcompat">SimMemInj.mcompat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span> : <span class="id">SimMemInj.wf</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FREESRC</span> : <span class="id"><a href="compcert.common.Memory.html#Mem.free_list">Mem.free_list</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">m</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FREETGT</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.free">Mem.free</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> 0 (<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">tm</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id">m</span>' <span class="id">tm</span>')<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MCS</span> : <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cenv">cenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tfn">tfn</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#e">e</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#le">le</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#te">te</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sp">sp</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#lo">lo</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#hi">hi</a></span> :: <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#cs">cs</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tm">tm</a></span>)):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">sm1</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">MCOMPAT</span>: <span class="id"><a href="compcert.common.SimMemInj.html#mcompat">SimMemInj.mcompat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span> <span class="id">m</span>' <span class="id">tm</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MWF</span>: <span class="id">SimMemInj.wf</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ (&lt;&lt;<span class="id">MLE</span>: <span class="id">SimMemInj.le</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span>&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4928')">Proof.</div>
<div class="proofscript" id="proof4928">
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">SimMemInj.spl_approx</span> <span class="id">sm0</span>. <span class="id">SimMemInj.compat_tac</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#src_private">SimMemInj.src_private</a></span>. <span class="id">ii</span>. <span class="id">ss</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>. <span class="tactic">red</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#nextblock_freelist">nextblock_freelist</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>. <span class="id">ii</span>. <span class="id">ss</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">PR</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_list">Mem.perm_free_list</a></span>; <span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">red</span>. <span class="tactic">red</span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#nextblock_freelist">nextblock_freelist</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_free">Mem.nextblock_free</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">MCS</span>. <span class="id">inv</span> <span class="id">MENV</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_list_unchanged_on">Mem.free_list_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#blocks_of_env">blocks_of_env</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="tactic">destruct</span> <span class="id">x</span>, <span class="id">p</span>; <span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_complete">PTree.elements_complete</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">eapply</span> <span class="id">EXT</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_unchanged_on">Mem.free_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCS</span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">NON_EXT_TGT</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_refl">SimMemInj.frozen_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_refl">SimMemInj.frozen_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_list">Mem.perm_free_list</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_free_3">Mem.perm_free_3</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_step_correct">transl_step_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S1</span> <span class="id">t</span> <span class="id">S2</span>, <span class="id"><a href="compcert.cfrontend.Csharpminor.html#step">Csharpminor.step</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S1">S1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#t">t</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S2">S2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T1</span> <span class="id">sm0</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S1">S1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#T1">T1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">T2</span>, <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.backend.Cminor.html#step">step</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tse">tse</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#T1">T1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#t">t</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#T2">T2</a></span> /\ (<span class="id">exists</span> <span class="id">sm1</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S2">S2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#T2">T2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span> /\ &lt;&lt;<span class="id">MLE</span>: <span class="id">SimMemInj.le</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span>&gt;&gt;))<br/>
&nbsp;&nbsp;\/ (<span class="kwd">measure</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S2">S2</a></span> &lt; <span class="kwd">measure</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S1">S1</a></span> /\ <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#t">t</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> /\ (<span class="id">exists</span> <span class="id">sm1</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S2">S2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#T1">T1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span> /\ &lt;&lt;<span class="id">MLE</span>: <span class="id">SimMemInj.le</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span>&gt;&gt;))%<span class="id">nat</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4929')">Proof.</div>
<div class="proofscript" id="proof4929">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span> <span class="id">T1</span> <span class="id">sm0</span> <span class="id">MSTATE</span>; <span class="id">inv</span> <span class="id">MSTATE</span>.<br/>
<br/>
<span class="comment">(*&nbsp;skip&nbsp;seq&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="tactic">dependent</span> <span class="tactic">induction</span> <span class="id">MK</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_state_seq">match_state_seq</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHMK</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">T2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">T2</span>; <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;skip&nbsp;block&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="tactic">dependent</span> <span class="tactic">induction</span> <span class="id">MK</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHMK</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">T2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">T2</span>; <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;skip&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_is_call_cont">match_is_call_cont</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tk</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_freelist">match_callstack_freelist</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tm</span>' [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_right">plus_right</a></span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Cminor.html#step_skip_call">step_skip_call</a></span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#free_list_free_mapped">free_list_free_mapped</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">SimMemInj.spl_exact</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_le">match_callstack_le</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;set&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_expr_correct">transl_expr_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">EVAL</span> <span class="id">VINJ</span>]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_set_temp">match_callstack_set_temp</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;store&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_expr_correct">transl_expr_correct</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tv1</span> [<span class="id">EVAL1</span> <span class="id">VINJ1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_expr_correct">transl_expr_correct</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tv2</span> [<span class="id">EVAL2</span> <span class="id">VINJ2</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev_mapped_inject">Mem.storev_mapped_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tm</span>' [<span class="id">STORE</span>' <span class="id">MINJ</span>']].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#storev_mapped">SimMemInj.storev_mapped</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">SimMemInj.spl_exact</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">SimMemInj.compat_tac</span>. }<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">VINJ1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="kwd">in</span> <span class="id">STORE</span>'.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">Mem.nextblock_store</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">Mem.nextblock_store</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">STORE</span>').<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_le">match_callstack_le</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_invariant">match_callstack_invariant</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">Mem.perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_1">Mem.perm_store_1</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_expr_correct">transl_expr_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tvf</span> [<span class="id">EVAL1</span> <span class="id">VINJ1</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_exprlist_correct">transl_exprlist_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tvargs</span> [<span class="id">EVAL2</span> <span class="id">VINJ2</span>]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Cminor.html#step_call">step_call</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_Kcall">match_Kcall</a></span> <span class="kwd">with</span> (<span class="id">cenv</span>' := <span class="id">cenv</span>); <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;builtin&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_exprlist_correct">transl_exprlist_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">tvargs</span> [<span class="id">EVAL2</span> <span class="id">VINJ2</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">hi</span>' <span class="id">MG</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_inject_gen">external_call_mem_inject_gen</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_symbols_inject">match_callstack_symbols_inject</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f</span>' [<span class="id">vres</span>' [<span class="id">tm</span>' [<span class="id">EC</span> [<span class="id">VINJ</span> [<span class="id">MINJ</span>' [<span class="id">UNMAPPED</span> [<span class="id">OUTOFREACH</span> [<span class="id">INCR</span> <span class="id">SEPARATED</span>]]]]]]]]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">MCS</span>': <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack">match_callstack</a></span> <span class="id">f</span>' <span class="id">m</span>' <span class="id">tm</span>' <span class="id">sm0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#Frame">Frame</a></span> <span class="id">cenv</span> <span class="id">tfn</span> <span class="id">e</span> <span class="id">le</span> <span class="id">te</span> <span class="id">sp</span> <span class="id">lo</span> <span class="id">hi</span> :: <span class="id">cs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>') (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>')).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_incr_bound">match_callstack_incr_bound</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_external_call">match_callstack_external_call</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_max_perm">external_call_max_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">xomega</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#external_call">SimMemInj.external_call</a></span>; <span class="tactic">try</span> <span class="tactic">by</span> (<span class="id">inv</span> <span class="id">MCOMPAT</span>; <span class="tactic">eauto</span>). <span class="id">i</span>; <span class="id">des</span>. <span class="id">SimMemInj.spl_exact</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">SimMemInj.compat_tac</span>. }<br/>
<span class="id">Opaque</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Cminor.html#set_optvar">set_optvar</a></span>. <span class="tactic">destruct</span> <span class="id">optid</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_set_temp">match_callstack_set_temp</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_le">match_callstack_le</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_le">match_callstack_le</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;seq&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<span class="comment">(*&nbsp;seq&nbsp;2&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;ifthenelse&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_expr_correct">transl_expr_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">EVAL</span> <span class="id">VINJ</span>]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">exists</span> (<span class="id"><a href="compcert.backend.Cminor.html#State">State</a></span> <span class="id">tfn</span> (<span class="kwd">if</span> <span class="id">b</span> <span class="kwd">then</span> <span class="id">x0</span> <span class="kwd">else</span> <span class="id">x1</span>) <span class="id">tk</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">te</span> <span class="id">tm</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Cminor.html#step_ifthenelse">step_ifthenelse</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#bool_of_val_inject">bool_of_val_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">b</span>; <span class="tactic">auto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;loop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id">EQ</span>; <span class="tactic">auto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;block&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;exit&nbsp;seq&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="tactic">dependent</span> <span class="tactic">induction</span> <span class="id">MK</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHMK</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">T2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">T2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHMK</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">T2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">T2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
<br/>
<span class="comment">(*&nbsp;exit&nbsp;block&nbsp;0&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="tactic">dependent</span> <span class="tactic">induction</span> <span class="id">MK</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHMK</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">T2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">T2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
<br/>
<span class="comment">(*&nbsp;exit&nbsp;block&nbsp;n+1&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="tactic">dependent</span> <span class="tactic">induction</span> <span class="id">MK</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHMK</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">T2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">T2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>. <span class="id">constructor</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
<br/>
<span class="comment">(*&nbsp;switch&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">TR</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#switch_table">switch_table</a></span> <span class="id">cases</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="kwd">as</span> [<span class="id">tbl</span> <span class="id">dfl</span>] <span class="id">eqn</span>:<span class="id">STBL</span>. <span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_expr_correct">transl_expr_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">EVAL</span> <span class="id">VINJ</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">SA</span>: <span class="id"><a href="compcert.common.Switch.html#switch_argument">switch_argument</a></span> <span class="id">islong</span> <span class="id">tv</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">H0</span>; <span class="id">inv</span> <span class="id">VINJ</span>; <span class="id">constructor</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#switch_descent">switch_descent</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">k1</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#switch_ascent">switch_ascent</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#switch_table_select">switch_table_select</a></span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">STBL</span>; <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">k2</span> [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_lblstmt_suffix">transl_lblstmt_suffix</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> (<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#switch_table_select">switch_table_select</a></span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">body</span>' [<span class="id">ts</span>' <span class="id">E</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#switch_match_states">switch_match_states</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">T2</span> [<span class="id">F</span> <span class="id">G</span>]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">exists</span> <span class="id">T2</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star_trans">plus_star_trans</a></span>. <span class="tactic">eapply</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>. <span class="id">eexact</span> <span class="id">C</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>. <span class="id">eexact</span> <span class="id">F</span>.<br/>
&nbsp;&nbsp;<span class="tactic">reflexivity</span>. <span class="tactic">reflexivity</span>. <span class="id">traceEq</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;return&nbsp;none&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_freelist">match_callstack_freelist</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tm</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Cminor.html#step_return_0">step_return_0</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#free_list_free_mapped">free_list_free_mapped</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">SimMemInj.spl_exact</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_le">match_callstack_le</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_call_cont">match_call_cont</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;return&nbsp;some&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>. <span class="id">left</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_expr_correct">transl_expr_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tv</span> [<span class="id">EVAL</span> <span class="id">VINJ</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_freelist">match_callstack_freelist</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tm</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]].<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.Cminor.html#step_return_1">step_return_1</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#free_list_free_mapped">free_list_free_mapped</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">SimMemInj.spl_exact</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_le">match_callstack_le</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_call_cont">match_call_cont</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;label&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;goto&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_find_label_body">transl_find_label_body</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">ts</span>' [<span class="id">tk</span>' [<span class="id">xenv</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.Cminor.html#step_goto">step_goto</a></span>. <span class="id">eexact</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;internal&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fptr</span> = <span class="id">tfptr</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">symmetry</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#val_inject_function_pointer">val_inject_function_pointer</a></span>; <span class="tactic">eauto</span>. } <span class="tactic">subst</span> <span class="id">tfptr</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">TMP</span>: <span class="id">exists</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">TR</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_fundef">transl_fundef</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id">f</span>) = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FPTR</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> <span class="id">fptr</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>&gt;&gt;).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#functions_translated">functions_translated</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. } <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>. <span class="tactic">generalize</span> <span class="id">EQ</span>; <span class="tactic">clear</span> <span class="id">EQ</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_function">transl_function</a></span>.<br/>
&nbsp;&nbsp;<span class="id">caseEq</span> (<span class="id"><a href="compcert.cfrontend.Cminorgen.html#build_compilenv">build_compilenv</a></span> <span class="id">f</span>). <span class="tactic">intros</span> <span class="id">ce</span> <span class="id">sz</span> <span class="id">BC</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zle">zle</a></span> <span class="id">sz</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">TRBODY</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id">TRBODY</span>; <span class="tactic">intro</span> <span class="id">TMP</span>. <span class="id">monadInv</span> <span class="id">TMP</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">tf</span> := <span class="id"><a href="compcert.backend.Cminor.html#mkfunction">mkfunction</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_sig">Csharpminor.fn_sig</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_params">Csharpminor.fn_params</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.cfrontend.Csharpminor.html#fn_temps">Csharpminor.fn_temps</a></span> <span class="id">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sz</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">x0</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">caseEq</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.alloc">Mem.alloc</a></span> <span class="id">tm</span> 0 (<span class="id"><a href="compcert.backend.Cminor.html#fn_stackspace">fn_stackspace</a></span> <span class="id">tf</span>)). <span class="tactic">intros</span> <span class="id">tm</span>' <span class="id">sp</span> <span class="id">ALLOC</span>'.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_function_entry">match_callstack_function_entry</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="tactic">eapply</span> <span class="id">SRCEXT</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="id">des</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="tactic">eapply</span> <span class="id">TGTEXT</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="id">des</span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f2</span> [<span class="id">MCS2</span> [<span class="id">MINJ2</span> [<span class="id">MINCR</span> <span class="id">MSEPARATED</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">sm1</span>, <span class="id"><a href="compcert.common.SimMemInj.html#mcompat">SimMemInj.mcompat</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span> <span class="id">m1</span> <span class="id">tm</span>' <span class="id">f2</span> /\ <span class="id">SimMemInj.wf</span>' <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span> /\ <span class="id">SimMemInj.le</span>' <span class="id">sm0</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm1">sm1</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="id">inv</span> <span class="id">MWF</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">SimMemInj.spl_approx</span> <span class="id">sm0</span>. <span class="id">SimMemInj.compat_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#src_private">SimMemInj.src_private</a></span>. <span class="id">ii</span>. <span class="id">ss</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#loc_unmapped_frozen">SimMemInj.loc_unmapped_frozen</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#inject_separated_frozen">SimMemInj.inject_separated_frozen</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">SimMemInj.valid_blocks</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#alloc_variables_nextblock">alloc_variables_nextblock</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>. <span class="id">ii</span>. <span class="id">ss</span>. <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#loc_out_of_reach_frozen">SimMemInj.loc_out_of_reach_frozen</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#inject_separated_frozen">SimMemInj.inject_separated_frozen</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#alloc_variables_perm">alloc_variables_perm</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.SimMemInj.html#valid_blocks">SimMemInj.valid_blocks</a></span>, <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span> <span class="kwd">in</span> <span class="id">ALLOC</span>'. <span class="tactic">rewrite</span> <span class="id">ALLOC</span>'. <span class="id">xomega</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#alloc_variables_nextblock">alloc_variables_nextblock</a></span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_alloc">Mem.nextblock_alloc</a></span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#alloc_variables_unchanged_on">alloc_variables_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_unchanged_on">Mem.alloc_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_shortened">SimMemInj.frozen_shortened</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">SRCLEGE</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">TGTLEGE</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_shortened">SimMemInj.frozen_shortened</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#inject_separated_frozen">SimMemInj.inject_separated_frozen</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_shortened">SimMemInj.frozen_shortened</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#inject_separated_frozen">SimMemInj.inject_separated_frozen</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Csharpminor.html#alloc_variables_perm">alloc_variables_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_alloc_4">Mem.perm_alloc_4</a></span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">subst</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">VALID</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl_exact</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_le">match_callstack_le</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MK</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">ISCC</span>; <span class="id">contradiction</span> || <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;external&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">fptr</span> = <span class="id">tfptr</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">symmetry</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_match_globalenvs">match_callstack_match_globalenvs</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#val_inject_function_pointer">val_inject_function_pointer</a></span>; <span class="tactic">eauto</span>. } <span class="tactic">subst</span> <span class="id">tfptr</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">TMP</span>: <span class="id">exists</span> <span class="id">tf</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">TR</span>: <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_fundef">transl_fundef</a></span> (<span class="id"><a href="compcert.common.AST.html#External">External</a></span> <span class="id">ef</span>) = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>&gt;&gt; /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">FPTR</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct">Genv.find_funct</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA.tge">tge</a></span> <span class="id">fptr</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>&gt;&gt;).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#functions_translated">functions_translated</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">ss</span>. } <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">monadInv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_inject_gen">external_call_mem_inject_gen</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_symbols_inject">match_callstack_symbols_inject</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">f</span>' [<span class="id">vres</span>' [<span class="id">tm</span>' [<span class="id">EC</span> [<span class="id">VINJ</span> [<span class="id">MINJ</span>' [<span class="id">UNMAPPED</span> [<span class="id">OUTOFREACH</span> [<span class="id">INCR</span> <span class="id">SEPARATED</span>]]]]]]]]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#external_call">SimMemInj.external_call</a></span>; <span class="tactic">try</span> <span class="tactic">by</span> (<span class="id">inv</span> <span class="id">MCOMPAT</span>; <span class="tactic">eauto</span>). <span class="id">i</span>; <span class="id">des</span>. <span class="id">SimMemInj.spl_exact</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">SimMemInj.compat_tac</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_incr_bound">match_callstack_incr_bound</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_external_call">match_callstack_external_call</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_max_perm">external_call_max_perm</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_le">match_callstack_le</a></span>; <span class="tactic">eauto</span>. <span class="id">xomega</span>. <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
<span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MK</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInj.spl</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.Cminor.html#set_optvar">set_optvar</a></span>. <span class="tactic">destruct</span> <span class="id">optid</span>; <span class="tactic">simpl</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstack_set_temp">match_callstack_set_temp</a></span>; <span class="tactic">eauto</span>.<br/>
<span class="id">Unshelve</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">by</span> (<span class="tactic">try</span> <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#inject_separated_frozen">SimMemInj.inject_separated_frozen</a></span>; <span class="tactic">eauto</span>).<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.CORELEMMA">CORELEMMA</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="TRANSLATION.WHOLE">WHOLE</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="TRANSLATION.WHOLE.ge">ge</a></span> : <span class="id"><a href="compcert.cfrontend.Csharpminor.html#genv">Csharpminor.genv</a></span> := <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.prog">prog</a></span>.<br/>
<span class="kwd">Let</span> <span class="id"><a name="TRANSLATION.WHOLE.tge">tge</a></span>: <span class="id"><a href="compcert.backend.Cminor.html#genv">genv</a></span> := <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.tprog">tprog</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="TRANSLATION.WHOLE.MATCH_GENV">MATCH_GENV</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.match_genvs">Genv.match_genvs</a></span> (<span class="id"><a href="compcert.common.Linking.html#match_globdef">match_globdef</a></span> (<span class="kwd">fun</span> <span class="id">cu</span> <span class="id">f</span> <span class="id">tf</span> =&gt; <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_fundef">transl_fundef</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#f">f</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#tf">tf</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq">eq</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.prog">prog</a></span>) <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4930')">Proof.</div>
<div class="proofscript" id="proof4930">
 <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenvs_match">Genv.globalenvs_match</a></span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_globalenvs_init">match_globalenvs_init</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.prog">prog</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_globalenvs">match_globalenvs</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.ge">ge</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>)) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#m">m</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4931')">Proof.</div>
<div class="proofscript" id="proof4931">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#pred_dec_true">pred_dec_true</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#plt">plt</a></span> <span class="id">b1</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>)); <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_not_fresh">Genv.find_symbol_not_fresh</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_not_fresh">Genv.find_funct_ptr_not_fresh</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info_not_fresh">Genv.find_var_info_not_fresh</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_initial_states">transl_initial_states</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S</span>, <span class="id"><a href="compcert.cfrontend.Csharpminor.html#initial_state">Csharpminor.initial_state</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.prog">prog</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S">S</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">R</span>, <span class="id"><a href="compcert.backend.Cminor.html#initial_state">Cminor.initial_state</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.tprog">tprog</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#R">R</a></span> /\ <span class="id">exists</span> <span class="id">sm</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S">S</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#R">R</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm">sm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4932')">Proof.</div>
<div class="proofscript" id="proof4932">
&nbsp;&nbsp;<span class="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_transf_partial">Genv.init_mem_transf_partial</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.TRANSL">TRANSL</a></span>). <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="id">fold</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.tge">tge</a></span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#symbols_preserved">symbols_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.tprog">tprog</a></span>) <span class="kwd">with</span> (<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.prog">prog</a></span>). <span class="id">eexact</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">symmetry</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgen.html#transl_program">transl_program</a></span> <span class="kwd">in</span> <span class="id">TRANSL</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Linking.html#match_program_main">match_program_main</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.SimMemInj.html#mk">SimMemInj.mk</a></span> <span class="id">m0</span> <span class="id">m0</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>)) <span class="id">bot2</span> <span class="id">bot2</span> 1%<span class="id">positive</span> 1%<span class="id">positive</span> 1%<span class="id">positive</span> 1%<span class="id">positive</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_callstate">match_callstate</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>)) (<span class="id">cs</span> := @<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#frame">frame</a></span>) (<span class="id">cenv</span> := <span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>).<br/>
&nbsp;&nbsp;{ <span class="id">SimMemInj.compat_tac</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="id">xomega</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.initmem_inject">Genv.initmem_inject</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.initmem_inject">Genv.initmem_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_not_fresh">Genv.find_symbol_not_fresh</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econs</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.flat_inj">Mem.flat_inj</a></span>. <span class="id">des_ifs</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#mcs_nil">mcs_nil</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>); <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;{ <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Events.html#init_symbols_inject">init_symbols_inject</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.MATCH_GENV">MATCH_GENV</a></span>); <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#ge">ge</a></span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_globalenvs_init">match_globalenvs_init</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transl_final_states">transl_final_states</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S</span> <span class="id">R</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">sm</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S">S</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#R">R</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm">sm</a></span>) -&gt; <span class="id"><a href="compcert.cfrontend.Csharpminor.html#final_state">Csharpminor.final_state</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#S">S</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#r">r</a></span> -&gt; <span class="id"><a href="compcert.backend.Cminor.html#final_state">Cminor.final_state</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#R">R</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#r">r</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4933')">Proof.</div>
<div class="proofscript" id="proof4933">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">des</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">MK</span>. <span class="id">inv</span> <span class="id">RESINJ</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="transl_program_correct">transl_program_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> (<span class="id"><a href="compcert.cfrontend.Csharpminor.html#semantics">Csharpminor.semantics</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.prog">prog</a></span>) (<span class="id"><a href="compcert.backend.Cminor.html#semantics">Cminor.semantics</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.tprog">tprog</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof4934')">Proof.</div>
<div class="proofscript" id="proof4934">
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation_star">forward_simulation_star</a></span> <span class="kwd">with</span> (<span class="id">match_states</span> := <span class="kwd">fun</span> <span class="id">s1</span> <span class="id">s2</span> =&gt; <span class="id">exists</span> <span class="id">sm</span>, <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s1">s1</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#s2">s2</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#sm">sm</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#senv_preserved">senv_preserved</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_initial_states">transl_initial_states</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_final_states">transl_final_states</a></span>.<br/>
&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">des</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#transl_step_correct">transl_step_correct</a></span>; <span class="tactic">eauto</span>. { <span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.senv_match">Genv.senv_match</a></span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.TRANSL">TRANSL</a></span>). } <span class="id">i</span>; <span class="id">des</span>; <span class="tactic">eauto</span>. }<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION.WHOLE">WHOLE</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.cfrontend.Cminorgenproof.html#TRANSLATION">TRANSLATION</a></span>.<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
