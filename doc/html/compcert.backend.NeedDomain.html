
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module NeedDomain</title>
<meta name="description" content="Documentation of Coq module NeedDomain" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module NeedDomain</h1>
<div class="coq">
<br/>
<div class="doc">Abstract domain for neededness analysis </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.IntvSets.html">IntvSets</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Floats.html">Floats</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Values.html">Values</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Events.html">Events</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Lattice.html">Lattice</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.backend.Registers.html">Registers</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.backend.ValueDomain.html">ValueDomain</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.backend.RTL.html">RTL</a></span>.<br/>
<br/>
<h1> Neededness for values </h1>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="nval">nval</a></span> : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="Nothing">Nothing</a></span>              <span class="docright">(* value is entirely unused  *)</span><br/>
&nbsp;&nbsp;| <span class="id"><a name="I">I</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>)           <span class="docright">(* only need the bits that are 1 in <span class="bracket"><span class="id">m</span></span>  *)</span><br/>
&nbsp;&nbsp;| <span class="id"><a name="All">All</a></span>.                 <span class="docright">(* every bit of the value is used  *)</span><br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="eq_nval">eq_nval</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) : {<span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>=<span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>} + {<span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>&lt;&gt;<span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>}.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3341')">Proof.</div>
<div class="proofscript" id="proof3341">
&nbsp;&nbsp;<span class="id">decide</span> <span class="id">equality</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span>.<br/>
Defined.</div>
<br/>
<h2> Agreement between two values relative to a need. </h2>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="iagree">iagree</a></span> (<span class="id">p</span> <span class="id">q</span> <span class="id">mask</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span>, 0 &lt;= <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> &lt; <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask">mask</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> = <span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q">q</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span>.<br/>
<br/>
<span class="kwd">Fixpoint</span> <span class="id"><a name="vagree">vagree</a></span> (<span class="id">v</span> <span class="id">w</span>: <span class="id"><a href="compcert.common.Values.html#val">val</a></span>) (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) {<span class="kwd">struct</span> <span class="id">x</span>}: <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">q</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id">p</span> <span class="id">q</span> <span class="id">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">p</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> =&gt; <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="vagree_same">vagree_same</a></span>: <span class="kwd">forall</span> <span class="id">v</span> <span class="id">x</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3342')">Proof.</div>
<div class="proofscript" id="proof3342">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>; <span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="vagree_lessdef">vagree_lessdef</a></span>: <span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span>, <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3343')">Proof.</div>
<div class="proofscript" id="proof3343">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_same">vagree_same</a></span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lessdef_vagree">lessdef_vagree</a></span>: <span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3344')">Proof.</div>
<div class="proofscript" id="proof3344">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">vagree_same</span> <span class="id">vagree_lessdef</span> <span class="id">lessdef_vagree</span>: <span class="id">na</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="vagree_list">vagree_list</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="vagree_list_nil">vagree_list_nil</a></span>: <span class="kwd">forall</span> <span class="id">nvl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nvl">nvl</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="vagree_list_default">vagree_list_default</a></span>: <span class="kwd">forall</span> <span class="id">v1</span> <span class="id">vl1</span> <span class="id">v2</span> <span class="id">vl2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2">vl2</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> :: <span class="id"><a href="compcert.backend.NeedDomain.html#vl1">vl1</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> :: <span class="id"><a href="compcert.backend.NeedDomain.html#vl2">vl2</a></span>) <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="vagree_list_cons">vagree_list_cons</a></span>: <span class="kwd">forall</span> <span class="id">v1</span> <span class="id">vl1</span> <span class="id">v2</span> <span class="id">vl2</span> <span class="id">nv1</span> <span class="id">nvl</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv1">nv1</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2">vl2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nvl">nvl</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> :: <span class="id"><a href="compcert.backend.NeedDomain.html#vl1">vl1</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> :: <span class="id"><a href="compcert.backend.NeedDomain.html#vl2">vl2</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#nv1">nv1</a></span> :: <span class="id"><a href="compcert.backend.NeedDomain.html#nvl">nvl</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="lessdef_vagree_list">lessdef_vagree_list</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl1</span> <span class="id">vl2</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2">vl2</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2">vl2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3345')">Proof.</div>
<div class="proofscript" id="proof3345">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">vl1</span>; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">H</span>; <span class="id">constructor</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="vagree_lessdef_list">vagree_lessdef_list</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">vl1</span> <span class="id">vl2</span>, <span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2">vl2</a></span> -&gt; <span class="kwd">forall</span> <span class="id">nvl</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2">vl2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nvl">nvl</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3346')">Proof.</div>
<div class="proofscript" id="proof3346">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">nvl</span>; <span class="id">constructor</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">lessdef_vagree_list</span> <span class="id">vagree_lessdef_list</span>: <span class="id">na</span>.<br/>
<br/>
<h2> Ordering and least upper bound between value needs </h2>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="nge">nge</a></span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="nge_nothing">nge_nothing</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="nge_all">nge_all</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="nge_int">nge_int</a></span>: <span class="kwd">forall</span> <span class="id">m1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">i</span>, 0 &lt;= <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> &lt; <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m2">m2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m1">m1</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m2">m2</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nge_refl">nge_refl</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3347')">Proof.</div>
<div class="proofscript" id="proof3347">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="id">Constructors</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span>: <span class="id">na</span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">nge_refl</span>: <span class="id">na</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nge_trans">nge_trans</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> -&gt; <span class="kwd">forall</span> <span class="id">z</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z">z</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z">z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3348')">Proof.</div>
<div class="proofscript" id="proof3348">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span> <span class="id">w</span> <span class="id">VG</span>; <span class="id">inv</span> <span class="id">VG</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nge_agree">nge_agree</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3349')">Proof.</div>
<div class="proofscript" id="proof3349">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">v</span>, <span class="id">w</span>; <span class="tactic">intuition</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="nlub">nlub</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) : <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span>, <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m1</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m2</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> <span class="id">m1</span> <span class="id">m2</span>)<br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nge_lub_l">nge_lub_l</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nlub">nlub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3350')">Proof.</div>
<div class="proofscript" id="proof3350">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlub">nlub</a></span>; <span class="tactic">destruct</span> <span class="id">x</span>, <span class="id">y</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nge_lub_r">nge_lub_r</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nlub">nlub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3351')">Proof.</div>
<div class="proofscript" id="proof3351">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlub">nlub</a></span>; <span class="tactic">destruct</span> <span class="id">x</span>, <span class="id">y</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">intros</span>. <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_r">orb_true_r</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Properties of agreement between integers </h2>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_refl">iagree_refl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">m</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3352')">Proof.</div>
<div class="proofscript" id="proof3352">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="eq_same_bits">eq_same_bits</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> = <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> = <span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3353')">Proof.</div>
<div class="proofscript" id="proof3353">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_and_eq">iagree_and_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">mask</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask">mask</a></span> &lt;-&gt; <span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask">mask</a></span> = <span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask">mask</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3354')">Proof.</div>
<div class="proofscript" id="proof3354">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">split</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">Int.bit_solve</span>. <span class="id">specialize</span> (<span class="id">H</span> <span class="id">i</span> <span class="id">H0</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id">mask</span> <span class="id">i</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_r">andb_true_r</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_r">andb_false_r</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#eq_same_bits">eq_same_bits</a></span> <span class="id">i</span>); <span class="tactic">eauto</span>; <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_r">andb_true_r</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_mone">iagree_mone</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">q</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q">q</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> = <span class="id"><a href="compcert.backend.NeedDomain.html#q">q</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3355')">Proof.</div>
<div class="proofscript" id="proof3355">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and_eq">iagree_and_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Integers.html#Int.and_mone">Int.and_mone</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_zero">iagree_zero</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">q</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q">q</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3356')">Proof.</div>
<div class="proofscript" id="proof3356">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and_eq">iagree_and_eq</a></span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Integers.html#Int.and_zero">Int.and_zero</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_and">iagree_and</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">n</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3357')">Proof.</div>
<div class="proofscript" id="proof3357">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and_eq">iagree_and_eq</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Integers.html#Int.and_assoc">Int.and_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and_commut">Int.and_commut</a></span> <span class="id">n</span>). <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_not">iagree_not</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">m</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3358')">Proof.</div>
<div class="proofscript" id="proof3358">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">auto</span>. <span class="tactic">f_equal</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">iagree_not</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">m</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3359')">Proof.</div>
<div class="proofscript" id="proof3359">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Int.not_involutive">Int.not_involutive</a></span> <span class="id">x</span>). <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Int.not_involutive">Int.not_involutive</a></span> <span class="id">y</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_not">iagree_not</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_or">iagree_or</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">n</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3360')">Proof.</div>
<div class="proofscript" id="proof3360">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">iagree_not</span>'. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Integers.html#Int.not_or_and_not">Int.not_or_and_not</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and">iagree_and</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_not">iagree_not</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_bitwise_binop">iagree_bitwise_binop</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sem</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">i</span>, 0 &lt;= <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> &lt; <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#f">f</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> = <span class="id"><a href="compcert.backend.NeedDomain.html#sem">sem</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x1</span> <span class="id">x2</span> <span class="id">y1</span> <span class="id">y2</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x1">x1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y1">y1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x2">x2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y2">y2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#f">f</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x1">x1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x2">x2</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#f">f</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y1">y1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y2">y2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3361')">Proof.</div>
<div class="proofscript" id="proof3361">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> ! <span class="id">H</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">f_equal</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_shl">iagree_shl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">m</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3362')">Proof.</div>
<div class="proofscript" id="proof3362">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>)).<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_range">Int.unsigned_range</a></span> <span class="id">n</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_shru">Int.bits_shru</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">i</span> - <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span> + <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="kwd">with</span> <span class="id">i</span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_shru">iagree_shru</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">m</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3363')">Proof.</div>
<div class="proofscript" id="proof3363">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">i</span> + <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>).<br/>
- <span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_range">Int.unsigned_range</a></span> <span class="id">n</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_shl">Int.bits_shl</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">i</span> + <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span> - <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="kwd">with</span> <span class="id">i</span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_false">zlt_false</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
- <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_shr_1">iagree_shr_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">m</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> = <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shr">Int.shr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.shr">Int.shr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3364')">Proof.</div>
<div class="proofscript" id="proof3364">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span> <span class="kwd">in</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_shru">Int.bits_shru</a></span> <span class="kwd">in</span> <span class="id">H2</span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Integers.html#Int.bits_shr">Int.bits_shr</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">i</span> + <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>).<br/>
- <span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_range">Int.unsigned_range</a></span> <span class="id">n</span>); <span class="tactic">omega</span>.<br/>
- <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_shr">iagree_shr</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">m</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.min_signed">Int.min_signed</a></span>)) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shr">Int.shr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.shr">Int.shr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3365')">Proof.</div>
<div class="proofscript" id="proof3365">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Integers.html#Int.bits_shr">Int.bits_shr</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_range">Int.unsigned_range</a></span> <span class="id">n</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">j</span> := <span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">i</span> + <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">i</span> + <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> - 1).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (0 &lt;= <span class="id">j</span> &lt; <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id">j</span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">i</span> + <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>); <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">auto</span>. <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_intro">orb_true_intro</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">j</span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> (<span class="id">i</span> + <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>).<br/>
- <span class="id">left</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_false">zlt_false</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">i</span> + <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span> - <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">n</span>) <span class="kwd">with</span> <span class="id">i</span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
- <span class="id">right</span>. <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_rol">iagree_rol</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">q</span> <span class="id">m</span> <span class="id">amount</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q">q</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ror">Int.ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.rol">Int.rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.rol">Int.rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q">q</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3366')">Proof.</div>
<div class="proofscript" id="proof3366">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> &gt; 0) <span class="tactic">by</span> (<span class="tactic">compute</span>; <span class="tactic">auto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Integers.html#Int.bits_rol">Int.bits_rol</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_mod_lt">Z_mod_lt</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_ror">Int.bits_ror</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (((<span class="id">i</span> - <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">amount</span>) <span class="id">mod</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> + <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">amount</span>)<br/>
&nbsp;&nbsp;&nbsp;<span class="id">mod</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>) <span class="kwd">with</span> <span class="id">i</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_small_eq">Int.eqmod_small_eq</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_trans">Int.eqmod_trans</a></span> <span class="kwd">with</span> ((<span class="id">i</span> - <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">amount</span>) + <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">amount</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_refl2">Int.eqmod_refl2</a></span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_trans">Int.eqmod_trans</a></span>. 2: <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_mod">Int.eqmod_mod</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_add">Int.eqmod_add</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_mod">Int.eqmod_mod</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_refl">Int.eqmod_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_mod_lt">Z_mod_lt</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zdiv.html#Z_mod_lt">Z_mod_lt</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_ror">iagree_ror</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">q</span> <span class="id">m</span> <span class="id">amount</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q">q</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.rol">Int.rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ror">Int.ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.ror">Int.ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q">q</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3367')">Proof.</div>
<div class="proofscript" id="proof3367">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Integers.html#Int.ror_rol_neg">Int.ror_rol_neg</a></span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#int_wordsize_divides_modulus">int_wordsize_divides_modulus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_rol">iagree_rol</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.ror_rol_neg">Int.ror_rol_neg</a></span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#int_wordsize_divides_modulus">int_wordsize_divides_modulus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.neg_involutive">Int.neg_involutive</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eqmod_iagree">eqmod_iagree</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span> <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Int.eqmod">Int.eqmod</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3368')">Proof.</div>
<div class="proofscript" id="proof3368">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">set</span> (<span class="id">p</span> := <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z">nat_of_Z</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size_range">Int.size_range</a></span> <span class="id">m</span>); <span class="tactic">intros</span> <span class="id">RANGE</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQ</span>: <span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id">m</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">p</span>). { <span class="tactic">symmetry</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span>. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">EQ</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.lib.Coqlib.html#two_power_nat_two_p">two_power_nat_two_p</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Integers.html#Int.testbit_repr">Int.testbit_repr</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.same_bits_eqmod">Int.same_bits_eqmod</a></span>; <span class="tactic">eauto</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id">m</span> <span class="id">i</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_size_2">Int.bits_size_2</a></span>; <span class="tactic">omega</span>).<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="complete_mask">complete_mask</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) := <span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>) <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iagree_eqmod">iagree_eqmod</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Int.eqmod">Int.eqmod</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zpower.html#two_p">two_p</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>)) (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3369')">Proof.</div>
<div class="proofscript" id="proof3369">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">set</span> (<span class="id">p</span> := <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z">nat_of_Z</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id">m</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size_range">Int.size_range</a></span> <span class="id">m</span>); <span class="tactic">intros</span> <span class="id">RANGE</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQ</span>: <span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id">m</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id">p</span>). { <span class="tactic">symmetry</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span>. <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">EQ</span>; <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.lib.Coqlib.html#two_power_nat_two_p">two_power_nat_two_p</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_same_bits">Int.eqmod_same_bits</a></span>. <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_mone">Int.bits_mone</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="complete_mask_idem">complete_mask_idem</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>) = <span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3370')">Proof.</div>
<div class="proofscript" id="proof3370">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id">m</span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span>).<br/>
+ <span class="tactic">subst</span> <span class="id">m</span>; <span class="tactic">reflexivity</span>.<br/>
+ <span class="tactic">assert</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned">Int.unsigned</a></span> <span class="id">m</span> &lt;&gt; 0).<br/>
&nbsp;&nbsp;{ <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="tactic">elim</span> <span class="id">n</span>. <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.lib.Integers.html#Int.repr_unsigned">Int.repr_unsigned</a></span> <span class="id">m</span>). <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (0 &lt; <span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> <span class="id">m</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id">Int.Zsize_pos</span>'. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_range">Int.unsigned_range</a></span> <span class="id">m</span>); <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size_range">Int.size_range</a></span> <span class="id">m</span>); <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_size_4">Int.bits_size_4</a></span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_mone">Int.bits_mone</a></span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_false">zlt_false</a></span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<h2> Abstract operations over value needs. </h2>
<br/>
<span class="kwd">Ltac</span> <span class="id">InvAgree</span> :=<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="id">vagree</span> <span class="kwd">in</span> *;<br/>
&nbsp;&nbsp;<span class="tactic">repeat</span> (<br/>
&nbsp;&nbsp;<span class="tactic">auto</span> || <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#I">Logic.I</a></span> ||<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> |- <span class="id">_</span> ] =&gt; <span class="id">contradiction</span><br/>
&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="kwd">match</span> ?<span class="id">v</span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> =&gt; <span class="id">_</span> | <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">_</span> =&gt; <span class="id">_</span> | <span class="id"><a href="compcert.common.Values.html#Vlong">Vlong</a></span> <span class="id">_</span> =&gt; <span class="id">_</span> | <span class="id"><a href="compcert.common.Values.html#Vfloat">Vfloat</a></span> <span class="id">_</span> =&gt; <span class="id">_</span> | <span class="id"><a href="compcert.common.Values.html#Vsingle">Vsingle</a></span> <span class="id">_</span> =&gt; <span class="id">_</span> | <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">_</span> <span class="id">_</span> =&gt; <span class="id">_</span> <span class="kwd">end</span> |- <span class="id">_</span> ] =&gt; <span class="tactic">destruct</span> <span class="id">v</span><br/>
&nbsp;&nbsp;| [ |- <span class="id">context</span> [<span class="kwd">if</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="kwd">then</span> <span class="id">_</span> <span class="kwd">else</span> <span class="id">_</span>] ] =&gt; <span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span> <span class="id">eqn</span>:?<br/>
&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
<br/>
<div class="doc">And immediate, or immediate </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="andimm">andimm</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span class="id">n</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="andimm_sound">andimm_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#andimm">andimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3371')">Proof.</div>
<div class="proofscript" id="proof3371">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#andimm">andimm</a></span>; <span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and">iagree_and</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and_eq">iagree_and_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="orimm">orimm</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span class="id">n</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id">m</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>))<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="orimm_sound">orimm_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#orimm">orimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3372')">Proof.</div>
<div class="proofscript" id="proof3372">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#orimm">orimm</a></span>; <span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span>; <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_or">iagree_or</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>. <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_mone">iagree_mone</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_or">iagree_or</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.and_commut">Int.and_commut</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.and_mone">Int.and_mone</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Bitwise operations: and, or, xor, not </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="bitwise">bitwise</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) := <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="bitwise_idem">bitwise_idem</a></span>: <span class="kwd">forall</span> <span class="id">nv</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv">nv</a></span>) = <span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv">nv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3373')">Proof.</div>
<div class="proofscript" id="proof3373">
 <span class="tactic">auto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="vagree_bitwise_binop">vagree_bitwise_binop</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">q1</span> <span class="id">q2</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p1">p1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q1">q1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p2">p2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q2">q2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#iagree">iagree</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#f">f</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p1">p1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p2">p2</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#f">f</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q1">q1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#q2">q2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#m">m</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v1</span> <span class="id">w1</span> <span class="id">v2</span> <span class="id">w2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i1</span>, <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i2</span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#f">f</a></span> <span class="id">i1</span> <span class="id">i2</span>) | <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1">w1</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#w2">w2</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i1</span>, <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i2</span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#f">f</a></span> <span class="id">i1</span> <span class="id">i2</span>) | <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span> <span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3374')">Proof.</div>
<div class="proofscript" id="proof3374">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>.<br/>
- <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">w1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="and_sound">and_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v1</span> <span class="id">w1</span> <span class="id">v2</span> <span class="id">w2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2">w2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<span class="kwd">Proof</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_bitwise_binop">vagree_bitwise_binop</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#iagree_bitwise_binop">iagree_bitwise_binop</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#andb">andb</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_and">Int.bits_and</a></span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="or_sound">or_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v1</span> <span class="id">w1</span> <span class="id">v2</span> <span class="id">w2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2">w2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<span class="kwd">Proof</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_bitwise_binop">vagree_bitwise_binop</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#iagree_bitwise_binop">iagree_bitwise_binop</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#orb">orb</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_or">Int.bits_or</a></span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="xor_sound">xor_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v1</span> <span class="id">w1</span> <span class="id">v2</span> <span class="id">w2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.xor">Val.xor</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.xor">Val.xor</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2">w2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<span class="kwd">Proof</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_bitwise_binop">vagree_bitwise_binop</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.xor">Int.xor</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#iagree_bitwise_binop">iagree_bitwise_binop</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#xorb">xorb</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.xor">Int.xor</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_xor">Int.bits_xor</a></span>)).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="notint_sound">notint_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#bitwise">bitwise</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.notint">Val.notint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.notint">Val.notint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3375')">Proof.</div>
<div class="proofscript" id="proof3375">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Values.html#Val.not_xor">Val.not_xor</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#xor_sound">xor_sound</a></span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Shifts and rotates </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="shlimm">shlimm</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span class="id">n</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="shlimm_sound">shlimm_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#shlimm">shlimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.shl">Val.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.shl">Val.shl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3376')">Proof.</div>
<div class="proofscript" id="proof3376">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#shlimm">shlimm</a></span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.shl">Val.shl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.iwordsize">Int.iwordsize</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shl">iagree_shl</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>. <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_mone">iagree_mone</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shl">iagree_shl</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="shruimm">shruimm</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span class="id">n</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="shruimm_sound">shruimm_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#shruimm">shruimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.shru">Val.shru</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.shru">Val.shru</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3377')">Proof.</div>
<div class="proofscript" id="proof3377">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#shruimm">shruimm</a></span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.shru">Val.shru</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.iwordsize">Int.iwordsize</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shru">iagree_shru</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>. <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_mone">iagree_mone</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shru">iagree_shru</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="shrimm">shrimm</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span class="id">n</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="kwd">let</span> <span class="id">m</span>' := <span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> <span class="id">m</span>' <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) <span class="id">m</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">then</span> <span class="id">m</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">else</span> <span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> <span class="id">m</span>' (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.min_signed">Int.min_signed</a></span>))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.min_signed">Int.min_signed</a></span>))<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="shrimm_sound">shrimm_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#shrimm">shrimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.shr">Val.shr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.shr">Val.shr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3378')">Proof.</div>
<div class="proofscript" id="proof3378">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#shrimm">shrimm</a></span>; <span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.shr">Val.shr</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ltu">Int.ltu</a></span> <span class="id">n</span> <span class="id"><a href="compcert.lib.Integers.html#Int.iwordsize">Int.iwordsize</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shru">Int.shru</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id">m</span> <span class="id">n</span>) <span class="id">n</span>) <span class="id">m</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shr_1">iagree_shr_1</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shr">iagree_shr</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>. <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_mone">iagree_mone</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_shr">iagree_shr</a></span>. <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">v</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="rol">rol</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span class="id">amount</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.ror">Int.ror</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="rol_sound">rol_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#rol">rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.rol">Val.rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.rol">Val.rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3379')">Proof.</div>
<div class="proofscript" id="proof3379">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#rol">rol</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.rol">Val.rol</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_rol">iagree_rol</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ror">ror</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span class="id">amount</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.rol">Int.rol</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ror_sound">ror_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#ror">ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.ror">Val.ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) (<span class="id"><a href="compcert.common.Values.html#Val.ror">Val.ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3380')">Proof.</div>
<div class="proofscript" id="proof3380">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#ror">ror</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.ror">Val.ror</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_ror">iagree_ror</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="rolm">rolm</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span class="id">amount</span> <span class="id">mask</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) := <span class="id"><a href="compcert.backend.NeedDomain.html#rol">rol</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#andimm">andimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask">mask</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="rolm_sound">rolm_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">amount</span> <span class="id">mask</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#rolm">rolm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask">mask</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.rolm">Val.rolm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask">mask</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.rolm">Val.rolm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask">mask</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3381')">Proof.</div>
<div class="proofscript" id="proof3381">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#rolm">rolm</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">X</span>: <span class="kwd">forall</span> <span class="id">u</span>, <span class="id"><a href="compcert.common.Values.html#Val.rolm">Val.rolm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#u">u</a></span> <span class="id">amount</span> <span class="id">mask</span> = <span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.rol">Val.rol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#u">u</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">amount</span>)) (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">mask</span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">destruct</span> <span class="id">u</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id">X</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#andimm_sound">andimm_sound</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#rol_sound">rol_sound</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Modular arithmetic operations: add, mul, opposite.
    (But not subtraction because of the pointer - pointer case. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="modarith">modarith</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask">complete_mask</a></span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_sound">add_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v1</span> <span class="id">w1</span> <span class="id">v2</span> <span class="id">w2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2">w2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3382')">Proof.</div>
<div class="proofscript" id="proof3382">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.add">Val.add</a></span>; <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#eqmod_iagree">eqmod_iagree</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_add">Int.eqmod_add</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">w1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="modarith_idem">modarith_idem</a></span>: <span class="kwd">forall</span> <span class="id">nv</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv">nv</a></span>) = <span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv">nv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3383')">Proof.</div>
<div class="proofscript" id="proof3383">
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">nv</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">f_equal</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#complete_mask_idem">complete_mask_idem</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="mul_sound">mul_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v1</span> <span class="id">w1</span> <span class="id">v2</span> <span class="id">w2</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1">w1</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2">w2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.mul">Val.mul</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.mul">Val.mul</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w1">w1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w2">w2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3384')">Proof.</div>
<div class="proofscript" id="proof3384">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.ValueDomain.html#mul">mul</a></span>, <span class="id"><a href="compcert.backend.ValueDomain.html#add">add</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.mul">Val.mul</a></span>; <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#eqmod_iagree">eqmod_iagree</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_mult">Int.eqmod_mult</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">w1</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="neg_sound">neg_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#modarith">modarith</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.neg">Val.neg</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.neg">Val.neg</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3385')">Proof.</div>
<div class="proofscript" id="proof3385">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.neg">Val.neg</a></span>; <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#eqmod_iagree">eqmod_iagree</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.eqmod_neg">Int.eqmod_neg</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Conversions: zero extension, sign extension, single-of-float </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="zero_ext">zero_ext</a></span> (<span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id">m</span>)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="zero_ext_sound">zero_ext_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext">zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3386')">Proof.</div>
<div class="proofscript" id="proof3386">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext">zero_ext</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span>; <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>); <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">try</span> <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span>; <span class="id">InvAgree</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">Int.bit_solve</span>; <span class="tactic">try</span> <span class="tactic">omega</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>); <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">try</span> <span class="tactic">omega</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sign_ext">sign_ext</a></span> (<span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.or">Int.or</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id">m</span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.shl">Int.shl</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.one">Int.one</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> - 1))))<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.mone">Int.mone</a></span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sign_ext_sound">sign_ext_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext">sign_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> &lt; <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3387')">Proof.</div>
<div class="proofscript" id="proof3387">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext">sign_ext</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span>; <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">j</span> := <span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span> <span class="kwd">then</span> <span class="id">i1</span> <span class="kwd">else</span> <span class="id">n</span> - 1).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (0 &lt;= <span class="id">j</span> &lt; <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id">j</span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>); <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">try</span> <span class="tactic">omega</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_intro">orb_true_intro</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">j</span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>).<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.unsigned_repr">Int.unsigned_repr</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_false">zlt_false</a></span> <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id">n</span> - 1 - (<span class="id">n</span> - 1)) <span class="kwd">with</span> 0 <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> <span class="id"><a href="compcert.lib.Integers.html#Int.wordsize_max_unsigned">Int.wordsize_max_unsigned</a></span>; <span class="tactic">omega</span>.<br/>
- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span>; <span class="id">InvAgree</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.lessdef_same">Val.lessdef_same</a></span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id">Int.bit_solve</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">j</span> := <span class="kwd">if</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span> <span class="kwd">then</span> <span class="id">i1</span> <span class="kwd">else</span> <span class="id">n</span> - 1).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (0 &lt;= <span class="id">j</span> &lt; <span class="id"><a href="compcert.lib.Integers.html#Int.zwordsize">Int.zwordsize</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id">j</span>; <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>); <span class="tactic">omega</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_true">zlt_true</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_mone">Int.bits_mone</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">j</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>); <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The needs of a memory store concerning the value being stored. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="store_argument">store_argument</a></span> (<span class="id">chunk</span>: <span class="id"><a href="compcert.common.AST.html#memory_chunk">memory_chunk</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk">chunk</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Mint8signed">Mint8signed</a></span> | <span class="id"><a href="compcert.common.AST.html#Mint8unsigned">Mint8unsigned</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 255)<br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Mint16signed">Mint16signed</a></span> | <span class="id"><a href="compcert.common.AST.html#Mint16unsigned">Mint16unsigned</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 65535)<br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_argument_sound">store_argument_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">v</span> <span class="id">w</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#store_argument">store_argument</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk">chunk</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef">memval_lessdef</a></span> (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span>) (<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3388')">Proof.</div>
<div class="proofscript" id="proof3388">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">UNDEF</span>: <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef">memval_lessdef</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Coqlib.html#list_repeat">list_repeat</a></span> (<span class="id"><a href="compcert.common.Memdata.html#size_chunk_nat">size_chunk_nat</a></span> <span class="id">chunk</span>) <span class="id"><a href="compcert.common.Memdata.html#Undef">Undef</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Memdata.html#encode_val">encode_val</a></span> <span class="id">chunk</span> <span class="id">w</span>)).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="compcert.common.Memdata.html#encode_val_length">encode_val_length</a></span> <span class="id">chunk</span> <span class="id">w</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#repeat_Undef_inject_any">repeat_Undef_inject_any</a></span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">SAME</span>: <span class="kwd">forall</span> <span class="id">vl1</span> <span class="id">vl2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vl1">vl1</a></span> = <span class="id"><a href="compcert.backend.NeedDomain.html#vl2">vl2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef">memval_lessdef</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl1">vl1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#vl2">vl2</a></span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">subst</span> <span class="id">vl2</span>. <span class="id">revert</span> <span class="id">vl1</span>. <span class="tactic">induction</span> <span class="id">vl1</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#memval_lessdef_refl">memval_lessdef_refl</a></span>.<br/>
&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#store_argument">store_argument</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">destruct</span> <span class="id">chunk</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id">SAME</span>. <span class="tactic">simpl</span>; <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_8_mod">encode_int_8_mod</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> 8 <span class="kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 255)). <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id">SAME</span>. <span class="tactic">simpl</span>; <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_8_mod">encode_int_8_mod</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> 8 <span class="kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 255)). <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id">SAME</span>. <span class="tactic">simpl</span>; <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_16_mod">encode_int_16_mod</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> 16 <span class="kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 65535)). <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="id">InvAgree</span>. <span class="tactic">apply</span> <span class="id">SAME</span>. <span class="tactic">simpl</span>; <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_int_16_mod">encode_int_16_mod</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> 16 <span class="kwd">with</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.size">Int.size</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.repr">Int.repr</a></span> 65535)). <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_eqmod">iagree_eqmod</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#encode_val_inject">encode_val_inject</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#val_inject_id">val_inject_id</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="store_argument_load_result">store_argument_load_result</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">chunk</span> <span class="id">v</span> <span class="id">w</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#store_argument">store_argument</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk">chunk</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.lessdef">Val.lessdef</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span>) (<span class="id"><a href="compcert.common.Values.html#Val.load_result">Val.load_result</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#chunk">chunk</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3389')">Proof.</div>
<div class="proofscript" id="proof3389">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#store_argument">store_argument</a></span>; <span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">chunk</span>;<br/>
&nbsp;&nbsp;<span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Values.html#Val.load_result_lessdef">Val.load_result_lessdef</a></span>; <span class="id">InvAgree</span>; <span class="tactic">simpl</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext_sound">sign_ext_sound</a></span> <span class="kwd">with</span> (<span class="id">v</span> := <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>) (<span class="id">w</span> := <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i0</span>) (<span class="id">x</span> := <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span>) (<span class="id">n</span> := 8).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">compute</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext_sound">zero_ext_sound</a></span> <span class="kwd">with</span> (<span class="id">v</span> := <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>) (<span class="id">w</span> := <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i0</span>) (<span class="id">x</span> := <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span>) (<span class="id">n</span> := 8).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext_sound">sign_ext_sound</a></span> <span class="kwd">with</span> (<span class="id">v</span> := <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>) (<span class="id">w</span> := <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i0</span>) (<span class="id">x</span> := <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span>) (<span class="id">n</span> := 16).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">compute</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext_sound">zero_ext_sound</a></span> <span class="kwd">with</span> (<span class="id">v</span> := <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i</span>) (<span class="id">w</span> := <span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id">i0</span>) (<span class="id">x</span> := <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span>) (<span class="id">n</span> := 16).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The needs of a comparison </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="maskzero">maskzero</a></span> (<span class="id">n</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) := <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="maskzero_sound">maskzero_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">n</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#maskzero">maskzero</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.maskzero_bool">Val.maskzero_bool</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.maskzero_bool">Val.maskzero_bool</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3390')">Proof.</div>
<div class="proofscript" id="proof3390">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#maskzero">maskzero</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.maskzero_bool">Val.maskzero_bool</a></span>; <span class="id">InvAgree</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_and_eq">iagree_and_eq</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The default abstraction: if the result is unused, the arguments are
  unused; otherwise, the arguments are needed in full. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="default">default</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="DEFAULT">DEFAULT</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="DEFAULT.ge">ge</a></span>: <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="DEFAULT.sp">sp</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<span class="kwd">Variables</span> <span class="id"><a name="DEFAULT.m1">m1</a></span> <span class="id"><a name="DEFAULT.m2">m2</a></span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="DEFAULT.PERM">PERM</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">k</span> <span class="id">p</span>, <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#k">k</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> -&gt; <span class="id"><a href="compcert.common.Memory.html#Mem.perm">Mem.perm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m2">m2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#k">k</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="DEFAULT.valid_pointer_inj">valid_pointer_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#b2">b2</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m2">m2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b2">b2</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta">delta</a></span>))) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3391')">Proof.</div>
<div class="proofscript" id="proof3391">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> *. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="DEFAULT.weak_valid_pointer_inj">weak_valid_pointer_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#b2">b2</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m2">m2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b2">b2</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta">delta</a></span>))) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3392')">Proof.</div>
<div class="proofscript" id="proof3392">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_spec">Mem.weak_valid_pointer_spec</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_nonempty_perm">Mem.valid_pointer_nonempty_perm</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>; [<span class="id">left</span>|<span class="id">right</span>]; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="DEFAULT.weak_valid_pointer_no_overflow">weak_valid_pointer_no_overflow</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">ofs</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#b2">b2</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer">Mem.weak_valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta">delta</a></span>) &lt;= <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.max_unsigned">Ptrofs.max_unsigned</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3393')">Proof.</div>
<div class="proofscript" id="proof3393">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="DEFAULT.valid_different_pointers_inj">valid_different_pointers_inj</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">ofs1</span> <span class="id">b2</span> <span class="id">ofs2</span> <span class="id">b1</span>' <span class="id">delta1</span> <span class="id">b2</span>' <span class="id">delta2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#b1">b1</a></span> &lt;&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#b2">b2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1">b1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs1">ofs1</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer">Mem.valid_pointer</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b2">b2</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs2">ofs2</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b1</span>', <span class="id"><a href="compcert.backend.NeedDomain.html#delta1">delta1</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b2">b2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b2</span>', <span class="id"><a href="compcert.backend.NeedDomain.html#delta2">delta2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">b1</span>' &lt;&gt; <span class="id">b2</span>' \/<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs1">ofs1</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta1">delta1</a></span>)) &lt;&gt; <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs2">ofs2</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#delta2">delta2</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3394')">Proof.</div>
<div class="proofscript" id="proof3394">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>; <span class="tactic">intros</span>. <span class="id">left</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="default_needs_of_condition_sound">default_needs_of_condition_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">cond</span> <span class="id">args1</span> <span class="id">b</span> <span class="id">args2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#cond">cond</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2">args2</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#cond">cond</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2">args2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m2">m2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3395')">Proof.</div>
<div class="proofscript" id="proof3395">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_condition_inj">eval_condition_inj</a></span> <span class="kwd">with</span> (<span class="id">f</span> := <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>) (<span class="id">m1</span> := <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span>) (<span class="id">vl1</span> := <span class="id">args1</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_list_lessdef">val_inject_list_lessdef</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#lessdef_vagree_list">lessdef_vagree_list</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="default_needs_of_operation_sound">default_needs_of_operation_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">op</span> <span class="id">args1</span> <span class="id">v1</span> <span class="id">args2</span> <span class="id">nv</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#op">op</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m1">m1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2">args2</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span><br/>
&nbsp;&nbsp;\/ <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2">args2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#default">default</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv">nv</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>)<br/>
&nbsp;&nbsp;\/ <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_list">vagree_list</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args1">args1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2">args2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#default">default</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv">nv</a></span> :: <span class="id"><a href="compcert.backend.NeedDomain.html#default">default</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv">nv</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nv">nv</a></span> &lt;&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.ge">ge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#op">op</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#args2">args2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.m2">m2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv">nv</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3396')">Proof.</div>
<div class="proofscript" id="proof3396">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">assert</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#default">default</a></span> <span class="id">nv</span> = <span class="id"><a href="compcert.backend.NeedDomain.html#All">All</a></span>) <span class="tactic">by</span> (<span class="tactic">destruct</span> <span class="id">nv</span>; <span class="tactic">simpl</span>; <span class="tactic">congruence</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Values.html#Val.lessdef_list">Val.lessdef_list</a></span> <span class="id">args1</span> <span class="id">args2</span>).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="id">constructor</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>; <span class="id">constructor</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>. <span class="id">inv</span> <span class="id">H8</span>; <span class="id">constructor</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">na</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (@<span class="id"><a href="compcert.x86.Op.html#eval_operation_inj">eval_operation_inj</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.ge">ge</a></span> <span class="id"><a href="compcert.common.Values.html#inject_id">inject_id</a></span>).<br/>
&nbsp;&nbsp;<span class="id">eassumption</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">instantiate</span> (1 := <span class="id">op</span>). <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_lessdef">val_inject_lessdef</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_lessdef">val_inject_lessdef</a></span>. <span class="id">instantiate</span> (1 := <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>). <span class="id">instantiate</span> (1 := <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT.sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_list_lessdef">val_inject_list_lessdef</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">v2</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="id">exists</span> <span class="id">v2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_lessdef">vagree_lessdef</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_lessdef">val_inject_lessdef</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.NeedDomain.html#DEFAULT">DEFAULT</a></span>.<br/>
<br/>
<h2> Detecting operations that are redundant and can be turned into a move </h2>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="andimm_redundant">andimm_redundant</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span class="id">n</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id">m</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="andimm_redundant_sound">andimm_redundant_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#andimm_redundant">andimm_redundant</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#andimm">andimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3397')">Proof.</div>
<div class="proofscript" id="proof3397">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#andimm_redundant">andimm_redundant</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
- <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
- <span class="id">InvBooleans</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.and">Val.and</a></span>; <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#eq_same_bits">eq_same_bits</a></span> <span class="id">i1</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H2</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Integers.html#Int.testbit">Int.testbit</a></span> <span class="id">n</span> <span class="id">i1</span>) <span class="id">eqn</span>:<span class="id">N</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_true_r">andb_true_r</a></span>. <span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H2</span>, <span class="id">N</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="orimm_redundant">orimm_redundant</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span class="id">n</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.and">Int.and</a></span> <span class="id">m</span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="orimm_redundant_sound">orimm_redundant_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#orimm_redundant">orimm_redundant</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#orimm">orimm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>)) <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3398')">Proof.</div>
<div class="proofscript" id="proof3398">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#orimm_redundant">orimm_redundant</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="id">InvBooleans</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.or">Val.or</a></span>; <span class="id">InvAgree</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">iagree_not</span>'. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.not_or_and_not">Int.not_or_and_not</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#andimm_redundant_sound">andimm_redundant_sound</a></span> (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id">i</span>)) (<span class="id"><a href="compcert.common.Values.html#Vint">Vint</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id">i0</span>)) (<span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span>) (<span class="id"><a href="compcert.lib.Integers.html#Int.not">Int.not</a></span> <span class="id">n</span>)).<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.not_involutive">Int.not_involutive</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool_is_true">proj_sumbool_is_true</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#iagree_not">iagree_not</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="rolm_redundant">rolm_redundant</a></span> (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) (<span class="id">amount</span> <span class="id">mask</span>: <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span> &amp;&amp; <span class="id"><a href="compcert.backend.NeedDomain.html#andimm_redundant">andimm_redundant</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask">mask</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="rolm_redundant_sound">rolm_redundant_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">amount</span> <span class="id">mask</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#rolm_redundant">rolm_redundant</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask">mask</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#rolm">rolm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask">mask</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.rolm">Val.rolm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#amount">amount</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#mask">mask</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3399')">Proof.</div>
<div class="proofscript" id="proof3399">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#rolm_redundant">rolm_redundant</a></span>; <span class="tactic">intros</span>; <span class="id">InvBooleans</span>. <span class="tactic">subst</span> <span class="id">amount</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Values.html#Val.rolm_zero">Val.rolm_zero</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#andimm_redundant_sound">andimm_redundant_sound</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="compcert.lib.Integers.html#Int.ror">Int.ror</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.lib.Integers.html#Int.zero">Int.zero</a></span> = <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.ror_rol_neg">Int.ror_rol_neg</a></span> <span class="tactic">by</span> <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#int_wordsize_divides_modulus">int_wordsize_divides_modulus</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.neg_zero">Int.neg_zero</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Int.rol_zero">Int.rol_zero</a></span>. }<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#rolm">rolm</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#rol">rol</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#andimm">andimm</a></span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="zero_ext_redundant">zero_ext_redundant</a></span> (<span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id">m</span>) <span class="id">m</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="zero_ext_redundant_sound">zero_ext_redundant_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext_redundant">zero_ext_redundant</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext">zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;0 &lt;= <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.zero_ext">Val.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3400')">Proof.</div>
<div class="proofscript" id="proof3400">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#zero_ext_redundant">zero_ext_redundant</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">InvAgree</span>. <span class="tactic">simpl</span>. <span class="id">InvBooleans</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>). <span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_false">zlt_false</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="sign_ext_redundant">sign_ext_redundant</a></span> (<span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) (<span class="id">x</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#I">I</a></span> <span class="id">m</span> =&gt; <span class="id"><a href="compcert.lib.Integers.html#Int.eq_dec">Int.eq_dec</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Int.zero_ext">Int.zero_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id">m</span>) <span class="id">m</span><br/>
&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sign_ext_redundant_sound">sign_ext_redundant_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">v</span> <span class="id">w</span> <span class="id">x</span> <span class="id">n</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext_redundant">sign_ext_redundant</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext">sign_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) -&gt;<br/>
&nbsp;&nbsp;0 &lt; <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> (<span class="id"><a href="compcert.common.Values.html#Val.sign_ext">Val.sign_ext</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#n">n</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v">v</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#w">w</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3401')">Proof.</div>
<div class="proofscript" id="proof3401">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#sign_ext_redundant">sign_ext_redundant</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="id">InvAgree</span>. <span class="tactic">simpl</span>. <span class="id">InvBooleans</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">ints</span>; <span class="tactic">try</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zlt">zlt</a></span> <span class="id">i1</span> <span class="id">n</span>). <span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_or">Int.bits_or</a></span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H3</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Int.bits_zero_ext">Int.bits_zero_ext</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="tactic">by</span> <span class="tactic">omega</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#zlt_false">zlt_false</a></span> <span class="kwd">in</span> <span class="id">H3</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<h1> Neededness for register environments </h1>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="NVal">NVal</a></span> &lt;: <span class="id"><a href="compcert.lib.Lattice.html#SEMILATTICE">SEMILATTICE</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NVal.t">t</a></span> := <span class="id"><a href="compcert.backend.NeedDomain.html#nval">nval</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NVal.eq">eq</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.t">t</a></span>) := (<span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> = <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NVal.eq_refl">eq_refl</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> := (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_refl">eq_refl</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.t">t</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NVal.eq_sym">eq_sym</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> := (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_sym">eq_sym</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.t">t</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NVal.eq_trans">eq_trans</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z">z</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z">z</a></span> := (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#eq_trans">eq_trans</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.t">t</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NVal.beq">beq</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.t">t</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> := <span class="id"><a href="compcert.lib.Coqlib.html#proj_sumbool">proj_sumbool</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#eq_nval">eq_nval</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>).<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NVal.beq_correct">beq_correct</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.beq">beq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3402')">Proof.</div>
<div class="proofscript" id="proof3402">
 <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.beq">beq</a></span>; <span class="tactic">intros</span>. <span class="id">InvBooleans</span>. <span class="tactic">auto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NVal.ge">ge</a></span> := <span class="id"><a href="compcert.backend.NeedDomain.html#nge">nge</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NVal.ge_refl">ge_refl</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3403')">Proof.</div>
<div class="proofscript" id="proof3403">
 <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.eq">eq</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span>; <span class="tactic">intros</span>. <span class="tactic">subst</span> <span class="id">y</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge_refl">nge_refl</a></span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NVal.ge_trans">ge_trans</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z">z</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z">z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3404')">Proof.</div>
<div class="proofscript" id="proof3404">
 <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge_trans">nge_trans</a></span>; <span class="tactic">eauto</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NVal.bot">bot</a></span> : <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.t">t</a></span> := <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NVal.ge_bot">ge_bot</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.bot">bot</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3405')">Proof.</div>
<div class="proofscript" id="proof3405">
 <span class="tactic">intros</span>. <span class="id">constructor</span>. Qed.</div>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NVal.lub">lub</a></span> := <span class="id"><a href="compcert.backend.NeedDomain.html#nlub">nlub</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NVal.ge_lub_left">ge_lub_left</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#NVal.lub">lub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Proof</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge_lub_l">nge_lub_l</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NVal.ge_lub_right">ge_lub_right</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NVal.ge">ge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#NVal.lub">lub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>.<br/>
&nbsp;&nbsp;<span class="kwd">Proof</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge_lub_r">nge_lub_r</a></span>.<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NVal">NVal</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="NE">NE</a></span> := <span class="id"><a href="compcert.lib.Lattice.html#LPMap1">LPMap1</a></span>(<span class="id"><a href="compcert.backend.NeedDomain.html#NVal">NVal</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="nenv">nenv</a></span> := <span class="id"><a href="compcert.backend.NeedDomain.html#t">NE.t</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="nreg">nreg</a></span> (<span class="id">ne</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nenv">nenv</a></span>) (<span class="id">r</span>: <span class="id"><a href="compcert.backend.Registers.html#reg">reg</a></span>) := <span class="id"><a href="compcert.backend.NeedDomain.html#get">NE.get</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="eagree">eagree</a></span> (<span class="id">e1</span> <span class="id">e2</span>: <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>) (<span class="id">ne</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nenv">nenv</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1">e1</a></span>#<span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2">e2</a></span>#<span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#get">NE.get</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nreg_agree">nreg_agree</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rs1</span> <span class="id">rs2</span> <span class="id">ne</span> <span class="id">r</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#rs1">rs1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#rs2">rs2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#rs1">rs1</a></span>#<span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#rs2">rs2</a></span>#<span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nreg">nreg</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3406')">Proof.</div>
<div class="proofscript" id="proof3406">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Hint</span> <span class="kwd">Resolve</span> <span class="id">nreg_agree</span>: <span class="id">na</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eagree_ge">eagree_ge</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ne</span> <span class="id">ne</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1">e1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2">e2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#ge">NE.ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span> <span class="id">ne</span>' -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1">e1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2">e2</a></span> <span class="id">ne</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3407')">Proof.</div>
<div class="proofscript" id="proof3407">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nge_agree">nge_agree</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.backend.NeedDomain.html#get">NE.get</a></span> <span class="id">r</span> <span class="id">ne</span>); <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id">H0</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eagree_bot">eagree_bot</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1">e1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2">e2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bot">NE.bot</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3408')">Proof.</div>
<div class="proofscript" id="proof3408">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#get_bot">NE.get_bot</a></span>. <span class="tactic">exact</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#I">Logic.I</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eagree_same">eagree_same</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e</span> <span class="id">ne</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e">e</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e">e</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3409')">Proof.</div>
<div class="proofscript" id="proof3409">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#vagree_same">vagree_same</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eagree_update_1">eagree_update_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ne</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">nv</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1">e1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2">e2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv">nv</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#e1">e1</a></span>#<span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> &lt;- <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#e2">e2</a></span>#<span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> &lt;- <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#set">NE.set</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nv">nv</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3410')">Proof.</div>
<div class="proofscript" id="proof3410">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#gsspec">NE.gsspec</a></span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eagree_update">eagree_update</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ne</span> <span class="id">v1</span> <span class="id">v2</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#vagree">vagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nreg">nreg</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1">e1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2">e2</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#set">NE.set</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#e1">e1</a></span>#<span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> &lt;- <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span>) (<span class="id"><a href="compcert.backend.NeedDomain.html#e2">e2</a></span>#<span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> &lt;- <span class="id"><a href="compcert.backend.NeedDomain.html#v2">v2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3411')">Proof.</div>
<div class="proofscript" id="proof3411">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">specialize</span> (<span class="id">H0</span> <span class="id">r0</span>). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.NeedDomain.html#gsspec">NE.gsspec</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">r0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eagree_update_dead">eagree_update_dead</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">e1</span> <span class="id">e2</span> <span class="id">ne</span> <span class="id">v1</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nreg">nreg</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> = <span class="id"><a href="compcert.backend.NeedDomain.html#Nothing">Nothing</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e1">e1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#e2">e2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#eagree">eagree</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#e1">e1</a></span>#<span class="id"><a href="compcert.backend.NeedDomain.html#r">r</a></span> &lt;- <span class="id"><a href="compcert.backend.NeedDomain.html#v1">v1</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#e2">e2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ne">ne</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3412')">Proof.</div>
<div class="proofscript" id="proof3412">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PMap.gsspec">PMap.gsspec</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>); <span class="tactic">auto</span>. <span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nreg">nreg</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Neededness for memory locations </h1>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="nmem">nmem</a></span> : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="NMemDead">NMemDead</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="NMem">NMem</a></span> (<span class="id">stk</span>: <span class="id"><a href="compcert.lib.IntvSets.html#ISet.t">ISet.t</a></span>) (<span class="id">gl</span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.t">ISet.t</a></span>).<br/>
<br/>
<div class="doc">Interpretation of <span class="bracket"><span class="id">nmem</span></span>:
<ul>
<li>
 <span class="bracket"><span class="id">NMemDead</span></span>: all memory locations are unused (dead).  Acts as bottom.
</li>
<li>
 <span class="bracket"><span class="id">NMem</span> <span class="id">stk</span> <span class="id">gl</span></span>: all memory locations are used, except:
  - the stack locations whose offset is in the interval <span class="bracket"><span class="id">stk</span></span>
  - the global locations whose offset is in the corresponding entry of <span class="bracket"><span class="id">gl</span></span>.
</li>
</ul>
</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="LOCATIONS">LOCATIONS</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="LOCATIONS.ge">ge</a></span>: <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="LOCATIONS.sp">sp</a></span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="nlive">nlive</a></span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="nlive_intro">nlive_intro</a></span>: <span class="kwd">forall</span> <span class="id">stk</span> <span class="id">gl</span> <span class="id">b</span> <span class="id">ofs</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STK</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> = <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.sp">sp</a></span> -&gt; ~<span class="id"><a href="compcert.lib.IntvSets.html#ISet.In">ISet.In</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#stk">stk</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">GL</span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">iv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#gl">gl</a></span>!<span class="id"><a href="compcert.backend.NeedDomain.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iv">iv</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~<span class="id"><a href="compcert.lib.IntvSets.html#ISet.In">ISet.In</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#iv">iv</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#stk">stk</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#gl">gl</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span>.<br/>
<br/>
<div class="doc">All locations are live </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="nmem_all">nmem_all</a></span> := <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.empty">ISet.empty</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nlive_all">nlive_all</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_all">nmem_all</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3413')">Proof.</div>
<div class="proofscript" id="proof3413">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_empty">ISet.In_empty</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Add a range of live locations to <span class="bracket"><span class="id">nm</span></span>.  The range starts at
  the abstract pointer <span class="bracket"><span class="id">p</span></span> and has length <span class="bracket"><span class="id">sz</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="nmem_add">nmem_add</a></span> (<span class="id">nm</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span>) (<span class="id">p</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#aptr">aptr</a></span>) (<span class="id">sz</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm">nm</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_all">nmem_all</a></span>       <span class="docright">(* very conservative, should never happen  *)</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk</span> <span class="id">gl</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.ValueDomain.html#Gl">Gl</a></span> <span class="id">id</span> <span class="id">ofs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">gl</span>!<span class="id">id</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">iv</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.remove">ISet.remove</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>) <span class="id">iv</span>) <span class="id">gl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nm">nm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.ValueDomain.html#Glo">Glo</a></span> <span class="id">id</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.remove">PTree.remove</a></span> <span class="id">id</span> <span class="id">gl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> <span class="id">ofs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.remove">ISet.remove</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>) <span class="id">stk</span>) <span class="id">gl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.ValueDomain.html#Stack">Stack</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.empty">ISet.empty</a></span> <span class="id">gl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_all">nmem_all</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nlive_add">nlive_add</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bc</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span> <span class="id">nm</span> <span class="id">sz</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.sp">sp</a></span> = <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> &lt;= <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> &lt; <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_add">nmem_add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3414')">Proof.</div>
<div class="proofscript" id="proof3414">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_add">nmem_add</a></span>. <span class="tactic">destruct</span> <span class="id">nm</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive_all">nlive_all</a></span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> (<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive_all">nlive_all</a></span>).<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Gl&nbsp;id&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gl</span>!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">iv</span>|] <span class="id">eqn</span>:<span class="id">NG</span>.<br/>
&nbsp;&nbsp;+ <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">id0</span> = <span class="id">id</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_vars_inj">Genv.genv_vars_inj</a></span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">id0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gss">PTree.gss</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_remove">ISet.In_remove</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">elim</span> <span class="id">A</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">id0</span> = <span class="id">id</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_vars_inj">Genv.genv_vars_inj</a></span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">id0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Glo&nbsp;id&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">id0</span> = <span class="id">id</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_vars_inj">Genv.genv_vars_inj</a></span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">id0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grs">PTree.grs</a></span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Stk&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_remove">ISet.In_remove</a></span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">elim</span> <span class="id">A</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">bc</span> <span class="id">b</span> = <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">id</span>)) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="comment">(*&nbsp;Stack&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_empty">ISet.In_empty</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">bc</span> <span class="id">b</span> = <span class="id"><a href="compcert.backend.ValueDomain.html#BCglob">BCglob</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">id</span>)) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>). <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="incl_nmem_add">incl_nmem_add</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">nm</span> <span class="id">b</span> <span class="id">i</span> <span class="id">p</span> <span class="id">sz</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_add">nmem_add</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3415')">Proof.</div>
<div class="proofscript" id="proof3415">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_add">nmem_add</a></span>; <span class="tactic">destruct</span> <span class="id">p</span>; <span class="tactic">try</span> (<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive_all">nlive_all</a></span>).<br/>
- <span class="comment">(*&nbsp;Gl&nbsp;id&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gl</span>!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">iv</span>|] <span class="id">eqn</span>:<span class="id">NG</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>); <span class="tactic">eauto</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_remove">ISet.In_remove</a></span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="id">eelim</span> <span class="id">GL</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;Glo&nbsp;id&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.grspec">PTree.grspec</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt_eq">PTree.elt_eq</a></span> <span class="id">id0</span> <span class="id">id</span>). <span class="tactic">congruence</span>. <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;Stk&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_remove">ISet.In_remove</a></span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="id">eelim</span> <span class="id">STK</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;Stack&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_empty">ISet.In_empty</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Remove a range of locations from <span class="bracket"><span class="id">nm</span></span>, marking these locations as dead.
  The range starts at the abstract pointer <span class="bracket"><span class="id">p</span></span> and has length <span class="bracket"><span class="id">sz</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="nmem_remove">nmem_remove</a></span> (<span class="id">nm</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span>) (<span class="id">p</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#aptr">aptr</a></span>) (<span class="id">sz</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) : <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm">nm</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk</span> <span class="id">gl</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.ValueDomain.html#Gl">Gl</a></span> <span class="id">id</span> <span class="id">ofs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">let</span> <span class="id">iv</span>' :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">gl</span>!<span class="id">id</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">iv</span> =&gt; <span class="id"><a href="compcert.lib.IntvSets.html#ISet.add">ISet.add</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>) <span class="id">iv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>    =&gt; <span class="id"><a href="compcert.lib.IntvSets.html#ISet.interval">ISet.interval</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span> <span class="kwd">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> <span class="id">id</span> <span class="id">iv</span>' <span class="id">gl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> <span class="id">ofs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.add">ISet.add</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>) <span class="id">stk</span>) <span class="id">gl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nm">nm</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nlive_remove">nlive_remove</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bc</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span> <span class="id">nm</span> <span class="id">sz</span> <span class="id">b</span>' <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.sp">sp</a></span> = <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm">nm</a></span> <span class="id">b</span>' <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> \/ <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> &lt; <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> \/ <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span> &lt;= <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_remove">nmem_remove</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>) <span class="id">b</span>' <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3416')">Proof.</div>
<div class="proofscript" id="proof3416">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H2</span>; <span class="tactic">subst</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_remove">nmem_remove</a></span>; <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;Gl&nbsp;id&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">iv</span>' := <span class="kwd">match</span> <span class="id">gl</span>!<span class="id">id</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">iv</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IntvSets.html#ISet.add">ISet.add</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">sz</span>) <span class="id">iv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.IntvSets.html#ISet.interval">ISet.interval</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">sz</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">H6</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id0</span> <span class="id">id</span>).<br/>
+ <span class="id">inv</span> <span class="id">H6</span>. <span class="tactic">destruct</span> <span class="id">H3</span>. <span class="tactic">congruence</span>. <span class="tactic">destruct</span> <span class="id">gl</span>!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">iv0</span>|] <span class="id">eqn</span>:<span class="id">NG</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">iv</span>'; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_add">ISet.In_add</a></span>. <span class="tactic">intros</span> [<span class="id">P</span>|<span class="id">P</span>]. <span class="tactic">omega</span>. <span class="id">eelim</span> <span class="id">GL</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">iv</span>'; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_interval">ISet.In_interval</a></span>. <span class="tactic">omega</span>.<br/>
+ <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;Stk&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> <span class="id">H3</span>. <span class="tactic">subst</span> <span class="id">b</span>'. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_add">ISet.In_add</a></span>. <span class="tactic">intros</span> [<span class="id">P</span>|<span class="id">P</span>]. <span class="tactic">omega</span>. <span class="tactic">eapply</span> <span class="id">STK</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Test (conservatively) whether some locations in the range delimited
  by <span class="bracket"><span class="id">p</span></span> and <span class="bracket"><span class="id">sz</span></span> can be live in <span class="bracket"><span class="id">nm</span></span>. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="nmem_contains">nmem_contains</a></span> (<span class="id">nm</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span>) (<span class="id">p</span>: <span class="id"><a href="compcert.backend.ValueDomain.html#aptr">aptr</a></span>) (<span class="id">sz</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm">nm</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk</span> <span class="id">gl</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.ValueDomain.html#Gl">Gl</a></span> <span class="id">id</span> <span class="id">ofs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id">gl</span>!<span class="id">id</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">iv</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.contains">ISet.contains</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>) <span class="id">iv</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.ValueDomain.html#Stk">Stk</a></span> <span class="id">ofs</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#negb">negb</a></span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.contains">ISet.contains</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>) <span class="id">stk</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>  <span class="docright">(* conservative answer  *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nlive_contains">nlive_contains</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">bc</span> <span class="id">b</span> <span class="id">ofs</span> <span class="id">p</span> <span class="id">nm</span> <span class="id">sz</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#genv_match">genv_match</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.sp">sp</a></span> = <span class="id"><a href="compcert.backend.ValueDomain.html#BCstack">BCstack</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.ValueDomain.html#pmatch">pmatch</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#bc">bc</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_contains">nmem_contains</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#p">p</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> &lt;= <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> &lt; <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> + <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span> -&gt;<br/>
&nbsp;&nbsp;~(<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm">nm</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3417')">Proof.</div>
<div class="proofscript" id="proof3417">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_contains">nmem_contains</a></span>; <span class="tactic">intros</span>. <span class="tactic">red</span>; <span class="tactic">intros</span> <span class="id">L</span>; <span class="id">inv</span> <span class="id">L</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
- <span class="comment">(*&nbsp;Gl&nbsp;id&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.ge">ge</a></span> <span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gl</span>!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">iv</span>|] <span class="id">eqn</span>:<span class="id">HG</span>; <span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.contains">ISet.contains</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">sz</span>) <span class="id">iv</span>) <span class="id">eqn</span>:<span class="id">IC</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.contains_spec">ISet.contains_spec</a></span> <span class="kwd">in</span> <span class="id">IC</span>. <span class="id">eelim</span> <span class="id">GL</span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;Stk&nbsp;ofs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.contains">ISet.contains</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned">Ptrofs.unsigned</a></span> <span class="id">ofs</span> + <span class="id">sz</span>) <span class="id">stk</span>) <span class="id">eqn</span>:<span class="id">IC</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.contains_spec">ISet.contains_spec</a></span> <span class="kwd">in</span> <span class="id">IC</span>. <span class="id">eelim</span> <span class="id">STK</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.ValueDomain.html#bc_stack">bc_stack</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Kill all stack locations between 0 and <span class="bracket"><span class="id">sz</span></span>, and mark everything else
  as live.  This reflects the effect of freeing the stack block at
  a <span class="bracket"><span class="id">Ireturn</span></span> or <span class="bracket"><span class="id">Itailcall</span></span> instruction. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="nmem_dead_stack">nmem_dead_stack</a></span> (<span class="id">sz</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>) :=<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.interval">ISet.interval</a></span> 0 <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree.empty">PTree.empty</a></span> <span class="id">_</span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nlive_dead_stack">nlive_dead_stack</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">sz</span> <span class="id">b</span>' <span class="id">i</span>, <span class="id">b</span>' &lt;&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS.sp">sp</a></span> \/ ~(0 &lt;= <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> &lt; <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>) -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_dead_stack">nmem_dead_stack</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sz">sz</a></span>) <span class="id">b</span>' <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3418')">Proof.</div>
<div class="proofscript" id="proof3418">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_interval">ISet.In_interval</a></span>. <span class="tactic">intuition</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">discriminate</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Least upper bound </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="nmem_lub">nmem_lub</a></span> (<span class="id">nm1</span> <span class="id">nm2</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span>) : <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1">nm1</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nm2">nm2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span>, <span class="id">_</span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nm2">nm2</a></span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span> =&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nm1">nm1</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk1</span> <span class="id">gl1</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk2</span> <span class="id">gl2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> (<span class="id"><a href="compcert.lib.IntvSets.html#ISet.inter">ISet.inter</a></span> <span class="id">stk1</span> <span class="id">stk2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PTree.combine">PTree.combine</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> <span class="id">o1</span> <span class="id">o2</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#o1">o1</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#o2">o2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">iv1</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">iv2</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.lib.IntvSets.html#ISet.inter">ISet.inter</a></span> <span class="id">iv1</span> <span class="id">iv2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">gl1</span> <span class="id">gl2</span>)<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nlive_lub_l">nlive_lub_l</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">nm1</span> <span class="id">nm2</span> <span class="id">b</span> <span class="id">i</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1">nm1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_lub">nmem_lub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1">nm1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2">nm2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3419')">Proof.</div>
<div class="proofscript" id="proof3419">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">destruct</span> <span class="id">nm2</span>; <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_inter">ISet.In_inter</a></span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="id">eelim</span> <span class="id">STK</span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gl</span>!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">iv1</span>|] <span class="id">eqn</span>:<span class="id">NG1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gl0</span>!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">iv2</span>|] <span class="id">eqn</span>:<span class="id">NG2</span>; <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_inter">ISet.In_inter</a></span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="id">eelim</span> <span class="id">GL</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nlive_lub_r">nlive_lub_r</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">nm1</span> <span class="id">nm2</span> <span class="id">b</span> <span class="id">i</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2">nm2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_lub">nmem_lub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1">nm1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2">nm2</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#i">i</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3420')">Proof.</div>
<div class="proofscript" id="proof3420">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">destruct</span> <span class="id">nm1</span>; <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_inter">ISet.In_inter</a></span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="id">eelim</span> <span class="id">STK</span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gl0</span>!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">iv1</span>|] <span class="id">eqn</span>:<span class="id">NG1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gl</span>!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">iv2</span>|] <span class="id">eqn</span>:<span class="id">NG2</span>; <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.In_inter">ISet.In_inter</a></span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="id">eelim</span> <span class="id">GL</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Boolean-valued equality test </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="nmem_beq">nmem_beq</a></span> (<span class="id">nm1</span> <span class="id">nm2</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1">nm1</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nm2">nm2</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk1</span> <span class="id">gl1</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NMem">NMem</a></span> <span class="id">stk2</span> <span class="id">gl2</span> =&gt; <span class="id"><a href="compcert.lib.IntvSets.html#ISet.beq">ISet.beq</a></span> <span class="id">stk1</span> <span class="id">stk2</span> &amp;&amp; <span class="id"><a href="compcert.lib.Maps.html#PTree.beq">PTree.beq</a></span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.beq">ISet.beq</a></span> <span class="id">gl1</span> <span class="id">gl2</span><br/>
&nbsp;&nbsp;| <span class="id">_</span>, <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="nmem_beq_sound">nmem_beq_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">nm1</span> <span class="id">nm2</span> <span class="id">b</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#nmem_beq">nmem_beq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1">nm1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2">nm2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm1">nm1</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> &lt;-&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#nm2">nm2</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3421')">Proof.</div>
<div class="proofscript" id="proof3421">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_beq">nmem_beq</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">nm1</span> <span class="kwd">as</span> [ | <span class="id">stk1</span> <span class="id">gl1</span>]; <span class="tactic">destruct</span> <span class="id">nm2</span> <span class="kwd">as</span> [ | <span class="id">stk2</span> <span class="id">gl2</span>]; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
- <span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">L</span>; <span class="id">inv</span> <span class="id">L</span>.<br/>
- <span class="id">InvBooleans</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.beq_spec">ISet.beq_spec</a></span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.beq_correct">PTree.beq_correct</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">intros</span> <span class="id">L</span>; <span class="id">inv</span> <span class="id">L</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
+ <span class="tactic">rewrite</span> &lt;- <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
+ <span class="id">specialize</span> (<span class="id">H1</span> <span class="id">id</span>). <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">destruct</span> <span class="id">gl1</span>!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">iv1</span>|] <span class="id">eqn</span>: <span class="id">NG</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.beq_spec">ISet.beq_spec</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">H1</span>. <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
+ <span class="id">specialize</span> (<span class="id">H1</span> <span class="id">id</span>). <span class="tactic">rewrite</span> <span class="id">H2</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">destruct</span> <span class="id">gl2</span>!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">iv2</span>|] <span class="id">eqn</span>: <span class="id">NG</span>; <span class="tactic">try</span> <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.IntvSets.html#ISet.beq_spec">ISet.beq_spec</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.NeedDomain.html#LOCATIONS">LOCATIONS</a></span>.<br/>
<br/>
<br/>
<h1> The lattice for dataflow analysis </h1>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="NA">NA</a></span> &lt;: <span class="id"><a href="compcert.lib.Lattice.html#SEMILATTICE">SEMILATTICE</a></span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NA.t">t</a></span> := (<span class="id"><a href="compcert.backend.NeedDomain.html#nenv">nenv</a></span> * <span class="id"><a href="compcert.backend.NeedDomain.html#nmem">nmem</a></span>)%<span class="id">type</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NA.eq">eq</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#NA.t">t</a></span>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NE.eq">NE.eq</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sp">sp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> &lt;-&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sp">sp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NA.eq_refl">eq_refl</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3422')">Proof.</div>
<div class="proofscript" id="proof3422">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span>; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.eq_refl">NE.eq_refl</a></span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NA.eq_sym">eq_sym</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3423')">Proof.</div>
<div class="proofscript" id="proof3423">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span>; <span class="tactic">destruct</span> <span class="id">x</span>, <span class="id">y</span>; <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.eq_sym">NE.eq_sym</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NA.eq_trans">eq_trans</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z">z</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z">z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3424')">Proof.</div>
<div class="proofscript" id="proof3424">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span>; <span class="tactic">destruct</span> <span class="id">x</span>, <span class="id">y</span>, <span class="id">z</span>; <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>] [<span class="id">C</span> <span class="id">D</span>]; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.eq_trans">NE.eq_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">B</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NA.beq">beq</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#NA.t">t</a></span>) : <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NE.beq">NE.beq</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) &amp;&amp; <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_beq">nmem_beq</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NA.beq_correct">beq_correct</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NA.beq">beq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3425')">Proof.</div>
<div class="proofscript" id="proof3425">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.beq">beq</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span>; <span class="tactic">destruct</span> <span class="id">x</span>, <span class="id">y</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="id">InvBooleans</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.beq_correct">NE.beq_correct</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_beq_sound">nmem_beq_sound</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NA.ge">ge</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#NA.t">t</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.backend.NeedDomain.html#NE.ge">NE.ge</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">sp</span> <span class="id">b</span> <span class="id">ofs</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sp">sp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#nlive">nlive</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#sp">sp</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#b">b</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#ofs">ofs</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NA.ge_refl">ge_refl</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3426')">Proof.</div>
<div class="proofscript" id="proof3426">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.eq">eq</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span>; <span class="tactic">destruct</span> <span class="id">x</span>, <span class="id">y</span>; <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.ge_refl">NE.ge_refl</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">B</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NA.ge_trans">ge_trans</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> <span class="id">z</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z">z</a></span> -&gt; <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#z">z</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3427')">Proof.</div>
<div class="proofscript" id="proof3427">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span>; <span class="tactic">destruct</span> <span class="id">x</span>, <span class="id">y</span>, <span class="id">z</span>; <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>] [<span class="id">C</span> <span class="id">D</span>]; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.ge_trans">NE.ge_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NA.bot">bot</a></span> : <span class="id"><a href="compcert.backend.NeedDomain.html#NA.t">t</a></span> := (<span class="id"><a href="compcert.backend.NeedDomain.html#NE.bot">NE.bot</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NMemDead">NMemDead</a></span>).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NA.ge_bot">ge_bot</a></span>: <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.bot">bot</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3428')">Proof.</div>
<div class="proofscript" id="proof3428">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NA.bot">bot</a></span>; <span class="tactic">destruct</span> <span class="id">x</span>; <span class="tactic">simpl</span>. <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.ge_bot">NE.ge_bot</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
&nbsp;&nbsp;<span class="kwd">Definition</span> <span class="id"><a name="NA.lub">lub</a></span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="compcert.backend.NeedDomain.html#NA.t">t</a></span>) : <span class="id"><a href="compcert.backend.NeedDomain.html#NA.t">t</a></span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.NeedDomain.html#NE.lub">NE.lub</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>), <span class="id"><a href="compcert.backend.NeedDomain.html#nmem_lub">nmem_lub</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>)).<br/>
<br/>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NA.ge_lub_left">ge_lub_left</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#NA.lub">lub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3429')">Proof.</div>
<div class="proofscript" id="proof3429">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span>; <span class="tactic">destruct</span> <span class="id">x</span>, <span class="id">y</span>; <span class="tactic">simpl</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.ge_lub_left">NE.ge_lub_left</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive_lub_l">nlive_lub_l</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
&nbsp;&nbsp;<span class="kwd">Lemma</span> <span class="id"><a name="NA.ge_lub_right">ge_lub_right</a></span>: <span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span>, <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span> (<span class="id"><a href="compcert.backend.NeedDomain.html#NA.lub">lub</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#x">x</a></span> <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>) <span class="id"><a href="compcert.backend.NeedDomain.html#y">y</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3430')">Proof.</div>
<div class="proofscript" id="proof3430">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA.ge">ge</a></span>; <span class="tactic">destruct</span> <span class="id">x</span>, <span class="id">y</span>; <span class="tactic">simpl</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NE.ge_lub_right">NE.ge_lub_right</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.backend.NeedDomain.html#nlive_lub_r">nlive_lub_r</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.backend.NeedDomain.html#NA">NA</a></span>.<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
