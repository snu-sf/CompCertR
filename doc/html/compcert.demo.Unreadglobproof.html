
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Unreadglobproof</title>
<meta name="description" content="Documentation of Coq module Unreadglobproof" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Unreadglobproof</h1>
<div class="coq">
<br/>
<div class="doc">Elimination of unreferenced static definitions </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSets.html">FSets</a></span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span> <span class="id"><a href="compcert.lib.Maps.html">Maps</a></span> <span class="id"><a href="compcert.lib.Ordered.html">Ordered</a></span> <span class="id"><a href="compcert.lib.Iteration.html">Iteration</a></span> <span class="id"><a href="compcert.common.Errors.html">Errors</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.AST.html">AST</a></span> <span class="id"><a href="compcert.common.Linking.html">Linking</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span> <span class="id"><a href="compcert.common.Values.html">Values</a></span> <span class="id"><a href="compcert.common.Memory.html">Memory</a></span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span> <span class="id"><a href="compcert.common.Events.html">Events</a></span> <span class="id"><a href="compcert.common.Smallstep.html">Smallstep</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.x86.Op.html">Op</a></span> <span class="id"><a href="compcert.backend.Registers.html">Registers</a></span> <span class="id"><a href="compcert.backend.RTL.html">RTL</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.demo.Unreadglob.html">Unreadglob</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.sflib.html">sflib</a></span>.<br/>
<span class="kwd">Require</span> <span class="id"><a href="compcert.demo.SimMemInjInv.html">SimMemInjInv</a></span>.<br/>
<br/>
<span class="kwd">Module</span> <span class="id"><a name="ISF">ISF</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSetFacts.html#Facts">FSetFacts.Facts</a></span>(<span class="id"><a href="compcert.demo.Unreadglob.html#IS">IS</a></span>).<br/>
<span class="kwd">Module</span> <span class="id"><a name="ISP">ISP</a></span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.FSets.FSetProperties.html#Properties">FSetProperties.Properties</a></span>(<span class="id"><a href="compcert.demo.Unreadglob.html#IS">IS</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="IS_to_idset">IS_to_idset</a></span> (<span class="id">used</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#IS.t">IS.t</a></span>): <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> := <span class="kwd">fun</span> <span class="id">elt</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#elt">elt</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span>.<br/>
<span class="kwd">Hint</span> <span class="kwd">Unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#IS_to_idset">IS_to_idset</a></span>.<br/>
<span class="kwd">Coercion</span> <span class="id">IS_to_idset</span>: <span class="id">IS.t</span> &gt;-&gt; <span class="id">Funclass</span>.<br/>
<br/>
<h1> Relational specification of the transformation </h1>
<br/>
<div class="doc">The transformed program is obtained from the original program </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="match_prog_1">match_prog_1</a></span> (<span class="id">used</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) (<span class="id">p</span> <span class="id">tp</span>: <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) : <span class="kwd">Prop</span> := {<br/>
&nbsp;&nbsp;<span class="id"><a name="match_prog_main">match_prog_main</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>) = <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a name="match_prog_public">match_prog_public</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>) = <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a name="match_prog_def">match_prog_def</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span>)!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="kwd">if</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="kwd">then</span> (<span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span>) ((<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>)!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>)) <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="match_prog_unique">match_prog_unique</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span>)<br/>
}.<br/>
<br/>
<div class="doc">This set <span class="bracket"><span class="id">u</span></span> (as "used") must be closed under references, and </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ref_function">ref_function</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.backend.RTL.html#function">function</a></span>) (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">pc</span> <span class="id">i</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)!<span class="id"><a href="compcert.demo.Unreadglobproof.html#pc">pc</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#ref_instruction">ref_instruction</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ref_fundef">ref_fundef</a></span> (<span class="id">fd</span>: <span class="id"><a href="compcert.backend.RTL.html#fundef">fundef</a></span>) (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#fd">fd</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id">f</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_function">ref_function</a></span> <span class="id">f</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> | <span class="id"><a href="compcert.common.AST.html#External">External</a></span> <span class="id">ef</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span> <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ref_init">ref_init</a></span> (<span class="id">il</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.common.AST.html#init_data">init_data</a></span>) (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">ofs</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ofs">ofs</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#il">il</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="ref_def">ref_def</a></span> (<span class="id">gd</span>: <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">fundef</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) (<span class="id">id</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> <span class="id">fd</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_fundef">ref_fundef</a></span> <span class="id">fd</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">gv</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_init">ref_init</a></span> <span class="id">gv</span>.(<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="valid_used_set">valid_used_set</a></span> (<span class="id">p</span>: <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) (<span class="id">used</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>) : <span class="kwd">Prop</span> := {<br/>
&nbsp;&nbsp;<span class="id"><a name="used_closed">used_closed</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">gd</span> <span class="id">id</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt; (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>)!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> <span class="id">id</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> <span class="id">id</span>';<br/>
&nbsp;&nbsp;<span class="id"><a name="used_main">used_main</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a name="used_public">used_public</a></span>: <span class="kwd">forall</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>) -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="used_defined">used_defined</a></span>: <span class="kwd">forall</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>) \/ <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>)<br/>
}.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="used_set">used_set</a></span> (<span class="id">tp</span>: <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>): <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">id</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.eq_dec">Pos.eq_dec</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>) :: (<span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span>)))<br/>
.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_prog">match_prog</a></span> (<span class="id">p</span> <span class="id">tp</span>: <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">used</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> /\ <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_1">match_prog_1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span> /\ <span class="id"><a href="compcert.demo.Unreadglob.html#check_program">check_program</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ &lt;&lt;<span class="id">EXACT</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> = <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_set">used_set</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span>&gt;&gt;.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="match_prog_weak">match_prog_weak</a></span> (<span class="id">p</span> <span class="id">tp</span>: <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">used</span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> /\ <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_1">match_prog_1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span> /\ <span class="id"><a href="compcert.demo.Unreadglob.html#check_program">check_program</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_prog_weakening">match_prog_weakening</a></span><br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog">match_prog</a></span> &lt;2= <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_weak">match_prog_weak</a></span><br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3548')">Proof.</div>
<div class="proofscript" id="proof3548">
&nbsp;&nbsp;<span class="id">i</span>. <span class="id">inv</span> <span class="id">PR</span>. <span class="id">des</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Properties of the static analysis </h1>
<br/>
<div class="doc">Monotonic evolution of the workset. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="workset_incl">workset_incl</a></span> (<span class="id">w1</span> <span class="id">w2</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#workset">workset</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="workset_incl_intro">workset_incl_intro</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">SEEN</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#IS.Subset">IS.Subset</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w1">w1</a></span>.(<span class="id"><a href="compcert.demo.Unreadglob.html#w_seen">w_seen</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#w2">w2</a></span>.(<span class="id"><a href="compcert.demo.Unreadglob.html#w_seen">w_seen</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TODO</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">List.incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w1">w1</a></span>.(<span class="id"><a href="compcert.demo.Unreadglob.html#w_todo">w_todo</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#w2">w2</a></span>.(<span class="id"><a href="compcert.demo.Unreadglob.html#w_todo">w_todo</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TRACK</span>: <span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w2">w2</a></span>.(<span class="id"><a href="compcert.demo.Unreadglob.html#w_seen">w_seen</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w1">w1</a></span>.(<span class="id"><a href="compcert.demo.Unreadglob.html#w_seen">w_seen</a></span>) \/ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w2">w2</a></span>.(<span class="id"><a href="compcert.demo.Unreadglob.html#w_todo">w_todo</a></span>)),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w1">w1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w2">w2</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="seen_workset_incl">seen_workset_incl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">w1</span> <span class="id">w2</span> <span class="id">id</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w1">w1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w2">w2</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w1">w1</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w2">w2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3549')">Proof.</div>
<div class="proofscript" id="proof3549">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="workset_incl_refl">workset_incl_refl</a></span>: <span class="kwd">forall</span> <span class="id">w</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3550')">Proof.</div>
<div class="proofscript" id="proof3550">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">split</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>. <span class="tactic">red</span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="workset_incl_trans">workset_incl_trans</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">w1</span> <span class="id">w2</span> <span class="id">w3</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w1">w1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w2">w2</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w2">w2</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w3">w3</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w1">w1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w3">w3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3551')">Proof.</div>
<div class="proofscript" id="proof3551">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>, <span class="id">H0</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">edestruct</span> <span class="id">TRACK0</span>; <span class="tactic">eauto</span>. <span class="id">edestruct</span> <span class="id">TRACK</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_workset_incl">add_workset_incl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">w</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#add_workset">add_workset</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3552')">Proof.</div>
<div class="proofscript" id="proof3552">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#add_workset">add_workset</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">w</span>) <span class="id">eqn</span>:<span class="id">MEM</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
- <span class="tactic">split</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglob.html#IS.add_2">IS.add_2</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">red</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> <span class="id">id0</span>); <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglob.html#IS.add_3">IS.add_3</a></span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="addlist_workset_incl">addlist_workset_incl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">w</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#addlist_workset">addlist_workset</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3553')">Proof.</div>
<div class="proofscript" id="proof3553">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_trans">workset_incl_trans</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#add_workset_incl">add_workset_incl</a></span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_ref_function_incl">add_ref_function_incl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">w</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_function">add_ref_function</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3554')">Proof.</div>
<div class="proofscript" id="proof3554">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_function">add_ref_function</a></span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.fold_rec">PTree_Properties.fold_rec</a></span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_trans">workset_incl_trans</a></span> <span class="kwd">with</span> <span class="id">a</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_instruction">add_ref_instruction</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#addlist_workset_incl">addlist_workset_incl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_ref_globvar_incl">add_ref_globvar_incl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">gv</span> <span class="id">w</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_globvar">add_ref_globvar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gv">gv</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3555')">Proof.</div>
<div class="proofscript" id="proof3555">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_globvar">add_ref_globvar</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">revert</span> <span class="id">w</span>. <span class="tactic">induction</span> (<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">gv</span>); <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_trans">workset_incl_trans</a></span>; [ | <span class="tactic">eauto</span> ].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_init_data">add_ref_init_data</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; (<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_refl">workset_incl_refl</a></span> || <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#add_workset_incl">add_workset_incl</a></span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="add_ref_definition_incl">add_ref_definition_incl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pm</span> <span class="id">id</span> <span class="id">w</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl">workset_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_definition">add_ref_definition</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#pm">pm</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3556')">Proof.</div>
<div class="proofscript" id="proof3556">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_definition">add_ref_definition</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">pm</span>!<span class="id">id</span>) <span class="kwd">as</span> [[[] | ? ] | ].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#add_ref_function_incl">add_ref_function_incl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#add_ref_globvar_incl">add_ref_globvar_incl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="initial_workset_incl">initial_workset_incl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl">workset_incl</a></span> {| <span class="id"><a href="compcert.demo.Unreadglob.html#mk_workset">w_seen</a></span> := <span class="id"><a href="compcert.demo.Unreadglob.html#IS.empty">IS.empty</a></span>; <span class="id">w_todo</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> |} (<span class="id"><a href="compcert.demo.Unreadglob.html#initial_workset">initial_workset</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3557')">Proof.</div>
<div class="proofscript" id="proof3557">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#initial_workset">initial_workset</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_trans">workset_incl_trans</a></span>. 2: <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#add_workset_incl">add_workset_incl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> {| <span class="id"><a href="compcert.demo.Unreadglob.html#mk_workset">w_seen</a></span> := <span class="id"><a href="compcert.demo.Unreadglob.html#IS.empty">IS.empty</a></span>; <span class="id">w_todo</span> := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> |}. <span class="tactic">induction</span> (<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id">p</span>); <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_refl">workset_incl_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_incl_trans">workset_incl_trans</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#add_workset_incl">add_workset_incl</a></span>. <span class="tactic">apply</span> <span class="id">IHl</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Soundness properties for functions that add identifiers to the workset </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="seen_add_workset">seen_add_workset</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> (<span class="id">w</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#workset">workset</a></span>), <span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#add_workset">add_workset</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3558')">Proof.</div>
<div class="proofscript" id="proof3558">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#add_workset">add_workset</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">w</span>) <span class="id">eqn</span>:<span class="id">MEM</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem_2">IS.mem_2</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglob.html#IS.add_1">IS.add_1</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="seen_addlist_workset">seen_addlist_workset</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">l</span> (<span class="id">w</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#workset">workset</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#addlist_workset">addlist_workset</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3559')">Proof.</div>
<div class="proofscript" id="proof3559">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">subst</span> <span class="id">a</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_workset_incl">seen_workset_incl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#addlist_workset_incl">addlist_workset_incl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_add_workset">seen_add_workset</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="seen_add_ref_function">seen_add_ref_function</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">f</span> <span class="id">w</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_function">ref_function</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_function">add_ref_function</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3560')">Proof.</div>
<div class="proofscript" id="proof3560">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">w</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_function">ref_function</a></span>, <span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_function">add_ref_function</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.fold_rec">PTree_Properties.fold_rec</a></span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (<span class="id">pc</span> &amp; <span class="id">i</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">auto</span>. <span class="id">exists</span> <span class="id">pc</span>, <span class="id">i</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> (<span class="id">pc</span> &amp; <span class="id">i</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span> <span class="kwd">in</span> <span class="id">A</span>; <span class="tactic">discriminate</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">H2</span> <span class="kwd">as</span> (<span class="id">pc</span> &amp; <span class="id">i</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> <span class="id">A</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">pc</span> <span class="id">k</span>).<br/>
&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">A</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_instruction">add_ref_instruction</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_addlist_workset">seen_addlist_workset</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_instruction">add_ref_instruction</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_workset_incl">seen_workset_incl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#addlist_workset_incl">addlist_workset_incl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H1</span>. <span class="id">exists</span> <span class="id">pc</span>, <span class="id">i</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="seen_add_ref_definition">seen_add_ref_definition</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">pm</span> <span class="id">id</span> <span class="id">gd</span> <span class="id">id</span>' <span class="id">w</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#pm">pm</a></span>!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> <span class="id">id</span>' -&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id">id</span>' (<span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_definition">add_ref_definition</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#pm">pm</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3561')">Proof.</div>
<div class="proofscript" id="proof3561">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_definition">add_ref_definition</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">destruct</span> <span class="id">gd</span> <span class="kwd">as</span> [[<span class="id">f</span>|<span class="id">ef</span>]|<span class="id">gv</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_add_ref_function">seen_add_ref_function</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">ofs</span> &amp; <span class="id">IN</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_globvar">add_ref_globvar</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">l</span> (<span class="id">w</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#workset">workset</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id">id</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span> \/ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.common.AST.html#Init_addrof">Init_addrof</a></span> <span class="id">id</span>' <span class="id">ofs</span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id">id</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id"><a href="compcert.demo.Unreadglob.html#add_ref_init_data">add_ref_init_data</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>)).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHl</span>. <span class="tactic">intuition</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_workset_incl">seen_workset_incl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#add_workset_incl">add_workset_incl</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>; <span class="id">left</span>; <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_add_workset">seen_add_workset</a></span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="seen_main_initial_workset">seen_main_initial_workset</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span>, <span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>) (<span class="id"><a href="compcert.demo.Unreadglob.html#initial_workset">initial_workset</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3562')">Proof.</div>
<div class="proofscript" id="proof3562">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_add_workset">seen_add_workset</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="seen_public_initial_workset">seen_public_initial_workset</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">id</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>) -&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#initial_workset">initial_workset</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3563')">Proof.</div>
<div class="proofscript" id="proof3563">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#initial_workset">initial_workset</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_workset_incl">seen_workset_incl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#add_workset_incl">add_workset_incl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">l</span> (<span class="id">w</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#workset">workset</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id">id</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span> \/ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">id</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id">id</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> (<span class="kwd">fun</span> <span class="id">w</span> <span class="id">id</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#add_workset">add_workset</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>)).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHl</span>. <span class="tactic">intuition</span> <span class="tactic">auto</span>; <span class="id">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_workset_incl">seen_workset_incl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#add_workset_incl">add_workset_incl</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">a</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_add_workset">seen_add_workset</a></span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Correctness of the transformation with respect to the relational specification </h1>
<br/>
<div class="doc">Correctness of the dependency graph traversal. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ANALYSIS">ANALYSIS</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="ANALYSIS.p">p</a></span>: <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="kwd">Let</span> <span class="id"><a name="ANALYSIS.pm">pm</a></span> := <span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.p">p</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="workset_invariant">workset_invariant</a></span> (<span class="id">w</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#workset">workset</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">gd</span> <span class="id">id</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span> -&gt; ~<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">List.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#w_todo">w_todo</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>) -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.pm">pm</a></span>!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> <span class="id">id</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id">id</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="used_set_closed">used_set_closed</a></span> (<span class="id">u</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#IS.t">IS.t</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">gd</span> <span class="id">id</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.pm">pm</a></span>!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> <span class="id">id</span>' -&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id">id</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="iter_step_invariant">iter_step_invariant</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">w</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_invariant">workset_invariant</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.demo.Unreadglob.html#iter_step">iter_step</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.pm">pm</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inl">inl</a></span> <span class="id">u</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_set_closed">used_set_closed</a></span> <span class="id">u</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inr">inr</a></span> <span class="id">w</span>' =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_invariant">workset_invariant</a></span> <span class="id">w</span>'<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3564')">Proof.</div>
<div class="proofscript" id="proof3564">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#iter_step">iter_step</a></span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_invariant">workset_invariant</a></span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_set_closed">used_set_closed</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#w_todo">w_todo</a></span> <span class="id">w</span>) <span class="kwd">as</span> [ | <span class="id">id</span> <span class="id">rem</span> ]; <span class="tactic">intros</span>.<br/>
- <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">set</span> (<span class="id">w</span>' := {| <span class="id"><a href="compcert.demo.Unreadglob.html#mk_workset">w_seen</a></span> := <span class="id">w</span>.(<span class="id"><a href="compcert.demo.Unreadglob.html#w_seen">w_seen</a></span>); <span class="id">w_todo</span> := <span class="id">rem</span> |}) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#add_ref_definition_incl">add_ref_definition_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.pm">pm</a></span> <span class="id">id</span> <span class="id">w</span>').<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> <span class="id">id0</span>).<br/>
&nbsp;&nbsp;+ <span class="tactic">subst</span> <span class="id">id0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_add_ref_definition">seen_add_ref_definition</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">TRACK</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">SEEN</span>. <span class="tactic">eapply</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span> (~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">id0</span> <span class="id">rem</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">change</span> <span class="id">rem</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#w_todo">w_todo</a></span> <span class="id">w</span>'). <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">H1</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="used_globals_sound">used_globals_sound</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">u</span>, <span class="id"><a href="compcert.demo.Unreadglob.html#used_globals">used_globals</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.pm">pm</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_set_closed">used_set_closed</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3565')">Proof.</div>
<div class="proofscript" id="proof3565">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#used_globals">used_globals</a></span>; <span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Iteration.html#PrimIter.iterate_prop">PrimIter.iterate_prop</a></span> <span class="kwd">with</span> (<span class="id">A</span> := <span class="id"><a href="compcert.demo.Unreadglob.html#workset">workset</a></span>) (<span class="id">P</span> := <span class="id"><a href="compcert.demo.Unreadglobproof.html#workset_invariant">workset_invariant</a></span>); <span class="tactic">eauto</span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#iter_step_invariant">iter_step_invariant</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#initial_workset_incl">initial_workset_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.p">p</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="id">edestruct</span> <span class="id">TRACK</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H4</span>. <span class="id">eelim</span> <span class="id"><a href="compcert.demo.Unreadglob.html#IS.empty_1">IS.empty_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">contradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="used_globals_incl">used_globals_incl</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">u</span>, <span class="id"><a href="compcert.demo.Unreadglob.html#used_globals">used_globals</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.pm">pm</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#IS.Subset">IS.Subset</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#initial_workset">initial_workset</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.p">p</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3566')">Proof.</div>
<div class="proofscript" id="proof3566">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#used_globals">used_globals</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Iteration.html#PrimIter.iterate_prop">PrimIter.iterate_prop</a></span> <span class="kwd">with</span> (<span class="id">P</span> := <span class="kwd">fun</span> (<span class="id">w</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#workset">workset</a></span>) =&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#IS.Subset">IS.Subset</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#initial_workset">initial_workset</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.p">p</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#w">w</a></span>); <span class="tactic">eauto</span>.<br/>
- <span class="id">fold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.pm">pm</a></span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#iter_step">iter_step</a></span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#w_todo">w_todo</a></span> <span class="id">a</span>) <span class="kwd">as</span> [ | <span class="id">id</span> <span class="id">rem</span> ].<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#add_ref_definition_incl">add_ref_definition_incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.pm">pm</a></span> <span class="id">id</span> {| <span class="id"><a href="compcert.demo.Unreadglob.html#mk_workset">w_seen</a></span> := <span class="id">a</span>; <span class="id">w_todo</span> := <span class="id">rem</span> |}).<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">red</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Corollary</span> <span class="id"><a name="used_globals_valid">used_globals_valid</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">u</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#used_globals">used_globals</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.pm">pm</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#IS.for_all">IS.for_all</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#global_defined">global_defined</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.pm">pm</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3567')">Proof.</div>
<div class="proofscript" id="proof3567">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#mem_iff">ISF.mem_iff</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_globals_sound">used_globals_sound</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#mem_iff">ISF.mem_iff</a></span>. <span class="tactic">eauto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#mem_iff">ISF.mem_iff</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_globals_incl">used_globals_incl</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_main_initial_workset">seen_main_initial_workset</a></span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#mem_iff">ISF.mem_iff</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_globals_incl">used_globals_incl</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#seen_public_initial_workset">seen_public_initial_workset</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#for_all_iff">ISF.for_all_iff</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
+ <span class="tactic">red</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#mem_iff">ISF.mem_iff</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">apply</span> <span class="id">H0</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#global_defined">global_defined</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS.pm">pm</a></span>!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">g</span>|] <span class="id">eqn</span>:<span class="id">E</span>.<br/>
* <span class="id">left</span>. <span class="id">change</span> <span class="id">id</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id</span>,<span class="id">g</span>)). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap</a></span>; <span class="tactic">auto</span>.<br/>
* <span class="id">InvBooleans</span>; <span class="tactic">auto</span>.<br/>
+ <span class="id">hnf</span>. <span class="tactic">simpl</span>; <span class="tactic">intros</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ANALYSIS">ANALYSIS</a></span>.<br/>
<br/>
<div class="doc">Properties of the elimination of unused global definitions. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="TRANSFORMATION">TRANSFORMATION</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSFORMATION.p">p</a></span>: <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="TRANSFORMATION.used">used</a></span>: <span class="id"><a href="compcert.demo.Unreadglob.html#IS.t">IS.t</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="TRANSFORMATION.add_def">add_def</a></span> (<span class="id">m</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#prog_map">prog_map</a></span>) <span class="id">idg</span> := <span class="id"><a href="compcert.lib.Maps.html#PTree.set">PTree.set</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#idg">idg</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#idg">idg</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="filter_globdefs_accu">filter_globdefs_accu</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">defs</span> <span class="id">accu1</span> <span class="id">accu2</span> <span class="id">u</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#accu1">accu1</a></span> ++ <span class="id"><a href="compcert.demo.Unreadglobproof.html#accu2">accu2</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs">defs</a></span> = <span class="id"><a href="compcert.demo.Unreadglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#accu1">accu1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs">defs</a></span> ++ <span class="id"><a href="compcert.demo.Unreadglobproof.html#accu2">accu2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3568')">Proof.</div>
<div class="proofscript" id="proof3568">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">defs</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span> <span class="kwd">as</span> [<span class="id">id</span> <span class="id">gd</span>]. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">u</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id">IHdefs</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="filter_globdefs_nil">filter_globdefs_nil</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">u</span> <span class="id">accu</span> <span class="id">defs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#accu">accu</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs">defs</a></span> = <span class="id"><a href="compcert.demo.Unreadglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs">defs</a></span> ++ <span class="id"><a href="compcert.demo.Unreadglobproof.html#accu">accu</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3569')">Proof.</div>
<div class="proofscript" id="proof3569">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_accu">filter_globdefs_accu</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="filter_globdefs_map_1">filter_globdefs_map_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">l</span> <span class="id">u</span> <span class="id">m1</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#m1">m1</a></span>!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#TRANSFORMATION.add_def">add_def</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#m1">m1</a></span>)!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3570')">Proof.</div>
<div class="proofscript" id="proof3570">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span> <span class="kwd">as</span> [ | [<span class="id">id1</span> <span class="id">gd1</span>] <span class="id">l</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id">id1</span> <span class="id">u</span>) <span class="id">eqn</span>:<span class="id">MEM</span>.<br/>
+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_nil">filter_globdefs_nil</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left_app">fold_left_app</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#add_def">add_def</a></span> <span class="tactic">at</span> 1. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">eapply</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#remove_b">ISF.remove_b</a></span>. <span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">eapply</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="filter_globdefs_map_2">filter_globdefs_map_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">l</span> <span class="id">u</span> <span class="id">m1</span> <span class="id">m2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#m1">m1</a></span>!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="compcert.demo.Unreadglobproof.html#m2">m2</a></span>!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#TRANSFORMATION.add_def">add_def</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#m1">m1</a></span>)!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left">fold_left</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#TRANSFORMATION.add_def">add_def</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">List.rev</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#m2">m2</a></span>)!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3571')">Proof.</div>
<div class="proofscript" id="proof3571">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span> <span class="kwd">as</span> [ | [<span class="id">id1</span> <span class="id">gd1</span>] <span class="id">l</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left_app">fold_left_app</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id">id1</span> <span class="id">u</span>) <span class="id">eqn</span>:<span class="id">MEM</span>.<br/>
+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_nil">filter_globdefs_nil</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left_app">fold_left_app</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#add_def">add_def</a></span> <span class="tactic">at</span> 1 3. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">id</span> <span class="id">id1</span>). <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem_1">IS.mem_1</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglob.html#IS.remove_2">IS.remove_2</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem_2">IS.mem_2</a></span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#add_def">add_def</a></span> <span class="tactic">at</span> 2. <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gso">PTree.gso</a></span> <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">apply</span> <span class="id">IHl</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="filter_globdefs_map">filter_globdefs_map</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">u</span> <span class="id">defs</span>,<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.of_list">PTree_Properties.of_list</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">List.rev</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs">defs</a></span>)))! <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> =<br/>
&nbsp;&nbsp;<span class="kwd">if</span> <span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> <span class="kwd">then</span> (<span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.of_list">PTree_Properties.of_list</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs">defs</a></span>)!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="kwd">else</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3572')">Proof.</div>
<div class="proofscript" id="proof3572">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.of_list">PTree_Properties.of_list</a></span>. <span class="id">fold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#prog_map">prog_map</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elt">PTree.elt</a></span>. <span class="id">fold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#TRANSFORMATION.add_def">add_def</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id">id</span> <span class="id">u</span>) <span class="id">eqn</span>:<span class="id">MEM</span>.<br/>
- <span class="id">erewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_map_2">filter_globdefs_map_2</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev_involutive">List.rev_involutive</a></span>. <span class="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_map_1">filter_globdefs_map_1</a></span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="filter_globdefs_domain">filter_globdefs_domain</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">l</span> <span class="id">u</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span>)) -&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3573')">Proof.</div>
<div class="proofscript" id="proof3573">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span> <span class="kwd">as</span> [ | [<span class="id">id1</span> <span class="id">gd1</span>] <span class="id">l</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">tauto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id">id1</span> <span class="id">u</span>) <span class="id">eqn</span>:<span class="id">MEM</span>.<br/>
+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_nil">filter_globdefs_nil</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#remove_iff">ISF.remove_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>; <span class="tactic">try</span> <span class="tactic">tauto</span>. <span class="tactic">subst</span> <span class="id">id1</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem_2">IS.mem_2</a></span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">apply</span> <span class="id">IHl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="filter_globdefs_image">filter_globdefs_image</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">l</span> <span class="id">u</span> <span class="id">kept</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#IS.In">IS.In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span>) -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#map_globdefs">map_globdefs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span>))).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3574')">Proof.</div>
<div class="proofscript" id="proof3574">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span> <span class="kwd">as</span> [ | [<span class="id">id1</span> <span class="id">gd1</span>] <span class="id">l</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">tauto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id">id1</span> <span class="id">u</span>) <span class="id">eqn</span>:<span class="id">MEM</span>.<br/>
+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_nil">filter_globdefs_nil</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>. <span class="tactic">destruct</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.eq_dec">Pos.eq_dec</a></span> <span class="id">id1</span> <span class="id">id</span>).<br/>
&nbsp;&nbsp;* <span class="id">clarify</span>. <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;* <span class="id">des</span>; <span class="id">clarify</span>. <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#remove_iff">ISF.remove_iff</a></span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#not_mem_iff">ISF.not_mem_iff</a></span> <span class="kwd">in</span> <span class="id">MEM</span>. <span class="id">des</span>; <span class="id">clarify</span>. <span class="tactic">eapply</span> <span class="id">IHl</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="filter_globdefs_unique_names">filter_globdefs_unique_names</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">l</span> <span class="id">u</span>, <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet">list_norepet</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#u">u</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span>)).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3575')">Proof.</div>
<div class="proofscript" id="proof3575">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span> <span class="kwd">as</span> [ | [<span class="id">id1</span> <span class="id">gd1</span>] <span class="id">l</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">constructor</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem">IS.mem</a></span> <span class="id">id1</span> <span class="id">u</span>) <span class="id">eqn</span>:<span class="id">MEM</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_nil">filter_globdefs_nil</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_app">map_app</a></span>. <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_norepet_append">list_norepet_append</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">simpl</span>; <span class="tactic">tauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">tauto</span>. <span class="tactic">subst</span> <span class="id">y</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_domain">filter_globdefs_domain</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#remove_iff">ISF.remove_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">intuition</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#TRANSFORMATION">TRANSFORMATION</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="PTree_Properties_of_list_map">PTree_Properties_of_list_map</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">X</span> <span class="id">Y</span> (<span class="id">f</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#X">X</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#Y">Y</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">xs</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elt">PTree.elt</a></span> * <span class="id"><a href="compcert.demo.Unreadglobproof.html#X">X</a></span>))<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.of_list">PTree_Properties.of_list</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map">map</a></span> (<span class="kwd">fun</span> <span class="id">idx</span> =&gt; (<span class="id"><a href="compcert.demo.Unreadglobproof.html#idx">idx</a></span>.(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>), (<span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#idx">idx</a></span>.(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span>)))) <span class="id"><a href="compcert.demo.Unreadglobproof.html#xs">xs</a></span>)) ! <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.lib.Maps.html#PTree.map">PTree.map</a></span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">x</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#x">x</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.of_list">PTree_Properties.of_list</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#xs">xs</a></span>)) ! <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span><br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3576')">Proof.</div>
<div class="proofscript" id="proof3576">
&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.of_list">PTree_Properties.of_list</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gmap">PTree.gmap</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- ! <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left_rev_right">fold_left_rev_right</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_rev">map_rev</a></span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;unfold&nbsp;PTree.elt,&nbsp;ident.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">abstr</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> <span class="id">xs</span>) <span class="id">ixs</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">ixs</span>; <span class="id">ii</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#PTree.gempty">PTree.gempty</a></span>. <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.lib.Maps.html#PTree.gsspec">PTree.gsspec</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">des_ifs</span>; <span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="transf_program_match">transf_program_match</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">tp</span>, <span class="id"><a href="compcert.demo.Unreadglob.html#transform_program">transform_program</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> = <span class="id"><a href="compcert.common.Errors.html#OK">OK</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog">match_prog</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3577')">Proof.</div>
<div class="proofscript" id="proof3577">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#transform_program">transform_program</a></span>; <span class="tactic">intros</span> <span class="id">p</span> <span class="id">tp</span> <span class="id">TR</span>. <span class="tactic">set</span> (<span class="id">pm</span> := <span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p</span>) <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#check_program">check_program</a></span> <span class="id">p</span>) <span class="id">eqn</span>:<span class="id">CHK</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#used_globals">used_globals</a></span> <span class="id">p</span> <span class="id">pm</span>) <span class="kwd">as</span> [<span class="id">u</span>|] <span class="id">eqn</span>:<span class="id">U</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#IS.for_all">IS.for_all</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#global_defined">global_defined</a></span> <span class="id">p</span> <span class="id">pm</span>) <span class="id">u</span>) <span class="id">eqn</span>:<span class="id">DEF</span>; <span class="id">inv</span> <span class="id">TR</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">u</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_globals_valid">used_globals_valid</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">MATCH</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_1">match_prog_1</a></span> <span class="id">u</span> <span class="id">p</span> (<span class="id"><a href="compcert.common.AST.html#mkprogram">mkprogram</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id">u</span> [] (<span class="id"><a href="compcert.demo.Unreadglob.html#map_globdefs">map_globdefs</a></span> <span class="id">u</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span> <span class="id">p</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id">p</span>) (<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id">p</span>))).<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#map_globdefs">map_globdefs</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#map_rev">map_rev</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_map">filter_globdefs_map</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#IS_to_idset">IS_to_idset</a></span>. <span class="id">des_ifs</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#PTree_Properties_of_list_map">PTree_Properties_of_list_map</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gmap">PTree.gmap</a></span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_unique_names">filter_globdefs_unique_names</a></span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_set">used_set</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_globals_valid">used_globals_valid</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">VAL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">r</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#functional_extensionality">Axioms.functional_extensionality</a></span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCH</span>. <span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">match_prog_def0</span> <span class="id">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#filter_globdefs">filter_globdefs</a></span> <span class="id">u</span> [] (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span> <span class="id">p</span>))) <span class="kwd">as</span> <span class="id">tdefs</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">u</span> <span class="id">into</span> <span class="id">kept</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#for_all_iff">ISF.for_all_iff</a></span> <span class="kwd">in</span> <span class="id">DEF</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>; <span class="id">ss</span>; <span class="id">clarify</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">r</span> <span class="kwd">in</span> <span class="id">DEF</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#global_defined">global_defined</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">pm</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">kept</span> <span class="id">x</span>) <span class="id">eqn</span>:<span class="id">T</span>; <span class="id">des_sumbool</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#IS_to_idset">IS_to_idset</a></span> <span class="kwd">in</span> *; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ii</span>. <span class="id">des</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">inv</span> <span class="id">VAL</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_domain">filter_globdefs_domain</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.demo.Unreadglobproof.html#not_mem_iff">ISF.not_mem_iff</a></span> <span class="kwd">in</span> *; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.PArith.BinPos.html#Pos.eq_dec">Pos.eq_dec</a></span> <span class="id">x</span> <span class="id">p</span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">clarify</span>. <span class="tactic">tauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_globdefs_image">filter_globdefs_image</a></span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#mem_iff">ISF.mem_iff</a></span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id">DEF</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#mem_iff">ISF.mem_iff</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">DEFX</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.in_of_list">PTree_Properties.in_of_list</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">Heq</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span>. <span class="id">eexists</span> (<span class="id">_</span>, <span class="id">_</span>). <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id">des_sumbool</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<h1> Semantic preservation </h1>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SOUNDNESS">SOUNDNESS</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SOUNDNESS.p">p</a></span>: <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SOUNDNESS.tp">tp</a></span>: <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SOUNDNESS.kept">kept</a></span>: <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SOUNDNESS.USED_VALID">USED_VALID</a></span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SOUNDNESS.TRANSF">TRANSF</a></span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_1">match_prog_1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>.<br/>
<span class="kwd">Let</span> <span class="id"><a name="SOUNDNESS.pm">pm</a></span> := <span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SOUNDNESS.CORELEMMA">CORELEMMA</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> (<span class="id"><a name="SOUNDNESS.CORELEMMA.se">se</a></span> <span class="id"><a name="SOUNDNESS.CORELEMMA.tse">tse</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>).<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SOUNDNESS.CORELEMMA.ge">ge</a></span> : <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="SOUNDNESS.CORELEMMA.tge">tge</a></span> : <span class="id"><a href="compcert.backend.RTL.html#genv">genv</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SOUNDNESS.CORELEMMA.SECOMPATSRC">SECOMPATSRC</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#senv_genv_compat">senv_genv_compat</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SOUNDNESS.CORELEMMA.SECOMPATTGT">SECOMPATTGT</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#senv_genv_compat">senv_genv_compat</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tse">tse</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="kept_closed">kept_closed</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">gd</span> <span class="id">id</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.pm">pm</a></span>!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> <span class="id">id</span>' -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id">id</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3578')">Proof.</div>
<div class="proofscript" id="proof3578">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_closed">used_closed</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="kept_main">kept_main</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3579')">Proof.</div>
<div class="proofscript" id="proof3579">
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_main">used_main</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="kept_public">kept_public</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>) -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3580')">Proof.</div>
<div class="proofscript" id="proof3580">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_public">used_public</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Injections that preserve used globals. </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="meminj_preserves_globals">meminj_preserves_globals</a></span> (<span class="id">invar</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>): <span class="kwd">Prop</span> := {<br/>
&nbsp;&nbsp;<span class="id"><a name="symbols_inject_1">symbols_inject_1</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span> = 0 /\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' /\ <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="symbols_inject_2">symbols_inject_2</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' /\ <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', 0);<br/>
&nbsp;&nbsp;<span class="id"><a name="symbols_inject_3">symbols_inject_3</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> /\ <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', 0);<br/>
&nbsp;&nbsp;<span class="id"><a name="symbols_inject_4">symbols_inject_4</a></span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;~ <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="defs_inject">defs_inject</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">gd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span>) /\ <span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span> = 0 /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>);<br/>
&nbsp;&nbsp;<span class="id"><a name="defs_rev_inject">defs_rev_inject</a></span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span> <span class="id">gd_tgt</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd_tgt">gd_tgt</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">gd_src</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd_src">gd_src</a></span> /\ <span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span> = 0 /\ <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd_tgt">gd_tgt</a></span> = <span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd_src">gd_src</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="public_eq">public_eq</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_public">Genv.genv_public</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> = <span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span> /\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_public">Genv.genv_public</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> = <span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>;<br/>
}.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="globals_symbols_inject">globals_symbols_inject</a></span> <span class="id">invar</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3581')">Proof.</div>
<div class="proofscript" id="proof3581">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">E1</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_public">Genv.genv_public</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> = <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#public_eq">public_eq</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">E2</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_public">Genv.genv_public</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> = <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#public_eq">public_eq</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="tactic">rewrite</span> <span class="id">H1</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_public">match_prog_public</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; [|<span class="tactic">split</span>;[|<span class="tactic">split</span>]]; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.public_symbol">Genv.public_symbol</a></span>; <span class="tactic">rewrite</span> <span class="id">E1</span>, <span class="id">E2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> <span class="id">id</span>) <span class="kwd">as</span> [<span class="id">b</span>'|] <span class="id">eqn</span>:<span class="id">TFS</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_3">symbols_inject_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b</span> &amp; <span class="id">FS</span> &amp; <span class="id">INJ</span>). <span class="tactic">rewrite</span> <span class="id">FS</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id">id</span>) <span class="kwd">as</span> [<span class="id">b</span>|] <span class="id">eqn</span>:<span class="id">FS</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>)); <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_2">symbols_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#kept_public">kept_public</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">b</span>' &amp; <span class="id">TFS</span>' &amp; <span class="id">INJ</span>). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;+ <span class="id">ss</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_1">symbols_inject_1</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">simpl</span> <span class="kwd">in</span> *; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.public_symbol">Genv.public_symbol</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id">id</span>) <span class="kwd">as</span> [<span class="id">b</span>|] <span class="id">eqn</span>:<span class="id">FS</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">E1</span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span> <span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>)); <span class="tactic">try</span> <span class="tactic">discriminate</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_2">symbols_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#kept_public">kept_public</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">b</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span>); <span class="id">exists</span> <span class="id">b</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">simpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.block_is_volatile">Genv.block_is_volatile</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id">b1</span>) <span class="kwd">as</span> [<span class="id">gv</span>|] <span class="id">eqn</span>:<span class="id">V1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info_iff">Genv.find_var_info_iff</a></span> <span class="kwd">in</span> <span class="id">V1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs_inject">defs_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info_iff">Genv.find_var_info_iff</a></span> <span class="kwd">in</span> <span class="id">A</span>. <span class="tactic">rewrite</span> <span class="id">A</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info">Genv.find_var_info</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> <span class="id">b2</span>) <span class="kwd">as</span> [<span class="id">gv</span>|] <span class="id">eqn</span>:<span class="id">V2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info_iff">Genv.find_var_info_iff</a></span> <span class="kwd">in</span> <span class="id">V2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs_rev_inject">defs_rev_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">gd_src</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_var_info_iff">Genv.find_var_info_iff</a></span> <span class="kwd">in</span> <span class="id">A</span>. <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="symbol_address_inject">symbol_address_inject</a></span> <span class="id">invar</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span> <span class="id">id</span> <span class="id">ofs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ofs">ofs</a></span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ofs">ofs</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3582')">Proof.</div>
<div class="proofscript" id="proof3582">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id">id</span>) <span class="kwd">as</span> [<span class="id">b</span>|] <span class="id">eqn</span>:<span class="id">FS</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_2">symbols_inject_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b</span>' &amp; <span class="id">TFS</span> &amp; <span class="id">INJ</span>). <span class="tactic">rewrite</span> <span class="id">TFS</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Semantic preservation </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="regset_inject">regset_inject</a></span> (<span class="id">f</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>) (<span class="id">rs</span> <span class="id">rs</span>': <span class="id"><a href="compcert.backend.RTL.html#regset">regset</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">r</span>, <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.demo.Unreadglobproof.html#r">r</a></span> <span class="id">rs</span>'#<span class="id"><a href="compcert.demo.Unreadglobproof.html#r">r</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="regs_inject">regs_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">rs</span> <span class="id">rs</span>', <span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> <span class="id">rs</span>' -&gt; <span class="kwd">forall</span> <span class="id">l</span>, <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span>##<span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span> <span class="id">rs</span>'##<span class="id"><a href="compcert.demo.Unreadglobproof.html#l">l</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3583')">Proof.</div>
<div class="proofscript" id="proof3583">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">l</span>; <span class="tactic">simpl</span>. <span class="id">constructor</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_reg_inject">set_reg_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">rs</span> <span class="id">rs</span>' <span class="id">r</span> <span class="id">v</span> <span class="id">v</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> <span class="id">rs</span>' -&gt; <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#v">v</a></span> <span class="id">v</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.demo.Unreadglobproof.html#r">r</a></span> &lt;- <span class="id"><a href="compcert.demo.Unreadglobproof.html#v">v</a></span>) (<span class="id">rs</span>'#<span class="id"><a href="compcert.demo.Unreadglobproof.html#r">r</a></span> &lt;- <span class="id">v</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3584')">Proof.</div>
<div class="proofscript" id="proof3584">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.backend.Registers.html#Regmap.gsspec">Regmap.gsspec</a></span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">r0</span> <span class="id">r</span>); <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="set_res_inject">set_res_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">rs</span> <span class="id">rs</span>' <span class="id">res</span> <span class="id">v</span> <span class="id">v</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> <span class="id">rs</span>' -&gt; <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#v">v</a></span> <span class="id">v</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#res">res</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#v">v</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span>) (<span class="id"><a href="compcert.backend.Registers.html#regmap_setres">regmap_setres</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#res">res</a></span> <span class="id">v</span>' <span class="id">rs</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3585')">Proof.</div>
<div class="proofscript" id="proof3585">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">res</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#set_reg_inject">set_reg_inject</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="regset_inject_incr">regset_inject_incr</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">f</span>' <span class="id">rs</span> <span class="id">rs</span>', <span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> <span class="id">rs</span>' -&gt; <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id">f</span>' -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> <span class="id">rs</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3586')">Proof.</div>
<div class="proofscript" id="proof3586">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_incr">val_inject_incr</a></span> <span class="kwd">with</span> <span class="id">f</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="regset_undef_inject">regset_undef_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> (<span class="id"><a href="compcert.backend.Registers.html#Regmap.init">Regmap.init</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>) (<span class="id"><a href="compcert.backend.Registers.html#Regmap.init">Regmap.init</a></span> <span class="id"><a href="compcert.common.Values.html#Vundef">Vundef</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3587')">Proof.</div>
<div class="proofscript" id="proof3587">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.backend.Registers.html#Regmap.gi">Regmap.gi</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="init_regs_inject">init_regs_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">args</span> <span class="id">args</span>', <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#args">args</a></span> <span class="id">args</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">params</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> (<span class="id"><a href="compcert.backend.RTL.html#init_regs">init_regs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#args">args</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#params">params</a></span>) (<span class="id"><a href="compcert.backend.RTL.html#init_regs">init_regs</a></span> <span class="id">args</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#params">params</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3588')">Proof.</div>
<div class="proofscript" id="proof3588">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="tactic">destruct</span> <span class="id">params</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> (<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_undef_inject">regset_undef_inject</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#set_reg_inject">set_reg_inject</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_stacks">match_stacks</a></span> (<span class="id">invar</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="kwd">Prop</span>) (<span class="id">j</span>: <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span>):<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#list">list</a></span> <span class="id"><a href="compcert.backend.RTL.html#stackframe">stackframe</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="id"><a href="compcert.common.Values.html#block">block</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_stacks_nil">match_stacks_nil</a></span>: <span class="kwd">forall</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">SYMBINJ</span>: <span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tse">tse</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#bound">bound</a></span> -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#bound">bound</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tbound">tbound</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_stacks_cons">match_stacks_cons</a></span>: <span class="kwd">forall</span> <span class="id">res</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">pc</span> <span class="id">rs</span> <span class="id">s</span> <span class="id">tsp</span> <span class="id">trs</span> <span class="id">ts</span> <span class="id">bound</span> <span class="id">tbound</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tf</span> (<span class="id">TRANF</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#tf">tf</a></span> = (<span class="id"><a href="compcert.backend.RTL.html#transf_function">transf_function</a></span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">i</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#filter_instr">filter_instr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACKS</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sp">sp</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tsp">tsp</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">KEPT</span>: <span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_function">ref_function</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SPINJ</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sp">sp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.demo.Unreadglobproof.html#tsp">tsp</a></span>, 0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">REGINJ</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#trs">trs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">BELOW</span>: <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sp">sp</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#bound">bound</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">TBELOW</span>: <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tsp">tsp</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tbound">tbound</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#res">res</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#pc">pc</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> :: <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Stackframe">Stackframe</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#res">res</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tf">tf</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tsp">tsp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#pc">pc</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#trs">trs</a></span> :: <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#bound">bound</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tbound">tbound</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_stacks_symbols_inject">match_stacks_symbols_inject</a></span> <span class="id">invar</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span> <span class="id">s</span> <span class="id">ts</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#bound">bound</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tse">tse</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3589')">Proof.</div>
<div class="proofscript" id="proof3589">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_stacks_preserves_globals">match_stacks_preserves_globals</a></span> <span class="id">invar</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span> <span class="id">s</span> <span class="id">ts</span> <span class="id">bound</span> <span class="id">tbound</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#bound">bound</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3590')">Proof.</div>
<div class="proofscript" id="proof3590">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_stacks_incr">match_stacks_incr</a></span> <span class="id">invar</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span> <span class="id">j</span>', <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id">j</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">ts</span> <span class="id">bound</span> <span class="id">tbound</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#bound">bound</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">b1</span> <span class="id">b2</span> <span class="id">delta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt; <span class="id">j</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#b1">b1</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.demo.Unreadglobproof.html#b2">b2</a></span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span>) -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#bound">bound</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b1">b1</a></span> /\ <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tbound">tbound</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b2">b2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id">j</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#bound">bound</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tbound">tbound</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3591')">Proof.</div>
<div class="proofscript" id="proof3591">
&nbsp;&nbsp;<span class="tactic">induction</span> 2; <span class="tactic">intros</span>.<br/>
- <span class="tactic">assert</span> (<span class="id">SAME</span>: <span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span>) -&gt; <span class="id">j</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">j</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b1</span> <span class="id">delta1</span>] | ] <span class="id">eqn</span>: <span class="id">J</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">elim</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">SAME</span>': <span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>, <span class="id"><a href="compcert.lib.Coqlib.html#Plt">Plt</a></span> <span class="id">b</span>' (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_next">Genv.genv_next</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">j</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span>) -&gt; <span class="id">j</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b</span>', <span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">j</span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b1</span> <span class="id">delta1</span>] | ] <span class="id">eqn</span>: <span class="id">J</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H3</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">elim</span> (<span class="id"><a href="compcert.lib.Coqlib.html#Plt_strict">Plt_strict</a></span> <span class="id">b</span>').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#symbols_inject_incr">symbols_inject_incr</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">inv</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.SECOMPATSRC">SECOMPATSRC</a></span>. <span class="tactic">rewrite</span> <span class="id">NB</span> <span class="kwd">in</span> *. <span class="tactic">apply</span> <span class="id">SAME</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">i</span>. <span class="id">inv</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.SECOMPATTGT">SECOMPATTGT</a></span>. <span class="tactic">rewrite</span> <span class="id">NB</span> <span class="kwd">in</span> *. <span class="tactic">apply</span> <span class="id">SAME</span>'; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_1">symbols_inject_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">SAME</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_2">symbols_inject_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_3">symbols_inject_3</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_4">symbols_inject_4</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs_inject">defs_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">SAME</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs_rev_inject">defs_rev_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">SAME</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_defs_range">Genv.genv_defs_range</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">apply</span> <span class="id">H0</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">IHmatch_stacks</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">H1</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">split</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject_incr">regset_inject_incr</a></span> <span class="kwd">with</span> <span class="id">j</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="match_stacks_bound">match_stacks_bound</a></span> <span class="id">invar</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span> <span class="id">s</span> <span class="id">ts</span> <span class="id">bound</span> <span class="id">tbound</span> <span class="id">bound</span>' <span class="id">tbound</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#bound">bound</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tbound">tbound</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#bound">bound</a></span> <span class="id">bound</span>' -&gt; <span class="id"><a href="compcert.lib.Coqlib.html#Ple">Ple</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tbound">tbound</a></span> <span class="id">tbound</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> <span class="id">bound</span>' <span class="id">tbound</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3592')">Proof.</div>
<div class="proofscript" id="proof3592">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
- <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_trans">Ple_trans</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple_trans">Plt_Ple_trans</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="match_states">match_states</a></span>: <span class="id"><a href="compcert.backend.RTL.html#state">state</a></span> -&gt; <span class="id"><a href="compcert.backend.RTL.html#state">state</a></span> -&gt; <span class="id">SimMemInjInv.t</span>' -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="match_states_regular">match_states_regular</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">f</span> <span class="id">sp</span> <span class="id">pc</span> <span class="id">rs</span> <span class="id">m</span> <span class="id">ts</span> <span class="id">tsp</span> <span class="id">trs</span> <span class="id">tm</span> <span class="id">j</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">tf</span> (<span class="id">TRANF</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#tf">tf</a></span> = (<span class="id"><a href="compcert.backend.RTL.html#transf_function">transf_function</a></span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">i</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#filter_instr">filter_instr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> (<span class="id">MCOMPAT</span>: <span class="id"><a href="compcert.demo.SimMemInjInv.html#mcompat">SimMemInjInv.mcompat</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invar</span> (<span class="id">INV</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_src">SimMemInjInv.mem_inv_src</a></span>) = <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id">SimMemInjInv.wf</span>' <span class="id"><a href="compcert.demo.SimMemInjInv.html#top_inv">SimMemInjInv.top_inv</a></span> <span class="id"><a href="compcert.demo.SimMemInjInv.html#top_inv">SimMemInjInv.top_inv</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACKS</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sp">sp</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tsp">tsp</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">KEPT</span>: <span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_function">ref_function</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">SPINJ</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sp">sp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id"><a href="compcert.demo.Unreadglobproof.html#tsp">tsp</a></span>, 0))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">REGINJ</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#trs">trs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MEMINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#pc">pc</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#State">State</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tf">tf</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tsp">tsp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#pc">pc</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#trs">trs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_states_call">match_states_call</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">fptr</span> <span class="id">sg</span> <span class="id">args</span> <span class="id">m</span> <span class="id">ts</span> <span class="id">tfptr</span> <span class="id">targs</span> <span class="id">tm</span> <span class="id">j</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> (<span class="id">MCOMPAT</span>: <span class="id"><a href="compcert.demo.SimMemInjInv.html#mcompat">SimMemInjInv.mcompat</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invar</span> (<span class="id">INV</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_src">SimMemInjInv.mem_inv_src</a></span>) = <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id">SimMemInjInv.wf</span>' <span class="id"><a href="compcert.demo.SimMemInjInv.html#top_inv">SimMemInjInv.top_inv</a></span> <span class="id"><a href="compcert.demo.SimMemInjInv.html#top_inv">SimMemInjInv.top_inv</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACKS</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">FPTR</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#fptr">fptr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tfptr">tfptr</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">ARGINJ</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#args">args</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#targs">targs</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MEMINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#fptr">fptr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sg">sg</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#args">args</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tfptr">tfptr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sg">sg</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#targs">targs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="match_states_return">match_states_return</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">res</span> <span class="id">m</span> <span class="id">ts</span> <span class="id">tres</span> <span class="id">tm</span> <span class="id">j</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">sm0</span> (<span class="id">MCOMPAT</span>: <span class="id"><a href="compcert.demo.SimMemInjInv.html#mcompat">SimMemInjInv.mcompat</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">invar</span> (<span class="id">INV</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_src">SimMemInjInv.mem_inv_src</a></span>) = <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MWF</span>: <span class="id">SimMemInjInv.wf</span>' <span class="id"><a href="compcert.demo.SimMemInjInv.html#top_inv">SimMemInjInv.top_inv</a></span> <span class="id"><a href="compcert.demo.SimMemInjInv.html#top_inv">SimMemInjInv.top_inv</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">STACKS</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">RESINJ</span>: <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#res">res</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tres">tres</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">MEMINJ</span>: <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_states">match_states</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s">s</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#res">res</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#Returnstate">Returnstate</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ts">ts</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tres">tres</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="external_call_inject">external_call_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ef</span> <span class="id">vargs</span> <span class="id">m1</span> <span class="id">t</span> <span class="id">vres</span> <span class="id">m2</span> <span class="id">f</span> <span class="id">m1</span>' <span class="id">vargs</span>' (<span class="id">SYMBINJ</span>: <span class="id"><a href="compcert.common.Events.html#symbols_inject">symbols_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tse">tse</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ef">ef</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#vargs">vargs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m1">m1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#t">t</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#vres">vres</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m2">m2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m1">m1</a></span> <span class="id">m1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#vargs">vargs</a></span> <span class="id">vargs</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span>', <span class="id">exists</span> <span class="id">vres</span>', <span class="id">exists</span> <span class="id">m2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#external_call">external_call</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ef">ef</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tse">tse</a></span> <span class="id">vargs</span>' <span class="id">m1</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#t">t</a></span> <span class="id">vres</span>' <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#vres">vres</a></span> <span class="id">vres</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#m2">m2</a></span> <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_unmapped">loc_unmapped</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#m1">m1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m2">m2</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on">Mem.unchanged_on</a></span> (<span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m1">m1</a></span>) <span class="id">m1</span>' <span class="id">m2</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#inject_incr">inject_incr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id">f</span>'<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Events.html#inject_separated">inject_separated</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id">f</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#m1">m1</a></span> <span class="id">m1</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3593')">Proof.</div>
<div class="proofscript" id="proof3593">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_mem_inject_gen">external_call_mem_inject_gen</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="find_function_inject">find_function_inject</a></span> <span class="id">invar</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">j</span> <span class="id">ros</span> <span class="id">rs</span> <span class="id">fptr</span> <span class="id">trs</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.backend.RTL.html#find_function_ptr">find_function_ptr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ros">ros</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> = <span class="id"><a href="compcert.demo.Unreadglobproof.html#fptr">fptr</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ros">ros</a></span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inl">inl</a></span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#trs">trs</a></span> | <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#inr">inr</a></span> <span class="id">id</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id">id</span> <span class="kwd">end</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tfptr</span>, <span class="id"><a href="compcert.backend.RTL.html#find_function_ptr">find_function_ptr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ros">ros</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#trs">trs</a></span> = <span class="id"><a href="compcert.demo.Unreadglobproof.html#tfptr">tfptr</a></span> /\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#fptr">fptr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tfptr">tfptr</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3594')">Proof.</div>
<div class="proofscript" id="proof3594">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">ros</span> <span class="kwd">as</span> [<span class="id">r</span>|<span class="id">id</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
- <span class="id">esplit</span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id">id</span>) <span class="kwd">as</span> [<span class="id">b</span>|] <span class="id">eqn</span>:<span class="id">FS</span>.<br/>
&nbsp;&nbsp;+ <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_2">symbols_inject_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">tb</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="tactic">rewrite</span> <span class="id">P</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> <span class="id">id</span>); <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_builtin_arg_inject">eval_builtin_arg_inject</a></span> <span class="id">invar</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rs</span> <span class="id">sp</span> <span class="id">m</span> <span class="id">j</span> <span class="id">rs</span>' <span class="id">sp</span>' <span class="id">m</span>' <span class="id">a</span> <span class="id">v</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.demo.Unreadglobproof.html#r">r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#a">a</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#v">v</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sp">sp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">sp</span>', 0) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> <span class="id">rs</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.common.AST.html#globals_of_builtin_arg">globals_of_builtin_arg</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#a">a</a></span>) -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">v</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_arg">eval_builtin_arg</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id">rs</span>'#<span class="id"><a href="compcert.demo.Unreadglobproof.html#r">r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp</span>' <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">m</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#a">a</a></span> <span class="id">v</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#v">v</a></span> <span class="id">v</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3595')">Proof.</div>
<div class="proofscript" id="proof3595">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span> <span class="id">SP</span> <span class="id">GL</span> <span class="id">RS</span> <span class="id">MI</span> <span class="id">K</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">K</span>.<br/>
- <span class="id">exists</span> <span class="id">rs</span>'#<span class="id">x</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.load_inject">Mem.load_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">v</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>. <span class="tactic">simpl</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">j</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id">id</span> <span class="id">ofs</span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> <span class="id">id</span> <span class="id">ofs</span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span>; <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id">id</span>) <span class="kwd">as</span> [<span class="id">b</span>|] <span class="id">eqn</span>:<span class="id">FS</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_2">symbols_inject_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="tactic">rewrite</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_inject">Mem.loadv_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">v</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="id">exists</span> <span class="id">v</span>'; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
- <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Senv.symbol_address">Senv.symbol_address</a></span>; <span class="tactic">simpl</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id">id</span>) <span class="kwd">as</span> [<span class="id">b</span>|] <span class="id">eqn</span>:<span class="id">FS</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_2">symbols_inject_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="tactic">rewrite</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">IHeval_builtin_arg1</span> <span class="kwd">as</span> (<span class="id">v1</span>' &amp; <span class="id">A1</span> &amp; <span class="id">B1</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHeval_builtin_arg2</span> <span class="kwd">as</span> (<span class="id">v2</span>' &amp; <span class="id">A2</span> &amp; <span class="id">B2</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Values.html#Val.longofwords">Val.longofwords</a></span> <span class="id">v1</span>' <span class="id">v2</span>'); <span class="tactic">split</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#Val.longofwords_inject">Val.longofwords_inject</a></span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">destruct</span> <span class="id">IHeval_builtin_arg1</span> <span class="kwd">as</span> (<span class="id">v1</span>' &amp; <span class="id">A1</span> &amp; <span class="id">B1</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHeval_builtin_arg2</span> <span class="kwd">as</span> (<span class="id">v2</span>' &amp; <span class="id">A2</span> &amp; <span class="id">B2</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span> <span class="kwd">with</span> <span class="id">barg</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id"><a href="compcert.x86_64.Archi.html#ptr64">Archi.ptr64</a></span>; <span class="tactic">auto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.common.Values.html#Val.add_inject">Val.add_inject</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.addl_inject">Val.addl_inject</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="eval_builtin_args_inject">eval_builtin_args_inject</a></span> <span class="id">invar</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rs</span> <span class="id">sp</span> <span class="id">m</span> <span class="id">j</span> <span class="id">rs</span>' <span class="id">sp</span>' <span class="id">m</span>' <span class="id">al</span> <span class="id">vl</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span>#<span class="id"><a href="compcert.demo.Unreadglobproof.html#r">r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sp">sp</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#al">al</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#vl">vl</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sp">sp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">sp</span>', 0) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject">regset_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#rs">rs</a></span> <span class="id">rs</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> <span class="id">m</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.common.AST.html#globals_of_builtin_args">globals_of_builtin_args</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#al">al</a></span>) -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">vl</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#eval_builtin_args">eval_builtin_args</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> (<span class="kwd">fun</span> <span class="id">r</span> =&gt; <span class="id">rs</span>'#<span class="id"><a href="compcert.demo.Unreadglobproof.html#r">r</a></span>) (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp</span>' <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">m</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#al">al</a></span> <span class="id">vl</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject_list">Val.inject_list</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#j">j</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#vl">vl</a></span> <span class="id">vl</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3596')">Proof.</div>
<div class="proofscript" id="proof3596">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
- <span class="id">exists</span> (@<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id"><a href="compcert.common.Values.html#val">val</a></span>); <span class="tactic">split</span>; <span class="id">constructor</span>.<br/>
- <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#eval_builtin_arg_inject">eval_builtin_arg_inject</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>. <span class="tactic">intros</span> (<span class="id">v1</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHlist_forall2</span> <span class="kwd">as</span> (<span class="id">vl</span>' &amp; <span class="id">C</span> &amp; <span class="id">D</span>); <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_or_app">in_or_app</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">v1</span>' :: <span class="id">vl</span>'); <span class="tactic">split</span>; <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_function_at">transf_function_at</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">f</span> <span class="id">pc</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span>.(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)!<span class="id"><a href="compcert.demo.Unreadglobproof.html#pc">pc</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.backend.RTL.html#transf_function">transf_function</a></span> (<span class="kwd">fun</span> <span class="id">_</span> <span class="id">i</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglob.html#filter_instr">filter_instr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span>).(<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span>)!<span class="id"><a href="compcert.demo.Unreadglobproof.html#pc">pc</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#filter_instr">filter_instr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3597')">Proof.</div>
<div class="proofscript" id="proof3597">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#transf_function">transf_function</a></span>. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gmap">PTree.gmap</a></span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span>. <span class="id">des_ifs</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="step_simulation">step_simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S1</span> <span class="id">t</span> <span class="id">S2</span>, <span class="id"><a href="compcert.backend.RTL.html#step">step</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.se">se</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#S1">S1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#t">t</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#S2">S2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S1</span>' <span class="id">sm0</span> (<span class="id">MS</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#S1">S1</a></span> <span class="id">S1</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span>),<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">S2</span>', <span class="id"><a href="compcert.backend.RTL.html#step">step</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tse">tse</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> <span class="id">S1</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#t">t</a></span> <span class="id">S2</span>' /\ (<span class="id">exists</span> <span class="id">sm1</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#S2">S2</a></span> <span class="id">S2</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm1">sm1</a></span> /\ &lt;&lt;<span class="id">MLE</span>: <span class="id">SimMemInjInv.le</span>' <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm0">sm0</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm1">sm1</a></span>&gt;&gt;).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3598')">Proof.</div>
<div class="proofscript" id="proof3598">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="id">inv</span> <span class="id">MS</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">try</span> (<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#transf_function_at">transf_function_at</a></span>; <span class="tactic">eauto</span>; []; <span class="tactic">intro</span> <span class="id">CODETGT</span>).<br/>
<br/>
- <span class="comment">(*&nbsp;nop&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Inop">exec_Inop</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInjInv.spl</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;op&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>: <span class="id">exists</span> <span class="id">tv</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_operation">eval_operation</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">tsp</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">op</span> <span class="id">trs</span>##<span class="id">args</span> <span class="id">tm</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tv">tv</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">j</span> <span class="id">v</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tv">tv</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_operation_inj">eval_operation_inj</a></span> <span class="kwd">with</span> (<span class="id">ge1</span> := <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span>) (<span class="id">m1</span> := <span class="id">m</span>) (<span class="id">sp1</span> := <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp0</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id">vl1</span> := <span class="id">rs</span>##<span class="id">args</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_pointer_inject_val">Mem.valid_pointer_inject_val</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_inject_val">Mem.weak_valid_pointer_inject_val</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.weak_valid_pointer_inject_no_overflow">Mem.weak_valid_pointer_inject_no_overflow</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.different_pointers_inject">Mem.different_pointers_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbol_address_inject">symbol_address_inject</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">KEPT</span>. <span class="tactic">red</span>. <span class="id">exists</span> <span class="id">pc</span>, (<span class="id"><a href="compcert.backend.RTL.html#Iop">Iop</a></span> <span class="id">op</span> <span class="id">args</span> <span class="id">res</span> <span class="id">pc</span>'); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#regs_inject">regs_inject</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> (<span class="id">tv</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iop">exec_Iop</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInjInv.spl</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#set_reg_inject">set_reg_inject</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;load&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>: <span class="id">exists</span> <span class="id">ta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">tsp</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">addr</span> <span class="id">trs</span>##<span class="id">args</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ta">ta</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">j</span> <span class="id">a</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ta">ta</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_inj">eval_addressing_inj</a></span> <span class="kwd">with</span> (<span class="id">ge1</span> := <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span>) (<span class="id">sp1</span> := <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp0</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id">vl1</span> := <span class="id">rs</span>##<span class="id">args</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbol_address_inject">symbol_address_inject</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">KEPT</span>. <span class="tactic">red</span>. <span class="id">exists</span> <span class="id">pc</span>, (<span class="id"><a href="compcert.backend.RTL.html#Iload">Iload</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">dst</span> <span class="id">pc</span>'); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#regs_inject">regs_inject</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> (<span class="id">ta</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadv_inject">Mem.loadv_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">tv</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Iload">exec_Iload</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInjInv.spl</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#set_reg_inject">set_reg_inject</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;store&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;destruct&nbsp;(Classical_Prop.classic&nbsp;(forall&nbsp;id&nbsp;(IN:&nbsp;In&nbsp;id&nbsp;(globals_addressing&nbsp;addr)),&nbsp;kept&nbsp;id));&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;&nbsp;&nbsp;rename&nbsp;H2&nbsp;into&nbsp;T;&nbsp;cycle&nbsp;1.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">set</span> <span class="id">a</span> <span class="kwd">as</span> <span class="id">AAA</span>.<br/>
&nbsp;&nbsp;<span class="id">dup</span> <span class="id">H1</span>. <span class="tactic">rename</span> <span class="id">H2</span> <span class="id">into</span> <span class="id">W</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev">Mem.storev</a></span> <span class="kwd">in</span> <span class="id">W</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">j</span> <span class="id">b</span>) <span class="id">eqn</span>:<span class="id">V</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">set</span> <span class="id">addr</span> <span class="kwd">as</span> <span class="id">BBB</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">gid</span> <span class="id">ofs</span>, <span class="id">addr</span> = <span class="id"><a href="compcert.x86.Op.html#Aglobal">Aglobal</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gid">gid</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ofs">ofs</a></span> /\ ~ <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gid">gid</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span>, <span class="id"><a href="compcert.x86.Op.html#eval_addressing64">eval_addressing64</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="tactic">destruct</span> <span class="id">args</span>; <span class="id">ss</span>. <span class="id">clarify</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> (<span class="id">REGINJ</span> <span class="id">r</span>); <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">INJ</span>. <span class="id">inv</span> <span class="id">INJ</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">args</span>; <span class="id">ss</span>. <span class="tactic">destruct</span> <span class="id">args</span>; <span class="id">ss</span>. <span class="id">clarify</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> (<span class="id">REGINJ</span> <span class="id">r</span>); <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">INJ</span>. <span class="id">inv</span> <span class="id">INJ</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> (<span class="id">REGINJ</span> <span class="id">r0</span>); <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">INJ</span>. <span class="id">inv</span> <span class="id">INJ</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">destruct</span> <span class="id">args</span>; <span class="id">ss</span>. <span class="tactic">destruct</span> <span class="id">args</span>; <span class="id">ss</span>. <span class="id">clarify</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> (<span class="id">REGINJ</span> <span class="id">r</span>); <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">INJ</span>. <span class="id">inv</span> <span class="id">INJ</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.mull">Val.mull</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Values.html#Val.addl">Val.addl</a></span>, <span class="id"><a href="compcert.common.Values.html#Val.mull">Val.mull</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">args</span>; <span class="id">ss</span>. <span class="id">clarify</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">args</span>; <span class="id">ss</span>. <span class="id">clarify</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">hexploit</span> (<span class="id">REGINJ</span> <span class="id">r</span>); <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">INJ</span>. <span class="id">inv</span> <span class="id">INJ</span>; <span class="id">ss</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">GEINJ</span>. <span class="id">inv</span> <span class="id">GEINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">symbols_inject_6</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#filter_instr">filter_instr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Istore">Istore</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">src</span> <span class="id">pc</span>')) <span class="kwd">with</span> (<span class="id"><a href="compcert.backend.RTL.html#Inop">Inop</a></span> <span class="id">pc</span>') <span class="kwd">in</span> <span class="id">CODETGT</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="id">des_ifs</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#forallb_forall">forallb_forall</a></span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">ss</span>. <span class="id">specialize</span> (<span class="id">Heq</span> <span class="id">gid</span>). <span class="tactic">tauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Inop">exec_Inop</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">INVAR</span>: <span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_src">SimMemInjInv.mem_inv_src</a></span> <span class="id">sm0</span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="id">ss</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">GEINJ</span>. <span class="id">inv</span> <span class="id">GEINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">symbols_inject_8</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">sm1</span> := (<span class="id"><a href="compcert.common.SimMemInj.html#mk">SimMemInj.mk</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">m</span>' <span class="id">tm</span> <span class="id">j</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#src_external">SimMemInj.src_external</a></span> <span class="id">sm0</span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>)) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_external">SimMemInj.tgt_external</a></span> <span class="id">sm0</span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#src_parent_nb">SimMemInj.src_parent_nb</a></span> <span class="id">sm0</span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>)) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_parent_nb">SimMemInj.tgt_parent_nb</a></span> <span class="id">sm0</span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.SimMemInj.html#src_ge_nb">SimMemInj.src_ge_nb</a></span> <span class="id">sm0</span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>)) (<span class="id"><a href="compcert.common.SimMemInj.html#tgt_ge_nb">SimMemInj.tgt_ge_nb</a></span> <span class="id">sm0</span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>)))).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">MWF1</span>: <span class="id">SimMemInj.wf</span>' <span class="id">sm1</span>).<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">inv</span> <span class="id">WF</span>. <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unmapped_inject">Mem.store_unmapped_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id">sm1</span>, <span class="id"><a href="compcert.common.SimMemInj.html#src_private">SimMemInj.src_private</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_valid_block_1">Mem.store_valid_block_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">etransitivity</span>; <span class="tactic">eauto</span>. <span class="tactic">unfold</span> <span class="id">sm1</span>, <span class="id"><a href="compcert.common.SimMemInj.html#tgt_private">SimMemInj.tgt_private</a></span>, <span class="id"><a href="compcert.common.Events.html#loc_out_of_reach">loc_out_of_reach</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">ii</span>. <span class="id">des</span>. <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id">PR</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">Mem.perm_store_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock_store">Mem.nextblock_store</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">erewrite</span> <span class="id">H1</span> <span class="kwd">in</span> *. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">MLE1</span>: <span class="id">SimMemInj.le</span>' <span class="id">sm0</span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>) <span class="id">sm1</span>).<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="tactic">unfold</span> <span class="id">sm1</span>. <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.store_unchanged_on">Mem.store_unchanged_on</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">inv</span> <span class="id">MWF</span>. <span class="id">exploit</span> <span class="id">INVRANGESRC</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.unchanged_on_refl">Mem.unchanged_on_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_refl">SimMemInj.frozen_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.SimMemInj.html#frozen_refl">SimMemInj.frozen_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_store_2">Mem.perm_store_2</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">SimMemInjInv.spl_exact2</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:=<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_tgt">SimMemInjInv.mem_inv_tgt</a></span> <span class="id">sm0</span>). <span class="tactic">destruct</span> <span class="id">sm0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.SimMemInjInv.html#le_inj_wf_wf">SimMemInjInv.le_inj_wf_wf</a></span>; <span class="tactic">eauto</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="id">inv</span> <span class="id">MWF1</span>. <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">T</span>: (<span class="kwd">forall</span> <span class="id">id</span> (<span class="id">IN</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.x86.Op.html#globals_addressing">globals_addressing</a></span> <span class="id">addr</span>)), <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>)).<br/>
&nbsp;&nbsp;{ <span class="id">i</span>. <span class="tactic">destruct</span> <span class="id">addr</span>; <span class="id">ss</span>. <span class="id">des</span>; <span class="id">ss</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span>, <span class="id"><a href="compcert.x86.Op.html#eval_addressing64">eval_addressing64</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs_safe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id">id</span>) <span class="id">eqn</span>:<span class="id">U</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">GEINJ</span>. <span class="id">inv</span> <span class="id">GEINJ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.symbol_address">Genv.symbol_address</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">p0</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">symbols_inject_5</span> <span class="id">id</span> <span class="id">b</span>); <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">replace</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#filter_instr">filter_instr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> (<span class="id"><a href="compcert.backend.RTL.html#Istore">Istore</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">src</span> <span class="id">pc</span>')) <span class="kwd">with</span> (<span class="id"><a href="compcert.backend.RTL.html#Istore">Istore</a></span> <span class="id">chunk</span> <span class="id">addr</span> <span class="id">args</span> <span class="id">src</span> <span class="id">pc</span>') <span class="kwd">in</span> <span class="id">CODETGT</span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;{ <span class="id">ss</span>. <span class="id">des_ifs</span>. <span class="tactic">destruct</span> <span class="id">addr</span>; <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#andb_false_iff">andb_false_iff</a></span> <span class="kwd">in</span> <span class="id">Heq</span>. <span class="id">des</span>; <span class="id">ss</span>. <span class="id">specialize</span> (<span class="id">T</span> <span class="id">i0</span>). <span class="id">exploit</span> <span class="id">T</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>; <span class="id">des</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>: <span class="id">exists</span> <span class="id">ta</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.x86.Op.html#eval_addressing">eval_addressing</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.tge">tge</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">tsp</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id">addr</span> <span class="id">trs</span>##<span class="id">args</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ta">ta</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Values.html#Val.inject">Val.inject</a></span> <span class="id">j</span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">b</span> <span class="id">i</span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#ta">ta</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.x86.Op.html#eval_addressing_inj">eval_addressing_inj</a></span> <span class="kwd">with</span> (<span class="id">ge1</span> := <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA.ge">ge</a></span>) (<span class="id">sp1</span> := <span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">sp0</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) (<span class="id">vl1</span> := <span class="id">rs</span>##<span class="id">args</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbol_address_inject">symbol_address_inject</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">T</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#regs_inject">regs_inject</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assumption</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> (<span class="id">ta</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.storev_mapped_inject">Mem.storev_mapped_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">tm</span>' &amp; <span class="id">D</span> &amp; <span class="id">E</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Istore">exec_Istore</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCOMPAT</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#storev_mapped">SimMemInj.storev_mapped</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MWF</span>. <span class="tactic">eauto</span>. } <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInjInv.spl_exact2</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">SimMemInj.compat_tac</span>. <span class="id">ss</span>. <span class="id">clarify</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:=<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_tgt">SimMemInjInv.mem_inv_tgt</a></span> <span class="id">sm0</span>). <span class="tactic">destruct</span> <span class="id">sm0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.SimMemInjInv.html#le_inj_wf_wf">SimMemInjInv.le_inj_wf_wf</a></span>; <span class="tactic">eauto</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">econs</span>; <span class="tactic">eauto</span>. }<br/>
<br/>
- <span class="comment">(*&nbsp;call&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">FPTR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#find_function_inject">find_function_inject</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ros</span> <span class="kwd">as</span> [<span class="id">r</span>|<span class="id">id</span>]. <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">KEPT</span>. <span class="tactic">red</span>. <span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">tfptr</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Icall">exec_Icall</a></span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInjInv.spl</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span> <span class="id">sp0</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">tm</span> <span class="id">tsp</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">H2</span>. <span class="tactic">rewrite</span> <span class="id">A</span>. <span class="tactic">apply</span> <span class="id">B</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#regs_inject">regs_inject</a></span>; <span class="tactic">auto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;tailcall&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">inversion</span> <span class="id">FPTR</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#find_function_inject">find_function_inject</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ros</span> <span class="kwd">as</span> [<span class="id">r</span>|<span class="id">id</span>]. <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id">KEPT</span>. <span class="tactic">red</span>. <span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">split</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">tfptr</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_inject">Mem.free_parallel_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">intros</span> (<span class="id">tm</span>' &amp; <span class="id">C</span> &amp; <span class="id">D</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Itailcall">exec_Itailcall</a></span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="id">dup</span> <span class="id">MWF</span>. <span class="id">inv</span> <span class="id">MWF</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#free_parallel">SimMemInj.free_parallel</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">eexists</span> (<span class="id"><a href="compcert.demo.SimMemInjInv.html#mk">SimMemInjInv.mk</a></span> <span class="id">sm1</span> <span class="id">_</span> <span class="id">_</span>). <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">SimMemInj.compat_tac</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span> <span class="kwd">in</span> <span class="id">FREETGT</span>. <span class="tactic">rewrite</span> <span class="id">C</span> <span class="kwd">in</span> <span class="id">FREETGT</span>. <span class="id">clarify</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:=<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_tgt">SimMemInjInv.mem_inv_tgt</a></span> <span class="id">sm0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:=<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_src">SimMemInjInv.mem_inv_src</a></span> <span class="id">sm0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">sm0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.SimMemInjInv.html#le_inj_wf_wf">SimMemInjInv.le_inj_wf_wf</a></span>; <span class="tactic">eauto</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_bound">match_stacks_bound</a></span> <span class="kwd">with</span> <span class="id">stk</span> <span class="id">tsp</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span>' <span class="id">stk</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">tm</span>' <span class="id">tsp</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#regs_inject">regs_inject</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econs</span>; <span class="tactic">eauto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;builtin&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#eval_builtin_args_inject">eval_builtin_args_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">KEPT</span>. <span class="tactic">red</span>. <span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">vargs</span>' &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#external_call_inject">external_call_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_symbols_inject">match_stacks_symbols_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">j</span>' &amp; <span class="id">tv</span> &amp; <span class="id">tm</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ibuiltin">exec_Ibuiltin</a></span>; <span class="tactic">eauto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="id">dup</span> <span class="id">MWF</span>. <span class="id">inv</span> <span class="id">MWF</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#external_call">SimMemInj.external_call</a></span>; <span class="tactic">try</span> <span class="tactic">by</span> (<span class="id">inv</span> <span class="id">MCOMPAT</span>; <span class="tactic">eauto</span>). <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInjInv.spl_exact2</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_states_regular">match_states_regular</a></span> <span class="kwd">with</span> (<span class="id">j</span> := <span class="id">j</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">SimMemInj.compat_tac</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:=<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_tgt">SimMemInjInv.mem_inv_tgt</a></span> <span class="id">sm0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:=<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_src">SimMemInjInv.mem_inv_src</a></span> <span class="id">sm0</span>). <span class="tactic">destruct</span> <span class="id">sm0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.SimMemInjInv.html#le_inj_wf_wf">SimMemInjInv.le_inj_wf_wf</a></span>; <span class="id">ss</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_incr">match_stacks_incr</a></span> <span class="kwd">with</span> <span class="id">j</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">G</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">U</span> <span class="id">V</span>].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span> <span class="id">sp0</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">tm</span> <span class="id">tsp</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#set_res_inject">set_res_inject</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#regset_inject_incr">regset_inject_incr</a></span> <span class="kwd">with</span> <span class="id">j</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;cond&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">C</span>: <span class="id"><a href="compcert.x86.Op.html#eval_condition">eval_condition</a></span> <span class="id">cond</span> <span class="id">trs</span>##<span class="id">args</span> <span class="id">tm</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.x86.Op.html#eval_condition_inject">eval_condition_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#regs_inject">regs_inject</a></span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Icond">exec_Icond</a></span> <span class="kwd">with</span> (<span class="id">pc</span>' := <span class="kwd">if</span> <span class="id">b</span> <span class="kwd">then</span> <span class="id">ifso</span> <span class="kwd">else</span> <span class="id">ifnot</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInjInv.spl</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;jumptbl&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">REGINJ</span> <span class="id">arg</span>); <span class="tactic">rewrite</span> <span class="id">H0</span>; <span class="tactic">intros</span> <span class="id">INJ</span>; <span class="id">inv</span> <span class="id">INJ</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ijumptable">exec_Ijumptable</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInjInv.spl</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.free_parallel_inject">Mem.free_parallel_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> ! <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>. <span class="tactic">intros</span> (<span class="id">tm</span>' &amp; <span class="id">C</span> &amp; <span class="id">D</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_Ireturn">exec_Ireturn</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="id">dup</span> <span class="id">MWF</span>. <span class="id">inv</span> <span class="id">MWF</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#free_parallel">SimMemInj.free_parallel</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInjInv.spl_exact2</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">SimMemInjInv.compat_tac</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span> <span class="kwd">in</span> <span class="id">FREETGT</span>. <span class="id">ss</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:=<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_tgt">SimMemInjInv.mem_inv_tgt</a></span> <span class="id">sm0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:=<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_src">SimMemInjInv.mem_inv_src</a></span> <span class="id">sm0</span>). <span class="tactic">destruct</span> <span class="id">sm0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.SimMemInjInv.html#le_inj_wf_wf">SimMemInjInv.le_inj_wf_wf</a></span>; <span class="tactic">eauto</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_bound">match_stacks_bound</a></span> <span class="kwd">with</span> <span class="id">stk</span> <span class="id">tsp</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">m</span>' <span class="id">stk</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_1">Mem.valid_block_inject_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Plt_Ple">Plt_Ple</a></span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="id">tm</span>' <span class="id">tsp</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block_inject_2">Mem.valid_block_inject_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">or</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;internal&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_parallel_inject">Mem.alloc_parallel_inject</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">j</span>' &amp; <span class="id">tm</span>' &amp; <span class="id">tstk</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">STK</span>: <span class="id">stk</span> = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">TSTK</span>: <span class="id">tstk</span> = <span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.alloc_result">Mem.alloc_result</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">STACKS</span>': <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks">match_stacks</a></span> (<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_src">SimMemInjInv.mem_inv_src</a></span> <span class="id">sm0</span>) <span class="id">j</span>' <span class="id">s</span> <span class="id">ts</span> <span class="id">stk</span> <span class="id">tstk</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">STK</span>, <span class="id">TSTK</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_incr">match_stacks_incr</a></span> <span class="kwd">with</span> <span class="id">j</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">b1</span> <span class="id">stk</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">b1</span>. <span class="tactic">rewrite</span> <span class="id">F</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">split</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">G</span> <span class="kwd">in</span> <span class="id">H1</span> <span class="tactic">by</span> <span class="tactic">auto</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_inv">Genv.find_funct_inv</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">ss</span>. <span class="id">des_ifs</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">FPTR0</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs_inject">defs_inject</a></span>; <span class="id">swap</span> 2 3.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals</a></span>. <span class="tactic">apply</span> <span class="id">STACKS</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span>. <span class="tactic">eauto</span>. } { <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">I</span> &amp; <span class="id">J</span> &amp; <span class="id">K</span>). <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">L</span>: <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> 0) = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_function_internal">exec_function_internal</a></span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">L</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_find_funct_ptr">Genv.find_funct_find_funct_ptr</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">ss</span>. <span class="id">dup</span> <span class="id">MWF</span>. <span class="id">inv</span> <span class="id">MWF</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#alloc_parallel">SimMemInj.alloc_parallel</a></span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.le_refl">Z.le_refl</a></span>. { <span class="id">inv</span> <span class="id">MCOMPAT</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">SM</span>. <span class="id">desH</span> <span class="id">SM</span>. <span class="id">SimMemInjInv.spl_exact2</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_states_regular">match_states_regular</a></span> <span class="kwd">with</span> (<span class="id">j</span> := <span class="id">j</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">MCOMPAT</span>. <span class="id">SimMemInj.compat_tac</span>; <span class="id">ss</span>. <span class="tactic">congruence</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#functional_extensionality">Axioms.functional_extensionality</a></span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Values.html#eq_block">eq_block</a></span> <span class="id">x</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#src">SimMemInj.src</a></span> <span class="id">sm0</span>.(<span class="id"><a href="compcert.demo.SimMemInjInv.html#minj">SimMemInjInv.minj</a></span>)))); <span class="id">ss</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>. <span class="tactic">rewrite</span> <span class="id">INJ0</span>; <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id">G</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.SimMemInjInv.html#le_inj_wf_wf">SimMemInjInv.le_inj_wf_wf</a></span>; <span class="tactic">eauto</span>; <span class="id">ss</span>. <span class="id">econs</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_regs_inject">init_regs_inject</a></span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Values.html#val_inject_list_incr">val_inject_list_incr</a></span> <span class="kwd">with</span> <span class="id">j</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;external&nbsp;function&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#external_call_inject">external_call_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_symbols_inject">match_stacks_symbols_inject</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">j</span>' &amp; <span class="id">tres</span> &amp; <span class="id">tm</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span> &amp; <span class="id">G</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_inv">Genv.find_funct_inv</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">clarify</span>. <span class="id">ss</span>. <span class="id">des_ifs</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">FPTR0</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs_inject">defs_inject</a></span>; <span class="id">swap</span> 2 3.<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_preserves_globals">match_stacks_preserves_globals</a></span>. <span class="tactic">apply</span> <span class="id">STACKS</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span>. <span class="tactic">eauto</span>. } { <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">I</span> &amp; <span class="id">J</span> &amp; <span class="id">K</span>). <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">L</span>: <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add">Ptrofs.add</a></span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.repr">Ptrofs.repr</a></span> 0) = <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_function_external">exec_function_external</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">L</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_find_funct_ptr">Genv.find_funct_find_funct_ptr</a></span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_funct_ptr_iff">Genv.find_funct_ptr_iff</a></span>. <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">dup</span> <span class="id">MWF</span>. <span class="id">inv</span> <span class="id">MWF</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.SimMemInj.html#external_call">SimMemInj.external_call</a></span>; <span class="tactic">try</span> <span class="tactic">by</span> (<span class="id">inv</span> <span class="id">MCOMPAT</span>; <span class="tactic">eauto</span>). <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">SimMemInjInv.spl_exact2</span> <span class="id">sm1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_states_return">match_states_return</a></span> <span class="kwd">with</span> (<span class="id">j</span> := <span class="id">j</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">SimMemInj.compat_tac</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">instantiate</span> (1:=<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_tgt">SimMemInjInv.mem_inv_tgt</a></span> <span class="id">sm0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">instantiate</span> (1:=<span class="id"><a href="compcert.demo.SimMemInjInv.html#mem_inv_src">SimMemInjInv.mem_inv_src</a></span> <span class="id">sm0</span>). <span class="tactic">destruct</span> <span class="id">sm0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.SimMemInjInv.html#le_inj_wf_wf">SimMemInjInv.le_inj_wf_wf</a></span>; <span class="tactic">eauto</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_bound">match_stacks_bound</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_stacks_incr">match_stacks_incr</a></span> <span class="kwd">with</span> <span class="id">j</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">G</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>].<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.valid_block">Mem.valid_block</a></span> <span class="kwd">in</span> *; <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#external_call_nextblock">external_call_nextblock</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;return&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">STACKS</span>. <span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.backend.RTL.html#exec_return">exec_return</a></span>.<br/>
&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#set_reg_inject">set_reg_inject</a></span>; <span class="tactic">auto</span>. <span class="tactic">reflexivity</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.CORELEMMA">CORELEMMA</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SOUNDNESS.WHOLE">WHOLE</a></span>.<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="SOUNDNESS.WHOLE.ge">ge</a></span> := <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>.<br/>
<span class="kwd">Let</span> <span class="id"><a name="SOUNDNESS.WHOLE.tge">tge</a></span> := <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv">Genv.globalenv</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>.<br/>
<br/>
<div class="doc">Relating <span class="bracket"><span class="id">Genv.find_symbol</span></span> operations in the original and transformed program </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transform_find_symbol_1">transform_find_symbol_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt; <span class="id">exists</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3599')">Proof.</div>
<div class="proofscript" id="proof3599">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>: <span class="id">exists</span> <span class="id">g</span>, (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>)!<span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#g">g</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_inversion">Genv.find_symbol_inversion</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> (<span class="id">g</span> &amp; <span class="id">P</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_exists">Genv.find_symbol_exists</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id">g</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap</a></span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_def">match_prog_def</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="id">r</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span>. <span class="id">des_ifs</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transform_find_symbol_2">transform_find_symbol_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> /\ <span class="id">exists</span> <span class="id">b</span>', <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3600')">Proof.</div>
<div class="proofscript" id="proof3600">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">A</span>: <span class="id">exists</span> <span class="id">g</span>, (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>)!<span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#g">g</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_inversion">Genv.find_symbol_inversion</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> (<span class="id">g</span> &amp; <span class="id">P</span>).<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_def">match_prog_def</a></span> <span class="kwd">in</span> <span class="id">P</span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_exists">Genv.find_symbol_exists</a></span> <span class="kwd">with</span> <span class="id">g0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap</a></span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="init_meminj">init_meminj</a></span> : <span class="id"><a href="compcert.common.Values.html#meminj">meminj</a></span> :=<br/>
&nbsp;&nbsp;<span class="kwd">fun</span> <span class="id">b</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">id</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id">id</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id">b</span>', 0)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="init_meminj_eq">init_meminj_eq</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span> <span class="id">b</span> <span class="id">b</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj">init_meminj</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', 0).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3601')">Proof.</div>
<div class="proofscript" id="proof3601">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj">init_meminj</a></span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_invert_symbol">Genv.find_invert_symbol</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="init_meminj_invert">init_meminj_invert</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj">init_meminj</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span> = 0 /\ <span class="id">exists</span> <span class="id">id</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> /\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3602')">Proof.</div>
<div class="proofscript" id="proof3602">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj">init_meminj</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id">b</span>) <span class="kwd">as</span> [<span class="id">id</span>|] <span class="id">eqn</span>:<span class="id">S</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id">id</span>) <span class="kwd">as</span> [<span class="id">b</span>''|] <span class="id">eqn</span>:<span class="id">F</span>; <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">exists</span> <span class="id">id</span>. <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">Genv.invert_find_symbol</a></span>; <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="invar">invar</a></span> (<span class="id">b</span>: <span class="id"><a href="compcert.common.Values.html#block">block</a></span>): <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_symbol">Genv.invert_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">id</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id">id</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>' =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span><br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="init_meminj_preserves_globals">init_meminj_preserves_globals</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj">init_meminj</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3603')">Proof.</div>
<div class="proofscript" id="proof3603">
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert">init_meminj_invert</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">id1</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">id1</span> = <span class="id">id</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_vars_inj">Genv.genv_vars_inj</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span>); <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">id1</span>.<br/>
&nbsp;&nbsp;<span class="id">esplits</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">GD0</span>: <span class="id">exists</span> <span class="id">gd_src</span>, (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>) ! <span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd_src">gd_src</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#ge">ge</a></span> <span class="kwd">in</span> *. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_inversion">Genv.find_symbol_inversion</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">T</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">GD1</span>: <span class="id">exists</span> <span class="id">gd_tgt</span>, (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>) ! <span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd_tgt">gd_tgt</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tge">tge</a></span> <span class="kwd">in</span> *. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_inversion">Genv.find_symbol_inversion</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>); <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">T</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id">des</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.TRANSF">TRANSF</a></span>. <span class="id">specialize</span> (<span class="id">match_prog_def0</span> <span class="id">id</span>). <span class="tactic">rewrite</span> <span class="id">GD0</span>, <span class="id">GD1</span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#transform_find_symbol_1">transform_find_symbol_1</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b</span>' &amp; <span class="id">F</span>). <span class="id">exists</span> <span class="id">b</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_eq">init_meminj_eq</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#transform_find_symbol_2">transform_find_symbol_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">K</span> &amp; <span class="id">b</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">b</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_eq">init_meminj_eq</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id">id</span>) <span class="id">eqn</span>:<span class="id">FIND</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#transform_find_symbol_2">transform_find_symbol_2</a></span> <span class="kwd">in</span> <span class="id">FIND</span>. <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_invert_symbol">Genv.find_invert_symbol</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> <span class="id">FIND</span>. <span class="tactic">auto</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert">init_meminj_invert</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id">id</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#transform_find_symbol_2">transform_find_symbol_2</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.pm">pm</a></span>!<span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">gd</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#pm">pm</a></span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span>. <span class="id">exists</span> <span class="id">b</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> ((<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>)!<span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id">gd</span>)).<br/>
&nbsp;&nbsp;{ <span class="id">erewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_def">match_prog_def</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="id">des_ifs</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span>, <span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#pm">pm</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span> <span class="kwd">in</span> <span class="id">H3</span>. <span class="tactic">destruct</span> <span class="id">H3</span> <span class="kwd">as</span> (<span class="id">b1</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="kwd">in</span> <span class="id">P</span>. <span class="tactic">replace</span> <span class="id">b</span>' <span class="kwd">with</span> <span class="id">b1</span> <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#kept_closed">kept_closed</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert">init_meminj_invert</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> ((<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>)!<span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">gd_tgt</span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span>. <span class="id">exists</span> <span class="id">b</span>'; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_def">match_prog_def</a></span> <span class="kwd">in</span> <span class="id">H1</span> <span class="tactic">by</span> <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="tactic">rename</span> <span class="id">Heq0</span> <span class="id">into</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (<span class="id">b1</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="kwd">in</span> <span class="id">P</span>. <span class="tactic">replace</span> <span class="id">b</span> <span class="kwd">with</span> <span class="id">b1</span> <span class="tactic">by</span> <span class="tactic">congruence</span>. <span class="tactic">eauto</span>.<br/>
- <span class="id">esplit</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.globalenv_public">Genv.globalenv_public</a></span>.<br/>
<span class="id">Unshelve</span>.<br/>
&nbsp;&nbsp;<span class="id">all</span>: <span class="tactic">repeat</span> (<span class="id">econs</span>; <span class="tactic">eauto</span>).<br/>
Qed.</div>
<br/>
<div class="doc">Relating initial memory states </div>
<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="init_meminj_invert_strong">init_meminj_invert_strong</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">b</span> <span class="id">b</span>' <span class="id">delta</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj">init_meminj</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span>(<span class="id">b</span>', <span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#delta">delta</a></span> = 0 /\<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">id</span> <span class="id">gd</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id">b</span>'<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#b">b</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span><br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def">Genv.find_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id">b</span>' = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span>)<br/>
&nbsp;&nbsp;/\ (<span class="kwd">forall</span> <span class="id">i</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_def">ref_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3604')">Proof.</div>
<div class="proofscript" id="proof3604">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert">init_meminj_invert</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">gd</span>, (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>)!<span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">apply</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_inversion">Genv.find_symbol_inversion</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">gd</span> <span class="id">DM</span>]. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_def_symbol">Genv.find_def_symbol</a></span> <span class="kwd">in</span> <span class="id">DM</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">DM</span> <span class="kwd">as</span> (<span class="id">b</span>'' &amp; <span class="id">P</span> &amp; <span class="id">Q</span>). <span class="id">fold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="kwd">in</span> <span class="id">P</span>. <span class="tactic">rewrite</span> <span class="id">P</span> <span class="kwd">in</span> <span class="id">B</span>; <span class="id">inv</span> <span class="id">B</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="kwd">in</span> <span class="id">Q</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs_inject">defs_inject</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_preserves_globals">init_meminj_preserves_globals</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">X</span> &amp; <span class="id">_</span> &amp; <span class="id">Y</span>).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">exists</span> <span class="id">id</span>, <span class="id">gd</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SOUNDNESS.WHOLE.INIT_MEM">INIT_MEM</a></span>.<br/>
<br/>
<span class="kwd">Variables</span> <span class="id"><a name="SOUNDNESS.WHOLE.INIT_MEM.m">m</a></span> <span class="id"><a name="SOUNDNESS.WHOLE.INIT_MEM.tm">tm</a></span>: <span class="id"><a href="compcert.common.Memory.html#mem">mem</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SOUNDNESS.WHOLE.INIT_MEM.IM">IM</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.INIT_MEM.m">m</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="SOUNDNESS.WHOLE.INIT_MEM.TIM">TIM</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.INIT_MEM.tm">tm</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bytes_of_init_inject">bytes_of_init_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">il</span>,<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#ref_init">ref_init</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#il">il</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> (<span class="id"><a href="compcert.common.Memdata.html#memval_inject">memval_inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj">init_meminj</a></span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.bytes_of_init_data_list">Genv.bytes_of_init_data_list</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#il">il</a></span>) (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.bytes_of_init_data_list">Genv.bytes_of_init_data_list</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#il">il</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3605')">Proof.</div>
<div class="proofscript" id="proof3605">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">il</span> <span class="kwd">as</span> [ | <span class="id">i1</span> <span class="id">il</span>]; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">constructor</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#list_forall2_app">list_forall2_app</a></span>.<br/>
+ <span class="tactic">destruct</span> <span class="id">i1</span>; <span class="tactic">simpl</span>; <span class="tactic">try</span> (<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#inj_bytes_inject">inj_bytes_inject</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.to_nat">Z.to_nat</a></span> <span class="id">z</span>); <span class="tactic">simpl</span>; <span class="id">constructor</span>. <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id">i</span>) <span class="kwd">as</span> [<span class="id">b</span>|] <span class="id">eqn</span>:<span class="id">FS</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.kept">kept</a></span> <span class="id">i</span>). { <span class="tactic">apply</span> <span class="id">H</span>. <span class="tactic">red</span>. <span class="id">exists</span> <span class="id">i0</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_2">symbols_inject_2</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_preserves_globals">init_meminj_preserves_globals</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">b</span>' &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="tactic">rewrite</span> <span class="id">A</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#inj_value_inject">inj_value_inject</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">symmetry</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.add_zero">Ptrofs.add_zero</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol">Genv.find_symbol</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id">i</span>) <span class="kwd">as</span> [<span class="id">b</span>'|] <span class="id">eqn</span>:<span class="id">FS</span>'.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_3">symbols_inject_3</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_preserves_globals">init_meminj_preserves_globals</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">b</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span>). <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memdata.html#repeat_Undef_inject_self">repeat_Undef_inject_self</a></span>.<br/>
+ <span class="tactic">apply</span> <span class="id">IHil</span>. <span class="tactic">intros</span> <span class="id">id</span> [<span class="id">ofs</span> <span class="id">IN</span>]. <span class="tactic">apply</span> <span class="id">H</span>. <span class="id">exists</span> <span class="id">ofs</span>; <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">coqlib</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="Mem_getN_forall2">Mem_getN_forall2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> -&gt; <span class="id"><a href="compcert.common.Memdata.html#memval">memval</a></span> -&gt; <span class="kwd">Prop</span>) <span class="id">c1</span> <span class="id">c2</span> <span class="id">i</span> <span class="id">n</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Coqlib.html#list_forall2">list_forall2</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#P">P</a></span> (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">Mem.getN</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#n">n</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#c1">c1</a></span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.getN">Mem.getN</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#n">n</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#c2">c2</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> &lt;= <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span> &lt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.of_nat">Z.of_nat</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#n">n</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#P">P</a></span> (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#c1">c1</a></span>) (<span class="id"><a href="compcert.lib.Maps.html#ZMap.get">ZMap.get</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#i">i</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#c2">c2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3606')">Proof.</div>
<div class="proofscript" id="proof3606">
&nbsp;&nbsp;<span class="tactic">induction</span> <span class="id">n</span>; <span class="tactic">simpl</span> <span class="id">Mem.getN</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="id">omegaContradiction</span>.<br/>
- <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Znat.html#Nat2Z.inj_succ">Nat2Z.inj_succ</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">i</span> <span class="id">p0</span>).<br/>
+ <span class="tactic">congruence</span>.<br/>
+ <span class="tactic">apply</span> <span class="id">IHn</span> <span class="kwd">with</span> (<span class="id">p0</span> + 1); <span class="tactic">auto</span>. <span class="tactic">omega</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="init_mem_inj_1">init_mem_inj_1</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.mem_inj">Mem.mem_inj</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj">init_meminj</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.INIT_MEM.m">m</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.INIT_MEM.tm">tm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3607')">Proof.</div>
<div class="proofscript" id="proof3607">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert_strong">init_meminj_invert_strong</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">gd</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">Genv.init_mem_characterization_gen</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">Genv.init_mem_characterization_gen</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gd</span> <span class="kwd">as</span> [<span class="id">f</span>|<span class="id">v</span>]; <span class="id">ss</span>.<br/>
+ <span class="tactic">destruct</span> <span class="id">f</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Q1</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Q1</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="tactic">auto</span>.<br/>
+ <span class="tactic">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span> &amp; <span class="id">R2</span> &amp; <span class="id">S2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span> &amp; <span class="id">R1</span> &amp; <span class="id">S1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Q1</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">P2</span>. <span class="tactic">omega</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert">init_meminj_invert</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">delta</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.divide_0_r">Z.divide_0_r</a></span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert_strong">init_meminj_invert_strong</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">gd</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">Genv.init_mem_characterization_gen</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">Genv.init_mem_characterization_gen</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gd</span> <span class="kwd">as</span> [<span class="id">f</span>|<span class="id">v</span>].<br/>
+ <span class="tactic">destruct</span> <span class="id">f</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Q1</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Q1</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">discriminate</span>.<br/>
+ <span class="tactic">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span> &amp; <span class="id">R2</span> &amp; <span class="id">S2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span> &amp; <span class="id">R1</span> &amp; <span class="id">S1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Q1</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">NO</span>: <span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span> <span class="id">v</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.perm_globvar">Genv.perm_globvar</a></span> <span class="kwd">in</span> <span class="id">H1</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#gvar_volatile">gvar_volatile</a></span> <span class="id">v</span>); <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H1</span>. }<br/>
<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">S1</span> <span class="id">NO</span>). <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">Mem.range_perm_dec</a></span>; <span class="tactic">intros</span> <span class="id">E1</span>; <span class="id">inv</span> <span class="id">E1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (<span class="id">S2</span> <span class="id">NO</span>). <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Memory.html#Mem.loadbytes">Mem.loadbytes</a></span>. <span class="tactic">destruct</span> <span class="id"><a href="compcert.common.Memory.html#Mem.range_perm_dec">Mem.range_perm_dec</a></span>; <span class="tactic">intros</span> <span class="id">E2</span>; <span class="id">inv</span> <span class="id">E2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.add_0_r">Z.add_0_r</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#Mem_getN_forall2">Mem_getN_forall2</a></span> <span class="kwd">with</span> (<span class="id">p</span> := 0) (<span class="id">n</span> := <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z">nat_of_Z</a></span> (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> (<span class="id"><a href="compcert.common.AST.html#gvar_init">gvar_init</a></span> <span class="id">v</span>))).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H3</span>, <span class="id">H4</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#bytes_of_init_inject">bytes_of_init_inject</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Coqlib.html#nat_of_Z_eq">nat_of_Z_eq</a></span> <span class="tactic">by</span> (<span class="tactic">apply</span> <span class="id"><a href="compcert.common.AST.html#init_data_list_size_pos">init_data_list_size_pos</a></span>). <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="init_mem_inj_2">init_mem_inj_2</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj">init_meminj</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.INIT_MEM.m">m</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.INIT_MEM.tm">tm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3608')">Proof.</div>
<div class="proofscript" id="proof3608">
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_mem_inj_1">init_mem_inj_1</a></span>.<br/>
- <span class="tactic">destruct</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj">init_meminj</a></span> <span class="id">b</span>) <span class="kwd">as</span> [[<span class="id">b</span>' <span class="id">delta</span>]|] <span class="id">eqn</span>:<span class="id">INJ</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">elim</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert">init_meminj_invert</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_not_fresh">Genv.find_symbol_not_fresh</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert">init_meminj_invert</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.find_symbol_not_fresh">Genv.find_symbol_not_fresh</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert">init_meminj_invert</a></span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="tactic">intros</span> (<span class="id">A1</span> &amp; <span class="id">id1</span> &amp; <span class="id">B1</span> &amp; <span class="id">C1</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert">init_meminj_invert</a></span>. <span class="id">eexact</span> <span class="id">H1</span>. <span class="tactic">intros</span> (<span class="id">A2</span> &amp; <span class="id">id2</span> &amp; <span class="id">B2</span> &amp; <span class="id">C2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id1</span> <span class="id">id2</span>). <span class="tactic">congruence</span>. <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.global_addresses_distinct">Genv.global_addresses_distinct</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert">init_meminj_invert</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>). <span class="tactic">subst</span> <span class="id">delta</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">omega</span>. <span class="tactic">generalize</span> (<span class="id"><a href="compcert.lib.Integers.html#Ptrofs.unsigned_range_2">Ptrofs.unsigned_range_2</a></span> <span class="id">ofs</span>). <span class="tactic">omega</span>.<br/>
- <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_invert_strong">init_meminj_invert_strong</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">A</span> &amp; <span class="id">id</span> &amp; <span class="id">gd</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span> &amp; <span class="id">D</span> &amp; <span class="id">E</span> &amp; <span class="id">F</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">Genv.init_mem_characterization_gen</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_characterization_gen">Genv.init_mem_characterization_gen</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gd</span> <span class="kwd">as</span> [<span class="id">f</span>|<span class="id">v</span>].<br/>
+ <span class="tactic">destruct</span> <span class="id">f</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Q2</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">subst</span>. <span class="tactic">replace</span> <span class="id">ofs</span> <span class="kwd">with</span> 0 <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Q2</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">subst</span>. <span class="tactic">replace</span> <span class="id">ofs</span> <span class="kwd">with</span> 0 <span class="tactic">by</span> <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>; <span class="tactic">auto</span>.<br/>
+ <span class="tactic">intros</span> (<span class="id">P2</span> &amp; <span class="id">Q2</span> &amp; <span class="id">R2</span> &amp; <span class="id">S2</span>) (<span class="id">P1</span> &amp; <span class="id">Q1</span> &amp; <span class="id">R1</span> &amp; <span class="id">S1</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">Q2</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_cur">Mem.perm_cur</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Memory.html#Mem.perm_implies">Mem.perm_implies</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">P1</span>. <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.INIT_MEM">INIT_MEM</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="init_mem_exists">init_mem_exists</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tm</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3609')">Proof.</div>
<div class="proofscript" id="proof3609">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_exists">Genv.init_mem_exists</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">P</span>: (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>)!<span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">v</span>)).<br/>
&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_norepet">prog_defmap_norepet</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_unique">match_prog_unique</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_def">match_prog_def</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.TRANSF">TRANSF</a></span>) <span class="kwd">in</span> <span class="id">P</span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span>, <span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_inversion">Genv.init_mem_inversion</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">AL</span> <span class="id">FV</span>].<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id">FV</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">b</span> &amp; <span class="id">FS</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#transform_find_symbol_1">transform_find_symbol_1</a></span> <span class="kwd">with</span> <span class="id">b</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#kept_closed">kept_closed</a></span> <span class="kwd">with</span> <span class="id">id</span> (<span class="id"><a href="compcert.common.AST.html#Gvar">Gvar</a></span> <span class="id">v</span>).<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>. <span class="tactic">auto</span>. <span class="tactic">red</span>. <span class="tactic">red</span>. <span class="id">exists</span> <span class="id">o</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="init_mem_inject">init_mem_inject</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">m</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">f</span> <span class="id">tm</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem">Genv.init_mem</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span> /\ <span class="id"><a href="compcert.common.Memory.html#Mem.inject">Mem.inject</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#m">m</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tm">tm</a></span> /\ <span class="id"><a href="compcert.demo.Unreadglobproof.html#meminj_preserves_globals">meminj_preserves_globals</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3610')">Proof.</div>
<div class="proofscript" id="proof3610">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_mem_exists">init_mem_exists</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">tm</span> <span class="id">INIT</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj">init_meminj</a></span>, <span class="id">tm</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_mem_inj_2">init_mem_inj_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_preserves_globals">init_meminj_preserves_globals</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_initial_states">transf_initial_states</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S1</span>, <span class="id"><a href="compcert.backend.RTL.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#S1">S1</a></span> -&gt; <span class="id">exists</span> <span class="id">S2</span>, <span class="id"><a href="compcert.backend.RTL.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#S2">S2</a></span> /\ <span class="id">exists</span> <span class="id">sm</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#S1">S1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#S2">S2</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm">sm</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3611')">Proof.</div>
<div class="proofscript" id="proof3611">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_mem_inject">init_mem_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">j</span> &amp; <span class="id">tm</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#symbols_inject_2">symbols_inject_2</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#kept_main">kept_main</a></span>. <span class="id">eexact</span> <span class="id">H1</span>. <span class="tactic">intros</span> (<span class="id">tb</span> &amp; <span class="id">P</span> &amp; <span class="id">Q</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.backend.RTL.html#Callstate">Callstate</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> (<span class="id"><a href="compcert.common.Values.html#Vptr">Vptr</a></span> <span class="id">tb</span> <span class="id"><a href="compcert.lib.Integers.html#Ptrofs.zero">Ptrofs.zero</a></span>) <span class="id"><a href="compcert.common.AST.html#signature_main">signature_main</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> <span class="id">tm</span>); <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">fold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span>. <span class="id">erewrite</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_main">match_prog_main</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.demo.SimMemInjInv.html#mk">SimMemInjInv.mk</a></span> (<span class="id"><a href="compcert.common.SimMemInj.html#mk">SimMemInj.mk</a></span> <span class="id">m0</span> <span class="id">tm</span> <span class="id">j</span> <span class="id">bot2</span> <span class="id">bot2</span> (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">m0</span>) (<span class="id"><a href="compcert.common.Memory.html#Mem.nextblock">Mem.nextblock</a></span> <span class="id">tm</span>) 1%<span class="id">positive</span> 1%<span class="id">positive</span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>)).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id">SimMemInjInv.compat_tac</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">econs</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">econs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>; <span class="tactic">try</span> <span class="id">xomega</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ii</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#invar">invar</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="id">splits</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">Genv.invert_find_symbol</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">j</span> <span class="id">blk</span>) <span class="id">eqn</span>:<span class="id">BLK</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">p0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">C</span>. <span class="id">exploit</span> <span class="id">symbols_inject_5</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des</span>. <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.invert_find_symbol">Genv.invert_find_symbol</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Globalenvs.html#Genv.genv_symb_range">Genv.genv_symb_range</a></span> <span class="kwd">in</span> <span class="id">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span>; <span class="tactic">eauto</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#globals_symbols_inject">globals_symbols_inject</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">T</span>.<br/>
&nbsp;&nbsp;<span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">erewrite</span> &lt;- <span class="id"><a href="compcert.common.Globalenvs.html#Genv.init_mem_genv_next">Genv.init_mem_genv_next</a></span> <span class="tactic">by</span> <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#Ple_refl">Ple_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_final_states">transf_final_states</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">S1</span> <span class="id">S2</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">sm</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#S1">S1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#S2">S2</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm">sm</a></span>) -&gt; <span class="id"><a href="compcert.backend.RTL.html#final_state">final_state</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#S1">S1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#r">r</a></span> -&gt; <span class="id"><a href="compcert.backend.RTL.html#final_state">final_state</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#S2">S2</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#r">r</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3612')">Proof.</div>
<div class="proofscript" id="proof3612">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">des</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">STACKS</span>. <span class="id">inv</span> <span class="id">RESINJ</span>. <span class="id">constructor</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="transf_program_correct_1">transf_program_correct_1</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> (<span class="id"><a href="compcert.backend.RTL.html#semantics">semantics</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.p">p</a></span>) (<span class="id"><a href="compcert.backend.RTL.html#semantics">semantics</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.tp">tp</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3613')">Proof.</div>
<div class="proofscript" id="proof3613">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation_step">forward_simulation_step</a></span> <span class="kwd">with</span> (<span class="id">match_states</span> := <span class="kwd">fun</span> <span class="id">s1</span> <span class="id">s2</span> =&gt; <span class="id">exists</span> <span class="id">sm</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_states">match_states</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.ge">ge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE.tge">tge</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s1">s1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#s2">s2</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#sm">sm</a></span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#globals_symbols_inject">globals_symbols_inject</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#init_meminj_preserves_globals">init_meminj_preserves_globals</a></span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]. <span class="tactic">exact</span> <span class="id">A</span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#transf_initial_states">transf_initial_states</a></span>.<br/>
&nbsp;&nbsp;<span class="id">eexact</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#transf_final_states">transf_final_states</a></span>.<br/>
&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">des</span>. <span class="id">ss</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#step_simulation">step_simulation</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>; <span class="tactic">eauto</span>. }<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS.WHOLE">WHOLE</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#SOUNDNESS">SOUNDNESS</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="transf_program_correct">transf_program_correct</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">tp</span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_weak">match_prog_weak</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> (<span class="id"><a href="compcert.backend.RTL.html#semantics">semantics</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>) (<span class="id"><a href="compcert.backend.RTL.html#semantics">semantics</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3614')">Proof.</div>
<div class="proofscript" id="proof3614">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">p</span> <span class="id">tp</span> (<span class="id">used</span> &amp; <span class="id">A</span> &amp; <span class="id">B</span> &amp; <span class="id">C</span>).  <span class="tactic">apply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#transf_program_correct_1">transf_program_correct_1</a></span> <span class="kwd">with</span> <span class="id">used</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h1> Commutation with linking </h1>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="link_def_either">link_def_either</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">gd1</span> <span class="id">gd2</span> <span class="id">gd</span>: <span class="id"><a href="compcert.common.AST.html#globdef">globdef</a></span> <span class="id"><a href="compcert.backend.RTL.html#fundef">fundef</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>),<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#link_def">link_def</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd1">gd1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd2">gd2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> = <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd1">gd1</a></span> \/ <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> = <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd2">gd2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3615')">Proof with</div>
<div class="proofscript" id="proof3615">
 (<span class="tactic">try</span> <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">gd</span>.<br/>
<span class="kwd">Local</span> <span class="id">Transparent</span> <span class="id"><a href="compcert.common.Linking.html#Linker_def">Linker_def</a></span> <span class="id"><a href="compcert.common.Linking.html#Linker_fundef">Linker_fundef</a></span> <span class="id"><a href="compcert.common.Linking.html#Linker_varinit">Linker_varinit</a></span> <span class="id"><a href="compcert.common.Linking.html#Linker_vardef">Linker_vardef</a></span> <span class="id"><a href="compcert.common.Linking.html#Linker_unit">Linker_unit</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gd1</span> <span class="kwd">as</span> [<span class="id">f1</span>|<span class="id">v1</span>], <span class="id">gd2</span> <span class="kwd">as</span> [<span class="id">f2</span>|<span class="id">v2</span>]...<br/>
<span class="comment">(*&nbsp;Two&nbsp;fundefs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f1</span> <span class="kwd">as</span> [<span class="id">f1</span>|<span class="id">ef1</span>], <span class="id">f2</span> <span class="kwd">as</span> [<span class="id">f2</span>|<span class="id">ef2</span>]; <span class="tactic">simpl</span>...<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ef2</span>; <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">ef1</span>; <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">des_ifs</span>; <span class="tactic">intuition</span> <span class="tactic">congruence</span>.<br/>
<span class="comment">(*&nbsp;Two&nbsp;vardefs&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Linking.html#link_vardef">link_vardef</a></span>. <span class="tactic">destruct</span> <span class="id">v1</span> <span class="kwd">as</span> [<span class="id">info1</span> <span class="id">init1</span> <span class="id">ro1</span> <span class="id">vo1</span>], <span class="id">v2</span> <span class="kwd">as</span> [<span class="id">info2</span> <span class="id">init2</span> <span class="id">ro2</span> <span class="id">vo2</span>]; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Linking.html#link_varinit">link_varinit</a></span> <span class="id">init1</span> <span class="id">init2</span>) <span class="kwd">as</span> [<span class="id">init</span>|] <span class="id">eqn</span>:<span class="id">LI</span>...<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#eqb">eqb</a></span> <span class="id">ro1</span> <span class="id">ro2</span>) <span class="id">eqn</span>:<span class="id">RO</span>...<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#eqb">eqb</a></span> <span class="id">vo1</span> <span class="id">vo2</span>) <span class="id">eqn</span>:<span class="id">VO</span>...<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">info1</span>, <span class="id">info2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EITHER</span>: <span class="id">init</span> = <span class="id">init1</span> \/ <span class="id">init</span> = <span class="id">init2</span>).<br/>
&nbsp;&nbsp;{ <span class="id">revert</span> <span class="id">LI</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Linking.html#link_varinit">link_varinit</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Linking.html#classify_init">classify_init</a></span> <span class="id">init1</span>), (<span class="id"><a href="compcert.common.Linking.html#classify_init">classify_init</a></span> <span class="id">init2</span>); <span class="tactic">intro</span> <span class="id">EQ</span>; <span class="id">inv</span> <span class="id">EQ</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">sz</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.max">Z.max</a></span> <span class="id">sz0</span> 0 + 0)); <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">sz</span> (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">il</span>)); <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#zeq">zeq</a></span> <span class="id">sz</span> (<span class="id"><a href="compcert.common.AST.html#init_data_list_size">init_data_list_size</a></span> <span class="id">il</span>)); <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#eqb_prop">eqb_prop</a></span> <span class="kwd">in</span> <span class="id">RO</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#eqb_prop">eqb_prop</a></span> <span class="kwd">in</span> <span class="id">VO</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">EQ</span>; <span class="id">inv</span> <span class="id">EQ</span>. <span class="tactic">destruct</span> <span class="id">EITHER</span>; <span class="tactic">subst</span> <span class="id">init</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="used_not_defined">used_not_defined</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">used</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>)!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> \/ <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3616')">Proof.</div>
<div class="proofscript" id="proof3616">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> (<span class="id">used</span> <span class="id">id</span>) <span class="id">eqn</span>:<span class="id">M</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_defined">used_defined</a></span>; <span class="tactic">eauto</span> <span class="kwd">using</span> <span class="id"><a href="compcert.demo.Unreadglob.html#IS.mem_2">IS.mem_2</a></span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span> <span class="kwd">in</span> <span class="id">A</span>. <span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> [<span class="id">g</span> <span class="id">E</span>]; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="used_not_defined_2">used_not_defined_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p</span> <span class="id">used</span> <span class="id">id</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> &lt;&gt; <span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>)!<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#None">None</a></span> -&gt;<br/>
&nbsp;&nbsp;~<span class="id"><a href="compcert.demo.Unreadglobproof.html#used">used</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3617')">Proof.</div>
<div class="proofscript" id="proof3617">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_not_defined">used_not_defined</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="link_valid_used_set">link_valid_used_set</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">p</span> <span class="id">used1</span> <span class="id">used2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#link">link</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p1">p1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p2">p2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p1">p1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used1">used1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p2">p2</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used2">used2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> (<span class="kwd">fun</span> <span class="id">id</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#used1">used1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> || <span class="id"><a href="compcert.demo.Unreadglobproof.html#used2">used2</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3618')">Proof.</div>
<div class="proofscript" id="proof3618">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">until</span> <span class="id">used2</span>; <span class="tactic">intros</span> <span class="id">L</span> <span class="id">V1</span> <span class="id">V2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Linking.html#link_prog_inv">link_prog_inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">L</span>) <span class="kwd">as</span> (<span class="id">X</span> &amp; <span class="id">Y</span> &amp; <span class="id">Z</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">Z</span>; <span class="tactic">clear</span> <span class="id">Z</span>; <span class="id">constructor</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#is_true">is_true</a></span> <span class="kwd">in</span> *.<br/>
- <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Linking.html#prog_defmap_elements">prog_defmap_elements</a></span>, <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>)!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">gd1</span>|] <span class="id">eqn</span>:<span class="id">GD1</span>;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>)!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">gd2</span>|] <span class="id">eqn</span>:<span class="id">GD2</span>;<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
+ <span class="comment">(*&nbsp;common&nbsp;definition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">Y</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">PUB1</span> &amp; <span class="id">PUB2</span> &amp; <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#link_def_either">link_def_either</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span>|<span class="id">EQ</span>]; <span class="tactic">subst</span> <span class="id">gd</span>.<br/>
* <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_closed">used_closed</a></span>. <span class="id">eexact</span> <span class="id">V1</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_public">used_public</a></span>. <span class="id">eexact</span> <span class="id">V1</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
* <span class="id">right</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_closed">used_closed</a></span>. <span class="id">eexact</span> <span class="id">V2</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_public">used_public</a></span>. <span class="id">eexact</span> <span class="id">V2</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
+ <span class="comment">(*&nbsp;left&nbsp;definition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">destruct</span> (<span class="id">used1</span> <span class="id">id</span>) <span class="id">eqn</span>:<span class="id">T</span>.<br/>
* <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_closed">used_closed</a></span>; <span class="tactic">eauto</span>.<br/>
* <span class="id">des</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_defined">used_defined</a></span>. <span class="id">eexact</span> <span class="id">V2</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">g</span> <span class="id">E</span>]; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">T</span>. <span class="tactic">rewrite</span> <span class="id">A</span>, &lt;- <span class="id">X</span>. <span class="tactic">intro</span>. <span class="tactic">assert</span>(<span class="id">used1</span> <span class="id">p1</span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_main">used_main</a></span>; <span class="tactic">eauto</span>). <span class="tactic">congruence</span>.<br/>
+ <span class="comment">(*&nbsp;right&nbsp;definition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">destruct</span> (<span class="id">used2</span> <span class="id">id</span>) <span class="id">eqn</span>:<span class="id">T</span>.<br/>
* <span class="id">right</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_closed">used_closed</a></span>; <span class="tactic">eauto</span>.<br/>
* <span class="id">des</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_defined">used_defined</a></span>. <span class="id">eexact</span> <span class="id">V1</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">g</span> <span class="id">E</span>]; <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">contradict</span> <span class="id">T</span>. <span class="tactic">rewrite</span> <span class="id">A</span>, <span class="id">X</span>. <span class="tactic">intro</span>. <span class="tactic">assert</span>(<span class="id">used2</span> <span class="id">p2</span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_main">used_main</a></span>; <span class="tactic">eauto</span>). <span class="tactic">congruence</span>.<br/>
+ <span class="comment">(*&nbsp;no&nbsp;definition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
- <span class="tactic">simpl</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>; <span class="id">left</span>; <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_main">used_main</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">simpl</span>. <span class="tactic">intros</span> <span class="id">id</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_app_iff">in_app_iff</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>]; [<span class="id">left</span>|<span class="id">right</span>]; <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_public">used_public</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_true_iff">orb_true_iff</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#ident_eq">ident_eq</a></span> <span class="id">id</span> (<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id">p1</span>)).<br/>
+ <span class="id">right</span>; <span class="tactic">assumption</span>.<br/>
+ <span class="tactic">assert</span> (<span class="id">E</span>: <span class="id">exists</span> <span class="id">g</span>, <span class="id"><a href="compcert.common.Linking.html#link_prog_merge">link_prog_merge</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>)!<span class="id">id</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>)!<span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#g">g</a></span>).<br/>
&nbsp;&nbsp;{ <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>)!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">gd1</span>|] <span class="id">eqn</span>:<span class="id">GD1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>)!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">gd2</span>|] <span class="id">eqn</span>:<span class="id">GD2</span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">apply</span> <span class="id">Y</span> <span class="kwd">with</span> <span class="id">id</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;* <span class="id">exists</span> <span class="id">gd1</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;* <span class="id">exists</span> <span class="id">gd2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;* <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_not_defined_2">used_not_defined_2</a></span> <span class="kwd">in</span> <span class="id">GD1</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_not_defined_2">used_not_defined_2</a></span> <span class="kwd">in</span> <span class="id">GD2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">E</span> <span class="kwd">as</span> [<span class="id">g</span> <span class="id">LD</span>].<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span>; <span class="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id">change</span> <span class="id">id</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> (<span class="id">id</span>, <span class="id">g</span>)). <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map">in_map</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="PTree_map_extensionality">PTree_map_extensionality</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">X</span> <span class="id">Y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">f0</span> <span class="id">f1</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#X">X</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#Y">Y</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">px</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">EQ</span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">x</span> (<span class="id">IN</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#px">px</a></span> ! <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#x">x</a></span>), <span class="id"><a href="compcert.demo.Unreadglobproof.html#f0">f0</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#x">x</a></span> = <span class="id"><a href="compcert.demo.Unreadglobproof.html#f1">f1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#x">x</a></span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.lib.Maps.html#PTree.map">PTree.map</a></span> (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#f0">f0</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#px">px</a></span> = <span class="id"><a href="compcert.lib.Maps.html#PTree.map">PTree.map</a></span> (<span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#f1">f1</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#px">px</a></span><br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3619')">Proof.</div>
<div class="proofscript" id="proof3619">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.map">PTree.map</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">generalize</span> (1%<span class="id">positive</span>) <span class="tactic">at</span> 1 2 <span class="kwd">as</span> <span class="id">id</span>.<br/>
&nbsp;&nbsp;<span class="id">ginduction</span> <span class="id">px</span>; <span class="tactic">intros</span>; <span class="id">ss</span>. <span class="id">des_ifs</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rename</span> <span class="id">x</span> <span class="id">into</span> <span class="id">xxx</span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">IHpx1</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">specialize</span> (<span class="id">EQ</span> (<span class="id">id0</span>~0)%<span class="id">positive</span> <span class="id">x</span>). <span class="tactic">eapply</span> <span class="id">EQ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">specialize</span> (<span class="id">EQ</span> 1%<span class="id">positive</span> <span class="id">xxx</span>). <span class="id">erewrite</span> <span class="id">EQ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="tactic">eapply</span> <span class="id">IHpx2</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">specialize</span> (<span class="id">EQ</span> (<span class="id">id0</span>~1)%<span class="id">positive</span> <span class="id">x</span>). <span class="tactic">eapply</span> <span class="id">EQ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> <span class="id">IHpx1</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">specialize</span> (<span class="id">EQ</span> (<span class="id">id0</span>~0)%<span class="id">positive</span> <span class="id">x</span>). <span class="tactic">eapply</span> <span class="id">EQ</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id">erewrite</span> <span class="id">IHpx2</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">specialize</span> (<span class="id">EQ</span> (<span class="id">id0</span>~1)%<span class="id">positive</span> <span class="id">x</span>). <span class="tactic">eapply</span> <span class="id">EQ</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Ltac</span> <span class="id">align_bool</span> :=<br/>
&nbsp;&nbsp;(<span class="tactic">repeat</span> <span class="kwd">match</span> <span class="id">goal</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> |- <span class="id">_</span> ] =&gt; <span class="tactic">tauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> |- <span class="id">_</span> ] =&gt; <span class="tactic">tauto</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> &lt;&gt; <span class="id">_</span> |- <span class="id">_</span> ] =&gt; <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> &lt;&gt; <span class="id">_</span> |- <span class="id">_</span> ] =&gt; <span class="tactic">symmetry</span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id">_</span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span> |- <span class="id">_</span> ] =&gt; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#not_true_is_false">not_true_is_false</a></span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ <span class="id">H</span>: <span class="id">_</span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#false">false</a></span> |- <span class="id">_</span> ] =&gt; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#not_false_is_true">not_false_is_true</a></span> <span class="kwd">in</span> <span class="id">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">end</span>)<br/>
.<br/>
<span class="kwd">Ltac</span> <span class="id">simpl_bool</span> := <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#is_true">Datatypes.is_true</a></span> <span class="kwd">in</span> *; <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#is_true">is_true</a></span> <span class="kwd">in</span> *; <span class="id">autorewrite</span> <span class="kwd">with</span> <span class="id">simpl_bool</span> <span class="kwd">in</span> *.<br/>
<span class="kwd">Ltac</span> <span class="id">bsimpl</span> := <span class="id">simpl_bool</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="PTree_forallb_spec">PTree_forallb_spec</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">X</span> (<span class="id">px</span>: <span class="id"><a href="compcert.lib.Maps.html#PTree.t">PTree.t</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#X">X</a></span>) <span class="id">f</span><br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">FORALL</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#PTree_forallb">PTree_forallb</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#px">px</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>&gt;&gt;)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;-&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(&lt;&lt;<span class="id">FORALL</span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">x</span> (<span class="id">IN</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#px">px</a></span> ! <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#x">x</a></span>), <span class="id"><a href="compcert.demo.Unreadglobproof.html#f">f</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#x">x</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>&gt;&gt;)<br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3620')">Proof.</div>
<div class="proofscript" id="proof3620">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#NW">NW</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>; <span class="id">ii</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">FORALL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#PTree_forallb">PTree_forallb</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.fold_spec">PTree.fold_spec</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">IN0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">FORALL</span> <span class="id">IN0</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left_rev_right">fold_left_rev_right</a></span> <span class="kwd">in</span> <span class="id">FORALL</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span> <span class="kwd">in</span> <span class="id">IN0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">abstr</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">PTree.elements</a></span> <span class="id">px</span>)) <span class="id">xs</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ginduction</span> <span class="id">xs</span>; <span class="id">ii</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">bsimpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>; <span class="id">ss</span>; <span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">ss</span>. <span class="id">exploit</span> <span class="id">IHxs</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="tactic">rename</span> <span class="id">H</span> <span class="id">into</span> <span class="id">FORALL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#PTree_forallb">PTree_forallb</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.fold_spec">PTree.fold_spec</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#fold_left_rev_right">fold_left_rev_right</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">FORALL0</span>: <span class="kwd">forall</span> <span class="id">idx</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#idx">idx</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">PTree.elements</a></span> <span class="id">px</span>)) -&gt; <span class="id">f</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#idx">idx</a></span>.(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#idx">idx</a></span>.(<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span>) = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_complete">PTree.elements_complete</a></span>; <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">idx</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_rev">in_rev</a></span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">FORALL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">abstr</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#rev">rev</a></span> (<span class="id"><a href="compcert.lib.Maps.html#PTree.elements">PTree.elements</a></span> <span class="id">px</span>)) <span class="id">xs</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ginduction</span> <span class="id">xs</span>; <span class="id">ii</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">ss</span>. <span class="id">bsimpl</span>. <span class="id">exploit</span> <span class="id">FORALL0</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="addressing_zero_one">addressing_zero_one</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">a</span><br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id"><a href="compcert.x86.Op.html#globals_addressing">globals_addressing</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#a">a</a></span>) = [] \/ <span class="id">exists</span> <span class="id">id</span>, (<span class="id"><a href="compcert.x86.Op.html#globals_addressing">globals_addressing</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#a">a</a></span>) = [<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>])<br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3621')">Proof.</div>
<div class="proofscript" id="proof3621">
 <span class="tactic">destruct</span> <span class="id">a</span>; <span class="id">ss</span>; <span class="tactic">eauto</span>. Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="filter_instr_same">filter_instr_same</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">p1</span> <span class="id">p2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">used1</span> <span class="id">used2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">A1</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p1">p1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used1">used1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">A2</span>: <span class="id"><a href="compcert.demo.Unreadglobproof.html#valid_used_set">valid_used_set</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p2">p2</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used2">used2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">C2</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#check_program">check_program</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p2">p2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">U</span>: <span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p1">p1</a></span> = <span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p2">p2</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">V</span>: <span class="kwd">forall</span> <span class="id">id</span> <span class="id">gd1</span> <span class="id">gd2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p1">p1</a></span>) ! <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd1">gd1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p2">p2</a></span>) ! <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd2">gd2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p1">p1</a></span>) /\<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p2">p2</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">id</span> <span class="id">f2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">GD2</span>: (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p2">p2</a></span>) ! <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> (<span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f2">f2</a></span>)))<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id0</span> <span class="id">x</span> (<span class="id">IN</span>: (<span class="id"><a href="compcert.backend.RTL.html#fn_code">fn_code</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#f2">f2</a></span>) ! <span class="id"><a href="compcert.demo.Unreadglobproof.html#id0">id0</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#x">x</a></span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglob.html#filter_instr">filter_instr</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used2">used2</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#x">x</a></span> = <span class="id"><a href="compcert.demo.Unreadglob.html#filter_instr">filter_instr</a></span> (<span class="kwd">fun</span> <span class="id">id1</span> : <span class="id"><a href="compcert.common.AST.html#ident">ident</a></span> =&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#used1">used1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id1">id1</a></span> || <span class="id"><a href="compcert.demo.Unreadglobproof.html#used2">used2</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id1">id1</a></span>) <span class="id"><a href="compcert.demo.Unreadglobproof.html#x">x</a></span><br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3622')">Proof.</div>
<div class="proofscript" id="proof3622">
&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#filter_instr">filter_instr</a></span>. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;{ <span class="id">hexploit</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#addressing_zero_one">addressing_zero_one</a></span> <span class="id">a</span>); <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">T</span>. <span class="id">des</span>; <span class="tactic">rewrite</span> <span class="id">T</span> <span class="kwd">in</span> *; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">bsimpl</span>; <span class="id">des</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;{ <span class="id">hexploit</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#addressing_zero_one">addressing_zero_one</a></span> <span class="id">a</span>); <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">T</span>. <span class="id">des</span>; <span class="tactic">rewrite</span> <span class="id">T</span> <span class="kwd">in</span> *; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">repeat</span> (<span class="id">bsimpl</span>; <span class="id">des</span>); <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">PRIV2</span>: ~ <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">id1</span> <span class="id">p2</span>.(<span class="id"><a href="compcert.common.AST.html#prog_public">prog_public</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">ii</span>. <span class="id">inv</span> <span class="id">A2</span>. <span class="id">exploit</span> <span class="id">used_public0</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">IN2</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> <span class="id">id1</span> (<span class="id">p2</span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>) :: <span class="id">p2</span>.(<span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#check_program">check_program</a></span> <span class="kwd">in</span> <span class="id">C2</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#forallb_forall">forallb_forall</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">specialize</span> (<span class="id">C2</span> (<span class="id">id</span>, (<span class="id"><a href="compcert.common.AST.html#Gfun">Gfun</a></span> (<span class="id"><a href="compcert.common.AST.html#Internal">Internal</a></span> <span class="id">f2</span>)))). <span class="id">exploit</span> <span class="id">C2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">TT</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#PTree_forallb_spec">PTree_forallb_spec</a></span> <span class="kwd">in</span> <span class="id">TT</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">TT</span>; <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">SPEC</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_dec">in_dec</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#forallb_forall">forallb_forall</a></span> <span class="kwd">in</span> *. <span class="id">specialize</span> (<span class="id">SPEC</span> <span class="id">id1</span>). <span class="tactic">rewrite</span> <span class="id">T</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">SPEC</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">left</span>; <span class="id">ss</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">UU</span>. <span class="id">des_sumbool</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">A1</span>. <span class="id">exploit</span> (<span class="id">used_defined0</span> <span class="id">id1</span>); <span class="tactic">eauto</span>. <span class="tactic">intro</span> <span class="id">UU</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="tactic">rewrite</span> &lt;- <span class="id">U</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.lib.Coqlib.html#peq">peq</a></span> <span class="id">p2</span>.(<span class="id"><a href="compcert.common.AST.html#prog_main">prog_main</a></span>) <span class="id">id1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">inv</span> <span class="id">A2</span>. <span class="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">IN2</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap_dom">prog_defmap_dom</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">UU</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">V</span> <span class="id">id1</span>); <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;}<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="check_globdef_easier">check_globdef_easier</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">defs0</span> <span class="id">defs1</span> <span class="id">gd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">INCL</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#incl">incl</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs0">defs0</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs1">defs1</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">CHECK</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#check_globdef">check_globdef</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs0">defs0</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;&lt;<span class="id">CHECK</span>: <span class="id"><a href="compcert.demo.Unreadglob.html#check_globdef">check_globdef</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#defs1">defs1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gd">gd</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>&gt;&gt;<br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3623')">Proof.</div>
<div class="proofscript" id="proof3623">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#check_globdef">check_globdef</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#PTree_forallb_spec">PTree_forallb_spec</a></span> <span class="kwd">in</span> <span class="id">CHECK</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#PTree_forallb_spec">PTree_forallb_spec</a></span>.<br/>
&nbsp;&nbsp;<span class="id">ii</span>. <span class="id">exploit</span> <span class="id">CHECK</span>; <span class="tactic">eauto</span>. <span class="id">i</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#check_instr">check_instr</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#forallb_forall">forallb_forall</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">i</span>. <span class="id">exploit</span> <span class="id">H</span>; <span class="tactic">eauto</span>. <span class="id">i</span>. <span class="id">des_sumbool</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="in_prog_defmap_exists">in_prog_defmap_exists</a></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">p</span>: <span class="id"><a href="compcert.backend.RTL.html#program">program</a></span>) <span class="id">id</span> <span class="id">g</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">IN</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#In">In</a></span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>, <span class="id"><a href="compcert.demo.Unreadglobproof.html#g">g</a></span>) (<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>))<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">g</span>, (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span>) ! <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#g">g</a></span><br/>
.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3624')">Proof.</div>
<div class="proofscript" id="proof3624">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span>. <span class="id">abstr</span> (<span class="id"><a href="compcert.common.AST.html#prog_defs">prog_defs</a></span> <span class="id">p</span>) <span class="id">idgs</span>. <span class="id">clear_tac</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree_Properties.of_list_dom">PTree_Properties.of_list_dom</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. <span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="link_match_program">link_match_program</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">tp1</span> <span class="id">tp2</span> <span class="id">p</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Linking.html#link">link</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p1">p1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p2">p2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_weak">match_prog_weak</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p1">p1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp1">tp1</a></span> -&gt; <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_weak">match_prog_weak</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p2">p2</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp2">tp2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">tp</span>, <span class="id"><a href="compcert.common.Linking.html#link">link</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp1">tp1</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp2">tp2</a></span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span> /\ <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_weak">match_prog_weak</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#p">p</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#tp">tp</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof3625')">Proof.</div>
<div class="proofscript" id="proof3625">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> (<span class="id">used1</span> &amp; <span class="id">A1</span> &amp; <span class="id">B1</span> &amp; <span class="id">C1</span>). <span class="tactic">destruct</span> <span class="id">H1</span> <span class="kwd">as</span> (<span class="id">used2</span> &amp; <span class="id">A2</span> &amp; <span class="id">B2</span> &amp; <span class="id">C2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Linking.html#link_prog_inv">link_prog_inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H</span>) <span class="kwd">as</span> (<span class="id">U</span> &amp; <span class="id">V</span> &amp; <span class="id">W</span>).<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">split</span>.<br/>
- <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Linking.html#link_prog_succeeds">link_prog_succeeds</a></span>.<br/>
+ <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_main">match_prog_main</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B1</span>), (<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_main">match_prog_main</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B2</span>). <span class="tactic">auto</span>.<br/>
+ <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_def">match_prog_def</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B1</span>) <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_def">match_prog_def</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B2</span>) <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">used1</span> <span class="id">id</span>) <span class="id">eqn</span>:<span class="id">U1</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">used2</span> <span class="id">id</span>) <span class="id">eqn</span>:<span class="id">U2</span>; <span class="tactic">try</span> <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span>, <span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span> <span class="kwd">in</span> *. <span class="id">des_ifs_safe</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id">V</span> <span class="kwd">as</span> (<span class="id">X</span> &amp; <span class="id">Y</span> &amp; <span class="id">gd</span> &amp; <span class="id">Z</span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_public">match_prog_public</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B1</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_public">match_prog_public</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B2</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">des_ifs</span>; <span class="id">ss</span>; <span class="id">des_ifs</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
- <span class="id">exists</span> (<span class="kwd">fun</span> <span class="id">id</span> =&gt; <span class="id">used1</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span> || <span class="id">used2</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#id">id</a></span>); <span class="tactic">split</span>; [|<span class="tactic">split</span>].<br/>
+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#link_valid_used_set">link_valid_used_set</a></span>; <span class="tactic">eauto</span>.<br/>
+ <span class="tactic">rewrite</span> <span class="id">W</span>. <span class="id">constructor</span>; <span class="tactic">simpl</span>; <span class="tactic">intros</span>.<br/>
* <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_main">match_prog_main</a></span>; <span class="tactic">eauto</span>.<br/>
* <span class="tactic">rewrite</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_public">match_prog_public</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B1</span>), (<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_public">match_prog_public</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B2</span>). <span class="tactic">auto</span>.<br/>
* <span class="tactic">rewrite</span> ! <span class="id"><a href="compcert.common.Linking.html#prog_defmap_elements">prog_defmap_elements</a></span>, !<span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span> <span class="tactic">by</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_def">match_prog_def</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B1</span> <span class="id">id</span>), (<span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_def">match_prog_def</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">B2</span> <span class="id">id</span>).<br/>
{<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>)!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">gd1</span>|] <span class="id">eqn</span>:<span class="id">GD1</span>;<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>)!<span class="id">id</span> <span class="kwd">as</span> [<span class="id">gd2</span>|] <span class="id">eqn</span>:<span class="id">GD2</span>.<br/>
- <span class="comment">(*&nbsp;both&nbsp;defined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> (<span class="id">PUB1</span> &amp; <span class="id">PUB2</span> &amp; <span class="id">_</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQ1</span>: <span class="id">used1</span> <span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_public">used_public</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EQ2</span>: <span class="id">used2</span> <span class="id">id</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_public">used_public</a></span>; <span class="tactic">eauto</span>).<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">EQ1</span>, <span class="id">EQ2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span>, <span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">gd1</span>, <span class="id">gd2</span>; <span class="id">ss</span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">des_ifs</span>).<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f</span>, <span class="id">f0</span>; <span class="id">ss</span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">des_ifs</span>).<br/>
&nbsp;&nbsp;+ <span class="id">des_ifs</span>. <span class="tactic">do</span> 3 <span class="tactic">f_equal</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#transf_function">transf_function</a></span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">f2</span> <span class="id">into</span> <span class="id">f1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#PTree_map_extensionality">PTree_map_extensionality</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_instr_same">filter_instr_same</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">GD1</span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">PUB2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#functional_extensionality">Axioms.functional_extensionality</a></span>. <span class="id">i</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_comm">orb_comm</a></span>.<br/>
&nbsp;&nbsp;+ <span class="id">des_ifs</span>. <span class="tactic">do</span> 3 <span class="tactic">f_equal</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#transf_function">transf_function</a></span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">f2</span> <span class="id">into</span> <span class="id">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#PTree_map_extensionality">PTree_map_extensionality</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">V</span> <span class="id">A1</span> <span class="id">A2</span> <span class="id">C2</span> <span class="id">GD2</span> <span class="id">U</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_instr_same">filter_instr_same</a></span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">used1</span> <span class="id">used2</span> <span class="id">A1</span> <span class="id">A2</span>); <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">GD2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
- <span class="comment">(*&nbsp;left&nbsp;defined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_not_defined">used_not_defined</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">GD2</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">A</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_false_r">orb_false_r</a></span>. <span class="tactic">destruct</span> (<span class="id">used1</span> <span class="id">id</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span>, <span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des_ifs</span>. <span class="tactic">do</span> 3 <span class="tactic">f_equal</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#transf_function">transf_function</a></span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">f0</span> <span class="id">into</span> <span class="id">f1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#PTree_map_extensionality">PTree_map_extensionality</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_instr_same">filter_instr_same</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">GD1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#functional_extensionality">Axioms.functional_extensionality</a></span>. <span class="id">i</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_comm">orb_comm</a></span>.<br/>
&nbsp;&nbsp;+ <span class="tactic">replace</span> (<span class="id">used1</span> <span class="id">id</span>) <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">symmetry</span>. <span class="tactic">rewrite</span> <span class="id">A</span>, &lt;- <span class="id">U</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_main">used_main</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span>, <span class="id"><a href="compcert.backend.RTL.html#transf_function">transf_function</a></span>. <span class="id">des_ifs</span>; <span class="id">ss</span>; <span class="tactic">try</span> (<span class="tactic">do</span> 4 <span class="tactic">f_equal</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rename</span> <span class="id">f0</span> <span class="id">into</span> <span class="id">f1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#PTree_map_extensionality">PTree_map_extensionality</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_instr_same">filter_instr_same</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">GD1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#functional_extensionality">Axioms.functional_extensionality</a></span>. <span class="id">i</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_comm">orb_comm</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rename</span> <span class="id">f0</span> <span class="id">into</span> <span class="id">f1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#PTree_map_extensionality">PTree_map_extensionality</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_instr_same">filter_instr_same</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">GD1</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">f_equal</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Axioms.html#functional_extensionality">Axioms.functional_extensionality</a></span>. <span class="id">i</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_comm">orb_comm</a></span>.<br/>
- <span class="comment">(*&nbsp;right&nbsp;defined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_not_defined">used_not_defined</a></span>. <span class="id">eexact</span> <span class="id">A1</span>. <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span>|<span class="id">A</span>].<br/>
&nbsp;&nbsp;+ <span class="tactic">rewrite</span> <span class="id">A</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Bool.Bool.html#orb_false_l">orb_false_l</a></span>. <span class="tactic">destruct</span> (<span class="id">used2</span> <span class="id">id</span>); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.Coqlib.html#option_map">option_map</a></span>, <span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des_ifs</span>. <span class="tactic">do</span> 3 <span class="tactic">f_equal</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.backend.RTL.html#transf_function">transf_function</a></span>. <span class="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rename</span> <span class="id">f0</span> <span class="id">into</span> <span class="id">f1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#PTree_map_extensionality">PTree_map_extensionality</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_instr_same">filter_instr_same</a></span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">used1</span> <span class="id">used2</span> <span class="id">A1</span> <span class="id">A2</span>); <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">GD2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;+ <span class="tactic">replace</span> (<span class="id">used2</span> <span class="id">id</span>) <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#true">true</a></span>; <span class="id">cycle</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">symmetry</span>. <span class="tactic">rewrite</span> <span class="id">A</span>, <span class="id">U</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#used_main">used_main</a></span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#map_globdef">map_globdef</a></span>, <span class="id"><a href="compcert.backend.RTL.html#transf_function">transf_function</a></span>. <span class="id">des_ifs</span>; <span class="id">ss</span>; <span class="tactic">try</span> (<span class="tactic">do</span> 4 <span class="tactic">f_equal</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rename</span> <span class="id">f0</span> <span class="id">into</span> <span class="id">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#PTree_map_extensionality">PTree_map_extensionality</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_instr_same">filter_instr_same</a></span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">used1</span> <span class="id">used2</span> <span class="id">A1</span> <span class="id">A2</span>); <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">GD2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="tactic">rename</span> <span class="id">f0</span> <span class="id">into</span> <span class="id">f2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#PTree_map_extensionality">PTree_map_extensionality</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.demo.Unreadglobproof.html#filter_instr_same">filter_instr_same</a></span> <span class="id">p1</span> <span class="id">p2</span> <span class="id">used1</span> <span class="id">used2</span> <span class="id">A1</span> <span class="id">A2</span>); <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id">GD2</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id">i</span>. <span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
- <span class="comment">(*&nbsp;none&nbsp;defined&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">used1</span> <span class="id">id</span>), (<span class="id">used2</span> <span class="id">id</span>); <span class="tactic">auto</span>.<br/>
}<br/>
* <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_keys_norepet">PTree.elements_keys_norepet</a></span>.<br/>
+ <span class="tactic">unfold</span> <span class="id"><a href="compcert.demo.Unreadglob.html#check_program">check_program</a></span> <span class="kwd">in</span> *. <span class="tactic">unfold</span> <span class="id"><a href="compcert.lib.sflib.html#is_true">is_true</a></span> <span class="kwd">in</span> *. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#forallb_forall">forallb_forall</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">i</span>. <span class="tactic">rewrite</span> <span class="id">W</span> <span class="kwd">in</span> <span class="id">H0</span>. <span class="id">ss</span>. <span class="tactic">destruct</span> <span class="id">x</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_complete">PTree.elements_complete</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span> <span class="kwd">in</span> *; <span class="id">ss</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Linking.html#link_prog_merge">link_prog_merge</a></span> <span class="kwd">in</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> ((<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>) ! <span class="id">i</span>) <span class="id">eqn</span>:<span class="id">IN1</span>.<br/>
&nbsp;&nbsp;* <span class="id">exploit</span> <span class="id">C1</span>; <span class="tactic">eauto</span>. { <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap</a></span>; <span class="tactic">eauto</span>. } <span class="tactic">intro</span> <span class="id">DEF1</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">g</span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">ss</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> ((<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>) ! <span class="id">i</span>) <span class="id">eqn</span>:<span class="id">IN2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="kwd">Local</span> <span class="id">Opaque</span> <span class="id"><a href="compcert.demo.Unreadglob.html#check_globdef">check_globdef</a></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">g0</span>; <span class="id">ss</span>; <span class="id">des_ifs</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">f0</span>, <span class="id">f1</span>; <span class="id">ss</span>; <span class="id">des_ifs</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#check_globdef_easier">check_globdef_easier</a></span>; <span class="tactic">eauto</span>. <span class="id">s</span>. <span class="id">ii</span>. <span class="id">ss</span>. <span class="id">des</span>; <span class="tactic">eauto</span>. <span class="id">right</span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H0</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">clarify</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#in_prog_defmap_exists">in_prog_defmap_exists</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">gg</span>, <span class="id"><a href="compcert.common.Linking.html#link_prog_merge">link_prog_merge</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>) ! <span class="id">i</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>) ! <span class="id">i</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gg">gg</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="id">ss</span>. <span class="id">des_ifs</span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> (<span class="id">_</span>, <span class="id">gg</span>). <span class="id">ss</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span>; <span class="id">ss</span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">exploit</span> <span class="id">C2</span>; <span class="tactic">eauto</span>. { <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap</a></span>; <span class="tactic">eauto</span>. } <span class="tactic">intro</span> <span class="id">DEF2</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#check_globdef_easier">check_globdef_easier</a></span>; <span class="tactic">eauto</span>. <span class="id">s</span>. <span class="id">ii</span>. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id">U</span> <span class="kwd">in</span> *. <span class="id">des</span>; <span class="tactic">eauto</span>. <span class="id">right</span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H0</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">clarify</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#in_prog_defmap_exists">in_prog_defmap_exists</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">gg</span>, <span class="id"><a href="compcert.common.Linking.html#link_prog_merge">link_prog_merge</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>) ! <span class="id">i</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>) ! <span class="id">i</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gg">gg</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">destruct</span> ((<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>) ! <span class="id">i</span>) <span class="id">eqn</span>:<span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ss</span>. <span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ss</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> (<span class="id">_</span>, <span class="id">gg</span>). <span class="id">ss</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span>; <span class="id">ss</span>.<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clarify</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#check_globdef_easier">check_globdef_easier</a></span>; <span class="tactic">eauto</span>. <span class="id">s</span>. <span class="id">ii</span>. <span class="id">ss</span>. <span class="id">des</span>; <span class="tactic">eauto</span>. <span class="id">right</span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H0</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">clarify</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#in_prog_defmap_exists">in_prog_defmap_exists</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">gg</span>, <span class="id"><a href="compcert.common.Linking.html#link_prog_merge">link_prog_merge</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>) ! <span class="id">i</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>) ! <span class="id">i</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gg">gg</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="id">ss</span>. <span class="id">des_ifs</span>; <span class="tactic">eauto</span>. <span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> (<span class="id">_</span>, <span class="id">gg</span>). <span class="id">ss</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span>; <span class="id">ss</span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;* <span class="id">exploit</span> <span class="id">C2</span>; <span class="tactic">eauto</span>. { <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.AST.html#in_prog_defmap">in_prog_defmap</a></span>; <span class="tactic">eauto</span>. } <span class="tactic">intro</span> <span class="id">DEF2</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">g</span>; <span class="tactic">try</span> (<span class="tactic">by</span> <span class="id">ss</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">clarify</span>. <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#check_globdef_easier">check_globdef_easier</a></span>; <span class="tactic">eauto</span>. <span class="id">s</span>. <span class="id">ii</span>. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id">U</span> <span class="kwd">in</span> *. <span class="id">des</span>; <span class="tactic">eauto</span>. <span class="id">right</span>.<br/>
<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">clear</span> - <span class="id">H1</span> <span class="id">V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.AST.html#prog_defs_names">prog_defs_names</a></span> <span class="kwd">in</span> *. <span class="id">ss</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#in_map_iff">in_map_iff</a></span> <span class="kwd">in</span> *. <span class="id">des</span>. <span class="id">clarify</span>. <span class="tactic">destruct</span> <span class="id">x</span>; <span class="id">ss</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#in_prog_defmap_exists">in_prog_defmap_exists</a></span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">assert</span>(<span class="id">exists</span> <span class="id">gg</span>, <span class="id"><a href="compcert.common.Linking.html#link_prog_merge">link_prog_merge</a></span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>) ! <span class="id">i</span> (<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p2</span>) ! <span class="id">i</span> = <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#Some">Some</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#gg">gg</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="tactic">rewrite</span> <span class="id">H</span>. <span class="tactic">destruct</span> ((<span class="id"><a href="compcert.common.AST.html#prog_defmap">prog_defmap</a></span> <span class="id">p1</span>) ! <span class="id">i</span>) <span class="id">eqn</span>:<span class="id">T</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ss</span>. <span class="id">exploit</span> <span class="id">V</span>; <span class="tactic">eauto</span>. <span class="id">i</span>; <span class="id">des</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id">ss</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">des</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">eexists</span> (<span class="id">_</span>, <span class="id">gg</span>). <span class="id">ss</span>. <span class="id">esplits</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.elements_correct">PTree.elements_correct</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.lib.Maps.html#PTree.gcombine">PTree.gcombine</a></span>; <span class="id">ss</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Instance</span> <span class="id"><a name="TransfSelectionLink">TransfSelectionLink</a></span> : <span class="id"><a href="compcert.common.Linking.html#TransfLink">TransfLink</a></span> <span class="id"><a href="compcert.demo.Unreadglobproof.html#match_prog_weak">match_prog_weak</a></span> := <span class="id"><a href="compcert.demo.Unreadglobproof.html#link_match_program">link_match_program</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
