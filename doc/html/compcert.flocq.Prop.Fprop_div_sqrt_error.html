
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Fprop_div_sqrt_error</title>
<meta name="description" content="Documentation of Coq module Fprop_div_sqrt_error" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Fprop_div_sqrt_error</h1>
<div class="coq">
<br/>
<h1> Remainder of the division and square root are in the FLX format </h1>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Core.Fcore.html">Fcore</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html">Fcalc_ops</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.flocq.Prop.Fprop_relative.html">Fprop_relative</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="Fprop_divsqrt_error">Fprop_divsqrt_error</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_divsqrt_error.beta">beta</a></span> : <span class="id"><a href="compcert.flocq.Core.Fcore_Zaux.html#radix">radix</a></span>.<br/>
<span class="kwd">Notation</span> <span class="id"><a name="bpow">bpow</a></span> <span class="id">e</span> := (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow">bpow</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">e</span>).<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_divsqrt_error.prec">prec</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="generic_format_plus_prec">generic_format_plus_prec</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">fexp</span>, (<span class="kwd">forall</span> <span class="id">e</span>, (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#e">e</a></span>  &lt;= <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#e">e</a></span> - <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>)%<span class="id">Z</span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span> <span class="id">y</span> (<span class="id">fx</span> <span class="id">fy</span>: <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#float">float</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span>),<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#fx">fx</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#y">y</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#fy">fy</a></span>)%<span class="id">R</span> -&gt; (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span>+<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#y">y</a></span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>+<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#fx">fx</a></span>))%<span class="id">R</span> -&gt; (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span>+<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#y">y</a></span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>+<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#fy">fy</a></span>))%<span class="id">R</span><br/>
&nbsp;&nbsp;-&gt; <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#fexp">fexp</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span>+<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<span class="tactic">intros</span> <span class="id">fexp</span> <span class="id">Hfexp</span> <span class="id">x</span> <span class="id">y</span> <span class="id">fx</span> <span class="id">fy</span> <span class="id">Hx</span> <span class="id">Hy</span> <span class="id">H1</span> <span class="id">H2</span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id">x</span>+<span class="id">y</span>) 0); <span class="tactic">intros</span> <span class="id">H</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">H</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx</span>, <span class="id">Hy</span>, &lt;- <span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#F2R_plus">F2R_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_F2R">generic_format_F2R</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">_</span>.<br/>
<span class="id">case_eq</span> (<span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fplus">Fplus</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">fx</span> <span class="id">fy</span>).<br/>
<span class="tactic">intros</span> <span class="id">mz</span> <span class="id">ez</span> <span class="id">Hz</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hz</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmin">Zmin</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fx</span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fy</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#F2R_plus">F2R_plus</a></span>, &lt;- <span class="id">Hx</span>, &lt;- <span class="id">Hy</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_trans">Zle_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">Hfexp</span> <span class="id">_</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zplus_le_reg_l">Zplus_le_reg_l</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>; <span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta_le_bpow">ln_beta_le_bpow</a></span> <span class="kwd">with</span> (1 := <span class="id">H</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zmin.html#Zmin_case">Zmin_case</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fexp_Fplus">Fexp_Fplus</a></span>, <span class="id">Hz</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="ex_Fexp_canonic">ex_Fexp_canonic</a></span>: <span class="kwd">forall</span> <span class="id">fexp</span>, <span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span><br/>
&nbsp;&nbsp;-&gt; <span class="id">exists</span> <span class="id">fx</span>:<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#float">float</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span>, (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span>=<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#fx">fx</a></span>)%<span class="id">R</span> /\ <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#fx">fx</a></span> = <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#fexp">fexp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span>.<br/>
<span class="tactic">intros</span> <span class="id">fexp</span> <span class="id">x</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span>.<br/>
<span class="id">exists</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Float">Float</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Ztrunc">Ztrunc</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#scaled_mantissa">scaled_mantissa</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">fexp</span> <span class="id">x</span>)) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">fexp</span> <span class="id">x</span>)).<br/>
<span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<br/>
<span class="kwd">Context</span> { <span class="id">prec_gt_0_</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#Prec_gt_0">Prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span> }.<br/>
<br/>
<span class="kwd">Notation</span> <span class="id"><a name="format">format</a></span> := (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format">generic_format</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>)).<br/>
<span class="kwd">Notation</span> <span class="id"><a name="cexp">cexp</a></span> := (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>)).<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_divsqrt_error.choice">choice</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.Numbers.BinNums.html#Z">Z</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#bool">bool</a></span>.<br/>
<br/>
<br/>
<div class="doc">Remainder of the division in FLX </div>
<span class="kwd">Theorem</span> <span class="id"><a name="div_error_FLX">div_error_FLX</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">rnd</span> { <span class="id">Zrnd</span> : <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Valid_rnd">Valid_rnd</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#rnd">rnd</a></span> } <span class="id">x</span> <span class="id">y</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span> -&gt; <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#y">y</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#format">format</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span> - <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#rnd">rnd</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span>/<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#y">y</a></span>) * <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#y">y</a></span>)%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5691')">Proof with</div>
<div class="proofscript" id="proof5691">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">rnd</span> <span class="id">Zrnd</span> <span class="id">x</span> <span class="id">y</span> <span class="id">Hx</span> <span class="id">Hy</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> <span class="id">y</span> 0) <span class="kwd">as</span> [<span class="id">Zy</span>|<span class="id">Zy</span>].<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Zy</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_r">Rmult_0_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_0_r">Rminus_0_r</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) <span class="id">rnd</span> (<span class="id">x</span>/<span class="id">y</span>)) 0) <span class="kwd">as</span> [<span class="id">Hr</span>|<span class="id">Hr</span>].<br/>
<span class="tactic">rewrite</span> <span class="id">Hr</span>; <span class="id">ring_simplify</span> (<span class="id">x</span>-0*<span class="id">y</span>)%<span class="id">R</span>; <span class="tactic">assumption</span>.<br/>
<span class="tactic">assert</span> (<span class="id">Zx</span>: <span class="id">x</span> &lt;&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#R0">R0</a></span>).<br/>
<span class="id">contradict</span> <span class="id">Hr</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hr</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#ex_Fexp_canonic">ex_Fexp_canonic</a></span> <span class="id">_</span> <span class="id">x</span> <span class="id">Hx</span>) <span class="kwd">as</span> (<span class="id">fx</span>,(<span class="id">Hx1</span>,<span class="id">Hx2</span>)).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#ex_Fexp_canonic">ex_Fexp_canonic</a></span> <span class="id">_</span> <span class="id">y</span> <span class="id">Hy</span>) <span class="kwd">as</span> (<span class="id">fy</span>,(<span class="id">Hy1</span>,<span class="id">Hy2</span>)).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#ex_Fexp_canonic">ex_Fexp_canonic</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) <span class="id">rnd</span> (<span class="id">x</span> / <span class="id">y</span>))) <span class="kwd">as</span> (<span class="id">fr</span>,(<span class="id">Hr1</span>,<span class="id">Hr2</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#generic_format_plus_prec">generic_format_plus_prec</a></span> <span class="kwd">with</span> <span class="id">fx</span> (<span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fopp">Fopp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fmult">Fmult</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">fr</span> <span class="id">fy</span>)); <span class="tactic">trivial</span>.<br/>
<span class="tactic">intros</span> <span class="id">e</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#F2R_opp">F2R_opp</a></span>, <span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#F2R_mult">F2R_mult</a></span>, &lt;- <span class="id">Hr1</span>, &lt;- <span class="id">Hy1</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_relative.html#relative_error_FLX_ex">relative_error_FLX_ex</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#prec_gt_0">prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) <span class="id">rnd</span> (<span class="id">x</span> / <span class="id">y</span>)%<span class="id">R</span>) <span class="kwd">as</span> (<span class="id">eps</span>,(<span class="id">Heps1</span>,<span class="id">Heps2</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id">Heps2</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="tactic">replace</span> (-(<span class="id">x</span> + - (<span class="id">x</span> / <span class="id">y</span> * (1 + <span class="id">eps</span>) * <span class="id">y</span>)))%<span class="id">R</span> <span class="kwd">with</span> (<span class="id">x</span> * <span class="id">eps</span>)%<span class="id">R</span> <span class="tactic">by</span> <span class="id">now</span> <span class="id">field</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">x</span> * 1)%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">Heps1</span>).<br/>
<span class="id">change</span> 1%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> 0).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">generalize</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#prec_gt_0">prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>).<br/>
<span class="tactic">clear</span> ; <span class="tactic">omega</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hx2</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">x</span>) <span class="kwd">as</span> (<span class="id">ex</span>, <span class="id">Hex</span>).<br/>
<span class="tactic">simpl</span>.<br/>
<span class="id">specialize</span> (<span class="id">Hex</span> <span class="id">Zx</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#proj2">proj2</a></span> <span class="id">Hex</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="id">ring_simplify</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> (<span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fopp">Fopp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fmult">Fmult</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">fr</span> <span class="id">fy</span>))) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fy</span>)%<span class="id">Z</span>.<br/>
2: <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fopp">Fopp</a></span>, <span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fmult">Fmult</a></span>; <span class="tactic">destruct</span> <span class="id">fr</span>; <span class="tactic">destruct</span> <span class="id">fy</span>; <span class="id">now</span> <span class="tactic">simpl</span>.<br/>
<span class="tactic">replace</span> (<span class="id">x</span> + - (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) <span class="id">rnd</span> (<span class="id">x</span> / <span class="id">y</span>) * <span class="id">y</span>))%<span class="id">R</span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;(<span class="id">y</span> * (-(<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) <span class="id">rnd</span> (<span class="id">x</span> / <span class="id">y</span>) - <span class="id">x</span>/<span class="id">y</span>)))%<span class="id">R</span>.<br/>
2: <span class="id">field</span>; <span class="tactic">assumption</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">y</span> * <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_lt">Rabs_pos_lt</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>)) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fr</span>)).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hr1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_lt_ulp_round">error_lt_ulp_round</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_integral_contrapositive_currified">Rmult_integral_contrapositive_currified</a></span>; <span class="tactic">try</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_neq_0_compat">Rinv_neq_0_compat</a></span>; <span class="tactic">assumption</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
2: <span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Hr1</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id">Hr2</span>, &lt;- <span class="id">Hr1</span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>+(<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>+<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fy</span>))%<span class="id">Z</span> <span class="kwd">with</span> ((<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>+<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fy</span>)+<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>)%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_ge_0">bpow_ge_0</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hy2</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="id">ring_simplify</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span> + (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">y</span> - <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>))%<span class="id">Z</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">y</span>); <span class="tactic">simpl</span>.<br/>
<span class="id">left</span>; <span class="id">now</span> <span class="tactic">apply</span> <span class="id">a</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Remainder of the square in FLX (with p&gt;1) and rounding to nearest </div>
<span class="kwd">Variable</span> <span class="id"><a name="Fprop_divsqrt_error.Hp1">Hp1</a></span> : <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zlt">Zlt</a></span> 1 <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="sqrt_error_FLX_N">sqrt_error_FLX_N</a></span> :<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">x</span>, <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#format">format</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#format">format</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span> - <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rsqr">Rsqr</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.choice">choice</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#x">x</a></span>)))%<span class="id">R</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof5692')">Proof with</div>
<div class="proofscript" id="proof5692">
 <span class="tactic">auto</span> <span class="kwd">with</span> <span class="id">typeclass_instances</span>.<br/>
<span class="tactic">intros</span> <span class="id">x</span> <span class="id">Hx</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#total_order_T">total_order_T</a></span> <span class="id">x</span> 0) <span class="kwd">as</span> [[<span class="id">Hxz</span>|<span class="id">Hxz</span>]|<span class="id">Hxz</span>].<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rcase_abs">Rcase_abs</a></span> <span class="id">x</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rsqr">Rsqr</a></span>.<br/>
<span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_0_r">Rminus_0_r</a></span>.<br/>
<span class="tactic">elim</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_irrefl">Rlt_irrefl</a></span> 0).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_ge_trans">Rgt_ge_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hxz</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_0">sqrt_0</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round_0">round_0</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rsqr">Rsqr</a></span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_0_l">Rmult_0_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rminus_0_r">Rminus_0_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_0">generic_format_0</a></span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Req_dec">Req_dec</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.choice">choice</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) 0); <span class="tactic">intros</span> <span class="id">Hr</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hr</span>; <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rsqr">Rsqr</a></span>; <span class="id">ring_simplify</span> (<span class="id">x</span>-0*0)%<span class="id">R</span>; <span class="tactic">assumption</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#ex_Fexp_canonic">ex_Fexp_canonic</a></span> <span class="id">_</span> <span class="id">x</span> <span class="id">Hx</span>) <span class="kwd">as</span> (<span class="id">fx</span>,(<span class="id">Hx1</span>,<span class="id">Hx2</span>)).<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#ex_Fexp_canonic">ex_Fexp_canonic</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#round">round</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#Znearest">Znearest</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.choice">choice</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))) <span class="kwd">as</span> (<span class="id">fr</span>,(<span class="id">Hr1</span>,<span class="id">Hr2</span>)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_round">generic_format_round</a></span>...<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rminus">Rminus</a></span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#generic_format_plus_prec">generic_format_plus_prec</a></span> <span class="kwd">with</span> <span class="id">fx</span> (<span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fopp">Fopp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fmult">Fmult</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">fr</span> <span class="id">fr</span>)); <span class="tactic">trivial</span>.<br/>
<span class="tactic">intros</span> <span class="id">e</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_refl">Zle_refl</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rsqr">Rsqr</a></span>; <span class="id">now</span> <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#F2R_opp">F2R_opp</a></span>,<span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#F2R_mult">F2R_mult</a></span>, &lt;- <span class="id">Hr1</span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> <span class="id">x</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rabs_minus_le">Rabs_minus_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_0_sqr">Rle_0_sqr</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_relative.html#relative_error_N_FLX_ex">relative_error_N_FLX_ex</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#prec_gt_0">prec_gt_0</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.choice">choice</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) <span class="kwd">as</span> (<span class="id">eps</span>,(<span class="id">Heps1</span>,<span class="id">Heps2</span>)).<br/>
<span class="tactic">rewrite</span> <span class="id">Heps2</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqr.html#Rsqr_mult">Rsqr_mult</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#Rsqr_sqrt">Rsqr_sqrt</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span>. 2: <span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (5²/4²)%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqr.html#Rsqr_div">Rsqr_div</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqr.html#Rsqr_le_abs_1">Rsqr_le_abs_1</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_triang">Rabs_triang</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_R1">Rabs_R1</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_reg_l">Rplus_le_reg_l</a></span> <span class="kwd">with</span> (-1)%<span class="id">R</span>.<br/>
<span class="tactic">replace</span> (-1 + (1 + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">eps</span>))%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> <span class="id">eps</span>) <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (1 := <span class="id">Heps1</span>).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos_eq">Rabs_pos_eq</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_reg_l">Rmult_le_reg_l</a></span> <span class="kwd">with</span> 2%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_r">Rinv_r</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_1_l">Rmult_1_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> (-1)).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="tactic">replace</span> (2 * (-1 + 5 / 4))%<span class="id">R</span> <span class="kwd">with</span> (/2)%<span class="id">R</span> <span class="tactic">by</span> <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rinv_le">Rinv_le</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
<span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span> 2).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Z.pow_pos">Zpower_pos</a></span>. <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.BinInt.html#Zmult_1_r">Zmult_1_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zbool.html#Zle_bool_imp_le">Zle_bool_imp_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 2).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rdefinitions.html#Rdiv">Rdiv</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_pos">Rmult_le_pos</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span> 0 5).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rinv_0_lt_compat">Rinv_0_lt_compat</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 4).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 4).<br/>
<span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rsqr">Rsqr</a></span>.<br/>
<span class="tactic">replace</span> (5 * 5 / (4 * 4))%<span class="id">R</span> <span class="kwd">with</span> (25 * /16)%<span class="id">R</span> <span class="tactic">by</span> <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Rmult_le_reg_r">Rmult_le_reg_r</a></span> <span class="kwd">with</span> 16%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 16).<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rinv_l">Rinv_l</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_1_r">Rmult_1_r</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_le">Z2R_le</a></span> 25 32).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#Z2R_lt">Z2R_lt</a></span> 0 16).<br/>
<span class="tactic">rewrite</span> <span class="id">Hx2</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>, <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="id">ring_simplify</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span> + (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">x</span> - <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>))%<span class="id">Z</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">x</span>); <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_right">Rabs_right</a></span> <span class="id">x</span>).<br/>
<span class="tactic">apply</span> <span class="id">a</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_ge">Rgt_ge</a></span>.<br/>
<span class="comment">(*&nbsp;*)</span><br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> (<span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fopp">Fopp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fmult">Fmult</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> <span class="id">fr</span> <span class="id">fr</span>))) <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span> + <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>)%<span class="id">Z</span>.<br/>
2: <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fopp">Fopp</a></span>, <span class="id"><a href="compcert.flocq.Calc.Fcalc_ops.html#Fmult">Fmult</a></span>; <span class="tactic">destruct</span> <span class="id">fr</span>; <span class="id">now</span> <span class="tactic">simpl</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hr1</span>.<br/>
<span class="tactic">replace</span> (<span class="id">x</span> + - <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rsqr">Rsqr</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fr</span>))%<span class="id">R</span> <span class="kwd">with</span> (-((<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fr</span> - <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)*(<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fr</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)))%<span class="id">R</span>.<br/>
2: <span class="tactic">rewrite</span> &lt;- (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_sqrt">sqrt_sqrt</a></span> <span class="id">x</span>) <span class="tactic">at</span> 3; <span class="tactic">auto</span>.<br/>
2: <span class="tactic">unfold</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rsqr">Rsqr</a></span>; <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_Ropp">Rabs_Ropp</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_mult">Rabs_mult</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> ((/2*<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>))* <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fr</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_le_compat_r">Rmult_le_compat_r</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_pos">Rabs_pos</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (/2*<span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp">ulp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span>  (<span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>) (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fr</span>))%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hr1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#error_le_half_ulp_round">error_le_half_ulp_round</a></span>...<br/>
<span class="id">right</span>; <span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_ulp.html#ulp_neq_0">ulp_neq_0</a></span>.<br/>
2: <span class="id">now</span> <span class="tactic">rewrite</span> &lt;- <span class="id">Hr1</span>.<br/>
<span class="tactic">apply</span> <span class="tactic">f_equal</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hr2</span>, &lt;- <span class="id">Hr1</span>; <span class="tactic">trivial</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_comm">Rmult_comm</a></span>.<br/>
<span class="tactic">replace</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>+(<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>+<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>))%<span class="id">Z</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span> + (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>+<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>))%<span class="id">Z</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">rewrite</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_plus">bpow_plus</a></span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_assoc">Rmult_assoc</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Raxioms.html#Rmult_lt_compat_l">Rmult_lt_compat_l</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_gt_0">bpow_gt_0</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rmult_lt_reg_l">Rmult_lt_reg_l</a></span> <span class="kwd">with</span> (1 := <span class="id"><a href="http://coq.inria.fr/library/Coq.setoid_ring.RealField.html#Rlt_0_2">Rlt_0_2</a></span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fr</span> + <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)).<br/>
<span class="id">right</span>; <span class="id">field</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_lt_trans">Rle_lt_trans</a></span> <span class="kwd">with</span> (1:=<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs_triang">Rabs_triang</a></span> <span class="id">_</span> <span class="id">_</span>).<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fr</span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>))%<span class="id">R</span>.<br/>
<span class="tactic">rewrite</span> <span class="id">Hr2</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#canonic_exp">canonic_exp</a></span>; <span class="tactic">rewrite</span> <span class="id">Hr1</span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span>.<br/>
<span class="id">ring_simplify</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span> + (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fr</span>) - <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span>))%<span class="id">Z</span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fr</span>)); <span class="tactic">simpl</span>.<br/>
<span class="tactic">apply</span> <span class="id">a</span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hr1</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>)+ <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>))%<span class="id">R</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_lt_compat_r">Rplus_lt_compat_r</a></span>.<br/>
<span class="comment">(*&nbsp;.&nbsp;*)</span><br/>
<span class="tactic">replace</span> (2 * <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>))%<span class="id">R</span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>) + <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>))%<span class="id">R</span> <span class="tactic">by</span> <span class="tactic">ring</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rplus_le_compat_l">Rplus_le_compat_l</a></span>.<br/>
<span class="tactic">assert</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span> &lt;&gt; 0)%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rgt_not_eq">Rgt_not_eq</a></span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt_lt_R0">sqrt_lt_R0</a></span>.<br/>
<span class="tactic">destruct</span> (<span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#ln_beta">ln_beta</a></span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.beta">beta</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.R_sqrt.html#sqrt">sqrt</a></span> <span class="id">x</span>)) <span class="kwd">as</span> (<span class="id">es</span>,<span class="id">Es</span>).<br/>
<span class="id">specialize</span> (<span class="id">Es</span> <span class="id">H0</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_trans">Rle_trans</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> <span class="id">es</span>).<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">case</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.ZArith.Zorder.html#Zle_or_lt">Zle_or_lt</a></span> <span class="id">es</span> (<span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error.prec">prec</a></span> + <span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#Fexp">Fexp</a></span> <span class="id">fr</span>)) ; <span class="tactic">trivial</span>.<br/>
<span class="tactic">intros</span> <span class="id">H1</span>.<br/>
<span class="id">absurd</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.Rbasic_fun.html#Rabs">Rabs</a></span> (<span class="id"><a href="compcert.flocq.Core.Fcore_defs.html#F2R">F2R</a></span> <span class="id">fr</span>) &lt; <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#bpow">bpow</a></span> (<span class="id">es</span> - 1))%<span class="id">R</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rle_not_lt">Rle_not_lt</a></span>.<br/>
<span class="tactic">rewrite</span> &lt;- <span class="id">Hr1</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#abs_round_ge_generic">abs_round_ge_generic</a></span>...<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_generic_fmt.html#generic_format_bpow">generic_format_bpow</a></span>.<br/>
<span class="tactic">unfold</span> <span class="id"><a href="compcert.flocq.Core.Fcore_FLX.html#FLX_exp">FLX_exp</a></span>; <span class="tactic">omega</span>.<br/>
<span class="tactic">apply</span> <span class="id">Es</span>.<br/>
<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le_trans">Rlt_le_trans</a></span> <span class="kwd">with</span> (1:=<span class="id">H</span>).<br/>
<span class="tactic">apply</span> <span class="id"><a href="compcert.flocq.Core.Fcore_Raux.html#bpow_le">bpow_le</a></span>.<br/>
<span class="tactic">omega</span>.<br/>
<span class="id">now</span> <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Reals.RIneq.html#Rlt_le">Rlt_le</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.flocq.Prop.Fprop_div_sqrt_error.html#Fprop_divsqrt_error">Fprop_divsqrt_error</a></span>.<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
