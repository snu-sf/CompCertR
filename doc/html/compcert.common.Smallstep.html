
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module Smallstep</title>
<meta name="description" content="Documentation of Coq module Smallstep" />
<link href="coq2html.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="coq2html.js"> </script>
</head>

<body onload="hideAll('proofscript')">
<h1 class="title">Module Smallstep</h1>
<div class="coq">
<br/>
<div class="doc">Tools for small-step operational semantics </div>
<br/>
<div class="doc">This module defines generic operations and theorems over
  the one-step transition relations that are used to specify
  operational semantics in small-step style. </div>
<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relations.html">Relations</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Wellfounded.Wellfounded.html">Wellfounded</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Coqlib.html">Coqlib</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Events.html">Events</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.common.Globalenvs.html">Globalenvs</a></span>.<br/>
<span class="kwd">Require</span> <span class="kwd">Import</span> <span class="id"><a href="compcert.lib.Integers.html">Integers</a></span>.<br/>
<br/>
<span class="kwd">Set</span> <span class="kwd">Implicit</span> <span class="id">Arguments</span>.<br/>
<br/>
<h1> Closures of transitions relations </h1>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="CLOSURES">CLOSURES</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CLOSURES.genv">genv</a></span>: <span class="kwd">Type</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CLOSURES.state">state</a></span>: <span class="kwd">Type</span>.<br/>
<br/>
<div class="doc">A one-step transition relation has the following signature.
  It is parameterized by a global environment, which does not
  change during the transition.  It relates the initial state
  of the transition with its final state.  The <span class="bracket"><span class="id">trace</span></span> parameter
  captures the observable events possibly generated during the
  transition. </div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CLOSURES._step">_step</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.genv">genv</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
<div class="doc">No transitions: stuck state </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="nostep">nostep</a></span> (<span class="id">se</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>) (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.genv">genv</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">s</span>', ~(<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES._step">_step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#se">se</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>').<br/>
<br/>
<div class="doc">Zero, one or several transitions.  Also known as Kleene closure,
    or reflexive transitive closure. </div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CLOSURES.se">se</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span>.<br/>
<span class="kwd">Let</span> <span class="id"><a name="CLOSURES.step">step</a></span> := <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES._step">_step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.se">se</a></span>.<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="star">star</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.genv">genv</a></span>): <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="star_refl">star_refl</a></span>: <span class="kwd">forall</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="star_step">star_step</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_one">star_one</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1970')">Proof.</div>
<div class="proofscript" id="proof1970">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_step">star_step</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="id">traceEq</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_two">star_two</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1971')">Proof.</div>
<div class="proofscript" id="proof1971">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_step">star_step</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_one">star_one</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_three">star_three</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t3</span> <span class="id">s4</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t3">t3</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s4">s4</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t3">t3</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s4">s4</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1972')">Proof.</div>
<div class="proofscript" id="proof1972">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_step">star_step</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_two">star_two</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_four">star_four</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t3</span> <span class="id">s4</span> <span class="id">t4</span> <span class="id">s5</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t3">t3</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s4">s4</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s4">s4</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t4">t4</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s5">s5</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t3">t3</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t4">t4</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s5">s5</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1973')">Proof.</div>
<div class="proofscript" id="proof1973">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_step">star_step</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_three">star_three</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_trans">star_trans</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>, <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1974')">Proof.</div>
<div class="proofscript" id="proof1974">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">H0</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_step">star_step</a></span>; <span class="tactic">eauto</span>. <span class="id">traceEq</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_left">star_left</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<span class="kwd">Proof</span> <span class="id"><a href="compcert.common.Smallstep.html#star_step">star_step</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_right">star_right</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1975')">Proof.</div>
<div class="proofscript" id="proof1975">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>. <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_one">star_one</a></span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_E0_ind">star_E0_ind</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">s</span>, <span class="id"><a href="compcert.common.Smallstep.html#P">P</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">s3</span>, <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#P">P</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#P">P</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#P">P</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1976')">Proof.</div>
<div class="proofscript" id="proof1976">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ge</span> <span class="id">P</span> <span class="id">BASE</span> <span class="id">REC</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id">ge</span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> -&gt; <span class="id">P</span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Events.html#Eapp_E0_inv">Eapp_E0_inv</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">H2</span>). <span class="tactic">subst</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">One or several transitions.  Also known as the transitive closure. </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="plus">plus</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.genv">genv</a></span>): <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="plus_left">plus_left</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_one">plus_one</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1977')">Proof.</div>
<div class="proofscript" id="proof1977">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="id">traceEq</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_two">plus_two</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1978')">Proof.</div>
<div class="proofscript" id="proof1978">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_one">star_one</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_three">plus_three</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t3</span> <span class="id">s4</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t3">t3</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s4">s4</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t3">t3</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s4">s4</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1979')">Proof.</div>
<div class="proofscript" id="proof1979">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_two">star_two</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_four">plus_four</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t3</span> <span class="id">s4</span> <span class="id">t4</span> <span class="id">s5</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t3">t3</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s4">s4</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s4">s4</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t4">t4</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s5">s5</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t3">t3</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t4">t4</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s5">s5</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1980')">Proof.</div>
<div class="proofscript" id="proof1980">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_three">star_three</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_star">plus_star</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1981')">Proof.</div>
<div class="proofscript" id="proof1981">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_step">star_step</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_right">plus_right</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1982')">Proof.</div>
<div class="proofscript" id="proof1982">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">simpl</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#Eapp_assoc">Eapp_assoc</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_right">star_right</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">plus_left</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1983')">Proof.</div>
<div class="proofscript" id="proof1983">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id">plus_right</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1984')">Proof.</div>
<div class="proofscript" id="proof1984">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_right">plus_right</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_star_trans">plus_star_trans</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1985')">Proof.</div>
<div class="proofscript" id="proof1985">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">traceEq</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_plus_trans">star_plus_trans</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1986')">Proof.</div>
<div class="proofscript" id="proof1986">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#Eapp_assoc">Eapp_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_trans">plus_trans</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1987')">Proof.</div>
<div class="proofscript" id="proof1987">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star_trans">plus_star_trans</a></span>. <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_inv">plus_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> \/ <span class="id">exists</span> <span class="id">s</span>', <span class="id">exists</span> <span class="id">t1</span>, <span class="id">exists</span> <span class="id">t2</span>, <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id">s</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id">s</span>' <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1988')">Proof.</div>
<div class="proofscript" id="proof1988">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">inversion</span> <span class="id">H</span>; <span class="tactic">subst</span>. <span class="tactic">inversion</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#E0_right">E0_right</a></span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="id">exists</span> <span class="id">s3</span>; <span class="id">exists</span> <span class="id">t1</span>; <span class="id">exists</span> (<span class="id">t0</span> ** <span class="id">t3</span>); <span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_inv">star_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>) \/ <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1989')">Proof.</div>
<div class="proofscript" id="proof1989">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">left</span>; <span class="tactic">auto</span>. <span class="id">right</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_ind2">plus_ind2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#P">P</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>) -&gt;<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t1</span> <span class="id">s2</span> <span class="id">t2</span> <span class="id">s3</span> <span class="id">t</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#P">P</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#P">P</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#P">P</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1990')">Proof.</div>
<div class="proofscript" id="proof1990">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ge</span> <span class="id">P</span> <span class="id">BASE</span> <span class="id">IND</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id">ge</span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s0</span> <span class="id">t0</span>, <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id">ge</span> <span class="id"><a href="compcert.common.Smallstep.html#s0">s0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t0">t0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">P</span> <span class="id"><a href="compcert.common.Smallstep.html#s0">s0</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#t0">t0</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#E0_right">E0_right</a></span>. <span class="tactic">apply</span> <span class="id">BASE</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">IND</span>. <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">subst</span> <span class="id">t</span>. <span class="tactic">eapply</span> <span class="id">IHstar</span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="plus_E0_ind">plus_E0_ind</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> (<span class="id">P</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="kwd">Prop</span>),<br/>
&nbsp;&nbsp;(<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">s3</span>, <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#P">P</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>) -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#P">P</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1991')">Proof.</div>
<div class="proofscript" id="proof1991">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#Eapp_E0_inv">Eapp_E0_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> <span class="id">B</span>]; <span class="tactic">subst</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Counted sequences of transitions </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="starN">starN</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.genv">genv</a></span>): <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="starN_refl">starN_refl</a></span>: <span class="kwd">forall</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#starN">starN</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="starN_step">starN_step</a></span>: <span class="kwd">forall</span> <span class="id">n</span> <span class="id">s</span> <span class="id">t</span> <span class="id">t1</span> <span class="id">s</span>' <span class="id">t2</span> <span class="id">s</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id">s</span>' -&gt; <span class="id"><a href="compcert.common.Smallstep.html#starN">starN</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span> <span class="id">s</span>' <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id">s</span>'' -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#starN">starN</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>''.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="starN_star">starN_star</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">n</span> <span class="id">s</span> <span class="id">t</span> <span class="id">s</span>', <span class="id"><a href="compcert.common.Smallstep.html#starN">starN</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>' -&gt; <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1992')">Proof.</div>
<div class="proofscript" id="proof1992">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="star_starN">star_starN</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s</span> <span class="id">t</span> <span class="id">s</span>', <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>' -&gt; <span class="id">exists</span> <span class="id">n</span>, <span class="id"><a href="compcert.common.Smallstep.html#starN">starN</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1993')">Proof.</div>
<div class="proofscript" id="proof1993">
&nbsp;&nbsp;<span class="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>; <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHstar</span> <span class="kwd">as</span> [<span class="id">n</span> <span class="id">P</span>]. <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id">n</span>); <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Infinitely many transitions </div>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="forever">forever</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.genv">genv</a></span>): <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="forever_intro">forever_intro</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span> <span class="id">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#forever">forever</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever">forever</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> *** <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_forever">star_forever</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span>, <span class="id"><a href="compcert.common.Smallstep.html#forever">forever</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever">forever</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> *** <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1994')">Proof.</div>
<div class="proofscript" id="proof1994">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#Eappinf_assoc">Eappinf_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">An alternate, equivalent definition of <span class="bracket"><span class="id">forever</span></span> that is useful
    for coinductive reasoning. </div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CLOSURES.A">A</a></span>: <span class="kwd">Type</span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="CLOSURES.order">order</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.A">A</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.A">A</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="forever_N">forever_N</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.genv">genv</a></span>) : <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.A">A</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="forever_N_star">forever_N_star</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">T1</span> <span class="id">T2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.order">order</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a2">a2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a1">a1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_N">forever_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a2">a2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T2">T2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#T1">T1</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> *** <span class="id"><a href="compcert.common.Smallstep.html#T2">T2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_N">forever_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a1">a1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T1">T1</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="forever_N_plus">forever_N_plus</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span> <span class="id">a1</span> <span class="id">a2</span> <span class="id">T1</span> <span class="id">T2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_N">forever_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a2">a2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T2">T2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#T1">T1</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> *** <span class="id"><a href="compcert.common.Smallstep.html#T2">T2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_N">forever_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a1">a1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T1">T1</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="CLOSURES.order_wf">order_wf</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.order">order</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forever_N_inv">forever_N_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">a</span> <span class="id">s</span> <span class="id">T</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_N">forever_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a">a</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">s</span>', <span class="id">exists</span> <span class="id">a</span>', <span class="id">exists</span> <span class="id">T</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#forever_N">forever_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id">a</span>' <span class="id">s</span>' <span class="id">T</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> *** <span class="id">T</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1995')">Proof.</div>
<div class="proofscript" id="proof1995">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ge</span> <span class="id">a0</span>. <span class="tactic">pattern</span> <span class="id">a0</span>. <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_ind">well_founded_ind</a></span> <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.order_wf">order_wf</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;star&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;no&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">change</span> (<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> *** <span class="id">T2</span>) <span class="kwd">with</span> <span class="id">T2</span>. <span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">with</span> <span class="id">a2</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;at&nbsp;least&nbsp;one&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t1</span>; <span class="id">exists</span> <span class="id">s0</span>; <span class="id">exists</span> <span class="id">x</span>; <span class="id">exists</span> (<span class="id">t2</span> *** <span class="id">T2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">split</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forever_N_star">forever_N_star</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#Eappinf_assoc">Eappinf_assoc</a></span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;plus&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">t1</span>; <span class="id">exists</span> <span class="id">s0</span>; <span class="id">exists</span> <span class="id">a2</span>; <span class="id">exists</span> (<span class="id">t2</span> *** <span class="id">T2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forever_N_plus">forever_N_plus</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Events.html#Eappinf_assoc">Eappinf_assoc</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forever_N_forever">forever_N_forever</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">a</span> <span class="id">s</span> <span class="id">T</span>, <span class="id"><a href="compcert.common.Smallstep.html#forever_N">forever_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a">a</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#forever">forever</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1996')">Proof.</div>
<div class="proofscript" id="proof1996">
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COINDHYP</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Smallstep.html#forever_N_inv">forever_N_inv</a></span> <span class="id">H</span>) <span class="kwd">as</span> [<span class="id">t</span> [<span class="id">s</span>' [<span class="id">a</span>' [<span class="id">T</span>' [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]]]]]].<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id">R</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#forever_intro">forever_intro</a></span> <span class="kwd">with</span> <span class="id">s</span>'. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">COINDHYP</span> <span class="kwd">with</span> <span class="id">a</span>'; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Yet another alternative definition of <span class="bracket"><span class="id">forever</span></span>. </div>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="forever_plus">forever_plus</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.genv">genv</a></span>) : <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="forever_plus_intro">forever_plus_intro</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span> <span class="id">T1</span> <span class="id">T2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_plus">forever_plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T2">T2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#T1">T1</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> *** <span class="id"><a href="compcert.common.Smallstep.html#T2">T2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_plus">forever_plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T1">T1</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forever_plus_inv">forever_plus_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s</span> <span class="id">T</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_plus">forever_plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s</span>', <span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">T</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#forever_plus">forever_plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id">s</span>' <span class="id">T</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> *** <span class="id">T</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1997')">Proof.</div>
<div class="proofscript" id="proof1997">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="id">exists</span> <span class="id">s0</span>; <span class="id">exists</span> <span class="id">t1</span>; <span class="id">exists</span> (<span class="id">t2</span> *** <span class="id">T2</span>).<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#star_inv">star_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">P</span> <span class="id">Q</span>] | <span class="id">R</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span>. <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">traceEq</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forever_plus_forever">forever_plus_forever</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s</span> <span class="id">T</span>, <span class="id"><a href="compcert.common.Smallstep.html#forever_plus">forever_plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#forever">forever</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1998')">Proof.</div>
<div class="proofscript" id="proof1998">
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COINDHYP</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Smallstep.html#forever_plus_inv">forever_plus_inv</a></span> <span class="id">H</span>) <span class="kwd">as</span> [<span class="id">s</span>' [<span class="id">t</span> [<span class="id">T</span>' [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]]]]].<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Infinitely many silent transitions </div>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="forever_silent">forever_silent</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.genv">genv</a></span>): <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="forever_silent_intro">forever_silent_intro</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#forever_silent">forever_silent</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_silent">forever_silent</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span>.<br/>
<br/>
<div class="doc">An alternate definition. </div>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="forever_silent_N">forever_silent_N</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.genv">genv</a></span>) : <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.A">A</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="forever_silent_N_star">forever_silent_N_star</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">a1</span> <span class="id">a2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.order">order</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a2">a2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a1">a1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N">forever_silent_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a2">a2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N">forever_silent_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a1">a1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="forever_silent_N_plus">forever_silent_N_plus</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">a1</span> <span class="id">a2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N">forever_silent_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a2">a2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N">forever_silent_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a1">a1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forever_silent_N_inv">forever_silent_N_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">a</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N">forever_silent_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a">a</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s</span>', <span class="id">exists</span> <span class="id">a</span>',<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N">forever_silent_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id">a</span>' <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof1999')">Proof.</div>
<div class="proofscript" id="proof1999">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">ge</span> <span class="id">a0</span>. <span class="tactic">pattern</span> <span class="id">a0</span>. <span class="tactic">apply</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_ind">well_founded_ind</a></span> <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.order_wf">order_wf</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;star&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;no&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">H</span> <span class="kwd">with</span> <span class="id">a2</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;at&nbsp;least&nbsp;one&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#Eapp_E0_inv">Eapp_E0_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s0</span>; <span class="id">exists</span> <span class="id">x</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N_star">forever_silent_N_star</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;plus&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#Eapp_E0_inv">Eapp_E0_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s0</span>; <span class="id">exists</span> <span class="id">a2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N_plus">forever_silent_N_plus</a></span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forever_silent_N_forever">forever_silent_N_forever</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">a</span> <span class="id">s</span>, <span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N">forever_silent_N</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#a">a</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#forever_silent">forever_silent</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2000')">Proof.</div>
<div class="proofscript" id="proof2000">
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COINDHYP</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N_inv">forever_silent_N_inv</a></span> <span class="id">H</span>) <span class="kwd">as</span> [<span class="id">s</span>' [<span class="id">a</span>' [<span class="id">P</span> <span class="id">Q</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#forever_silent_intro">forever_silent_intro</a></span> <span class="kwd">with</span> <span class="id">s</span>'. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id">COINDHYP</span> <span class="kwd">with</span> <span class="id">a</span>'; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Infinitely many non-silent transitions </div>
<br/>
<span class="kwd">CoInductive</span> <span class="id"><a name="forever_reactive">forever_reactive</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.genv">genv</a></span>): <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES.state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="forever_reactive_intro">forever_reactive_intro</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#forever_reactive">forever_reactive</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_reactive">forever_reactive</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> *** <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_forever_reactive">star_forever_reactive</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">ge</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span> <span class="id">T</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#forever_reactive">forever_reactive</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_reactive">forever_reactive</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> *** <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2001')">Proof.</div>
<div class="proofscript" id="proof2001">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">rewrite</span> &lt;- <span class="id"><a href="compcert.common.Events.html#Eappinf_assoc">Eappinf_assoc</a></span>. <span class="id">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intro</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#Eapp_E0_inv">Eapp_E0_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">P</span> <span class="id">Q</span>]. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#CLOSURES">CLOSURES</a></span>.<br/>
<br/>
<h1> Transition semantics </h1>
<br/>
<div class="doc">The general form of a transition semantics. </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="semantics">semantics</a></span> : <span class="kwd">Type</span> := <span class="id"><a name="Semantics_gen">Semantics_gen</a></span> {<br/>
&nbsp;&nbsp;<span class="id"><a name="state">state</a></span>: <span class="kwd">Type</span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="genvtype">genvtype</a></span>: <span class="kwd">Type</span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="step">step</a></span> : <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#genvtype">genvtype</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> -&gt; <span class="kwd">Prop</span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="initial_state">initial_state</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> -&gt; <span class="kwd">Prop</span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="final_state">final_state</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span> -&gt; <span class="kwd">Prop</span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="globalenv">globalenv</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#genvtype">genvtype</a></span>;<br/>
&nbsp;&nbsp;<span class="id"><a name="symbolenv">symbolenv</a></span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span><br/>
}.<br/>
<br/>
<div class="doc">The form used in earlier CompCert versions, for backward compatibility. </div>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="Semantics">Semantics</a></span> {<span class="id">state</span> <span class="id">funtype</span> <span class="id">vartype</span>: <span class="kwd">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">step</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Senv.t">Senv.t</a></span> -&gt; <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#funtype">funtype</a></span> <span class="id"><a href="compcert.common.Smallstep.html#vartype">vartype</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">initial_state</span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">final_state</span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">globalenv</span>: <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#funtype">funtype</a></span> <span class="id"><a href="compcert.common.Smallstep.html#vartype">vartype</a></span>) :=<br/>
&nbsp;&nbsp;{| <span class="id"><a href="compcert.common.Smallstep.html#Semantics_gen">state</a></span> := <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">genvtype</span> := <span class="id"><a href="compcert.common.Globalenvs.html#Genv.t">Genv.t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#funtype">funtype</a></span> <span class="id"><a href="compcert.common.Smallstep.html#vartype">vartype</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">step</span> := <span class="id"><a href="compcert.common.Smallstep.html#step">step</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">initial_state</span> := <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">final_state</span> := <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">globalenv</span> := <span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">symbolenv</span> := <span class="id"><a href="compcert.common.Globalenvs.html#Genv.to_senv">Genv.to_senv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> |}.<br/>
<br/>
<div class="doc">Handy notations. </div>
<br/>
<span class="kwd">Notation</span> " '<span class="id">Step</span>' <span class="id">L</span> " := (<span class="id"><a href="compcert.common.Smallstep.html#step">step</a></span> <span class="id">L</span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id">L</span>) (<span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> <span class="id">L</span>)) (<span class="tactic">at</span> <span class="id">level</span> 1) : <span class="id">smallstep_scope</span>.<br/>
<span class="kwd">Notation</span> " '<span class="id">Star</span>' <span class="id">L</span> " := (<span class="id"><a href="compcert.common.Smallstep.html#star">star</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#step">step</a></span> <span class="id">L</span>) (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id">L</span>) (<span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> <span class="id">L</span>)) (<span class="tactic">at</span> <span class="id">level</span> 1) : <span class="id">smallstep_scope</span>.<br/>
<span class="kwd">Notation</span> " '<span class="id">Plus</span>' <span class="id">L</span> " := (<span class="id"><a href="compcert.common.Smallstep.html#plus">plus</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#step">step</a></span> <span class="id">L</span>) (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id">L</span>) (<span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> <span class="id">L</span>)) (<span class="tactic">at</span> <span class="id">level</span> 1) : <span class="id">smallstep_scope</span>.<br/>
<span class="kwd">Notation</span> " '<span class="id">Forever_silent</span>' <span class="id">L</span> " := (<span class="id"><a href="compcert.common.Smallstep.html#forever_silent">forever_silent</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#step">step</a></span> <span class="id">L</span>) (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id">L</span>) (<span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> <span class="id">L</span>)) (<span class="tactic">at</span> <span class="id">level</span> 1) : <span class="id">smallstep_scope</span>.<br/>
<span class="kwd">Notation</span> " '<span class="id">Forever_reactive</span>' <span class="id">L</span> " := (<span class="id"><a href="compcert.common.Smallstep.html#forever_reactive">forever_reactive</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#step">step</a></span> <span class="id">L</span>) (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id">L</span>) (<span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> <span class="id">L</span>)) (<span class="tactic">at</span> <span class="id">level</span> 1) : <span class="id">smallstep_scope</span>.<br/>
<span class="kwd">Notation</span> " '<span class="id">Nostep</span>' <span class="id">L</span> " := (<span class="id"><a href="compcert.common.Smallstep.html#nostep">nostep</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#step">step</a></span> <span class="id">L</span>) (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id">L</span>) (<span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> <span class="id">L</span>)) (<span class="tactic">at</span> <span class="id">level</span> 1) : <span class="id">smallstep_scope</span>.<br/>
<br/>
<span class="kwd">Open</span> <span class="kwd">Scope</span> <span class="id">smallstep_scope</span>.<br/>
<br/>
<h1> Forward simulations between two transition semantics. </h1>
<br/>
<div class="doc">The general form of a forward simulation. </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="fsim_properties">fsim_properties</a></span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>) (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">match_states</span>: <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> -&gt; <span class="kwd">Prop</span>) : <span class="kwd">Prop</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="fsim_order_wf">fsim_order_wf</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="fsim_match_initial_states">fsim_match_initial_states</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>, <span class="id">exists</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="fsim_match_final_states">fsim_match_final_states</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="fsim_simulation">fsim_simulation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' \/ (<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id">i</span>' <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>';<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="fsim_public_preserved">fsim_public_preserved</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#id">id</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#id">id</a></span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="id">Arguments</span> <span class="id"><a href="compcert.common.Smallstep.html#fsim_properties">fsim_properties</a></span>: <span class="tactic">clear</span> <span class="id">implicits</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="forward_simulation">forward_simulation</a></span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Forward_simulation">Forward_simulation</a></span> (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">match_states</span>: <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">props</span>: <span class="id"><a href="compcert.common.Smallstep.html#fsim_properties">fsim_properties</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span>).<br/>
<br/>
<span class="id">Arguments</span> <span class="id"><a href="compcert.common.Smallstep.html#Forward_simulation">Forward_simulation</a></span> {<span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span>} <span class="id">order</span> <span class="id">match_states</span> <span class="id">props</span>.<br/>
<br/>
<div class="doc">An alternate form of the simulation diagram </div>
<br/>
<span class="kwd">Lemma</span> <span class="id">fsim_simulation</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span>, <span class="id"><a href="compcert.common.Smallstep.html#fsim_properties">fsim_properties</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s2</span>', <span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>')<br/>
&nbsp;&nbsp;\/ (<span class="id">exists</span> <span class="id">i</span>', <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id">i</span>' <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2002')">Proof.</div>
<div class="proofscript" id="proof2002">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#fsim_simulation">fsim_simulation</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]]]. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">exists</span> <span class="id">i</span>'; <span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> <span class="id">i</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">exists</span> <span class="id">i</span>'; <span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Forward simulation diagrams. </h2>
<br/>
<div class="doc">Various simulation diagrams that imply forward simulation </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS">FORWARD_SIMU_DIAGRAMS</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.L1">L1</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.L2">L2</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.public_preserved">public_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#id">id</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#id">id</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.match_initial_states">match_initial_states</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.match_final_states">match_final_states</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span>.<br/>
<br/>
<div class="doc">Simulation when one transition in the first program
    corresponds to zero, one or several transitions in the second program.
    However, there is no stuttering: infinitely many transitions
    in the source program must correspond to infinitely many
    transitions in the second program. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR_WF">SIMULATION_STAR_WF</a></span>.<br/>
<br/>
<div class="doc"><span class="bracket"><span class="id">order</span></span> is a well-founded ordering associated with states
  of the first semantics.  Stuttering steps must correspond
  to states that decrease w.r.t. <span class="bracket"><span class="id">order</span></span>. </div>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR_WF.order">order</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR_WF.order_wf">order_wf</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR_WF.order">order</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR_WF.simulation">simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>',<br/>
&nbsp;&nbsp;(<span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' \/ (<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR_WF.order">order</a></span> <span class="id">s1</span>' <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span>))<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id">s1</span>' <span class="id">s2</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forward_simulation_star_wf">forward_simulation_star_wf</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2003')">Proof.</div>
<div class="proofscript" id="proof2003">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#Forward_simulation">Forward_simulation</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR_WF.order">order</a></span> (<span class="kwd">fun</span> <span class="id">idx</span> <span class="id">s1</span> <span class="id">s2</span> =&gt; <span class="id"><a href="compcert.common.Smallstep.html#idx">idx</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>);<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
- <span class="tactic">auto</span>.<br/>
- <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_initial_states">match_initial_states</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s2</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s1</span>; <span class="id">exists</span> <span class="id">s2</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_final_states">match_final_states</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H0</span>. <span class="tactic">subst</span> <span class="id">i</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR_WF.simulation">simulation</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s1</span>'; <span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">intuition</span> <span class="tactic">auto</span>.<br/>
- <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR_WF">SIMULATION_STAR_WF</a></span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR">SIMULATION_STAR</a></span>.<br/>
<br/>
<div class="doc">We now consider the case where we have a nonnegative integer measure
  associated with states of the first semantics.  It must decrease when we take
  a stuttering step. </div>
<br/>
<span class="kwd">Variable</span> <span class="kwd">measure</span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR.simulation">simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">s2</span>', <span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id">s1</span>' <span class="id">s2</span>')<br/>
&nbsp;&nbsp;\/ (<span class="kwd">measure</span> <span class="id">s1</span>' &lt; <span class="kwd">measure</span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id">s1</span>' <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>)%<span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forward_simulation_star">forward_simulation_star</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2004')">Proof.</div>
<div class="proofscript" id="proof2004">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation_star_wf">forward_simulation_star_wf</a></span> <span class="kwd">with</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#ltof">ltof</a></span> <span class="id">_</span> <span class="kwd">measure</span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#well_founded_ltof">well_founded_ltof</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR.simulation">simulation</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]] | [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>; <span class="tactic">split</span>. <span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">rewrite</span> <span class="id">B</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_STAR">SIMULATION_STAR</a></span>.<br/>
<br/>
<div class="doc">Simulation when one transition in the first program corresponds
    to one or several transitions in the second program. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.SIMULATION_PLUS">SIMULATION_PLUS</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.SIMULATION_PLUS.simulation">simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>', <span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id">s1</span>' <span class="id">s2</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forward_simulation_plus">forward_simulation_plus</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2005')">Proof.</div>
<div class="proofscript" id="proof2005">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation_star">forward_simulation_star</a></span> <span class="kwd">with</span> (<span class="kwd">measure</span> := <span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_PLUS.simulation">simulation</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_PLUS">SIMULATION_PLUS</a></span>.<br/>
<br/>
<div class="doc">Lock-step simulation: each transition in the first semantics
    corresponds to exactly one transition in the second semantics. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.SIMULATION_STEP">SIMULATION_STEP</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.SIMULATION_STEP.simulation">simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id">s1</span>' <span class="id">s2</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forward_simulation_step">forward_simulation_step</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2006')">Proof.</div>
<div class="proofscript" id="proof2006">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation_plus">forward_simulation_plus</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_STEP.simulation">simulation</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_STEP">SIMULATION_STEP</a></span>.<br/>
<br/>
<div class="doc">Simulation when one transition in the first program
    corresponds to zero or one transitions in the second program.
    However, there is no stuttering: infinitely many transitions
    in the source program must correspond to infinitely many
    transitions in the second program. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.SIMULATION_OPT">SIMULATION_OPT</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="kwd">measure</span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> -&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FORWARD_SIMU_DIAGRAMS.SIMULATION_OPT.simulation">simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">s2</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id">s1</span>' <span class="id">s2</span>')<br/>
&nbsp;&nbsp;\/ (<span class="kwd">measure</span> <span class="id">s1</span>' &lt; <span class="kwd">measure</span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id">s1</span>' <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>)%<span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forward_simulation_opt">forward_simulation_opt</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.L2">L2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2007')">Proof.</div>
<div class="proofscript" id="proof2007">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation_star">forward_simulation_star</a></span> <span class="kwd">with</span> <span class="kwd">measure</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_OPT.simulation">simulation</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]] | [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS.SIMULATION_OPT">SIMULATION_OPT</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_SIMU_DIAGRAMS">FORWARD_SIMU_DIAGRAMS</a></span>.<br/>
<br/>
<h2> Forward simulation of transition sequences </h2>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="SIMULATION_SEQUENCES">SIMULATION_SEQUENCES</a></span>.<br/>
<br/>
<span class="kwd">Context</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span> (<span class="id">S</span>: <span class="id"><a href="compcert.common.Smallstep.html#fsim_properties">fsim_properties</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="simulation_star">simulation_star</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s2</span>', <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2008')">Proof.</div>
<div class="proofscript" id="proof2008">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>; <span class="id">exists</span> <span class="id">s2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#fsim_simulation">fsim_simulation</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHstar</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>'' [<span class="id">s2</span>'' [<span class="id">C</span> <span class="id">D</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>''; <span class="id">exists</span> <span class="id">s2</span>''; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="simulation_plus">simulation_plus</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s2</span>', <span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>')<br/>
&nbsp;&nbsp;\/ (<span class="id">exists</span> <span class="id">i</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Operators.html#clos_trans">clos_trans</a></span> <span class="id">_</span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.order">order</a></span> <span class="id">i</span>' <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2009')">Proof.</div>
<div class="proofscript" id="proof2009">
&nbsp;&nbsp;<span class="tactic">induction</span> 1 <span class="kwd">using</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_ind2">plus_ind2</a></span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">fsim_simulation</span>'; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">A</span> | [<span class="id">i</span>' <span class="id">A</span>]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> <span class="id">i</span>'; <span class="tactic">intuition</span>.<br/>
<span class="comment">(*&nbsp;inductive&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">fsim_simulation</span>'; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">i</span>' [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]]] | [<span class="id">i</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#simulation_star">simulation_star</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>'' [<span class="id">s2</span>'' [<span class="id">P</span> <span class="id">Q</span>]]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">exists</span> <span class="id">i</span>''; <span class="id">exists</span> <span class="id">s2</span>''; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star_trans">plus_star_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHplus</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">i</span>'' [<span class="id">s2</span>'' [<span class="id">P</span> <span class="id">Q</span>]]] | [<span class="id">i</span>'' [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]]]].<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span>. <span class="id">left</span>; <span class="id">exists</span> <span class="id">i</span>''; <span class="id">exists</span> <span class="id">s2</span>''; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span>. <span class="id">right</span>; <span class="id">exists</span> <span class="id">i</span>''; <span class="tactic">intuition</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Operators.html#t_trans">t_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Operators.html#t_step">t_step</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="simulation_forever_silent">simulation_forever_silent</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;<span class="id">Forever_silent</span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">Forever_silent</span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2010')">Proof.</div>
<div class="proofscript" id="proof2010">
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Forever_silent</span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N">forever_silent_N</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.L2">L2</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.L2">L2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.order">order</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.L2">L2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COINDHYP</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_simulation">fsim_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.S">S</a></span> <span class="id">_</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H1</span> <span class="id">_</span> <span class="id">_</span> <span class="id">H0</span>) <span class="kwd">as</span> [<span class="id">i</span>' [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> [<span class="id">C</span> | [<span class="id">C</span> <span class="id">D</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N_plus">forever_silent_N_plus</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N_star">forever_silent_N_star</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#forever_silent_N_forever">forever_silent_N_forever</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#fsim_order_wf">fsim_order_wf</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="simulation_forever_reactive">simulation_forever_reactive</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">T</span>,<br/>
&nbsp;&nbsp;<span class="id">Forever_reactive</span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">Forever_reactive</span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2011')">Proof.</div>
<div class="proofscript" id="proof2011">
&nbsp;&nbsp;<span class="id">cofix</span> <span class="id">COINDHYP</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">edestruct</span> <span class="id"><a href="compcert.common.Smallstep.html#simulation_star">simulation_star</a></span> <span class="kwd">as</span> [<span class="id">i</span>' [<span class="id">st2</span>' [<span class="id">A</span> <span class="id">B</span>]]]; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#SIMULATION_SEQUENCES">SIMULATION_SEQUENCES</a></span>.<br/>
<br/>
<h2> Composing two forward simulations </h2>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="compose_forward_simulations">compose_forward_simulations</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">L3</span>, <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L3">L3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L3">L3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2012')">Proof.</div>
<div class="proofscript" id="proof2012">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">L3</span> <span class="id">S12</span> <span class="id">S23</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">S12</span> <span class="kwd">as</span> [<span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span> <span class="id">props</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">S23</span> <span class="kwd">as</span> [<span class="id">index</span>' <span class="id">order</span>' <span class="id">match_states</span>' <span class="id">props</span>'].<br/>
<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">ff_index</span> := (<span class="id">index</span>' * <span class="id">index</span>)%<span class="id">type</span>).<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">ff_order</span> := <span class="id"><a href="compcert.lib.Coqlib.html#lex_ord">lex_ord</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Operators.html#clos_trans">clos_trans</a></span> <span class="id">_</span> <span class="id">order</span>') <span class="id">order</span>).<br/>
&nbsp;&nbsp;<span class="tactic">set</span> (<span class="id">ff_match_states</span> := <span class="kwd">fun</span> (<span class="id">i</span>: <span class="id">ff_index</span>) (<span class="id">s1</span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id">L1</span>) (<span class="id">s3</span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id">L3</span>) =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>, <span class="id">match_states</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> /\ <span class="id">match_states</span>' (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#Forward_simulation">Forward_simulation</a></span> <span class="kwd">with</span> <span class="id">ff_order</span> <span class="id">ff_match_states</span>; <span class="id">constructor</span>.<br/>
- <span class="comment">(*&nbsp;well&nbsp;founded&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id">ff_order</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#wf_lex_ord">wf_lex_ord</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Wellfounded.Transitive_Closure.html#wf_clos_trans">wf_clos_trans</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#fsim_order_wf">fsim_order_wf</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#fsim_order_wf">fsim_order_wf</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;initial&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_match_initial_states">fsim_match_initial_states</a></span> <span class="id">props</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span> [<span class="id">s2</span> [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_match_initial_states">fsim_match_initial_states</a></span> <span class="id">props</span>'); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s3</span> [<span class="id">C</span> <span class="id">D</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">i</span>', <span class="id">i</span>); <span class="id">exists</span> <span class="id">s3</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">exists</span> <span class="id">s2</span>; <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;final&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H</span> <span class="kwd">as</span> [<span class="id">s3</span> [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_match_final_states">fsim_match_final_states</a></span> <span class="id">props</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_match_final_states">fsim_match_final_states</a></span> <span class="id">props</span>); <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;simulation&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">s3</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="tactic">destruct</span> <span class="id">i</span> <span class="kwd">as</span> [<span class="id">i2</span> <span class="id">i1</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">fsim_simulation</span>' <span class="id">props</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">i1</span>' [<span class="id">s3</span>' [<span class="id">C</span> <span class="id">D</span>]]] | [<span class="id">i1</span>' [<span class="id">C</span> [<span class="id">D</span> <span class="id">E</span>]]]].<br/>
+ <span class="comment">(*&nbsp;L2&nbsp;makes&nbsp;one&nbsp;or&nbsp;several&nbsp;steps.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#simulation_plus">simulation_plus</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">i2</span>' [<span class="id">s2</span>' [<span class="id">P</span> <span class="id">Q</span>]]] | [<span class="id">i2</span>' [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]]]].<br/>
* <span class="comment">(*&nbsp;L3&nbsp;makes&nbsp;one&nbsp;or&nbsp;several&nbsp;steps&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">i2</span>', <span class="id">i1</span>'); <span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">exists</span> <span class="id">s3</span>'; <span class="tactic">auto</span>.<br/>
* <span class="comment">(*&nbsp;L3&nbsp;makes&nbsp;no&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">i2</span>', <span class="id">i1</span>'); <span class="id">exists</span> <span class="id">s2</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">subst</span> <span class="id">t</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="tactic">red</span>. <span class="id">left</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s3</span>'; <span class="tactic">auto</span>.<br/>
+ <span class="comment">(*&nbsp;L2&nbsp;makes&nbsp;no&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">i2</span>, <span class="id">i1</span>'); <span class="id">exists</span> <span class="id">s2</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">subst</span> <span class="id">t</span>; <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="tactic">red</span>. <span class="id">right</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s3</span>; <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;symbols&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">transitivity</span> (<span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id">L2</span>) <span class="id">id</span>); <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#fsim_public_preserved">fsim_public_preserved</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Receptiveness and determinacy </h1>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="single_events">single_events</a></span> (<span class="id">L</span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">t</span> <span class="id">s</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>' -&gt; (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> &lt;= 1)%<span class="id">nat</span>.<br/>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="receptive">receptive</a></span> (<span class="id">L</span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Receptive">Receptive</a></span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="sr_receptive">sr_receptive</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">s1</span> <span class="id">t2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt; <span class="id">exists</span> <span class="id">s2</span>, <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="sr_traces">sr_traces</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#single_events">single_events</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="determinate">determinate</a></span> (<span class="id">L</span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Determinate">Determinate</a></span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="sd_determ">sd_determ</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">s1</span> <span class="id">t2</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> /\ (<span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="sd_traces">sd_traces</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#single_events">single_events</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="sd_initial_determ">sd_initial_determ</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="sd_final_nostep">sd_final_nostep</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span> -&gt; <span class="id">Nostep</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="sd_final_determ">sd_final_determ</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">r1</span> <span class="id">r2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r1">r1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r2">r2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#r1">r1</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#r2">r2</a></span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="DETERMINACY">DETERMINACY</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="DETERMINACY.L">L</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="DETERMINACY.DET">DET</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#determinate">determinate</a></span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY.L">L</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sd_determ_1">sd_determ_1</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">t1</span> <span class="id">s1</span> <span class="id">t2</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;<span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY.L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY.L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY.L">L</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2013')">Proof.</div>
<div class="proofscript" id="proof2013">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#sd_determ">sd_determ</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="sd_determ_2">sd_determ_2</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">t</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;<span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY.L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY.L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> = <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2014')">Proof.</div>
<div class="proofscript" id="proof2014">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#sd_determ">sd_determ</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_determinacy">star_determinacy</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">t</span> <span class="id">s</span>', <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY.L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span>'', <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY.L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>'' -&gt; <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY.L">L</a></span> <span class="id">s</span>' <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s</span>'' \/ <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY.L">L</a></span> <span class="id">s</span>'' <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2015')">Proof.</div>
<div class="proofscript" id="proof2015">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_step">star_step</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#sd_determ_1">sd_determ_1</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="id">eexact</span> <span class="id">H3</span>. <span class="tactic">intros</span> <span class="id">MT</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#sd_traces">sd_traces</a></span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY.DET">DET</a></span>). <span class="id">eexact</span> <span class="id">H</span>. <span class="tactic">intros</span> <span class="id">L1</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#sd_traces">sd_traces</a></span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY.DET">DET</a></span>). <span class="id">eexact</span> <span class="id">H3</span>. <span class="tactic">intros</span> <span class="id">L2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">t1</span> = <span class="id">t0</span> /\ <span class="id">t2</span> = <span class="id">t3</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>. <span class="id">inv</span> <span class="id">MT</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">L1</span>; <span class="tactic">try</span> <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t0</span>. <span class="id">inv</span> <span class="id">MT</span>. <span class="tactic">destruct</span> <span class="id">t0</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">L2</span>; <span class="tactic">try</span> <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H5</span>. <span class="tactic">split</span>. <span class="tactic">congruence</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">s2</span> = <span class="id">s4</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#sd_determ_2">sd_determ_2</a></span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">s4</span>.<br/>
&nbsp;&nbsp;<span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#DETERMINACY">DETERMINACY</a></span>.<br/>
<br/>
<h1> Backward simulations between two transition semantics. </h1>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="safe">safe</a></span> (<span class="id">L</span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>) (<span class="id">s</span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">r</span>, <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id">s</span>' <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span>)<br/>
&nbsp;&nbsp;\/ (<span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">s</span>'', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id">s</span>' <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>'').<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_safe">star_safe</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> (<span class="id">L</span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>) <span class="id">s</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s</span>' -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id">s</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2016')">Proof.</div>
<div class="proofscript" id="proof2016">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">apply</span> <span class="id">H0</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">The general form of a backward simulation. </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="bsim_properties">bsim_properties</a></span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>) (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">match_states</span>: <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> -&gt; <span class="kwd">Prop</span>) : <span class="kwd">Prop</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="bsim_order_wf">bsim_order_wf</a></span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="bsim_initial_states_exist">bsim_initial_states_exist</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id">exists</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="bsim_match_initial_states">bsim_match_initial_states</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>, <span class="id">exists</span> <span class="id">s1</span>', <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id">s1</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id">s1</span>' <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="bsim_match_final_states">bsim_match_final_states</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s1</span>', <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s1</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id">s1</span>' <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="bsim_progress">bsim_progress</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">r</span>, <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span>) \/<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">s2</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>');<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="bsim_simulation">bsim_simulation</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' \/ (<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id">i</span>' <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>';<br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="id">Arguments</span> <span class="id"><a href="compcert.common.Smallstep.html#bsim_properties">bsim_properties</a></span>: <span class="tactic">clear</span> <span class="id">implicits</span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="backward_simulation">backward_simulation</a></span> (<span class="id">L1</span> <span class="id">L2</span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Backward_simulation">Backward_simulation</a></span> (<span class="id">index</span>: <span class="kwd">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">order</span>: <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">match_states</span>: <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> -&gt; <span class="kwd">Prop</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">props</span>: <span class="id"><a href="compcert.common.Smallstep.html#bsim_properties">bsim_properties</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span>).<br/>
<br/>
<span class="id">Arguments</span> <span class="id"><a href="compcert.common.Smallstep.html#Backward_simulation">Backward_simulation</a></span> {<span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span>} <span class="id">order</span> <span class="id">match_states</span> <span class="id">props</span>.<br/>
<br/>
<div class="doc">An alternate form of the simulation diagram </div>
<br/>
<span class="kwd">Lemma</span> <span class="id">bsim_simulation</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span>, <span class="id"><a href="compcert.common.Smallstep.html#bsim_properties">bsim_properties</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s1</span>', <span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>')<br/>
&nbsp;&nbsp;\/ (<span class="id">exists</span> <span class="id">i</span>', <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id">i</span>' <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span> <span class="id">i</span>' <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id">s2</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2017')">Proof.</div>
<div class="proofscript" id="proof2017">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#bsim_simulation">bsim_simulation</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s1</span>' [<span class="id">A</span> <span class="id">B</span>]]]. <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">exists</span> <span class="id">i</span>'; <span class="id">exists</span> <span class="id">s1</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> <span class="id">i</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">exists</span> <span class="id">i</span>'; <span class="id">exists</span> <span class="id">s1</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h2> Backward simulation diagrams. </h2>
<br/>
<div class="doc">Various simulation diagrams that imply backward simulation. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="BACKWARD_SIMU_DIAGRAMS">BACKWARD_SIMU_DIAGRAMS</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="BACKWARD_SIMU_DIAGRAMS.L1">L1</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="BACKWARD_SIMU_DIAGRAMS.L2">L2</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="BACKWARD_SIMU_DIAGRAMS.public_preserved">public_preserved</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">id</span>, <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L2">L2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#id">id</a></span> = <span class="id"><a href="compcert.common.Globalenvs.html#Senv.public_symbol">Senv.public_symbol</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L1">L1</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#id">id</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="BACKWARD_SIMU_DIAGRAMS.match_states">match_states</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L1">L1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L2">L2</a></span> -&gt; <span class="kwd">Prop</span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="BACKWARD_SIMU_DIAGRAMS.initial_states_exist">initial_states_exist</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id">exists</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="BACKWARD_SIMU_DIAGRAMS.match_initial_states">match_initial_states</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s1</span>', <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id">s1</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id">s1</span>' <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="BACKWARD_SIMU_DIAGRAMS.match_final_states">match_final_states</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="tactic">progress</span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">r</span>, <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span>) \/<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">s2</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>').<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="BACKWARD_SIMU_DIAGRAMS.BACKWARD_SIMULATION_PLUS">BACKWARD_SIMULATION_PLUS</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="BACKWARD_SIMU_DIAGRAMS.BACKWARD_SIMULATION_PLUS.simulation">simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s1</span>', <span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id">s1</span>' <span class="id">s2</span>'.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="backward_simulation_plus">backward_simulation_plus</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#backward_simulation">backward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.L2">L2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2018')">Proof.</div>
<div class="proofscript" id="proof2018">
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#Backward_simulation">Backward_simulation</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> (<span class="id">x</span> <span class="id">y</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#False">False</a></span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="kwd">fun</span> (<span class="id">i</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#unit">unit</a></span>) <span class="id">s1</span> <span class="id">s2</span> =&gt; <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>);<br/>
&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
- <span class="tactic">red</span>; <span class="tactic">intros</span>; <span class="id">constructor</span>; <span class="tactic">intros</span>. <span class="id">contradiction</span>.<br/>
- <span class="tactic">intros</span>. <span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="tactic">intros</span>. <span class="id">exists</span> <span class="id">s1</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="tactic">eauto</span>.<br/>
- <span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.BACKWARD_SIMULATION_PLUS.simulation">simulation</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s1</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#tt">tt</a></span>; <span class="id">exists</span> <span class="id">s1</span>'; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS.BACKWARD_SIMULATION_PLUS">BACKWARD_SIMULATION_PLUS</a></span>.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMU_DIAGRAMS">BACKWARD_SIMU_DIAGRAMS</a></span>.<br/>
<br/>
<h2> Backward simulation of transition sequences </h2>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="BACKWARD_SIMULATION_SEQUENCES">BACKWARD_SIMULATION_SEQUENCES</a></span>.<br/>
<br/>
<span class="kwd">Context</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span> (<span class="id">S</span>: <span class="id"><a href="compcert.common.Smallstep.html#bsim_properties">bsim_properties</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bsim_E0_star">bsim_E0_star</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">s2</span>', <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s1</span>', <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s1</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2019')">Proof.</div>
<div class="proofscript" id="proof2019">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">s20</span> <span class="id">s20</span>' <span class="id">STAR0</span>. <span class="tactic">pattern</span> <span class="id">s20</span>, <span class="id">s20</span>'. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_E0_ind">star_E0_ind</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exists</span> <span class="id">i</span>; <span class="id">exists</span> <span class="id">s1</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
- <span class="comment">(*&nbsp;inductive&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#bsim_simulation">bsim_simulation</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s1</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L1">L1</a></span> <span class="id">s0</span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s1</span>'). <span class="tactic">intuition</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">H0</span>. <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>'' [<span class="id">s1</span>'' [<span class="id">C</span> <span class="id">D</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>''; <span class="id">exists</span> <span class="id">s1</span>''; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bsim_safe">bsim_safe</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2020')">Proof.</div>
<div class="proofscript" id="proof2020">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">red</span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#bsim_E0_star">bsim_E0_star</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s1</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bsim_progress">bsim_progress</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bsim_E0_plus">bsim_E0_plus</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>', <span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s1</span>', <span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s1</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>')<br/>
&nbsp;&nbsp;\/ (<span class="id">exists</span> <span class="id">i</span>', <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Operators.html#clos_trans">clos_trans</a></span> <span class="id">_</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.order">order</a></span> <span class="id">i</span>' <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.match_states">match_states</a></span> <span class="id">i</span>' <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id">s2</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2021')">Proof.</div>
<div class="proofscript" id="proof2021">
&nbsp;&nbsp;<span class="tactic">induction</span> 1 <span class="kwd">using</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_ind2">plus_ind2</a></span>; <span class="tactic">intros</span>; <span class="tactic">subst</span> <span class="id">t</span>.<br/>
- <span class="comment">(*&nbsp;base&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">bsim_simulation</span>'; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">i</span>' [<span class="id">s1</span>' [<span class="id">A</span> <span class="id">B</span>]]] | [<span class="id">i</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]].<br/>
+ <span class="id">left</span>; <span class="id">exists</span> <span class="id">i</span>'; <span class="id">exists</span> <span class="id">s1</span>'; <span class="tactic">auto</span>.<br/>
+ <span class="id">right</span>; <span class="id">exists</span> <span class="id">i</span>'; <span class="tactic">intuition</span>.<br/>
- <span class="comment">(*&nbsp;inductive&nbsp;case&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#Eapp_E0_inv">Eapp_E0_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ1</span> <span class="id">EQ2</span>]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">bsim_simulation</span>'; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">i</span>' [<span class="id">s1</span>' [<span class="id">A</span> <span class="id">B</span>]]] | [<span class="id">i</span>' [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]].<br/>
+ <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#bsim_E0_star">bsim_E0_star</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>'' [<span class="id">s1</span>'' [<span class="id">P</span> <span class="id">Q</span>]]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">exists</span> <span class="id">i</span>''; <span class="id">exists</span> <span class="id">s1</span>''; <span class="tactic">intuition</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star_trans">plus_star_trans</a></span>; <span class="tactic">eauto</span>.<br/>
+ <span class="id">exploit</span> <span class="id">IHplus</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">P</span> | [<span class="id">i</span>'' [<span class="id">P</span> <span class="id">Q</span>]]].<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> <span class="id">i</span>''; <span class="tactic">intuition</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Operators.html#t_trans">t_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Operators.html#t_step">t_step</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="star_non_E0_split">star_non_E0_split</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>', <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' -&gt; (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = 1)%<span class="id">nat</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2x</span>, <span class="id">exists</span> <span class="id">s2y</span>, <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2x">s2x</a></span> /\ <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2x">s2x</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2y">s2y</a></span> /\ <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2y">s2y</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2022')">Proof.</div>
<div class="proofscript" id="proof2022">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>; <span class="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EITHER</span>: <span class="id">t1</span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> \/ <span class="id">t2</span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#Eapp">Eapp</a></span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span> <span class="kwd">in</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">t2</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="id">omegaContradiction</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">EITHER</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">IHstar</span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s2x</span> [<span class="id">s2y</span> [<span class="id">A</span> [<span class="id">B</span> <span class="id">C</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2x</span>; <span class="id">exists</span> <span class="id">s2y</span>; <span class="tactic">intuition</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#E0_right">E0_right</a></span>. <span class="id">exists</span> <span class="id">s1</span>; <span class="id">exists</span> <span class="id">s2</span>; <span class="tactic">intuition</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#BACKWARD_SIMULATION_SEQUENCES">BACKWARD_SIMULATION_SEQUENCES</a></span>.<br/>
<br/>
<h2> Composing two backward simulations </h2>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="COMPOSE_BACKWARD_SIMULATIONS">COMPOSE_BACKWARD_SIMULATIONS</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="COMPOSE_BACKWARD_SIMULATIONS.L1">L1</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="COMPOSE_BACKWARD_SIMULATIONS.L2">L2</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="COMPOSE_BACKWARD_SIMULATIONS.L3">L3</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="COMPOSE_BACKWARD_SIMULATIONS.L3_single_events">L3_single_events</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#single_events">single_events</a></span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L3">L3</a></span>.<br/>
<span class="kwd">Context</span> <span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span> (<span class="id">S12</span>: <span class="id"><a href="compcert.common.Smallstep.html#bsim_properties">bsim_properties</a></span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span>).<br/>
<span class="kwd">Context</span> <span class="id">index</span>' <span class="id">order</span>' <span class="id">match_states</span>' (<span class="id">S23</span>: <span class="id"><a href="compcert.common.Smallstep.html#bsim_properties">bsim_properties</a></span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L3">L3</a></span> <span class="id">index</span>' <span class="id">order</span>' <span class="id">match_states</span>').<br/>
<br/>
<span class="kwd">Let</span> <span class="id"><a name="COMPOSE_BACKWARD_SIMULATIONS.bb_index">bb_index</a></span> : <span class="kwd">Type</span> := (<span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.index">index</a></span> * <span class="id">index</span>')%<span class="id">type</span>.<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="bb_order">bb_order</a></span> : <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.bb_index">bb_index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.bb_index">bb_index</a></span> -&gt; <span class="kwd">Prop</span> := <span class="id"><a href="compcert.lib.Coqlib.html#lex_ord">lex_ord</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Operators.html#clos_trans">clos_trans</a></span> <span class="id">_</span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.order">order</a></span>) <span class="id">order</span>'.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="bb_match_states">bb_match_states</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.bb_index">bb_index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L1">L1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L3">L3</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="bb_match_later">bb_match_later</a></span>: <span class="kwd">forall</span> <span class="id">i1</span> <span class="id">i2</span> <span class="id">s1</span> <span class="id">s3</span> <span class="id">s2x</span> <span class="id">s2y</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i1">i1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2x">s2x</a></span> -&gt; <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2x">s2x</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2y">s2y</a></span> -&gt; <span class="id">match_states</span>' <span class="id"><a href="compcert.common.Smallstep.html#i2">i2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2y">s2y</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#bb_match_states">bb_match_states</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#i1">i1</a></span>, <span class="id"><a href="compcert.common.Smallstep.html#i2">i2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bb_match_at">bb_match_at</a></span>: <span class="kwd">forall</span> <span class="id">i1</span> <span class="id">i2</span> <span class="id">s1</span> <span class="id">s3</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i1">i1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id">match_states</span>' <span class="id"><a href="compcert.common.Smallstep.html#i2">i2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#bb_match_states">bb_match_states</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#i1">i1</a></span>, <span class="id"><a href="compcert.common.Smallstep.html#i2">i2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2023')">Proof.</div>
<div class="proofscript" id="proof2023">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bb_simulation_base">bb_simulation_base</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s3</span> <span class="id">t</span> <span class="id">s3</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L3">L3</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s3</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i1</span> <span class="id">s1</span> <span class="id">i2</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i1">i1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id">match_states</span>' <span class="id"><a href="compcert.common.Smallstep.html#i2">i2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' \/ (<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#bb_order">bb_order</a></span> <span class="id">i</span>' (<span class="id"><a href="compcert.common.Smallstep.html#i1">i1</a></span>, <span class="id"><a href="compcert.common.Smallstep.html#i2">i2</a></span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Smallstep.html#bb_match_states">bb_match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s3</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2024')">Proof.</div>
<div class="proofscript" id="proof2024">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">bsim_simulation</span>' <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.S23">S23</a></span>); <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bsim_safe">bsim_safe</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [ [<span class="id">i2</span>' [<span class="id">s2</span>' [<span class="id">PLUS2</span> <span class="id">MATCH2</span>]]] | [<span class="id">i2</span>' [<span class="id">ORD2</span> [<span class="id">EQ</span> <span class="id">MATCH2</span>]]]].<br/>
- <span class="comment">(*&nbsp;1&nbsp;L2&nbsp;makes&nbsp;one&nbsp;or&nbsp;several&nbsp;transitions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">EITHER</span>: <span class="id">t</span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> \/ (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> <span class="id">t</span> = 1)%<span class="id">nat</span>).<br/>
&nbsp;&nbsp;{ <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L3_single_events">L3_single_events</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span>. <span class="id">omegaContradiction</span>. }<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">EITHER</span>.<br/>
+ <span class="comment">(*&nbsp;1.1&nbsp;these&nbsp;are&nbsp;silent&nbsp;transitions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_E0_plus">bsim_E0_plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.S12">S12</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [ [<span class="id">i1</span>' [<span class="id">s1</span>' [<span class="id">PLUS1</span> <span class="id">MATCH1</span>]]] | [<span class="id">i1</span>' [<span class="id">ORD1</span> <span class="id">MATCH1</span>]]].<br/>
* <span class="comment">(*&nbsp;1.1.1&nbsp;L1&nbsp;makes&nbsp;one&nbsp;or&nbsp;several&nbsp;transitions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">i1</span>', <span class="id">i2</span>'); <span class="id">exists</span> <span class="id">s1</span>'; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bb_match_at">bb_match_at</a></span>; <span class="tactic">eauto</span>.<br/>
* <span class="comment">(*&nbsp;1.1.2&nbsp;L1&nbsp;makes&nbsp;no&nbsp;transitions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">i1</span>', <span class="id">i2</span>'); <span class="id">exists</span> <span class="id">s1</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="id">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bb_match_at">bb_match_at</a></span>; <span class="tactic">eauto</span>.<br/>
+ <span class="comment">(*&nbsp;1.2&nbsp;non-silent&nbsp;transitions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#star_non_E0_split">star_non_E0_split</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">s2x</span> [<span class="id">s2y</span> [<span class="id">P</span> [<span class="id">Q</span> <span class="id">R</span>]]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_E0_star">bsim_E0_star</a></span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.S12">S12</a></span>). <span class="id">eexact</span> <span class="id">P</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="tactic">intros</span> [<span class="id">i1</span>' [<span class="id">s1x</span> [<span class="id">X</span> <span class="id">Y</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id">bsim_simulation</span>' <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.S12">S12</a></span>). <span class="id">eexact</span> <span class="id">Q</span>. <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">i1</span>'' [<span class="id">s1y</span> [<span class="id">U</span> <span class="id">V</span>]]] | [<span class="id">i1</span>'' [<span class="id">U</span> [<span class="id">V</span> <span class="id">W</span>]]]]; <span class="tactic">try</span> (<span class="tactic">subst</span> <span class="id">t</span>; <span class="tactic">discriminate</span>).<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">i1</span>'', <span class="id">i2</span>'); <span class="id">exists</span> <span class="id">s1y</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_plus_trans">star_plus_trans</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bb_match_later">bb_match_later</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;2.&nbsp;L2&nbsp;makes&nbsp;no&nbsp;transitions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">exists</span> (<span class="id">i1</span>, <span class="id">i2</span>'); <span class="id">exists</span> <span class="id">s1</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="id">right</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bb_match_at">bb_match_at</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="bb_simulation">bb_simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s3</span> <span class="id">t</span> <span class="id">s3</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L3">L3</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s3</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#bb_match_states">bb_match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' \/ (<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#bb_order">bb_order</a></span> <span class="id">i</span>' <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Smallstep.html#bb_match_states">bb_match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s3</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2025')">Proof.</div>
<div class="proofscript" id="proof2025">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#star_inv">star_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">EQ1</span> <span class="id">EQ2</span>] | <span class="id">PLUS</span>].<br/>
- <span class="comment">(*&nbsp;1.&nbsp;match&nbsp;at&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bb_simulation_base">bb_simulation_base</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;2.&nbsp;match&nbsp;later&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_E0_plus">bsim_E0_plus</a></span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS.S12">S12</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">i1</span>' [<span class="id">s1</span>' [<span class="id">A</span> <span class="id">B</span>]]] | [<span class="id">i1</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
+ <span class="comment">(*&nbsp;2.1&nbsp;one&nbsp;or&nbsp;several&nbsp;silent&nbsp;transitions&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#bb_simulation_base">bb_simulation_base</a></span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="id">eexact</span> <span class="id">B</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>'' [<span class="id">s1</span>'' [<span class="id">C</span> <span class="id">D</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>''; <span class="id">exists</span> <span class="id">s1</span>''; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star_trans">plus_star_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">C</span> <span class="kwd">as</span> [<span class="id">P</span> | [<span class="id">P</span> <span class="id">Q</span>]]. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">traceEq</span>.<br/>
+ <span class="comment">(*&nbsp;2.2&nbsp;no&nbsp;silent&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#bb_simulation_base">bb_simulation_base</a></span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="id">eexact</span> <span class="id">B</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>'' [<span class="id">s1</span>'' [<span class="id">C</span> <span class="id">D</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>''; <span class="id">exists</span> <span class="id">s1</span>''; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intuition</span>. <span class="id">right</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H6</span>. <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Relations.Relation_Operators.html#t_trans">t_trans</a></span>; <span class="tactic">eauto</span>. <span class="id">left</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#COMPOSE_BACKWARD_SIMULATIONS">COMPOSE_BACKWARD_SIMULATIONS</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="compose_backward_simulation">compose_backward_simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">L3</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#single_events">single_events</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L3">L3</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#backward_simulation">backward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#backward_simulation">backward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L3">L3</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#backward_simulation">backward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L3">L3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2026')">Proof.</div>
<div class="proofscript" id="proof2026">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">L3</span> <span class="id">L3single</span> <span class="id">S12</span> <span class="id">S23</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">S12</span> <span class="kwd">as</span> [<span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span> <span class="id">props</span>].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">S23</span> <span class="kwd">as</span> [<span class="id">index</span>' <span class="id">order</span>' <span class="id">match_states</span>' <span class="id">props</span>'].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#Backward_simulation">Backward_simulation</a></span> <span class="kwd">with</span> (<span class="id"><a href="compcert.common.Smallstep.html#bb_order">bb_order</a></span> <span class="id">order</span> <span class="id">order</span>') (<span class="id"><a href="compcert.common.Smallstep.html#bb_match_states">bb_match_states</a></span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">L3</span> <span class="id">match_states</span> <span class="id">match_states</span>');<br/>
&nbsp;&nbsp;<span class="id">constructor</span>.<br/>
- <span class="comment">(*&nbsp;well&nbsp;founded&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Smallstep.html#bb_order">bb_order</a></span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.lib.Coqlib.html#wf_lex_ord">wf_lex_ord</a></span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Wellfounded.Transitive_Closure.html#wf_clos_trans">wf_clos_trans</a></span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bsim_order_wf">bsim_order_wf</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bsim_order_wf">bsim_order_wf</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;initial&nbsp;states&nbsp;exist&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_initial_states_exist">bsim_initial_states_exist</a></span> <span class="id">props</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s2</span> <span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_initial_states_exist">bsim_initial_states_exist</a></span> <span class="id">props</span>'); <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;match&nbsp;initial&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">s1</span> <span class="id">s3</span> <span class="id">INIT1</span> <span class="id">INIT3</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_initial_states_exist">bsim_initial_states_exist</a></span> <span class="id">props</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s2</span> <span class="id">INIT2</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_match_initial_states">bsim_match_initial_states</a></span> <span class="id">props</span>'); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i2</span> [<span class="id">s2</span>' [<span class="id">INIT2</span>' <span class="id">M2</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_match_initial_states">bsim_match_initial_states</a></span> <span class="id">props</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i1</span> [<span class="id">s1</span>' [<span class="id">INIT1</span>' <span class="id">M1</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">i1</span>, <span class="id">i2</span>); <span class="id">exists</span> <span class="id">s1</span>'; <span class="tactic">intuition</span> <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bb_match_at">bb_match_at</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;match&nbsp;final&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s3</span> <span class="id">r</span> <span class="id">MS</span> <span class="id">SAFE</span> <span class="id">FIN</span>. <span class="id">inv</span> <span class="id">MS</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_match_final_states">bsim_match_final_states</a></span> <span class="id">props</span>'); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bsim_safe">bsim_safe</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_E0_star">bsim_E0_star</a></span> <span class="id">props</span>). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>. <span class="id">eexact</span> <span class="id">H0</span>. <span class="id">eexact</span> <span class="id">A</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i1</span>' [<span class="id">s1</span>' [<span class="id">C</span> <span class="id">D</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_match_final_states">bsim_match_final_states</a></span> <span class="id">props</span>); <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">s1</span>'' [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s1</span>''; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;progress&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s3</span> <span class="id">MS</span> <span class="id">SAFE</span>. <span class="id">inv</span> <span class="id">MS</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_progress">bsim_progress</a></span> <span class="id">props</span>'). <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bsim_safe">bsim_safe</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;simulation&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#bb_simulation">bb_simulation</a></span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<h2> Converting a forward simulation to a backward simulation </h2>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="FORWARD_TO_BACKWARD">FORWARD_TO_BACKWARD</a></span>.<br/>
<br/>
<span class="kwd">Context</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span> (<span class="id">FS</span>: <span class="id"><a href="compcert.common.Smallstep.html#fsim_properties">fsim_properties</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span>).<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FORWARD_TO_BACKWARD.L1_receptive">L1_receptive</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#receptive">receptive</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FORWARD_TO_BACKWARD.L2_determinate">L2_determinate</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#determinate">determinate</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span>.<br/>
<br/>
<div class="doc">Exploiting forward simulation </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="f2b_transitions">f2b_transitions</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="f2b_trans_final">f2b_trans_final</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">s1</span>' <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span> <span class="id">s1</span>' <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#f2b_transitions">f2b_transitions</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="f2b_trans_step">f2b_trans_step</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">s1</span>' <span class="id">t</span> <span class="id">s1</span>'' <span class="id">s2</span>' <span class="id">i</span>' <span class="id">i</span>'',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span> <span class="id">s1</span>' <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>'' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.match_states">match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.match_states">match_states</a></span> <span class="id">i</span>'' <span class="id">s1</span>'' <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#f2b_transitions">f2b_transitions</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="f2b_progress">f2b_progress</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#f2b_transitions">f2b_transitions</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2027')">Proof.</div>
<div class="proofscript" id="proof2027">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i0</span>; <span class="tactic">pattern</span> <span class="id">i0</span>. <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded_ind">well_founded_ind</a></span> <span class="kwd">with</span> (<span class="id">R</span> := <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.order">order</a></span>).<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#fsim_order_wf">fsim_order_wf</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">i</span> <span class="id">REC</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">MATCH</span> <span class="id">SAFE</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id">SAFE</span> <span class="id">s1</span>) <span class="kwd">as</span> [[<span class="id">r</span> <span class="id">FINAL</span>] | [<span class="id">t</span> [<span class="id">s1</span>' <span class="id">STEP1</span>]]]. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
- <span class="comment">(*&nbsp;final&nbsp;state&nbsp;reached&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_trans_final">f2b_trans_final</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#fsim_match_final_states">fsim_match_final_states</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;L1&nbsp;can&nbsp;make&nbsp;one&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_simulation">fsim_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.FS">FS</a></span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">MATCH</span>']]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">B</span>: <span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>' \/ (<span class="id">s2</span>' = <span class="id">s2</span> /\ <span class="id">t</span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.order">order</a></span> <span class="id">i</span>' <span class="id">i</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intuition</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Smallstep.html#star_inv">star_inv</a></span> <span class="id">H0</span>); <span class="tactic">intuition</span> <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">clear</span> <span class="id">A</span>. <span class="tactic">destruct</span> <span class="id">B</span> <span class="kwd">as</span> [<span class="id">PLUS2</span> | [<span class="id">EQ1</span> [<span class="id">EQ2</span> <span class="id">ORDER</span>]]].<br/>
+ <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_trans_step">f2b_trans_step</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>.<br/>
+ <span class="tactic">subst</span>. <span class="id">exploit</span> <span class="id">REC</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_one">star_one</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">TRANS</span>; <span class="id">inv</span> <span class="id">TRANS</span>.<br/>
* <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_trans_final">f2b_trans_final</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>; <span class="tactic">eauto</span>.<br/>
* <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_trans_step">f2b_trans_step</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_left">star_left</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fsim_simulation_not_E0">fsim_simulation_not_E0</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s2</span>', <span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.match_states">match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2028')">Proof.</div>
<div class="proofscript" id="proof2028">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_simulation">fsim_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.FS">FS</a></span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>'; <span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">A</span>. <span class="tactic">auto</span>. <span class="tactic">destruct</span> <span class="id">H2</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#star_inv">star_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [[<span class="id">EQ1</span> <span class="id">EQ2</span>] | <span class="id">P</span>]; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Exploiting determinacy </div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="silent_or_not_silent">silent_or_not_silent</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span>, <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> \/ <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2029')">Proof.</div>
<div class="proofscript" id="proof2029">
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>; <span class="tactic">destruct</span> <span class="id">t</span>; <span class="tactic">auto</span>; <span class="id">right</span>; <span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Remark</span> <span class="id"><a name="not_silent_length">not_silent_length</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t1</span> <span class="id">t2</span>, (<span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#length">length</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> ** <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span>) &lt;= 1)%<span class="id">nat</span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> \/ <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2030')">Proof.</div>
<div class="proofscript" id="proof2030">
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#Eapp">Eapp</a></span>, <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>; <span class="tactic">intros</span>. <span class="tactic">rewrite</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Lists.List.html#app_length">app_length</a></span> <span class="kwd">in</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>; <span class="tactic">destruct</span> <span class="id">t2</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="id">omegaContradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="f2b_determinacy_inv">f2b_determinacy_inv</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">t</span>' <span class="id">s2</span>' <span class="id">t</span>'' <span class="id">s2</span>'',<br/>
&nbsp;&nbsp;<span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id">t</span>' <span class="id">s2</span>' -&gt; <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id">t</span>'' <span class="id">s2</span>'' -&gt;<br/>
&nbsp;&nbsp;(<span class="id">t</span>' = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> /\ <span class="id">t</span>'' = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> /\ <span class="id">s2</span>' = <span class="id">s2</span>'')<br/>
&nbsp;&nbsp;\/ (<span class="id">t</span>' &lt;&gt; <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> /\ <span class="id">t</span>'' &lt;&gt; <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> /\ <span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span>) <span class="id">t</span>' <span class="id">t</span>'').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2031')">Proof.</div>
<div class="proofscript" id="proof2031">
&nbsp;&nbsp;<span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span>) <span class="id">t</span>' <span class="id">t</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#sd_determ_1">sd_determ_1</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Smallstep.html#silent_or_not_silent">silent_or_not_silent</a></span> <span class="id">t</span>').<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">intuition</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#sd_determ_2">sd_determ_2</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Smallstep.html#silent_or_not_silent">silent_or_not_silent</a></span> <span class="id">t</span>'').<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">H1</span>. <span class="tactic">elim</span> <span class="id">H2</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">intuition</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Events.html#match_traces_preserved">match_traces_preserved</a></span> <span class="kwd">with</span> (<span class="id">ge1</span> := (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span>)); <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>; <span class="tactic">symmetry</span>; <span class="tactic">apply</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_public_preserved">fsim_public_preserved</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.FS">FS</a></span>).<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="f2b_determinacy_star">f2b_determinacy_star</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">s1</span>, <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">s2</span> <span class="id">s3</span>,<br/>
&nbsp;&nbsp;<span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s3">s3</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2032')">Proof.</div>
<div class="proofscript" id="proof2032">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">s0</span> <span class="id">s01</span> <span class="id">ST0</span>. <span class="tactic">pattern</span> <span class="id">s0</span>, <span class="id">s01</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_E0_ind">star_E0_ind</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H3</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_determinacy_inv">f2b_determinacy_inv</a></span>. <span class="id">eexact</span> <span class="id">H</span>. <span class="id">eexact</span> <span class="id">H4</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">EQ1</span> [<span class="id">EQ2</span> <span class="id">EQ3</span>]] | [<span class="id">NEQ1</span> [<span class="id">NEQ2</span> <span class="id">MT</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Orders </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="f2b_index">f2b_index</a></span> : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="F2BI_before">F2BI_before</a></span> (<span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="F2BI_after">F2BI_after</a></span> (<span class="id">n</span>: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nat">nat</a></span>).<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="f2b_order">f2b_order</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#f2b_index">f2b_index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#f2b_index">f2b_index</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="f2b_order_before">f2b_order_before</a></span>: <span class="kwd">forall</span> <span class="id">n</span> <span class="id">n</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">n</span>' &lt; <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span>)%<span class="id">nat</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#f2b_order">f2b_order</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_before">F2BI_before</a></span> <span class="id">n</span>') (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_before">F2BI_before</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="f2b_order_after">f2b_order_after</a></span>: <span class="kwd">forall</span> <span class="id">n</span> <span class="id">n</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">n</span>' &lt; <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span>)%<span class="id">nat</span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#f2b_order">f2b_order</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_after">F2BI_after</a></span> <span class="id">n</span>') (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_after">F2BI_after</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span>)<br/>
&nbsp;&nbsp;| <span class="id"><a name="f2b_order_switch">f2b_order_switch</a></span>: <span class="kwd">forall</span> <span class="id">n</span> <span class="id">n</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#f2b_order">f2b_order</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_before">F2BI_before</a></span> <span class="id">n</span>') (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_after">F2BI_after</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="wf_f2b_order">wf_f2b_order</a></span>:<br/>
&nbsp;&nbsp;<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#well_founded">well_founded</a></span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_order">f2b_order</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2033')">Proof.</div>
<div class="proofscript" id="proof2033">
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ACC1</span>: <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#Acc">Acc</a></span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_order">f2b_order</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_before">F2BI_before</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">n0</span>; <span class="tactic">pattern</span> <span class="id">n0</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf_ind">lt_wf_ind</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">ACC2</span>: <span class="kwd">forall</span> <span class="id">n</span>, <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Wf.html#Acc">Acc</a></span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_order">f2b_order</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_after">F2BI_after</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">n0</span>; <span class="tactic">pattern</span> <span class="id">n0</span>; <span class="tactic">apply</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Arith.Wf_nat.html#lt_wf_ind">lt_wf_ind</a></span>; <span class="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">constructor</span>; <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">red</span>; <span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">a</span>; <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Constructing the backward simulation </div>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="f2b_match_states">f2b_match_states</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#f2b_index">f2b_index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="f2b_match_at">f2b_match_at</a></span>: <span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#f2b_match_states">f2b_match_states</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_after">F2BI_after</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="f2b_match_before">f2b_match_before</a></span>: <span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>' <span class="id">s2b</span> <span class="id">s2</span> <span class="id">n</span> <span class="id">s2a</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt;  <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> &lt;&gt; <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2b">s2b</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#starN">starN</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2a">s2a</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2b">s2b</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#f2b_match_states">f2b_match_states</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_before">F2BI_before</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="f2b_match_after">f2b_match_after</a></span>: <span class="kwd">forall</span> <span class="id">n</span> <span class="id">s2</span> <span class="id">s2a</span> <span class="id">s1</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#starN">starN</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span>) (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2a">s2a</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2a">s2a</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#f2b_match_states">f2b_match_states</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_after">F2BI_after</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#S">S</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span>)) <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<br/>
<span class="kwd">Remark</span> <span class="id">f2b_match_after</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">n</span> <span class="id">s2</span> <span class="id">s2a</span> <span class="id">s1</span> <span class="id">i</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#starN">starN</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2a">s2a</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2a">s2a</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#f2b_match_states">f2b_match_states</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_after">F2BI_after</a></span> <span class="id"><a href="compcert.common.Smallstep.html#n">n</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2034')">Proof.</div>
<div class="proofscript" id="proof2034">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Backward simulation of L2 steps </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="f2b_simulation_step">f2b_simulation_step</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#f2b_match_states">f2b_match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' \/ (<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#f2b_order">f2b_order</a></span> <span class="id">i</span>' <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Smallstep.html#f2b_match_states">f2b_match_states</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2035')">Proof.</div>
<div class="proofscript" id="proof2035">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>' <span class="id">STEP2</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">MATCH</span> <span class="id">SAFE</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">MATCH</span>.<br/>
- <span class="comment">(*&nbsp;1.&nbsp;At&nbsp;matching&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_progress">f2b_progress</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">TRANS</span>; <span class="id">inv</span> <span class="id">TRANS</span>.<br/>
+ <span class="comment">(*&nbsp;1.1&nbsp;&nbsp;L1&nbsp;can&nbsp;reach&nbsp;final&nbsp;state&nbsp;and&nbsp;L2&nbsp;is&nbsp;at&nbsp;final&nbsp;state:&nbsp;impossible!&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#sd_final_nostep">sd_final_nostep</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L2_determinate">L2_determinate</a></span>); <span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
+ <span class="comment">(*&nbsp;1.2&nbsp;&nbsp;L1&nbsp;can&nbsp;make&nbsp;0&nbsp;or&nbsp;several&nbsp;steps;&nbsp;L2&nbsp;can&nbsp;make&nbsp;1&nbsp;or&nbsp;several&nbsp;matching&nbsp;steps.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_determinacy_inv">f2b_determinacy_inv</a></span>. <span class="id">eexact</span> <span class="id">H5</span>. <span class="id">eexact</span> <span class="id">STEP2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">EQ1</span> [<span class="id">EQ2</span> <span class="id">EQ3</span>]] | [<span class="id">NOT1</span> [<span class="id">NOT2</span> <span class="id">MT</span>]]].<br/>
* <span class="comment">(*&nbsp;1.2.1&nbsp;&nbsp;L2&nbsp;makes&nbsp;a&nbsp;silent&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Smallstep.html#silent_or_not_silent">silent_or_not_silent</a></span> <span class="id">t2</span>).<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;1.2.1.1&nbsp;&nbsp;L1&nbsp;makes&nbsp;a&nbsp;silent&nbsp;transition&nbsp;too:&nbsp;perform&nbsp;transition&nbsp;now&nbsp;and&nbsp;go&nbsp;to&nbsp;"after"&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Smallstep.html#star_starN">star_starN</a></span> <span class="id">H6</span>) <span class="kwd">as</span> [<span class="id">n</span> <span class="id">STEPS2</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_after">F2BI_after</a></span> <span class="id">n</span>); <span class="id">exists</span> <span class="id">s1</span>''; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_right">plus_right</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">f2b_match_after</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;1.2.1.2&nbsp;L1&nbsp;makes&nbsp;a&nbsp;non-silent&nbsp;transition:&nbsp;keep&nbsp;it&nbsp;for&nbsp;later&nbsp;and&nbsp;go&nbsp;to&nbsp;"before"&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Smallstep.html#star_starN">star_starN</a></span> <span class="id">H6</span>) <span class="kwd">as</span> [<span class="id">n</span> <span class="id">STEPS2</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_before">F2BI_before</a></span> <span class="id">n</span>); <span class="id">exists</span> <span class="id">s1</span>'; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_one">star_one</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">eauto</span>.<br/>
* <span class="comment">(*&nbsp;1.2.2&nbsp;L2&nbsp;makes&nbsp;a&nbsp;non-silent&nbsp;transition,&nbsp;and&nbsp;so&nbsp;does&nbsp;L1&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#not_silent_length">not_silent_length</a></span>. <span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Smallstep.html#sr_traces">sr_traces</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1_receptive">L1_receptive</a></span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span> | <span class="id">EQ</span>].<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t2</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#E0_right">E0_right</a></span> <span class="kwd">in</span> <span class="id">H1</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Use&nbsp;receptiveness&nbsp;to&nbsp;equate&nbsp;the&nbsp;traces&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#sr_receptive">sr_receptive</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1_receptive">L1_receptive</a></span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s1</span>''' <span class="id">STEP1</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#fsim_simulation_not_E0">fsim_simulation_not_E0</a></span>. <span class="id">eexact</span> <span class="id">STEP1</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>''' [<span class="id">s2</span>''' [<span class="id">P</span> <span class="id">Q</span>]]]. <span class="id">inv</span> <span class="id">P</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Exploit&nbsp;determinacy&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#not_silent_length">not_silent_length</a></span>. <span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Smallstep.html#sr_traces">sr_traces</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1_receptive">L1_receptive</a></span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span> | <span class="id">EQ</span>].<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t0</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#sd_determ_1">sd_determ_1</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">STEP2</span>. <span class="id">eexact</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">NOT2</span>. <span class="id">inv</span> <span class="id">H8</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t2</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#E0_right">E0_right</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">s4</span> = <span class="id">s2</span>'). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#sd_determ_2">sd_determ_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">subst</span> <span class="id">s4</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Perform&nbsp;transition&nbsp;now&nbsp;and&nbsp;go&nbsp;to&nbsp;"after"&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Smallstep.html#star_starN">star_starN</a></span> <span class="id">H7</span>) <span class="kwd">as</span> [<span class="id">n</span> <span class="id">STEPS2</span>]. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_after">F2BI_after</a></span> <span class="id">n</span>); <span class="id">exists</span> <span class="id">s1</span>'''; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_right">plus_right</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">f2b_match_after</span>'; <span class="tactic">eauto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;2.&nbsp;Before&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_determinacy_inv">f2b_determinacy_inv</a></span>. <span class="id">eexact</span> <span class="id">H4</span>. <span class="id">eexact</span> <span class="id">STEP2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">EQ1</span> [<span class="id">EQ2</span> <span class="id">EQ3</span>]] | [<span class="id">NOT1</span> [<span class="id">NOT2</span> <span class="id">MT</span>]]].<br/>
+ <span class="comment">(*&nbsp;2.1&nbsp;L2&nbsp;makes&nbsp;a&nbsp;silent&nbsp;transition:&nbsp;remain&nbsp;in&nbsp;"before"&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_before">F2BI_before</a></span> <span class="id">n0</span>); <span class="id">exists</span> <span class="id">s1</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="id">constructor</span>. <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_right">star_right</a></span>; <span class="tactic">eauto</span>.<br/>
+ <span class="comment">(*&nbsp;2.2&nbsp;L2&nbsp;make&nbsp;a&nbsp;non-silent&nbsp;transition&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#not_silent_length">not_silent_length</a></span>. <span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Smallstep.html#sr_traces">sr_traces</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1_receptive">L1_receptive</a></span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span> | <span class="id">EQ</span>].<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#E0_right">E0_right</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Use&nbsp;receptiveness&nbsp;to&nbsp;equate&nbsp;the&nbsp;traces&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#sr_receptive">sr_receptive</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1_receptive">L1_receptive</a></span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s1</span>''' <span class="id">STEP1</span>].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#fsim_simulation_not_E0">fsim_simulation_not_E0</a></span>. <span class="id">eexact</span> <span class="id">STEP1</span>. <span class="tactic">auto</span>. <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>''' [<span class="id">s2</span>''' [<span class="id">P</span> <span class="id">Q</span>]]].<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Exploit&nbsp;determinacy&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_determinacy_star">f2b_determinacy_star</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">STEP2</span>. <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intro</span> <span class="id">R</span>. <span class="id">inv</span> <span class="id">R</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#not_silent_length">not_silent_length</a></span>. <span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Smallstep.html#sr_traces">sr_traces</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD.L1_receptive">L1_receptive</a></span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ</span> | <span class="id">EQ</span>].<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#sd_determ_1">sd_determ_1</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">STEP2</span>. <span class="id">eexact</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">elim</span> <span class="id">NOT2</span>. <span class="id">inv</span> <span class="id">H7</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="tactic">rewrite</span> <span class="id"><a href="compcert.common.Events.html#E0_right">E0_right</a></span> <span class="kwd">in</span> *.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">s3</span> = <span class="id">s2</span>'). <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#sd_determ_2">sd_determ_2</a></span>; <span class="tactic">eauto</span>. <span class="tactic">subst</span> <span class="id">s3</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Perform&nbsp;transition&nbsp;now&nbsp;and&nbsp;go&nbsp;to&nbsp;"after"&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> (<span class="id"><a href="compcert.common.Smallstep.html#star_starN">star_starN</a></span> <span class="id">H6</span>) <span class="kwd">as</span> [<span class="id">n</span> <span class="id">STEPS2</span>]. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_after">F2BI_after</a></span> <span class="id">n</span>); <span class="id">exists</span> <span class="id">s1</span>'''; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">f2b_match_after</span>'; <span class="tactic">eauto</span>.<br/>
<br/>
- <span class="comment">(*&nbsp;3.&nbsp;After&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> <span class="id"><a href="compcert.common.Events.html#Eapp_E0_inv">Eapp_E0_inv</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">EQ1</span> <span class="id">EQ2</span>]; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_determinacy_inv">f2b_determinacy_inv</a></span>. <span class="id">eexact</span> <span class="id">H2</span>. <span class="id">eexact</span> <span class="id">STEP2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">EQ1</span> [<span class="id">EQ2</span> <span class="id">EQ3</span>]] | [<span class="id">NOT1</span> [<span class="id">NOT2</span> <span class="id">MT</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">subst</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_after">F2BI_after</a></span> <span class="id">n</span>); <span class="id">exists</span> <span class="id">s1</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="tactic">split</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="id">constructor</span>; <span class="tactic">omega</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id">f2b_match_after</span>'; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">congruence</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#FORWARD_TO_BACKWARD">FORWARD_TO_BACKWARD</a></span>.<br/>
<br/>
<div class="doc">The backward simulation </div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="forward_to_backward_simulation">forward_to_backward_simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L1</span> <span class="id">L2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#receptive">receptive</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#determinate">determinate</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#backward_simulation">backward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2036')">Proof.</div>
<div class="proofscript" id="proof2036">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">FS</span> <span class="id">L1_receptive</span> <span class="id">L2_determinate</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">FS</span> <span class="kwd">as</span> [<span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span> <span class="id">FS</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#Backward_simulation">Backward_simulation</a></span> <span class="kwd">with</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_order">f2b_order</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#f2b_match_states">f2b_match_states</a></span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">match_states</span>); <span class="id">constructor</span>.<br/>
- <span class="comment">(*&nbsp;well&nbsp;founded&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#wf_f2b_order">wf_f2b_order</a></span>.<br/>
- <span class="comment">(*&nbsp;initial&nbsp;states&nbsp;exist&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_match_initial_states">fsim_match_initial_states</a></span> <span class="id">FS</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span> [<span class="id">s2</span> [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>; <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;initial&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_match_initial_states">fsim_match_initial_states</a></span> <span class="id">FS</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span> [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">s2</span> = <span class="id">s2</span>') <span class="tactic">by</span> (<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#sd_initial_determ">sd_initial_determ</a></span>; <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">s2</span>'.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Smallstep.html#F2BI_after">F2BI_after</a></span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#O">O</a></span>); <span class="id">exists</span> <span class="id">s1</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;final&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_progress">f2b_progress</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">TRANS</span>; <span class="id">inv</span> <span class="id">TRANS</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">r0</span> = <span class="id">r</span>) <span class="tactic">by</span> (<span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Smallstep.html#sd_final_determ">sd_final_determ</a></span> <span class="id">L2_determinate</span>); <span class="tactic">eauto</span>). <span class="tactic">subst</span> <span class="id">r0</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s1</span>'; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#sd_final_nostep">sd_final_nostep</a></span> <span class="id">L2_determinate</span>); <span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H5</span>. <span class="tactic">congruence</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#sd_final_nostep">sd_final_nostep</a></span> <span class="id">L2_determinate</span>); <span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H2</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#sd_final_nostep">sd_final_nostep</a></span> <span class="id">L2_determinate</span>); <span class="tactic">eauto</span>. <span class="id">contradiction</span>.<br/>
- <span class="comment">(*&nbsp;progress&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_progress">f2b_progress</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">TRANS</span>; <span class="id">inv</span> <span class="id">TRANS</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">exists</span> <span class="id">r</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H3</span>. <span class="id">right</span>; <span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H4</span>. <span class="tactic">congruence</span>. <span class="id">right</span>; <span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">right</span>; <span class="id">econstructor</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;simulation&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#f2b_simulation_step">f2b_simulation_step</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<h1> Transforming a semantics into a single-event, equivalent semantics </h1>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="well_behaved_traces">well_behaved_traces</a></span> (<span class="id">L</span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s</span> <span class="id">t</span> <span class="id">s</span>', <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="kwd">with</span> <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span> | <span class="id">ev</span> :: <span class="id">t</span>' =&gt; <span class="id"><a href="compcert.common.Events.html#output_trace">output_trace</a></span> <span class="id">t</span>' <span class="kwd">end</span>.<br/>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="ATOMIC">ATOMIC</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="ATOMIC.L">L</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="ATOMIC.Lwb">Lwb</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#well_behaved_traces">well_behaved_traces</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC.L">L</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="atomic_step">atomic_step</a></span> (<span class="id">ge</span>: <span class="id"><a href="compcert.common.Smallstep.html#genvtype">genvtype</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC.L">L</a></span>): (<span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> * <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC.L">L</a></span>) -&gt; <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; (<span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> * <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC.L">L</a></span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="atomic_step_silent">atomic_step_silent</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC.L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#atomic_step">atomic_step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>, <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span>) <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> (<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>, <span class="id">s</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a name="atomic_step_start">atomic_step_start</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">ev</span> <span class="id">t</span> <span class="id">s</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC.L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#ev">ev</a></span> :: <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span>) <span class="id">s</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#atomic_step">atomic_step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>, <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#ev">ev</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span>, <span class="id">s</span>')<br/>
&nbsp;&nbsp;| <span class="id"><a name="atomic_step_continue">atomic_step_continue</a></span>: <span class="kwd">forall</span> <span class="id">ev</span> <span class="id">t</span> <span class="id">s</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#output_trace">output_trace</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#ev">ev</a></span> :: <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#atomic_step">atomic_step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ge">ge</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#ev">ev</a></span> :: <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span>, <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#ev">ev</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span>, <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span>).<br/>
<br/>
<span class="kwd">Definition</span> <span class="id"><a name="atomic">atomic</a></span> : <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span> := {|<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#Semantics_gen">state</a></span> := (<span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> * <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC.L">L</a></span>)%<span class="id">type</span>;<br/>
&nbsp;&nbsp;<span class="id">genvtype</span> := <span class="id"><a href="compcert.common.Smallstep.html#genvtype">genvtype</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC.L">L</a></span>;<br/>
&nbsp;&nbsp;<span class="id">step</span> := <span class="kwd">fun</span> <span class="id">_</span> =&gt; <span class="id"><a href="compcert.common.Smallstep.html#atomic_step">atomic_step</a></span>;<br/>
&nbsp;&nbsp;<span class="id">initial_state</span> := <span class="kwd">fun</span> <span class="id">s</span> =&gt; <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC.L">L</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span>) /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>;<br/>
&nbsp;&nbsp;<span class="id">final_state</span> := <span class="kwd">fun</span> <span class="id">s</span> <span class="id">r</span> =&gt; <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC.L">L</a></span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#snd">snd</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span> /\ <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#fst">fst</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>;<br/>
&nbsp;&nbsp;<span class="id">globalenv</span> := <span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC.L">L</a></span>;<br/>
&nbsp;&nbsp;<span class="id">symbolenv</span> := <span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC.L">L</a></span><br/>
|}.<br/>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#ATOMIC">ATOMIC</a></span>.<br/>
<br/>
<div class="doc">A forward simulation from a semantics <span class="bracket"><span class="id">L1</span></span> to a single-event semantics <span class="bracket"><span class="id">L2</span></span>
  can be "factored" into a forward simulation from <span class="bracket"><span class="id">atomic</span> <span class="id">L1</span></span> to <span class="bracket"><span class="id">L2</span></span>. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="FACTOR_FORWARD_SIMULATION">FACTOR_FORWARD_SIMULATION</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="FACTOR_FORWARD_SIMULATION.L1">L1</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="FACTOR_FORWARD_SIMULATION.L2">L2</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<span class="kwd">Context</span> <span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span> (<span class="id">sim</span>: <span class="id"><a href="compcert.common.Smallstep.html#fsim_properties">fsim_properties</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span>).<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FACTOR_FORWARD_SIMULATION.L2single">L2single</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#single_events">single_events</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L2">L2</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="ffs_match">ffs_match</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.index">index</a></span> -&gt; (<span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> * <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L1">L1</a></span>) -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L2">L2</a></span> -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="ffs_match_at">ffs_match_at</a></span>: <span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#ffs_match">ffs_match</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> (<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>, <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span><br/>
&nbsp;&nbsp;| <span class="id"><a name="ffs_match_buffer">ffs_match_buffer</a></span>: <span class="kwd">forall</span> <span class="id">i</span> <span class="id">ev</span> <span class="id">t</span> <span class="id">s1</span> <span class="id">s2</span> <span class="id">s2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#ev">ev</a></span> :: <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span>) <span class="id">s2</span>' -&gt; <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#ffs_match">ffs_match</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#ev">ev</a></span> :: <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span>, <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>.<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id">star_non_E0_split</span>':<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>', <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">match</span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="kwd">with</span><br/>
&nbsp;&nbsp;| <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span> =&gt; <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Logic.html#True">True</a></span><br/>
&nbsp;&nbsp;| <span class="id">ev</span> :: <span class="id">t</span>' =&gt; <span class="id">exists</span> <span class="id">s2x</span>, <span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> (<span class="id">ev</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s2x">s2x</a></span> /\ <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2x">s2x</a></span> <span class="id">t</span>' <span class="id">s2</span>'<br/>
&nbsp;&nbsp;<span class="kwd">end</span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2037')">Proof.</div>
<div class="proofscript" id="proof2037">
&nbsp;&nbsp;<span class="tactic">induction</span> 1. <span class="tactic">simpl</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L2single">L2single</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> <span class="id">LEN</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">subst</span>. <span class="tactic">destruct</span> <span class="id">t2</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">IHstar</span> <span class="kwd">as</span> [<span class="id">s2x</span> [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">exists</span> <span class="id">s2x</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_left">plus_left</a></span>. <span class="tactic">eauto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t1</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> *. <span class="tactic">subst</span> <span class="id">t</span>. <span class="id">exists</span> <span class="id">s2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_one">plus_one</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">LEN</span>. <span class="id">omegaContradiction</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="ffs_simulation">ffs_simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s1</span>', <span class="id">Step</span> (<span class="id"><a href="compcert.common.Smallstep.html#atomic">atomic</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L1">L1</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#ffs_match">ffs_match</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s2</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' \/ (<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>') /\ <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.order">order</a></span> <span class="id">i</span>' <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span>)<br/>
&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Smallstep.html#ffs_match">ffs_match</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2038')">Proof.</div>
<div class="proofscript" id="proof2038">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
- <span class="comment">(*&nbsp;silent&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_simulation">fsim_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.sim">sim</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>'; <span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;start&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_simulation">fsim_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.sim">sim</a></span>); <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s2</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span> <span class="kwd">as</span> [ | <span class="id">ev</span>' <span class="id">t</span>].<br/>
+ <span class="comment">(*&nbsp;single&nbsp;event&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>'; <span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
+ <span class="comment">(*&nbsp;multiple&nbsp;events&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">C</span>: <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION.L2">L2</a></span> <span class="id">s2</span> (<span class="id">ev</span> :: <span class="id">ev</span>' :: <span class="id">t</span>) <span class="id">s2</span>'). <span class="tactic">intuition</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">star_non_E0_split</span>'. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">s2x</span> [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>'; <span class="id">exists</span> <span class="id">s2x</span>; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;continue&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">star_non_E0_split</span>'. <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">s2x</span> [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>; <span class="id">exists</span> <span class="id">s2</span>'; <span class="tactic">split</span>. <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star_trans">plus_star_trans</a></span>; <span class="tactic">eauto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>; <span class="id">exists</span> <span class="id">s2x</span>; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_FORWARD_SIMULATION">FACTOR_FORWARD_SIMULATION</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="factor_forward_simulation">factor_forward_simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L1</span> <span class="id">L2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#single_events">single_events</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#forward_simulation">forward_simulation</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#atomic">atomic</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span>.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2039')">Proof.</div>
<div class="proofscript" id="proof2039">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">FS</span> <span class="id">L2single</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">FS</span> <span class="kwd">as</span> [<span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span> <span class="id">sim</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#Forward_simulation">Forward_simulation</a></span> <span class="kwd">with</span> <span class="id">order</span> (<span class="id"><a href="compcert.common.Smallstep.html#ffs_match">ffs_match</a></span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">match_states</span>); <span class="id">constructor</span>.<br/>
- <span class="comment">(*&nbsp;wf&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#fsim_order_wf">fsim_order_wf</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;initial&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">s1</span> <span class="kwd">as</span> [<span class="id">t1</span> <span class="id">s1</span>]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">H</span>. <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_match_initial_states">fsim_match_initial_states</a></span> <span class="id">sim</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span> [<span class="id">s2</span> [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>; <span class="id">exists</span> <span class="id">s2</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;final&nbsp;states&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">s1</span> <span class="kwd">as</span> [<span class="id">t1</span> <span class="id">s1</span>]. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">subst</span>. <span class="id">inv</span> <span class="id">H</span>.<br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_match_final_states">fsim_match_final_states</a></span> <span class="id">sim</span>); <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;simulation&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#ffs_simulation">ffs_simulation</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;symbols&nbsp;preserved&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">simpl</span>. <span class="tactic">exact</span> (<span class="id"><a href="compcert.common.Smallstep.html#fsim_public_preserved">fsim_public_preserved</a></span> <span class="id">sim</span>).<br/>
Qed.</div>
<br/>
<div class="doc">Likewise, a backward simulation from a single-event semantics <span class="bracket"><span class="id">L1</span></span> to a semantics <span class="bracket"><span class="id">L2</span></span>
  can be "factored" as a backward simulation from <span class="bracket"><span class="id">L1</span></span> to <span class="bracket"><span class="id">atomic</span> <span class="id">L2</span></span>. </div>
<br/>
<span class="kwd">Section</span> <span class="id"><a name="FACTOR_BACKWARD_SIMULATION">FACTOR_BACKWARD_SIMULATION</a></span>.<br/>
<br/>
<span class="kwd">Variable</span> <span class="id"><a name="FACTOR_BACKWARD_SIMULATION.L1">L1</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<span class="kwd">Variable</span> <span class="id"><a name="FACTOR_BACKWARD_SIMULATION.L2">L2</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>.<br/>
<span class="kwd">Context</span> <span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span> (<span class="id">sim</span>: <span class="id"><a href="compcert.common.Smallstep.html#bsim_properties">bsim_properties</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L2">L2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#index">index</a></span> <span class="id"><a href="compcert.common.Smallstep.html#order">order</a></span> <span class="id"><a href="compcert.common.Smallstep.html#match_states">match_states</a></span>).<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FACTOR_BACKWARD_SIMULATION.L1single">L1single</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#single_events">single_events</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L1">L1</a></span>.<br/>
<span class="kwd">Hypothesis</span> <span class="id"><a name="FACTOR_BACKWARD_SIMULATION.L2wb">L2wb</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#well_behaved_traces">well_behaved_traces</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L2">L2</a></span>.<br/>
<br/>
<span class="kwd">Inductive</span> <span class="id"><a name="fbs_match">fbs_match</a></span>: <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.index">index</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L1">L1</a></span> -&gt; (<span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> * <span class="id"><a href="compcert.common.Smallstep.html#state">state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L2">L2</a></span>) -&gt; <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;| <span class="id"><a name="fbs_match_intro">fbs_match_intro</a></span>: <span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">t</span> <span class="id">s2</span> <span class="id">s1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' -&gt; <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.match_states">match_states</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id">s1</span>' <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> = <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> \/ <span class="id"><a href="compcert.common.Events.html#output_trace">output_trace</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#fbs_match">fbs_match</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span>, <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>).<br/>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fbs_simulation">fbs_simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">s2</span> <span class="id">t</span> <span class="id">s2</span>', <span class="id">Step</span> (<span class="id"><a href="compcert.common.Smallstep.html#atomic">atomic</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L2">L2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>' -&gt;<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#fbs_match">fbs_match</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>', <span class="id">exists</span> <span class="id">s1</span>',<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id">Plus</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' \/ (<span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s1</span>' /\ <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.order">order</a></span> <span class="id">i</span>' <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/\ <span class="id"><a href="compcert.common.Smallstep.html#fbs_match">fbs_match</a></span> <span class="id">i</span>' <span class="id">s1</span>' <span class="id">s2</span>'.<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2040')">Proof.</div>
<div class="proofscript" id="proof2040">
&nbsp;&nbsp;<span class="tactic">induction</span> 1; <span class="tactic">intros</span>.<br/>
- <span class="comment">(*&nbsp;silent&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_simulation">bsim_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.sim">sim</a></span>); <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s1</span>'' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>'; <span class="id">exists</span> <span class="id">s1</span>''; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> [<span class="id">P</span> | [<span class="id">P</span> <span class="id">Q</span>]]. <span class="id">left</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_plus_trans">star_plus_trans</a></span>; <span class="tactic">eauto</span>. <span class="id">right</span>; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;start&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_simulation">bsim_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.sim">sim</a></span>); <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">i</span>' [<span class="id">s1</span>'' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">C</span>: <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L1">L1</a></span> <span class="id">s1</span> (<span class="id">ev</span> :: <span class="id">t</span>) <span class="id">s1</span>'').<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>. <span class="tactic">eauto</span>. <span class="tactic">destruct</span> <span class="id">A</span> <span class="kwd">as</span> [<span class="id">P</span> | [<span class="id">P</span> <span class="id">Q</span>]]. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#plus_star">plus_star</a></span>; <span class="tactic">eauto</span>. <span class="tactic">eauto</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">star_non_E0_split</span>'; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">s1x</span> [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>'; <span class="id">exists</span> <span class="id">s1x</span>; <span class="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L2wb">L2wb</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;continue&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>. <span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="kwd">in</span> <span class="id">H8</span>; <span class="tactic">destruct</span> <span class="id">H8</span>; <span class="tactic">try</span> <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id">star_non_E0_split</span>'; <span class="tactic">eauto</span>. <span class="tactic">simpl</span>. <span class="tactic">intros</span> [<span class="id">s1x</span> [<span class="id">P</span> <span class="id">Q</span>]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>; <span class="id">exists</span> <span class="id">s1x</span>; <span class="tactic">split</span>. <span class="id">left</span>; <span class="tactic">auto</span>. <span class="id">econstructor</span>; <span class="tactic">eauto</span>. <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">tauto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">Lemma</span> <span class="id"><a name="fbs_progress">fbs_progress</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">i</span> <span class="id">s1</span> <span class="id">s2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#fbs_match">fbs_match</a></span> <span class="id"><a href="compcert.common.Smallstep.html#i">i</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#safe">safe</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">r</span>, <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#atomic">atomic</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L2">L2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span>) \/<br/>
&nbsp;&nbsp;(<span class="id">exists</span> <span class="id">t</span>, <span class="id">exists</span> <span class="id">s2</span>', <span class="id">Step</span> (<span class="id"><a href="compcert.common.Smallstep.html#atomic">atomic</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.L2">L2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id">s2</span>').<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2041')">Proof.</div>
<div class="proofscript" id="proof2041">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H</span>. <span class="tactic">destruct</span> <span class="id">t</span>.<br/>
- <span class="comment">(*&nbsp;1.&nbsp;no&nbsp;buffered&nbsp;events&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_progress">bsim_progress</a></span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION.sim">sim</a></span>); <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [[<span class="id">r</span> <span class="id">A</span>] | [<span class="id">t</span> [<span class="id">s2</span>' <span class="id">A</span>]]].<br/>
+ <span class="comment">(*&nbsp;final&nbsp;state&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">left</span>; <span class="id">exists</span> <span class="id">r</span>; <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
+ <span class="comment">(*&nbsp;L2&nbsp;can&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">t</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>; <span class="id">exists</span> (<span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>, <span class="id">s2</span>'). <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> (<span class="id">e</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>); <span class="id">exists</span> (<span class="id">t</span>, <span class="id">s2</span>'). <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;2.&nbsp;some&nbsp;buffered&nbsp;events&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">unfold</span> <span class="id"><a href="compcert.common.Events.html#E0">E0</a></span> <span class="kwd">in</span> <span class="id">H3</span>; <span class="tactic">destruct</span> <span class="id">H3</span>. <span class="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id">right</span>; <span class="id">exists</span> (<span class="id">e</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>); <span class="id">exists</span> (<span class="id">t</span>, <span class="id">s3</span>). <span class="id">constructor</span>. <span class="tactic">auto</span>.<br/>
Qed.</div>
<br/>
<span class="kwd">End</span> <span class="id"><a href="compcert.common.Smallstep.html#FACTOR_BACKWARD_SIMULATION">FACTOR_BACKWARD_SIMULATION</a></span>.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="factor_backward_simulation">factor_backward_simulation</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L1</span> <span class="id">L2</span>,<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#backward_simulation">backward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#single_events">single_events</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#well_behaved_traces">well_behaved_traces</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span> -&gt;<br/>
&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#backward_simulation">backward_simulation</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L1">L1</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#atomic">atomic</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L2">L2</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2042')">Proof.</div>
<div class="proofscript" id="proof2042">
&nbsp;&nbsp;<span class="tactic">intros</span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">BS</span> <span class="id">L1single</span> <span class="id">L2wb</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">BS</span> <span class="kwd">as</span> [<span class="id">index</span> <span class="id">order</span> <span class="id">match_states</span> <span class="id">sim</span>].<br/>
&nbsp;&nbsp;<span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#Backward_simulation">Backward_simulation</a></span> <span class="kwd">with</span> <span class="id">order</span> (<span class="id"><a href="compcert.common.Smallstep.html#fbs_match">fbs_match</a></span> <span class="id">L1</span> <span class="id">L2</span> <span class="id">match_states</span>); <span class="id">constructor</span>.<br/>
- <span class="comment">(*&nbsp;wf&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#bsim_order_wf">bsim_order_wf</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;initial&nbsp;states&nbsp;exist&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_initial_states_exist">bsim_initial_states_exist</a></span> <span class="id">sim</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s2</span> <span class="id">A</span>].<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>, <span class="id">s2</span>). <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;initial&nbsp;states&nbsp;match&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">s2</span> <span class="kwd">as</span> [<span class="id">t</span> <span class="id">s2</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">destruct</span> <span class="id">H0</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_match_initial_states">bsim_match_initial_states</a></span> <span class="id">sim</span>); <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">i</span> [<span class="id">s1</span>' [<span class="id">A</span> <span class="id">B</span>]]].<br/>
&nbsp;&nbsp;<span class="id">exists</span> <span class="id">i</span>; <span class="id">exists</span> <span class="id">s1</span>'; <span class="tactic">split</span>. <span class="tactic">auto</span>. <span class="id">econstructor</span>. <span class="tactic">apply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_refl">star_refl</a></span>. <span class="tactic">auto</span>. <span class="tactic">auto</span>.<br/>
- <span class="comment">(*&nbsp;final&nbsp;states&nbsp;match&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="tactic">destruct</span> <span class="id">s2</span> <span class="kwd">as</span> [<span class="id">t</span> <span class="id">s2</span>]; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H1</span>; <span class="tactic">destruct</span> <span class="id">H1</span>; <span class="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H</span>. <span class="id">exploit</span> (<span class="id"><a href="compcert.common.Smallstep.html#bsim_match_final_states">bsim_match_final_states</a></span> <span class="id">sim</span>); <span class="tactic">eauto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_safe">star_safe</a></span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">intros</span> [<span class="id">s1</span>'' [<span class="id">A</span> <span class="id">B</span>]]. <span class="id">exists</span> <span class="id">s1</span>''; <span class="tactic">split</span>; <span class="tactic">auto</span>. <span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#star_trans">star_trans</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;progress&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#fbs_progress">fbs_progress</a></span>; <span class="tactic">eauto</span>.<br/>
- <span class="comment">(*&nbsp;simulation&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">eapply</span> <span class="id"><a href="compcert.common.Smallstep.html#fbs_simulation">fbs_simulation</a></span>; <span class="tactic">eauto</span>.<br/>
Qed.</div>
<br/>
<div class="doc">Receptiveness of <span class="bracket"><span class="id">atomic</span> <span class="id">L</span></span>. </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="strongly_receptive">strongly_receptive</a></span> (<span class="id">L</span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Strongly_receptive">Strongly_receptive</a></span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="ssr_receptive">ssr_receptive</a></span>: <span class="kwd">forall</span> <span class="id">s</span> <span class="id">ev1</span> <span class="id">t1</span> <span class="id">s1</span> <span class="id">ev2</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#ev1">ev1</a></span> :: <span class="id"><a href="compcert.common.Smallstep.html#t1">t1</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Events.html#match_traces">match_traces</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#ev1">ev1</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#ev2">ev2</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>) -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s2</span>, <span class="id">exists</span> <span class="id">t2</span>, <span class="id">Step</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s">s</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#ev2">ev2</a></span> :: <span class="id"><a href="compcert.common.Smallstep.html#t2">t2</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="ssr_well_behaved">ssr_well_behaved</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#well_behaved_traces">well_behaved_traces</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<span class="kwd">Theorem</span> <span class="id"><a name="atomic_receptive">atomic_receptive</a></span>:<br/>
&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">L</span>, <span class="id"><a href="compcert.common.Smallstep.html#strongly_receptive">strongly_receptive</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> -&gt; <span class="id"><a href="compcert.common.Smallstep.html#receptive">receptive</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#atomic">atomic</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span>).<br/>
<div class="toggleproof" onclick="toggleDisplay('proof2043')">Proof.</div>
<div class="proofscript" id="proof2043">
&nbsp;&nbsp;<span class="tactic">intros</span>. <span class="id">constructor</span>; <span class="tactic">intros</span>.<br/>
<span class="comment">(*&nbsp;receptive&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H0</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;silent&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id">inv</span> <span class="id">H1</span>. <span class="id">exists</span> (<span class="id"><a href="compcert.common.Events.html#E0">E0</a></span>, <span class="id">s</span>'). <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;start&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">exists</span> <span class="id">ev2</span>, <span class="id">t2</span> = <span class="id"><a href="compcert.common.Smallstep.html#ev2">ev2</a></span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>). <span class="id">inv</span> <span class="id">H1</span>; <span class="id">econstructor</span>; <span class="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">destruct</span> <span class="id">H0</span> <span class="kwd">as</span> [<span class="id">ev2</span> <span class="id">EQ</span>]; <span class="tactic">subst</span> <span class="id">t2</span>.<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#ssr_receptive">ssr_receptive</a></span>; <span class="tactic">eauto</span>. <span class="tactic">intros</span> [<span class="id">s2</span> [<span class="id">t2</span> <span class="id">P</span>]].<br/>
&nbsp;&nbsp;<span class="id">exploit</span> <span class="id"><a href="compcert.common.Smallstep.html#ssr_well_behaved">ssr_well_behaved</a></span>. <span class="tactic">eauto</span>. <span class="id">eexact</span> <span class="id">P</span>. <span class="tactic">simpl</span>; <span class="tactic">intros</span> <span class="id">Q</span>.<br/>
&nbsp;&nbsp;<span class="id">exists</span> (<span class="id">t2</span>, <span class="id">s2</span>). <span class="id">constructor</span>; <span class="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;continue&nbsp;step&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H2</span>; <span class="tactic">destruct</span> <span class="id">H2</span>.<br/>
&nbsp;&nbsp;<span class="tactic">assert</span> (<span class="id">t2</span> = <span class="id">ev</span> :: <span class="id"><a href="http://coq.inria.fr/library/Coq.Init.Datatypes.html#nil">nil</a></span>). <span class="id">inv</span> <span class="id">H1</span>; <span class="tactic">simpl</span> <span class="kwd">in</span> <span class="id">H0</span>; <span class="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="tactic">subst</span> <span class="id">t2</span>. <span class="id">exists</span> (<span class="id">t</span>, <span class="id">s0</span>). <span class="id">constructor</span>; <span class="tactic">auto</span>. <span class="tactic">simpl</span>; <span class="tactic">auto</span>.<br/>
<span class="comment">(*&nbsp;single-event&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="tactic">red</span>. <span class="tactic">intros</span>. <span class="id">inv</span> <span class="id">H0</span>; <span class="tactic">simpl</span>; <span class="tactic">omega</span>.<br/>
Qed.</div>
<br/>
<h1> Connections with big-step semantics </h1>
<br/>
<div class="doc">The general form of a big-step semantics </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="bigstep_semantics">bigstep_semantics</a></span> : <span class="kwd">Type</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Bigstep_semantics">Bigstep_semantics</a></span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="bigstep_terminates">bigstep_terminates</a></span>: <span class="id"><a href="compcert.common.Events.html#trace">trace</a></span> -&gt; <span class="id"><a href="compcert.lib.Integers.html#int">int</a></span> -&gt; <span class="kwd">Prop</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="bigstep_diverges">bigstep_diverges</a></span>: <span class="id"><a href="compcert.common.Events.html#traceinf">traceinf</a></span> -&gt; <span class="kwd">Prop</span><br/>
&nbsp;&nbsp;}.<br/>
<br/>
<div class="doc">Soundness with respect to a small-step semantics </div>
<br/>
<span class="kwd">Record</span> <span class="id"><a name="bigstep_sound">bigstep_sound</a></span> (<span class="id">B</span>: <span class="id"><a href="compcert.common.Smallstep.html#bigstep_semantics">bigstep_semantics</a></span>) (<span class="id">L</span>: <span class="id"><a href="compcert.common.Smallstep.html#semantics">semantics</a></span>) : <span class="kwd">Prop</span> :=<br/>
&nbsp;&nbsp;<span class="id"><a name="Bigstep_sound">Bigstep_sound</a></span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="bigstep_terminates_sound">bigstep_terminates_sound</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">t</span> <span class="id">r</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#bigstep_terminates">bigstep_terminates</a></span> <span class="id"><a href="compcert.common.Smallstep.html#B">B</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s1</span>, <span class="id">exists</span> <span class="id">s2</span>, <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> /\ <span class="id">Star</span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#t">t</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#final_state">final_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s2">s2</a></span> <span class="id"><a href="compcert.common.Smallstep.html#r">r</a></span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a name="bigstep_diverges_sound">bigstep_diverges_sound</a></span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="kwd">forall</span> <span class="id">T</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id"><a href="compcert.common.Smallstep.html#bigstep_diverges">bigstep_diverges</a></span> <span class="id"><a href="compcert.common.Smallstep.html#B">B</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span> -&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id">exists</span> <span class="id">s1</span>, <span class="id"><a href="compcert.common.Smallstep.html#initial_state">initial_state</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span> <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> /\ <span class="id"><a href="compcert.common.Smallstep.html#forever">forever</a></span> (<span class="id"><a href="compcert.common.Smallstep.html#step">step</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#symbolenv">symbolenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span>) (<span class="id"><a href="compcert.common.Smallstep.html#globalenv">globalenv</a></span> <span class="id"><a href="compcert.common.Smallstep.html#L">L</a></span>) <span class="id"><a href="compcert.common.Smallstep.html#s1">s1</a></span> <span class="id"><a href="compcert.common.Smallstep.html#T">T</a></span><br/>
}.<br/>
<br/>

</div>
<div class="footer"><hr/>Generated by <a href="https://github.com/xavierleroy/coq2html/">coq2html</div>
</body>
</html>
